(self.webpackChunksuperpowerbearing=self.webpackChunksuperpowerbearing||[]).push([[179],{939:(yt,he,Oe)=>{"use strict";function le(n){return"function"==typeof n}function Ee(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const se=Ee(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function y(n,i){if(n){const t=n.indexOf(i);0<=t&&n.splice(t,1)}}class k{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const h of t)h.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(le(r))try{r()}catch(h){i=h instanceof se?h.errors:[h]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const h of o)try{e(h)}catch(v){i=i??[],v instanceof se?i=[...i,...v.errors]:i.push(v)}}if(i)throw new se(i)}}add(i){var t;if(i&&i!==this)if(this.closed)e(i);else{if(i instanceof k){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(i)}}_hasParent(i){const{_parentage:t}=this;return t===i||Array.isArray(t)&&t.includes(i)}_addParent(i){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(i),t):t?[t,i]:i}_removeParent(i){const{_parentage:t}=this;t===i?this._parentage=null:Array.isArray(t)&&y(t,i)}remove(i){const{_finalizers:t}=this;t&&y(t,i),i instanceof k&&i._removeParent(this)}}k.EMPTY=(()=>{const n=new k;return n.closed=!0,n})();const fe=k.EMPTY;function ee(n){return n instanceof k||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function e(n){le(n)?n():n.unsubscribe()}const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},H={setTimeout(n,i,...t){const{delegate:r}=H;return r?.setTimeout?r.setTimeout(n,i,...t):setTimeout(n,i,...t)},clearTimeout(n){const{delegate:i}=H;return(i?.clearTimeout||clearTimeout)(n)},delegate:void 0};function te(n){H.setTimeout(()=>{const{onUnhandledError:i}=V;if(!i)throw n;i(n)})}function re(){}const f=ae("C",void 0,void 0);function ae(n,i,t){return{kind:n,value:i,error:t}}let oe=null;function W(n){if(V.useDeprecatedSynchronousErrorHandling){const i=!oe;if(i&&(oe={errorThrown:!1,error:null}),n(),i){const{errorThrown:t,error:r}=oe;if(oe=null,t)throw r}}else n()}class O extends k{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,ee(i)&&i.add(this)):this.destination=I}static create(i,t,r){return new q(i,t,r)}next(i){this.isStopped?F(function $(n){return ae("N",n,void 0)}(i),this):this._next(i)}error(i){this.isStopped?F(function c(n){return ae("E",void 0,n)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?F(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const M=Function.prototype.bind;function A(n,i){return M.call(n,i)}class b{constructor(i){this.partialObserver=i}next(i){const{partialObserver:t}=this;if(t.next)try{t.next(i)}catch(r){C(r)}}error(i){const{partialObserver:t}=this;if(t.error)try{t.error(i)}catch(r){C(r)}else C(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(t){C(t)}}}class q extends O{constructor(i,t,r){let o;if(super(),le(i)||!i)o={next:i??void 0,error:t??void 0,complete:r??void 0};else{let h;this&&V.useDeprecatedNextContext?(h=Object.create(i),h.unsubscribe=()=>this.unsubscribe(),o={next:i.next&&A(i.next,h),error:i.error&&A(i.error,h),complete:i.complete&&A(i.complete,h)}):o=i}this.destination=new b(o)}}function C(n){V.useDeprecatedSynchronousErrorHandling?function N(n){V.useDeprecatedSynchronousErrorHandling&&oe&&(oe.errorThrown=!0,oe.error=n)}(n):te(n)}function F(n,i){const{onStoppedNotification:t}=V;t&&H.setTimeout(()=>t(n,i))}const I={closed:!0,next:re,error:function P(n){throw n},complete:re},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(n){return n}function p(n){return 0===n.length?E:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let m=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const h=function G(n){return n&&n instanceof O||function R(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}(n)&&ee(n)}(t)?t:new q(t,r,o);return W(()=>{const{operator:v,source:Q}=this;h.add(v?v.call(h,Q):Q?this._subscribe(h):this._trySubscribe(h))}),h}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=_(r))((o,h)=>{const v=new q({next:Q=>{try{t(Q)}catch(ue){h(ue),v.unsubscribe()}},error:h,complete:o});this.subscribe(v)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[j](){return this}pipe(...t){return p(t)(this)}toPromise(t){return new(t=_(t))((r,o)=>{let h;this.subscribe(v=>h=v,v=>o(v),()=>r(h))})}}return n.create=i=>new n(i),n})();function _(n){var i;return null!==(i=n??V.Promise)&&void 0!==i?i:Promise}const K=Ee(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let U=(()=>{class n extends m{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new z(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new K}next(t){W(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){W(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){W(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:h}=this;return r||o?fe:(this.currentObservers=null,h.push(t),new k(()=>{this.currentObservers=null,y(h,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:h}=this;r?t.error(o):h&&t.complete()}asObservable(){const t=new m;return t.source=this,t}}return n.create=(i,t)=>new z(i,t),n})();class z extends U{constructor(i,t){super(),this.destination=i,this.source=t}next(i){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,i)}error(i){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,i)}complete(){var i,t;null===(t=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===t||t.call(i)}_subscribe(i){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(i))&&void 0!==r?r:fe}}function L(n){return le(n?.lift)}function S(n){return i=>{if(L(i))return i.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function B(n,i,t,r,o){return new J(n,i,t,r,o)}class J extends O{constructor(i,t,r,o,h,v){super(i),this.onFinalize=h,this.shouldUnsubscribe=v,this._next=t?function(Q){try{t(Q)}catch(ue){i.error(ue)}}:super._next,this._error=o?function(Q){try{o(Q)}catch(ue){i.error(ue)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(Q){i.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function ie(n,i){return S((t,r)=>{let o=0;t.subscribe(B(r,h=>{r.next(n.call(i,h,o++))}))})}function Dt(n){return this instanceof Dt?(this.v=n,this):new Dt(n)}function Ge(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=n[Symbol.asyncIterator];return i?i.call(n):(n=function Je(n){var i="function"==typeof Symbol&&Symbol.iterator,t=i&&n[i],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(h){t[h]=n[h]&&function(v){return new Promise(function(Q,ue){!function o(h,v,Q,ue){Promise.resolve(ue).then(function(be){h({value:be,done:Q})},v)}(Q,ue,(v=n[h](v)).done,v.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const at=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function lt(n){return le(n?.then)}function bt(n){return le(n[j])}function Et(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function mt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lt=function kt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function It(n){return le(n?.[Lt])}function Gt(n){return function et(n,i,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,i||[]),h=[];return o={},Q("next"),Q("throw"),Q("return",function v(St){return function(Ot){return Promise.resolve(Ot).then(St,qe)}}),o[Symbol.asyncIterator]=function(){return this},o;function Q(St,Ot){r[St]&&(o[St]=function(zt){return new Promise(function(Xt,cn){h.push([St,zt,Xt,cn])>1||ue(St,zt)})},Ot&&(o[St]=Ot(o[St])))}function ue(St,Ot){try{!function be(St){St.value instanceof Dt?Promise.resolve(St.value.v).then(Re,qe):ft(h[0][2],St)}(r[St](Ot))}catch(zt){ft(h[0][3],zt)}}function Re(St){ue("next",St)}function qe(St){ue("throw",St)}function ft(St,Ot){St(Ot),h.shift(),h.length&&ue(h[0][0],h[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield Dt(t.read());if(o)return yield Dt(void 0);yield yield Dt(r)}}finally{t.releaseLock()}})}function rn(n){return le(n?.getReader)}function un(n){if(n instanceof m)return n;if(null!=n){if(bt(n))return function zn(n){return new m(i=>{const t=n[j]();if(le(t.subscribe))return t.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(at(n))return function Pn(n){return new m(i=>{for(let t=0;t<n.length&&!i.closed;t++)i.next(n[t]);i.complete()})}(n);if(lt(n))return function En(n){return new m(i=>{n.then(t=>{i.closed||(i.next(t),i.complete())},t=>i.error(t)).then(null,te)})}(n);if(Et(n))return Ti(n);if(It(n))return function fi(n){return new m(i=>{for(const t of n)if(i.next(t),i.closed)return;i.complete()})}(n);if(rn(n))return function Li(n){return Ti(Gt(n))}(n)}throw mt(n)}function Ti(n){return new m(i=>{(function Qn(n,i){var t,r,o,h;return function We(n,i,t,r){return new(t||(t=Promise))(function(h,v){function Q(Re){try{be(r.next(Re))}catch(qe){v(qe)}}function ue(Re){try{be(r.throw(Re))}catch(qe){v(qe)}}function be(Re){Re.done?h(Re.value):function o(h){return h instanceof t?h:new t(function(v){v(h)})}(Re.value).then(Q,ue)}be((r=r.apply(n,i||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ge(n);!(r=yield t.next()).done;)if(i.next(r.value),i.closed)return}catch(v){o={error:v}}finally{try{r&&!r.done&&(h=t.return)&&(yield h.call(t))}finally{if(o)throw o.error}}i.complete()})})(n,i).catch(t=>i.error(t))})}function pi(n,i,t,r=0,o=!1){const h=i.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(h),!o)return h}function _i(n,i,t=1/0){return le(i)?_i((r,o)=>ie((h,v)=>i(r,h,o,v))(un(n(r,o))),t):("number"==typeof i&&(t=i),S((r,o)=>function ji(n,i,t,r,o,h,v,Q){const ue=[];let be=0,Re=0,qe=!1;const ft=()=>{qe&&!ue.length&&!be&&i.complete()},St=zt=>be<r?Ot(zt):ue.push(zt),Ot=zt=>{h&&i.next(zt),be++;let Xt=!1;un(t(zt,Re++)).subscribe(B(i,cn=>{o?.(cn),h?St(cn):i.next(cn)},()=>{Xt=!0},void 0,()=>{if(Xt)try{for(be--;ue.length&&be<r;){const cn=ue.shift();v?pi(i,v,()=>Ot(cn)):Ot(cn)}ft()}catch(cn){i.error(cn)}}))};return n.subscribe(B(i,St,()=>{qe=!0,ft()})),()=>{Q?.()}}(r,o,n,t)))}function lr(n=1/0){return _i(E,n)}const Bi=new m(n=>n.complete());function uo(n){return n[n.length-1]}function br(n){return le(uo(n))?n.pop():void 0}function kr(n){return function ko(n){return n&&le(n.schedule)}(uo(n))?n.pop():void 0}function ts(n,i=0){return S((t,r)=>{t.subscribe(B(r,o=>pi(r,n,()=>r.next(o),i),()=>pi(r,n,()=>r.complete(),i),o=>pi(r,n,()=>r.error(o),i)))})}function Ir(n,i=0){return S((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),i))})}function ba(n,i){if(!n)throw new Error("Iterable cannot be null");return new m(t=>{pi(t,i,()=>{const r=n[Symbol.asyncIterator]();pi(t,i,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function $t(n,i){return i?function Jt(n,i){if(null!=n){if(bt(n))return function cl(n,i){return un(n).pipe(Ir(i),ts(i))}(n,i);if(at(n))return function wr(n,i){return new m(t=>{let r=0;return i.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,i);if(lt(n))return function Io(n,i){return un(n).pipe(Ir(i),ts(i))}(n,i);if(Et(n))return ba(n,i);if(It(n))return function sa(n,i){return new m(t=>{let r;return pi(t,i,()=>{r=n[Lt](),pi(t,i,()=>{let o,h;try{({value:o,done:h}=r.next())}catch(v){return void t.error(v)}h?t.complete():t.next(o)},0,!0)}),()=>le(r?.return)&&r.return()})}(n,i);if(rn(n))return function Zt(n,i){return ba(Gt(n),i)}(n,i)}throw mt(n)}(n,i):un(n)}class sn extends U{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const t=super._subscribe(i);return!t.closed&&i.next(this._value),t}getValue(){const{hasError:i,thrownError:t,_value:r}=this;if(i)throw t;return this._throwIfClosed(),r}next(i){super.next(this._value=i)}}function tn(...n){return $t(n,kr(n))}function Wn(n={}){const{connector:i=(()=>new U),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return h=>{let v,Q,ue,be=0,Re=!1,qe=!1;const ft=()=>{Q?.unsubscribe(),Q=void 0},St=()=>{ft(),v=ue=void 0,Re=qe=!1},Ot=()=>{const zt=v;St(),zt?.unsubscribe()};return S((zt,Xt)=>{be++,!qe&&!Re&&ft();const cn=ue=ue??i();Xt.add(()=>{be--,0===be&&!qe&&!Re&&(Q=vn(Ot,o))}),cn.subscribe(Xt),!v&&be>0&&(v=new q({next:Wt=>cn.next(Wt),error:Wt=>{qe=!0,ft(),Q=vn(St,t,Wt),cn.error(Wt)},complete:()=>{Re=!0,ft(),Q=vn(St,r),cn.complete()}}),un(zt).subscribe(v))})(h)}}function vn(n,i,...t){if(!0===i)return void n();if(!1===i)return;const r=new q({next:()=>{r.unsubscribe(),n()}});return un(i(...t)).subscribe(r)}function fn(n,i){return S((t,r)=>{let o=null,h=0,v=!1;const Q=()=>v&&!o&&r.complete();t.subscribe(B(r,ue=>{o?.unsubscribe();let be=0;const Re=h++;un(n(ue,Re)).subscribe(o=B(r,qe=>r.next(i?i(ue,qe,Re,be++):qe),()=>{o=null,Q()}))},()=>{v=!0,Q()}))})}function mi(n,i){return n===i}function Dn(n){for(let i in n)if(n[i]===Dn)return i;throw Error("Could not find renamed property on target object.")}function zi(n,i){for(const t in i)i.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=i[t])}function oi(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(oi).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const t=i.indexOf("\n");return-1===t?i:i.substring(0,t)}function wi(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Mi=Dn({__forward_ref__:Dn});function Mn(n){return n.__forward_ref__=Mn,n.toString=function(){return oi(this())},n}function an(n){return sr(n)?n():n}function sr(n){return"function"==typeof n&&n.hasOwnProperty(Mi)&&n.__forward_ref__===Mn}function li(n){return n&&!!n.\u0275providers}const ki="https://g.co/ng/security#xss";class qt extends Error{constructor(i,t){super(function ws(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,t)),this.code=i}}function jn(n){return"string"==typeof n?n:null==n?"":String(n)}function ul(n,i){throw new qt(-201,!1)}function Fs(n,i){null==n&&function ni(n,i,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${i} <=Actual]`))}(i,n,null,"!=")}function Bn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nc(n){return gd(n,Yl)||gd(n,qu)}function gd(n,i){return n.hasOwnProperty(i)?n[i]:null}function hl(n){return n&&(n.hasOwnProperty(Bc)||n.hasOwnProperty(yd))?n[Bc]:null}const Yl=Dn({\u0275prov:Dn}),Bc=Dn({\u0275inj:Dn}),qu=Dn({ngInjectableDef:Dn}),yd=Dn({ngInjectorDef:Dn});var hi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(hi||{});let zc;function Rs(n){const i=zc;return zc=n,i}function Wu(n,i,t){const r=Nc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&hi.Optional?null:void 0!==i?i:void ul(oi(n))}const ar=globalThis;class Rn{constructor(i,t){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Bn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Po={},Hi="__NG_DI_FLAG__",fl="ngTempTokenPath",Yu=/\n/gm,Ki="__source";let La;function Na(n){const i=La;return La=n,i}function Gc(n,i=hi.Default){if(void 0===La)throw new qt(-203,!1);return null===La?Wu(n,void 0,i):La.get(n,i&hi.Optional?null:void 0,i)}function On(n,i=hi.Default){return(function vd(){return zc}()||Gc)(an(n),i)}function dn(n,i=hi.Default){return On(n,wa(i))}function wa(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ka(n){const i=[];for(let t=0;t<n.length;t++){const r=an(n[t]);if(Array.isArray(r)){if(0===r.length)throw new qt(900,!1);let o,h=hi.Default;for(let v=0;v<r.length;v++){const Q=r[v],ue=Ku(Q);"number"==typeof ue?-1===ue?o=Q.token:h|=ue:o=Q}i.push(On(o,h))}else i.push(On(r))}return i}function ns(n,i){return n[Hi]=i,n.prototype[Hi]=i,n}function Ku(n){return n[Hi]}function Cs(n){return{toString:n}.toString()}var Fo=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fo||{}),Os=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Os||{});const Ls={},Pi=[],Ql=Dn({\u0275cmp:Dn}),po=Dn({\u0275dir:Dn}),Ja=Dn({\u0275pipe:Dn}),qc=Dn({\u0275mod:Dn}),Ns=Dn({\u0275fac:Dn}),Ci=Dn({__NG_ELEMENT_ID__:Dn}),pl=Dn({__NG_ENV_ID__:Dn});function Qu(n,i,t){let r=n.length;for(;;){const o=n.indexOf(i,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const h=i.length;if(o+h===r||n.charCodeAt(o+h)<=32)return o}t=o+1}}function Wc(n,i,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const h=t[r++],v=t[r++],Q=t[r++];n.setAttribute(i,v,Q,h)}else{const h=o,v=t[++r];ec(h)?n.setProperty(i,h,v):n.setAttribute(i,h,v),r++}}return r}function go(n){return 3===n||4===n||6===n}function ec(n){return 64===n.charCodeAt(0)}function mo(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let t=-1;for(let r=0;r<i.length;r++){const o=i[r];"number"==typeof o?t=o:0===t||Xc(n,t,o,null,-1===t||2===t?i[++r]:null)}}return n}function Xc(n,i,t,r,o){let h=0,v=n.length;if(-1===i)v=-1;else for(;h<n.length;){const Q=n[h++];if("number"==typeof Q){if(Q===i){v=-1;break}if(Q>i){v=h-1;break}}}for(;h<n.length;){const Q=n[h];if("number"==typeof Q)break;if(Q===t){if(null===r)return void(null!==o&&(n[h+1]=o));if(r===n[h+1])return void(n[h+2]=o)}h++,null!==r&&h++,null!==o&&h++}-1!==v&&(n.splice(v,0,i),h=v+1),n.splice(h++,0,t),null!==r&&n.splice(h++,0,r),null!==o&&n.splice(h++,0,o)}const Zc="ng-template";function Yc(n,i,t){let r=0,o=!0;for(;r<n.length;){let h=n[r++];if("string"==typeof h&&o){const v=n[r++];if(t&&"class"===h&&-1!==Qu(v.toLowerCase(),i,0))return!0}else{if(1===h){for(;r<n.length&&"string"==typeof(h=n[r++]);)if(h.toLowerCase()===i)return!0;return!1}"number"==typeof h&&(o=!1)}}return!1}function gl(n){return 4===n.type&&n.value!==Zc}function Ro(n,i,t){return i===(4!==n.type||t?n.value:Zc)}function eh(n,i,t){let r=4;const o=n.attrs||[],h=function ml(n){for(let i=0;i<n.length;i++)if(go(n[i]))return i;return n.length}(o);let v=!1;for(let Q=0;Q<i.length;Q++){const ue=i[Q];if("number"!=typeof ue){if(!v)if(4&r){if(r=2|1&r,""!==ue&&!Ro(n,ue,t)||""===ue&&1===i.length){if(Ws(r))return!1;v=!0}}else{const be=8&r?ue:i[++Q];if(8&r&&null!==n.attrs){if(!Yc(n.attrs,be,t)){if(Ws(r))return!1;v=!0}continue}const qe=Cd(8&r?"class":ue,o,gl(n),t);if(-1===qe){if(Ws(r))return!1;v=!0;continue}if(""!==be){let ft;ft=qe>h?"":o[qe+1].toLowerCase();const St=8&r?ft:null;if(St&&-1!==Qu(St,be,0)||2&r&&be!==ft){if(Ws(r))return!1;v=!0}}}}else{if(!v&&!Ws(r)&&!Ws(ue))return!1;if(v&&Ws(ue))continue;v=!1,r=ue|1&r}}return Ws(r)||v}function Ws(n){return 0==(1&n)}function Cd(n,i,t,r){if(null===i)return-1;let o=0;if(r||!t){let h=!1;for(;o<i.length;){const v=i[o];if(v===n)return o;if(3===v||6===v)h=!0;else{if(1===v||2===v){let Q=i[++o];for(;"string"==typeof Q;)Q=i[++o];continue}if(4===v)break;if(0===v){o+=4;continue}}o+=h?1:2}return-1}return function Jc(n,i){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===i)return t;t++}return-1}(i,n)}function tc(n,i,t=!1){for(let r=0;r<i.length;r++)if(eh(n,i[r],t))return!0;return!1}function yl(n,i){return n?":not("+i.trim()+")":i}function th(n){let i=n[0],t=1,r=2,o="",h=!1;for(;t<n.length;){let v=n[t];if("string"==typeof v)if(2&r){const Q=n[++t];o+="["+v+(Q.length>0?'="'+Q+'"':"")+"]"}else 8&r?o+="."+v:4&r&&(o+=" "+v);else""!==o&&!Ws(v)&&(i+=yl(h,o),o=""),r=v,h=h||!Ws(r);t++}return""!==o&&(i+=yl(h,o)),i}function Ni(n){return Cs(()=>{const i=xl(n),t={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Os.Emulated,styles:n.styles||Pi,_:null,schemas:n.schemas||null,tView:null,id:""};_l(t);const r=n.dependencies;return t.directiveDefs=bl(r,!1),t.pipeDefs=bl(r,!0),t.id=function ah(n){let i=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const o of t)i=Math.imul(31,i)+o.charCodeAt(0)<<0;return i+=2147483648,"c"+i}(t),t})}function vl(n){return Ei(n)||Rr(n)}function rh(n){return null!==n}function jr(n){return Cs(()=>({type:n.type,bootstrap:n.bootstrap||Pi,declarations:n.declarations||Pi,imports:n.imports||Pi,exports:n.exports||Pi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ji(n,i){if(null==n)return Ls;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],h=o;Array.isArray(o)&&(h=o[1],o=o[0]),t[o]=r,i&&(i[o]=h)}return t}function kn(n){return Cs(()=>{const i=xl(n);return _l(i),i})}function Ei(n){return n[Ql]||null}function Rr(n){return n[po]||null}function is(n){return n[Ja]||null}function rs(n,i){const t=n[qc]||null;if(!t&&!0===i)throw new Error(`Type ${oi(n)} does not have '\u0275mod' property.`);return t}function xl(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||Ls,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Pi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ji(n.inputs,i),outputs:Ji(n.outputs)}}function _l(n){n.features?.forEach(i=>i(n))}function bl(n,i){if(!n)return null;const t=i?is:vl;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(rh)}const gr=0,Cn=1,ui=2,ur=3,Xs=4,wl=5,Hr=6,yo=7,yr=8,la=9,Oo=10,Kn=11,As=12,eu=13,hs=14,Gi=15,nc=16,vo=17,Ba=18,ic=19,tu=20,Zs=21,Gr=22,Tn=23,Cl=24,xi=25,Lo=1,Ca=2,Sa=7,xo=9,$r=11;function Es(n){return Array.isArray(n)&&"object"==typeof n[Lo]}function Sr(n){return Array.isArray(n)&&!0===n[Lo]}function nu(n){return 0!=(4&n.flags)}function Qa(n){return n.componentOffset>-1}function Aa(n){return 1==(1&n.flags)}function Di(n){return!!n.template}function Sl(n){return 0!=(512&n[ui])}function ot(n,i){return n.hasOwnProperty(Ns)?n[Ns]:null}const ht=Symbol("SIGNAL");function gt(n,i){return(null===n||"object"!=typeof n)&&Object.is(n,i)}let Ct=null,Mt=!1;function vt(n){const i=Ct;return Ct=n,i}const Pt={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Nt(n){if(Mt)throw new Error("");if(null===Ct)return;const i=Ct.nextProducerIndex++;Yn(Ct),i<Ct.producerNode.length&&Ct.producerNode[i]!==n&&xn(Ct)&&gn(Ct.producerNode[i],Ct.producerIndexOfThis[i]),Ct.producerNode[i]!==n&&(Ct.producerNode[i]=n,Ct.producerIndexOfThis[i]=xn(Ct)?ii(n,Ct,i):0),Ct.producerLastReadVersion[i]=n.version}function Vt(n){if(!xn(n)||n.dirty){if(!n.producerMustRecompute(n)&&!hn(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Kt(n){if(void 0===n.liveConsumerNode)return;const i=Mt;Mt=!0;try{for(const t of n.liveConsumerNode)t.dirty||Sn(t)}finally{Mt=i}}function nn(){return!1!==Ct?.consumerAllowSignalWrites}function Sn(n){n.dirty=!0,Kt(n),n.consumerMarkedDirty?.(n)}function An(n){return n&&(n.nextProducerIndex=0),vt(n)}function ln(n,i){if(vt(i),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(xn(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gn(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hn(n){Yn(n);for(let i=0;i<n.producerNode.length;i++){const t=n.producerNode[i],r=n.producerLastReadVersion[i];if(r!==t.version||(Vt(t),r!==t.version))return!0}return!1}function Ln(n){if(Yn(n),xn(n))for(let i=0;i<n.producerNode.length;i++)gn(n.producerNode[i],n.producerIndexOfThis[i]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ii(n,i,t){if(er(n),Yn(n),0===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=ii(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(i)-1}function gn(n,i){if(er(n),Yn(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)gn(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[i]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[i]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,i<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[i],o=n.liveConsumerNode[i];Yn(o),o.producerIndexOfThis[r]=i}}function xn(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yn(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function er(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}let Ds=function or(){throw new Error};function ss(){Ds()}let qr=null;function Bs(n,i){const t=Object.create(iu);function r(){return Nt(t),t.value}return t.value=n,i?.equal&&(t.equal=i.equal),r.set=_o,r.update=ru,r.mutate=ch,r.asReadonly=as,r[ht]=t,r}const iu=(()=>({...Pt,equal:gt,readonlyFn:void 0}))();function No(n){n.version++,Kt(n),qr?.()}function _o(n){const i=this[ht];nn()||ss(),i.equal(i.value,n)||(i.value=n,No(i))}function ru(n){nn()||ss(),_o.call(this,n(this[ht].value))}function ch(n){const i=this[ht];nn()||ss(),n(i.value),No(i)}function as(){const n=this[ht];if(void 0===n.readonlyFn){const i=()=>this();i[ht]=n,n.readonlyFn=i}return n.readonlyFn}const Bo=()=>{},ps=(()=>({...Pt,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Bo}))();class Wr{constructor(i,t,r){this.previousValue=i,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ei(){return zo}function zo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Nr),uh}function uh(){const n=ac(this),i=n?.current;if(i){const t=n.previous;if(t===Ls)n.previous=i;else for(let r in i)t[r]=i[r];n.current=null,this.ngOnChanges(i)}}function Nr(n,i,t,r){const o=this.declaredInputs[t],h=ac(n)||function su(n,i){return n[hh]=i}(n,{previous:Ls,current:null}),v=h.current||(h.current={}),Q=h.previous,ue=Q[o];v[o]=new Wr(ue&&ue.currentValue,i,Q===Ls),n[r]=i}ei.ngInherit=!0;const hh="__ngSimpleChanges__";function ac(n){return n[hh]||null}const ua=function(n,i,t){};function $i(n){for(;Array.isArray(n);)n=n[gr];return n}function dh(n,i){return $i(i[n])}function zs(n,i){return $i(i[n.index])}function Tl(n,i){return n.data[i]}function ha(n,i){const t=i[n];return Es(t)?t:t[gr]}function Ua(n,i){return null==i?null:n[i]}function oc(n){n[vo]=0}function Vo(n){1024&n[ui]||(n[ui]|=1024,jo(n,1))}function Va(n){1024&n[ui]&&(n[ui]&=-1025,jo(n,-1))}function jo(n,i){let t=n[ur];if(null===t)return;t[wl]+=i;let r=t;for(t=t[ur];null!==t&&(1===i&&1===r[wl]||-1===i&&0===r[wl]);)t[wl]+=i,r=t,t=t[ur]}const ci={lFrame:hp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ml(){return ci.bindingsEnabled}function en(){return ci.lFrame.lView}function Ui(){return ci.lFrame.tView}function fh(n){return ci.lFrame.contextLView=n,n[yr]}function Td(n){return ci.lFrame.contextLView=null,n}function gs(){let n=uc();for(;null!==n&&64===n.type;)n=n.parent;return n}function uc(){return ci.lFrame.currentTNode}function da(n,i){const t=ci.lFrame;t.currentTNode=n,t.isParent=i}function lu(){return ci.lFrame.isParent}function cu(){ci.lFrame.isParent=!1}function hc(){return ci.lFrame.bindingIndex++}function Da(n){const i=ci.lFrame,t=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,t}function Jy(n,i){const t=ci.lFrame;t.bindingIndex=t.bindingRootIndex=n,kd(i)}function kd(n){ci.lFrame.currentDirectiveIndex=n}function Id(n){const i=ci.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function og(){return ci.lFrame.currentQueryIndex}function mh(n){ci.lFrame.currentQueryIndex=n}function lg(n){const i=n[Cn];return 2===i.type?i.declTNode:1===i.type?n[Hr]:null}function Pd(n,i,t){if(t&hi.SkipSelf){let o=i,h=n;for(;!(o=o.parent,null!==o||t&hi.Host||(o=lg(h),null===o||(h=h[hs],10&o.type))););if(null===o)return!1;i=o,n=h}const r=ci.lFrame=pa();return r.currentTNode=i,r.lView=n,!0}function dc(n){const i=pa(),t=n[Cn];ci.lFrame=i,i.currentTNode=t.firstChild,i.lView=n,i.tView=t,i.contextLView=n,i.bindingIndex=t.bindingStartIndex,i.inI18n=!1}function pa(){const n=ci.lFrame,i=null===n?null:n.child;return null===i?hp(n):i}function hp(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function cg(){const n=ci.lFrame;return ci.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const dp=cg;function fp(){const n=cg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ys(){return ci.lFrame.selectedIndex}function Go(n){ci.lFrame.selectedIndex=n}function mr(){const n=ci.lFrame;return Tl(n.tView,n.selectedIndex)}let dg=!0;function Fd(){return dg}function kl(n){dg=n}function Rd(n,i){for(let t=i.directiveStart,r=i.directiveEnd;t<r;t++){const h=n.data[t].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:Q,ngAfterViewInit:ue,ngAfterViewChecked:be,ngOnDestroy:Re}=h;v&&(n.contentHooks??=[]).push(-t,v),Q&&((n.contentHooks??=[]).push(t,Q),(n.contentCheckHooks??=[]).push(t,Q)),ue&&(n.viewHooks??=[]).push(-t,ue),be&&((n.viewHooks??=[]).push(t,be),(n.viewCheckHooks??=[]).push(t,be)),null!=Re&&(n.destroyHooks??=[]).push(t,Re)}}function uu(n,i,t){fg(n,i,3,t)}function Od(n,i,t,r){(3&n[ui])===t&&fg(n,i,t,r)}function Il(n,i){let t=n[ui];(3&t)===i&&(t&=8191,t+=1,n[ui]=t)}function fg(n,i,t,r){const h=r??-1,v=i.length-1;let Q=0;for(let ue=void 0!==r?65535&n[vo]:0;ue<v;ue++)if("number"==typeof i[ue+1]){if(Q=i[ue],null!=r&&Q>=r)break}else i[ue]<0&&(n[vo]+=65536),(Q<h||-1==h)&&(Ld(n,t,i,ue),n[vo]=(4294901760&n[vo])+ue+2),ue++}function Ar(n,i){ua(4,n,i);const t=vt(null);try{i.call(n)}finally{vt(t),ua(5,n,i)}}function Ld(n,i,t,r){const o=t[r]<0,h=t[r+1],Q=n[o?-t[r]:t[r]];o?n[ui]>>13<n[vo]>>16&&(3&n[ui])===i&&(n[ui]+=8192,Ar(Q,h)):Ar(Q,h)}const pc=-1;class Pl{constructor(i,t,r){this.factory=i,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function xh(n){return n!==pc}function gc(n){return 32767&n}function hu(n,i){let t=function gp(n){return n>>16}(n),r=i;for(;t>0;)r=r[hs],t--;return r}let Ud=!0;function Vd(n){const i=Ud;return Ud=n,i}const gg=255,mg=5;let sv=0;const Ms={};function _h(n,i){const t=yg(n,i);if(-1!==t)return t;const r=i[Cn];r.firstCreatePass&&(n.injectorIndex=i.length,Fl(r.data,n),Fl(i,null),Fl(r.blueprint,null));const o=jd(n,i),h=n.injectorIndex;if(xh(o)){const v=gc(o),Q=hu(o,i),ue=Q[Cn].data;for(let be=0;be<8;be++)i[h+be]=Q[v+be]|ue[v+be]}return i[h+8]=o,h}function Fl(n,i){n.push(0,0,0,0,0,0,0,0,i)}function yg(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function jd(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=i;for(;null!==o;){if(r=Sg(o),null===r)return pc;if(t++,o=o[hs],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return pc}function mp(n,i,t){!function av(n,i,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ci)&&(r=t[Ci]),null==r&&(r=t[Ci]=sv++);const o=r&gg;i.data[n+(o>>mg)]|=1<<o}(n,i,t)}function yp(n,i,t){if(t&hi.Optional||void 0!==n)return n;ul()}function xg(n,i,t,r){if(t&hi.Optional&&void 0===r&&(r=null),!(t&(hi.Self|hi.Host))){const o=n[la],h=Rs(void 0);try{return o?o.get(i,r,t&hi.Optional):Wu(i,r,t&hi.Optional)}finally{Rs(h)}}return yp(r,0,t)}function _g(n,i,t,r=hi.Default,o){if(null!==n){if(2048&i[ui]&&!(r&hi.Self)){const v=function cv(n,i,t,r,o){let h=n,v=i;for(;null!==h&&null!==v&&2048&v[ui]&&!(512&v[ui]);){const Q=bg(h,v,t,r|hi.Self,Ms);if(Q!==Ms)return Q;let ue=h.parent;if(!ue){const be=v[tu];if(be){const Re=be.get(t,Ms,r);if(Re!==Ms)return Re}ue=Sg(v),v=v[hs]}h=ue}return o}(n,i,t,r,Ms);if(v!==Ms)return v}const h=bg(n,i,t,r,Ms);if(h!==Ms)return h}return xg(i,t,r,o)}function bg(n,i,t,r,o){const h=function vp(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ci)?n[Ci]:void 0;return"number"==typeof i?i>=0?i&gg:bh:i}(t);if("function"==typeof h){if(!Pd(i,n,r))return r&hi.Host?yp(o,0,r):xg(i,t,r,o);try{let v;if(v=h(r),null!=v||r&hi.Optional)return v;ul()}finally{dp()}}else if("number"==typeof h){let v=null,Q=yg(n,i),ue=pc,be=r&hi.Host?i[Gi][Hr]:null;for((-1===Q||r&hi.SkipSelf)&&(ue=-1===Q?jd(n,i):i[Q+8],ue!==pc&&Cg(r,!1)?(v=i[Cn],Q=gc(ue),i=hu(ue,i)):Q=-1);-1!==Q;){const Re=i[Cn];if(wg(h,Q,Re.data)){const qe=ov(Q,i,t,v,r,be);if(qe!==Ms)return qe}ue=i[Q+8],ue!==pc&&Cg(r,i[Cn].data[Q+8]===be)&&wg(h,Q,i)?(v=Re,Q=gc(ue),i=hu(ue,i)):Q=-1}}return o}function ov(n,i,t,r,o,h){const v=i[Cn],Q=v.data[n+8],Re=du(Q,v,t,null==r?Qa(Q)&&Ud:r!=v&&0!=(3&Q.type),o&hi.Host&&h===Q);return null!==Re?to(i,v,Re,Q):Ms}function du(n,i,t,r,o){const h=n.providerIndexes,v=i.data,Q=1048575&h,ue=n.directiveStart,Re=h>>20,ft=o?Q+Re:n.directiveEnd;for(let St=r?Q:Q+Re;St<ft;St++){const Ot=v[St];if(St<ue&&t===Ot||St>=ue&&Ot.type===t)return St}if(o){const St=v[ue];if(St&&Di(St)&&St.type===t)return ue}return null}function to(n,i,t,r){let o=n[t];const h=i.data;if(function Nd(n){return n instanceof Pl}(o)){const v=o;v.resolving&&function Wi(n,i){const t=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new qt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Xn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():jn(n)}(h[t]));const Q=Vd(v.canSeeViewProviders);v.resolving=!0;const be=v.injectImpl?Rs(v.injectImpl):null;Pd(n,r,hi.Default);try{o=n[t]=v.factory(void 0,h,n,r),i.firstCreatePass&&t>=r.directiveStart&&function nv(n,i,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:h}=i.type.prototype;if(r){const v=zo(i);(t.preOrderHooks??=[]).push(n,v),(t.preOrderCheckHooks??=[]).push(n,v)}o&&(t.preOrderHooks??=[]).push(0-n,o),h&&((t.preOrderHooks??=[]).push(n,h),(t.preOrderCheckHooks??=[]).push(n,h))}(t,h[t],i)}finally{null!==be&&Rs(be),Vd(Q),v.resolving=!1,dp()}}return o}function wg(n,i,t){return!!(t[i+(n>>mg)]&1<<n)}function Cg(n,i){return!(n&hi.Self||n&hi.Host&&i)}class Ks{constructor(i,t){this._tNode=i,this._lView=t}get(i,t,r){return _g(this._tNode,this._lView,i,wa(r),t)}}function bh(){return new Ks(gs(),en())}function ms(n){return Cs(()=>{const i=n.prototype.constructor,t=i[Ns]||xp(i),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const h=o[Ns]||xp(o);if(h&&h!==t)return h;o=Object.getPrototypeOf(o)}return h=>new h})}function xp(n){return sr(n)?()=>{const i=xp(an(n));return i&&i()}:ot(n)}function Sg(n){const i=n[Cn],t=i.type;return 2===t?i.declTNode:1===t?n[Hr]:null}const gu="__parameters__";function yc(n,i,t){return Cs(()=>{const r=function $d(n){return function(...t){if(n){const r=n(...t);for(const o in r)this[o]=r[o]}}}(i);function o(...h){if(this instanceof o)return r.apply(this,h),this;const v=new o(...h);return Q.annotation=v,Q;function Q(ue,be,Re){const qe=ue.hasOwnProperty(gu)?ue[gu]:Object.defineProperty(ue,gu,{value:[]})[gu];for(;qe.length<=Re;)qe.push(null);return(qe[Re]=qe[Re]||[]).push(v),ue}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function Oi(n,i){n.forEach(t=>Array.isArray(t)?Oi(t,i):i(t))}function qd(n,i,t){i>=n.length?n.push(t):n.splice(i,0,t)}function wh(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Ma(n,i,t){let r=vu(n,i);return r>=0?n[1|r]=t:(r=~r,function Eg(n,i,t,r){let o=n.length;if(o==i)n.push(t,r);else if(1===o)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>i;)n[o]=n[o-2],o--;n[i]=t,n[i+1]=r}}(n,r,i,t)),r}function bp(n,i){const t=vu(n,i);if(t>=0)return n[1|t]}function vu(n,i){return function Dg(n,i,t){let r=0,o=n.length>>t;for(;o!==r;){const h=r+(o-r>>1),v=n[h<<t];if(i===v)return h<<t;v>i?o=h:r=h+1}return~(o<<t)}(n,i,1)}const Xd=ns(yc("Optional"),8),Ah=ns(yc("SkipSelf"),4);function Fh(n){return 128==(128&n.flags)}var Ll=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ll||{});const Sv=/^>|^->|<!--|-->|--!>|<!-$/g,Av=/(<|>)/g,Ep="\u200b$1\u200b";const tf=new Map;let Vg=0;const Qs="__ngContext__";function Xr(n,i){Es(i)?(n[Qs]=i[ic],function Hg(n){tf.set(n[ic],n)}(i)):n[Qs]=i}let rf;function sf(n,i){return rf(n,i)}function Oh(n){const i=n[ur];return Sr(i)?i[ur]:i}function Fp(n){return Rp(n[As])}function Lh(n){return Rp(n[Xs])}function Rp(n){for(;null!==n&&!Sr(n);)n=n[Xs];return n}function Zo(n,i,t,r,o){if(null!=r){let h,v=!1;Sr(r)?h=r:Es(r)&&(v=!0,r=r[gr]);const Q=$i(r);0===n&&null!==t?null==o?lf(i,t,Q):Yo(i,t,Q,o||null,!0):1===n&&null!==t?Yo(i,t,Q,o||null,!0):2===n?function g(n,i,t){const r=Vh(n,i);r&&function Uh(n,i,t,r){n.removeChild(i,t,r)}(n,r,i,t)}(i,Q,v):3===n&&i.destroyNode(Q),null!=h&&function Ae(n,i,t,r,o){const h=t[Sa];h!==$i(t)&&Zo(i,n,r,h,o);for(let Q=$r;Q<t.length;Q++){const ue=t[Q];ne(ue[Cn],ue,n,i,r,h)}}(i,n,h,t,o)}}function Op(n,i){return n.createComment(function Wo(n){return n.replace(Sv,i=>i.replace(Av,Ep))}(i))}function af(n,i,t){return n.createElement(i,t)}function Np(n,i){const t=n[xo],r=t.indexOf(i);Va(i),t.splice(r,1)}function Bh(n,i){if(n.length<=$r)return;const t=$r+i,r=n[t];if(r){const o=r[nc];null!==o&&o!==n&&Np(o,r),i>0&&(n[t-1][Xs]=r[Xs]);const h=wh(n,$r+i);!function Dv(n,i){ne(n,i,i[Kn],2,null,null),i[gr]=null,i[Hr]=null}(r[Cn],r);const v=h[Ba];null!==v&&v.detachView(h[Cn]),r[ur]=null,r[Xs]=null,r[ui]&=-129}return r}function zh(n,i){if(!(256&i[ui])){const t=i[Kn];i[Tn]&&Ln(i[Tn]),i[Cl]&&Ln(i[Cl]),t.destroyNode&&ne(n,i,t,3,null,null),function ys(n){let i=n[As];if(!i)return Bp(n[Cn],n);for(;i;){let t=null;if(Es(i))t=i[As];else{const r=i[$r];r&&(t=r)}if(!t){for(;i&&!i[Xs]&&i!==n;)Es(i)&&Bp(i[Cn],i),i=i[ur];null===i&&(i=n),Es(i)&&Bp(i[Cn],i),t=i&&i[Xs]}i=t}}(i)}}function Bp(n,i){if(!(256&i[ui])){i[ui]&=-129,i[ui]|=256,function Jg(n,i){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=i[t[r]];if(!(o instanceof Pl)){const h=t[r+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const Q=o[h[v]],ue=h[v+1];ua(4,Q,ue);try{ue.call(Q)}finally{ua(5,Q,ue)}}else{ua(4,o,h);try{h.call(o)}finally{ua(5,o,h)}}}}}(n,i),function Kg(n,i){const t=n.cleanup,r=i[yo];if(null!==t)for(let h=0;h<t.length-1;h+=2)if("string"==typeof t[h]){const v=t[h+3];v>=0?r[v]():r[-v].unsubscribe(),h+=2}else t[h].call(r[t[h+1]]);null!==r&&(i[yo]=null);const o=i[Zs];if(null!==o){i[Zs]=null;for(let h=0;h<o.length;h++)(0,o[h])()}}(n,i),1===i[Cn].type&&i[Kn].destroy();const t=i[nc];if(null!==t&&Sr(i[ur])){t!==i[ur]&&Np(t,i);const r=i[Ba];null!==r&&r.detachView(n)}!function Tp(n){tf.delete(n[ic])}(i)}}function zp(n,i,t){return function Up(n,i,t){let r=i;for(;null!==r&&40&r.type;)r=(i=r).parent;if(null===r)return t[gr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:h}=n.data[r.directiveStart+o];if(h===Os.None||h===Os.Emulated)return null}return zs(r,t)}}(n,i.parent,t)}function Yo(n,i,t,r,o){n.insertBefore(i,t,r,o)}function lf(n,i,t){n.appendChild(i,t)}function Vp(n,i,t,r,o){null!==r?Yo(n,i,t,r,o):lf(n,i,t)}function Vh(n,i){return n.parentNode(i)}let Hh,nt,Ht,Gn,cf=function Eu(n,i,t){return 40&n.type?zs(n,t):null};function hf(n,i,t,r){const o=zp(n,r,i),h=i[Kn],Q=function jh(n,i,t){return cf(n,i,t)}(r.parent||i[Hr],r,i);if(null!=o)if(Array.isArray(t))for(let ue=0;ue<t.length;ue++)Vp(h,o,t[ue],Q,!1);else Vp(h,o,t,Q,!1);void 0!==Hh&&Hh(h,r,i,t,o)}function l(n,i){if(null!==i){const t=i.type;if(3&t)return zs(i,n);if(4&t)return u(-1,n[i.index]);if(8&t){const r=i.child;if(null!==r)return l(n,r);{const o=n[i.index];return Sr(o)?u(-1,o):$i(o)}}if(32&t)return sf(i,n)()||$i(n[i.index]);{const r=s(n,i);return null!==r?Array.isArray(r)?r[0]:l(Oh(n[Gi]),r):l(n,i.next)}}return null}function s(n,i){return null!==i?n[Gi][Hr].projection[i.projection]:null}function u(n,i){const t=$r+n+1;if(t<i.length){const r=i[t],o=r[Cn].firstChild;if(null!==o)return l(r,o)}return i[Sa]}function X(n,i,t,r,o,h,v){for(;null!=t;){const Q=r[t.index],ue=t.type;if(v&&0===i&&(Q&&Xr($i(Q),r),t.flags|=2),32!=(32&t.flags))if(8&ue)X(n,i,t.child,r,o,h,!1),Zo(i,n,o,Q,h);else if(32&ue){const be=sf(t,r);let Re;for(;Re=be();)Zo(i,n,o,Re,h);Zo(i,n,o,Q,h)}else 16&ue?me(n,i,r,t,o,h):Zo(i,n,o,Q,h);t=v?t.projectionNext:t.next}}function ne(n,i,t,r,o,h){X(t,r,n.firstChild,i,o,h,!1)}function me(n,i,t,r,o,h){const v=t[Gi],ue=v[Hr].projection[r.projection];if(Array.isArray(ue))for(let be=0;be<ue.length;be++)Zo(i,n,o,ue[be],h);else{let be=ue;const Re=v[ur];Fh(r)&&(be.flags|=128),X(n,i,be,Re,o,h,!0)}}function Ve(n,i,t){""===t?n.removeAttribute(i,"class"):n.setAttribute(i,"class",t)}function Ke(n,i,t){const{mergedAttrs:r,classes:o,styles:h}=t;null!==r&&Wc(n,i,r),null!==o&&Ve(n,i,o),null!==h&&function Le(n,i,t){n.setAttribute(i,"style",t)}(n,i,h)}function xt(n){return function ut(){if(void 0===nt&&(nt=null,ar.trustedTypes))try{nt=ar.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nt}()?.createHTML(n)||n}function mn(){if(void 0!==Ht)return Ht;if(typeof document<"u")return document;throw new qt(210,!1)}function yn(n){return function bn(){if(void 0===Gn&&(Gn=null,ar.trustedTypes))try{Gn=ar.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gn}()?.createHTML(n)||n}class wn{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ki})`}}class Yt extends wn{getTypeName(){return"HTML"}}class $n extends wn{getTypeName(){return"Style"}}class Vn extends wn{getTypeName(){return"Script"}}class ri extends wn{getTypeName(){return"URL"}}class Zi extends wn{getTypeName(){return"ResourceURL"}}function gi(n){return n instanceof wn?n.changingThisBreaksApplicationSecurity:n}function tr(n,i){const t=function ja(n){return n instanceof wn&&n.getTypeName()||null}(n);if(null!=t&&t!==i){if("ResourceURL"===t&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${t} (see ${ki})`)}return t===i}class Zr{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const t=(new window.DOMParser).parseFromString(xt(i),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(i):(t.removeChild(t.firstChild),t)}catch{return null}}}class ks{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const t=this.inertDocument.createElement("template");return t.innerHTML=xt(i),t}}const Gs=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ur(n){return(n=String(n)).match(Gs)?n:"unsafe:"+n}function Vr(n){const i={};for(const t of n.split(","))i[t]=!0;return i}function os(...n){const i={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(i[r]=!0);return i}const Fi=Vr("area,br,col,hr,img,wbr"),Yi=Vr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Vr("rp,rt"),Ha=os(Fi,os(Yi,Vr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),os(nr,Vr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),os(nr,Yi)),Ga=Vr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yr=os(Ga,Vr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ko=Vr("script,style,template");class $h{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let t=i.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=this.checkClobberedElement(t,t.nextSibling);if(o){t=o;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(i){const t=i.nodeName.toLowerCase();if(!Ha.hasOwnProperty(t))return this.sanitizedSomething=!0,!Ko.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=i.attributes;for(let o=0;o<r.length;o++){const h=r.item(o),v=h.name,Q=v.toLowerCase();if(!Yr.hasOwnProperty(Q)){this.sanitizedSomething=!0;continue}let ue=h.value;Ga[Q]&&(ue=Ur(ue)),this.buf.push(" ",v,'="',df(ue),'"')}return this.buf.push(">"),!0}endElement(i){const t=i.nodeName.toLowerCase();Ha.hasOwnProperty(t)&&!Fi.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(i){this.buf.push(df(i))}checkClobberedElement(i,t){if(t&&(i.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return t}}const em=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tm=/([^\#-~ |!])/g;function df(n){return n.replace(/&/g,"&amp;").replace(em,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(tm,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Du;function So(n,i){let t=null;try{Du=Du||function vr(n){const i=new ks(n);return function xs(){try{return!!(new window.DOMParser).parseFromString(xt(""),"text/html")}catch{return!1}}()?new Zr(i):i}(n);let r=i?String(i):"";t=Du.getInertBodyElement(r);let o=5,h=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=h,h=t.innerHTML,t=Du.getInertBodyElement(r)}while(r!==h);return xt((new $h).sanitizeChildren(ff(t)||t))}finally{if(t){const r=ff(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function ff(n){return"content"in n&&function nm(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ia=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ia||{});function Hp(n){const i=function Wh(){const n=en();return n&&n[Oo].sanitizer}();return i?yn(i.sanitize(Ia.HTML,n)||""):tr(n,"HTML")?yn(gi(n)):So(mn(),jn(n))}const Xh=new Rn("ENVIRONMENT_INITIALIZER"),_s=new Rn("INJECTOR",-1),ga=new Rn("INJECTOR_DEF_TYPES");class Jo{get(i,t=Po){if(t===Po){const r=new Error(`NullInjectorError: No provider for ${oi(i)}!`);throw r.name="NullInjectorError",r}return t}}function ma(n){return{\u0275providers:n}}function bc(...n){return{\u0275providers:so(0,n),\u0275fromNgModule:!0}}function so(n,...i){const t=[],r=new Set;let o;const h=v=>{t.push(v)};return Oi(i,v=>{const Q=v;sm(Q,h,[],r)&&(o||=[],o.push(Q))}),void 0!==o&&t1(o,h),t}function t1(n,i){for(let t=0;t<n.length;t++){const{ngModule:r,providers:o}=n[t];Rv(o,h=>{i(h,r)})}}function sm(n,i,t,r){if(!(n=an(n)))return!1;let o=null,h=hl(n);const v=!h&&Ei(n);if(h||v){if(v&&!v.standalone)return!1;o=n}else{const ue=n.ngModule;if(h=hl(ue),!h)return!1;o=ue}const Q=r.has(o);if(v){if(Q)return!1;if(r.add(o),v.dependencies){const ue="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const be of ue)sm(be,i,t,r)}}else{if(!h)return!1;{if(null!=h.imports&&!Q){let be;r.add(o);try{Oi(h.imports,Re=>{sm(Re,i,t,r)&&(be||=[],be.push(Re))})}finally{}void 0!==be&&t1(be,i)}if(!Q){const be=ot(o)||(()=>new o);i({provide:o,useFactory:be,deps:Pi},o),i({provide:ga,useValue:o,multi:!0},o),i({provide:Xh,useValue:()=>On(o),multi:!0},o)}const ue=h.providers;if(null!=ue&&!Q){const be=n;Rv(ue,Re=>{i(Re,be)})}}}return o!==n&&void 0!==n.providers}function Rv(n,i){for(let t of n)li(t)&&(t=t.\u0275providers),Array.isArray(t)?Rv(t,i):i(t)}const vT=Dn({provide:String,useValue:Dn});function Ov(n){return null!==n&&"object"==typeof n&&vT in n}function Zh(n){return"function"==typeof n}const Lv=new Rn("Set Injector scope."),am={},_T={};let Nv;function om(){return void 0===Nv&&(Nv=new Jo),Nv}class ao{}class pf extends ao{get destroyed(){return this._destroyed}constructor(i,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zv(i,v=>this.processProvider(v)),this.records.set(_s,gf(void 0,this)),o.has("environment")&&this.records.set(ao,gf(void 0,this));const h=this.records.get(Lv);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(ga.multi,Pi,hi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of i)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const t=Na(this),r=Rs(void 0);try{return i()}finally{Na(t),Rs(r)}}get(i,t=Po,r=hi.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(pl))return i[pl](this);r=wa(r);const h=Na(this),v=Rs(void 0);try{if(!(r&hi.SkipSelf)){let ue=this.records.get(i);if(void 0===ue){const be=function AT(n){return"function"==typeof n||"object"==typeof n&&n instanceof Rn}(i)&&Nc(i);ue=be&&this.injectableDefInScope(be)?gf(Bv(i),am):null,this.records.set(i,ue)}if(null!=ue)return this.hydrate(i,ue)}return(r&hi.Self?om():this.parent).get(i,t=r&hi.Optional&&t===Po?null:t)}catch(Q){if("NullInjectorError"===Q.name){if((Q[fl]=Q[fl]||[]).unshift(oi(i)),h)throw Q;return function $c(n,i,t,r){const o=n[fl];throw i[Ki]&&o.unshift(i[Ki]),n.message=function Ju(n,i,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let o=oi(i);if(Array.isArray(i))o=i.map(oi).join(" -> ");else if("object"==typeof i){let h=[];for(let v in i)if(i.hasOwnProperty(v)){let Q=i[v];h.push(v+":"+("string"==typeof Q?JSON.stringify(Q):oi(Q)))}o=`{${h.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(Yu,"\n  ")}`}("\n"+n.message,o,t,r),n.ngTokenPath=o,n[fl]=null,n}(Q,i,"R3InjectorError",this.source)}throw Q}finally{Rs(v),Na(h)}}resolveInjectorInitializers(){const i=Na(this),t=Rs(void 0);try{const o=this.get(Xh.multi,Pi,hi.Self);for(const h of o)h()}finally{Na(i),Rs(t)}}toString(){const i=[],t=this.records;for(const r of t.keys())i.push(oi(r));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qt(205,!1)}processProvider(i){let t=Zh(i=an(i))?i:an(i&&i.provide);const r=function wT(n){return Ov(n)?gf(void 0,n.useValue):gf(s1(n),am)}(i);if(Zh(i)||!0!==i.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=gf(void 0,am,!0),o.factory=()=>Ka(o.multi),this.records.set(t,o)),t=i,o.multi.push(i)}this.records.set(t,r)}hydrate(i,t){return t.value===am&&(t.value=_T,t.value=t.factory()),"object"==typeof t.value&&t.value&&function ST(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(i){if(!i.providedIn)return!1;const t=an(i.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(i){const t=this._onDestroyHooks.indexOf(i);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Bv(n){const i=Nc(n),t=null!==i?i.factory:ot(n);if(null!==t)return t;if(n instanceof Rn)throw new qt(204,!1);if(n instanceof Function)return function bT(n){const i=n.length;if(i>0)throw function yu(n,i){const t=[];for(let r=0;r<n;r++)t.push(i);return t}(i,"?"),new qt(204,!1);const t=function md(n){return n&&(n[Yl]||n[qu])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new qt(204,!1)}function s1(n,i,t){let r;if(Zh(n)){const o=an(n);return ot(o)||Bv(o)}if(Ov(n))r=()=>an(n.useValue);else if(function r1(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ka(n.deps||[]));else if(function n1(n){return!(!n||!n.useExisting)}(n))r=()=>On(an(n.useExisting));else{const o=an(n&&(n.useClass||n.provide));if(!function CT(n){return!!n.deps}(n))return ot(o)||Bv(o);r=()=>new o(...Ka(n.deps))}return r}function gf(n,i,t=!1){return{factory:n,value:i,multi:t?[]:void 0}}function zv(n,i){for(const t of n)Array.isArray(t)?zv(t,i):t&&li(t)?zv(t.\u0275providers,i):i(t)}const lm=new Rn("AppId",{providedIn:"root",factory:()=>ET}),ET="ng",a1=new Rn("Platform Initializer"),Qo=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),o1=new Rn("CSP nonce",{providedIn:"root",factory:()=>mn().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let l1=(n,i,t)=>null;function Wv(n,i,t=!1){return l1(n,i,t)}class LT{}class h1{}class BT{resolveComponentFactory(i){throw function NT(n){const i=Error(`No component factory found for ${oi(n)}.`);return i.ngComponent=n,i}(i)}}let qp=(()=>{class n{static#e=this.NULL=new BT}return n})();function zT(){return vf(gs(),en())}function vf(n,i){return new ya(zs(n,i))}let ya=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=zT}return n})();function UT(n){return n instanceof ya?n.nativeElement:n}class f1{}let wc=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function VT(){const n=en(),t=ha(gs().index,n);return(Es(t)?t:n)[Kn]}()}return n})(),jT=(()=>{class n{static#e=this.\u0275prov=Bn({token:n,providedIn:"root",factory:()=>null})}return n})();class Wp{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const HT=new Wp("16.2.12"),Yv={};function y1(n,i=null,t=null,r){const o=v1(n,i,t,r);return o.resolveInjectorInitializers(),o}function v1(n,i=null,t=null,r,o=new Set){const h=[t||Pi,bc(n)];return r=r||("object"==typeof n?void 0:oi(n)),new pf(h,i||om(),r||null,o)}let va=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Po;static#t=this.NULL=new Jo;static create(t,r){if(Array.isArray(t))return y1({name:""},r,t,"");{const o=t.name??"";return y1({name:o},t.parent,t.providers,o)}}static#n=this.\u0275prov=Bn({token:n,providedIn:"any",factory:()=>On(_s)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function Jv(n){return n.ngOriginalError}class Bl{constructor(){this._console=console}handleError(i){const t=this._findOriginalError(i);this._console.error("ERROR",i),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(i){let t=i&&Jv(i);for(;t&&Jv(t);)t=Jv(t);return t||null}}function Qv(n){return i=>{setTimeout(n,void 0,i)}}const on=class KT extends U{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,t,r){let o=i,h=t||(()=>null),v=r;if(i&&"object"==typeof i){const ue=i;o=ue.next?.bind(ue),h=ue.error?.bind(ue),v=ue.complete?.bind(ue)}this.__isAsync&&(h=Qv(h),o&&(o=Qv(o)),v&&(v=Qv(v)));const Q=super.subscribe({next:o,error:h,complete:v});return i instanceof k&&i.add(Q),Q}};function _1(...n){}class Zn{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new on(!1),this.onMicrotaskEmpty=new on(!1),this.onStable=new on(!1),this.onError=new on(!1),typeof Zone>"u")throw new qt(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function JT(){const n="function"==typeof ar.requestAnimationFrame;let i=ar[n?"requestAnimationFrame":"setTimeout"],t=ar[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&t){const r=i[Zone.__symbol__("OriginalDelegate")];r&&(i=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function tM(n){const i=()=>{!function eM(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ar,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,tx(n),n.isCheckStableRunning=!0,ex(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),tx(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,h,v,Q)=>{if(function iM(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(Q))return t.invokeTask(o,h,v,Q);try{return b1(n),t.invokeTask(o,h,v,Q)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&i(),w1(n)}},onInvoke:(t,r,o,h,v,Q,ue)=>{try{return b1(n),t.invoke(o,h,v,Q,ue)}finally{n.shouldCoalesceRunChangeDetection&&i(),w1(n)}},onHasTask:(t,r,o,h)=>{t.hasTask(o,h),r===o&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,tx(n),ex(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(t,r,o,h)=>(t.handleError(o,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zn.isInAngularZone())throw new qt(909,!1)}static assertNotInAngularZone(){if(Zn.isInAngularZone())throw new qt(909,!1)}run(i,t,r){return this._inner.run(i,t,r)}runTask(i,t,r,o){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+o,i,QT,_1,_1);try{return h.runTask(v,t,r)}finally{h.cancelTask(v)}}runGuarded(i,t,r){return this._inner.runGuarded(i,t,r)}runOutsideAngular(i){return this._outer.run(i)}}const QT={};function ex(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tx(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function b1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function w1(n){n._nesting--,ex(n)}class nM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new on,this.onMicrotaskEmpty=new on,this.onStable=new on,this.onError=new on}run(i,t,r){return i.apply(t,r)}runGuarded(i,t,r){return i.apply(t,r)}runOutsideAngular(i){return i()}runTask(i,t,r,o){return i.apply(t,r)}}const C1=new Rn("",{providedIn:"root",factory:S1});function S1(){const n=dn(Zn);let i=!0;return function pn(...n){const i=kr(n),t=function Zl(n,i){return"number"==typeof uo(n)?n.pop():i}(n,1/0),r=n;return r.length?1===r.length?un(r[0]):lr(t)($t(r,i)):Bi}(new m(o=>{i=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{o.next(i),o.complete()})}),new m(o=>{let h;n.runOutsideAngular(()=>{h=n.onStable.subscribe(()=>{Zn.assertNotInAngularZone(),queueMicrotask(()=>{!i&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(i=!0,o.next(!0))})})});const v=n.onUnstable.subscribe(()=>{Zn.assertInAngularZone(),i&&(i=!1,n.runOutsideAngular(()=>{o.next(!1)}))});return()=>{h.unsubscribe(),v.unsubscribe()}}).pipe(Wn()))}function Cc(n){return n instanceof Function?n():n}let nx=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Bn({token:n,providedIn:"root",factory:()=>new n})}return n})();function Xp(n){for(;n;){n[ui]|=64;const i=Oh(n);if(Sl(n)&&!i)return n;n=i}return null}const k1=new Rn("",{providedIn:"root",factory:()=>!1});let ym=null;function R1(n,i){return n[i]??N1()}function O1(n,i){const t=N1();t.producerNode?.length&&(n[i]=ym,t.lView=n,ym=L1())}const hM={...Pt,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Xp(n.lView)},lView:null};function L1(){return Object.create(hM)}function N1(){return ym??=L1(),ym}const yi={};function dr(n){B1(Ui(),en(),Ys()+n,!1)}function B1(n,i,t,r){if(!r)if(3==(3&i[ui])){const h=n.preOrderCheckHooks;null!==h&&uu(i,h,t)}else{const h=n.preOrderHooks;null!==h&&Od(i,h,0,t)}Go(t)}function Bt(n,i=hi.Default){const t=en();return null===t?On(n,i):_g(gs(),t,an(n),i)}function vm(n,i,t,r,o,h,v,Q,ue,be,Re){const qe=i.blueprint.slice();return qe[gr]=o,qe[ui]=140|r,(null!==be||n&&2048&n[ui])&&(qe[ui]|=2048),oc(qe),qe[ur]=qe[hs]=n,qe[yr]=t,qe[Oo]=v||n&&n[Oo],qe[Kn]=Q||n&&n[Kn],qe[la]=ue||n&&n[la]||null,qe[Hr]=h,qe[ic]=function jg(){return Vg++}(),qe[Gr]=Re,qe[tu]=be,qe[Gi]=2==i.type?n[Gi]:qe,qe}function bf(n,i,t,r,o){let h=n.data[i];if(null===h)h=function ix(n,i,t,r,o){const h=uc(),v=lu(),ue=n.data[i]=function xM(n,i,t,r,o,h){let v=i?i.injectorIndex:-1,Q=0;return function Ho(){return null!==ci.skipHydrationRootTNode}()&&(Q|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:Q,providerIndexes:0,value:o,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,t,i,r,o);return null===n.firstChild&&(n.firstChild=ue),null!==h&&(v?null==h.child&&null!==ue.parent&&(h.child=ue):null===h.next&&(h.next=ue,ue.prev=h)),ue}(n,i,t,r,o),function Ky(){return ci.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=t,h.value=r,h.attrs=o;const v=function ph(){const n=ci.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return da(h,!0),h}function Zp(n,i,t,r){if(0===t)return-1;const o=i.length;for(let h=0;h<t;h++)i.push(r),n.blueprint.push(r),n.data.push(null);return o}function U1(n,i,t,r,o){const h=R1(i,Tn),v=Ys(),Q=2&r;try{Go(-1),Q&&i.length>xi&&B1(n,i,xi,!1),ua(Q?2:0,o);const be=Q?h:null,Re=An(be);try{null!==be&&(be.dirty=!1),t(r,o)}finally{ln(be,Re)}}finally{Q&&null===i[Tn]&&O1(i,Tn),Go(v),ua(Q?3:1,o)}}function rx(n,i,t){if(nu(i)){const r=vt(null);try{const h=i.directiveEnd;for(let v=i.directiveStart;v<h;v++){const Q=n.data[v];Q.contentQueries&&Q.contentQueries(1,t[v],v)}}finally{vt(r)}}}function sx(n,i,t){Ml()&&(function EM(n,i,t,r){const o=t.directiveStart,h=t.directiveEnd;Qa(t)&&function FM(n,i,t){const r=zs(i,n),o=V1(t);let v=16;t.signals?v=4096:t.onPush&&(v=64);const Q=xm(n,vm(n,o,null,v,r,i,null,n[Oo].rendererFactory.createRenderer(r,t),null,null,null));n[i.index]=Q}(i,t,n.data[o+t.componentOffset]),n.firstCreatePass||_h(t,i),Xr(r,i);const v=t.initialInputs;for(let Q=o;Q<h;Q++){const ue=n.data[Q],be=to(i,n,Q,t);Xr(be,i),null!==v&&RM(0,Q-o,be,ue,0,v),Di(ue)&&(ha(t.index,i)[yr]=to(i,n,Q,t))}}(n,i,t,zs(t,i)),64==(64&t.flags)&&q1(n,i,t))}function ax(n,i,t=zs){const r=i.localNames;if(null!==r){let o=i.index+1;for(let h=0;h<r.length;h+=2){const v=r[h+1],Q=-1===v?t(i,n):n[v];n[o++]=Q}}}function V1(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=ox(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function ox(n,i,t,r,o,h,v,Q,ue,be,Re){const qe=xi+r,ft=qe+o,St=function fM(n,i){const t=[];for(let r=0;r<i;r++)t.push(r<n?null:yi);return t}(qe,ft),Ot="function"==typeof be?be():be;return St[Cn]={type:n,blueprint:St,template:t,queries:null,viewQuery:Q,declTNode:i,data:St.slice().fill(null,qe),bindingStartIndex:qe,expandoStartIndex:ft,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:ue,consts:Ot,incompleteFirstPass:!1,ssrId:Re}}let j1=n=>null;function H1(n,i,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const h=n[o];null===r?G1(t,i,o,h):r.hasOwnProperty(o)&&G1(t,i,r[o],h)}return t}function G1(n,i,t,r){n.hasOwnProperty(t)?n[t].push(i,r):n[t]=[i,r]}function oo(n,i,t,r,o,h,v,Q){const ue=zs(i,t);let Re,be=i.inputs;!Q&&null!=be&&(Re=be[r])?(dx(n,t,Re,r,o),Qa(i)&&function wM(n,i){const t=ha(i,n);16&t[ui]||(t[ui]|=64)}(t,i.index)):3&i.type&&(r=function bM(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=v?v(o,i.value||"",r):o,h.setProperty(ue,r,o))}function lx(n,i,t,r){if(Ml()){const o=null===r?null:{"":-1},h=function TM(n,i){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let h=0;h<t.length;h++){const v=t[h];if(tc(i,v.selectors,!1))if(r||(r=[]),Di(v))if(null!==v.findHostDirectiveDefs){const Q=[];o=o||new Map,v.findHostDirectiveDefs(v,Q,o),r.unshift(...Q,v),cx(n,i,Q.length)}else r.unshift(v),cx(n,i,0);else o=o||new Map,v.findHostDirectiveDefs?.(v,r,o),r.push(v)}return null===r?null:[r,o]}(n,t);let v,Q;null===h?v=Q=null:[v,Q]=h,null!==v&&$1(n,i,t,v,o,Q),o&&function MM(n,i,t){if(i){const r=n.localNames=[];for(let o=0;o<i.length;o+=2){const h=t[i[o+1]];if(null==h)throw new qt(-301,!1);r.push(i[o],h)}}}(t,r,o)}t.mergedAttrs=mo(t.mergedAttrs,t.attrs)}function $1(n,i,t,r,o,h){for(let be=0;be<r.length;be++)mp(_h(t,i),n,r[be].type);!function IM(n,i,t){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+t,n.providerIndexes=i}(t,n.data.length,r.length);for(let be=0;be<r.length;be++){const Re=r[be];Re.providersResolver&&Re.providersResolver(Re)}let v=!1,Q=!1,ue=Zp(n,i,r.length,null);for(let be=0;be<r.length;be++){const Re=r[be];t.mergedAttrs=mo(t.mergedAttrs,Re.hostAttrs),PM(n,t,i,ue,Re),kM(ue,Re,o),null!==Re.contentQueries&&(t.flags|=4),(null!==Re.hostBindings||null!==Re.hostAttrs||0!==Re.hostVars)&&(t.flags|=64);const qe=Re.type.prototype;!v&&(qe.ngOnChanges||qe.ngOnInit||qe.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),v=!0),!Q&&(qe.ngOnChanges||qe.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),Q=!0),ue++}!function _M(n,i,t){const o=i.directiveEnd,h=n.data,v=i.attrs,Q=[];let ue=null,be=null;for(let Re=i.directiveStart;Re<o;Re++){const qe=h[Re],ft=t?t.get(qe):null,Ot=ft?ft.outputs:null;ue=H1(qe.inputs,Re,ue,ft?ft.inputs:null),be=H1(qe.outputs,Re,be,Ot);const zt=null===ue||null===v||gl(i)?null:OM(ue,Re,v);Q.push(zt)}null!==ue&&(ue.hasOwnProperty("class")&&(i.flags|=8),ue.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=Q,i.inputs=ue,i.outputs=be}(n,t,h)}function q1(n,i,t){const r=t.directiveStart,o=t.directiveEnd,h=t.index,v=function ag(){return ci.lFrame.currentDirectiveIndex}();try{Go(h);for(let Q=r;Q<o;Q++){const ue=n.data[Q],be=i[Q];kd(Q),(null!==ue.hostBindings||0!==ue.hostVars||null!==ue.hostAttrs)&&DM(ue,be)}}finally{Go(-1),kd(v)}}function DM(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function cx(n,i,t){i.componentOffset=t,(n.components??=[]).push(i.index)}function kM(n,i,t){if(t){if(i.exportAs)for(let r=0;r<i.exportAs.length;r++)t[i.exportAs[r]]=n;Di(i)&&(t[""]=n)}}function PM(n,i,t,r,o){n.data[r]=o;const h=o.factory||(o.factory=ot(o.type)),v=new Pl(h,Di(o),Bt);n.blueprint[r]=v,t[r]=v,function SM(n,i,t,r,o){const h=o.hostBindings;if(h){let v=n.hostBindingOpCodes;null===v&&(v=n.hostBindingOpCodes=[]);const Q=~i.index;(function AM(n){let i=n.length;for(;i>0;){const t=n[--i];if("number"==typeof t&&t<0)return t}return 0})(v)!=Q&&v.push(Q),v.push(t,r,h)}}(n,i,r,Zp(n,t,o.hostVars,yi),o)}function zl(n,i,t,r,o,h){const v=zs(n,i);!function ux(n,i,t,r,o,h,v){if(null==h)n.removeAttribute(i,o,t);else{const Q=null==v?jn(h):v(h,r||"",o);n.setAttribute(i,o,Q,t)}}(i[Kn],v,h,n.value,t,r,o)}function RM(n,i,t,r,o,h){const v=h[i];if(null!==v)for(let Q=0;Q<v.length;)W1(r,t,v[Q++],v[Q++],v[Q++])}function W1(n,i,t,r,o){const h=vt(null);try{const v=n.inputTransforms;null!==v&&v.hasOwnProperty(r)&&(o=v[r].call(i,o)),null!==n.setInput?n.setInput(i,o,t,r):i[r]=o}finally{vt(h)}}function OM(n,i,t){let r=null,o=0;for(;o<t.length;){const h=t[o];if(0!==h)if(5!==h){if("number"==typeof h)break;if(n.hasOwnProperty(h)){null===r&&(r=[]);const v=n[h];for(let Q=0;Q<v.length;Q+=2)if(v[Q]===i){r.push(h,v[Q+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function X1(n,i,t,r){return[n,!0,!1,i,null,0,r,t,null,null,null]}function Z1(n,i){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const h=t[r+1];if(-1!==h){const v=n.data[h];mh(t[r]),v.contentQueries(2,i[h],h)}}}function xm(n,i){return n[As]?n[eu][Xs]=i:n[As]=i,n[eu]=i,i}function hx(n,i,t){mh(0);const r=vt(null);try{i(n,t)}finally{vt(r)}}function Y1(n){return n[yo]||(n[yo]=[])}function K1(n){return n.cleanup||(n.cleanup=[])}function J1(n,i,t){return(null===n||Di(n))&&(t=function wo(n){for(;Array.isArray(n);){if("object"==typeof n[Lo])return n;n=n[gr]}return null}(t[i.index])),t[Kn]}function Q1(n,i){const t=n[la],r=t?t.get(Bl,null):null;r&&r.handleError(i)}function dx(n,i,t,r,o){for(let h=0;h<t.length;){const v=t[h++],Q=t[h++];W1(n.data[v],i[v],r,Q,o)}}function LM(n,i){const t=ha(i,n),r=t[Cn];!function NM(n,i){for(let t=i.length;t<n.blueprint.length;t++)i.push(n.blueprint[t])}(r,t);const o=t[gr];null!==o&&null===t[Gr]&&(t[Gr]=Wv(o,t[la])),fx(r,t,t[yr])}function fx(n,i,t){dc(i);try{const r=n.viewQuery;null!==r&&hx(1,r,t);const o=n.template;null!==o&&U1(n,i,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Z1(n,i),n.staticViewQueries&&hx(2,n.viewQuery,t);const h=n.components;null!==h&&function BM(n,i){for(let t=0;t<i.length;t++)LM(n,i[t])}(i,h)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{i[ui]&=-5,fp()}}let ew=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,o){const h=typeof Zone>"u"?null:Zone.current,v=function bo(n,i,t){const r=Object.create(ps);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=i;const o=v=>{r.cleanupFn=v};return r.ref={notify:()=>Sn(r),run:()=>{if(r.dirty=!1,r.hasRun&&!hn(r))return;r.hasRun=!0;const v=An(r);try{r.cleanupFn(),r.cleanupFn=Bo,r.fn(o)}finally{ln(r,v)}},cleanup:()=>r.cleanupFn()},r.ref}(t,be=>{this.all.has(be)&&this.queue.set(be,h)},o);let Q;this.all.add(v),v.notify();const ue=()=>{v.cleanup(),Q?.(),this.all.delete(v),this.queue.delete(v)};return Q=r?.onDestroy(ue),{destroy:ue}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Bn({token:n,providedIn:"root",factory:()=>new n})}return n})();function _m(n,i,t){let r=t?n.styles:null,o=t?n.classes:null,h=0;if(null!==i)for(let v=0;v<i.length;v++){const Q=i[v];"number"==typeof Q?h=Q:1==h?o=wi(o,Q):2==h&&(r=wi(r,Q+": "+i[++v]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function Yp(n,i,t,r,o=!1){for(;null!==t;){const h=i[t.index];null!==h&&r.push($i(h)),Sr(h)&&tw(h,r);const v=t.type;if(8&v)Yp(n,i,t.child,r);else if(32&v){const Q=sf(t,i);let ue;for(;ue=Q();)r.push(ue)}else if(16&v){const Q=s(i,t);if(Array.isArray(Q))r.push(...Q);else{const ue=Oh(i[Gi]);Yp(ue[Cn],ue,Q,r,!0)}}t=o?t.projectionNext:t.next}return r}function tw(n,i){for(let t=$r;t<n.length;t++){const r=n[t],o=r[Cn].firstChild;null!==o&&Yp(r[Cn],r,o,i)}n[Sa]!==n[gr]&&i.push(n[Sa])}function bm(n,i,t,r=!0){const o=i[Oo],h=o.rendererFactory,v=o.afterRenderEventManager;h.begin?.(),v?.begin();try{nw(n,i,n.template,t)}catch(ue){throw r&&Q1(i,ue),ue}finally{h.end?.(),o.effectManager?.flush(),v?.end()}}function nw(n,i,t,r){const o=i[ui];if(256!=(256&o)){i[Oo].effectManager?.flush(),dc(i);try{oc(i),function Md(n){return ci.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&U1(n,i,t,2,r);const v=3==(3&o);if(v){const be=n.preOrderCheckHooks;null!==be&&uu(i,be,null)}else{const be=n.preOrderHooks;null!==be&&Od(i,be,0,null),Il(i,0)}if(function VM(n){for(let i=Fp(n);null!==i;i=Lh(i)){if(!i[Ca])continue;const t=i[xo];for(let r=0;r<t.length;r++){Vo(t[r])}}}(i),iw(i,2),null!==n.contentQueries&&Z1(n,i),v){const be=n.contentCheckHooks;null!==be&&uu(i,be)}else{const be=n.contentHooks;null!==be&&Od(i,be,1),Il(i,1)}!function dM(n,i){const t=n.hostBindingOpCodes;if(null===t)return;const r=R1(i,Cl);try{for(let o=0;o<t.length;o++){const h=t[o];if(h<0)Go(~h);else{const v=h,Q=t[++o],ue=t[++o];Jy(Q,v),r.dirty=!1;const be=An(r);try{ue(2,i[v])}finally{ln(r,be)}}}}finally{null===i[Cl]&&O1(i,Cl),Go(-1)}}(n,i);const Q=n.components;null!==Q&&sw(i,Q,0);const ue=n.viewQuery;if(null!==ue&&hx(2,ue,r),v){const be=n.viewCheckHooks;null!==be&&uu(i,be)}else{const be=n.viewHooks;null!==be&&Od(i,be,2),Il(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[ui]&=-73,Va(i)}finally{fp()}}}function iw(n,i){for(let t=Fp(n);null!==t;t=Lh(t))for(let r=$r;r<t.length;r++)rw(t[r],i)}function jM(n,i,t){rw(ha(i,n),t)}function rw(n,i){if(!function Wy(n){return 128==(128&n[ui])}(n))return;const t=n[Cn],r=n[ui];if(80&r&&0===i||1024&r||2===i)nw(t,n,t.template,n[yr]);else if(n[wl]>0){iw(n,1);const o=t.components;null!==o&&sw(n,o,1)}}function sw(n,i,t){for(let r=0;r<i.length;r++)jM(n,i[r],t)}class Kp{get rootNodes(){const i=this._lView,t=i[Cn];return Yp(t,i,t.firstChild,[])}constructor(i,t){this._lView=i,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yr]}set context(i){this._lView[yr]=i}get destroyed(){return 256==(256&this._lView[ui])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[ur];if(Sr(i)){const t=i[8],r=t?t.indexOf(this):-1;r>-1&&(Bh(i,r),wh(t,r))}this._attachedToViewContainer=!1}zh(this._lView[Cn],this._lView)}onDestroy(i){!function op(n,i){if(256==(256&n[ui]))throw new qt(911,!1);null===n[Zs]&&(n[Zs]=[]),n[Zs].push(i)}(this._lView,i)}markForCheck(){Xp(this._cdRefInjectingView||this._lView)}detach(){this._lView[ui]&=-129}reattach(){this._lView[ui]|=128}detectChanges(){bm(this._lView[Cn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new qt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Au(n,i){ne(n,i,i[Kn],2,null,null)}(this._lView[Cn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new qt(902,!1);this._appRef=i}}class HM extends Kp{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;bm(i[Cn],i,i[yr],!1)}checkNoChanges(){}get context(){return null}}class aw extends qp{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const t=Ei(i);return new Jp(t,this.ngModule)}}function ow(n){const i=[];for(let t in n)n.hasOwnProperty(t)&&i.push({propName:n[t],templateName:t});return i}class $M{constructor(i,t){this.injector=i,this.parentInjector=t}get(i,t,r){r=wa(r);const o=this.injector.get(i,Yv,r);return o!==Yv||t===Yv?o:this.parentInjector.get(i,t,r)}}class Jp extends h1{get inputs(){const i=this.componentDef,t=i.inputTransforms,r=ow(i.inputs);if(null!==t)for(const o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return ow(this.componentDef.outputs)}constructor(i,t){super(),this.componentDef=i,this.ngModule=t,this.componentType=i.type,this.selector=function Qc(n){return n.map(th).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!t}create(i,t,r,o){let h=(o=o||this.ngModule)instanceof ao?o:o?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new $M(i,h):i,Q=v.get(f1,null);if(null===Q)throw new qt(407,!1);const qe={rendererFactory:Q,sanitizer:v.get(jT,null),effectManager:v.get(ew,null),afterRenderEventManager:v.get(nx,null)},ft=Q.createRenderer(null,this.componentDef),St=this.componentDef.selectors[0][0]||"div",Ot=r?function pM(n,i,t,r){const h=r.get(k1,!1)||t===Os.ShadowDom,v=n.selectRootElement(i,h);return function gM(n){j1(n)}(v),v}(ft,r,this.componentDef.encapsulation,v):af(ft,St,function GM(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(St)),cn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Wt=null;null!==Ot&&(Wt=Wv(Ot,v,!0));const Nn=ox(0,null,null,1,0,null,null,null,null,null,null),si=vm(null,Nn,null,cn,null,null,qe,ft,v,null,Wt);let Ri,qs;dc(si);try{const Xl=this.componentDef;let ud,Hb=null;Xl.findHostDirectiveDefs?(ud=[],Hb=new Map,Xl.findHostDirectiveDefs(Xl,ud,Hb),ud.push(Xl)):ud=[Xl];const k7=function WM(n,i){const t=n[Cn],r=xi;return n[r]=i,bf(t,r,2,"#host",null)}(si,Ot),I7=function XM(n,i,t,r,o,h,v){const Q=o[Cn];!function ZM(n,i,t,r){for(const o of n)i.mergedAttrs=mo(i.mergedAttrs,o.hostAttrs);null!==i.mergedAttrs&&(_m(i,i.mergedAttrs,!0),null!==t&&Ke(r,t,i))}(r,n,i,v);let ue=null;null!==i&&(ue=Wv(i,o[la]));const be=h.rendererFactory.createRenderer(i,t);let Re=16;t.signals?Re=4096:t.onPush&&(Re=64);const qe=vm(o,V1(t),null,Re,o[n.index],n,h,be,null,null,ue);return Q.firstCreatePass&&cx(Q,n,r.length-1),xm(o,qe),o[n.index]=qe}(k7,Ot,Xl,ud,si,qe,ft);qs=Tl(Nn,xi),Ot&&function KM(n,i,t,r){if(r)Wc(n,t,["ng-version",HT.full]);else{const{attrs:o,classes:h}=function nh(n){const i=[],t=[];let r=1,o=2;for(;r<n.length;){let h=n[r];if("string"==typeof h)2===o?""!==h&&i.push(h,n[++r]):8===o&&t.push(h);else{if(!Ws(o))break;o=h}r++}return{attrs:i,classes:t}}(i.selectors[0]);o&&Wc(n,t,o),h&&h.length>0&&Ve(n,t,h.join(" "))}}(ft,Xl,Ot,r),void 0!==t&&function JM(n,i,t){const r=n.projection=[];for(let o=0;o<i.length;o++){const h=t[o];r.push(null!=h?Array.from(h):null)}}(qs,this.ngContentSelectors,t),Ri=function YM(n,i,t,r,o,h){const v=gs(),Q=o[Cn],ue=zs(v,o);$1(Q,o,v,t,null,r);for(let Re=0;Re<t.length;Re++)Xr(to(o,Q,v.directiveStart+Re,v),o);q1(Q,o,v),ue&&Xr(ue,o);const be=to(o,Q,v.directiveStart+v.componentOffset,v);if(n[yr]=o[yr]=be,null!==h)for(const Re of h)Re(be,i);return rx(Q,v,n),be}(I7,Xl,ud,Hb,si,[QM]),fx(Nn,si,null)}finally{fp()}return new qM(this.componentType,Ri,vf(qs,si),si,qs)}}class qM extends LT{constructor(i,t,r,o,h){super(),this.location=r,this._rootLView=o,this._tNode=h,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new HM(o),this.componentType=i}setInput(i,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),t))return;const h=this._rootLView;dx(h[Cn],h,o,i,t),this.previousInputValues.set(i,t),Xp(ha(this._tNode.index,h))}}get injector(){return new Ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function QM(){const n=gs();Rd(en()[Cn],n)}function fr(n){let i=function lw(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;i;){let o;if(Di(n))o=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new qt(903,!1);o=i.\u0275dir}if(o){if(t){r.push(o);const v=n;v.inputs=wm(n.inputs),v.inputTransforms=wm(n.inputTransforms),v.declaredInputs=wm(n.declaredInputs),v.outputs=wm(n.outputs);const Q=o.hostBindings;Q&&ik(n,Q);const ue=o.viewQuery,be=o.contentQueries;if(ue&&tk(n,ue),be&&nk(n,be),zi(n.inputs,o.inputs),zi(n.declaredInputs,o.declaredInputs),zi(n.outputs,o.outputs),null!==o.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),zi(v.inputTransforms,o.inputTransforms)),Di(o)&&o.data.animation){const Re=n.data;Re.animation=(Re.animation||[]).concat(o.data.animation)}}const h=o.features;if(h)for(let v=0;v<h.length;v++){const Q=h[v];Q&&Q.ngInherit&&Q(n),Q===fr&&(t=!1)}}i=Object.getPrototypeOf(i)}!function ek(n){let i=0,t=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=i+=o.hostVars,o.hostAttrs=mo(o.hostAttrs,t=mo(t,o.hostAttrs))}}(r)}function wm(n){return n===Ls?{}:n===Pi?[]:n}function tk(n,i){const t=n.viewQuery;n.viewQuery=t?(r,o)=>{i(r,o),t(r,o)}:i}function nk(n,i){const t=n.contentQueries;n.contentQueries=t?(r,o,h)=>{i(r,o,h),t(r,o,h)}:i}function ik(n,i){const t=n.hostBindings;n.hostBindings=t?(r,o)=>{i(r,o),t(r,o)}:i}function Cm(n){return!!function px(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function xa(n,i,t){return!Object.is(n[i],t)&&(n[i]=t,!0)}function qa(n,i,t,r){const o=en();return xa(o,hc(),i)&&(Ui(),zl(mr(),o,n,i,t,r)),qa}function Is(n,i,t,r,o,h,v,Q){const ue=en(),be=Ui(),Re=n+xi,qe=be.firstCreatePass?function Tk(n,i,t,r,o,h,v,Q,ue){const be=i.consts,Re=bf(i,n,4,v||null,Ua(be,Q));lx(i,t,Re,Ua(be,ue)),Rd(i,Re);const qe=Re.tView=ox(2,Re,r,o,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,be,null);return null!==i.queries&&(i.queries.template(i,Re),qe.queries=i.queries.embeddedTView(Re)),Re}(Re,be,ue,i,t,r,o,h,v):be.data[Re];da(qe,!1);const ft=Aw(be,ue,qe,n);Fd()&&hf(be,ue,ft,qe),Xr(ft,ue),xm(ue,ue[Re]=X1(ft,ue,ft,qe)),Aa(qe)&&sx(be,ue,qe),null!=v&&ax(ue,qe,Q)}let Aw=function Ew(n,i,t,r){return kl(!0),i[Kn].createComment("")};function xr(n,i,t){const r=en();return xa(r,hc(),i)&&oo(Ui(),mr(),r,n,i,r[Kn],t,!1),xr}function _x(n,i,t,r,o){const v=o?"class":"style";dx(n,t,i.inputs[v],v,r)}function In(n,i,t,r){const o=en(),h=Ui(),v=xi+n,Q=o[Kn],ue=h.firstCreatePass?function Fk(n,i,t,r,o,h){const v=i.consts,ue=bf(i,n,2,r,Ua(v,o));return lx(i,t,ue,Ua(v,h)),null!==ue.attrs&&_m(ue,ue.attrs,!1),null!==ue.mergedAttrs&&_m(ue,ue.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ue),ue}(v,h,o,i,t,r):h.data[v],be=Dw(h,o,ue,Q,i,n);o[v]=be;const Re=Aa(ue);return da(ue,!0),Ke(Q,be,ue),32!=(32&ue.flags)&&Fd()&&hf(h,o,be,ue),0===function cp(){return ci.lFrame.elementDepthCount}()&&Xr(be,o),function tg(){ci.lFrame.elementDepthCount++}(),Re&&(sx(h,o,ue),rx(h,ue,o)),null!==r&&ax(o,ue),In}function qn(){let n=gs();lu()?cu():(n=n.parent,da(n,!1));const i=n;(function up(n){return ci.skipHydrationRootTNode===n})(i)&&function Zy(){ci.skipHydrationRootTNode=null}(),function cc(){ci.lFrame.elementDepthCount--}();const t=Ui();return t.firstCreatePass&&(Rd(t,n),nu(n)&&t.queries.elementEnd(n)),null!=i.classesWithoutHost&&function vh(n){return 0!=(8&n.flags)}(i)&&_x(t,i,en(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function pp(n){return 0!=(16&n.flags)}(i)&&_x(t,i,en(),i.stylesWithoutHost,!1),qn}function Vi(n,i,t,r){return In(n,i,t,r),qn(),Vi}let Dw=(n,i,t,r,o,h)=>(kl(!0),af(r,o,function hg(){return ci.lFrame.currentNamespace}()));function Tu(n,i,t){const r=en(),o=Ui(),h=n+xi,v=o.firstCreatePass?function Lk(n,i,t,r,o){const h=i.consts,v=Ua(h,r),Q=bf(i,n,8,"ng-container",v);return null!==v&&_m(Q,v,!0),lx(i,t,Q,Ua(h,o)),null!==i.queries&&i.queries.elementStart(i,Q),Q}(h,o,r,i,t):o.data[h];da(v,!0);const Q=Tw(o,r,v,n);return r[h]=Q,Fd()&&hf(o,r,Q,v),Xr(Q,r),Aa(v)&&(sx(o,r,v),rx(o,v,r)),null!=t&&ax(r,v),Tu}function Mu(){let n=gs();const i=Ui();return lu()?cu():(n=n.parent,da(n,!1)),i.firstCreatePass&&(Rd(i,n),nu(n)&&i.queries.elementEnd(n)),Mu}let Tw=(n,i,t,r)=>(kl(!0),Op(i[Kn],""));function bx(){return en()}function r0(n){return!!n&&"function"==typeof n.then}function Mw(n){return!!n&&"function"==typeof n.subscribe}function Kr(n,i,t,r){const o=en(),h=Ui(),v=gs();return function Iw(n,i,t,r,o,h,v){const Q=Aa(r),be=n.firstCreatePass&&K1(n),Re=i[yr],qe=Y1(i);let ft=!0;if(3&r.type||v){const zt=zs(r,i),Xt=v?v(zt):zt,cn=qe.length,Wt=v?si=>v($i(si[r.index])):r.index;let Nn=null;if(!v&&Q&&(Nn=function zk(n,i,t,r){const o=n.cleanup;if(null!=o)for(let h=0;h<o.length-1;h+=2){const v=o[h];if(v===t&&o[h+1]===r){const Q=i[yo],ue=o[h+2];return Q.length>ue?Q[ue]:null}"string"==typeof v&&(h+=2)}return null}(n,i,o,r.index)),null!==Nn)(Nn.__ngLastListenerFn__||Nn).__ngNextListenerFn__=h,Nn.__ngLastListenerFn__=h,ft=!1;else{h=Fw(r,i,Re,h,!1);const si=t.listen(Xt,o,h);qe.push(h,si),be&&be.push(o,Wt,cn,cn+1)}}else h=Fw(r,i,Re,h,!1);const St=r.outputs;let Ot;if(ft&&null!==St&&(Ot=St[o])){const zt=Ot.length;if(zt)for(let Xt=0;Xt<zt;Xt+=2){const Ri=i[Ot[Xt]][Ot[Xt+1]].subscribe(h),qs=qe.length;qe.push(h,Ri),be&&be.push(o,r.index,qs,-(qs+1))}}}(h,o,o[Kn],v,n,i,r),Kr}function Pw(n,i,t,r){try{return ua(6,i,t),!1!==t(r)}catch(o){return Q1(n,o),!1}finally{ua(7,i,t)}}function Fw(n,i,t,r,o){return function h(v){if(v===Function)return r;Xp(n.componentOffset>-1?ha(n.index,i):i);let ue=Pw(i,t,r,v),be=h.__ngNextListenerFn__;for(;be;)ue=Pw(i,t,be,v)&&ue,be=be.__ngNextListenerFn__;return o&&!1===ue&&v.preventDefault(),ue}}function ea(n=1){return function Qy(n){return(ci.lFrame.contextLView=function ev(n,i){for(;n>0;)i=i[hs],n--;return i}(n,ci.lFrame.contextLView))[yr]}(n)}function Mm(n,i){return n<<17|i<<2}function ku(n){return n>>17&32767}function Cx(n){return 2|n}function Kh(n){return(131068&n)>>2}function Sx(n,i){return-131069&n|i<<2}function Ax(n){return 1|n}function Hw(n,i,t,r,o){const h=n[t+1],v=null===i;let Q=r?ku(h):Kh(h),ue=!1;for(;0!==Q&&(!1===ue||v);){const Re=n[Q+1];qk(n[Q],i)&&(ue=!0,n[Q+1]=r?Ax(Re):Cx(Re)),Q=r?ku(Re):Kh(Re)}ue&&(n[t+1]=r?Cx(h):Ax(h))}function qk(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&vu(n,i)>=0}const Ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Gw(n){return n.substring(Ps.key,Ps.keyEnd)}function $w(n,i){const t=Ps.textEnd;return t===i?-1:(i=Ps.keyEnd=function Yk(n,i,t){for(;i<t&&n.charCodeAt(i)>32;)i++;return i}(n,Ps.key=i,t),Ff(n,i,t))}function Ff(n,i,t){for(;i<t&&n.charCodeAt(i)<=32;)i++;return i}function Rf(n,i,t){return el(n,i,t,!1),Rf}function km(n,i){return el(n,i,null,!0),km}function jl(n){!function tl(n,i,t,r){const o=Ui(),h=Da(2);o.firstUpdatePass&&Kw(o,null,h,r);const v=en();if(t!==yi&&xa(v,h,t)){const Q=o.data[Ys()];if(t2(Q,r)&&!Yw(o,h)){let ue=r?Q.classesWithoutHost:Q.stylesWithoutHost;null!==ue&&(t=wi(ue,t||"")),_x(o,Q,v,t,r)}else!function aI(n,i,t,r,o,h,v,Q){o===yi&&(o=Pi);let ue=0,be=0,Re=0<o.length?o[0]:null,qe=0<h.length?h[0]:null;for(;null!==Re||null!==qe;){const ft=ue<o.length?o[ue+1]:void 0,St=be<h.length?h[be+1]:void 0;let zt,Ot=null;Re===qe?(ue+=2,be+=2,ft!==St&&(Ot=qe,zt=St)):null===qe||null!==Re&&Re<qe?(ue+=2,Ot=Re):(be+=2,Ot=qe,zt=St),null!==Ot&&Qw(n,i,t,r,Ot,zt,v,Q),Re=ue<o.length?o[ue]:null,qe=be<h.length?h[be]:null}}(o,Q,v,v[Kn],v[h+1],v[h+1]=function rI(n,i,t){if(null==t||""===t)return Pi;const r=[],o=gi(t);if(Array.isArray(o))for(let h=0;h<o.length;h++)n(r,o[h],!0);else if("object"==typeof o)for(const h in o)o.hasOwnProperty(h)&&n(r,h,o[h]);else"string"==typeof o&&i(r,o);return r}(n,i,t),r,h)}}(sI,Hl,n,!0)}function Hl(n,i){for(let t=function Xk(n){return function Ww(n){Ps.key=0,Ps.keyEnd=0,Ps.value=0,Ps.valueEnd=0,Ps.textEnd=n.length}(n),$w(n,Ff(n,0,Ps.textEnd))}(i);t>=0;t=$w(i,t))Ma(n,Gw(i),!0)}function el(n,i,t,r){const o=en(),h=Ui(),v=Da(2);h.firstUpdatePass&&Kw(h,n,v,r),i!==yi&&xa(o,v,i)&&Qw(h,h.data[Ys()],o,o[Kn],n,o[v+1]=function oI(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=oi(gi(n)))),n}(i,t),r,v)}function Yw(n,i){return i>=n.expandoStartIndex}function Kw(n,i,t,r){const o=n.data;if(null===o[t+1]){const h=o[Ys()],v=Yw(n,t);t2(h,r)&&null===i&&!v&&(i=!1),i=function eI(n,i,t,r){const o=Id(n);let h=r?i.residualClasses:i.residualStyles;if(null===o)0===(r?i.classBindings:i.styleBindings)&&(t=s0(t=Ex(null,n,i,t,r),i.attrs,r),h=null);else{const v=i.directiveStylingLast;if(-1===v||n[v]!==o)if(t=Ex(o,n,i,t,r),null===h){let ue=function tI(n,i,t){const r=t?i.classBindings:i.styleBindings;if(0!==Kh(r))return n[ku(r)]}(n,i,r);void 0!==ue&&Array.isArray(ue)&&(ue=Ex(null,n,i,ue[1],r),ue=s0(ue,i.attrs,r),function nI(n,i,t,r){n[ku(t?i.classBindings:i.styleBindings)]=r}(n,i,r,ue))}else h=function iI(n,i,t){let r;const o=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<o;h++)r=s0(r,n[h].hostAttrs,t);return s0(r,i.attrs,t)}(n,i,r)}return void 0!==h&&(r?i.residualClasses=h:i.residualStyles=h),t}(o,h,i,r),function Gk(n,i,t,r,o,h){let v=h?i.classBindings:i.styleBindings,Q=ku(v),ue=Kh(v);n[r]=t;let Re,be=!1;if(Array.isArray(t)?(Re=t[1],(null===Re||vu(t,Re)>0)&&(be=!0)):Re=t,o)if(0!==ue){const ft=ku(n[Q+1]);n[r+1]=Mm(ft,Q),0!==ft&&(n[ft+1]=Sx(n[ft+1],r)),n[Q+1]=function jk(n,i){return 131071&n|i<<17}(n[Q+1],r)}else n[r+1]=Mm(Q,0),0!==Q&&(n[Q+1]=Sx(n[Q+1],r)),Q=r;else n[r+1]=Mm(ue,0),0===Q?Q=r:n[ue+1]=Sx(n[ue+1],r),ue=r;be&&(n[r+1]=Cx(n[r+1])),Hw(n,Re,r,!0),Hw(n,Re,r,!1),function $k(n,i,t,r,o){const h=o?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof i&&vu(h,i)>=0&&(t[r+1]=Ax(t[r+1]))}(i,Re,n,r,h),v=Mm(Q,ue),h?i.classBindings=v:i.styleBindings=v}(o,h,i,t,v,r)}}function Ex(n,i,t,r,o){let h=null;const v=t.directiveEnd;let Q=t.directiveStylingLast;for(-1===Q?Q=t.directiveStart:Q++;Q<v&&(h=i[Q],r=s0(r,h.hostAttrs,o),h!==n);)Q++;return null!==n&&(t.directiveStylingLast=Q),r}function s0(n,i,t){const r=t?1:2;let o=-1;if(null!==i)for(let h=0;h<i.length;h++){const v=i[h];"number"==typeof v?o=v:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ma(n,v,!!t||i[++h]))}return void 0===n?null:n}function sI(n,i,t){const r=String(i);""!==r&&!r.includes(" ")&&Ma(n,r,t)}function Qw(n,i,t,r,o,h,v,Q){if(!(3&i.type))return;const ue=n.data,be=ue[Q+1],Re=function Hk(n){return 1==(1&n)}(be)?e2(ue,i,t,o,Kh(be),v):void 0;Im(Re)||(Im(h)||function Vk(n){return 2==(2&n)}(be)&&(h=e2(ue,null,t,o,Q,v)),function Ie(n,i,t,r,o){if(i)o?n.addClass(t,r):n.removeClass(t,r);else{let h=-1===r.indexOf("-")?void 0:Ll.DashCase;null==o?n.removeStyle(t,r,h):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),h|=Ll.Important),n.setStyle(t,r,o,h))}}(r,v,dh(Ys(),t),o,h))}function e2(n,i,t,r,o,h){const v=null===i;let Q;for(;o>0;){const ue=n[o],be=Array.isArray(ue),Re=be?ue[1]:ue,qe=null===Re;let ft=t[o+1];ft===yi&&(ft=qe?Pi:void 0);let St=qe?bp(ft,r):Re===r?ft:void 0;if(be&&!Im(St)&&(St=bp(ue,r)),Im(St)&&(Q=St,v))return Q;const Ot=n[o+1];o=v?ku(Ot):Kh(Ot)}if(null!==i){let ue=h?i.residualClasses:i.residualStyles;null!=ue&&(Q=bp(ue,r))}return Q}function Im(n){return void 0!==n}function t2(n,i){return 0!=(n.flags&(i?8:16))}function ti(n,i=""){const t=en(),r=Ui(),o=n+xi,h=r.firstCreatePass?bf(r,o,1,i,null):r.data[o],v=n2(r,t,h,i,n);t[o]=v,Fd()&&hf(r,t,v,h),da(h,!1)}let n2=(n,i,t,r,o)=>(kl(!0),function _c(n,i){return n.createText(i)}(i[Kn],r));function Ac(n,i,t){const r=en(),o=function Cf(n,i,t,r){return xa(n,hc(),t)?i+jn(t)+r:yi}(r,n,i,t);return o!==yi&&function Sc(n,i,t){const r=dh(i,n);!function Nh(n,i,t){n.setValue(i,t)}(n[Kn],r,t)}(r,Ys(),o),Ac}function Dx(n,i,t){const r=en();if(xa(r,hc(),i)){const h=Ui(),v=mr();oo(h,v,r,n,i,J1(Id(h.data),v,r),t,!0)}return Dx}const Lf="en-US";let S2=Lf;function kx(n,i,t,r,o){if(n=an(n),Array.isArray(n))for(let h=0;h<n.length;h++)kx(n[h],i,t,r,o);else{const h=Ui(),v=en(),Q=gs();let ue=Zh(n)?n:an(n.provide);const be=s1(n),Re=1048575&Q.providerIndexes,qe=Q.directiveStart,ft=Q.providerIndexes>>20;if(Zh(n)||!n.multi){const St=new Pl(be,o,Bt),Ot=Px(ue,i,o?Re:Re+ft,qe);-1===Ot?(mp(_h(Q,v),h,ue),Ix(h,n,i.length),i.push(ue),Q.directiveStart++,Q.directiveEnd++,o&&(Q.providerIndexes+=1048576),t.push(St),v.push(St)):(t[Ot]=St,v[Ot]=St)}else{const St=Px(ue,i,Re+ft,qe),Ot=Px(ue,i,Re,Re+ft),Xt=Ot>=0&&t[Ot];if(o&&!Xt||!o&&!(St>=0&&t[St])){mp(_h(Q,v),h,ue);const cn=function TP(n,i,t,r,o){const h=new Pl(n,t,Bt);return h.multi=[],h.index=i,h.componentProviders=0,Z2(h,o,r&&!t),h}(o?DP:EP,t.length,o,r,be);!o&&Xt&&(t[Ot].providerFactory=cn),Ix(h,n,i.length,0),i.push(ue),Q.directiveStart++,Q.directiveEnd++,o&&(Q.providerIndexes+=1048576),t.push(cn),v.push(cn)}else Ix(h,n,St>-1?St:Ot,Z2(t[o?Ot:St],be,!o&&r));!o&&r&&Xt&&t[Ot].componentProviders++}}}function Ix(n,i,t,r){const o=Zh(i),h=function xT(n){return!!n.useClass}(i);if(o||h){const ue=(h?an(i.useClass):i).prototype.ngOnDestroy;if(ue){const be=n.destroyHooks||(n.destroyHooks=[]);if(!o&&i.multi){const Re=be.indexOf(t);-1===Re?be.push(t,[r,ue]):be[Re+1].push(r,ue)}else be.push(t,ue)}}}function Z2(n,i,t){return t&&n.componentProviders++,n.multi.push(i)-1}function Px(n,i,t,r){for(let o=t;o<r;o++)if(i[o]===n)return o;return-1}function EP(n,i,t,r){return Fx(this.multi,[])}function DP(n,i,t,r){const o=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,Q=to(t,t[Cn],this.providerFactory.index,r);h=Q.slice(0,v),Fx(o,h);for(let ue=v;ue<Q.length;ue++)h.push(Q[ue])}else h=[],Fx(o,h);return h}function Fx(n,i){for(let t=0;t<n.length;t++)i.push((0,n[t])());return i}function Lr(n,i=[]){return t=>{t.providersResolver=(r,o)=>function AP(n,i,t){const r=Ui();if(r.firstCreatePass){const o=Di(n);kx(t,r.data,r.blueprint,o,!0),kx(i,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,i)}}class Qh{}class Y2{}class Rx extends Qh{constructor(i,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aw(this);const o=rs(i);this._bootstrapComponents=Cc(o.bootstrap),this._r3Injector=v1(i,t,[{provide:Qh,useValue:this},{provide:qp,useValue:this.componentFactoryResolver},...r],oi(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ox extends Y2{constructor(i){super(),this.moduleType=i}create(i){return new Rx(this.moduleType,i,[])}}class K2 extends Qh{constructor(i){super(),this.componentFactoryResolver=new aw(this),this.instance=null;const t=new pf([...i.providers,{provide:Qh,useValue:this},{provide:qp,useValue:this.componentFactoryResolver}],i.parent||om(),i.debugName,new Set(["environment"]));this.injector=t,i.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Lx(n,i,t=null){return new K2({providers:n,parent:i,debugName:t,runEnvironmentInitializers:!0}).injector}let IP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=so(0,t.type),o=r.length>0?Lx([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Bn({token:n,providedIn:"environment",factory:()=>new n(On(ao))})}return n})();function ls(n){n.getStandaloneInjector=i=>i.get(IP).getOrCreateStandaloneInjector(n)}function t3(){return this._results[Symbol.iterator]()}class zx{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new on)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=zx.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=t3)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,t){return this._results.reduce(i,t)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,t){const r=this;r.dirty=!1;const o=function Ta(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ag(n,i,t){if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],h=i[r];if(t&&(o=t(o),h=t(h)),h!==o)return!1}return!0}(r._results,o,t))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function r3(n,i,t,r=!0){const o=i[Cn];if(function Nl(n,i,t,r){const o=$r+r,h=t.length;r>0&&(t[o-1][Xs]=i),r<h-$r?(i[Xs]=t[o],qd(t,$r+r,i)):(t.push(i),i[Xs]=null),i[ur]=t;const v=i[nc];null!==v&&t!==v&&function Lp(n,i){const t=n[xo];i[Gi]!==i[ur][ur][Gi]&&(n[Ca]=!0),null===t?n[xo]=[i]:t.push(i)}(v,i);const Q=i[Ba];null!==Q&&Q.insertView(n),i[ui]|=128}(o,i,n,t),r){const h=u(t,n),v=i[Kn],Q=Vh(v,n[Sa]);null!==Q&&function Tv(n,i,t,r,o,h){r[gr]=o,r[Hr]=i,ne(n,r,t,1,o,h)}(o,n[Hr],v,i,Q,h)}}let nl=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=o3}return n})();const s3=nl,a3=class extends s3{constructor(i,t,r){super(),this._declarationLView=i,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,t){return this.createEmbeddedViewImpl(i,t)}createEmbeddedViewImpl(i,t,r){const o=function n3(n,i,t,r){const o=i.tView,Q=vm(n,o,t,4096&n[ui]?4096:16,null,i,null,null,null,r?.injector??null,r?.hydrationInfo??null);Q[nc]=n[i.index];const be=n[Ba];return null!==be&&(Q[Ba]=be.createEmbeddedView(o)),fx(o,Q,t),Q}(this._declarationLView,this._declarationTContainer,i,{injector:t,hydrationInfo:r});return new Kp(o)}};function o3(){return Lm(gs(),en())}function Lm(n,i){return 4&n.type?new a3(i,n,vf(n,i)):null}let il=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=f3}return n})();function f3(){return mC(gs(),en())}const p3=il,pC=class extends p3{constructor(i,t,r){super(),this._lContainer=i,this._hostTNode=t,this._hostLView=r}get element(){return vf(this._hostTNode,this._hostLView)}get injector(){return new Ks(this._hostTNode,this._hostLView)}get parentInjector(){const i=jd(this._hostTNode,this._hostLView);if(xh(i)){const t=hu(i,this._hostLView),r=gc(i);return new Ks(t[Cn].data[r+8],t)}return new Ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const t=gC(this._lContainer);return null!==t&&t[i]||null}get length(){return this._lContainer.length-$r}createEmbeddedView(i,t,r){let o,h;"number"==typeof r?o=r:null!=r&&(o=r.index,h=r.injector);const Q=i.createEmbeddedViewImpl(t||{},h,null);return this.insertImpl(Q,o,false),Q}createComponent(i,t,r,o,h){const v=i&&!function mu(n){return"function"==typeof n}(i);let Q;if(v)Q=t;else{const zt=t||{};Q=zt.index,r=zt.injector,o=zt.projectableNodes,h=zt.environmentInjector||zt.ngModuleRef}const ue=v?i:new Jp(Ei(i)),be=r||this.parentInjector;if(!h&&null==ue.ngModule){const Xt=(v?be:this.parentInjector).get(ao,null);Xt&&(h=Xt)}Ei(ue.componentType??{});const St=ue.create(be,o,null,h);return this.insertImpl(St.hostView,Q,false),St}insert(i,t){return this.insertImpl(i,t,!1)}insertImpl(i,t,r){const o=i._lView;if(function ap(n){return Sr(n[ur])}(o)){const ue=this.indexOf(i);if(-1!==ue)this.detach(ue);else{const be=o[ur],Re=new pC(be,be[Hr],be[ur]);Re.detach(Re.indexOf(i))}}const v=this._adjustIndex(t),Q=this._lContainer;return r3(Q,o,v,!r),i.attachToViewContainerRef(),qd(Ux(Q),v,i),i}move(i,t){return this.insert(i,t)}indexOf(i){const t=gC(this._lContainer);return null!==t?t.indexOf(i):-1}remove(i){const t=this._adjustIndex(i,-1),r=Bh(this._lContainer,t);r&&(wh(Ux(this._lContainer),t),zh(r[Cn],r))}detach(i){const t=this._adjustIndex(i,-1),r=Bh(this._lContainer,t);return r&&null!=wh(Ux(this._lContainer),t)?new Kp(r):null}_adjustIndex(i,t=0){return i??this.length+t}};function gC(n){return n[8]}function Ux(n){return n[8]||(n[8]=[])}function mC(n,i){let t;const r=i[n.index];return Sr(r)?t=r:(t=X1(r,i,null,n),i[n.index]=t,xm(i,t)),yC(t,i,n,r),new pC(t,n,i)}let yC=function vC(n,i,t,r){if(n[Sa])return;let o;o=8&t.type?$i(r):function g3(n,i){const t=n[Kn],r=t.createComment(""),o=zs(i,n);return Yo(t,Vh(t,o),r,function jp(n,i){return n.nextSibling(i)}(t,o),!1),r}(i,t),n[Sa]=o};class Vx{constructor(i){this.queryList=i,this.matches=null}clone(){return new Vx(this.queryList)}setDirty(){this.queryList.setDirty()}}class jx{constructor(i=[]){this.queries=i}createEmbeddedView(i){const t=i.queries;if(null!==t){const r=null!==i.contentQueries?i.contentQueries[0]:t.length,o=[];for(let h=0;h<r;h++){const v=t.getByIndex(h);o.push(this.queries[v.indexInDeclarationView].clone())}return new jx(o)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let t=0;t<this.queries.length;t++)null!==CC(i,t).matches&&this.queries[t].setDirty()}}class xC{constructor(i,t,r=null){this.predicate=i,this.flags=t,this.read=r}}class Hx{constructor(i=[]){this.queries=i}elementStart(i,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(i,t)}elementEnd(i){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(i)}embeddedTView(i){let t=null;for(let r=0;r<this.length;r++){const o=null!==t?t.length:0,h=this.getByIndex(r).embeddedTView(i,o);h&&(h.indexInDeclarationView=r,null!==t?t.push(h):t=[h])}return null!==t?new Hx(t):null}template(i,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(i,t)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Gx{constructor(i,t=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(i,t){this.isApplyingToNode(t)&&this.matchTNode(i,t)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,t){this.elementStart(i,t)}embeddedTView(i,t){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,t),new Gx(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=i.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(i,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const h=r[o];this.matchTNodeWithReadOption(i,t,v3(t,h)),this.matchTNodeWithReadOption(i,t,du(t,i,h,!1,!1))}else r===nl?4&t.type&&this.matchTNodeWithReadOption(i,t,-1):this.matchTNodeWithReadOption(i,t,du(t,i,r,!1,!1))}matchTNodeWithReadOption(i,t,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===ya||o===il||o===nl&&4&t.type)this.addMatch(t.index,-2);else{const h=du(t,i,o,!1,!1);null!==h&&this.addMatch(t.index,h)}else this.addMatch(t.index,r)}}addMatch(i,t){null===this.matches?this.matches=[i,t]:this.matches.push(i,t)}}function v3(n,i){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===i)return t[r+1];return null}function _3(n,i,t,r){return-1===t?function x3(n,i){return 11&n.type?vf(n,i):4&n.type?Lm(n,i):null}(i,n):-2===t?function b3(n,i,t){return t===ya?vf(i,n):t===nl?Lm(i,n):t===il?mC(i,n):void 0}(n,i,r):to(n,n[Cn],t,i)}function _C(n,i,t,r){const o=i[Ba].queries[r];if(null===o.matches){const h=n.data,v=t.matches,Q=[];for(let ue=0;ue<v.length;ue+=2){const be=v[ue];Q.push(be<0?null:_3(i,h[be],v[ue+1],t.metadata.read))}o.matches=Q}return o.matches}function $x(n,i,t,r){const o=n.queries.getByIndex(t),h=o.matches;if(null!==h){const v=_C(n,i,o,t);for(let Q=0;Q<h.length;Q+=2){const ue=h[Q];if(ue>0)r.push(v[Q/2]);else{const be=h[Q+1],Re=i[-ue];for(let qe=$r;qe<Re.length;qe++){const ft=Re[qe];ft[nc]===ft[ur]&&$x(ft[Cn],ft,be,r)}if(null!==Re[xo]){const qe=Re[xo];for(let ft=0;ft<qe.length;ft++){const St=qe[ft];$x(St[Cn],St,be,r)}}}}}return r}function rl(n){const i=en(),t=Ui(),r=og();mh(r+1);const o=CC(t,r);if(n.dirty&&function eg(n){return 4==(4&n[ui])}(i)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const h=o.crossesNgTemplate?$x(t,i,r,[]):_C(t,i,o,r);n.reset(h,UT),n.notifyOnChanges()}return!0}return!1}function ed(n,i,t){const r=Ui();r.firstCreatePass&&(function wC(n,i,t){null===n.queries&&(n.queries=new Hx),n.queries.track(new Gx(i,t))}(r,new xC(n,i,t),-1),2==(2&i)&&(r.staticViewQueries=!0)),function bC(n,i,t){const r=new zx(4==(4&t));(function vM(n,i,t,r){const o=Y1(i);o.push(t),n.firstCreatePass&&K1(n).push(r,o.length-1)})(n,i,r,r.destroy),null===i[Ba]&&(i[Ba]=new jx),i[Ba].queries.push(new Vx(r))}(r,en(),i)}function sl(){return function w3(n,i){return n[Ba].queries[i].queryList}(en(),og())}function CC(n,i){return n.queries.getByIndex(i)}const Kx=new Rn("Application Initializer");let Jx=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=dn(Kx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const h=o();if(r0(h))t.push(h);else if(Mw(h)){const v=new Promise((Q,ue)=>{h.subscribe({complete:Q,error:ue})});t.push(v)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UC=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ec=new Rn("LocaleId",{providedIn:"root",factory:()=>dn(Ec,hi.Optional|hi.SkipSelf)||function $3(){return typeof $localize<"u"&&$localize.locale||Lf}()});let zm=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new sn(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class X3{constructor(i,t){this.ngModuleFactory=i,this.componentFactories=t}}let VC=(()=>{class n{compileModuleSync(t){return new Ox(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),h=Cc(rs(t).declarations).reduce((v,Q)=>{const ue=Ei(Q);return ue&&v.push(new Jp(ue)),v},[]);return new X3(r,h)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $C=new Rn(""),Vm=new Rn("");let i_,t_=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,i_||(function mF(n){i_=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let h=-1;r&&r>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:h,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(On(Zn),On(n_),On(Vm))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})(),n_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return i_?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Iu=null;const qC=new Rn("AllowMultipleToken"),r_=new Rn("PlatformDestroyListeners"),s_=new Rn("appBootstrapListener");class XC{constructor(i,t){this.name=i,this.token=t}}function YC(n,i,t=[]){const r=`Platform: ${i}`,o=new Rn(r);return(h=[])=>{let v=a_();if(!v||v.injector.get(qC,!1)){const Q=[...t,...h,{provide:o,useValue:!0}];n?n(Q):function xF(n){if(Iu&&!Iu.get(qC,!1))throw new qt(400,!1);(function WC(){!function fs(n){Ds=n}(()=>{throw new qt(600,!1)})})(),Iu=n;const i=n.get(JC);(function ZC(n){n.get(a1,null)?.forEach(t=>t())})(n)}(function KC(n=[],i){return va.create({name:i,providers:[{provide:Lv,useValue:"platform"},{provide:r_,useValue:new Set([()=>Iu=null])},...n]})}(Q,r))}return function bF(n){const i=a_();if(!i)throw new qt(401,!1);return i}()}}function a_(){return Iu?.get(JC)??null}let JC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function wF(n="zone.js",i){return"noop"===n?new nM:"zone.js"===n?new Zn(i):n}(r?.ngZone,function QC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const h=function kP(n,i,t){return new Rx(n,i,t)}(t.moduleType,this.injector,function rS(n){return[{provide:Zn,useFactory:n},{provide:Xh,multi:!0,useFactory:()=>{const i=dn(SF,{optional:!0});return()=>i.initialize()}},{provide:iS,useFactory:CF},{provide:C1,useFactory:S1}]}(()=>o)),v=h.injector.get(Bl,null);return o.runOutsideAngular(()=>{const Q=o.onError.subscribe({next:ue=>{v.handleError(ue)}});h.onDestroy(()=>{jm(this._modules,h),Q.unsubscribe()})}),function eS(n,i,t){try{const r=t();return r0(r)?r.catch(o=>{throw i.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw i.runOutsideAngular(()=>n.handleError(r)),r}}(v,o,()=>{const Q=h.injector.get(Jx);return Q.runInitializers(),Q.donePromise.then(()=>(function A2(n){Fs(n,"Expected localeId to be defined"),"string"==typeof n&&(S2=n.toLowerCase().replace(/_/g,"-"))}(h.injector.get(Ec,Lf)||Lf),this._moduleDoBootstrap(h),h))})})}bootstrapModule(t,r=[]){const o=tS({},r);return function yF(n,i,t){const r=new Ox(t);return Promise.resolve(r)}(0,0,t).then(h=>this.bootstrapModuleFactory(h,o))}_moduleDoBootstrap(t){const r=t.injector.get(Pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new qt(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(r_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(On(va))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function tS(n,i){return Array.isArray(i)?i.reduce(tS,n):{...n,...i}}let Pu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=dn(iS),this.zoneIsStable=dn(C1),this.componentTypes=[],this.components=[],this.isStable=dn(zm).hasPendingTasks.pipe(fn(t=>t?tn(!1):this.zoneIsStable),function ai(n,i=E){return n=n??mi,S((t,r)=>{let o,h=!0;t.subscribe(B(r,v=>{const Q=i(v);(h||!n(o,Q))&&(h=!1,o=Q,r.next(v))}))})}(),Wn()),this._injector=dn(ao)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const o=t instanceof h1;if(!this._injector.get(Jx).done)throw!o&&function oa(n){const i=Ei(n)||Rr(n)||is(n);return null!==i&&i.standalone}(t),new qt(405,!1);let v;v=o?t:this._injector.get(qp).resolveComponentFactory(t),this.componentTypes.push(v.componentType);const Q=function vF(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Qh),be=v.create(va.NULL,[],r||v.selector,Q),Re=be.location.nativeElement,qe=be.injector.get($C,null);return qe?.registerApplication(Re),be.onDestroy(()=>{this.detachView(be.hostView),jm(this.components,be),qe?.unregisterApplication(Re)}),this._loadComponent(be),be}tick(){if(this._runningTick)throw new qt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;jm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(s_,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new qt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jm(n,i){const t=n.indexOf(i);t>-1&&n.splice(t,1)}const iS=new Rn("",{providedIn:"root",factory:()=>dn(Bl).handleError.bind(void 0)});function CF(){const n=dn(Zn),i=dn(Bl);return t=>n.runOutsideAngular(()=>i.handleError(t))}let SF=(()=>{class n{constructor(){this.zone=dn(Zn),this.applicationRef=dn(Pu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let m0=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=DF}return n})();function DF(n){return function TF(n,i,t){if(Qa(n)&&!t){const r=ha(n.index,i);return new Kp(r,r)}return 47&n.type?new Kp(i[Gi],i):null}(gs(),en(),16==(16&n))}class lS{constructor(){}supports(i){return Cm(i)}create(i){return new RF(i)}}const FF=(n,i)=>i;class RF{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||FF}forEachItem(i){let t;for(t=this._itHead;null!==t;t=t._next)i(t)}forEachOperation(i){let t=this._itHead,r=this._removalsHead,o=0,h=null;for(;t||r;){const v=!r||t&&t.currentIndex<uS(r,o,h)?t:r,Q=uS(v,o,h),ue=v.currentIndex;if(v===r)o--,r=r._nextRemoved;else if(t=t._next,null==v.previousIndex)o++;else{h||(h=[]);const be=Q-o,Re=ue-o;if(be!=Re){for(let ft=0;ft<be;ft++){const St=ft<h.length?h[ft]:h[ft]=0,Ot=St+ft;Re<=Ot&&Ot<be&&(h[ft]=St+1)}h[v.previousIndex]=Re-be}}Q!==ue&&i(v,Q,ue)}}forEachPreviousItem(i){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)i(t)}forEachAddedItem(i){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)i(t)}forEachMovedItem(i){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)i(t)}forEachRemovedItem(i){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)i(t)}forEachIdentityChange(i){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)i(t)}diff(i){if(null==i&&(i=[]),!Cm(i))throw new qt(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o,h,v,t=this._itHead,r=!1;if(Array.isArray(i)){this.length=i.length;for(let Q=0;Q<this.length;Q++)h=i[Q],v=this._trackByFn(Q,h),null!==t&&Object.is(t.trackById,v)?(r&&(t=this._verifyReinsertion(t,h,v,Q)),Object.is(t.item,h)||this._addIdentityChange(t,h)):(t=this._mismatch(t,h,v,Q),r=!0),t=t._next}else o=0,function uk(n,i){if(Array.isArray(n))for(let t=0;t<n.length;t++)i(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)i(r.value)}}(i,Q=>{v=this._trackByFn(o,Q),null!==t&&Object.is(t.trackById,v)?(r&&(t=this._verifyReinsertion(t,Q,v,o)),Object.is(t.item,Q)||this._addIdentityChange(t,Q)):(t=this._mismatch(t,Q,v,o),r=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,t,r,o){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(i.item,t)||this._addIdentityChange(i,t),this._reinsertAfter(i,h,o)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(i.item,t)||this._addIdentityChange(i,t),this._moveAfter(i,h,o)):i=this._addAfter(new OF(t,r),h,o),i}_verifyReinsertion(i,t,r,o){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==h?i=this._reinsertAfter(h,i._prev,o):i.currentIndex!=o&&(i.currentIndex=o,this._addToMoves(i,o)),i}_truncate(i){for(;null!==i;){const t=i._next;this._addToRemovals(this._unlink(i)),i=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const o=i._prevRemoved,h=i._nextRemoved;return null===o?this._removalsHead=h:o._nextRemoved=h,null===h?this._removalsTail=o:h._prevRemoved=o,this._insertAfter(i,t,r),this._addToMoves(i,r),i}_moveAfter(i,t,r){return this._unlink(i),this._insertAfter(i,t,r),this._addToMoves(i,r),i}_addAfter(i,t,r){return this._insertAfter(i,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,t,r){const o=null===t?this._itHead:t._next;return i._next=o,i._prev=t,null===o?this._itTail=i:o._prev=i,null===t?this._itHead=i:t._next=i,null===this._linkedRecords&&(this._linkedRecords=new cS),this._linkedRecords.put(i),i.currentIndex=r,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const t=i._prev,r=i._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,i}_addToMoves(i,t){return i.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cS),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,t){return i.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class OF{constructor(i,t){this.item=i,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LF{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,i))return r;return null}remove(i){const t=i._prevDup,r=i._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class cS{constructor(){this.map=new Map}put(i){const t=i.trackById;let r=this.map.get(t);r||(r=new LF,this.map.set(t,r)),r.add(i)}get(i,t){const o=this.map.get(i);return o?o.get(i,t):null}remove(i){const t=i.trackById;return this.map.get(t).remove(i)&&this.map.delete(t),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uS(n,i,t){const r=n.previousIndex;if(null===r)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+i+o}function dS(){return new $m([new lS])}let $m=(()=>{class n{static#e=this.\u0275prov=Bn({token:n,providedIn:"root",factory:dS});constructor(t){this.factories=t}static create(t,r){if(null!=r){const o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||dS()),deps:[[n,new Ah,new Xd]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(null!=r)return r;throw new qt(901,!1)}}return n})();const VF=YC(null,"core",[]);let jF=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(On(Pu))};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({})}return n})();function zf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let d_=null;function Fu(){return d_}class n6{}const ta=new Rn("DocumentToken");let f_=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return dn(r6)},providedIn:"platform"})}return n})();const i6=new Rn("Location Initialized");let r6=(()=>{class n extends f_{constructor(){super(),this._doc=dn(ta),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fu().getBaseHref(this._doc)}onPopState(t){const r=Fu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Fu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function p_(n,i){if(0==n.length)return i;if(0==i.length)return n;let t=0;return n.endsWith("/")&&t++,i.startsWith("/")&&t++,2==t?n+i.substring(1):1==t?n+i:n+"/"+i}function wS(n){const i=n.match(/#|\?|$/),t=i&&i.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Dc(n){return n&&"?"!==n[0]?"?"+n:n}let nd=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return dn(SS)},providedIn:"root"})}return n})();const CS=new Rn("appBaseHref");let SS=(()=>{class n extends nd{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??dn(ta).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p_(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Dc(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,h){const v=this.prepareExternalUrl(o+Dc(h));this._platformLocation.pushState(t,r,v)}replaceState(t,r,o,h){const v=this.prepareExternalUrl(o+Dc(h));this._platformLocation.replaceState(t,r,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(On(f_),On(CS,8))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),s6=(()=>{class n extends nd{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=p_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,h){let v=this.prepareExternalUrl(o+Dc(h));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.pushState(t,r,v)}replaceState(t,r,o,h){let v=this.prepareExternalUrl(o+Dc(h));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(On(f_),On(CS,8))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})(),g_=(()=>{class n{constructor(t){this._subject=new on,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function l6(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(wS(AS(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Dc(r))}normalize(t){return n.stripTrailingSlash(function o6(n,i){if(!n||!i.startsWith(n))return i;const t=i.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:i}(this._basePath,AS(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dc(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dc(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=Dc;static#t=this.joinWithSlash=p_;static#n=this.stripTrailingSlash=wS;static#i=this.\u0275fac=function(r){return new(r||n)(On(nd))};static#o=this.\u0275prov=Bn({token:n,factory:function(){return function a6(){return new g_(On(nd))}()},providedIn:"root"})}return n})();function AS(n){return n.replace(/\/index.html$/,"")}function RS(n,i){i=encodeURIComponent(i);for(const t of n.split(";")){const r=t.indexOf("="),[o,h]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===i)return decodeURIComponent(h)}return null}class X6{constructor(i,t,r,o){this.$implicit=i,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let E_=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,h,v)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new X6(o.item,this._ngForOf,-1,-1),null===v?void 0:v);else if(null==v)r.remove(null===h?void 0:h);else if(null!==h){const Q=r.get(h);r.move(Q,v),NS(Q,o)}});for(let o=0,h=r.length;o<h;o++){const Q=r.get(o).context;Q.index=o,Q.count=h,Q.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{NS(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(il),Bt(nl),Bt($m))};static#t=this.\u0275dir=kn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function NS(n,i){n.context.$implicit=i.item}let iy=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Z6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(il),Bt(nl))};static#t=this.\u0275dir=kn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Z6{constructor(){this.$implicit=null,this.ngIf=null}}function BS(n,i){if(i&&!i.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${oi(i)}'.`)}let I_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({})}return n})();const jS="browser";function ry(n){return n===jS}function HS(n){return"server"===n}let AR=(()=>{class n{static#e=this.\u0275prov=Bn({token:n,providedIn:"root",factory:()=>new ER(On(ta),window)})}return n})();class ER{constructor(i,t){this.document=i,this.window=t,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const t=function DR(n,i){const t=n.getElementById(i)||n.getElementsByName(i)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const h=o.shadowRoot;if(h){const v=h.getElementById(i)||h.querySelector(`[name="${i}"]`);if(v)return v}o=r.nextNode()}}return null}(this.document,i);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(i){this.supportsScrolling()&&(this.window.history.scrollRestoration=i)}scrollToElement(i){const t=i.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(r-h[0],o-h[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class GS{}class YR extends n6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class R_ extends YR{static makeCurrent(){!function t6(n){d_||(d_=n)}(new R_)}onAndCancel(i,t,r){return i.addEventListener(t,r),()=>{i.removeEventListener(t,r)}}dispatchEvent(i,t){i.dispatchEvent(t)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,t){return(t=t||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,t){return"window"===t?window:"document"===t?i:"body"===t?i.body:null}getBaseHref(i){const t=function KR(){return b0=b0||document.querySelector("base"),b0?b0.getAttribute("href"):null}();return null==t?null:function JR(n){oy=oy||document.createElement("a"),oy.setAttribute("href",n);const i=oy.pathname;return"/"===i.charAt(0)?i:`/${i}`}(t)}resetBaseElement(){b0=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return RS(document.cookie,i)}}let oy,b0=null,e5=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const O_=new Rn("EventManagerPlugins");let ZS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(h=>h.supports(t)),!r)throw new qt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(On(O_),On(Zn))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();class YS{constructor(i){this._doc=i}}const L_="ng-app-id";let KS=(()=>{class n{constructor(t,r,o,h={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=h,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=HS(h),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${L_}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const h=o.get(t);return h.usage+=r,h.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,h=o?.get(r);if(h?.parentNode===t)return o.delete(r),h.removeAttribute(L_),h;{const v=this.doc.createElement("style");return this.nonce&&v.setAttribute("nonce",this.nonce),v.textContent=r,this.platformIsServer&&v.setAttribute(L_,this.appId),v}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const h=this.styleRef,v=h.get(r)?.elements;v?v.push(o):h.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(On(ta),On(lm),On(o1,8),On(Qo))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const N_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},B_=/%COMP%/g,r5=new Rn("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function QS(n,i){return i.map(t=>t.replace(B_,n))}let eA=(()=>{class n{constructor(t,r,o,h,v,Q,ue,be=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=h,this.doc=v,this.platformId=Q,this.ngZone=ue,this.nonce=be,this.rendererByCompId=new Map,this.platformIsServer=HS(Q),this.defaultRenderer=new z_(t,v,ue,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Os.ShadowDom&&(r={...r,encapsulation:Os.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof nA?o.applyToHost(t):o instanceof U_&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let h=o.get(r.id);if(!h){const v=this.doc,Q=this.ngZone,ue=this.eventManager,be=this.sharedStylesHost,Re=this.removeStylesOnCompDestroy,qe=this.platformIsServer;switch(r.encapsulation){case Os.Emulated:h=new nA(ue,be,r,this.appId,Re,v,Q,qe);break;case Os.ShadowDom:return new l5(ue,be,t,r,v,Q,this.nonce,qe);default:h=new U_(ue,be,r,Re,v,Q,qe)}o.set(r.id,h)}return h}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(On(ZS),On(KS),On(lm),On(r5),On(ta),On(Qo),On(Zn),On(o1))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();class z_{constructor(i,t,r,o){this.eventManager=i,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,t){return t?this.doc.createElementNS(N_[t]||t,i):this.doc.createElement(i)}createComment(i){return this.doc.createComment(i)}createText(i){return this.doc.createTextNode(i)}appendChild(i,t){(tA(i)?i.content:i).appendChild(t)}insertBefore(i,t,r){i&&(tA(i)?i.content:i).insertBefore(t,r)}removeChild(i,t){i&&i.removeChild(t)}selectRootElement(i,t){let r="string"==typeof i?this.doc.querySelector(i):i;if(!r)throw new qt(-5104,!1);return t||(r.textContent=""),r}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,t,r,o){if(o){t=o+":"+t;const h=N_[o];h?i.setAttributeNS(h,t,r):i.setAttribute(t,r)}else i.setAttribute(t,r)}removeAttribute(i,t,r){if(r){const o=N_[r];o?i.removeAttributeNS(o,t):i.removeAttribute(`${r}:${t}`)}else i.removeAttribute(t)}addClass(i,t){i.classList.add(t)}removeClass(i,t){i.classList.remove(t)}setStyle(i,t,r,o){o&(Ll.DashCase|Ll.Important)?i.style.setProperty(t,r,o&Ll.Important?"important":""):i.style[t]=r}removeStyle(i,t,r){r&Ll.DashCase?i.style.removeProperty(t):i.style[t]=""}setProperty(i,t,r){i[t]=r}setValue(i,t){i.nodeValue=t}listen(i,t,r){if("string"==typeof i&&!(i=Fu().getGlobalEventTarget(this.doc,i)))throw new Error(`Unsupported event target ${i} for event ${t}`);return this.eventManager.addEventListener(i,t,this.decoratePreventDefault(r))}decoratePreventDefault(i){return t=>{if("__ngUnwrap__"===t)return i;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>i(t)):i(t))&&t.preventDefault()}}}function tA(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class l5 extends z_{constructor(i,t,r,o,h,v,Q,ue){super(i,h,v,ue),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const be=QS(o.id,o.styles);for(const Re of be){const qe=document.createElement("style");Q&&qe.setAttribute("nonce",Q),qe.textContent=Re,this.shadowRoot.appendChild(qe)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}appendChild(i,t){return super.appendChild(this.nodeOrShadowRoot(i),t)}insertBefore(i,t,r){return super.insertBefore(this.nodeOrShadowRoot(i),t,r)}removeChild(i,t){return super.removeChild(this.nodeOrShadowRoot(i),t)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class U_ extends z_{constructor(i,t,r,o,h,v,Q,ue){super(i,h,v,Q),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=ue?QS(ue,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nA extends U_{constructor(i,t,r,o,h,v,Q,ue){const be=o+"-"+r.id;super(i,t,r,h,v,Q,ue,be),this.contentAttr=function s5(n){return"_ngcontent-%COMP%".replace(B_,n)}(be),this.hostAttr=function a5(n){return"_nghost-%COMP%".replace(B_,n)}(be)}applyToHost(i){this.applyStyles(),this.setAttribute(i,this.hostAttr,"")}createElement(i,t){const r=super.createElement(i,t);return super.setAttribute(r,this.contentAttr,""),r}}let c5=(()=>{class n extends YS{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(On(ta))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const iA=["alt","control","meta","shift"],u5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let d5=(()=>{class n extends YS{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const h=n.parseEventName(r),v=n.eventCallback(h.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fu().onAndCancel(t,h.domEventName,v))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const h=n._normalizeKey(r.pop());let v="",Q=r.indexOf("code");if(Q>-1&&(r.splice(Q,1),v="code."),iA.forEach(be=>{const Re=r.indexOf(be);Re>-1&&(r.splice(Re,1),v+=be+".")}),v+=h,0!=r.length||0===h.length)return null;const ue={};return ue.domEventName=o,ue.fullKey=v,ue}static matchEventFullKeyCode(t,r){let o=u5[t.key]||t.key,h="";return r.indexOf("code.")>-1&&(o=t.code,h="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),iA.forEach(v=>{v!==o&&(0,h5[v])(t)&&(h+=v+".")}),h+=o,h===r)}static eventCallback(t,r,o){return h=>{n.matchEventFullKeyCode(h,t)&&o.runGuarded(()=>r(h))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(On(ta))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const m5=YC(VF,"browser",[{provide:Qo,useValue:jS},{provide:a1,useValue:function f5(){R_.makeCurrent()},multi:!0},{provide:ta,useFactory:function g5(){return function Qt(n){Ht=n}(document),document},deps:[]}]),y5=new Rn(""),aA=[{provide:Vm,useClass:class QR{addToWindow(i){ar.getAngularTestability=(r,o=!0)=>{const h=i.findTestabilityInTree(r,o);if(null==h)throw new qt(5103,!1);return h},ar.getAllAngularTestabilities=()=>i.getAllTestabilities(),ar.getAllAngularRootElements=()=>i.getAllRootElements(),ar.frameworkStabilizers||(ar.frameworkStabilizers=[]),ar.frameworkStabilizers.push(r=>{const o=ar.getAllAngularTestabilities();let h=o.length,v=!1;const Q=function(ue){v=v||ue,h--,0==h&&r(v)};o.forEach(ue=>{ue.whenStable(Q)})})}findTestabilityInTree(i,t,r){return null==t?null:i.getTestability(t)??(r?Fu().isShadowRoot(t)?this.findTestabilityInTree(i,t.host,!0):this.findTestabilityInTree(i,t.parentElement,!0):null)}},deps:[]},{provide:$C,useClass:t_,deps:[Zn,n_,Vm]},{provide:t_,useClass:t_,deps:[Zn,n_,Vm]}],oA=[{provide:Lv,useValue:"root"},{provide:Bl,useFactory:function p5(){return new Bl},deps:[]},{provide:O_,useClass:c5,multi:!0,deps:[ta,Zn,Qo]},{provide:O_,useClass:d5,multi:!0,deps:[ta]},eA,KS,ZS,{provide:f1,useExisting:eA},{provide:GS,useClass:e5,deps:[]},[]];let v5=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:lm,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(On(y5,12))};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({providers:[...oA,...aA],imports:[I_,jF]})}return n})(),lA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(On(ta))};static#t=this.\u0275prov=Bn({token:n,factory:function(r){let o=null;return o=r?new r:function _5(){return new lA(On(ta))}(),o},providedIn:"root"})}return n})();typeof window<"u"&&window;let hA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(r){let o=null;return o=r?new(r||n):On(dA),o},providedIn:"root"})}return n})(),dA=(()=>{class n extends hA{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ia.NONE:return r;case Ia.HTML:return tr(r,"HTML")?gi(r):So(this._doc,String(r)).toString();case Ia.STYLE:return tr(r,"Style")?gi(r):r;case Ia.SCRIPT:if(tr(r,"Script"))return gi(r);throw new qt(5200,!1);case Ia.URL:return tr(r,"URL")?gi(r):Ur(String(r));case Ia.RESOURCE_URL:if(tr(r,"ResourceURL"))return gi(r);throw new qt(5201,!1);default:throw new qt(5202,!1)}}bypassSecurityTrustHtml(t){return function vs(n){return new Yt(n)}(t)}bypassSecurityTrustStyle(t){return function Er(n){return new $n(n)}(t)}bypassSecurityTrustScript(t){return function Vs(n){return new Vn(n)}(t)}bypassSecurityTrustUrl(t){return function js(n){return new ri(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Hs(n){return new Zi(n)}(t)}static#e=this.\u0275fac=function(r){return new(r||n)(On(ta))};static#t=this.\u0275prov=Bn({token:n,factory:function(r){let o=null;return o=r?new r:function S5(n){return new dA(n.get(ta))}(On(va)),o},providedIn:"root"})}return n})();const{isArray:E5}=Array,{getPrototypeOf:D5,prototype:T5,keys:M5}=Object;function pA(n){if(1===n.length){const i=n[0];if(E5(i))return{args:i,keys:null};if(function k5(n){return n&&"object"==typeof n&&D5(n)===T5}(i)){const t=M5(i);return{args:t.map(r=>i[r]),keys:t}}}return{args:n,keys:null}}const{isArray:I5}=Array;function j_(n){return ie(i=>function P5(n,i){return I5(i)?n(...i):n(i)}(n,i))}function gA(n,i){return n.reduce((t,r,o)=>(t[r]=i[o],t),{})}function kc(...n){const i=kr(n),t=br(n),{args:r,keys:o}=pA(n);if(0===r.length)return $t([],i);const h=new m(function F5(n,i,t=E){return r=>{mA(i,()=>{const{length:o}=n,h=new Array(o);let v=o,Q=o;for(let ue=0;ue<o;ue++)mA(i,()=>{const be=$t(n[ue],i);let Re=!1;be.subscribe(B(r,qe=>{h[ue]=qe,Re||(Re=!0,Q--),Q||r.next(t(h.slice()))},()=>{--v||r.complete()}))},r)},r)}}(r,i,o?v=>gA(o,v):E));return t?h.pipe(j_(t)):h}function mA(n,i,t){n?pi(t,n,i):i()}const w0=Ee(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function H_(...n){return function R5(){return lr(1)}()($t(n,kr(n)))}function yA(n){return new m(i=>{un(n()).subscribe(i)})}function C0(n,i){const t=le(n)?n:()=>n,r=o=>o.error(t());return new m(i?o=>i.schedule(r,0,o):r)}function G_(){return S((n,i)=>{let t=null;n._refCount++;const r=B(i,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,h=t;t=null,o&&(!h||o===h)&&o.unsubscribe(),i.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class vA extends m{constructor(i,t){super(),this.source=i,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,L(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,i?.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new k;const t=this.getSubject();i.add(this.source.subscribe(B(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),i.closed&&(this._connection=null,i=k.EMPTY)}return i}refCount(){return G_()(this)}}function na(n){return n<=0?()=>Bi:S((i,t)=>{let r=0;i.subscribe(B(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function us(n,i){return S((t,r)=>{let o=0;t.subscribe(B(r,h=>n.call(i,h,o++)&&r.next(h)))})}function cy(n){return S((i,t)=>{let r=!1;i.subscribe(B(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function xA(n=O5){return S((i,t)=>{let r=!1;i.subscribe(B(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function O5(){return new w0}function Ou(n,i){const t=arguments.length>=2;return r=>r.pipe(n?us((o,h)=>n(o,h,r)):E,na(1),t?cy(i):xA(()=>new w0))}function Vf(n,i){return le(i)?_i(n,i,1):_i(n,1)}function $s(n,i,t){const r=le(n)||i||t?{next:n,error:i,complete:t}:n;return r?S((o,h)=>{var v;null===(v=r.subscribe)||void 0===v||v.call(r);let Q=!0;o.subscribe(B(h,ue=>{var be;null===(be=r.next)||void 0===be||be.call(r,ue),h.next(ue)},()=>{var ue;Q=!1,null===(ue=r.complete)||void 0===ue||ue.call(r),h.complete()},ue=>{var be;Q=!1,null===(be=r.error)||void 0===be||be.call(r,ue),h.error(ue)},()=>{var ue,be;Q&&(null===(ue=r.unsubscribe)||void 0===ue||ue.call(r)),null===(be=r.finalize)||void 0===be||be.call(r)}))}):E}function id(n){return S((i,t)=>{let h,r=null,o=!1;r=i.subscribe(B(t,void 0,void 0,v=>{h=un(n(v,id(n)(i))),r?(r.unsubscribe(),r=null,h.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,h.subscribe(t))})}function $_(n){return n<=0?()=>Bi:S((i,t)=>{let r=[];i.subscribe(B(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function S0(n){return S((i,t)=>{try{i.subscribe(t)}finally{t.add(n)}})}const Ai="primary",A0=Symbol("RouteTitle");class U5{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const t=this.params[i];return Array.isArray(t)?t[0]:t}return null}getAll(i){if(this.has(i)){const t=this.params[i];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jf(n){return new U5(n)}function V5(n,i,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(i.hasChildren()||r.length<n.length))return null;const o={};for(let h=0;h<r.length;h++){const v=r[h],Q=n[h];if(v.startsWith(":"))o[v.substring(1)]=Q;else if(v!==Q.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Gl(n,i){const t=n?Object.keys(n):void 0,r=i?Object.keys(i):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let h=0;h<t.length;h++)if(o=t[h],!_A(n[o],i[o]))return!1;return!0}function _A(n,i){if(Array.isArray(n)&&Array.isArray(i)){if(n.length!==i.length)return!1;const t=[...n].sort(),r=[...i].sort();return t.every((o,h)=>r[h]===o)}return n===i}function bA(n){return n.length>0?n[n.length-1]:null}function Lu(n){return function A5(n){return!!n&&(n instanceof m||le(n.lift)&&le(n.subscribe))}(n)?n:r0(n)?$t(Promise.resolve(n)):tn(n)}const H5={exact:function SA(n,i,t){if(!rd(n.segments,i.segments)||!uy(n.segments,i.segments,t)||n.numberOfChildren!==i.numberOfChildren)return!1;for(const r in i.children)if(!n.children[r]||!SA(n.children[r],i.children[r],t))return!1;return!0},subset:AA},wA={exact:function G5(n,i){return Gl(n,i)},subset:function $5(n,i){return Object.keys(i).length<=Object.keys(n).length&&Object.keys(i).every(t=>_A(n[t],i[t]))},ignored:()=>!0};function CA(n,i,t){return H5[t.paths](n.root,i.root,t.matrixParams)&&wA[t.queryParams](n.queryParams,i.queryParams)&&!("exact"===t.fragment&&n.fragment!==i.fragment)}function AA(n,i,t){return EA(n,i,i.segments,t)}function EA(n,i,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!rd(o,t)||i.hasChildren()||!uy(o,t,r))}if(n.segments.length===t.length){if(!rd(n.segments,t)||!uy(n.segments,t,r))return!1;for(const o in i.children)if(!n.children[o]||!AA(n.children[o],i.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),h=t.slice(n.segments.length);return!!(rd(n.segments,o)&&uy(n.segments,o,r)&&n.children[Ai])&&EA(n.children[Ai],i,h,r)}}function uy(n,i,t){return i.every((r,o)=>wA[t](n[o].parameters,r.parameters))}class Hf{constructor(i=new pr([],{}),t={},r=null){this.root=i,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jf(this.queryParams)),this._queryParamMap}toString(){return X5.serialize(this)}}class pr{constructor(i,t){this.segments=i,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hy(this)}}class E0{constructor(i,t){this.path=i,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jf(this.parameters)),this._parameterMap}toString(){return MA(this)}}function rd(n,i){return n.length===i.length&&n.every((t,r)=>t.path===i[r].path)}let D0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return new q_},providedIn:"root"})}return n})();class q_{parse(i){const t=new sO(i);return new Hf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(i){const t=`/${T0(i.root,!0)}`,r=function K5(n){const i=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${dy(t)}=${dy(o)}`).join("&"):`${dy(t)}=${dy(r)}`}).filter(t=>!!t);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${t}${r}${"string"==typeof i.fragment?`#${function Z5(n){return encodeURI(n)}(i.fragment)}`:""}`}}const X5=new q_;function hy(n){return n.segments.map(i=>MA(i)).join("/")}function T0(n,i){if(!n.hasChildren())return hy(n);if(i){const t=n.children[Ai]?T0(n.children[Ai],!1):"",r=[];return Object.entries(n.children).forEach(([o,h])=>{o!==Ai&&r.push(`${o}:${T0(h,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function W5(n,i){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Ai&&(t=t.concat(i(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Ai&&(t=t.concat(i(o,r)))}),t}(n,(r,o)=>o===Ai?[T0(n.children[Ai],!1)]:[`${o}:${T0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ai]?`${hy(n)}/${t[0]}`:`${hy(n)}/(${t.join("//")})`}}function DA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dy(n){return DA(n).replace(/%3B/gi,";")}function W_(n){return DA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fy(n){return decodeURIComponent(n)}function TA(n){return fy(n.replace(/\+/g,"%20"))}function MA(n){return`${W_(n.path)}${function Y5(n){return Object.keys(n).map(i=>`;${W_(i)}=${W_(n[i])}`).join("")}(n.parameters)}`}const J5=/^[^\/()?;#]+/;function X_(n){const i=n.match(J5);return i?i[0]:""}const Q5=/^[^\/()?;=#]+/,tO=/^[^=?&#]+/,iO=/^[^&#]+/;class sO{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pr([],{}):new pr([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(i.length>0||Object.keys(t).length>0)&&(r[Ai]=new pr(i,t)),r}parseSegment(){const i=X_(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new qt(4009,!1);return this.capture(i),new E0(fy(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const t=function eO(n){const i=n.match(Q5);return i?i[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=X_(this.remaining);o&&(r=o,this.capture(r))}i[fy(t)]=fy(r)}parseQueryParam(i){const t=function nO(n){const i=n.match(tO);return i?i[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const v=function rO(n){const i=n.match(iO);return i?i[0]:""}(this.remaining);v&&(r=v,this.capture(r))}const o=TA(t),h=TA(r);if(i.hasOwnProperty(o)){let v=i[o];Array.isArray(v)||(v=[v],i[o]=v),v.push(h)}else i[o]=h}parseParens(i){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=X_(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new qt(4010,!1);let h;r.indexOf(":")>-1?(h=r.slice(0,r.indexOf(":")),this.capture(h),this.capture(":")):i&&(h=Ai);const v=this.parseChildren();t[h]=1===Object.keys(v).length?v[Ai]:new pr([],v),this.consumeOptional("//")}return t}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new qt(4011,!1)}}function kA(n){return n.segments.length>0?new pr([],{[Ai]:n}):n}function IA(n){const i={};for(const r of Object.keys(n.children)){const h=IA(n.children[r]);if(r===Ai&&0===h.segments.length&&h.hasChildren())for(const[v,Q]of Object.entries(h.children))i[v]=Q;else(h.segments.length>0||h.hasChildren())&&(i[r]=h)}return function aO(n){if(1===n.numberOfChildren&&n.children[Ai]){const i=n.children[Ai];return new pr(n.segments.concat(i.segments),i.children)}return n}(new pr(n.segments,i))}function sd(n){return n instanceof Hf}function PA(n){let i;const o=kA(function t(h){const v={};for(const ue of h.children){const be=t(ue);v[ue.outlet]=be}const Q=new pr(h.url,v);return h===n&&(i=Q),Q}(n.root));return i??o}function FA(n,i,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===i.length)return Z_(o,o,o,t,r);const h=function lO(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new OA(!0,0,n);let i=0,t=!1;const r=n.reduce((o,h,v)=>{if("object"==typeof h&&null!=h){if(h.outlets){const Q={};return Object.entries(h.outlets).forEach(([ue,be])=>{Q[ue]="string"==typeof be?be.split("/"):be}),[...o,{outlets:Q}]}if(h.segmentPath)return[...o,h.segmentPath]}return"string"!=typeof h?[...o,h]:0===v?(h.split("/").forEach((Q,ue)=>{0==ue&&"."===Q||(0==ue&&""===Q?t=!0:".."===Q?i++:""!=Q&&o.push(Q))}),o):[...o,h]},[]);return new OA(t,i,r)}(i);if(h.toRoot())return Z_(o,o,new pr([],{}),t,r);const v=function cO(n,i,t){if(n.isAbsolute)return new gy(i,!0,0);if(!t)return new gy(i,!1,NaN);if(null===t.parent)return new gy(t,!0,0);const r=py(n.commands[0])?0:1;return function uO(n,i,t){let r=n,o=i,h=t;for(;h>o;){if(h-=o,r=r.parent,!r)throw new qt(4005,!1);o=r.segments.length}return new gy(r,!1,o-h)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(h,o,n),Q=v.processChildren?k0(v.segmentGroup,v.index,h.commands):LA(v.segmentGroup,v.index,h.commands);return Z_(o,v.segmentGroup,Q,t,r)}function py(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function M0(n){return"object"==typeof n&&null!=n&&n.outlets}function Z_(n,i,t,r,o){let v,h={};r&&Object.entries(r).forEach(([ue,be])=>{h[ue]=Array.isArray(be)?be.map(Re=>`${Re}`):`${be}`}),v=n===i?t:RA(n,i,t);const Q=kA(IA(v));return new Hf(Q,h,o)}function RA(n,i,t){const r={};return Object.entries(n.children).forEach(([o,h])=>{r[o]=h===i?t:RA(h,i,t)}),new pr(n.segments,r)}class OA{constructor(i,t,r){if(this.isAbsolute=i,this.numberOfDoubleDots=t,this.commands=r,i&&r.length>0&&py(r[0]))throw new qt(4003,!1);const o=r.find(M0);if(o&&o!==bA(r))throw new qt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gy{constructor(i,t,r){this.segmentGroup=i,this.processChildren=t,this.index=r}}function LA(n,i,t){if(n||(n=new pr([],{})),0===n.segments.length&&n.hasChildren())return k0(n,i,t);const r=function dO(n,i,t){let r=0,o=i;const h={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return h;const v=n.segments[o],Q=t[r];if(M0(Q))break;const ue=`${Q}`,be=r<t.length-1?t[r+1]:null;if(o>0&&void 0===ue)break;if(ue&&be&&"object"==typeof be&&void 0===be.outlets){if(!BA(ue,be,v))return h;r+=2}else{if(!BA(ue,{},v))return h;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,i,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const h=new pr(n.segments.slice(0,r.pathIndex),{});return h.children[Ai]=new pr(n.segments.slice(r.pathIndex),n.children),k0(h,0,o)}return r.match&&0===o.length?new pr(n.segments,{}):r.match&&!n.hasChildren()?Y_(n,i,t):r.match?k0(n,0,o):Y_(n,i,t)}function k0(n,i,t){if(0===t.length)return new pr(n.segments,{});{const r=function hO(n){return M0(n[0])?n[0].outlets:{[Ai]:n}}(t),o={};if(Object.keys(r).some(h=>h!==Ai)&&n.children[Ai]&&1===n.numberOfChildren&&0===n.children[Ai].segments.length){const h=k0(n.children[Ai],i,t);return new pr(n.segments,h.children)}return Object.entries(r).forEach(([h,v])=>{"string"==typeof v&&(v=[v]),null!==v&&(o[h]=LA(n.children[h],i,v))}),Object.entries(n.children).forEach(([h,v])=>{void 0===r[h]&&(o[h]=v)}),new pr(n.segments,o)}}function Y_(n,i,t){const r=n.segments.slice(0,i);let o=0;for(;o<t.length;){const h=t[o];if(M0(h)){const ue=fO(h.outlets);return new pr(r,ue)}if(0===o&&py(t[0])){r.push(new E0(n.segments[i].path,NA(t[0]))),o++;continue}const v=M0(h)?h.outlets[Ai]:`${h}`,Q=o<t.length-1?t[o+1]:null;v&&Q&&py(Q)?(r.push(new E0(v,NA(Q))),o+=2):(r.push(new E0(v,{})),o++)}return new pr(r,{})}function fO(n){const i={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(i[t]=Y_(new pr([],{}),0,r))}),i}function NA(n){const i={};return Object.entries(n).forEach(([t,r])=>i[t]=`${r}`),i}function BA(n,i,t){return n==t.path&&Gl(i,t.parameters)}const I0="imperative";class $l{constructor(i,t){this.id=i,this.url=t}}class my extends $l{constructor(i,t,r="imperative",o=null){super(i,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ic extends $l{constructor(i,t,r){super(i,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class P0 extends $l{constructor(i,t,r,o){super(i,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gf extends $l{constructor(i,t,r,o){super(i,t),this.reason=r,this.code=o,this.type=16}}class yy extends $l{constructor(i,t,r,o){super(i,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zA extends $l{constructor(i,t,r,o){super(i,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pO extends $l{constructor(i,t,r,o){super(i,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gO extends $l{constructor(i,t,r,o,h){super(i,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=h,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mO extends $l{constructor(i,t,r,o){super(i,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yO extends $l{constructor(i,t,r,o){super(i,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vO{constructor(i){this.route=i,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xO{constructor(i){this.route=i,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _O{constructor(i){this.snapshot=i,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bO{constructor(i){this.snapshot=i,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wO{constructor(i){this.snapshot=i,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CO{constructor(i){this.snapshot=i,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UA{constructor(i,t,r){this.routerEvent=i,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class K_{}class J_{constructor(i){this.url=i}}class SO{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new F0,this.attachRef=null}}let F0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new SO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class VA{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const t=this.pathFromRoot(i);return t.length>1?t[t.length-2]:null}children(i){const t=Q_(i,this._root);return t?t.children.map(r=>r.value):[]}firstChild(i){const t=Q_(i,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(i){const t=eb(i,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==i)}pathFromRoot(i){return eb(i,this._root).map(t=>t.value)}}function Q_(n,i){if(n===i.value)return i;for(const t of i.children){const r=Q_(n,t);if(r)return r}return null}function eb(n,i){if(n===i.value)return[i];for(const t of i.children){const r=eb(n,t);if(r.length)return r.unshift(i),r}return[]}class Pc{constructor(i,t){this.value=i,this.children=t}toString(){return`TreeNode(${this.value})`}}function $f(n){const i={};return n&&n.children.forEach(t=>i[t.value.outlet]=t),i}class jA extends VA{constructor(i,t){super(i),this.snapshot=t,tb(this,i)}toString(){return this.snapshot.toString()}}function HA(n,i){const t=function AO(n,i){const v=new vy([],{},{},"",{},Ai,i,null,{});return new $A("",new Pc(v,[]))}(0,i),r=new sn([new E0("",{})]),o=new sn({}),h=new sn({}),v=new sn({}),Q=new sn(""),ue=new qf(r,o,v,Q,h,Ai,i,t.root);return ue.snapshot=t.root,new jA(new Pc(ue,[]),t)}class qf{constructor(i,t,r,o,h,v,Q,ue){this.urlSubject=i,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=h,this.outlet=v,this.component=Q,this._futureSnapshot=ue,this.title=this.dataSubject?.pipe(ie(be=>be[A0]))??tn(void 0),this.url=i,this.params=t,this.queryParams=r,this.fragment=o,this.data=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(i=>jf(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(i=>jf(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function GA(n,i="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==i)for(r=t.length-1;r>=1;){const o=t[r],h=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(h.component)break;r--}}return function EO(n){return n.reduce((i,t)=>({params:{...i.params,...t.params},data:{...i.data,...t.data},resolve:{...t.data,...i.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vy{get title(){return this.data?.[A0]}constructor(i,t,r,o,h,v,Q,ue,be){this.url=i,this.params=t,this.queryParams=r,this.fragment=o,this.data=h,this.outlet=v,this.component=Q,this.routeConfig=ue,this._resolve=be}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $A extends VA{constructor(i,t){super(t),this.url=i,tb(this,t)}toString(){return qA(this._root)}}function tb(n,i){i.value._routerState=n,i.children.forEach(t=>tb(n,t))}function qA(n){const i=n.children.length>0?` { ${n.children.map(qA).join(", ")} } `:"";return`${n.value}${i}`}function nb(n){if(n.snapshot){const i=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gl(i.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),i.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Gl(i.params,t.params)||n.paramsSubject.next(t.params),function j5(n,i){if(n.length!==i.length)return!1;for(let t=0;t<n.length;++t)if(!Gl(n[t],i[t]))return!1;return!0}(i.url,t.url)||n.urlSubject.next(t.url),Gl(i.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ib(n,i){const t=Gl(n.params,i.params)&&function q5(n,i){return rd(n,i)&&n.every((t,r)=>Gl(t.parameters,i[r].parameters))}(n.url,i.url);return t&&!(!n.parent!=!i.parent)&&(!n.parent||ib(n.parent,i.parent))}let rb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ai,this.activateEvents=new on,this.deactivateEvents=new on,this.attachEvents=new on,this.detachEvents=new on,this.parentContexts=dn(F0),this.location=dn(il),this.changeDetector=dn(m0),this.environmentInjector=dn(ao),this.inputBinder=dn(xy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new qt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new qt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new qt(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new qt(4013,!1);this._activatedRoute=t;const o=this.location,v=t.snapshot.component,Q=this.parentContexts.getOrCreateContext(this.name).children,ue=new DO(t,Q,o.injector);this.activated=o.createComponent(v,{index:o.length,injector:ue,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=kn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ei]})}return n})();class DO{constructor(i,t,r){this.route=i,this.childContexts=t,this.parent=r}get(i,t){return i===qf?this.route:i===F0?this.childContexts:this.parent.get(i,t)}}const xy=new Rn("");let WA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=kc([r.queryParams,r.params,r.data]).pipe(fn(([h,v,Q],ue)=>(Q={...h,...v,...Q},0===ue?tn(Q):Promise.resolve(Q)))).subscribe(h=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const v=function e6(n){const i=Ei(n);if(!i)return null;const t=new Jp(i);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}(r.component);if(v)for(const{templateName:Q}of v.inputs)t.activatedComponentRef.setInput(Q,h[Q]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();function R0(n,i,t){if(t&&n.shouldReuseRoute(i.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=i.value;const o=function MO(n,i,t){return i.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return R0(n,r,o);return R0(n,r)})}(n,i,t);return new Pc(r,o)}{if(n.shouldAttach(i.value)){const h=n.retrieve(i.value);if(null!==h){const v=h.route;return v.value._futureSnapshot=i.value,v.children=i.children.map(Q=>R0(n,Q)),v}}const r=function kO(n){return new qf(new sn(n.url),new sn(n.params),new sn(n.queryParams),new sn(n.fragment),new sn(n.data),n.outlet,n.component,n)}(i.value),o=i.children.map(h=>R0(n,h));return new Pc(r,o)}}const sb="ngNavigationCancelingError";function XA(n,i){const{redirectTo:t,navigationBehaviorOptions:r}=sd(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,o=ZA(!1,0,i);return o.url=t,o.navigationBehaviorOptions=r,o}function ZA(n,i,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[sb]=!0,r.cancellationCode=i,t&&(r.url=t),r}function YA(n){return n&&n[sb]}let KA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ni({type:n,selectors:[["ng-component"]],standalone:!0,features:[ls],decls:1,vars:0,template:function(r,o){1&r&&Vi(0,"router-outlet")},dependencies:[rb],encapsulation:2})}return n})();function ab(n){const i=n.children&&n.children.map(ab),t=i?{...n,children:i}:{...n};return!t.component&&!t.loadComponent&&(i||t.loadChildren)&&t.outlet&&t.outlet!==Ai&&(t.component=KA),t}function ll(n){return n.outlet||Ai}function O0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let i=n.parent;i;i=i.parent){const t=i.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class BO{constructor(i,t,r,o,h){this.routeReuseStrategy=i,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=h}activate(i){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,i),nb(this.futureState.root),this.activateChildRoutes(t,r,i)}deactivateChildRoutes(i,t,r){const o=$f(t);i.children.forEach(h=>{const v=h.value.outlet;this.deactivateRoutes(h,o[v],r),delete o[v]}),Object.values(o).forEach(h=>{this.deactivateRouteAndItsChildren(h,r)})}deactivateRoutes(i,t,r){const o=i.value,h=t?t.value:null;if(o===h)if(o.component){const v=r.getContext(o.outlet);v&&this.deactivateChildRoutes(i,t,v.children)}else this.deactivateChildRoutes(i,t,r);else h&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(i,t){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,t):this.deactivateRouteAndOutlet(i,t)}detachAndStoreRouteSubtree(i,t){const r=t.getContext(i.value.outlet),o=r&&i.value.component?r.children:t,h=$f(i);for(const v of Object.keys(h))this.deactivateRouteAndItsChildren(h[v],o);if(r&&r.outlet){const v=r.outlet.detach(),Q=r.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:v,route:i,contexts:Q})}}deactivateRouteAndOutlet(i,t){const r=t.getContext(i.value.outlet),o=r&&i.value.component?r.children:t,h=$f(i);for(const v of Object.keys(h))this.deactivateRouteAndItsChildren(h[v],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(i,t,r){const o=$f(t);i.children.forEach(h=>{this.activateRoutes(h,o[h.value.outlet],r),this.forwardEvent(new CO(h.value.snapshot))}),i.children.length&&this.forwardEvent(new bO(i.value.snapshot))}activateRoutes(i,t,r){const o=i.value,h=t?t.value:null;if(nb(o),o===h)if(o.component){const v=r.getOrCreateContext(o.outlet);this.activateChildRoutes(i,t,v.children)}else this.activateChildRoutes(i,t,r);else if(o.component){const v=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const Q=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),v.children.onOutletReAttached(Q.contexts),v.attachRef=Q.componentRef,v.route=Q.route.value,v.outlet&&v.outlet.attach(Q.componentRef,Q.route.value),nb(Q.route.value),this.activateChildRoutes(i,null,v.children)}else{const Q=O0(o.snapshot);v.attachRef=null,v.route=o,v.injector=Q,v.outlet&&v.outlet.activateWith(o,v.injector),this.activateChildRoutes(i,null,v.children)}}else this.activateChildRoutes(i,null,r)}}class JA{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class _y{constructor(i,t){this.component=i,this.route=t}}function zO(n,i,t){const r=n._root;return L0(r,i?i._root:null,t,[r.value])}function Wf(n,i){const t=Symbol(),r=i.get(n,t);return r===t?"function"!=typeof n||function pd(n){return null!==Nc(n)}(n)?i.get(n):n:r}function L0(n,i,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const h=$f(i);return n.children.forEach(v=>{(function VO(n,i,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const h=n.value,v=i?i.value:null,Q=t?t.getContext(n.value.outlet):null;if(v&&h.routeConfig===v.routeConfig){const ue=function jO(n,i,t){if("function"==typeof t)return t(n,i);switch(t){case"pathParamsChange":return!rd(n.url,i.url);case"pathParamsOrQueryParamsChange":return!rd(n.url,i.url)||!Gl(n.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ib(n,i)||!Gl(n.queryParams,i.queryParams);default:return!ib(n,i)}}(v,h,h.routeConfig.runGuardsAndResolvers);ue?o.canActivateChecks.push(new JA(r)):(h.data=v.data,h._resolvedData=v._resolvedData),L0(n,i,h.component?Q?Q.children:null:t,r,o),ue&&Q&&Q.outlet&&Q.outlet.isActivated&&o.canDeactivateChecks.push(new _y(Q.outlet.component,v))}else v&&N0(i,Q,o),o.canActivateChecks.push(new JA(r)),L0(n,null,h.component?Q?Q.children:null:t,r,o)})(v,h[v.value.outlet],t,r.concat([v.value]),o),delete h[v.value.outlet]}),Object.entries(h).forEach(([v,Q])=>N0(Q,t.getContext(v),o)),o}function N0(n,i,t){const r=$f(n),o=n.value;Object.entries(r).forEach(([h,v])=>{N0(v,o.component?i?i.children.getContext(h):null:i,t)}),t.canDeactivateChecks.push(new _y(o.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,o))}function B0(n){return"function"==typeof n}function QA(n){return n instanceof w0||"EmptyError"===n?.name}const by=Symbol("INITIAL_VALUE");function Xf(){return fn(n=>kc(n.map(i=>i.pipe(na(1),function ly(...n){const i=kr(n);return S((t,r)=>{(i?H_(n,t,i):H_(n,t)).subscribe(r)})}(by)))).pipe(ie(i=>{for(const t of i)if(!0!==t){if(t===by)return by;if(!1===t||t instanceof Hf)return t}return!0}),us(i=>i!==by),na(1)))}function eE(n){return function x(...n){return p(n)}($s(i=>{if(sd(i))throw XA(0,i)}),ie(i=>!0===i))}class wy{constructor(i){this.segmentGroup=i||null}}class tE{constructor(i){this.urlTree=i}}function Zf(n){return C0(new wy(n))}function nE(n){return C0(new tE(n))}class l4{constructor(i,t){this.urlSerializer=i,this.urlTree=t}noMatchError(i){return new qt(4002,!1)}lineralizeSegments(i,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return tn(r);if(o.numberOfChildren>1||!o.children[Ai])return C0(new qt(4e3,!1));o=o.children[Ai]}}applyRedirectCommands(i,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),i,r)}applyRedirectCreateUrlTree(i,t,r,o){const h=this.createSegmentGroup(i,t.root,r,o);return new Hf(h,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(i,t){const r={};return Object.entries(i).forEach(([o,h])=>{if("string"==typeof h&&h.startsWith(":")){const Q=h.substring(1);r[o]=t[Q]}else r[o]=h}),r}createSegmentGroup(i,t,r,o){const h=this.createSegments(i,t.segments,r,o);let v={};return Object.entries(t.children).forEach(([Q,ue])=>{v[Q]=this.createSegmentGroup(i,ue,r,o)}),new pr(h,v)}createSegments(i,t,r,o){return t.map(h=>h.path.startsWith(":")?this.findPosParam(i,h,o):this.findOrReturn(h,r))}findPosParam(i,t,r){const o=r[t.path.substring(1)];if(!o)throw new qt(4001,!1);return o}findOrReturn(i,t){let r=0;for(const o of t){if(o.path===i.path)return t.splice(r),o;r++}return i}}const ob={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function c4(n,i,t,r,o){const h=lb(n,i,t);return h.matched?(r=function PO(n,i){return n.providers&&!n._injector&&(n._injector=Lx(n.providers,i,`Route: ${n.path}`)),n._injector??i}(i,r),function s4(n,i,t,r){const o=i.canMatch;return o&&0!==o.length?tn(o.map(v=>{const Q=Wf(v,n);return Lu(function XO(n){return n&&B0(n.canMatch)}(Q)?Q.canMatch(i,t):n.runInContext(()=>Q(i,t)))})).pipe(Xf(),eE()):tn(!0)}(r,i,t).pipe(ie(v=>!0===v?h:{...ob}))):tn(h)}function lb(n,i,t){if(""===i.path)return"full"===i.pathMatch&&(n.hasChildren()||t.length>0)?{...ob}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(i.matcher||V5)(t,n,i);if(!o)return{...ob};const h={};Object.entries(o.posParams??{}).forEach(([Q,ue])=>{h[Q]=ue.path});const v=o.consumed.length>0?{...h,...o.consumed[o.consumed.length-1].parameters}:h;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:v,positionalParamSegments:o.posParams??{}}}function iE(n,i,t,r){return t.length>0&&function d4(n,i,t){return t.some(r=>Cy(n,i,r)&&ll(r)!==Ai)}(n,t,r)?{segmentGroup:new pr(i,h4(r,new pr(t,n.children))),slicedSegments:[]}:0===t.length&&function f4(n,i,t){return t.some(r=>Cy(n,i,r))}(n,t,r)?{segmentGroup:new pr(n.segments,u4(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new pr(n.segments,n.children),slicedSegments:t}}function u4(n,i,t,r,o){const h={};for(const v of r)if(Cy(n,t,v)&&!o[ll(v)]){const Q=new pr([],{});h[ll(v)]=Q}return{...o,...h}}function h4(n,i){const t={};t[Ai]=i;for(const r of n)if(""===r.path&&ll(r)!==Ai){const o=new pr([],{});t[ll(r)]=o}return t}function Cy(n,i,t){return(!(n.hasChildren()||i.length>0)||"full"!==t.pathMatch)&&""===t.path}class y4{constructor(i,t,r,o,h,v,Q){this.injector=i,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=h,this.paramsInheritanceStrategy=v,this.urlSerializer=Q,this.allowRedirects=!0,this.applyRedirects=new l4(this.urlSerializer,this.urlTree)}noMatchError(i){return new qt(4002,!1)}recognize(){const i=iE(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,i,Ai).pipe(id(t=>{if(t instanceof tE)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof wy?this.noMatchError(t):t}),ie(t=>{const r=new vy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ai,this.rootComponentType,null,{}),o=new Pc(r,t),h=new $A("",o),v=function oO(n,i,t=null,r=null){return FA(PA(n),i,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return v.queryParams=this.urlTree.queryParams,h.url=this.urlSerializer.serialize(v),this.inheritParamsAndData(h._root),{state:h,tree:v}}))}match(i){return this.processSegmentGroup(this.injector,this.config,i.root,Ai).pipe(id(r=>{throw r instanceof wy?this.noMatchError(r):r}))}inheritParamsAndData(i){const t=i.value,r=GA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),i.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(i,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(i,t,r):this.processSegment(i,t,r,r.segments,o,!0)}processChildren(i,t,r){const o=[];for(const h of Object.keys(r.children))"primary"===h?o.unshift(h):o.push(h);return $t(o).pipe(Vf(h=>{const v=r.children[h],Q=function LO(n,i){const t=n.filter(r=>ll(r)===i);return t.push(...n.filter(r=>ll(r)!==i)),t}(t,h);return this.processSegmentGroup(i,Q,v,h)}),function N5(n,i){return S(function L5(n,i,t,r,o){return(h,v)=>{let Q=t,ue=i,be=0;h.subscribe(B(v,Re=>{const qe=be++;ue=Q?n(ue,Re,qe):(Q=!0,Re),r&&v.next(ue)},o&&(()=>{Q&&v.next(ue),v.complete()})))}}(n,i,arguments.length>=2,!0))}((h,v)=>(h.push(...v),h)),cy(null),function B5(n,i){const t=arguments.length>=2;return r=>r.pipe(n?us((o,h)=>n(o,h,r)):E,$_(1),t?cy(i):xA(()=>new w0))}(),_i(h=>{if(null===h)return Zf(r);const v=rE(h);return function v4(n){n.sort((i,t)=>i.value.outlet===Ai?-1:t.value.outlet===Ai?1:i.value.outlet.localeCompare(t.value.outlet))}(v),tn(v)}))}processSegment(i,t,r,o,h,v){return $t(t).pipe(Vf(Q=>this.processSegmentAgainstRoute(Q._injector??i,t,Q,r,o,h,v).pipe(id(ue=>{if(ue instanceof wy)return tn(null);throw ue}))),Ou(Q=>!!Q),id(Q=>{if(QA(Q))return function g4(n,i,t){return 0===i.length&&!n.children[t]}(r,o,h)?tn([]):Zf(r);throw Q}))}processSegmentAgainstRoute(i,t,r,o,h,v,Q){return function p4(n,i,t,r){return!!(ll(n)===r||r!==Ai&&Cy(i,t,n))&&("**"===n.path||lb(i,n,t).matched)}(r,o,h,v)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(i,o,r,h,v,Q):Q&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,o,t,r,h,v):Zf(o):Zf(o)}expandSegmentAgainstRouteUsingRedirect(i,t,r,o,h,v){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,r,o,v):this.expandRegularSegmentAgainstRouteUsingRedirect(i,t,r,o,h,v)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,t,r,o){const h=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?nE(h):this.applyRedirects.lineralizeSegments(r,h).pipe(_i(v=>{const Q=new pr(v,{});return this.processSegment(i,t,Q,v,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,t,r,o,h,v){const{matched:Q,consumedSegments:ue,remainingSegments:be,positionalParamSegments:Re}=lb(t,o,h);if(!Q)return Zf(t);const qe=this.applyRedirects.applyRedirectCommands(ue,o.redirectTo,Re);return o.redirectTo.startsWith("/")?nE(qe):this.applyRedirects.lineralizeSegments(o,qe).pipe(_i(ft=>this.processSegment(i,r,t,ft.concat(be),v,!1)))}matchSegmentAgainstRoute(i,t,r,o,h,v){let Q;if("**"===r.path){const ue=o.length>0?bA(o).parameters:{};Q=tn({snapshot:new vy(o,ue,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sE(r),ll(r),r.component??r._loadedComponent??null,r,aE(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else Q=c4(t,r,o,i).pipe(ie(({matched:ue,consumedSegments:be,remainingSegments:Re,parameters:qe})=>ue?{snapshot:new vy(be,qe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sE(r),ll(r),r.component??r._loadedComponent??null,r,aE(r)),consumedSegments:be,remainingSegments:Re}:null));return Q.pipe(fn(ue=>null===ue?Zf(t):this.getChildConfig(i=r._injector??i,r,o).pipe(fn(({routes:be})=>{const Re=r._loadedInjector??i,{snapshot:qe,consumedSegments:ft,remainingSegments:St}=ue,{segmentGroup:Ot,slicedSegments:zt}=iE(t,ft,St,be);if(0===zt.length&&Ot.hasChildren())return this.processChildren(Re,be,Ot).pipe(ie(cn=>null===cn?null:[new Pc(qe,cn)]));if(0===be.length&&0===zt.length)return tn([new Pc(qe,[])]);const Xt=ll(r)===h;return this.processSegment(Re,be,Ot,zt,Xt?Ai:h,!0).pipe(ie(cn=>[new Pc(qe,cn)]))}))))}getChildConfig(i,t,r){return t.children?tn({routes:t.children,injector:i}):t.loadChildren?void 0!==t._loadedRoutes?tn({routes:t._loadedRoutes,injector:t._loadedInjector}):function r4(n,i,t,r){const o=i.canLoad;return void 0===o||0===o.length?tn(!0):tn(o.map(v=>{const Q=Wf(v,n);return Lu(function GO(n){return n&&B0(n.canLoad)}(Q)?Q.canLoad(i,t):n.runInContext(()=>Q(i,t)))})).pipe(Xf(),eE())}(i,t,r).pipe(_i(o=>o?this.configLoader.loadChildren(i,t).pipe($s(h=>{t._loadedRoutes=h.routes,t._loadedInjector=h.injector})):function o4(n){return C0(ZA(!1,3))}())):tn({routes:[],injector:i})}}function x4(n){const i=n.value.routeConfig;return i&&""===i.path}function rE(n){const i=[],t=new Set;for(const r of n){if(!x4(r)){i.push(r);continue}const o=i.find(h=>r.value.routeConfig===h.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):i.push(r)}for(const r of t){const o=rE(r.children);i.push(new Pc(r.value,o))}return i.filter(r=>!t.has(r))}function sE(n){return n.data||{}}function aE(n){return n.resolve||{}}function oE(n){return"string"==typeof n.title||null===n.title}function cb(n){return fn(i=>{const t=n(i);return t?$t(t).pipe(ie(()=>i)):tn(i)})}const Yf=new Rn("ROUTES");let ub=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=dn(VC)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Lu(t.loadComponent()).pipe(ie(lE),$s(h=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=h}),S0(()=>{this.componentLoaders.delete(t)})),o=new vA(r,()=>new U).pipe(G_());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const h=function E4(n,i,t,r){return Lu(n.loadChildren()).pipe(ie(lE),_i(o=>o instanceof Y2||Array.isArray(o)?tn(o):$t(i.compileModuleAsync(o))),ie(o=>{r&&r(n);let h,v,Q=!1;return Array.isArray(o)?(v=o,!0):(h=o.create(t).injector,v=h.get(Yf,[],{optional:!0,self:!0}).flat()),{routes:v.map(ab),injector:h}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(S0(()=>{this.childrenLoaders.delete(r)})),v=new vA(h,()=>new U).pipe(G_());return this.childrenLoaders.set(r,v),v}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lE(n){return function D4(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Sy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new U,this.transitionAbortSubject=new U,this.configLoader=dn(ub),this.environmentInjector=dn(ao),this.urlSerializer=dn(D0),this.rootContexts=dn(F0),this.inputBindingEnabled=null!==dn(xy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>tn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new xO(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new vO(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new sn({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:I0,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(us(h=>0!==h.id),ie(h=>({...h,extractedUrl:t.urlHandlingStrategy.extract(h.rawUrl)})),fn(h=>{this.currentTransition=h;let v=!1,Q=!1;return tn(h).pipe($s(ue=>{this.currentNavigation={id:ue.id,initialUrl:ue.rawUrl,extractedUrl:ue.extractedUrl,trigger:ue.source,extras:ue.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),fn(ue=>{const be=ue.currentBrowserUrl.toString(),Re=!t.navigated||ue.extractedUrl.toString()!==be||be!==ue.currentUrlTree.toString();if(!Re&&"reload"!==(ue.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const ft="";return this.events.next(new Gf(ue.id,this.urlSerializer.serialize(ue.rawUrl),ft,0)),ue.resolve(null),Bi}if(t.urlHandlingStrategy.shouldProcessUrl(ue.rawUrl))return tn(ue).pipe(fn(ft=>{const St=this.transitions?.getValue();return this.events.next(new my(ft.id,this.urlSerializer.serialize(ft.extractedUrl),ft.source,ft.restoredState)),St!==this.transitions?.getValue()?Bi:Promise.resolve(ft)}),function _4(n,i,t,r,o,h){return _i(v=>function m4(n,i,t,r,o,h,v="emptyOnly"){return new y4(n,i,t,r,o,v,h).recognize()}(n,i,t,r,v.extractedUrl,o,h).pipe(ie(({state:Q,tree:ue})=>({...v,targetSnapshot:Q,urlAfterRedirects:ue}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),$s(ft=>{h.targetSnapshot=ft.targetSnapshot,h.urlAfterRedirects=ft.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:ft.urlAfterRedirects};const St=new zA(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot);this.events.next(St)}));if(Re&&t.urlHandlingStrategy.shouldProcessUrl(ue.currentRawUrl)){const{id:ft,extractedUrl:St,source:Ot,restoredState:zt,extras:Xt}=ue,cn=new my(ft,this.urlSerializer.serialize(St),Ot,zt);this.events.next(cn);const Wt=HA(0,this.rootComponentType).snapshot;return this.currentTransition=h={...ue,targetSnapshot:Wt,urlAfterRedirects:St,extras:{...Xt,skipLocationChange:!1,replaceUrl:!1}},tn(h)}{const ft="";return this.events.next(new Gf(ue.id,this.urlSerializer.serialize(ue.extractedUrl),ft,1)),ue.resolve(null),Bi}}),$s(ue=>{const be=new pO(ue.id,this.urlSerializer.serialize(ue.extractedUrl),this.urlSerializer.serialize(ue.urlAfterRedirects),ue.targetSnapshot);this.events.next(be)}),ie(ue=>(this.currentTransition=h={...ue,guards:zO(ue.targetSnapshot,ue.currentSnapshot,this.rootContexts)},h)),function YO(n,i){return _i(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:h,canDeactivateChecks:v}}=t;return 0===v.length&&0===h.length?tn({...t,guardsResult:!0}):function KO(n,i,t,r){return $t(n).pipe(_i(o=>function i4(n,i,t,r,o){const h=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return h&&0!==h.length?tn(h.map(Q=>{const ue=O0(i)??o,be=Wf(Q,ue);return Lu(function WO(n){return n&&B0(n.canDeactivate)}(be)?be.canDeactivate(n,i,t,r):ue.runInContext(()=>be(n,i,t,r))).pipe(Ou())})).pipe(Xf()):tn(!0)}(o.component,o.route,t,i,r)),Ou(o=>!0!==o,!0))}(v,r,o,n).pipe(_i(Q=>Q&&function HO(n){return"boolean"==typeof n}(Q)?function JO(n,i,t,r){return $t(i).pipe(Vf(o=>H_(function e4(n,i){return null!==n&&i&&i(new _O(n)),tn(!0)}(o.route.parent,r),function QO(n,i){return null!==n&&i&&i(new wO(n)),tn(!0)}(o.route,r),function n4(n,i,t){const r=i[i.length-1],h=i.slice(0,i.length-1).reverse().map(v=>function UO(n){const i=n.routeConfig?n.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:n,guards:i}:null}(v)).filter(v=>null!==v).map(v=>yA(()=>tn(v.guards.map(ue=>{const be=O0(v.node)??t,Re=Wf(ue,be);return Lu(function qO(n){return n&&B0(n.canActivateChild)}(Re)?Re.canActivateChild(r,n):be.runInContext(()=>Re(r,n))).pipe(Ou())})).pipe(Xf())));return tn(h).pipe(Xf())}(n,o.path,t),function t4(n,i,t){const r=i.routeConfig?i.routeConfig.canActivate:null;if(!r||0===r.length)return tn(!0);const o=r.map(h=>yA(()=>{const v=O0(i)??t,Q=Wf(h,v);return Lu(function $O(n){return n&&B0(n.canActivate)}(Q)?Q.canActivate(i,n):v.runInContext(()=>Q(i,n))).pipe(Ou())}));return tn(o).pipe(Xf())}(n,o.route,t))),Ou(o=>!0!==o,!0))}(r,h,n,i):tn(Q)),ie(Q=>({...t,guardsResult:Q})))})}(this.environmentInjector,ue=>this.events.next(ue)),$s(ue=>{if(h.guardsResult=ue.guardsResult,sd(ue.guardsResult))throw XA(0,ue.guardsResult);const be=new gO(ue.id,this.urlSerializer.serialize(ue.extractedUrl),this.urlSerializer.serialize(ue.urlAfterRedirects),ue.targetSnapshot,!!ue.guardsResult);this.events.next(be)}),us(ue=>!!ue.guardsResult||(this.cancelNavigationTransition(ue,"",3),!1)),cb(ue=>{if(ue.guards.canActivateChecks.length)return tn(ue).pipe($s(be=>{const Re=new mO(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(Re)}),fn(be=>{let Re=!1;return tn(be).pipe(function b4(n,i){return _i(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return tn(t);let h=0;return $t(o).pipe(Vf(v=>function w4(n,i,t,r){const o=n.routeConfig,h=n._resolve;return void 0!==o?.title&&!oE(o)&&(h[A0]=o.title),function C4(n,i,t,r){const o=function S4(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return tn({});const h={};return $t(o).pipe(_i(v=>function A4(n,i,t,r){const o=O0(i)??r,h=Wf(n,o);return Lu(h.resolve?h.resolve(i,t):o.runInContext(()=>h(i,t)))}(n[v],i,t,r).pipe(Ou(),$s(Q=>{h[v]=Q}))),$_(1),function z5(n){return ie(()=>n)}(h),id(v=>QA(v)?Bi:C0(v)))}(h,n,i,r).pipe(ie(v=>(n._resolvedData=v,n.data=GA(n,t).resolve,o&&oE(o)&&(n.data[A0]=o.title),null)))}(v.route,r,n,i)),$s(()=>h++),$_(1),_i(v=>h===o.length?tn(t):Bi))})}(t.paramsInheritanceStrategy,this.environmentInjector),$s({next:()=>Re=!0,complete:()=>{Re||this.cancelNavigationTransition(be,"",2)}}))}),$s(be=>{const Re=new yO(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(Re)}))}),cb(ue=>{const be=Re=>{const qe=[];Re.routeConfig?.loadComponent&&!Re.routeConfig._loadedComponent&&qe.push(this.configLoader.loadComponent(Re.routeConfig).pipe($s(ft=>{Re.component=ft}),ie(()=>{})));for(const ft of Re.children)qe.push(...be(ft));return qe};return kc(be(ue.targetSnapshot.root)).pipe(cy(),na(1))}),cb(()=>this.afterPreactivation()),ie(ue=>{const be=function TO(n,i,t){const r=R0(n,i._root,t?t._root:void 0);return new jA(r,i)}(t.routeReuseStrategy,ue.targetSnapshot,ue.currentRouterState);return this.currentTransition=h={...ue,targetRouterState:be},h}),$s(()=>{this.events.next(new K_)}),((n,i,t,r)=>ie(o=>(new BO(i,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,ue=>this.events.next(ue),this.inputBindingEnabled),na(1),$s({next:ue=>{v=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ic(ue.id,this.urlSerializer.serialize(ue.extractedUrl),this.urlSerializer.serialize(ue.urlAfterRedirects))),t.titleStrategy?.updateTitle(ue.targetRouterState.snapshot),ue.resolve(!0)},complete:()=>{v=!0}}),function Qr(n){return S((i,t)=>{un(n).subscribe(B(t,()=>t.complete(),re)),!t.closed&&i.subscribe(t)})}(this.transitionAbortSubject.pipe($s(ue=>{throw ue}))),S0(()=>{v||Q||this.cancelNavigationTransition(h,"",1),this.currentNavigation?.id===h.id&&(this.currentNavigation=null)}),id(ue=>{if(Q=!0,YA(ue))this.events.next(new P0(h.id,this.urlSerializer.serialize(h.extractedUrl),ue.message,ue.cancellationCode)),function IO(n){return YA(n)&&sd(n.url)}(ue)?this.events.next(new J_(ue.url)):h.resolve(!1);else{this.events.next(new yy(h.id,this.urlSerializer.serialize(h.extractedUrl),ue,h.targetSnapshot??void 0));try{h.resolve(t.errorHandler(ue))}catch(be){h.reject(be)}}return Bi}))}))}cancelNavigationTransition(t,r,o){const h=new P0(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(h),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cE(n){return n!==I0}let uE=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(h=>h.outlet===Ai);return r}getResolvedTitleForRoute(t){return t.data[A0]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return dn(T4)},providedIn:"root"})}return n})(),T4=(()=>{class n extends uE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(On(lA))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return dn(I4)},providedIn:"root"})}return n})();class k4{shouldDetach(i){return!1}store(i,t){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,t){return i.routeConfig===t.routeConfig}}let I4=(()=>{class n extends k4{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=ms(n)))(o||n)}}();static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ay=new Rn("",{providedIn:"root",factory:()=>({})});let P4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:function(){return dn(F4)},providedIn:"root"})}return n})(),F4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var z0=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(z0||{});function hE(n,i){n.events.pipe(us(t=>t instanceof Ic||t instanceof P0||t instanceof yy||t instanceof Gf),ie(t=>t instanceof Ic||t instanceof Gf?z0.COMPLETE:t instanceof P0&&(0===t.code||1===t.code)?z0.REDIRECTING:z0.FAILED),us(t=>t!==z0.REDIRECTING),na(1)).subscribe(()=>{i()})}function R4(n){throw n}function O4(n,i,t){return i.parse("/")}const L4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},N4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let co=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=dn(UC),this.isNgZoneEnabled=!1,this._events=new U,this.options=dn(Ay,{optional:!0})||{},this.pendingTasks=dn(zm),this.errorHandler=this.options.errorHandler||R4,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||O4,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=dn(P4),this.routeReuseStrategy=dn(M4),this.titleStrategy=dn(uE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=dn(Yf,{optional:!0})?.flat()??[],this.navigationTransitions=dn(Sy),this.urlSerializer=dn(D0),this.location=dn(g_),this.componentInputBindingEnabled=!!dn(xy,{optional:!0}),this.eventsSubscription=new k,this.isNgZoneEnabled=dn(Zn)instanceof Zn&&Zn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Hf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=HA(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(dE(r)&&this._events.next(r));if(r instanceof my)cE(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Gf)this.rawUrlTree=o.rawUrl;else if(r instanceof zA){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(h,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof K_)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof P0)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof J_){const h=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),v={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cE(o.source)};this.scheduleNavigation(h,I0,null,v,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof yy&&this.restoreHistory(o,!0),r instanceof Ic&&(this.navigated=!0),dE(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),I0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const h={replaceUrl:!0},v=o?.navigationId?o:null;if(o){const ue={...o};delete ue.navigationId,delete ue.\u0275routerPageId,0!==Object.keys(ue).length&&(h.state=ue)}const Q=this.parseUrl(t);this.scheduleNavigation(Q,r,v,h)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ab),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:h,fragment:v,queryParamsHandling:Q,preserveFragment:ue}=r,be=ue?this.currentUrlTree.fragment:v;let qe,Re=null;switch(Q){case"merge":Re={...this.currentUrlTree.queryParams,...h};break;case"preserve":Re=this.currentUrlTree.queryParams;break;default:Re=h||null}null!==Re&&(Re=this.removeEmptyProps(Re));try{qe=PA(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),qe=this.currentUrlTree.root}return FA(qe,t,Re,be??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=sd(t)?t:this.parseUrl(t),h=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(h,I0,null,r)}navigate(t,r={skipLocationChange:!1}){return function B4(n){for(let i=0;i<n.length;i++)if(null==n[i])throw new qt(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...L4}:!1===r?{...N4}:r,sd(t))return CA(this.currentUrlTree,t,o);const h=this.parseUrl(t);return CA(this.currentUrlTree,h,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const h=t[o];return null!=h&&(r[o]=h),r},{})}scheduleNavigation(t,r,o,h,v){if(this.disposed)return Promise.resolve(!1);let Q,ue,be;v?(Q=v.resolve,ue=v.reject,be=v.promise):be=new Promise((qe,ft)=>{Q=qe,ue=ft});const Re=this.pendingTasks.add();return hE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Re))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:h,resolve:Q,reject:ue,promise:be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),be.catch(qe=>Promise.reject(qe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const v={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",v)}else{const h={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",h)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-this.browserPageId;0!==h?this.location.historyGo(h):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dE(n){return!(n instanceof K_||n instanceof J_)}class fE{}let V4=(()=>{class n{constructor(t,r,o,h,v){this.router=t,this.injector=o,this.preloadingStrategy=h,this.loader=v}setUpPreloading(){this.subscription=this.router.events.pipe(us(t=>t instanceof Ic),Vf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const h of r){h.providers&&!h._injector&&(h._injector=Lx(h.providers,t,`Route: ${h.path}`));const v=h._injector??t,Q=h._loadedInjector??v;(h.loadChildren&&!h._loadedRoutes&&void 0===h.canLoad||h.loadComponent&&!h._loadedComponent)&&o.push(this.preloadConfig(v,h)),(h.children||h._loadedRoutes)&&o.push(this.processRoutes(Q,h.children??h._loadedRoutes))}return $t(o).pipe(lr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tn(null);const h=o.pipe(_i(v=>null===v?tn(void 0):(r._loadedRoutes=v.routes,r._loadedInjector=v.injector,this.processRoutes(v.injector??t,v.routes))));return r.loadComponent&&!r._loadedComponent?$t([h,this.loader.loadComponent(r)]).pipe(lr()):h})}static#e=this.\u0275fac=function(r){return new(r||n)(On(co),On(VC),On(ao),On(fE),On(ub))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const db=new Rn("");let pE=(()=>{class n{constructor(t,r,o,h,v={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=h,this.options=v,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},v.scrollPositionRestoration=v.scrollPositionRestoration||"disabled",v.anchorScrolling=v.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof my?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ic?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Gf&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof UA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new UA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function z1(){throw new Error("invalid")}()};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();function Fc(n,i){return{\u0275kind:n,\u0275providers:i}}function mE(){const n=dn(va);return i=>{const t=n.get(Pu);if(i!==t.components[0])return;const r=n.get(co),o=n.get(yE);1===n.get(fb)&&r.initialNavigation(),n.get(vE,null,hi.Optional)?.setUpPreloading(),n.get(db,null,hi.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const yE=new Rn("",{factory:()=>new U}),fb=new Rn("",{providedIn:"root",factory:()=>1}),vE=new Rn("");function $4(n){return Fc(0,[{provide:vE,useExisting:V4},{provide:fE,useExisting:n}])}const xE=new Rn("ROUTER_FORROOT_GUARD"),W4=[g_,{provide:D0,useClass:q_},co,F0,{provide:qf,useFactory:function gE(n){return n.routerState.root},deps:[co]},ub,[]];function X4(){return new XC("Router",co)}let pb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[W4,[],{provide:Yf,multi:!0,useValue:t},{provide:xE,useFactory:J4,deps:[[co,new Xd,new Ah]]},{provide:Ay,useValue:r||{}},r?.useHash?{provide:nd,useClass:s6}:{provide:nd,useClass:SS},{provide:db,useFactory:()=>{const n=dn(AR),i=dn(Zn),t=dn(Ay),r=dn(Sy),o=dn(D0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pE(o,r,n,i,t)}},r?.preloadingStrategy?$4(r.preloadingStrategy).\u0275providers:[],{provide:XC,multi:!0,useFactory:X4},r?.initialNavigation?Q4(r):[],r?.bindToComponentInputs?Fc(8,[WA,{provide:xy,useExisting:WA}]).\u0275providers:[],[{provide:_E,useFactory:mE},{provide:s_,multi:!0,useExisting:_E}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Yf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(On(xE,8))};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({})}return n})();function J4(n){return"guarded"}function Q4(n){return["disabled"===n.initialNavigation?Fc(3,[{provide:Kx,multi:!0,useFactory:()=>{const i=dn(co);return()=>{i.setUpLocationChangeListener()}}},{provide:fb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fc(2,[{provide:fb,useValue:0},{provide:Kx,multi:!0,deps:[va],useFactory:i=>{const t=i.get(i6,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=i.get(co),h=i.get(yE);hE(o,()=>{r(!0)}),i.get(Sy).afterPreactivation=()=>(r(!0),h.closed?tn(void 0):h),o.initialNavigation()}))}}]).\u0275providers:[]]}const _E=new Rn(""),tL=["videoElement"];let nL=(()=>{class n{ngAfterViewInit(){const t=this.videoElement.nativeElement;t.addEventListener("play",()=>{const r=document.getElementById("unmuteButton");r&&(r.style.display="block")}),t.play().catch(r=>{console.error("Error trying to play the video:",r)})}unmuteVideo(){const t=this.videoElement.nativeElement;t.muted=!1,t.play();const r=document.getElementById("unmuteButton");r&&(r.style.display="none")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-about-us"]],viewQuery:function(r,o){if(1&r&&ed(tL,5),2&r){let h;rl(h=sl())&&(o.videoElement=h.first)}},decls:5,vars:0,consts:[[1,"map-container"],["width","940","height","760","controls","","autoplay",""],["src","./assets/IndiaMap.mp4","type","video/mp4"],["src","video.ogg","type","video/ogg"]],template:function(r,o){1&r&&(In(0,"div",0)(1,"video",1),Vi(2,"source",2)(3,"source",3),ti(4," Your browser does not support the video tag. "),qn()())},styles:[".map-container[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto}.state[_ngcontent-%COMP%]{fill:#ccc;stroke:#fff;stroke-width:1;cursor:pointer;transition:fill .3s}.state[_ngcontent-%COMP%]:hover{fill:#fc0}#MH[_ngcontent-%COMP%]{fill:red}#KA[_ngcontent-%COMP%]{fill:#0f0}#TN[_ngcontent-%COMP%]{fill:#00f}#WB[_ngcontent-%COMP%]{fill:#ff0}#UP[_ngcontent-%COMP%]{fill:#f0f}"]})}return n})(),iL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-contactus"]],decls:30,vars:0,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"],[1,"text-center"],["href","https://wa.me/+918770677039","target","_blank",1,"whatsapp-button",2,"text-align","center","font-size","30px","color","rgb(11, 240, 42)"],[1,"fab","fa-whatsapp"],["id","ContactUs",1,"contact-banner"],["width","900","height","350","loading","lazy","allowfullscreen","","referrerpolicy","no-referrer-when-downgrade","src","https://www.google.com/maps/embed/v1/place?key=AIzaSyB7egAIZsTF2AFa5uh4jTTiqqg6joSHbak\n    &q=Jaiswal Tower, Kumhar Para, Jagriti Nagar, Fafadih, Raipur, Chhattisgarh 492004, India",2,"border","0"],[1,"contact-container"],[1,"contact-info",2,"color","rgb(241, 236, 236)"],[1,"contact-item"],[1,"fas","fa-phone-alt"],[1,"fas","fa-envelope"],[1,"fas","fa-map-marker-alt"]],template:function(r,o){1&r&&(Vi(0,"link",0),In(1,"div",1)(2,"a",2),Vi(3,"i",3),ti(4," Chat with us on WhatsApp"),qn()(),In(5,"section",4)(6,"h2"),ti(7,"Location"),qn(),In(8,"div"),Vi(9,"iframe",5),qn(),In(10,"div",6)(11,"h2"),ti(12,"Contact Us"),qn(),In(13,"div",7)(14,"div",8),Vi(15,"i",9),In(16,"p"),ti(17,"74898 05756"),qn()(),In(18,"div",8),Vi(19,"i",3),In(20,"p"),ti(21,"98271 93566"),qn()(),In(22,"div",8),Vi(23,"i",10),In(24,"p"),ti(25,"superpowerbearing@gmail.com"),qn()(),In(26,"div",8),Vi(27,"i",11),In(28,"p"),ti(29,"Jaiswal Tower, Ground Floor, Raman Mandir Ward, Kumhara Para, Fafadih, Raipur (C.G.)"),qn()()()()())},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Open Sans,sans-serif}.contact-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#0000009d;color:#fff;padding:20px}.contact-form[_ngcontent-%COMP%], .contact-banner[_ngcontent-%COMP%]{width:100%;margin:20px 0;padding:20px;background-color:#000000d2;border-radius:8px;text-align:center}h2[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:20px;color:#fcfcff;font-weight:500;text-align:center}.input-field[_ngcontent-%COMP%]{position:relative;border-bottom:2px solid #ccc;margin:15px 0}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:20px;background-color:#ffffff2f;border-radius:8px;transition:background-color .3s ease;width:60%}a[_ngcontent-%COMP%]{font-size:50px}.contact-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-right:15px}.contact-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:2.3rem}.contact-item[_ngcontent-%COMP%]:hover{background-color:#fff3}.map-section[_ngcontent-%COMP%]{width:100%;margin-top:20px}"]})}return n})(),rL=(()=>{class n{constructor(){this.title="home"}ngOnInit(){this.loadMap()}loadMap(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-home"]],decls:69,vars:0,consts:[["id","home",2,"background-color","white"],[1,"text-center","my-4"],["src","assets/images/logo.jpg","alt","Company Logo",1,"img-fluid"],[1,"text-muted"],["href","/ProductGallery",2,"font-size","30px","font-weight","300"],[2,"font-size","70px","color","#ffffff","font-weight","400","text-align","center"],[1,"services-section"],[1,"services-container"],[1,"service-item"],["src","assets/images/cirdel.jpeg","alt","Customer Satisfaction Image","width","90%"],["src","assets/images/cirqa.jpg","alt","Customer Satisfaction Image","width","60%"],["src","assets/images/cs.jpeg","alt","Customer Satisfaction Image","width","70%"],["width","100%","height","800","allowfullscreen","","referrerpolicy","no-referrer-when-downgrade","src","https://www.google.com/maps/embed/v1/place?key=AIzaSyB7egAIZsTF2AFa5uh4jTTiqqg6joSHbak\n        &q=Jaiswal Tower, Kumhar Para, Jagriti Nagar, Fafadih, Raipur, Chhattisgarh 492004, India",2,"border","0"],[1,"industry-section"],["src","assets\\images\\Designer.png","alt","Industry Image",1,"animated"]],template:function(r,o){1&r&&(In(0,"section",0)(1,"div",1)(2,"h2"),ti(3,"GSTIN: 22AHDPJ8998C2Z7"),qn(),Vi(4,"img",2),In(5,"h2"),ti(6,"ISO 9001:2015"),qn(),In(7,"h1"),ti(8,"Super Power Bearing"),qn(),Vi(9,"br"),In(10,"h2",3),ti(11,"The Commitment to Quality-"),qn(),In(12,"h2",3),ti(13,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0The Commitment to Growth-"),qn(),Vi(14,"br")(15,"br"),In(16,"p"),ti(17,"Welcome to our bearing company. We provide high-quality bearings that meet your performance needs. Our products are trusted by industries worldwide for their durability and reliability."),qn()(),In(18,"div",1)(19,"a",4),ti(20,"Our Products"),qn()()(),In(21,"h2",5),ti(22,"Our Core Value"),qn(),In(23,"section",6)(24,"div",7)(25,"div",8),Vi(26,"img",9),In(27,"h3"),ti(28,"Reliable Delivery"),qn(),In(29,"p"),ti(30,"We ensure that our bearings reach you promptly and in perfect condition.Our efficient delivery network guarantees quick and safe transportation to your location, no matter where you are."),qn()(),In(31,"div",8),Vi(32,"img",10),In(33,"h3"),ti(34,"Quality Assurance"),qn(),In(35,"p"),ti(36,"Our rigorous quality assurance processes ensure that every bearing meets the highest standards of performance and durability. We are committed to providing you with reliable and long-lasting products."),qn()(),In(37,"div",8),Vi(38,"img",11),In(39,"h3"),ti(40,"Customer Satisfaction"),qn(),In(41,"p"),ti(42,"We prioritize customer satisfaction by providing exceptional support and services tailored to your needs. Your feedback drives our continuous improvement, ensuring a positive experience every time."),qn()()()(),In(43,"h2",5),ti(44,"Our Location"),qn(),Vi(45,"br"),In(46,"section",6),Vi(47,"iframe",12),qn(),In(48,"h2",5),ti(49,"Industry Applications"),qn(),In(50,"section",13),Vi(51,"img",14),In(52,"p"),ti(53,"Our precision-engineered bearings are designed to meet the demanding needs of various industries. In the "),In(54,"strong"),ti(55,"automotive"),qn(),ti(56," sector, our bearings ensure smooth and reliable performance for everything from passenger vehicles to heavy-duty trucks. In the "),In(57,"strong"),ti(58,"aerospace"),qn(),ti(59," industry, our high-performance bearings provide the durability and precision needed for aircraft engines and landing gear. For "),In(60,"strong"),ti(61,"industrial machinery"),qn(),ti(62,", our bearings support efficient operation and longevity, reducing downtime and maintenance costs. Our products also excel in "),In(63,"strong"),ti(64,"medical equipment"),qn(),ti(65,", ensuring precision and reliability in critical applications. Additionally, we serve the "),In(66,"strong"),ti(67,"energy sector"),qn(),ti(68,", offering bearings that withstand extreme conditions in wind turbines and oil rigs. Whatever your industry, our bearings deliver the performance and reliability you can count on."),qn()())},styles:['body[_ngcontent-%COMP%]{min-width:1000px;background:#ff00cc;background:linear-gradient(to right,#909EB4,#4C2F37);margin:0}#trapezoid[_ngcontent-%COMP%]{box-sizing:content-box;height:0;border:80px solid rgba(0,0,0,0);border-top:0 solid;border-bottom:100px solid rgba(1,1,1,.4);border-radius:20px 20px 0 0;font: 100%/normal Arial,Helvetica,sans-serif;color:#000000b3;transform:rotateX(180deg);margin-top:-53px;width:100%;position:relative;transition:all .7s ease;padding-left:7%}#trapezoid[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .subnavbtn[_ngcontent-%COMP%]{transform:rotateX(180deg)}.sub-home[_ngcontent-%COMP%]{display:none;position:absolute;right:0;left:0;z-index:1;transform:perspective(-10px)}#trapezoid[_ngcontent-%COMP%]:hover   .sub-home[_ngcontent-%COMP%]{justify-content:center;margin-top:53px}.navbar[_ngcontent-%COMP%]{position:sticky;top:0;display:flex;overflow:hidden;justify-content:center;height:100px;z-index:1000}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;font-size:16px;color:#fff;text-align:center;padding:14px 25px;text-decoration:none;text-transform:uppercase;letter-spacing:4px;transition:all .5s ease}.subnav[_ngcontent-%COMP%]{float:left;overflow:hidden}.subnav[_ngcontent-%COMP%]   .subnavbtn[_ngcontent-%COMP%]{font-size:16px;border:none;outline:none;color:#fff;padding:14px 25px;background-color:inherit;font-family:inherit;margin:0;text-transform:uppercase;letter-spacing:4px;transition:all .5s ease}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .subnav[_ngcontent-%COMP%]:hover   .subnavbtn[_ngcontent-%COMP%]{background:#8CA6DB;color:#000;border-radius:5px}.subnav-content[_ngcontent-%COMP%]{display:none;position:absolute;left:0;width:100%;z-index:1;transform:perspective(-10px)}.subnav-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;color:#fff;text-decoration:none}.subnav-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#B993D6;color:#000}.subnav[_ngcontent-%COMP%]:hover   .subnav-content[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]{margin:0 10em 10em;padding:3em 0}h1[_ngcontent-%COMP%]{color:#c11;font-family:Times New Roman,Times,serif;font-size:150px;font-weight:700;letter-spacing:-1px;text-align:center;padding:0;margin:0}h2[_ngcontent-%COMP%]{color:#040469;font-size:50px;font-weight:500;font-family:Verdana,Geneva,Tahoma,sans-serif}p[_ngcontent-%COMP%]{color:#111;font-family:Calibri,sans-serif;font-size:35px;line-height:1.5;text-align:center;margin:20px;padding:10px}hr[_ngcontent-%COMP%]{background-color:#000}footer[_ngcontent-%COMP%]{background-color:#435473;color:#fff;padding:1rem 0}a[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:inline-block}a[_ngcontent-%COMP%]:before, a[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;left:0}a[_ngcontent-%COMP%]:before{background-color:#54b3d6;height:2px;bottom:0;transform-origin:100% 50%;transform:scaleX(0);transition:transform .3s cubic-bezier(.76,0,.24,1)}a[_ngcontent-%COMP%]:after{content:attr(data-replace);height:100%;top:0;transform-origin:100% 50%;transform:translate3d(200%,0,0);transition:transform .3s cubic-bezier(.76,0,.24,1);color:#54b3d6}a[_ngcontent-%COMP%]:hover:before{transform-origin:0% 50%;transform:scaleX(1)}a[_ngcontent-%COMP%]:hover:after{transform:translateZ(0)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;transition:transform .3s cubic-bezier(.76,0,.24,1)}a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:translate3d(-200%,0,0)}.industry-section[_ngcontent-%COMP%]{background-color:#fff;padding:50px 20px;text-align:center}.industry-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2em;margin-bottom:30px;color:#666}.industry-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;margin-bottom:30px;border-radius:10px}.industry-section[_ngcontent-%COMP%]   .animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}a[_ngcontent-%COMP%]{text-decoration:none;color:#18272f;font-weight:700;vertical-align:top}.services-section[_ngcontent-%COMP%]{background-color:#fff;padding:50px 20px;text-align:center}.services-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em;margin-bottom:20px;color:#333}.services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px}.service-item[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:500px;padding:20px;text-align:left}.service-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;object-fit:cover;border-radius:10px}.service-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5em;margin-top:15px;margin-bottom:10px;color:#333}.service-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2em;font-weight:600px;text-align:justify;color:#666}']})}return n})(),sL=(()=>{class n{constructor(){this.title="Products"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-product-gallery"]],decls:9,vars:0,consts:[[1,"container"],["src","assets/images/R 3.jpeg","alt","Herd of horses"],["src","assets/images/R.jpeg","alt","Baby Elephant"],["src","assets/images/R2.jpg","alt","Koi Fish"],["src","assets/images/OIP.jpeg","alt","Ibis Bird"],["src","assets/images/R4.jpeg","alt","Lemur"],["src","assets/images/r6.jpeg","alt","Berber Monkeys"]],template:function(r,o){1&r&&(In(0,"h1"),ti(1,"Our Bearing ranges in 1500+ sizes"),qn(),In(2,"div",0),Vi(3,"img",1)(4,"img",2)(5,"img",3)(6,"img",4)(7,"img",5)(8,"img",6),qn())},styles:["h1[_ngcontent-%COMP%]{color:#fefae0;font-family:Amita;margin:20px auto;width:750px;font-size:3rem;text-align:center;border-bottom:10px double #bc6c25}img[_ngcontent-%COMP%]{width:350px;height:300px;margin:10px;border:10px solid #fefae0;filter:sepia(100%);transition-duration:1s}img[_ngcontent-%COMP%]:hover{border:5px solid #fff;transform:scale(1.1);filter:none}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center}"]})}return n})(),bE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(wc),Bt(ya))};static#t=this.\u0275dir=kn({type:n})}return n})(),ad=(()=>{class n extends bE{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=ms(n)))(o||n)}}();static#t=this.\u0275dir=kn({type:n,features:[fr]})}return n})();const ql=new Rn("NgValueAccessor"),lL={provide:ql,useExisting:Mn(()=>Ey),multi:!0},uL=new Rn("CompositionEventMode");let Ey=(()=>{class n extends bE{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cL(){const n=Fu()?Fu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(wc),Bt(ya),Bt(uL,8))};static#t=this.\u0275dir=kn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&Kr("input",function(v){return o._handleInput(v.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(v){return o._compositionEnd(v.target.value)})},features:[Lr([lL]),fr]})}return n})();function Nu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function CE(n){return null!=n&&"number"==typeof n.length}const _a=new Rn("NgValidators"),Bu=new Rn("NgAsyncValidators"),hL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kf{static min(i){return function SE(n){return i=>{if(Nu(i.value)||Nu(n))return null;const t=parseFloat(i.value);return!isNaN(t)&&t<n?{min:{min:n,actual:i.value}}:null}}(i)}static max(i){return function AE(n){return i=>{if(Nu(i.value)||Nu(n))return null;const t=parseFloat(i.value);return!isNaN(t)&&t>n?{max:{max:n,actual:i.value}}:null}}(i)}static required(i){return EE(i)}static requiredTrue(i){return function DE(n){return!0===n.value?null:{required:!0}}(i)}static email(i){return function TE(n){return Nu(n.value)||hL.test(n.value)?null:{email:!0}}(i)}static minLength(i){return function ME(n){return i=>Nu(i.value)||!CE(i.value)?null:i.value.length<n?{minlength:{requiredLength:n,actualLength:i.value.length}}:null}(i)}static maxLength(i){return function kE(n){return i=>CE(i.value)&&i.value.length>n?{maxlength:{requiredLength:n,actualLength:i.value.length}}:null}(i)}static pattern(i){return function IE(n){if(!n)return Dy;let i,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),i=new RegExp(t)):(t=n.toString(),i=n),r=>{if(Nu(r.value))return null;const o=r.value;return i.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(i)}static nullValidator(i){return null}static compose(i){return NE(i)}static composeAsync(i){return BE(i)}}function EE(n){return Nu(n.value)?{required:!0}:null}function Dy(n){return null}function PE(n){return null!=n}function FE(n){return r0(n)?$t(n):n}function RE(n){let i={};return n.forEach(t=>{i=null!=t?{...i,...t}:i}),0===Object.keys(i).length?null:i}function OE(n,i){return i.map(t=>t(n))}function LE(n){return n.map(i=>function dL(n){return!n.validate}(i)?i:t=>i.validate(t))}function NE(n){if(!n)return null;const i=n.filter(PE);return 0==i.length?null:function(t){return RE(OE(t,i))}}function gb(n){return null!=n?NE(LE(n)):null}function BE(n){if(!n)return null;const i=n.filter(PE);return 0==i.length?null:function(t){return function aL(...n){const i=br(n),{args:t,keys:r}=pA(n),o=new m(h=>{const{length:v}=t;if(!v)return void h.complete();const Q=new Array(v);let ue=v,be=v;for(let Re=0;Re<v;Re++){let qe=!1;un(t[Re]).subscribe(B(h,ft=>{qe||(qe=!0,be--),Q[Re]=ft},()=>ue--,void 0,()=>{(!ue||!qe)&&(be||h.next(r?gA(r,Q):Q),h.complete())}))}});return i?o.pipe(j_(i)):o}(OE(t,i).map(FE)).pipe(ie(RE))}}function mb(n){return null!=n?BE(LE(n)):null}function zE(n,i){return null===n?[i]:Array.isArray(n)?[...n,i]:[n,i]}function UE(n){return n._rawValidators}function VE(n){return n._rawAsyncValidators}function yb(n){return n?Array.isArray(n)?n:[n]:[]}function Ty(n,i){return Array.isArray(n)?n.includes(i):n===i}function jE(n,i){const t=yb(i);return yb(n).forEach(o=>{Ty(t,o)||t.push(o)}),t}function HE(n,i){return yb(i).filter(t=>!Ty(n,t))}class GE{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=gb(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=mb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i=void 0){this.control&&this.control.reset(i)}hasError(i,t){return!!this.control&&this.control.hasError(i,t)}getError(i,t){return this.control?this.control.getError(i,t):null}}class Oa extends GE{get formDirective(){return null}get path(){return null}}class zu extends GE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $E{constructor(i){this._cd=i}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let qE=(()=>{class n extends $E{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(zu,2))};static#t=this.\u0275dir=kn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&km("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[fr]})}return n})(),WE=(()=>{class n extends $E{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(Oa,10))};static#t=this.\u0275dir=kn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&km("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[fr]})}return n})();const U0="VALID",ky="INVALID",Jf="PENDING",V0="DISABLED";function _b(n){return(Iy(n)?n.validators:n)||null}function bb(n,i){return(Iy(i)?i.asyncValidators:n)||null}function Iy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ZE(n,i,t){const r=n.controls;if(!(i?Object.keys(r):r).length)throw new qt(1e3,"");if(!r[t])throw new qt(1001,"")}function YE(n,i,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new qt(1002,"")})}class Py{constructor(i,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(i),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===U0}get invalid(){return this.status===ky}get pending(){return this.status==Jf}get disabled(){return this.status===V0}get enabled(){return this.status!==V0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._assignValidators(i)}setAsyncValidators(i){this._assignAsyncValidators(i)}addValidators(i){this.setValidators(jE(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(jE(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(HE(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(HE(i,this._rawAsyncValidators))}hasValidator(i){return Ty(this._rawValidators,i)}hasAsyncValidator(i){return Ty(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=Jf,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const t=this._parentMarkedDirty(i.onlySelf);this.status=V0,this.errors=null,this._forEachChild(r=>{r.disable({...i,onlySelf:!0})}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...i,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(i={}){const t=this._parentMarkedDirty(i.onlySelf);this.status=U0,this._forEachChild(r=>{r.enable({...i,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors({...i,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===U0||this.status===Jf)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?V0:U0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=Jf,this._hasOwnPendingAsyncValidator=!0;const t=FE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,t={}){this.errors=i,this._updateControlsErrors(!1!==t.emitEvent)}get(i){let t=i;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(i,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[i]:null}hasError(i,t){return!!this.getError(i,t)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new on,this.statusChanges=new on}_calculateStatus(){return this._allControlsDisabled()?V0:this.errors?ky:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jf)?Jf:this._anyControlsHaveStatus(ky)?ky:U0}_anyControlsHaveStatus(i){return this._anyControls(t=>t.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Iy(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(i){return null}_assignValidators(i){this._rawValidators=Array.isArray(i)?i.slice():i,this._composedValidatorFn=function mL(n){return Array.isArray(n)?gb(n):n||null}(this._rawValidators)}_assignAsyncValidators(i){this._rawAsyncValidators=Array.isArray(i)?i.slice():i,this._composedAsyncValidatorFn=function yL(n){return Array.isArray(n)?mb(n):n||null}(this._rawAsyncValidators)}}class j0 extends Py{constructor(i,t,r){super(_b(t),bb(r,t)),this.controls=i,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,t){return this.controls[i]?this.controls[i]:(this.controls[i]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(i,t,r={}){this.registerControl(i,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(i,t={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(i,t,r={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],t&&this.registerControl(i,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,t={}){YE(this,0,i),Object.keys(i).forEach(r=>{ZE(this,!0,r),this.controls[r].setValue(i[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(i,t={}){null!=i&&(Object.keys(i).forEach(r=>{const o=this.controls[r];o&&o.patchValue(i[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(i={},t={}){this._forEachChild((r,o)=>{r.reset(i?i[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(i,t,r)=>(i[r]=t.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&i(r,t)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&i(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(i,t){let r=i;return this._forEachChild((o,h)=>{r=t(r,o,h)}),r}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}}class KE extends j0{}const Qf=new Rn("CallSetDisabledState",{providedIn:"root",factory:()=>Fy}),Fy="always";function H0(n,i,t=Fy){wb(n,i),i.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&i.valueAccessor.setDisabledState?.(n.disabled),function xL(n,i){i.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&JE(n,i)})}(n,i),function bL(n,i){const t=(r,o)=>{i.valueAccessor.writeValue(r),o&&i.viewToModelUpdate(r)};n.registerOnChange(t),i._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,i),function _L(n,i){i.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&JE(n,i),"submit"!==n.updateOn&&n.markAsTouched()})}(n,i),function vL(n,i){if(i.valueAccessor.setDisabledState){const t=r=>{i.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),i._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,i)}function Oy(n,i,t=!0){const r=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(r),i.valueAccessor.registerOnTouched(r)),Ny(n,i),n&&(i._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ly(n,i){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(i)})}function wb(n,i){const t=UE(n);null!==i.validator?n.setValidators(zE(t,i.validator)):"function"==typeof t&&n.setValidators([t]);const r=VE(n);null!==i.asyncValidator?n.setAsyncValidators(zE(r,i.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ly(i._rawValidators,o),Ly(i._rawAsyncValidators,o)}function Ny(n,i){let t=!1;if(null!==n){if(null!==i.validator){const o=UE(n);if(Array.isArray(o)&&o.length>0){const h=o.filter(v=>v!==i.validator);h.length!==o.length&&(t=!0,n.setValidators(h))}}if(null!==i.asyncValidator){const o=VE(n);if(Array.isArray(o)&&o.length>0){const h=o.filter(v=>v!==i.asyncValidator);h.length!==o.length&&(t=!0,n.setAsyncValidators(h))}}}const r=()=>{};return Ly(i._rawValidators,r),Ly(i._rawAsyncValidators,r),t}function JE(n,i){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tD(n,i){const t=n.indexOf(i);t>-1&&n.splice(t,1)}function nD(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const $0=class extends Py{constructor(i=null,t,r){super(_b(t),bb(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Iy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=nD(i)?i.value:i)}setValue(i,t={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(i,t={}){this.setValue(i,t)}reset(i=this.defaultValue,t={}){this._applyFormState(i),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){tD(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){tD(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){nD(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}};let oD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=kn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),cD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({})}return n})();const Db=new Rn("NgModelWithFormControlWarning"),OL={provide:Oa,useExisting:Mn(()=>By)};let By=(()=>{class n extends Oa{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new on,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ny(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return H0(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Oy(t.control||null,t,!1),function AL(n,i){const t=n.indexOf(i);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function eD(n,i){n._syncPendingControls(),i.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Oy(r||null,t),(n=>n instanceof $0)(o)&&(H0(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function QE(n,i){wb(n,i)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function wL(n,i){return Ny(n,i)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wb(this.form,this),this._oldForm&&Ny(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(_a,10),Bt(Bu,10),Bt(Qf,8))};static#t=this.\u0275dir=kn({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,o){1&r&&Kr("submit",function(v){return o.onSubmit(v)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lr([OL]),fr,ei]})}return n})();const BL={provide:zu,useExisting:Mn(()=>kb)};let kb=(()=>{class n extends zu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,o,h,v){super(),this._ngModelWarningConfig=v,this._added=!1,this.name=null,this.update=new on,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Ab(n,i){if(!i)return null;let t,r,o;return Array.isArray(i),i.forEach(h=>{h.constructor===Ey?t=h:function SL(n){return Object.getPrototypeOf(n.constructor)===ad}(h)?r=h:o=h}),o||r||t||null}(0,h)}ngOnChanges(t){this._added||this._setUpControl(),function Sb(n,i){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(i,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Ry(n,i){return[...i.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(Bt(Oa,13),Bt(_a,10),Bt(Bu,10),Bt(ql,10),Bt(Db,8))};static#n=this.\u0275dir=kn({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Lr([BL]),fr,ei]})}return n})(),od=(()=>{class n{constructor(){this._validator=Dy}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Dy,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=kn({type:n,features:[ei]})}return n})();const WL={provide:_a,useExisting:Mn(()=>zy),multi:!0};let zy=(()=>{class n extends od{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=zf,this.createValidator=t=>EE}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=ms(n)))(o||n)}}();static#t=this.\u0275dir=kn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){2&r&&qa("required",o._enabled?"":null)},inputs:{required:"required"},features:[Lr([WL]),fr]})}return n})(),QL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({imports:[cD]})}return n})();class AD extends Py{constructor(i,t,r){super(_b(t),bb(r,t)),this.controls=i,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[this._adjustIndex(i)]}push(i,t={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(i,t,r={}){this.controls.splice(i,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(i,t={}){let r=this._adjustIndex(i);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(i,t,r={}){let o=this._adjustIndex(i);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,t={}){YE(this,0,i),i.forEach((r,o)=>{ZE(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(i,t={}){null!=i&&(i.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(i=[],t={}){this._forEachChild((r,o)=>{r.reset(i[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(i=>i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_adjustIndex(i){return i<0?i+this.length:i}_syncPendingControls(){let i=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((t,r)=>{i(t,r)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(t=>t.enabled&&i(t))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}_find(i){return this.at(i)??null}}function ED(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let e8=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let h={};return ED(r)?h=r:null!==r&&(h.validators=r.validator,h.asyncValidators=r.asyncValidator),new j0(o,h)}record(t,r=null){const o=this._reduceControls(t);return new KE(o,r)}control(t,r,o){let h={};return this.useNonNullable?(ED(r)?h=r:(h.validators=r,h.asyncValidators=o),new $0(t,{...h,nonNullable:!0})):new $0(t,r,o)}array(t,r,o){const h=t.map(v=>this._createControl(v));return new AD(h,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof $0||t instanceof Py?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Db,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Qf,useValue:t.callSetDisabledState??Fy}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({imports:[QL]})}return n})();class Uy{}class Vy{}class Wl{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?"string"==typeof i?this.lazyInit=()=>{this.headers=new Map,i.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),h=o.toLowerCase(),v=t.slice(r+1).trim();this.maybeSetNormalizedName(o,h),this.headers.has(h)?this.headers.get(h).push(v):this.headers.set(h,[v])}})}:typeof Headers<"u"&&i instanceof Headers?(this.headers=new Map,i.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(i).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const t=this.headers.get(i.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,t){return this.clone({name:i,value:t,op:"a"})}set(i,t){return this.clone({name:i,value:t,op:"s"})}delete(i,t){return this.clone({name:i,value:t,op:"d"})}maybeSetNormalizedName(i,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,i)}init(){this.lazyInit&&(this.lazyInit instanceof Wl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(t=>{this.headers.set(t,i.headers.get(t)),this.normalizedNames.set(t,i.normalizedNames.get(t))})}clone(i){const t=new Wl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Wl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([i]),t}applyUpdate(i){const t=i.name.toLowerCase();switch(i.op){case"a":case"s":let r=i.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(i.name,t);const o=("a"===i.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const h=i.value;if(h){let v=this.headers.get(t);if(!v)return;v=v.filter(Q=>-1===h.indexOf(Q)),0===v.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,v)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(i,t){const r=(Array.isArray(t)?t:[t]).map(h=>h.toString()),o=i.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(i,o)}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>i(this.normalizedNames.get(t),this.headers.get(t)))}}class n8{encodeKey(i){return DD(i)}encodeValue(i){return DD(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}const r8=/%(\d[a-f0-9])/gi,s8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function DD(n){return encodeURIComponent(n).replace(r8,(i,t)=>s8[t]??i)}function jy(n){return`${n}`}class Uu{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new n8,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function i8(n,i){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const h=o.indexOf("="),[v,Q]=-1==h?[i.decodeKey(o),""]:[i.decodeKey(o.slice(0,h)),i.decodeValue(o.slice(h+1))],ue=t.get(v)||[];ue.push(Q),t.set(v,ue)}),t}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(t=>{const r=i.fromObject[t],o=Array.isArray(r)?r.map(jy):[jy(r)];this.map.set(t,o)})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const t=this.map.get(i);return t?t[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,t){return this.clone({param:i,value:t,op:"a"})}appendAll(i){const t=[];return Object.keys(i).forEach(r=>{const o=i[r];Array.isArray(o)?o.forEach(h=>{t.push({param:r,value:h,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(i,t){return this.clone({param:i,value:t,op:"s"})}delete(i,t){return this.clone({param:i,value:t,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const t=this.encoder.encodeKey(i);return this.map.get(i).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const t=new Uu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(i),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const t=("a"===i.op?this.map.get(i.param):void 0)||[];t.push(jy(i.value)),this.map.set(i.param,t);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let r=this.map.get(i.param)||[];const o=r.indexOf(jy(i.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(i.param,r):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class a8{constructor(){this.map=new Map}set(i,t){return this.map.set(i,t),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}}function TD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MD(n){return typeof Blob<"u"&&n instanceof Blob}function kD(n){return typeof FormData<"u"&&n instanceof FormData}class q0{constructor(i,t,r,o){let h;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase(),function o8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,h=o):h=r,h&&(this.reportProgress=!!h.reportProgress,this.withCredentials=!!h.withCredentials,h.responseType&&(this.responseType=h.responseType),h.headers&&(this.headers=h.headers),h.context&&(this.context=h.context),h.params&&(this.params=h.params)),this.headers||(this.headers=new Wl),this.context||(this.context=new a8),this.params){const v=this.params.toString();if(0===v.length)this.urlWithParams=t;else{const Q=t.indexOf("?");this.urlWithParams=t+(-1===Q?"?":Q<t.length-1?"&":"")+v}}else this.params=new Uu,this.urlWithParams=t}serializeBody(){return null===this.body?null:TD(this.body)||MD(this.body)||kD(this.body)||function l8(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Uu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||kD(this.body)?null:MD(this.body)?this.body.type||null:TD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Uu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){const t=i.method||this.method,r=i.url||this.url,o=i.responseType||this.responseType,h=void 0!==i.body?i.body:this.body,v=void 0!==i.withCredentials?i.withCredentials:this.withCredentials,Q=void 0!==i.reportProgress?i.reportProgress:this.reportProgress;let ue=i.headers||this.headers,be=i.params||this.params;const Re=i.context??this.context;return void 0!==i.setHeaders&&(ue=Object.keys(i.setHeaders).reduce((qe,ft)=>qe.set(ft,i.setHeaders[ft]),ue)),i.setParams&&(be=Object.keys(i.setParams).reduce((qe,ft)=>qe.set(ft,i.setParams[ft]),be)),new q0(t,r,h,{params:be,headers:ue,context:Re,reportProgress:Q,responseType:o,withCredentials:v})}}var ep=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ep||{});class Fb{constructor(i,t=200,r="OK"){this.headers=i.headers||new Wl,this.status=void 0!==i.status?i.status:t,this.statusText=i.statusText||r,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class Rb extends Fb{constructor(i={}){super(i),this.type=ep.ResponseHeader}clone(i={}){return new Rb({headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class tp extends Fb{constructor(i={}){super(i),this.type=ep.Response,this.body=void 0!==i.body?i.body:null}clone(i={}){return new tp({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class ID extends Fb{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${i.url||"(unknown url)"}`:`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}}function Ob(n,i){return{body:i,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let PD=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let h;if(t instanceof q0)h=t;else{let ue,be;ue=o.headers instanceof Wl?o.headers:new Wl(o.headers),o.params&&(be=o.params instanceof Uu?o.params:new Uu({fromObject:o.params})),h=new q0(t,r,void 0!==o.body?o.body:null,{headers:ue,context:o.context,params:be,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const v=tn(h).pipe(Vf(ue=>this.handler.handle(ue)));if(t instanceof q0||"events"===o.observe)return v;const Q=v.pipe(us(ue=>ue instanceof tp));switch(o.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return Q.pipe(ie(ue=>{if(null!==ue.body&&!(ue.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ue.body}));case"blob":return Q.pipe(ie(ue=>{if(null!==ue.body&&!(ue.body instanceof Blob))throw new Error("Response is not a Blob.");return ue.body}));case"text":return Q.pipe(ie(ue=>{if(null!==ue.body&&"string"!=typeof ue.body)throw new Error("Response is not a string.");return ue.body}));default:return Q.pipe(ie(ue=>ue.body))}case"response":return Q;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Uu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Ob(o,r))}post(t,r,o={}){return this.request("POST",t,Ob(o,r))}put(t,r,o={}){return this.request("PUT",t,Ob(o,r))}static#e=this.\u0275fac=function(r){return new(r||n)(On(Uy))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();function OD(n,i){return i(n)}function u8(n,i){return(t,r)=>i.intercept(t,{handle:o=>n(o,r)})}const d8=new Rn(""),W0=new Rn(""),LD=new Rn("");function f8(){let n=null;return(i,t)=>{null===n&&(n=(dn(d8,{optional:!0})??[]).reduceRight(u8,OD));const r=dn(zm),o=r.add();return n(i,t).pipe(S0(()=>r.remove(o)))}}let ND=(()=>{class n extends Uy{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=dn(zm)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(W0),...this.injector.get(LD,[])]));this.chain=o.reduceRight((h,v)=>function h8(n,i,t){return(r,o)=>t.runInContext(()=>i(r,h=>n(h,o)))}(h,v,this.injector),OD)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(S0(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(On(Vy),On(ao))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const y8=/^\)\]\}',?\n/;let zD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new qt(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?$t(r.\u0275loadImpl()):tn(null)).pipe(fn(()=>new m(h=>{const v=r.build();if(v.open(t.method,t.urlWithParams),t.withCredentials&&(v.withCredentials=!0),t.headers.forEach((zt,Xt)=>v.setRequestHeader(zt,Xt.join(","))),t.headers.has("Accept")||v.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const zt=t.detectContentTypeHeader();null!==zt&&v.setRequestHeader("Content-Type",zt)}if(t.responseType){const zt=t.responseType.toLowerCase();v.responseType="json"!==zt?zt:"text"}const Q=t.serializeBody();let ue=null;const be=()=>{if(null!==ue)return ue;const zt=v.statusText||"OK",Xt=new Wl(v.getAllResponseHeaders()),cn=function v8(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(v)||t.url;return ue=new Rb({headers:Xt,status:v.status,statusText:zt,url:cn}),ue},Re=()=>{let{headers:zt,status:Xt,statusText:cn,url:Wt}=be(),Nn=null;204!==Xt&&(Nn=typeof v.response>"u"?v.responseText:v.response),0===Xt&&(Xt=Nn?200:0);let si=Xt>=200&&Xt<300;if("json"===t.responseType&&"string"==typeof Nn){const Ri=Nn;Nn=Nn.replace(y8,"");try{Nn=""!==Nn?JSON.parse(Nn):null}catch(qs){Nn=Ri,si&&(si=!1,Nn={error:qs,text:Nn})}}si?(h.next(new tp({body:Nn,headers:zt,status:Xt,statusText:cn,url:Wt||void 0})),h.complete()):h.error(new ID({error:Nn,headers:zt,status:Xt,statusText:cn,url:Wt||void 0}))},qe=zt=>{const{url:Xt}=be(),cn=new ID({error:zt,status:v.status||0,statusText:v.statusText||"Unknown Error",url:Xt||void 0});h.error(cn)};let ft=!1;const St=zt=>{ft||(h.next(be()),ft=!0);let Xt={type:ep.DownloadProgress,loaded:zt.loaded};zt.lengthComputable&&(Xt.total=zt.total),"text"===t.responseType&&v.responseText&&(Xt.partialText=v.responseText),h.next(Xt)},Ot=zt=>{let Xt={type:ep.UploadProgress,loaded:zt.loaded};zt.lengthComputable&&(Xt.total=zt.total),h.next(Xt)};return v.addEventListener("load",Re),v.addEventListener("error",qe),v.addEventListener("timeout",qe),v.addEventListener("abort",qe),t.reportProgress&&(v.addEventListener("progress",St),null!==Q&&v.upload&&v.upload.addEventListener("progress",Ot)),v.send(Q),h.next({type:ep.Sent}),()=>{v.removeEventListener("error",qe),v.removeEventListener("abort",qe),v.removeEventListener("load",Re),v.removeEventListener("timeout",qe),t.reportProgress&&(v.removeEventListener("progress",St),null!==Q&&v.upload&&v.upload.removeEventListener("progress",Ot)),v.readyState!==v.DONE&&v.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(On(GS))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const Lb=new Rn("XSRF_ENABLED"),UD=new Rn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),VD=new Rn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class jD{}let b8=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=RS(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(On(ta),On(Qo),On(UD))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();function w8(n,i){const t=n.url.toLowerCase();if(!dn(Lb)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return i(n);const r=dn(jD).getToken(),o=dn(VD);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),i(n)}var Vu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Vu||{});function C8(...n){const i=[PD,zD,ND,{provide:Uy,useExisting:ND},{provide:Vy,useExisting:zD},{provide:W0,useValue:w8,multi:!0},{provide:Lb,useValue:!0},{provide:jD,useClass:b8}];for(const t of n)i.push(...t.\u0275providers);return ma(i)}const HD=new Rn("LEGACY_INTERCEPTOR_FN");function S8(){return function ld(n,i){return{\u0275kind:n,\u0275providers:i}}(Vu.LegacyInterceptors,[{provide:HD,useFactory:f8},{provide:W0,useExisting:HD,multi:!0}])}let GD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({providers:[C8(S8())]})}return n})(),k8=(()=>{class n{constructor(t){this.http=t,this.apiUrl="http://localhost:8080/api/data"}getData(){return this.http.get(this.apiUrl)}addData(t){return this.http.post(this.apiUrl,t)}static#e=this.\u0275fac=function(r){return new(r||n)(On(PD))};static#t=this.\u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),I8=(()=>{class n{constructor(t,r){this.excelService=t,this.fb=r,this.data=[],this.enquiryForm=this.fb.group({companyName:["",Kf.required],address:["",Kf.required],contact:["",Kf.required],email:["",[Kf.required,Kf.email]],whatsappNumber:["",Kf.required]})}ngOnInit(){}loadData(){this.excelService.getData().subscribe(t=>{this.data=t})}onSubmit(){this.enquiryForm.valid&&this.excelService.addData(this.enquiryForm.value).subscribe(()=>{this.loadData(),this.enquiryForm.reset(),alert("Data added successfully")},t=>{alert("Failed to add data")})}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(k8),Bt(e8))};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-enquiry"]],decls:28,vars:2,consts:[["id","Enquiry"],[1,"wrapper"],[3,"formGroup","ngSubmit"],[1,"input-field"],["type","text","id","companyName","formControlName","companyName","required",""],["for","companyName"],["type","text","id","address","formControlName","address","required",""],["for","address"],["type","text","id","contact","formControlName","contact","required",""],["for","contact"],["type","email","id","email","formControlName","email","required",""],["for","email"],["type","text","id","whatsappNumber","formControlName","whatsappNumber","required",""],["for","whatsappNumber"],[1,"form-group","text-center"],["type","submit",3,"disabled"]],template:function(r,o){1&r&&(In(0,"section",0)(1,"div",1)(2,"h2"),ti(3,"Enquiry"),qn(),In(4,"form",2),Kr("ngSubmit",function(){return o.onSubmit()}),In(5,"div",3),Vi(6,"input",4),In(7,"label",5),ti(8,"Company Name"),qn()(),In(9,"div",3),Vi(10,"input",6),In(11,"label",7),ti(12,"Address"),qn()(),In(13,"div",3),Vi(14,"input",8),In(15,"label",9),ti(16,"Contact"),qn()(),In(17,"div",3),Vi(18,"input",10),In(19,"label",11),ti(20,"Email"),qn()(),In(21,"div",3),Vi(22,"input",12),In(23,"label",13),ti(24,"Whatsapp Number"),qn()(),In(25,"div",14)(26,"button",15),ti(27,"Register"),qn()()()()()),2&r&&(dr(4),xr("formGroup",o.enquiryForm),dr(22),xr("disabled",!o.enquiryForm.valid))},dependencies:[oD,Ey,qE,WE,zy,By,kb],styles:["section#Enquiry[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:40px 0}section#Enquiry[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a}section#Enquiry[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:34px;color:#333}section#Enquiry[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{position:relative;margin-bottom:27px}section#Enquiry[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}section#Enquiry[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;transform:translateY(-50%);background-color:#fff;padding:0 5px;color:#999;transition:all .3s}section#Enquiry[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], section#Enquiry[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{top:-10px;left:10px;color:#333;font-size:18px}section#Enquiry[_ngcontent-%COMP%]   .form-group.text-center[_ngcontent-%COMP%]{text-align:center}section#Enquiry[_ngcontent-%COMP%]   .form-group.text-center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;background-color:#007bff;color:#fff;font-size:16px;cursor:pointer;transition:background-color .3s}section#Enquiry[_ngcontent-%COMP%]   .form-group.text-center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}section#Enquiry[_ngcontent-%COMP%]   .form-group.text-center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}"]})}return n})();function $D(n,i,t,r,o,h,v){try{var Q=n[h](v),ue=Q.value}catch(be){return void t(be)}Q.done?i(ue):Promise.resolve(ue).then(r,o)}function To(n){return function(){var i=this,t=arguments;return new Promise(function(r,o){var h=n.apply(i,t);function v(ue){$D(h,r,o,v,Q,"next",ue)}function Q(ue){$D(h,r,o,v,Q,"throw",ue)}v(void 0)})}}var qD=Oe(627),P8=Oe(272);const R8=["pdfCanvas"];function O8(n,i){1&n&&(In(0,"div",2),Vi(1,"canvas",null,3),qn())}qD.GlobalWorkerOptions.workerSrc=Oe.n(P8)();const L8=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"Home",component:rL},{path:"enquiry",component:I8},{path:"certificates",component:(()=>{class n{constructor(){this.pdfUrls=["assets/certificate/Certificate of ISO.pdf","assets/certificate/GST_Certificate.pdf","assets/certificate/IEC CODE.pdf","assets/certificate/MSME Registration.pdf"]}ngOnInit(){}ngAfterViewInit(){this.loadPdfs()}loadPdfs(){var t=this;return To(function*(){const r=t.pdfCanvasList.toArray();for(let o=0;o<t.pdfUrls.length;o++){const h=t.pdfUrls[o],v=r[o].nativeElement;yield t.loadPdf(h,v)}})()}loadPdf(t,r){return To(function*(){const v=yield(yield qD.getDocument(t).promise).getPage(1),Q=v.getViewport({scale:1.5}),ue=r.getContext("2d");r.height=Q.height,r.width=Q.width;const be={canvasContext:ue,viewport:Q};yield v.render(be).promise})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-certificate"]],viewQuery:function(r,o){if(1&r&&ed(R8,5),2&r){let h;rl(h=sl())&&(o.pdfCanvasList=h)}},decls:2,vars:1,consts:[[1,"center-container"],["class","center",4,"ngFor","ngForOf"],[1,"center"],["pdfCanvas",""]],template:function(r,o){1&r&&(In(0,"div",0),Is(1,O8,3,0,"div",1),qn()),2&r&&(dr(1),xr("ngForOf",o.pdfUrls))},dependencies:[E_],styles:[".center-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:20px}canvas[_ngcontent-%COMP%]{border:1px solid #000}"]})}return n})()},{path:"AboutUs",component:nL},{path:"ContactUs",component:iL},{path:"ProductGallery",component:sL}];let N8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({imports:[pb.forRoot(L8,{scrollPositionRestoration:"enabled"}),pb]})}return n})(),B8=(()=>{class n{constructor(t){this.router=t,this.title="Super Power Bearing",this.router.events.subscribe(r=>{if(r instanceof Ic){const o=document.getElementById(r.urlAfterRedirects.replace("/",""));o&&o.scrollIntoView({behavior:"smooth",block:"start"})}})}scrollTo(t){this.router.navigate([t])}static#e=this.\u0275fac=function(r){return new(r||n)(Bt(co))};static#t=this.\u0275cmp=Ni({type:n,selectors:[["app-root"]],decls:17,vars:0,consts:[[1,"navbar"],["id","trapezoid"],["href","Home",1,"expandHome",3,"click"],["href","ProductGallery",1,"expandHome",3,"click"],["href","ContactUs",1,"expandHome",3,"click"],["href","enquiry",1,"expandHome",3,"click"],["href","certificates",1,"expandHome"],[1,"bg-dark","text-white","text-center","py-3"],[2,"color","aliceblue"]],template:function(r,o){1&r&&(In(0,"body")(1,"nav",0)(2,"div",1)(3,"a",2),Kr("click",function(){return o.scrollTo("home")}),ti(4,"Home"),qn(),In(5,"a",3),Kr("click",function(){return o.scrollTo("ProductGallery")}),ti(6,"Services"),qn(),In(7,"a",4),Kr("click",function(){return o.scrollTo("ContactUs")}),ti(8,"Contact Us"),qn(),In(9,"a",5),Kr("click",function(){return o.scrollTo("Enquiry")}),ti(10,"Enquiry"),qn(),In(11,"a",6),ti(12,"Certificates"),qn()()(),Vi(13,"router-outlet"),In(14,"footer",7)(15,"p",8),ti(16,"\xa9 2024 Super Power Bearing. All Rights Reserved."),qn()()())},dependencies:[rb],styles:['body[_ngcontent-%COMP%]{min-width:1000px;background:linear-gradient(to right,#909EB4,#4C2F37);margin:0}#trapezoid[_ngcontent-%COMP%]{box-sizing:content-box;height:0;border:80px solid rgba(0,0,0,0);border-top:0 solid;border-bottom:100px solid rgba(1,1,1,.4);border-radius:20px 20px 0 0;font: 100%/normal Arial,Helvetica,sans-serif;color:#000000b3;transform:rotateX(180deg);margin-top:-53px;width:100%;position:relative;transition:all .7s ease;padding-left:7%}#trapezoid[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .subnavbtn[_ngcontent-%COMP%]{transform:rotateX(180deg)}.sub-home[_ngcontent-%COMP%]{display:none;position:absolute;right:0;left:0;z-index:1;transform:perspective(-10px)}#trapezoid[_ngcontent-%COMP%]:hover   .sub-home[_ngcontent-%COMP%]{justify-content:center;margin-top:53px}.navbar[_ngcontent-%COMP%]{position:sticky;top:0;display:flex;overflow:hidden;justify-content:center;height:100px;z-index:1000}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;font-size:16px;color:#fff;text-align:center;padding:14px 25px;text-decoration:none;text-transform:uppercase;letter-spacing:4px;transition:all .5s ease}.subnav[_ngcontent-%COMP%]{float:left;overflow:hidden}.subnav[_ngcontent-%COMP%]   .subnavbtn[_ngcontent-%COMP%]{font-size:16px;border:none;outline:none;color:#fff;padding:14px 25px;background-color:inherit;font-family:inherit;margin:0;text-transform:uppercase;letter-spacing:4px;transition:all .5s ease}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .subnav[_ngcontent-%COMP%]:hover   .subnavbtn[_ngcontent-%COMP%]{background:#8CA6DB;color:#000;border-radius:5px}.subnav-content[_ngcontent-%COMP%]{display:none;position:absolute;left:0;width:100%;z-index:1;transform:perspective(-10px)}.subnav-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;color:#fff;text-decoration:none}.subnav-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#B993D6;color:#000}.subnav[_ngcontent-%COMP%]:hover   .subnav-content[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]{margin:0 10em 10em;padding:3em 0}h1[_ngcontent-%COMP%]{color:#c11;font-family:Times New Roman,Times,serif;font-size:180px;font-weight:700;letter-spacing:-1px;text-align:center;padding:0;margin:0}h2[_ngcontent-%COMP%]{color:#040469;font-size:50px;font-weight:500;font-family:Verdana,Geneva,Tahoma,sans-serif}p[_ngcontent-%COMP%]{color:#111;font-family:Calibri,sans-serif;font-size:35px;line-height:1.5;text-align:center;margin:20px;padding:10px}hr[_ngcontent-%COMP%]{background-color:#000}footer[_ngcontent-%COMP%]{background-color:#435473;color:#fff;padding:1rem 0}a[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:inline-block}a[_ngcontent-%COMP%]:before, a[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;left:0}a[_ngcontent-%COMP%]:before{background-color:#54b3d6;height:2px;bottom:0;transform-origin:100% 50%;transform:scaleX(0);transition:transform .3s cubic-bezier(.76,0,.24,1)}a[_ngcontent-%COMP%]:after{content:attr(data-replace);height:100%;top:0;transform-origin:100% 50%;transform:translate3d(200%,0,0);transition:transform .3s cubic-bezier(.76,0,.24,1);color:#54b3d6}a[_ngcontent-%COMP%]:hover:before{transform-origin:0% 50%;transform:scaleX(1)}a[_ngcontent-%COMP%]:hover:after{transform:translateZ(0)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;transition:transform .3s cubic-bezier(.76,0,.24,1)}a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:translate3d(-200%,0,0)}a[_ngcontent-%COMP%]{text-decoration:none;color:#18272f;font-weight:700;vertical-align:top}']})}return n})();const z8=["addListener","removeListener"],U8=["addEventListener","removeEventListener"],V8=["on","off"];function ia(n,i,t,r){if(le(t)&&(r=t,t=void 0),r)return ia(n,i,t).pipe(j_(r));const[o,h]=function G8(n){return le(n.addEventListener)&&le(n.removeEventListener)}(n)?U8.map(v=>Q=>n[v](i,Q,t)):function j8(n){return le(n.addListener)&&le(n.removeListener)}(n)?z8.map(WD(n,i)):function H8(n){return le(n.on)&&le(n.off)}(n)?V8.map(WD(n,i)):[];if(!o&&at(n))return _i(v=>ia(v,i,t))(un(n));if(!o)throw new TypeError("Invalid event target");return new m(v=>{const Q=(...ue)=>v.next(1<ue.length?ue:ue[0]);return o(Q),()=>h(Q)})}function WD(n,i){return t=>r=>n[t](i,r)}let J8=(()=>{class n{errorHandler;constructor(t){this.errorHandler=t}log(t,...r){}error(t){this.errorHandler.handleError(t)}warn(t,...r){console.warn(t,...r)}static \u0275fac=function(r){return new(r||n)(On(Bl))};static \u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})();const XD=new Rn("WindowToken");class Nb{get nativeWindow(){throw new Error("Not implemented.")}}const iN=[{provide:Nb,useClass:(()=>{class n extends Nb{constructor(){super()}get nativeWindow(){return window}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})()},{provide:XD,useFactory:function nN(n,i){return ry(i)?n.nativeWindow:{setTimeout:(r,o)=>{},clearTimeout:r=>{}}},deps:[Nb,Qo]}],rN=new Rn("DocumentToken");class Bb{get nativeDocument(){throw new Error("Not implemented.")}}const oN=[{provide:Bb,useClass:(()=>{class n extends Bb{constructor(){super()}get nativeDocument(){return document}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})()},{provide:rN,useFactory:function aN(n,i){return ry(i)?n.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[Bb,Qo]}];let lN=(()=>{class n{resizeObservable$;get onResize$(){return this.resizeObservable$}constructor(t,r){this.resizeObservable$=ry(r)?ia(t,"resize"):(new U).asObservable()}static \u0275fac=function(r){return new(r||n)(On(XD),On(Qo))};static \u0275prov=Bn({token:n,factory:n.\u0275fac})}return n})(),cN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Cr({providers:[iN,lN,oN,J8],imports:[I_]})}return n})();function uN(n,i){return{type:7,name:n,definitions:i,options:{}}}function ZD(n,i=null){return{type:4,styles:i,timings:n}}function zb(n){return{type:6,styles:n,offset:null}}function Ub(n,i,t){return{type:0,name:n,styles:i,options:t}}function YD(n,i,t=null){return{type:1,expr:n,animation:i,options:t}}const KD=["toast-component",""];function hN(n,i){if(1&n){const t=bx();In(0,"button",5),Kr("click",function(){return fh(t),Td(ea().remove())}),In(1,"span",6),ti(2,"\xd7"),qn()()}}function dN(n,i){if(1&n&&(Tu(0),ti(1),Mu()),2&n){const t=ea(2);dr(1),Ac("[",t.duplicatesCount+1,"]")}}function fN(n,i){if(1&n&&(In(0,"div"),ti(1),Is(2,dN,2,1,"ng-container",4),qn()),2&n){const t=ea();jl(t.options.titleClass),qa("aria-label",t.title),dr(1),Ac(" ",t.title," "),dr(1),xr("ngIf",t.duplicatesCount)}}function pN(n,i){if(1&n&&Vi(0,"div",7),2&n){const t=ea();jl(t.options.messageClass),xr("innerHTML",t.message,Hp)}}function gN(n,i){if(1&n&&(In(0,"div",8),ti(1),qn()),2&n){const t=ea();jl(t.options.messageClass),qa("aria-label",t.message),dr(1),Ac(" ",t.message," ")}}function mN(n,i){if(1&n&&(In(0,"div"),Vi(1,"div",9),qn()),2&n){const t=ea();dr(1),Rf("width",t.width()+"%")}}class CN{_attachedHost;component;viewContainerRef;injector;constructor(i,t){this.component=i,this.injector=t}attach(i,t){return this._attachedHost=i,i.attach(this,t)}detach(){const i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class SN{_attachedPortal;_disposeFn;attach(i,t){return this._attachedPortal=i,this.attachComponentPortal(i,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}}class AN{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new U;_activate=new U;_manualClose=new U;_resetTimeout=new U;_countDuplicate=new U;constructor(i){this._overlayRef=i}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,t){i&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class $y{toastId;config;message;title;toastType;toastRef;_onTap=new U;_onAction=new U;constructor(i,t,r,o,h,v){this.toastId=i,this.config=t,this.message=r,this.title=o,this.toastType=h,this.toastRef=v,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}}const QD=new Rn("ToastConfig");class EN extends SN{_hostDomElement;_componentFactoryResolver;_appRef;constructor(i,t,r){super(),this._hostDomElement=i,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(i,t){const r=this._componentFactoryResolver.resolveComponentFactory(i.component);let o;return o=r.create(i.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let DN=(()=>{class n{_document=dn(ta);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class TN{_portalHost;constructor(i){this._portalHost=i}attach(i,t=!0){return this._portalHost.attach(i,t)}detach(){return this._portalHost.detach()}}let MN=(()=>{class n{_overlayContainer=dn(DN);_componentFactoryResolver=dn(qp);_appRef=dn(Pu);_document=dn(ta);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const o=this._document.createElement("div");return o.id="toast-container",o.classList.add(t),o.classList.add("toast-container"),r?r.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(t){return new EN(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new TN(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eT=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,o,h,v){this.overlay=r,this._injector=o,this.sanitizer=h,this.ngZone=v,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,o={},h=""){return this._preBuildNotification(h,t,r,this.applyConfig(o))}success(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(o))}error(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(o))}info(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(o))}warning(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(o))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(t="",r="",o,h){const{includeTitleDuplicates:v}=this.toastrConfig;for(const Q of this.toasts)if((!v||v&&Q.title===t)&&Q.message===r)return Q.toastRef.onDuplicate(o,h),Q;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,o,h){return h.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,o,h)):this._buildNotification(t,r,o,h)}_buildNotification(t,r,o,h){if(!h.toastComponent)throw new Error("toastComponent required");const v=this.findDuplicate(o,r,this.toastrConfig.resetTimeoutOnDuplicate&&h.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||r)&&this.toastrConfig.preventDuplicates&&null!==v)return v;this.previousToastMessage=r;let Q=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Q=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const ue=this.overlay.create(h.positionClass,this.overlayContainer);this.index=this.index+1;let be=r;r&&h.enableHtml&&(be=this.sanitizer.sanitize(Ia.HTML,r));const Re=new AN(ue),qe=new $y(this.index,h,be,o,t,Re),St=va.create({providers:[{provide:$y,useValue:qe}],parent:this._injector}),Ot=new CN(h.toastComponent,St),zt=ue.attach(Ot,h.newestOnTop);Re.componentInstance=zt.instance;const Xt={toastId:this.index,title:o||"",message:r||"",toastRef:Re,onShown:Re.afterActivate(),onHidden:Re.afterClosed(),onTap:qe.onTap(),onAction:qe.onAction(),portal:zt};return Q||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Xt.toastRef.activate()})),this.toasts.push(Xt),Xt}static \u0275fac=function(r){return new(r||n)(On(QD),On(MN),On(va),On(hA),On(Zn))};static \u0275prov=Bn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kN={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Bs(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.ngZone=o,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(h=>{this.duplicatesCount=h}),this.state=Bs({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>({...t,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const t=(new Date).getTime();this.width.set((this.hideTime-t)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>({...t,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(t=>({...t,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(Bt(eT),Bt($y),Bt(Zn))};static \u0275cmp=Ni({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,o){1&r&&Kr("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),2&r&&(Dx("@flyInOut",o._state),jl(o.toastClasses),Rf("display",o.displayStyle))},standalone:!0,features:[ls],attrs:KD,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,o){1&r&&(Is(0,hN,3,0,"button",0),Is(1,fN,3,5,"div",1),Is(2,pN,1,3,"div",2),Is(3,gN,2,4,"div",3),Is(4,mN,2,2,"div",4)),2&r&&(xr("ngIf",o.options.closeButton),dr(1),xr("ngIf",o.title),dr(1),xr("ngIf",o.message&&o.options.enableHtml),dr(1),xr("ngIf",o.message&&!o.options.enableHtml),dr(1),xr("ngIf",o.options.progressBar))},dependencies:[iy],encapsulation:2,data:{animation:[uN("flyInOut",[Ub("inactive",zb({opacity:0})),Ub("active",zb({opacity:1})),Ub("removed",zb({opacity:0})),YD("inactive => active",ZD("{{ easeTime }}ms {{ easing }}")),YD("active => removed",ZD("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})()},IN=(n={})=>ma([{provide:QD,useValue:{default:kN,config:n}}]);let tT=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[IN(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Cr({})}return n})(),KN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({})}return n})();Oe(624);class QN extends k{constructor(i,t){super()}schedule(i,t=0){return this}}const qy={setInterval(n,i,...t){const{delegate:r}=qy;return r?.setInterval?r.setInterval(n,i,...t):setInterval(n,i,...t)},clearInterval(n){const{delegate:i}=qy;return(i?.clearInterval||clearInterval)(n)},delegate:void 0},lT={now:()=>(lT.delegate||Date).now(),delegate:void 0};class Z0{constructor(i,t=Z0.now){this.schedulerActionCtor=i,this.now=t}schedule(i,t=0,r){return new this.schedulerActionCtor(this,i).schedule(r,t)}}Z0.now=lT.now,new class t7 extends Z0{constructor(i,t=Z0.now){super(i,t),this.actions=[],this._active=!1}flush(i){const{actions:t}=this;if(this._active)return void t.push(i);let r;this._active=!0;do{if(r=i.execute(i.state,i.delay))break}while(i=t.shift());if(this._active=!1,r){for(;i=t.shift();)i.unsubscribe();throw r}}}(class e7 extends QN{constructor(i,t){super(i,t),this.scheduler=i,this.work=t,this.pending=!1}schedule(i,t=0){var r;if(this.closed)return this;this.state=i;const o=this.id,h=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(h,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(h,this.id,t),this}requestAsyncId(i,t,r=0){return qy.setInterval(i.flush.bind(i,this),r)}recycleAsyncId(i,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&qy.clearInterval(t)}execute(i,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(i,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,t){let o,r=!1;try{this.work(i)}catch(h){r=!0,o=h||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:i,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,y(r,this),null!=i&&(this.id=this.recycleAsyncId(t,i,null)),this.delay=null,super.unsubscribe()}}});let w7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Cr({})}return n})();var mT=Oe(668),C7=Oe.t(mT,2);Oe(365),function E7(){return typeof window>"u"}()||function A7(n,i,t){n[i]=t}(C7,"verbosity",mT.VerbosityLevel.INFOS);let T7=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Cr({})}return n})(),M7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n,bootstrap:[B8]});static#n=this.\u0275inj=Cr({imports:[v5,N8,GD,KN,w7,tT,I_,t8,T7,cN,pb,GD,tT.forRoot()]})}return n})();m5().bootstrapModule(M7).catch(n=>console.error(n))},668:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(156).default,he,Oe;he=globalThis,Oe=()=>(()=>{"use strict";var __webpack_modules__=[,(yt,he)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.VerbosityLevel=he.Util=he.UnknownErrorException=he.UnexpectedResponseException=he.TextRenderingMode=he.RenderingIntentFlag=he.PromiseCapability=he.PermissionFlag=he.PasswordResponses=he.PasswordException=he.PageActionEventType=he.OPS=he.MissingPDFException=he.MAX_IMAGE_SIZE_TO_CACHE=he.LINE_FACTOR=he.LINE_DESCENT_FACTOR=he.InvalidPDFException=he.ImageKind=he.IDENTITY_MATRIX=he.FormatError=he.FeatureTest=he.FONT_IDENTITY_MATRIX=he.DocumentActionEventType=he.CMapCompressionType=he.BaseException=he.BASELINE_FACTOR=he.AnnotationType=he.AnnotationReplyType=he.AnnotationPrefix=he.AnnotationMode=he.AnnotationFlag=he.AnnotationFieldFlag=he.AnnotationEditorType=he.AnnotationEditorPrefix=he.AnnotationEditorParamsType=he.AnnotationBorderStyleType=he.AnnotationActionEventType=he.AbortException=void 0,he.assert=function m(Ge,Ze){Ge||p(Ze)},he.bytesToString=ce,he.createValidAbsoluteUrl=function R(Ge,Ze=null,je=null){if(!Ge)return null;try{if(je&&"string"==typeof Ge&&(je.addDefaultProtocol&&Ge.startsWith("www.")&&Ge.match(/\./g)?.length>=2&&(Ge=`http://${Ge}`),je.tryConvertEncoding))try{Ge=Xe(Ge)}catch{}const Ue=Ze?new URL(Ge,Ze):new URL(Ge);if(function _(Ge){switch(Ge?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Ue))return Ue}catch{}return null},he.getModificationDate=function He(Ge=new Date){return[Ge.getUTCFullYear().toString(),(Ge.getUTCMonth()+1).toString().padStart(2,"0"),Ge.getUTCDate().toString().padStart(2,"0"),Ge.getUTCHours().toString().padStart(2,"0"),Ge.getUTCMinutes().toString().padStart(2,"0"),Ge.getUTCSeconds().toString().padStart(2,"0")].join("")},he.getUuid=function et(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const Ge=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(Ge);else for(let Ze=0;Ze<32;Ze++)Ge[Ze]=Math.floor(255*Math.random());return ce(Ge)},he.getVerbosityLevel=function j(){return F},he.info=function E(Ge){F>=b.INFOS&&console.log(`Info: ${Ge}`)},he.isArrayBuffer=function Ye(Ge){return"object"==typeof Ge&&void 0!==Ge?.byteLength},he.isArrayEqual=function Je(Ge,Ze){if(Ge.length!==Ze.length)return!1;for(let je=0,Ue=Ge.length;je<Ue;je++)if(Ge[je]!==Ze[je])return!1;return!0},he.isNodeJS=void 0,he.normalizeUnicode=function Dt(Ge){return dt||(dt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pt=new Map([["\ufb05","\u017ft"]])),Ge.replaceAll(dt,(Ze,je,Ue)=>je?je.normalize("NFKC"):pt.get(Ue))},he.objectFromMap=function _e(Ge){const Ze=Object.create(null);for(const[je,Ue]of Ge)Ze[je]=Ue;return Ze},he.objectSize=function Te(Ge){return Object.keys(Ge).length},he.setVerbosityLevel=function I(Ge){Number.isInteger(Ge)&&(F=Ge)},he.shadow=G,he.string32=function ye(Ge){return String.fromCharCode(Ge>>24&255,Ge>>16&255,Ge>>8&255,255&Ge)},he.stringToBytes=pe,he.stringToPDFString=function We(Ge){if(Ge[0]>="\xef"){let je;if("\xfe"===Ge[0]&&"\xff"===Ge[1]?je="utf-16be":"\xff"===Ge[0]&&"\xfe"===Ge[1]?je="utf-16le":"\xef"===Ge[0]&&"\xbb"===Ge[1]&&"\xbf"===Ge[2]&&(je="utf-8"),je)try{const Ue=new TextDecoder(je,{fatal:!0}),ct=pe(Ge);return Ue.decode(ct)}catch(Ue){x(`stringToPDFString: "${Ue}".`)}}const Ze=[];for(let je=0,Ue=Ge.length;je<Ue;je++){const ct=Ne[Ge.charCodeAt(je)];Ze.push(ct?String.fromCharCode(ct):Ge.charAt(je))}return Ze.join("")},he.stringToUTF8String=Xe,he.unreachable=p,he.utf8StringToString=function Qe(Ge){return unescape(encodeURIComponent(Ge))},he.warn=x;const Oe=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);he.isNodeJS=Oe,he.IDENTITY_MATRIX=[1,0,0,1,0,0],he.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],he.MAX_IMAGE_SIZE_TO_CACHE=1e7,he.LINE_FACTOR=1.35,he.LINE_DESCENT_FACTOR=.35,he.BASELINE_FACTOR=.25925925925925924,he.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},he.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},he.AnnotationEditorPrefix="pdfjs_internal_editor_",he.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},he.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},he.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},he.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},he.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},he.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},he.AnnotationReplyType={GROUP:"Group",REPLY:"R"},he.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},he.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},he.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},he.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},he.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},he.PageActionEventType={O:"PageOpen",C:"PageClose"};const b={ERRORS:0,WARNINGS:1,INFOS:5};he.VerbosityLevel=b,he.CMapCompressionType={NONE:0,BINARY:1},he.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},he.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let F=b.WARNINGS;function x(Ge){F>=b.WARNINGS&&console.log(`Warning: ${Ge}`)}function p(Ge){throw new Error(Ge)}function G(Ge,Ze,je,Ue=!1){return Object.defineProperty(Ge,Ze,{value:je,enumerable:!Ue,configurable:!0,writable:!1}),je}const K=function(){function Ze(je,Ue){this.constructor===Ze&&p("Cannot initialize BaseException."),this.message=je,this.name=Ue}return Ze.prototype=new Error,Ze.constructor=Ze,Ze}();function ce(Ge){("object"!=typeof Ge||void 0===Ge?.length)&&p("Invalid argument for bytesToString");const Ze=Ge.length;if(Ze<8192)return String.fromCharCode.apply(null,Ge);const Ue=[];for(let ct=0;ct<Ze;ct+=8192){const _t=Math.min(ct+8192,Ze),Ut=Ge.subarray(ct,_t);Ue.push(String.fromCharCode.apply(null,Ut))}return Ue.join("")}function pe(Ge){"string"!=typeof Ge&&p("Invalid argument for stringToBytes");const Ze=Ge.length,je=new Uint8Array(Ze);for(let Ue=0;Ue<Ze;++Ue)je[Ue]=255&Ge.charCodeAt(Ue);return je}he.BaseException=K,he.PasswordException=class U extends K{constructor(Ze,je){super(Ze,"PasswordException"),this.code=je}},he.UnknownErrorException=class z extends K{constructor(Ze,je){super(Ze,"UnknownErrorException"),this.details=je}},he.InvalidPDFException=class L extends K{constructor(Ze){super(Ze,"InvalidPDFException")}},he.MissingPDFException=class S extends K{constructor(Ze){super(Ze,"MissingPDFException")}},he.UnexpectedResponseException=class B extends K{constructor(Ze,je){super(Ze,"UnexpectedResponseException"),this.status=je}},he.FormatError=class J extends K{constructor(Ze){super(Ze,"FormatError")}},he.AbortException=class ie extends K{constructor(Ze){super(Ze,"AbortException")}},he.FeatureTest=class xe{static get isLittleEndian(){return G(this,"isLittleEndian",function we(){const Ge=new Uint8Array(4);return Ge[0]=1,1===new Uint32Array(Ge.buffer,0,1)[0]}())}static get isEvalSupported(){return G(this,"isEvalSupported",function De(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return G(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?G(this,"platform",{isWin:!1,isMac:!1}):G(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return G(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const Ce=[...Array(256).keys()].map(Ge=>Ge.toString(16).padStart(2,"0"));he.Util=class Me{static makeHexColor(Ze,je,Ue){return`#${Ce[Ze]}${Ce[je]}${Ce[Ue]}`}static scaleMinMax(Ze,je){let Ue;Ze[0]?(Ze[0]<0&&(Ue=je[0],je[0]=je[1],je[1]=Ue),je[0]*=Ze[0],je[1]*=Ze[0],Ze[3]<0&&(Ue=je[2],je[2]=je[3],je[3]=Ue),je[2]*=Ze[3],je[3]*=Ze[3]):(Ue=je[0],je[0]=je[2],je[2]=Ue,Ue=je[1],je[1]=je[3],je[3]=Ue,Ze[1]<0&&(Ue=je[2],je[2]=je[3],je[3]=Ue),je[2]*=Ze[1],je[3]*=Ze[1],Ze[2]<0&&(Ue=je[0],je[0]=je[1],je[1]=Ue),je[0]*=Ze[2],je[1]*=Ze[2]),je[0]+=Ze[4],je[1]+=Ze[4],je[2]+=Ze[5],je[3]+=Ze[5]}static transform(Ze,je){return[Ze[0]*je[0]+Ze[2]*je[1],Ze[1]*je[0]+Ze[3]*je[1],Ze[0]*je[2]+Ze[2]*je[3],Ze[1]*je[2]+Ze[3]*je[3],Ze[0]*je[4]+Ze[2]*je[5]+Ze[4],Ze[1]*je[4]+Ze[3]*je[5]+Ze[5]]}static applyTransform(Ze,je){return[Ze[0]*je[0]+Ze[1]*je[2]+je[4],Ze[0]*je[1]+Ze[1]*je[3]+je[5]]}static applyInverseTransform(Ze,je){const Ue=je[0]*je[3]-je[1]*je[2];return[(Ze[0]*je[3]-Ze[1]*je[2]+je[2]*je[5]-je[4]*je[3])/Ue,(-Ze[0]*je[1]+Ze[1]*je[0]+je[4]*je[1]-je[5]*je[0])/Ue]}static getAxialAlignedBoundingBox(Ze,je){const Ue=this.applyTransform(Ze,je),ct=this.applyTransform(Ze.slice(2,4),je),_t=this.applyTransform([Ze[0],Ze[3]],je),Ut=this.applyTransform([Ze[2],Ze[1]],je);return[Math.min(Ue[0],ct[0],_t[0],Ut[0]),Math.min(Ue[1],ct[1],_t[1],Ut[1]),Math.max(Ue[0],ct[0],_t[0],Ut[0]),Math.max(Ue[1],ct[1],_t[1],Ut[1])]}static inverseTransform(Ze){const je=Ze[0]*Ze[3]-Ze[1]*Ze[2];return[Ze[3]/je,-Ze[1]/je,-Ze[2]/je,Ze[0]/je,(Ze[2]*Ze[5]-Ze[4]*Ze[3])/je,(Ze[4]*Ze[1]-Ze[5]*Ze[0])/je]}static singularValueDecompose2dScale(Ze){const je=[Ze[0],Ze[2],Ze[1],Ze[3]],Ue=Ze[0]*je[0]+Ze[1]*je[2],Ut=Ze[2]*je[1]+Ze[3]*je[3],jt=(Ue+Ut)/2,rt=Math.sqrt((Ue+Ut)**2-4*(Ue*Ut-(Ze[2]*je[0]+Ze[3]*je[2])*(Ze[0]*je[1]+Ze[1]*je[3])))/2,Fe=jt-rt||1;return[Math.sqrt(jt+rt||1),Math.sqrt(Fe)]}static normalizeRect(Ze){const je=Ze.slice(0);return Ze[0]>Ze[2]&&(je[0]=Ze[2],je[2]=Ze[0]),Ze[1]>Ze[3]&&(je[1]=Ze[3],je[3]=Ze[1]),je}static intersect(Ze,je){const Ue=Math.max(Math.min(Ze[0],Ze[2]),Math.min(je[0],je[2])),ct=Math.min(Math.max(Ze[0],Ze[2]),Math.max(je[0],je[2]));if(Ue>ct)return null;const _t=Math.max(Math.min(Ze[1],Ze[3]),Math.min(je[1],je[3])),Ut=Math.min(Math.max(Ze[1],Ze[3]),Math.max(je[1],je[3]));return _t>Ut?null:[Ue,_t,ct,Ut]}static bezierBoundingBox(Ze,je,Ue,ct,_t,Ut,jt,rt){const Pe=[],Fe=[[],[]];let $e,at,lt,bt,Et,mt,kt,Lt;for(let un=0;un<2;++un)if(0===un?(at=6*Ze-12*Ue+6*_t,$e=-3*Ze+9*Ue-9*_t+3*jt,lt=3*Ue-3*Ze):(at=6*je-12*ct+6*Ut,$e=-3*je+9*ct-9*Ut+3*rt,lt=3*ct-3*je),Math.abs($e)<1e-12){if(Math.abs(at)<1e-12)continue;bt=-lt/at,0<bt&&bt<1&&Pe.push(bt)}else kt=at*at-4*lt*$e,Lt=Math.sqrt(kt),!(kt<0)&&(Et=(-at+Lt)/(2*$e),0<Et&&Et<1&&Pe.push(Et),mt=(-at-Lt)/(2*$e),0<mt&&mt<1&&Pe.push(mt));let Gt,It=Pe.length;const rn=It;for(;It--;)bt=Pe[It],Gt=1-bt,Fe[0][It]=Gt*Gt*Gt*Ze+3*Gt*Gt*bt*Ue+3*Gt*bt*bt*_t+bt*bt*bt*jt,Fe[1][It]=Gt*Gt*Gt*je+3*Gt*Gt*bt*ct+3*Gt*bt*bt*Ut+bt*bt*bt*rt;return Fe[0][rn]=Ze,Fe[1][rn]=je,Fe[0][rn+1]=jt,Fe[1][rn+1]=rt,Fe[0].length=Fe[1].length=rn+2,[Math.min(...Fe[0]),Math.min(...Fe[1]),Math.max(...Fe[0]),Math.max(...Fe[1])]}};const Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Xe(Ge){return decodeURIComponent(escape(Ge))}he.PromiseCapability=class it{#e=!1;constructor(){this.promise=new Promise((Ze,je)=>{this.resolve=Ue=>{this.#e=!0,Ze(Ue)},this.reject=Ue=>{this.#e=!0,je(Ue)}})}get settled(){return this.#e}};let dt=null,pt=null;he.AnnotationPrefix="pdfjs_internal_id_"},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(yt){if("string"==typeof yt||yt instanceof URL?yt={url:yt}:(0,_util.isArrayBuffer)(yt)&&(yt={data:yt}),"object"!=typeof yt)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!yt.url&&!yt.data&&!yt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const he=new PDFDocumentLoadingTask,{docId:Oe}=he,le=yt.url?getUrlProp(yt.url):null,Ee=yt.data?getDataProp(yt.data):null,se=yt.httpHeaders||null,y=!0===yt.withCredentials,k=yt.password??null,fe=yt.range instanceof PDFDataRangeTransport?yt.range:null,ee=Number.isInteger(yt.rangeChunkSize)&&yt.rangeChunkSize>0?yt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let e=yt.worker instanceof PDFWorker?yt.worker:null;const V=yt.verbosity,H="string"!=typeof yt.docBaseUrl||(0,_display_utils.isDataScheme)(yt.docBaseUrl)?null:yt.docBaseUrl,te="string"==typeof yt.cMapUrl?yt.cMapUrl:null,re=!1!==yt.cMapPacked,f=yt.CMapReaderFactory||DefaultCMapReaderFactory,c="string"==typeof yt.standardFontDataUrl?yt.standardFontDataUrl:null,$=yt.StandardFontDataFactory||DefaultStandardFontDataFactory,ae=!0!==yt.stopAtErrors,oe=Number.isInteger(yt.maxImageSize)&&yt.maxImageSize>-1?yt.maxImageSize:-1,W=!1!==yt.isEvalSupported,N="boolean"==typeof yt.isOffscreenCanvasSupported?yt.isOffscreenCanvasSupported:!_util.isNodeJS,O=Number.isInteger(yt.canvasMaxAreaInBytes)?yt.canvasMaxAreaInBytes:-1,M="boolean"==typeof yt.disableFontFace?yt.disableFontFace:_util.isNodeJS,A=!0===yt.fontExtraProperties,b=!0===yt.enableXfa,q=yt.ownerDocument||globalThis.document,C=!0===yt.disableRange,P=!0===yt.disableStream,F=!0===yt.disableAutoFetch,I=!0===yt.pdfBug,j=fe?fe.length:yt.length??NaN,E="boolean"==typeof yt.useSystemFonts?yt.useSystemFonts:!_util.isNodeJS&&!M,x="boolean"==typeof yt.useWorkerFetch?yt.useWorkerFetch:f===_display_utils.DOMCMapReaderFactory&&$===_display_utils.DOMStandardFontDataFactory&&te&&c&&(0,_display_utils.isValidFetchUrl)(te,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(c,document.baseURI),p=yt.canvasFactory||new DefaultCanvasFactory({ownerDocument:q}),m=yt.filterFactory||new DefaultFilterFactory({docId:Oe,ownerDocument:q});(0,_util.setVerbosityLevel)(V);const R={canvasFactory:p,filterFactory:m};if(x||(R.cMapReaderFactory=new f({baseUrl:te,isCompressed:re}),R.standardFontDataFactory=new $({baseUrl:c})),!e){const U={verbosity:V,port:_worker_options.GlobalWorkerOptions.workerPort};e=U.port?PDFWorker.fromPort(U):new PDFWorker(U),he._worker=e}const G={docId:Oe,apiVersion:"3.11.174",data:Ee,password:k,disableAutoFetch:F,rangeChunkSize:ee,length:j,docBaseUrl:H,enableXfa:b,evaluatorOptions:{maxImageSize:oe,disableFontFace:M,ignoreErrors:ae,isEvalSupported:W,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:O,fontExtraProperties:A,useSystemFonts:E,cMapUrl:x?te:null,standardFontDataUrl:x?c:null}},K={ignoreErrors:ae,isEvalSupported:W,disableFontFace:M,fontExtraProperties:A,enableXfa:b,ownerDocument:q,disableAutoFetch:F,pdfBug:I,styleElement:null};return e.promise.then(function(){if(he.destroyed)throw new Error("Loading aborted");const U=_fetchDocument(e,G),z=new Promise(function(L){let S;var J;fe?S=new _transport_stream.PDFDataTransportStream({length:j,initialData:fe.initialData,progressiveDone:fe.progressiveDone,contentDispositionFilename:fe.contentDispositionFilename,disableRange:C,disableStream:P},fe):Ee||(J={url:le,length:j,httpHeaders:se,withCredentials:y,rangeChunkSize:ee,disableRange:C,disableStream:P},S=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(J):(0,_display_utils.isValidFetchUrl)(J.url)?new _displayFetch_stream.PDFFetchStream(J):new _displayNetwork.PDFNetworkStream(J)),L(S)});return Promise.all([U,z]).then(function([L,S]){if(he.destroyed)throw new Error("Loading aborted");const B=new _message_handler.MessageHandler(Oe,L,e.port),J=new WorkerTransport(B,he,S,K,R);he._transport=J,B.send("Ready",null)})}).catch(he._capability.reject),he}function _fetchDocument(yt,he){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(yt,he){if(yt.destroyed)throw new Error("Worker was destroyed");const Oe=yield yt.messageHandler.sendWithPromise("GetDocRequest",he,he.data?[he.data.buffer]:null);if(yt.destroyed)throw new Error("Worker was destroyed");return Oe})).apply(this,arguments)}function getUrlProp(yt){if(yt instanceof URL)return yt.href;try{return new URL(yt,window.location).href}catch{if(_util.isNodeJS&&"string"==typeof yt)return yt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(yt){if(_util.isNodeJS&&typeof Buffer<"u"&&yt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(yt instanceof Uint8Array&&yt.byteLength===yt.buffer.byteLength)return yt;if("string"==typeof yt)return(0,_util.stringToBytes)(yt);if("object"==typeof yt&&!isNaN(yt?.length)||(0,_util.isArrayBuffer)(yt))return new Uint8Array(yt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var he=this;return _asyncToGenerator(function*(){he.destroyed=!0;try{he._worker?.port&&(he._worker._pendingDestroy=!0),yield he._transport?.destroy()}catch(Oe){throw he._worker?.port&&delete he._worker._pendingDestroy,Oe}he._transport=null,he._worker&&(he._worker.destroy(),he._worker=null)})()}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(he,Oe,le=!1,Ee=null){this.length=he,this.initialData=Oe,this.progressiveDone=le,this.contentDispositionFilename=Ee,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(he){this._rangeListeners.push(he)}addProgressListener(he){this._progressListeners.push(he)}addProgressiveReadListener(he){this._progressiveReadListeners.push(he)}addProgressiveDoneListener(he){this._progressiveDoneListeners.push(he)}onDataRange(he,Oe){for(const le of this._rangeListeners)le(he,Oe)}onDataProgress(he,Oe){this._readyCapability.promise.then(()=>{for(const le of this._progressListeners)le(he,Oe)})}onDataProgressiveRead(he){this._readyCapability.promise.then(()=>{for(const Oe of this._progressiveReadListeners)Oe(he)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const he of this._progressiveDoneListeners)he()})}transportReady(){this._readyCapability.resolve()}requestDataRange(he,Oe){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(he,Oe){this._pdfInfo=he,this._transport=Oe,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(le=>{if(!le)return le;const Ee=[];for(const se in le)Ee.push(...le[se]);return Ee}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(he){return this._transport.getPage(he)}getPageIndex(he){return this._transport.getPageIndex(he)}getDestinations(){return this._transport.getDestinations()}getDestination(he){return this._transport.getDestination(he)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(he=!1){return this._transport.startCleanup(he||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(he,Oe,le,Ee=!1){this._pageIndex=he,this._pageInfo=Oe,this._transport=le,this._stats=Ee?new _display_utils.StatTimer:null,this._pdfBug=Ee,this.commonObjs=le.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:he,rotation:Oe=this.rotate,offsetX:le=0,offsetY:Ee=0,dontFlip:se=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:he,rotation:Oe,offsetX:le,offsetY:Ee,dontFlip:se})}getAnnotations({intent:he="display"}={}){const Oe=this._transport.getRenderingIntent(he);return this._transport.getAnnotations(this._pageIndex,Oe.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var he=this;return _asyncToGenerator(function*(){return he._transport._htmlForXfa?.children[he._pageIndex]||null})()}render({canvasContext:he,viewport:Oe,intent:le="display",annotationMode:Ee=_util.AnnotationMode.ENABLE,transform:se=null,background:y=null,optionalContentConfigPromise:k=null,annotationCanvasMap:fe=null,pageColors:ee=null,printAnnotationStorage:e=null}){this._stats?.time("Overall");const V=this._transport.getRenderingIntent(le,Ee,e);this.#t=!1,this.#i(),k||(k=this._transport.getOptionalContentConfig());let H=this._intentStates.get(V.cacheKey);H||(H=Object.create(null),this._intentStates.set(V.cacheKey,H)),H.streamReaderCancelTimeout&&(clearTimeout(H.streamReaderCancelTimeout),H.streamReaderCancelTimeout=null);const te=!!(V.renderingIntent&_util.RenderingIntentFlag.PRINT);H.displayReadyCapability||(H.displayReadyCapability=new _util.PromiseCapability,H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(V));const re=$=>{H.renderTasks.delete(f),(this._maybeCleanupAfterRender||te)&&(this.#t=!0),this.#n(!te),$?(f.capability.reject($),this._abortOperatorList({intentState:H,reason:$ instanceof Error?$:new Error($)})):f.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},f=new InternalRenderTask({callback:re,params:{canvasContext:he,viewport:Oe,transform:se,background:y},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:fe,operatorList:H.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!te,pdfBug:this._pdfBug,pageColors:ee});(H.renderTasks||=new Set).add(f);const c=f.task;return Promise.all([H.displayReadyCapability.promise,k]).then(([$,ae])=>{this.destroyed?re():(this._stats?.time("Rendering"),f.initializeGraphics({transparency:$,optionalContentConfig:ae}),f.operatorListChanged())}).catch(re),c}getOperatorList({intent:he="display",annotationMode:Oe=_util.AnnotationMode.ENABLE,printAnnotationStorage:le=null}={}){const se=this._transport.getRenderingIntent(he,Oe,le,!0);let k,y=this._intentStates.get(se.cacheKey);return y||(y=Object.create(null),this._intentStates.set(se.cacheKey,y)),y.opListReadCapability||(k=Object.create(null),k.operatorListChanged=function Ee(){y.operatorList.lastChunk&&(y.opListReadCapability.resolve(y.operatorList),y.renderTasks.delete(k))},y.opListReadCapability=new _util.PromiseCapability,(y.renderTasks||=new Set).add(k),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(se)),y.opListReadCapability.promise}streamTextContent({includeMarkedContent:he=!1,disableNormalization:Oe=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===he,disableNormalization:!0===Oe},{highWaterMark:100,size:Ee=>Ee.items.length})}getTextContent(he={}){if(this._transport._htmlForXfa)return this.getXfa().then(le=>_xfa_text.XfaText.textContent(le));const Oe=this.streamTextContent(he);return new Promise(function(le,Ee){const y=Oe.getReader(),k={items:[],styles:Object.create(null)};!function se(){y.read().then(function({value:fe,done:ee}){ee?le(k):(Object.assign(k.styles,fe.styles),k.items.push(...fe.items),se())},Ee)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const he=[];for(const Oe of this._intentStates.values())if(this._abortOperatorList({intentState:Oe,reason:new Error("Page was destroyed."),force:!0}),!Oe.opListReadCapability)for(const le of Oe.renderTasks)he.push(le.completed),le.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(he)}cleanup(he=!1){this.#t=!0;const Oe=this.#n(!1);return he&&Oe&&(this._stats&&=new _display_utils.StatTimer),Oe}#n(he=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(he)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:Oe,operatorList:le}of this._intentStates.values())if(Oe.size>0||!le.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(he,Oe){const le=this._intentStates.get(Oe);le&&(this._stats?.timeEnd("Page Request"),le.displayReadyCapability?.resolve(he))}_renderPageChunk(he,Oe){for(let le=0,Ee=he.length;le<Ee;le++)Oe.operatorList.fnArray.push(he.fnArray[le]),Oe.operatorList.argsArray.push(he.argsArray[le]);Oe.operatorList.lastChunk=he.lastChunk,Oe.operatorList.separateAnnots=he.separateAnnots;for(const le of Oe.renderTasks)le.operatorListChanged();he.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:he,cacheKey:Oe,annotationStorageSerializable:le}){const{map:Ee,transfers:se}=le,k=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:he,cacheKey:Oe,annotationStorage:Ee},se).getReader(),fe=this._intentStates.get(Oe);fe.streamReader=k;const ee=()=>{k.read().then(({value:e,done:V})=>{V?fe.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,fe),ee())},e=>{if(fe.streamReader=null,!this._transport.destroyed){if(fe.operatorList){fe.operatorList.lastChunk=!0;for(const V of fe.renderTasks)V.operatorListChanged();this.#n(!0)}if(fe.displayReadyCapability)fe.displayReadyCapability.reject(e);else{if(!fe.opListReadCapability)throw e;fe.opListReadCapability.reject(e)}}})};ee()}_abortOperatorList({intentState:he,reason:Oe,force:le=!1}){if(he.streamReader){if(he.streamReaderCancelTimeout&&(clearTimeout(he.streamReaderCancelTimeout),he.streamReaderCancelTimeout=null),!le){if(he.renderTasks.size>0)return;if(Oe instanceof _display_utils.RenderingCancelledException){let Ee=RENDERING_CANCELLED_TIMEOUT;return Oe.extraDelay>0&&Oe.extraDelay<1e3&&(Ee+=Oe.extraDelay),void(he.streamReaderCancelTimeout=setTimeout(()=>{he.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:he,reason:Oe,force:!0})},Ee))}}if(he.streamReader.cancel(new _util.AbortException(Oe.message)).catch(()=>{}),he.streamReader=null,!this._transport.destroyed){for(const[Ee,se]of this._intentStates)if(se===he){this._intentStates.delete(Ee);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(he,Oe){const le={data:structuredClone(he,Oe?{transfer:Oe}:null)};this.#t.then(()=>{for(const Ee of this.#e)Ee.call(this,le)})}addEventListener(he,Oe){this.#e.add(Oe)}removeEventListener(he,Oe){this.#e.delete(Oe)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const yt=document?.currentScript?.src;yt&&(PDFWorkerUtil.fallbackWorkerSrc=yt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(yt,he){let Oe;try{if(Oe=new URL(yt),!Oe.origin||"null"===Oe.origin)return!1}catch{return!1}const le=new URL(he,Oe);return Oe.origin===le.origin},PDFWorkerUtil.createCDNWrapper=function(yt){return URL.createObjectURL(new Blob([`importScripts("${yt}");`]))};class PDFWorker{static#workerPorts;constructor({name:yt=null,port:he=null,verbosity:Oe=(0,_util.getVerbosityLevel)()}={}){if(this.name=yt,this.destroyed=!1,this.verbosity=Oe,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,he){if(PDFWorker.#workerPorts?.has(he))throw new Error("Cannot use more than one PDFWorker per port.");return(PDFWorker.#workerPorts||=new WeakMap).set(he,this),void this._initializeFromPort(he)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(yt){this._port=yt,this._messageHandler=new _message_handler.MessageHandler("main","worker",yt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:yt}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,yt)||(yt=PDFWorkerUtil.createCDNWrapper(new URL(yt,window.location).href));const he=new Worker(yt),Oe=new _message_handler.MessageHandler("main","worker",he),le=()=>{he.removeEventListener("error",Ee),Oe.destroy(),he.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Ee=()=>{this._webWorker||le()};he.addEventListener("error",Ee),Oe.on("test",y=>{he.removeEventListener("error",Ee),this.destroyed?le():y?(this._messageHandler=Oe,this._port=he,this._webWorker=he,this._readyCapability.resolve(),Oe.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Oe.destroy(),he.terminate())}),Oe.on("ready",y=>{if(he.removeEventListener("error",Ee),this.destroyed)le();else try{se()}catch{this._setupFakeWorker()}});const se=()=>{const y=new Uint8Array;Oe.send("test",y,[y.buffer])};return void se()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(yt=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const he=new LoopbackPort;this._port=he;const Oe="fake"+PDFWorkerUtil.fakeWorkerId++,le=new _message_handler.MessageHandler(Oe+"_worker",Oe,he);yt.setup(le,he);const Ee=new _message_handler.MessageHandler(Oe,Oe+"_worker",he);this._messageHandler=Ee,this._readyCapability.resolve(),Ee.send("configure",{verbosity:this.verbosity})}).catch(yt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${yt.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(yt){if(!yt?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const he=this.#workerPorts?.get(yt.port);if(he){if(he._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return he}return new PDFWorker(yt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this3=this;const loader=function(){var _ref=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this3._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS){const worker=eval("require")(_this3.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this3.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function yt(){return _ref.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#i=null;constructor(he,Oe,le,Ee,se){this.messageHandler=he,this.loadingTask=Oe,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Ee.ownerDocument,styleElement:Ee.styleElement}),this._params=Ee,this.canvasFactory=se.canvasFactory,this.filterFactory=se.filterFactory,this.cMapReaderFactory=se.cMapReaderFactory,this.standardFontDataFactory=se.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=le,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(he,Oe=null){const le=this.#e.get(he);if(le)return le;const Ee=this.messageHandler.sendWithPromise(he,Oe);return this.#e.set(he,Ee),Ee}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(he,Oe=_util.AnnotationMode.ENABLE,le=null,Ee=!1){let se=_util.RenderingIntentFlag.DISPLAY,y=_annotation_storage.SerializableEmpty;switch(he){case"any":se=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":se=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${he}`)}switch(Oe){case _util.AnnotationMode.DISABLE:se+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:se+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:se+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,y=(se&_util.RenderingIntentFlag.PRINT&&le instanceof _annotation_storage.PrintAnnotationStorage?le:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Oe}`)}return Ee&&(se+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:se,cacheKey:`${se}_${y.hash}`,annotationStorageSerializable:y}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const he=[];for(const le of this.#t.values())he.push(le._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Oe=this.messageHandler.sendWithPromise("Terminate",null);return he.push(Oe),Promise.all(he).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:he,loadingTask:Oe}=this;he.on("GetReader",(le,Ee)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=se=>{this._lastProgress={loaded:se.loaded,total:se.total}},Ee.onPull=()=>{this._fullReader.read().then(function({value:se,done:y}){y?Ee.close():((0,_util.assert)(se instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Ee.enqueue(new Uint8Array(se),1,[se]))}).catch(se=>{Ee.error(se)})},Ee.onCancel=se=>{this._fullReader.cancel(se),Ee.ready.catch(y=>{if(!this.destroyed)throw y})}}),he.on("ReaderHeadersReady",le=>{const Ee=new _util.PromiseCapability,se=this._fullReader;return se.headersReady.then(()=>{(!se.isStreamingSupported||!se.isRangeSupported)&&(this._lastProgress&&Oe.onProgress?.(this._lastProgress),se.onProgress=y=>{Oe.onProgress?.({loaded:y.loaded,total:y.total})}),Ee.resolve({isStreamingSupported:se.isStreamingSupported,isRangeSupported:se.isRangeSupported,contentLength:se.contentLength})},Ee.reject),Ee.promise}),he.on("GetRangeReader",(le,Ee)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const se=this._networkStream.getRangeReader(le.begin,le.end);se?(Ee.onPull=()=>{se.read().then(function({value:y,done:k}){k?Ee.close():((0,_util.assert)(y instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Ee.enqueue(new Uint8Array(y),1,[y]))}).catch(y=>{Ee.error(y)})},Ee.onCancel=y=>{se.cancel(y),Ee.ready.catch(k=>{if(!this.destroyed)throw k})}):Ee.close()}),he.on("GetDoc",({pdfInfo:le})=>{this._numPages=le.numPages,this._htmlForXfa=le.htmlForXfa,delete le.htmlForXfa,Oe._capability.resolve(new PDFDocumentProxy(le,this))}),he.on("DocException",function(le){let Ee;switch(le.name){case"PasswordException":Ee=new _util.PasswordException(le.message,le.code);break;case"InvalidPDFException":Ee=new _util.InvalidPDFException(le.message);break;case"MissingPDFException":Ee=new _util.MissingPDFException(le.message);break;case"UnexpectedResponseException":Ee=new _util.UnexpectedResponseException(le.message,le.status);break;case"UnknownErrorException":Ee=new _util.UnknownErrorException(le.message,le.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Oe._capability.reject(Ee)}),he.on("PasswordRequest",le=>{if(this.#i=new _util.PromiseCapability,Oe.onPassword){const Ee=se=>{se instanceof Error?this.#i.reject(se):this.#i.resolve({password:se})};try{Oe.onPassword(Ee,le.code)}catch(se){this.#i.reject(se)}}else this.#i.reject(new _util.PasswordException(le.message,le.code));return this.#i.promise}),he.on("DataLoaded",le=>{Oe.onProgress?.({loaded:le.length,total:le.length}),this.downloadInfoCapability.resolve(le)}),he.on("StartRenderPage",le=>{this.destroyed||this.#t.get(le.pageIndex)._startRenderPage(le.transparency,le.cacheKey)}),he.on("commonobj",([le,Ee,se])=>{if(!this.destroyed&&!this.commonObjs.has(le))switch(Ee){case"Font":const y=this._params;if("error"in se){const ee=se.error;(0,_util.warn)(`Error during font loading: ${ee}`),this.commonObjs.resolve(le,ee);break}const k=y.pdfBug&&globalThis.FontInspector?.enabled?(ee,e)=>globalThis.FontInspector.fontAdded(ee,e):null,fe=new _font_loader.FontFaceObject(se,{isEvalSupported:y.isEvalSupported,disableFontFace:y.disableFontFace,ignoreErrors:y.ignoreErrors,inspectFont:k});this.fontLoader.bind(fe).catch(ee=>he.sendWithPromise("FontFallback",{id:le})).finally(()=>{!y.fontExtraProperties&&fe.data&&(fe.data=null),this.commonObjs.resolve(le,fe)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(le,se);break;default:throw new Error(`Got unknown common object type ${Ee}`)}}),he.on("obj",([le,Ee,se,y])=>{if(this.destroyed)return;const k=this.#t.get(Ee);if(!k.objs.has(le))switch(se){case"Image":if(k.objs.resolve(le,y),y){let fe;if(y.bitmap){const{width:ee,height:e}=y;fe=ee*e*4}else fe=y.data?.length||0;fe>_util.MAX_IMAGE_SIZE_TO_CACHE&&(k._maybeCleanupAfterRender=!0)}break;case"Pattern":k.objs.resolve(le,y);break;default:throw new Error(`Got unknown object type ${se}`)}}),he.on("DocProgress",le=>{this.destroyed||Oe.onProgress?.({loaded:le.loaded,total:le.total})}),he.on("FetchBuiltInCMap",le=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(le):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),he.on("FetchStandardFontData",le=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(le):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:he,transfers:Oe}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:he,filename:this._fullReader?.filename??null},Oe).finally(()=>{this.annotationStorage.resetModified()})}getPage(he){if(!Number.isInteger(he)||he<=0||he>this._numPages)return Promise.reject(new Error("Invalid page request."));const Oe=he-1,le=this.#n.get(Oe);if(le)return le;const Ee=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Oe}).then(se=>{if(this.destroyed)throw new Error("Transport destroyed");const y=new PDFPageProxy(Oe,se,this,this._params.pdfBug);return this.#t.set(Oe,y),y});return this.#n.set(Oe,Ee),Ee}getPageIndex(he){return"object"!=typeof he||null===he||!Number.isInteger(he.num)||he.num<0||!Number.isInteger(he.gen)||he.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:he.num,gen:he.gen})}getAnnotations(he,Oe){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:he,intent:Oe})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(he){return"string"!=typeof he?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:he})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(he){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:he})}getStructTree(he){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:he})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(he=>new _optional_content_config.OptionalContentConfig(he))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const he="GetMetadata",Oe=this.#e.get(he);if(Oe)return Oe;const le=this.messageHandler.sendWithPromise(he,null).then(Ee=>({info:Ee[0],metadata:Ee[1]?new _metadata.Metadata(Ee[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(he,le),le}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(he=!1){var Oe=this;return _asyncToGenerator(function*(){if(!Oe.destroyed){yield Oe.messageHandler.sendWithPromise("Cleanup",null);for(const le of Oe.#t.values())if(!le.cleanup())throw new Error(`startCleanup: Page ${le.pageNumber} is currently rendering.`);Oe.commonObjs.clear(),he||Oe.fontLoader.clear(),Oe.#e.clear(),Oe.filterFactory.destroy(!0)}})()}get loadingParams(){const{disableAutoFetch:he,enableXfa:Oe}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:he,enableXfa:Oe})}}class PDFObjects{#e=Object.create(null);#t(he){return this.#e[he]||={capability:new _util.PromiseCapability,data:null}}get(he,Oe=null){if(Oe){const Ee=this.#t(he);return Ee.capability.promise.then(()=>Oe(Ee.data)),null}const le=this.#e[he];if(!le?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${he}.`);return le.data}has(he){return this.#e[he]?.capability.settled||!1}resolve(he,Oe=null){const le=this.#t(he);le.data=Oe,le.capability.resolve()}clear(){for(const he in this.#e){const{data:Oe}=this.#e[he];Oe?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(he){this.#e=he,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(he=0){this.#e.cancel(null,he)}get separateAnnots(){const{separateAnnots:he}=this.#e.operatorList;if(!he)return!1;const{annotationCanvasMap:Oe}=this.#e;return he.form||he.canvas&&Oe?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:he,params:Oe,objs:le,commonObjs:Ee,annotationCanvasMap:se,operatorList:y,pageIndex:k,canvasFactory:fe,filterFactory:ee,useRequestAnimationFrame:e=!1,pdfBug:V=!1,pageColors:H=null}){this.callback=he,this.params=Oe,this.objs=le,this.commonObjs=Ee,this.annotationCanvasMap=se,this.operatorListIdx=null,this.operatorList=y,this._pageIndex=k,this.canvasFactory=fe,this.filterFactory=ee,this._pdfBug=V,this.pageColors=H,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===e&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Oe.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:he=!1,optionalContentConfig:Oe}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:le,viewport:Ee,transform:se,background:y}=this.params;this.gfx=new _canvas.CanvasGraphics(le,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Oe},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:se,viewport:Ee,transparency:he,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(he=null,Oe=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(he||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Oe))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var he=this;return _asyncToGenerator(function*(){he.cancelled||(he.operatorListIdx=he.gfx.executeOperatorList(he.operatorList,he.operatorListIdx,he._continueBound,he.stepper),he.operatorListIdx===he.operatorList.argsArray.length&&(he.running=!1,he.operatorList.lastChunk&&(he.gfx.endDrawing(),InternalRenderTask.#e.delete(he._canvas),he.callback())))})()}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.SerializableEmpty=he.PrintAnnotationStorage=he.AnnotationStorage=void 0;var le=Oe(1),Ee=Oe(4),se=Oe(8);const y=Object.freeze({map:null,hash:"",transfers:void 0});he.SerializableEmpty=y;class k{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,V){const H=this.#t.get(e);return void 0===H?V:Object.assign(V,H)}getRawValue(e){return this.#t.get(e)}remove(e){if(this.#t.delete(e),0===this.#t.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const V of this.#t.values())if(V instanceof Ee.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,V){const H=this.#t.get(e);let te=!1;if(void 0!==H)for(const[re,f]of Object.entries(V))H[re]!==f&&(te=!0,H[re]=f);else te=!0,this.#t.set(e,V);te&&this.#n(),V instanceof Ee.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(V.constructor._type)}has(e){return this.#t.has(e)}getAll(){return this.#t.size>0?(0,le.objectFromMap)(this.#t):null}setAll(e){for(const[V,H]of Object.entries(e))this.setValue(V,H)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new fe(this)}get serializable(){if(0===this.#t.size)return y;const e=new Map,V=new se.MurmurHash3_64,H=[],te=Object.create(null);let re=!1;for(const[f,c]of this.#t){const $=c instanceof Ee.AnnotationEditor?c.serialize(!1,te):c;$&&(e.set(f,$),V.update(`${f}:${JSON.stringify($)}`),re||=!!$.bitmap)}if(re)for(const f of e.values())f.bitmap&&H.push(f.bitmap);return e.size>0?{map:e,hash:V.hexdigest(),transfers:H}:y}}he.AnnotationStorage=k;class fe extends k{#e;constructor(e){super();const{map:V,hash:H,transfers:te}=e.serializable,re=structuredClone(V,te?{transfer:te}:null);this.#e={map:re,hash:H,transfers:te}}get print(){(0,le.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}he.PrintAnnotationStorage=fe},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.AnnotationEditor=void 0;var le=Oe(5),Ee=Oe(1),se=Oe(6);class y{#e="";#t=!1;#n=null;#i=null;#o=null;#s=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#r=!1;#u=!1;#h=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#f=!1;#p=y._zIndex++;static _borderLineWidth=-1;static _colorManager=new le.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(ee){this.constructor===y&&(0,Ee.unreachable)("Cannot initialize AnnotationEditor."),this.parent=ee.parent,this.id=ee.id,this.width=this.height=null,this.pageIndex=ee.parent.pageIndex,this.name=ee.name,this.div=null,this._uiManager=ee.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=ee.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:V,pageHeight:H,pageX:te,pageY:re}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[V,H],this.pageTranslation=[te,re];const[f,c]=this.parentDimensions;this.x=ee.x/f,this.y=ee.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,Ee.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(ee){const e=new k({id:ee.parent.getNextId(),parent:ee.parent,uiManager:ee._uiManager});e.annotationElementId=ee.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(ee,e=null){if(y._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(H=>[H,ee.get(H)])),e?.strings)for(const H of e.strings)y._l10nPromise.set(H,ee.get(H));if(-1!==y._borderLineWidth)return;const V=getComputedStyle(document.documentElement);y._borderLineWidth=parseFloat(V.getPropertyValue("--outline-width"))||0}static updateDefaultParams(ee,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(ee){return!1}static paste(ee,e){(0,Ee.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#f}set _isDraggable(ee){this.#f=ee,this.div?.classList.toggle("draggable",ee)}center(){const[ee,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*ee),this.y+=this.width*ee/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*ee),this.y-=this.width*ee/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(ee){this._uiManager.addCommands(ee)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(ee){null!==ee&&(this.pageIndex=ee.pageIndex,this.pageDimensions=ee.pageDimensions),this.parent=ee}focusin(ee){this._focusEventsAllowed&&(this.#r?this.#r=!1:this.parent.setSelected(this))}focusout(ee){!this._focusEventsAllowed||!this.isAttachedToDOM||ee.relatedTarget?.closest(`#${this.id}`)||(ee.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(ee,e,V,H){const[te,re]=this.parentDimensions;[V,H]=this.screenToPageTranslation(V,H),this.x=(ee+V)/te,this.y=(e+H)/re,this.fixAndSetPosition()}#g([ee,e],V,H){[V,H]=this.screenToPageTranslation(V,H),this.x+=V/ee,this.y+=H/e,this.fixAndSetPosition()}translate(ee,e){this.#g(this.parentDimensions,ee,e)}translateInPage(ee,e){this.#g(this.pageDimensions,ee,e),this.div.scrollIntoView({block:"nearest"})}drag(ee,e){const[V,H]=this.parentDimensions;if(this.x+=ee/V,this.y+=e/H,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:$,y:ae}=this.div.getBoundingClientRect();this.parent.findNewParent(this,$,ae)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:te,y:re}=this;const[f,c]=this.#m();te+=f,re+=c,this.div.style.left=`${(100*te).toFixed(2)}%`,this.div.style.top=`${(100*re).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[ee,e]=this.parentDimensions,{_borderLineWidth:V}=y,H=V/ee,te=V/e;switch(this.rotation){case 90:return[-H,te];case 180:return[H,te];case 270:return[H,-te];default:return[-H,-te]}}fixAndSetPosition(){const[ee,e]=this.pageDimensions;let{x:V,y:H,width:te,height:re}=this;switch(te*=ee,re*=e,V*=ee,H*=e,this.rotation){case 0:V=Math.max(0,Math.min(ee-te,V)),H=Math.max(0,Math.min(e-re,H));break;case 90:V=Math.max(0,Math.min(ee-re,V)),H=Math.min(e,Math.max(te,H));break;case 180:V=Math.min(ee,Math.max(te,V)),H=Math.min(e,Math.max(re,H));break;case 270:V=Math.min(ee,Math.max(re,V)),H=Math.max(0,Math.min(e-te,H))}this.x=V/=ee,this.y=H/=e;const[f,c]=this.#m();V+=f,H+=c;const{style:$}=this.div;$.left=`${(100*V).toFixed(2)}%`,$.top=`${(100*H).toFixed(2)}%`,this.moveInDOM()}static#y(ee,e,V){switch(V){case 90:return[e,-ee];case 180:return[-ee,-e];case 270:return[-e,ee];default:return[ee,e]}}screenToPageTranslation(ee,e){return y.#y(ee,e,this.parentRotation)}pageTranslationToScreen(ee,e){return y.#y(ee,e,360-this.parentRotation)}#d(ee){switch(ee){case 90:{const[e,V]=this.pageDimensions;return[0,-e/V,V/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,V]=this.pageDimensions;return[0,e/V,-V/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:ee,pageDimensions:[e,V]}=this,H=e*ee,te=V*ee;return Ee.FeatureTest.isCSSRoundSupported?[Math.round(H),Math.round(te)]:[H,te]}setDims(ee,e){const[V,H]=this.parentDimensions;this.div.style.width=`${(100*ee/V).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*e/H).toFixed(2)}%`),this.#n?.classList.toggle("small",ee<y.SMALL_EDITOR_SIZE||e<y.SMALL_EDITOR_SIZE)}fixDims(){const{style:ee}=this.div,{height:e,width:V}=ee,H=V.endsWith("%"),te=!this.#s&&e.endsWith("%");if(H&&te)return;const[re,f]=this.parentDimensions;H||(ee.width=`${(100*parseFloat(V)/re).toFixed(2)}%`),!this.#s&&!te&&(ee.height=`${(100*parseFloat(e)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const ee=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||ee.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const e of ee){const V=document.createElement("div");this.#a.append(V),V.classList.add("resizer",e),V.addEventListener("pointerdown",this.#S.bind(this,e)),V.addEventListener("contextmenu",se.noContextMenu)}this.div.prepend(this.#a)}#S(ee,e){e.preventDefault();const{isMac:V}=Ee.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&V)return;const H=this.#_.bind(this,ee),te=this._isDraggable;this._isDraggable=!1;const re={passive:!0,capture:!0};window.addEventListener("pointermove",H,re);const f=this.x,c=this.y,$=this.width,ae=this.height,oe=this.parent.div.style.cursor,W=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const N=()=>{this._isDraggable=te,window.removeEventListener("pointerup",N),window.removeEventListener("blur",N),window.removeEventListener("pointermove",H,re),this.parent.div.style.cursor=oe,this.div.style.cursor=W;const O=this.x,M=this.y,A=this.width,b=this.height;O===f&&M===c&&A===$&&b===ae||this.addCommands({cmd:()=>{this.width=A,this.height=b,this.x=O,this.y=M;const[q,C]=this.parentDimensions;this.setDims(q*A,C*b),this.fixAndSetPosition()},undo:()=>{this.width=$,this.height=ae,this.x=f,this.y=c;const[q,C]=this.parentDimensions;this.setDims(q*$,C*ae),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",N),window.addEventListener("blur",N)}#_(ee,e){const[V,H]=this.parentDimensions,te=this.x,re=this.y,f=this.width,c=this.height,$=y.MIN_SIZE/V,ae=y.MIN_SIZE/H,oe=z=>Math.round(1e4*z)/1e4,W=this.#d(this.rotation),N=(z,L)=>[W[0]*z+W[2]*L,W[1]*z+W[3]*L],O=this.#d(360-this.rotation);let A,b,q=!1,C=!1;switch(ee){case"topLeft":q=!0,A=(z,L)=>[0,0],b=(z,L)=>[z,L];break;case"topMiddle":A=(z,L)=>[z/2,0],b=(z,L)=>[z/2,L];break;case"topRight":q=!0,A=(z,L)=>[z,0],b=(z,L)=>[0,L];break;case"middleRight":C=!0,A=(z,L)=>[z,L/2],b=(z,L)=>[0,L/2];break;case"bottomRight":q=!0,A=(z,L)=>[z,L],b=(z,L)=>[0,0];break;case"bottomMiddle":A=(z,L)=>[z/2,L],b=(z,L)=>[z/2,0];break;case"bottomLeft":q=!0,A=(z,L)=>[0,L],b=(z,L)=>[z,0];break;case"middleLeft":C=!0,A=(z,L)=>[0,L/2],b=(z,L)=>[z,L/2]}const P=A(f,c),F=b(f,c);let I=N(...F);const j=oe(te+I[0]),E=oe(re+I[1]);let x=1,p=1,[m,_]=this.screenToPageTranslation(e.movementX,e.movementY);if([m,_]=[O[0]*(z=m/V)+O[2]*(L=_/H),O[1]*z+O[3]*L],q){const z=Math.hypot(f,c);x=p=Math.max(Math.min(Math.hypot(F[0]-P[0]-m,F[1]-P[1]-_)/z,1/f,1/c),$/f,ae/c)}else C?x=Math.max($,Math.min(1,Math.abs(F[0]-P[0]-m)))/f:p=Math.max(ae,Math.min(1,Math.abs(F[1]-P[1]-_)))/c;var z,L;const R=oe(f*x),G=oe(c*p);I=N(...b(R,G));const K=j-I[0],U=E-I[1];this.width=R,this.height=G,this.x=K,this.y=U,this.setDims(V*R,H*G),this.fixAndSetPosition()}addAltTextButton(){var ee=this;return _asyncToGenerator(function*(){if(ee.#n)return;const e=ee.#n=document.createElement("button");e.className="altText";const V=yield y._l10nPromise.get("editor_alt_text_button_label");e.textContent=V,e.setAttribute("aria-label",V),e.tabIndex="0",e.addEventListener("contextmenu",se.noContextMenu),e.addEventListener("pointerdown",H=>H.stopPropagation()),e.addEventListener("click",H=>{H.preventDefault(),ee._uiManager.editAltText(ee)},{capture:!0}),e.addEventListener("keydown",H=>{H.target===e&&"Enter"===H.key&&(H.preventDefault(),ee._uiManager.editAltText(ee))}),ee.#b(),ee.div.append(e),y.SMALL_EDITOR_SIZE||(y.SMALL_EDITOR_SIZE=Math.min(128,Math.round(1.4*e.getBoundingClientRect().width)))})()}#b(){var ee=this;return _asyncToGenerator(function*(){const e=ee.#n;if(!e)return;if(!ee.#e&&!ee.#t)return e.classList.remove("done"),void ee.#i?.remove();y._l10nPromise.get("editor_alt_text_edit_button_label").then(H=>{e.setAttribute("aria-label",H)});let V=ee.#i;if(!V){ee.#i=V=document.createElement("span"),V.className="tooltip",V.setAttribute("role","tooltip");const H=V.id=`alt-text-tooltip-${ee.id}`;e.setAttribute("aria-describedby",H);const te=100;e.addEventListener("mouseenter",()=>{ee.#o=setTimeout(()=>{ee.#o=null,ee.#i.classList.add("show"),ee._uiManager._eventBus.dispatch("reporttelemetry",{source:ee,details:{type:"editing",subtype:ee.editorType,data:{action:"alt_text_tooltip"}}})},te)}),e.addEventListener("mouseleave",()=>{clearTimeout(ee.#o),ee.#o=null,ee.#i?.classList.remove("show")})}e.classList.add("done"),V.innerText=ee.#t?yield y._l10nPromise.get("editor_alt_text_decorative_tooltip"):ee.#e,V.parentNode||e.append(V)})()}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:ee,decorative:e}){this.#e===ee&&this.#t===e||(this.#e=ee,this.#t=e,this.#b())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[ee,e]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*e/ee).toFixed(2)}%`,this.div.style.maxHeight=`${(100*ee/e).toFixed(2)}%`);const[V,H]=this.getInitialTranslation();return this.translate(V,H),(0,le.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(ee){const{isMac:e}=Ee.FeatureTest.platform;0!==ee.button||ee.ctrlKey&&e?ee.preventDefault():(this.#r=!0,this.#w(ee))}#w(ee){if(!this._isDraggable)return;const e=this._uiManager.isSelected(this);let V,H;this._uiManager.setUpDragSession(),e&&(V={passive:!0,capture:!0},H=re=>{const[f,c]=this.screenToPageTranslation(re.movementX,re.movementY);this._uiManager.dragSelectedEditors(f,c)},window.addEventListener("pointermove",H,V));const te=()=>{if(window.removeEventListener("pointerup",te),window.removeEventListener("blur",te),e&&window.removeEventListener("pointermove",H,V),this.#r=!1,!this._uiManager.endDragSession()){const{isMac:re}=Ee.FeatureTest.platform;ee.ctrlKey&&!re||ee.shiftKey||ee.metaKey&&re?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",te),window.addEventListener("blur",te)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(ee,e,V){ee.changeParent(this),this.x=e,this.y=V,this.fixAndSetPosition()}getRect(ee,e){const V=this.parentScale,[H,te]=this.pageDimensions,[re,f]=this.pageTranslation,c=ee/V,$=e/V,ae=this.x*H,oe=this.y*te,W=this.width*H,N=this.height*te;switch(this.rotation){case 0:return[ae+c+re,te-oe-$-N+f,ae+c+W+re,te-oe-$+f];case 90:return[ae+$+re,te-oe+c+f,ae+$+N+re,te-oe+c+W+f];case 180:return[ae-c-W+re,te-oe+$+f,ae-c+re,te-oe+$+N+f];case 270:return[ae-$-N+re,te-oe-c-W+f,ae-$+re,te-oe-c+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(ee,e){const[V,H,te,re]=ee,f=te-V,c=re-H;switch(this.rotation){case 0:return[V,e-re,f,c];case 90:return[V,e-H,c,f];case 180:return[te,e-H,f,c];case 270:return[te,e-re,c,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(ee=!1,e=null){(0,Ee.unreachable)("An editor must be serializable")}static deserialize(ee,e,V){const H=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:V});H.rotation=ee.rotation;const[te,re]=H.pageDimensions,[f,c,$,ae]=H.getRectInCurrentCoords(ee.rect,re);return H.x=f/te,H.y=c/re,H.width=$/te,H.height=ae/re,H}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(ee,e){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#u}set isEditing(ee){this.#u=ee,this.parent&&(ee?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(ee,e){this.#s=!0;const V=ee/e,{style:H}=this.div;H.aspectRatio=V,H.height="auto"}static get MIN_SIZE(){return 16}}he.AnnotationEditor=y;class k extends y{constructor(ee){super(ee),this.annotationElementId=ee.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.KeyboardManager=he.CommandManager=he.ColorManager=he.AnnotationEditorUIManager=void 0,he.bindEvents=function se(te,re,f){for(const c of f)re.addEventListener(c,te[c].bind(te))},he.opacityToHex=function y(te){return Math.round(Math.min(255,Math.max(1,255*te))).toString(16).padStart(2,"0")};var le=Oe(1),Ee=Oe(6);class k{#e=0;getId(){return`${le.AnnotationEditorPrefix}${this.#e++}`}}class fe{#e=(0,le.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const c=new OffscreenCanvas(1,3).getContext("2d"),$=new Image;$.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const ae=$.decode().then(()=>(c.drawImage($,0,0,1,1,0,0,1,3),0===new Uint32Array(c.getImageData(0,0,1,1).data.buffer)[0]));return(0,le.shadow)(this,"_isSVGFittingCanvas",ae)}#i(re,f){var c=this;return _asyncToGenerator(function*(){c.#n||=new Map;let $=c.#n.get(re);if(null===$)return null;if($?.bitmap)return $.refCounter+=1,$;try{let ae;if($||={bitmap:null,id:`image_${c.#e}_${c.#t++}`,refCounter:0,isSvg:!1},"string"==typeof f){$.url=f;const oe=yield fetch(f);if(!oe.ok)throw new Error(oe.statusText);ae=yield oe.blob()}else ae=$.file=f;if("image/svg+xml"===ae.type){const oe=fe._isSVGFittingCanvas,W=new FileReader,N=new Image,O=new Promise((M,A)=>{N.onload=()=>{$.bitmap=N,$.isSvg=!0,M()},W.onload=_asyncToGenerator(function*(){const b=$.svgUrl=W.result;N.src=(yield oe)?`${b}#svgView(preserveAspectRatio(none))`:b}),N.onerror=W.onerror=A});W.readAsDataURL(ae),yield O}else $.bitmap=yield createImageBitmap(ae);$.refCounter=1}catch(ae){console.error(ae),$=null}return c.#n.set(re,$),$&&c.#n.set($.id,$),$})()}getFromFile(re){var f=this;return _asyncToGenerator(function*(){const{lastModified:c,name:$,size:ae,type:oe}=re;return f.#i(`${c}_${$}_${ae}_${oe}`,re)})()}getFromUrl(re){var f=this;return _asyncToGenerator(function*(){return f.#i(re,re)})()}getFromId(re){var f=this;return _asyncToGenerator(function*(){f.#n||=new Map;const c=f.#n.get(re);return c?c.bitmap?(c.refCounter+=1,c):c.file?f.getFromFile(c.file):f.getFromUrl(c.url):null})()}getSvgUrl(re){const f=this.#n.get(re);return f?.isSvg?f.svgUrl:null}deleteId(re){this.#n||=new Map;const f=this.#n.get(re);f&&(f.refCounter-=1,0===f.refCounter&&(f.bitmap=null))}isValidId(re){return re.startsWith(`image_${this.#e}_`)}}class ee{#e=[];#t=!1;#n;#i=-1;constructor(re=128){this.#n=re}add({cmd:re,undo:f,mustExec:c,type:$=NaN,overwriteIfSameType:ae=!1,keepUndo:oe=!1}){if(c&&re(),this.#t)return;const W={cmd:re,undo:f,type:$};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(W);if(ae&&this.#e[this.#i].type===$)return oe&&(W.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=W);const N=this.#i+1;N===this.#n?this.#e.splice(0,1):(this.#i=N,N<this.#e.length&&this.#e.splice(N)),this.#e.push(W)}undo(){-1!==this.#i&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}he.CommandManager=ee;class e{constructor(re){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:f}=le.FeatureTest.platform;for(const[c,$,ae={}]of re)for(const oe of c){const W=oe.startsWith("mac+");f&&W?(this.callbacks.set(oe.slice(4),{callback:$,options:ae}),this.allKeys.add(oe.split("+").at(-1))):!f&&!W&&(this.callbacks.set(oe,{callback:$,options:ae}),this.allKeys.add(oe.split("+").at(-1)))}}#e(re){re.altKey&&this.buffer.push("alt"),re.ctrlKey&&this.buffer.push("ctrl"),re.metaKey&&this.buffer.push("meta"),re.shiftKey&&this.buffer.push("shift"),this.buffer.push(re.key);const f=this.buffer.join("+");return this.buffer.length=0,f}exec(re,f){if(!this.allKeys.has(f.key))return;const c=this.callbacks.get(this.#e(f));if(!c)return;const{callback:$,options:{bubbles:ae=!1,args:oe=[],checker:W=null}}=c;W&&!W(re,f)||($.bind(re,...oe)(),ae||(f.stopPropagation(),f.preventDefault()))}}he.KeyboardManager=e;class V{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const re=new Map([["CanvasText",null],["Canvas",null]]);return(0,Ee.getColorValues)(re),(0,le.shadow)(this,"_colors",re)}convert(re){const f=(0,Ee.getRGB)(re);if(!window.matchMedia("(forced-colors: active)").matches)return f;for(const[c,$]of this._colors)if($.every((ae,oe)=>ae===f[oe]))return V._colorsMapping.get(c);return f}getHexCode(re){const f=this._colors.get(re);return f?le.Util.makeHexColor(...f):re}}he.ColorManager=V,he.AnnotationEditorUIManager=(()=>{class te{#e=null;#t=new Map;#n=new Map;#i=null;#o=null;#s=new ee;#a=0;#l=new Set;#c=null;#r=null;#u=new Set;#h=null;#f=new k;#p=!1;#g=!1;#m=null;#y=le.AnnotationEditorType.NONE;#d=new Set;#v=null;#S=this.blur.bind(this);#_=this.focus.bind(this);#b=this.copy.bind(this);#w=this.cut.bind(this);#F=this.paste.bind(this);#P=this.keydown.bind(this);#R=this.onEditingAction.bind(this);#x=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#T=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#C=[0,0];#E=null;#k=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const f=te.prototype,c=oe=>{const{activeElement:W}=document;return W&&oe.#k.contains(W)&&oe.hasSomethingToControl()},$=this.TRANSLATE_SMALL,ae=this.TRANSLATE_BIG;return(0,le.shadow)(this,"_keyboardManager",new e([[["ctrl+a","mac+meta+a"],f.selectAll],[["ctrl+z","mac+meta+z"],f.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],f.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],f.delete],[["Escape","mac+Escape"],f.unselectAll],[["ArrowLeft","mac+ArrowLeft"],f.translateSelectedEditors,{args:[-$,0],checker:c}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],f.translateSelectedEditors,{args:[-ae,0],checker:c}],[["ArrowRight","mac+ArrowRight"],f.translateSelectedEditors,{args:[$,0],checker:c}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],f.translateSelectedEditors,{args:[ae,0],checker:c}],[["ArrowUp","mac+ArrowUp"],f.translateSelectedEditors,{args:[0,-$],checker:c}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],f.translateSelectedEditors,{args:[0,-ae],checker:c}],[["ArrowDown","mac+ArrowDown"],f.translateSelectedEditors,{args:[0,$],checker:c}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],f.translateSelectedEditors,{args:[0,ae],checker:c}]]))}constructor(f,c,$,ae,oe,W){this.#k=f,this.#N=c,this.#i=$,this._eventBus=ae,this._eventBus._on("editingaction",this.#R),this._eventBus._on("pagechanging",this.#x),this._eventBus._on("scalechanging",this.#D),this._eventBus._on("rotationchanging",this.#T),this.#o=oe.annotationStorage,this.#h=oe.filterFactory,this.#v=W,this.viewParameters={realScale:Ee.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#O(),this.#z(),this._eventBus._off("editingaction",this.#R),this._eventBus._off("pagechanging",this.#x),this._eventBus._off("scalechanging",this.#D),this._eventBus._off("rotationchanging",this.#T);for(const f of this.#n.values())f.destroy();this.#n.clear(),this.#t.clear(),this.#u.clear(),this.#e=null,this.#d.clear(),this.#s.destroy(),this.#i.destroy()}get hcmFilter(){return(0,le.shadow)(this,"hcmFilter",this.#v?this.#h.addHCMFilter(this.#v.foreground,this.#v.background):"none")}get direction(){return(0,le.shadow)(this,"direction",getComputedStyle(this.#k).direction)}editAltText(f){this.#i?.editAltText(this,f)}onPageChanging({pageNumber:f}){this.#a=f-1}focusMainContainer(){this.#k.focus()}findParent(f,c){for(const $ of this.#n.values()){const{x:ae,y:oe,width:W,height:N}=$.div.getBoundingClientRect();if(f>=ae&&f<=ae+W&&c>=oe&&c<=oe+N)return $}return null}disableUserSelect(f=!1){this.#N.classList.toggle("noUserSelect",f)}addShouldRescale(f){this.#u.add(f)}removeShouldRescale(f){this.#u.delete(f)}onScaleChanging({scale:f}){this.commitOrRemove(),this.viewParameters.realScale=f*Ee.PixelsPerInch.PDF_TO_CSS_UNITS;for(const c of this.#u)c.onScaleChanging()}onRotationChanging({pagesRotation:f}){this.commitOrRemove(),this.viewParameters.rotation=f}addToAnnotationStorage(f){!f.isEmpty()&&this.#o&&!this.#o.has(f.id)&&this.#o.setValue(f.id,f)}#B(){window.addEventListener("focus",this.#_),window.addEventListener("blur",this.#S)}#z(){window.removeEventListener("focus",this.#_),window.removeEventListener("blur",this.#S)}blur(){if(!this.hasSelection)return;const{activeElement:f}=document;for(const c of this.#d)if(c.div.contains(f)){this.#m=[c,f],c._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[f,c]=this.#m;this.#m=null,c.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),c.focus()}#U(){window.addEventListener("keydown",this.#P,{capture:!0})}#O(){window.removeEventListener("keydown",this.#P,{capture:!0})}#L(){document.addEventListener("copy",this.#b),document.addEventListener("cut",this.#w),document.addEventListener("paste",this.#F)}#I(){document.removeEventListener("copy",this.#b),document.removeEventListener("cut",this.#w),document.removeEventListener("paste",this.#F)}addEditListeners(){this.#U(),this.#L()}removeEditListeners(){this.#O(),this.#I()}copy(f){if(f.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const c=[];for(const $ of this.#d){const ae=$.serialize(!0);ae&&c.push(ae)}0!==c.length&&f.clipboardData.setData("application/pdfjs",JSON.stringify(c))}cut(f){this.copy(f),this.delete()}paste(f){f.preventDefault();const{clipboardData:c}=f;for(const oe of c.items)for(const W of this.#r)if(W.isHandlingMimeForPasting(oe.type))return void W.paste(oe,this.currentLayer);let $=c.getData("application/pdfjs");if(!$)return;try{$=JSON.parse($)}catch(oe){return void(0,le.warn)(`paste: "${oe.message}".`)}if(!Array.isArray($))return;this.unselectAll();const ae=this.currentLayer;try{const oe=[];for(const O of $){const M=ae.deserialize(O);if(!M)return;oe.push(M)}this.addCommands({cmd:()=>{for(const O of oe)this.#H(O);this.#G(oe)},undo:()=>{for(const O of oe)O.remove()},mustExec:!0})}catch(oe){(0,le.warn)(`paste: "${oe.message}".`)}}keydown(f){this.getActive()?.shouldGetKeyboardEvents()||te._keyboardManager.exec(this,f)}onEditingAction(f){["undo","redo","delete","selectAll"].includes(f.name)&&this[f.name]()}#A(f){Object.entries(f).some(([$,ae])=>this.#M[$]!==ae)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,f)})}#V(f){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:f})}setEditingState(f){f?(this.#B(),this.#U(),this.#L(),this.#A({isEditing:this.#y!==le.AnnotationEditorType.NONE,isEmpty:this.#j(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#z(),this.#O(),this.#I(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(f){if(!this.#r){this.#r=f;for(const c of this.#r)this.#V(c.defaultPropertiesToUpdate)}}getId(){return this.#f.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(f){return this.#n.get(f)}get currentPageIndex(){return this.#a}addLayer(f){this.#n.set(f.pageIndex,f),this.#p?f.enable():f.disable()}removeLayer(f){this.#n.delete(f.pageIndex)}updateMode(f,c=null){if(this.#y!==f){if(this.#y=f,f===le.AnnotationEditorType.NONE)return this.setEditingState(!1),void this.#q();this.setEditingState(!0),this.#$(),this.unselectAll();for(const $ of this.#n.values())$.updateMode(f);if(c)for(const $ of this.#t.values())if($.annotationElementId===c){this.setSelected($),$.enterInEditMode();break}}}updateToolbar(f){f!==this.#y&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:f})}updateParams(f,c){if(this.#r){if(f===le.AnnotationEditorParamsType.CREATE)return void this.currentLayer.addNewEditor(f);for(const $ of this.#d)$.updateParams(f,c);for(const $ of this.#r)$.updateDefaultParams(f,c)}}enableWaiting(f=!1){if(this.#g!==f){this.#g=f;for(const c of this.#n.values())f?c.disableClick():c.enableClick(),c.div.classList.toggle("waiting",f)}}#$(){if(!this.#p){this.#p=!0;for(const f of this.#n.values())f.enable()}}#q(){if(this.unselectAll(),this.#p){this.#p=!1;for(const f of this.#n.values())f.disable()}}getEditors(f){const c=[];for(const $ of this.#t.values())$.pageIndex===f&&c.push($);return c}getEditor(f){return this.#t.get(f)}addEditor(f){this.#t.set(f.id,f)}removeEditor(f){this.#t.delete(f.id),this.unselect(f),(!f.annotationElementId||!this.#l.has(f.annotationElementId))&&this.#o?.remove(f.id)}addDeletedAnnotationElement(f){this.#l.add(f.annotationElementId),f.deleted=!0}isDeletedAnnotationElement(f){return this.#l.has(f)}removeDeletedAnnotationElement(f){this.#l.delete(f.annotationElementId),f.deleted=!1}#H(f){const c=this.#n.get(f.pageIndex);c?c.addOrRebuild(f):this.addEditor(f)}setActiveEditor(f){this.#e!==f&&(this.#e=f,f&&this.#V(f.propertiesToUpdate))}toggleSelected(f){if(this.#d.has(f))return this.#d.delete(f),f.unselect(),void this.#A({hasSelectedEditor:this.hasSelection});this.#d.add(f),f.select(),this.#V(f.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(f){for(const c of this.#d)c!==f&&c.unselect();this.#d.clear(),this.#d.add(f),f.select(),this.#V(f.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(f){return this.#d.has(f)}unselect(f){f.unselect(),this.#d.delete(f),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#d.size}undo(){this.#s.undo(),this.#A({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#j()})}redo(){this.#s.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#j()})}addCommands(f){this.#s.add(f),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#j()})}#j(){if(0===this.#t.size)return!0;if(1===this.#t.size)for(const f of this.#t.values())return f.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const f=[...this.#d];this.addCommands({cmd:()=>{for(const ae of f)ae.remove()},undo:()=>{for(const ae of f)this.#H(ae)},mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#G(f){this.#d.clear();for(const c of f)c.isEmpty()||(this.#d.add(c),c.select());this.#A({hasSelectedEditor:!0})}selectAll(){for(const f of this.#d)f.commit();this.#G(this.#t.values())}unselectAll(){if(this.#e)this.#e.commitOrRemove();else if(this.hasSelection){for(const f of this.#d)f.unselect();this.#d.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(f,c,$=!1){if($||this.commitOrRemove(),!this.hasSelection)return;this.#C[0]+=f,this.#C[1]+=c;const[ae,oe]=this.#C,W=[...this.#d];this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.#E=null,this.#C[0]=this.#C[1]=0,this.addCommands({cmd:()=>{for(const O of W)this.#t.has(O.id)&&O.translateInPage(ae,oe)},undo:()=>{for(const O of W)this.#t.has(O.id)&&O.translateInPage(-ae,-oe)},mustExec:!1})},1e3);for(const O of W)O.translateInPage(f,c)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const f of this.#d)this.#c.set(f,{savedX:f.x,savedY:f.y,savedPageIndex:f.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const f=this.#c;this.#c=null;let c=!1;for(const[{x:ae,y:oe,pageIndex:W},N]of f)N.newX=ae,N.newY=oe,N.newPageIndex=W,c||=ae!==N.savedX||oe!==N.savedY||W!==N.savedPageIndex;if(!c)return!1;const $=(ae,oe,W,N)=>{if(this.#t.has(ae.id)){const O=this.#n.get(N);O?ae._setParentAndPosition(O,oe,W):(ae.pageIndex=N,ae.x=oe,ae.y=W)}};return this.addCommands({cmd:()=>{for(const[ae,{newX:oe,newY:W,newPageIndex:N}]of f)$(ae,oe,W,N)},undo:()=>{for(const[ae,{savedX:oe,savedY:W,savedPageIndex:N}]of f)$(ae,oe,W,N)},mustExec:!0}),!0}dragSelectedEditors(f,c){if(this.#c)for(const $ of this.#c.keys())$.drag(f,c)}rebuild(f){if(null===f.parent){const c=this.getLayer(f.pageIndex);c?(c.changeParent(f),c.addOrRebuild(f)):(this.addEditor(f),this.addToAnnotationStorage(f),f.rebuild())}else f.parent.addOrRebuild(f)}isActive(f){return this.#e===f}getActive(){return this.#e}getMode(){return this.#y}get imageManager(){return(0,le.shadow)(this,"imageManager",new fe)}}return te})()},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.StatTimer=he.RenderingCancelledException=he.PixelsPerInch=he.PageViewport=he.PDFDateString=he.DOMStandardFontDataFactory=he.DOMSVGFactory=he.DOMFilterFactory=he.DOMCanvasFactory=he.DOMCMapReaderFactory=void 0,he.deprecated=function A(x){console.log("Deprecated API usage: "+x)},he.getColorValues=function F(x){const p=document.createElement("span");p.style.visibility="hidden",document.body.append(p);for(const m of x.keys()){p.style.color=m;const _=window.getComputedStyle(p).color;x.set(m,P(_))}p.remove()},he.getCurrentTransform=function I(x){const{a:p,b:m,c:_,d:R,e:G,f:K}=x.getTransform();return[p,m,_,R,G,K]},he.getCurrentTransformInverse=function j(x){const{a:p,b:m,c:_,d:R,e:G,f:K}=x.getTransform().invertSelf();return[p,m,_,R,G,K]},he.getFilenameFromUrl=function ae(x,p=!1){return p||([x]=x.split(/[#?]/,1)),x.substring(x.lastIndexOf("/")+1)},he.getPdfFilenameFromUrl=function oe(x,p="document.pdf"){if("string"!=typeof x)return p;if(c(x))return(0,Ee.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),p;const _=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,R=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(x);let G=_.exec(R[1])||_.exec(R[2])||_.exec(R[3]);if(G&&(G=G[0],G.includes("%")))try{G=_.exec(decodeURIComponent(G))[0]}catch{}return G||p},he.getRGB=P,he.getXfaPageViewport=function C(x,{scale:p=1,rotation:m=0}){const{width:_,height:R}=x.attributes.style,G=[0,0,parseInt(_),parseInt(R)];return new re({viewBox:G,scale:p,rotation:m})},he.isDataScheme=c,he.isPdfFile=function $(x){return"string"==typeof x&&/\.pdf$/i.test(x)},he.isValidFetchUrl=N,he.loadScript=function M(x,p=!1){return new Promise((m,_)=>{const R=document.createElement("script");R.src=x,R.onload=function(G){p&&R.remove(),m(G)},R.onerror=function(){_(new Error(`Cannot load script at: ${R.src}`))},(document.head||document.documentElement).append(R)})},he.noContextMenu=function O(x){x.preventDefault()},he.setLayerDimensions=function E(x,p,m=!1,_=!0){if(p instanceof re){const{pageWidth:R,pageHeight:G}=p.rawDims,{style:K}=x,U=Ee.FeatureTest.isCSSRoundSupported,z=`var(--scale-factor) * ${R}px`,L=`var(--scale-factor) * ${G}px`,S=U?`round(${z}, 1px)`:`calc(${z})`,B=U?`round(${L}, 1px)`:`calc(${L})`;m&&p.rotation%180!=0?(K.width=B,K.height=S):(K.width=S,K.height=B)}_&&x.setAttribute("data-main-rotation",p.rotation)};var le=Oe(7),Ee=Oe(1);const se="http://www.w3.org/2000/svg";function ee(x){return e.apply(this,arguments)}function e(){return(e=_asyncToGenerator(function*(x,p=!1){if(N(x,document.baseURI)){const m=yield fetch(x);if(!m.ok)throw new Error(m.statusText);return p?new Uint8Array(yield m.arrayBuffer()):(0,Ee.stringToBytes)(yield m.text())}return new Promise((m,_)=>{const R=new XMLHttpRequest;R.open("GET",x,!0),p&&(R.responseType="arraybuffer"),R.onreadystatechange=()=>{if(R.readyState===XMLHttpRequest.DONE){if(200===R.status||0===R.status){let G;if(p&&R.response?G=new Uint8Array(R.response):!p&&R.responseText&&(G=(0,Ee.stringToBytes)(R.responseText)),G)return void m(G)}_(new Error(R.statusText))}},R.send(null)})})).apply(this,arguments)}he.PixelsPerInch=class y{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF},he.DOMFilterFactory=class k extends le.BaseFilterFactory{#e;#t;#n;#i;#o;#s;#a;#l;#c;#r;#u=0;constructor({docId:p,ownerDocument:m=globalThis.document}={}){super(),this.#n=p,this.#i=m}get#h(){return this.#e||=new Map}get#f(){if(!this.#t){const p=this.#i.createElement("div"),{style:m}=p;m.visibility="hidden",m.contain="strict",m.width=m.height=0,m.position="absolute",m.top=m.left=0,m.zIndex=-1;const _=this.#i.createElementNS(se,"svg");_.setAttribute("width",0),_.setAttribute("height",0),this.#t=this.#i.createElementNS(se,"defs"),p.append(_),_.append(this.#t),this.#i.body.append(p)}return this.#t}addFilter(p){if(!p)return"none";let _,R,G,K,m=this.#h.get(p);if(m)return m;if(1===p.length){const S=p[0],B=new Array(256);for(let J=0;J<256;J++)B[J]=S[J]/255;K=_=R=G=B.join(",")}else{const[S,B,J]=p,ie=new Array(256),ce=new Array(256),pe=new Array(256);for(let ye=0;ye<256;ye++)ie[ye]=S[ye]/255,ce[ye]=B[ye]/255,pe[ye]=J[ye]/255;_=ie.join(","),R=ce.join(","),G=pe.join(","),K=`${_}${R}${G}`}if(m=this.#h.get(K),m)return this.#h.set(p,m),m;const U=`g_${this.#n}_transfer_map_${this.#u++}`,z=`url(#${U})`;this.#h.set(p,z),this.#h.set(K,z);const L=this.#g(U);return this.#y(_,R,G,L),z}addHCMFilter(p,m){const _=`${p}-${m}`;if(this.#s===_)return this.#a;if(this.#s=_,this.#a="none",this.#o?.remove(),!p||!m)return this.#a;const R=this.#d(p);p=Ee.Util.makeHexColor(...R);const G=this.#d(m);if(m=Ee.Util.makeHexColor(...G),this.#f.style.color="","#000000"===p&&"#ffffff"===m||p===m)return this.#a;const K=new Array(256);for(let B=0;B<=255;B++){const J=B/255;K[B]=J<=.03928?J/12.92:((J+.055)/1.055)**2.4}const U=K.join(","),z=`g_${this.#n}_hcm_filter`,L=this.#l=this.#g(z);this.#y(U,U,U,L),this.#p(L);const S=(B,J)=>{const ie=R[B]/255,ce=G[B]/255,pe=new Array(J+1);for(let ye=0;ye<=J;ye++)pe[ye]=ie+ye/J*(ce-ie);return pe.join(",")};return this.#y(S(0,5),S(1,5),S(2,5),L),this.#a=`url(#${z})`,this.#a}addHighlightHCMFilter(p,m,_,R){const G=`${p}-${m}-${_}-${R}`;if(this.#c===G)return this.#r;if(this.#c=G,this.#r="none",this.#l?.remove(),!p||!m)return this.#r;const[K,U]=[p,m].map(this.#d.bind(this));let z=Math.round(.2126*K[0]+.7152*K[1]+.0722*K[2]),L=Math.round(.2126*U[0]+.7152*U[1]+.0722*U[2]),[S,B]=[_,R].map(this.#d.bind(this));L<z&&([z,L,S,B]=[L,z,B,S]),this.#f.style.color="";const J=(pe,ye,Te)=>{const _e=new Array(256),we=(L-z)/Te,De=pe/255,xe=(ye-pe)/(255*Te);let Ce=0;for(let Me=0;Me<=Te;Me++){const Ne=Math.round(z+Me*we),We=De+Me*xe;for(let Xe=Ce;Xe<=Ne;Xe++)_e[Xe]=We;Ce=Ne+1}for(let Me=Ce;Me<256;Me++)_e[Me]=_e[Ce-1];return _e.join(",")},ie=`g_${this.#n}_hcm_highlight_filter`,ce=this.#l=this.#g(ie);return this.#p(ce),this.#y(J(S[0],B[0],5),J(S[1],B[1],5),J(S[2],B[2],5),ce),this.#r=`url(#${ie})`,this.#r}destroy(p=!1){p&&(this.#a||this.#r)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#u=0)}#p(p){const m=this.#i.createElementNS(se,"feColorMatrix");m.setAttribute("type","matrix"),m.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),p.append(m)}#g(p){const m=this.#i.createElementNS(se,"filter");return m.setAttribute("color-interpolation-filters","sRGB"),m.setAttribute("id",p),this.#f.append(m),m}#m(p,m,_){const R=this.#i.createElementNS(se,m);R.setAttribute("type","discrete"),R.setAttribute("tableValues",_),p.append(R)}#y(p,m,_,R){const G=this.#i.createElementNS(se,"feComponentTransfer");R.append(G),this.#m(G,"feFuncR",p),this.#m(G,"feFuncG",m),this.#m(G,"feFuncB",_)}#d(p){return this.#f.style.color=p,P(getComputedStyle(this.#f).getPropertyValue("color"))}},he.DOMCanvasFactory=class fe extends le.BaseCanvasFactory{constructor({ownerDocument:p=globalThis.document}={}){super(),this._document=p}_createCanvas(p,m){const _=this._document.createElement("canvas");return _.width=p,_.height=m,_}},he.DOMCMapReaderFactory=class V extends le.BaseCMapReaderFactory{_fetchData(p,m){return ee(p,this.isCompressed).then(_=>({cMapData:_,compressionType:m}))}},he.DOMStandardFontDataFactory=class H extends le.BaseStandardFontDataFactory{_fetchData(p){return ee(p,!0)}},he.DOMSVGFactory=class te extends le.BaseSVGFactory{_createSVG(p){return document.createElementNS(se,p)}};class re{constructor({viewBox:p,scale:m,rotation:_,offsetX:R=0,offsetY:G=0,dontFlip:K=!1}){this.viewBox=p,this.scale=m,this.rotation=_,this.offsetX=R,this.offsetY=G;const U=(p[2]+p[0])/2,z=(p[3]+p[1])/2;let L,S,B,J,ie,ce,pe,ye;switch((_%=360)<0&&(_+=360),_){case 180:L=-1,S=0,B=0,J=1;break;case 90:L=0,S=1,B=1,J=0;break;case 270:L=0,S=-1,B=-1,J=0;break;case 0:L=1,S=0,B=0,J=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}K&&(B=-B,J=-J),0===L?(ie=Math.abs(z-p[1])*m+R,ce=Math.abs(U-p[0])*m+G,pe=(p[3]-p[1])*m,ye=(p[2]-p[0])*m):(ie=Math.abs(U-p[0])*m+R,ce=Math.abs(z-p[1])*m+G,pe=(p[2]-p[0])*m,ye=(p[3]-p[1])*m),this.transform=[L*m,S*m,B*m,J*m,ie-L*m*U-B*m*z,ce-S*m*U-J*m*z],this.width=pe,this.height=ye}get rawDims(){const{viewBox:p}=this;return(0,Ee.shadow)(this,"rawDims",{pageWidth:p[2]-p[0],pageHeight:p[3]-p[1],pageX:p[0],pageY:p[1]})}clone({scale:p=this.scale,rotation:m=this.rotation,offsetX:_=this.offsetX,offsetY:R=this.offsetY,dontFlip:G=!1}={}){return new re({viewBox:this.viewBox.slice(),scale:p,rotation:m,offsetX:_,offsetY:R,dontFlip:G})}convertToViewportPoint(p,m){return Ee.Util.applyTransform([p,m],this.transform)}convertToViewportRectangle(p){const m=Ee.Util.applyTransform([p[0],p[1]],this.transform),_=Ee.Util.applyTransform([p[2],p[3]],this.transform);return[m[0],m[1],_[0],_[1]]}convertToPdfPoint(p,m){return Ee.Util.applyInverseTransform([p,m],this.transform)}}function c(x){const p=x.length;let m=0;for(;m<p&&""===x[m].trim();)m++;return"data:"===x.substring(m,m+5).toLowerCase()}function N(x,p){try{const{protocol:m}=p?new URL(x,p):new URL(x);return"http:"===m||"https:"===m}catch{return!1}}let b;function P(x){if(x.startsWith("#")){const p=parseInt(x.slice(1),16);return[(16711680&p)>>16,(65280&p)>>8,255&p]}return x.startsWith("rgb(")?x.slice(4,-1).split(",").map(p=>parseInt(p)):x.startsWith("rgba(")?x.slice(5,-1).split(",").map(p=>parseInt(p)).slice(0,3):((0,Ee.warn)(`Not a valid color format: "${x}"`),[0,0,0])}he.PageViewport=re,he.RenderingCancelledException=class f extends Ee.BaseException{constructor(p,m=0){super(p,"RenderingCancelledException"),this.extraDelay=m}},he.StatTimer=class W{started=Object.create(null);times=[];time(p){p in this.started&&(0,Ee.warn)(`Timer is already running for ${p}`),this.started[p]=Date.now()}timeEnd(p){p in this.started||(0,Ee.warn)(`Timer has not been started for ${p}`),this.times.push({name:p,start:this.started[p],end:Date.now()}),delete this.started[p]}toString(){const p=[];let m=0;for(const{name:_}of this.times)m=Math.max(_.length,m);for(const{name:_,start:R,end:G}of this.times)p.push(`${_.padEnd(m)} ${G-R}ms\n`);return p.join("")}},he.PDFDateString=class q{static toDateObject(p){if(!p||"string"!=typeof p)return null;b||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const m=b.exec(p);if(!m)return null;const _=parseInt(m[1],10);let R=parseInt(m[2],10);R=R>=1&&R<=12?R-1:0;let G=parseInt(m[3],10);G=G>=1&&G<=31?G:1;let K=parseInt(m[4],10);K=K>=0&&K<=23?K:0;let U=parseInt(m[5],10);U=U>=0&&U<=59?U:0;let z=parseInt(m[6],10);z=z>=0&&z<=59?z:0;const L=m[7]||"Z";let S=parseInt(m[8],10);S=S>=0&&S<=23?S:0;let B=parseInt(m[9],10)||0;return B=B>=0&&B<=59?B:0,"-"===L?(K+=S,U+=B):"+"===L&&(K-=S,U-=B),new Date(Date.UTC(_,R,G,K,U,z))}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.BaseStandardFontDataFactory=he.BaseSVGFactory=he.BaseFilterFactory=he.BaseCanvasFactory=he.BaseCMapReaderFactory=void 0;var le=Oe(1);class Ee{constructor(){this.constructor===Ee&&(0,le.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,V){return"none"}addHighlightHCMFilter(e,V,H,te){return"none"}destroy(e=!1){}}he.BaseFilterFactory=Ee;class se{constructor(){this.constructor===se&&(0,le.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,V){if(e<=0||V<=0)throw new Error("Invalid canvas size");const H=this._createCanvas(e,V);return{canvas:H,context:H.getContext("2d")}}reset(e,V,H){if(!e.canvas)throw new Error("Canvas is not specified");if(V<=0||H<=0)throw new Error("Invalid canvas size");e.canvas.width=V,e.canvas.height=H}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,V){(0,le.unreachable)("Abstract method `_createCanvas` called.")}}he.BaseCanvasFactory=se;class y{constructor({baseUrl:e=null,isCompressed:V=!0}){this.constructor===y&&(0,le.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=V}fetch({name:e}){var V=this;return _asyncToGenerator(function*(){if(!V.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const H=V.baseUrl+e+(V.isCompressed?".bcmap":"");return V._fetchData(H,V.isCompressed?le.CMapCompressionType.BINARY:le.CMapCompressionType.NONE).catch(re=>{throw new Error(`Unable to load ${V.isCompressed?"binary ":""}CMap at: ${H}`)})})()}_fetchData(e,V){(0,le.unreachable)("Abstract method `_fetchData` called.")}}he.BaseCMapReaderFactory=y;class k{constructor({baseUrl:e=null}){this.constructor===k&&(0,le.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}fetch({filename:e}){var V=this;return _asyncToGenerator(function*(){if(!V.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const H=`${V.baseUrl}${e}`;return V._fetchData(H).catch(te=>{throw new Error(`Unable to load font data at: ${H}`)})})()}_fetchData(e){(0,le.unreachable)("Abstract method `_fetchData` called.")}}he.BaseStandardFontDataFactory=k;class fe{constructor(){this.constructor===fe&&(0,le.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,V,H=!1){if(e<=0||V<=0)throw new Error("Invalid SVG dimensions");const te=this._createSVG("svg:svg");return te.setAttribute("version","1.1"),H||(te.setAttribute("width",`${e}px`),te.setAttribute("height",`${V}px`)),te.setAttribute("preserveAspectRatio","none"),te.setAttribute("viewBox",`0 0 ${e} ${V}`),te}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,le.unreachable)("Abstract method `_createSVG` called.")}}he.BaseSVGFactory=fe},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.MurmurHash3_64=void 0;var le=Oe(1);const Ee=3285377520,se=4294901760,y=65535;he.MurmurHash3_64=class k{constructor(ee){this.h1=ee?4294967295&ee:Ee,this.h2=ee?4294967295&ee:Ee}update(ee){let e,V;if("string"==typeof ee){e=new Uint8Array(2*ee.length),V=0;for(let M=0,A=ee.length;M<A;M++){const b=ee.charCodeAt(M);b<=255?e[V++]=b:(e[V++]=b>>>8,e[V++]=255&b)}}else{if(!(0,le.isArrayBuffer)(ee))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=ee.slice(),V=e.byteLength}const H=V>>2,te=V-4*H,re=new Uint32Array(e.buffer,0,H);let f=0,c=0,$=this.h1,ae=this.h2;const oe=3432918353,W=461845907,N=oe&y,O=W&y;for(let M=0;M<H;M++)1&M?(f=re[M],f=f*oe&se|f*N&y,f=f<<15|f>>>17,f=f*W&se|f*O&y,$^=f,$=$<<13|$>>>19,$=5*$+3864292196):(c=re[M],c=c*oe&se|c*N&y,c=c<<15|c>>>17,c=c*W&se|c*O&y,ae^=c,ae=ae<<13|ae>>>19,ae=5*ae+3864292196);switch(f=0,te){case 3:f^=e[4*H+2]<<16;case 2:f^=e[4*H+1]<<8;case 1:f^=e[4*H],f=f*oe&se|f*N&y,f=f<<15|f>>>17,f=f*W&se|f*O&y,1&H?$^=f:ae^=f}this.h1=$,this.h2=ae}hexdigest(){let ee=this.h1,e=this.h2;return ee^=e>>>1,ee=3981806797*ee&se|36045*ee&y,e=4283543511*e&se|(2950163797*(e<<16|ee>>>16)&se)>>>16,ee^=e>>>1,ee=444984403*ee&se|60499*ee&y,e=3301882366*e&se|(3120437893*(e<<16|ee>>>16)&se)>>>16,ee^=e>>>1,(ee>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.FontLoader=he.FontFaceObject=void 0;var le=Oe(1);he.FontLoader=class Ee{#e=new Set;constructor({ownerDocument:k=globalThis.document,styleElement:fe=null}){this._document=k,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(k){this.nativeFontFaces.add(k),this._document.fonts.add(k)}removeNativeFontFace(k){this.nativeFontFaces.delete(k),this._document.fonts.delete(k)}insertRule(k){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const fe=this.styleElement.sheet;fe.insertRule(k,fe.cssRules.length)}clear(){for(const k of this.nativeFontFaces)this._document.fonts.delete(k);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(k){var fe=this;return _asyncToGenerator(function*(){if(k&&!fe.#e.has(k.loadedName)){if((0,le.assert)(!fe.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),fe.isFontLoadingAPISupported){const{loadedName:ee,src:e,style:V}=k,H=new FontFace(ee,e,V);fe.addNativeFontFace(H);try{yield H.load(),fe.#e.add(ee)}catch{(0,le.warn)(`Cannot load system font: ${k.baseFontName}, installing it could help to improve PDF rendering.`),fe.removeNativeFontFace(H)}return}(0,le.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})()}bind(k){var fe=this;return _asyncToGenerator(function*(){if(k.attached||k.missingFile&&!k.systemFontInfo)return;if(k.attached=!0,k.systemFontInfo)return void(yield fe.loadSystemFont(k.systemFontInfo));if(fe.isFontLoadingAPISupported){const e=k.createNativeFontFace();if(e){fe.addNativeFontFace(e);try{yield e.loaded}catch(V){throw(0,le.warn)(`Failed to load font '${e.family}': '${V}'.`),k.disableFontFace=!0,V}}return}const ee=k.createFontFaceRule();if(ee){if(fe.insertRule(ee),fe.isSyncFontLoadingSupported)return;yield new Promise(e=>{const V=fe._queueLoadingCallback(e);fe._prepareFontLoadEvent(k,V)})}})()}get isFontLoadingAPISupported(){return(0,le.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let k=!1;return(le.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(k=!0),(0,le.shadow)(this,"isSyncFontLoadingSupported",k)}_queueLoadingCallback(k){const{loadingRequests:ee}=this,e={done:!1,complete:function fe(){for((0,le.assert)(!e.done,"completeRequest() cannot be called twice."),e.done=!0;ee.length>0&&ee[0].done;){const V=ee.shift();setTimeout(V.callback,0)}},callback:k};return ee.push(e),e}get _loadTestFont(){const k=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,le.shadow)(this,"_loadTestFont",k)}_prepareFontLoadEvent(k,fe){function ee(q,C){return q.charCodeAt(C)<<24|q.charCodeAt(C+1)<<16|q.charCodeAt(C+2)<<8|255&q.charCodeAt(C+3)}function e(q,C,P,F){return q.substring(0,C)+F+q.substring(C+P)}let V,H;const te=this._document.createElement("canvas");te.width=1,te.height=1;const re=te.getContext("2d");let f=0;const $=`lt${Date.now()}${this.loadTestFontId++}`;let ae=this._loadTestFont;ae=e(ae,976,$.length,$);const N=1482184792;let O=ee(ae,16);for(V=0,H=$.length-3;V<H;V+=4)O=O-N+ee($,V)|0;V<$.length&&(O=O-N+ee($+"XXX",V)|0),ae=e(ae,16,4,(0,le.string32)(O));const M=`url(data:font/opentype;base64,${btoa(ae)});`;this.insertRule(`@font-face {font-family:"${$}";src:${M}}`);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const q of[k.loadedName,$]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=q,b.append(C)}this._document.body.append(b),function c(q,C){if(++f>30)return(0,le.warn)("Load test font never loaded."),void C();re.font="30px "+q,re.fillText(".",0,20),re.getImageData(0,0,1,1).data[3]>0?C():setTimeout(c.bind(null,q,C))}($,()=>{b.remove(),fe.complete()})}},he.FontFaceObject=class se{constructor(k,{isEvalSupported:fe=!0,disableFontFace:ee=!1,ignoreErrors:e=!1,inspectFont:V=null}){this.compiledGlyphs=Object.create(null);for(const H in k)this[H]=k[H];this.isEvalSupported=!1!==fe,this.disableFontFace=!0===ee,this.ignoreErrors=!0===e,this._inspectFont=V}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let k;if(this.cssFontInfo){const fe={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(fe.style=`oblique ${this.cssFontInfo.italicAngle}deg`),k=new FontFace(this.cssFontInfo.fontFamily,this.data,fe)}else k=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),k}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const k=(0,le.bytesToString)(this.data),fe=`url(data:${this.mimetype};base64,${btoa(k)});`;let ee;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),ee=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${fe}}`}else ee=`@font-face {font-family:"${this.loadedName}";src:${fe}}`;return this._inspectFont?.(this,fe),ee}getPathGenerator(k,fe){if(void 0!==this.compiledGlyphs[fe])return this.compiledGlyphs[fe];let ee;try{ee=k.get(this.loadedName+"_path_"+fe)}catch(e){if(!this.ignoreErrors)throw e;return(0,le.warn)(`getPathGenerator - ignoring character: "${e}".`),this.compiledGlyphs[fe]=function(V,H){}}if(this.isEvalSupported&&le.FeatureTest.isEvalSupported){const e=[];for(const V of ee){const H=void 0!==V.args?V.args.join(","):"";e.push("c.",V.cmd,"(",H,");\n")}return this.compiledGlyphs[fe]=new Function("c","size",e.join(""))}return this.compiledGlyphs[fe]=function(e,V){for(const H of ee)"scale"===H.cmd&&(H.args=[V,-V]),e[H.cmd].apply(e,H.args)}}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.NodeStandardFontDataFactory=he.NodeFilterFactory=he.NodeCanvasFactory=he.NodeCMapReaderFactory=void 0;var le=Oe(7);Oe(1);const se=function(e){return new Promise((V,H)=>{__webpack_require__(339).readFile(e,(re,f)=>{!re&&f?V(new Uint8Array(f)):H(new Error(re))})})};he.NodeFilterFactory=class y extends le.BaseFilterFactory{},he.NodeCanvasFactory=class k extends le.BaseCanvasFactory{_createCanvas(V,H){return __webpack_require__(69).createCanvas(V,H)}},he.NodeCMapReaderFactory=class fe extends le.BaseCMapReaderFactory{_fetchData(V,H){return se(V).then(te=>({cMapData:te,compressionType:H}))}},he.NodeStandardFontDataFactory=class ee extends le.BaseStandardFontDataFactory{_fetchData(V){return se(V)}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.CanvasGraphics=void 0;var le=Oe(1),Ee=Oe(6),se=Oe(12),y=Oe(13);const ee=4096;class f{constructor(m){this.canvasFactory=m,this.cache=Object.create(null)}getCanvas(m,_,R){let G;return void 0!==this.cache[m]?(G=this.cache[m],this.canvasFactory.reset(G,_,R)):(G=this.canvasFactory.create(_,R),this.cache[m]=G),G}delete(m){delete this.cache[m]}clear(){for(const m in this.cache)this.canvasFactory.destroy(this.cache[m]),delete this.cache[m]}}function c(p,m,_,R,G,K,U,z,L,S){const[B,J,ie,ce,pe,ye]=(0,Ee.getCurrentTransform)(p);if(0===J&&0===ie){const De=Math.round(U*B+pe),Ce=Math.round(z*ce+ye),Ne=Math.abs(Math.round((U+L)*B+pe)-De)||1,Xe=Math.abs(Math.round((z+S)*ce+ye)-Ce)||1;return p.setTransform(Math.sign(B),0,0,Math.sign(ce),De,Ce),p.drawImage(m,_,R,G,K,0,0,Ne,Xe),p.setTransform(B,J,ie,ce,pe,ye),[Ne,Xe]}if(0===B&&0===ce){const De=Math.round(z*ie+pe),Ce=Math.round(U*J+ye),Ne=Math.abs(Math.round((z+S)*ie+pe)-De)||1,Xe=Math.abs(Math.round((U+L)*J+ye)-Ce)||1;return p.setTransform(0,Math.sign(J),Math.sign(ie),0,De,Ce),p.drawImage(m,_,R,G,K,0,0,Xe,Ne),p.setTransform(B,J,ie,ce,pe,ye),[Xe,Ne]}return p.drawImage(m,_,R,G,K,U,z,L,S),[Math.hypot(B,J)*L,Math.hypot(ie,ce)*S]}class ae{constructor(m,_){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=le.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=le.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=le.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,m,_])}clone(){const m=Object.create(this);return m.clipBox=this.clipBox.slice(),m}setCurrentPoint(m,_){this.x=m,this.y=_}updatePathMinMax(m,_,R){[_,R]=le.Util.applyTransform([_,R],m),this.minX=Math.min(this.minX,_),this.minY=Math.min(this.minY,R),this.maxX=Math.max(this.maxX,_),this.maxY=Math.max(this.maxY,R)}updateRectMinMax(m,_){const R=le.Util.applyTransform(_,m),G=le.Util.applyTransform(_.slice(2),m);this.minX=Math.min(this.minX,R[0],G[0]),this.minY=Math.min(this.minY,R[1],G[1]),this.maxX=Math.max(this.maxX,R[0],G[0]),this.maxY=Math.max(this.maxY,R[1],G[1])}updateScalingPathMinMax(m,_){le.Util.scaleMinMax(m,_),this.minX=Math.min(this.minX,_[0]),this.maxX=Math.max(this.maxX,_[1]),this.minY=Math.min(this.minY,_[2]),this.maxY=Math.max(this.maxY,_[3])}updateCurvePathMinMax(m,_,R,G,K,U,z,L,S,B){const J=le.Util.bezierBoundingBox(_,R,G,K,U,z,L,S);if(B)return B[0]=Math.min(B[0],J[0],J[2]),B[1]=Math.max(B[1],J[0],J[2]),B[2]=Math.min(B[2],J[1],J[3]),void(B[3]=Math.max(B[3],J[1],J[3]));this.updateRectMinMax(m,J)}getPathBoundingBox(m=se.PathType.FILL,_=null){const R=[this.minX,this.minY,this.maxX,this.maxY];if(m===se.PathType.STROKE){_||(0,le.unreachable)("Stroke bounding box must include transform.");const G=le.Util.singularValueDecompose2dScale(_),K=G[0]*this.lineWidth/2,U=G[1]*this.lineWidth/2;R[0]-=K,R[1]-=U,R[2]+=K,R[3]+=U}return R}updateClipFromPath(){const m=le.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(m||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(m){this.clipBox=m,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(m=se.PathType.FILL,_=null){return le.Util.intersect(this.clipBox,this.getPathBoundingBox(m,_))}}function oe(p,m){if(typeof ImageData<"u"&&m instanceof ImageData)return void p.putImageData(m,0,0);const _=m.height,R=m.width,G=_%16,K=(_-G)/16,U=0===G?K:K+1,z=p.createImageData(R,16);let S,L=0;const B=m.data,J=z.data;let ie,ce,pe,ye;if(m.kind===le.ImageKind.GRAYSCALE_1BPP){const Te=B.byteLength,_e=new Uint32Array(J.buffer,0,J.byteLength>>2),we=_e.length,De=R+7>>3,xe=4294967295,Ce=le.FeatureTest.isLittleEndian?4278190080:255;for(ie=0;ie<U;ie++){for(pe=ie<K?16:G,S=0,ce=0;ce<pe;ce++){const Me=Te-L;let Ne=0;const We=Me>De?R:8*Me-7,Xe=-8&We;let Qe=0,Ye=0;for(;Ne<Xe;Ne+=8)Ye=B[L++],_e[S++]=128&Ye?xe:Ce,_e[S++]=64&Ye?xe:Ce,_e[S++]=32&Ye?xe:Ce,_e[S++]=16&Ye?xe:Ce,_e[S++]=8&Ye?xe:Ce,_e[S++]=4&Ye?xe:Ce,_e[S++]=2&Ye?xe:Ce,_e[S++]=1&Ye?xe:Ce;for(;Ne<We;Ne++)0===Qe&&(Ye=B[L++],Qe=128),_e[S++]=Ye&Qe?xe:Ce,Qe>>=1}for(;S<we;)_e[S++]=0;p.putImageData(z,0,16*ie)}}else if(m.kind===le.ImageKind.RGBA_32BPP){for(ce=0,ye=16*R*4,ie=0;ie<K;ie++)J.set(B.subarray(L,L+ye)),L+=ye,p.putImageData(z,0,ce),ce+=16;ie<U&&(ye=R*G*4,J.set(B.subarray(L,L+ye)),p.putImageData(z,0,ce))}else{if(m.kind!==le.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${m.kind}`);for(pe=16,ye=R*pe,ie=0;ie<U;ie++){for(ie>=K&&(pe=G,ye=R*pe),S=0,ce=ye;ce--;)J[S++]=B[L++],J[S++]=B[L++],J[S++]=B[L++],J[S++]=255;p.putImageData(z,0,16*ie)}}}function W(p,m){if(m.bitmap)return void p.drawImage(m.bitmap,0,0);const _=m.height,R=m.width,G=_%16,K=(_-G)/16,U=0===G?K:K+1,z=p.createImageData(R,16);let L=0;const S=m.data,B=z.data;for(let J=0;J<U;J++){const ie=J<K?16:G;({srcPos:L}=(0,y.convertBlackAndWhiteToRGBA)({src:S,srcPos:L,dest:B,width:R,height:ie,nonBlackColor:0})),p.putImageData(z,0,16*J)}}function N(p,m){const _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const R of _)void 0!==p[R]&&(m[R]=p[R]);void 0!==p.setLineDash&&(m.setLineDash(p.getLineDash()),m.lineDashOffset=p.lineDashOffset)}function O(p){if(p.strokeStyle=p.fillStyle="#000000",p.fillRule="nonzero",p.globalAlpha=1,p.lineWidth=1,p.lineCap="butt",p.lineJoin="miter",p.miterLimit=10,p.globalCompositeOperation="source-over",p.font="10px sans-serif",void 0!==p.setLineDash&&(p.setLineDash([]),p.lineDashOffset=0),!le.isNodeJS){const{filter:m}=p;"none"!==m&&""!==m&&(p.filter="none")}}function M(p,m,_,R){const G=p.length;for(let K=3;K<G;K+=4){const U=p[K];if(0===U)p[K-3]=m,p[K-2]=_,p[K-1]=R;else if(U<255){const z=255-U;p[K-3]=p[K-3]*U+m*z>>8,p[K-2]=p[K-2]*U+_*z>>8,p[K-1]=p[K-1]*U+R*z>>8}}}function A(p,m,_){const R=p.length;for(let K=3;K<R;K+=4)m[K]=m[K]*(_?_[p[K]]:p[K])*.00392156862745098|0}function b(p,m,_){const R=p.length;for(let G=3;G<R;G+=4){const K=77*p[G-3]+152*p[G-2]+28*p[G-1];m[G]=_?m[G]*_[K>>8]>>8:m[G]*K>>16}}function P(p,m){const _=le.Util.singularValueDecompose2dScale(p);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);const R=Math.fround((globalThis.devicePixelRatio||1)*Ee.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==m?m:_[0]<=R||_[1]<=R}const F=["butt","round","square"],I=["miter","round","bevel"],j={},E={};class x{constructor(m,_,R,G,K,{optionalContentConfig:U,markedContentStack:z=null},L,S){this.ctx=m,this.current=new ae(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=R,this.canvasFactory=G,this.filterFactory=K,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=z||[],this.optionalContentConfig=U,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=L,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=S,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(m,_=null){return"string"==typeof m?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):_}beginDrawing({transform:m,viewport:_,transparency:R=!1,background:G=null}){const K=this.ctx.canvas.width,U=this.ctx.canvas.height,z=this.ctx.fillStyle;if(this.ctx.fillStyle=G||"#ffffff",this.ctx.fillRect(0,0,K,U),this.ctx.fillStyle=z,R){const L=this.cachedCanvases.getCanvas("transparent",K,U);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform(...(0,Ee.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),O(this.ctx),m&&(this.ctx.transform(...m),this.outputScaleX=m[0],this.outputScaleY=m[0]),this.ctx.transform(..._.transform),this.viewportScale=_.scale,this.baseTransform=(0,Ee.getCurrentTransform)(this.ctx)}executeOperatorList(m,_,R,G){const K=m.argsArray,U=m.fnArray;let z=_||0;const L=K.length;if(L===z)return z;const S=L-z>10&&"function"==typeof R,B=S?Date.now()+15:0;let J=0;const ie=this.commonObjs,ce=this.objs;let pe;for(;;){if(void 0!==G&&z===G.nextBreakPoint)return G.breakIt(z,R),z;if(pe=U[z],pe!==le.OPS.dependency)this[pe].apply(this,K[z]);else for(const ye of K[z]){const Te=ye.startsWith("g_")?ie:ce;if(!Te.has(ye))return Te.get(ye,R),z}if(z++,z===L)return z;if(S&&++J>10){if(Date.now()>B)return R(),z;J=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const m of this._cachedBitmapsMap.values()){for(const _ of m.values())typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement&&(_.width=_.height=0);m.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const m=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==m){const _=this.ctx.filter;this.ctx.filter=m,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=_}}}_scaleImage(m,_){const R=m.width,G=m.height;let B,J,K=Math.max(Math.hypot(_[0],_[1]),1),U=Math.max(Math.hypot(_[2],_[3]),1),z=R,L=G,S="prescale1";for(;K>2&&z>1||U>2&&L>1;){let ie=z,ce=L;K>2&&z>1&&(ie=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z/2),K/=z/ie),U>2&&L>1&&(ce=L>=16384?Math.floor(L/2)-1||1:Math.ceil(L)/2,U/=L/ce),B=this.cachedCanvases.getCanvas(S,ie,ce),J=B.context,J.clearRect(0,0,ie,ce),J.drawImage(m,0,0,z,L,0,0,ie,ce),m=B.canvas,z=ie,L=ce,S="prescale1"===S?"prescale2":"prescale1"}return{img:m,paintWidth:z,paintHeight:L}}_createMaskCanvas(m){const _=this.ctx,{width:R,height:G}=m,K=this.current.fillColor,U=this.current.patternFill,z=(0,Ee.getCurrentTransform)(_);let L,S,B,J;if((m.bitmap||m.data)&&m.count>1){const Ne=m.bitmap||m.data.buffer;S=JSON.stringify(U?z:[z.slice(0,4),K]),L=this._cachedBitmapsMap.get(Ne),L||(L=new Map,this._cachedBitmapsMap.set(Ne,L));const We=L.get(S);if(We&&!U)return{canvas:We,offsetX:Math.round(Math.min(z[0],z[2])+z[4]),offsetY:Math.round(Math.min(z[1],z[3])+z[5])};B=We}B||(J=this.cachedCanvases.getCanvas("maskCanvas",R,G),W(J.context,m));let ie=le.Util.transform(z,[1/R,0,0,-1/G,0,0]);ie=le.Util.transform(ie,[1,0,0,1,0,-G]);const ce=le.Util.applyTransform([0,0],ie),pe=le.Util.applyTransform([R,G],ie),ye=le.Util.normalizeRect([ce[0],ce[1],pe[0],pe[1]]),Te=Math.round(ye[2]-ye[0])||1,_e=Math.round(ye[3]-ye[1])||1,we=this.cachedCanvases.getCanvas("fillCanvas",Te,_e),De=we.context,xe=Math.min(ce[0],pe[0]),Ce=Math.min(ce[1],pe[1]);De.translate(-xe,-Ce),De.transform(...ie),B||(B=this._scaleImage(J.canvas,(0,Ee.getCurrentTransformInverse)(De)),B=B.img,L&&U&&L.set(S,B)),De.imageSmoothingEnabled=P((0,Ee.getCurrentTransform)(De),m.interpolate),c(De,B,0,0,B.width,B.height,0,0,R,G),De.globalCompositeOperation="source-in";const Me=le.Util.transform((0,Ee.getCurrentTransformInverse)(De),[1,0,0,1,-xe,-Ce]);return De.fillStyle=U?K.getPattern(_,this,Me,se.PathType.FILL):K,De.fillRect(0,0,R,G),L&&!U&&(this.cachedCanvases.delete("fillCanvas"),L.set(S,we.canvas)),{canvas:we.canvas,offsetX:Math.round(xe),offsetY:Math.round(Ce)}}setLineWidth(m){m!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=m,this.ctx.lineWidth=m}setLineCap(m){this.ctx.lineCap=F[m]}setLineJoin(m){this.ctx.lineJoin=I[m]}setMiterLimit(m){this.ctx.miterLimit=m}setDash(m,_){const R=this.ctx;void 0!==R.setLineDash&&(R.setLineDash(m),R.lineDashOffset=_)}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[_,R]of m)switch(_){case"LW":this.setLineWidth(R);break;case"LC":this.setLineCap(R);break;case"LJ":this.setLineJoin(R);break;case"ML":this.setMiterLimit(R);break;case"D":this.setDash(R[0],R[1]);break;case"RI":this.setRenderingIntent(R);break;case"FL":this.setFlatness(R);break;case"Font":this.setFont(R[0],R[1]);break;case"CA":this.current.strokeAlpha=R;break;case"ca":this.current.fillAlpha=R,this.ctx.globalAlpha=R;break;case"BM":this.ctx.globalCompositeOperation=R;break;case"SMask":this.current.activeSMask=R?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(R)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const m=this.inSMaskMode;this.current.activeSMask&&!m?this.beginSMaskMode():!this.current.activeSMask&&m&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const G=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=G.context;const K=this.ctx;K.setTransform(...(0,Ee.getCurrentTransform)(this.suspendedCtx)),N(this.suspendedCtx,K),function re(p,m){if(p._removeMirroring)throw new Error("Context is already forwarding operations.");p.__originalSave=p.save,p.__originalRestore=p.restore,p.__originalRotate=p.rotate,p.__originalScale=p.scale,p.__originalTranslate=p.translate,p.__originalTransform=p.transform,p.__originalSetTransform=p.setTransform,p.__originalResetTransform=p.resetTransform,p.__originalClip=p.clip,p.__originalMoveTo=p.moveTo,p.__originalLineTo=p.lineTo,p.__originalBezierCurveTo=p.bezierCurveTo,p.__originalRect=p.rect,p.__originalClosePath=p.closePath,p.__originalBeginPath=p.beginPath,p._removeMirroring=()=>{p.save=p.__originalSave,p.restore=p.__originalRestore,p.rotate=p.__originalRotate,p.scale=p.__originalScale,p.translate=p.__originalTranslate,p.transform=p.__originalTransform,p.setTransform=p.__originalSetTransform,p.resetTransform=p.__originalResetTransform,p.clip=p.__originalClip,p.moveTo=p.__originalMoveTo,p.lineTo=p.__originalLineTo,p.bezierCurveTo=p.__originalBezierCurveTo,p.rect=p.__originalRect,p.closePath=p.__originalClosePath,p.beginPath=p.__originalBeginPath,delete p._removeMirroring},p.save=function(){m.save(),this.__originalSave()},p.restore=function(){m.restore(),this.__originalRestore()},p.translate=function(R,G){m.translate(R,G),this.__originalTranslate(R,G)},p.scale=function(R,G){m.scale(R,G),this.__originalScale(R,G)},p.transform=function(R,G,K,U,z,L){m.transform(R,G,K,U,z,L),this.__originalTransform(R,G,K,U,z,L)},p.setTransform=function(R,G,K,U,z,L){m.setTransform(R,G,K,U,z,L),this.__originalSetTransform(R,G,K,U,z,L)},p.resetTransform=function(){m.resetTransform(),this.__originalResetTransform()},p.rotate=function(R){m.rotate(R),this.__originalRotate(R)},p.clip=function(R){m.clip(R),this.__originalClip(R)},p.moveTo=function(_,R){m.moveTo(_,R),this.__originalMoveTo(_,R)},p.lineTo=function(_,R){m.lineTo(_,R),this.__originalLineTo(_,R)},p.bezierCurveTo=function(_,R,G,K,U,z){m.bezierCurveTo(_,R,G,K,U,z),this.__originalBezierCurveTo(_,R,G,K,U,z)},p.rect=function(_,R,G,K){m.rect(_,R,G,K),this.__originalRect(_,R,G,K)},p.closePath=function(){m.closePath(),this.__originalClosePath()},p.beginPath=function(){m.beginPath(),this.__originalBeginPath()}}(K,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),N(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(m){this.current.activeSMask&&(m?(m[0]=Math.floor(m[0]),m[1]=Math.floor(m[1]),m[2]=Math.ceil(m[2]),m[3]=Math.ceil(m[3])):m=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function C(p,m,_,R){const G=R[0],K=R[1],U=R[2]-G,z=R[3]-K;0===U||0===z||(function q(p,m,_,R,G,K,U,z,L,S,B){const J=!!K,ie=J?K[0]:0,ce=J?K[1]:0,pe=J?K[2]:0,ye="Luminosity"===G?b:A,_e=Math.min(R,Math.ceil(1048576/_));for(let we=0;we<R;we+=_e){const De=Math.min(_e,R-we),xe=p.getImageData(z-S,we+(L-B),_,De),Ce=m.getImageData(z,we+L,_,De);J&&M(xe.data,ie,ce,pe),ye(xe.data,Ce.data,U),m.putImageData(Ce,z,we+L)}}(m.context,_,U,z,m.subtype,m.backdrop,m.transferMap,G,K,m.offsetX,m.offsetY),p.save(),p.globalAlpha=1,p.globalCompositeOperation="source-over",p.setTransform(1,0,0,1,0,0),p.drawImage(_.canvas,0,0),p.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,m),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(N(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const m=this.current;this.stateStack.push(m),this.current=m.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),N(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(m,_,R,G,K,U){this.ctx.transform(m,_,R,G,K,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(m,_,R){const G=this.ctx,K=this.current;let L,S,U=K.x,z=K.y;const B=(0,Ee.getCurrentTransform)(G),J=0===B[0]&&0===B[3]||0===B[1]&&0===B[2],ie=J?R.slice(0):null;for(let ce=0,pe=0,ye=m.length;ce<ye;ce++)switch(0|m[ce]){case le.OPS.rectangle:U=_[pe++],z=_[pe++];const Te=_[pe++],_e=_[pe++],we=U+Te,De=z+_e;G.moveTo(U,z),0===Te||0===_e?G.lineTo(we,De):(G.lineTo(we,z),G.lineTo(we,De),G.lineTo(U,De)),J||K.updateRectMinMax(B,[U,z,we,De]),G.closePath();break;case le.OPS.moveTo:U=_[pe++],z=_[pe++],G.moveTo(U,z),J||K.updatePathMinMax(B,U,z);break;case le.OPS.lineTo:U=_[pe++],z=_[pe++],G.lineTo(U,z),J||K.updatePathMinMax(B,U,z);break;case le.OPS.curveTo:L=U,S=z,U=_[pe+4],z=_[pe+5],G.bezierCurveTo(_[pe],_[pe+1],_[pe+2],_[pe+3],U,z),K.updateCurvePathMinMax(B,L,S,_[pe],_[pe+1],_[pe+2],_[pe+3],U,z,ie),pe+=6;break;case le.OPS.curveTo2:L=U,S=z,G.bezierCurveTo(U,z,_[pe],_[pe+1],_[pe+2],_[pe+3]),K.updateCurvePathMinMax(B,L,S,U,z,_[pe],_[pe+1],_[pe+2],_[pe+3],ie),U=_[pe+2],z=_[pe+3],pe+=4;break;case le.OPS.curveTo3:L=U,S=z,U=_[pe+2],z=_[pe+3],G.bezierCurveTo(_[pe],_[pe+1],U,z,U,z),K.updateCurvePathMinMax(B,L,S,_[pe],_[pe+1],U,z,U,z,ie),pe+=4;break;case le.OPS.closePath:G.closePath()}J&&K.updateScalingPathMinMax(B,ie),K.setCurrentPoint(U,z)}closePath(){this.ctx.closePath()}stroke(m=!0){const _=this.ctx,R=this.current.strokeColor;_.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof R&&R?.getPattern?(_.save(),_.strokeStyle=R.getPattern(_,this,(0,Ee.getCurrentTransformInverse)(_),se.PathType.STROKE),this.rescaleAndStroke(!1),_.restore()):this.rescaleAndStroke(!0)),m&&this.consumePath(this.current.getClippedPathBoundingBox()),_.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(m=!0){const _=this.ctx,R=this.current.fillColor;let K=!1;this.current.patternFill&&(_.save(),_.fillStyle=R.getPattern(_,this,(0,Ee.getCurrentTransformInverse)(_),se.PathType.FILL),K=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==U&&(this.pendingEOFill?(_.fill("evenodd"),this.pendingEOFill=!1):_.fill()),K&&_.restore(),m&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=j}eoClip(){this.pendingClip=E}beginText(){this.current.textMatrix=le.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const m=this.pendingTextPaths,_=this.ctx;if(void 0!==m){_.save(),_.beginPath();for(const R of m)_.setTransform(...R.transform),_.translate(R.x,R.y),R.addToPath(_,R.fontSize);_.restore(),_.clip(),_.beginPath(),delete this.pendingTextPaths}else _.beginPath()}setCharSpacing(m){this.current.charSpacing=m}setWordSpacing(m){this.current.wordSpacing=m}setHScale(m){this.current.textHScale=m/100}setLeading(m){this.current.leading=-m}setFont(m,_){const R=this.commonObjs.get(m),G=this.current;if(!R)throw new Error(`Can't find font for ${m}`);if(G.fontMatrix=R.fontMatrix||le.FONT_IDENTITY_MATRIX,(0===G.fontMatrix[0]||0===G.fontMatrix[3])&&(0,le.warn)("Invalid font matrix for font "+m),_<0?(_=-_,G.fontDirection=-1):G.fontDirection=1,this.current.font=R,this.current.fontSize=_,R.isType3Font)return;const K=R.loadedName||"sans-serif",U=R.systemFontInfo?.css||`"${K}", ${R.fallbackName}`;let z="normal";R.black?z="900":R.bold&&(z="bold");const L=R.italic?"italic":"normal";let S=_;_<16?S=16:_>100&&(S=100),this.current.fontSizeScale=_/S,this.ctx.font=`${L} ${z} ${S}px ${U}`}setTextRenderingMode(m){this.current.textRenderingMode=m}setTextRise(m){this.current.textRise=m}moveText(m,_){this.current.x=this.current.lineX+=m,this.current.y=this.current.lineY+=_}setLeadingMoveText(m,_){this.setLeading(-_),this.moveText(m,_)}setTextMatrix(m,_,R,G,K,U){this.current.textMatrix=[m,_,R,G,K,U],this.current.textMatrixScale=Math.hypot(m,_),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(m,_,R,G){const K=this.ctx,U=this.current,z=U.font,L=U.textRenderingMode,S=U.fontSize/U.fontSizeScale,B=L&le.TextRenderingMode.FILL_STROKE_MASK,J=!!(L&le.TextRenderingMode.ADD_TO_PATH_FLAG),ie=U.patternFill&&!z.missingFile;let ce;(z.disableFontFace||J||ie)&&(ce=z.getPathGenerator(this.commonObjs,m)),z.disableFontFace||ie?(K.save(),K.translate(_,R),K.beginPath(),ce(K,S),G&&K.setTransform(...G),(B===le.TextRenderingMode.FILL||B===le.TextRenderingMode.FILL_STROKE)&&K.fill(),(B===le.TextRenderingMode.STROKE||B===le.TextRenderingMode.FILL_STROKE)&&K.stroke(),K.restore()):((B===le.TextRenderingMode.FILL||B===le.TextRenderingMode.FILL_STROKE)&&K.fillText(m,_,R),(B===le.TextRenderingMode.STROKE||B===le.TextRenderingMode.FILL_STROKE)&&K.strokeText(m,_,R)),J&&(this.pendingTextPaths||=[]).push({transform:(0,Ee.getCurrentTransform)(K),x:_,y:R,fontSize:S,addToPath:ce})}get isFontSubpixelAAEnabled(){const{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);const _=m.getImageData(0,0,10,10).data;let R=!1;for(let G=3;G<_.length;G+=4)if(_[G]>0&&_[G]<255){R=!0;break}return(0,le.shadow)(this,"isFontSubpixelAAEnabled",R)}showText(m){const _=this.current,R=_.font;if(R.isType3Font)return this.showType3Text(m);const G=_.fontSize;if(0===G)return;const K=this.ctx,U=_.fontSizeScale,z=_.charSpacing,L=_.wordSpacing,S=_.fontDirection,B=_.textHScale*S,J=m.length,ie=R.vertical,ce=ie?1:-1,pe=R.defaultVMetrics,ye=G*_.fontMatrix[0],Te=_.textRenderingMode===le.TextRenderingMode.FILL&&!R.disableFontFace&&!_.patternFill;let _e;if(K.save(),K.transform(..._.textMatrix),K.translate(_.x,_.y+_.textRise),K.scale(B,S>0?-1:1),_.patternFill){K.save();const Me=_.fillColor.getPattern(K,this,(0,Ee.getCurrentTransformInverse)(K),se.PathType.FILL);_e=(0,Ee.getCurrentTransform)(K),K.restore(),K.fillStyle=Me}let we=_.lineWidth;const De=_.textMatrixScale;if(0===De||0===we){const Me=_.textRenderingMode&le.TextRenderingMode.FILL_STROKE_MASK;(Me===le.TextRenderingMode.STROKE||Me===le.TextRenderingMode.FILL_STROKE)&&(we=this.getSinglePixelWidth())}else we/=De;if(1!==U&&(K.scale(U,U),we/=U),K.lineWidth=we,R.isInvalidPDFjsFont){const Me=[];let Ne=0;for(const We of m)Me.push(We.unicode),Ne+=We.width;return K.fillText(Me.join(""),0,0),_.x+=Ne*ye*B,K.restore(),void this.compose()}let Ce,xe=0;for(Ce=0;Ce<J;++Ce){const Me=m[Ce];if("number"==typeof Me){xe+=ce*Me*G/1e3;continue}let Ne=!1;const We=(Me.isSpace?L:0)+z,Xe=Me.fontChar,Qe=Me.accent;let Ye,Je,He=Me.width;if(ie){const dt=Me.vmetric||pe,pt=-(Me.vmetric?dt[1]:.5*He)*ye;He=dt?-dt[0]:He,Ye=pt/U,Je=(xe+dt[2]*ye)/U}else Ye=xe/U,Je=0;if(R.remeasure&&He>0){const dt=1e3*K.measureText(Xe).width/G*U;if(He<dt&&this.isFontSubpixelAAEnabled){const pt=He/dt;Ne=!0,K.save(),K.scale(pt,1),Ye/=pt}else He!==dt&&(Ye+=(He-dt)/2e3*G/U)}this.contentVisible&&(Me.isInFont||R.missingFile)&&(Te&&!Qe?K.fillText(Xe,Ye,Je):(this.paintChar(Xe,Ye,Je,_e),Qe&&this.paintChar(Qe.fontChar,Ye+G*Qe.offset.x/U,Je-G*Qe.offset.y/U,_e))),xe+=ie?He*ye-We*S:He*ye+We*S,Ne&&K.restore()}ie?_.y-=xe:_.x+=xe*B,K.restore(),this.compose()}showType3Text(m){const _=this.ctx,R=this.current,G=R.font,K=R.fontSize,U=R.fontDirection,z=G.vertical?1:-1,L=R.charSpacing,S=R.wordSpacing,B=R.textHScale*U,J=R.fontMatrix||le.FONT_IDENTITY_MATRIX,ie=m.length;let pe,ye,Te,_e;if(R.textRenderingMode!==le.TextRenderingMode.INVISIBLE&&0!==K){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,_.save(),_.transform(...R.textMatrix),_.translate(R.x,R.y),_.scale(B,U),pe=0;pe<ie;++pe){if(ye=m[pe],"number"==typeof ye){_e=z*ye*K/1e3,this.ctx.translate(_e,0),R.x+=_e*B;continue}const we=(ye.isSpace?S:0)+L,De=G.charProcOperatorList[ye.operatorListId];De?(this.contentVisible&&(this.processingType3=ye,this.save(),_.scale(K,K),_.transform(...J),this.executeOperatorList(De),this.restore()),Te=le.Util.applyTransform([ye.width,0],J)[0]*K+we,_.translate(Te,0),R.x+=Te*B):(0,le.warn)(`Type3 character "${ye.operatorListId}" is not available.`)}_.restore(),this.processingType3=null}}setCharWidth(m,_){}setCharWidthAndBounds(m,_,R,G,K,U){this.ctx.rect(R,G,K-R,U-G),this.ctx.clip(),this.endPath()}getColorN_Pattern(m){let _;if("TilingPattern"===m[0]){const R=m[1],G=this.baseTransform||(0,Ee.getCurrentTransform)(this.ctx);_=new se.TilingPattern(m,R,this.ctx,{createCanvasGraphics:U=>new x(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},G)}else _=this._getPattern(m[1],m[2]);return _}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(m,_,R){const G=le.Util.makeHexColor(m,_,R);this.ctx.strokeStyle=G,this.current.strokeColor=G}setFillRGBColor(m,_,R){const G=le.Util.makeHexColor(m,_,R);this.ctx.fillStyle=G,this.current.fillColor=G,this.current.patternFill=!1}_getPattern(m,_=null){let R;return this.cachedPatterns.has(m)?R=this.cachedPatterns.get(m):(R=(0,se.getShadingPattern)(this.getObject(m)),this.cachedPatterns.set(m,R)),_&&(R.matrix=_),R}shadingFill(m){if(!this.contentVisible)return;const _=this.ctx;this.save();const R=this._getPattern(m);_.fillStyle=R.getPattern(_,this,(0,Ee.getCurrentTransformInverse)(_),se.PathType.SHADING);const G=(0,Ee.getCurrentTransformInverse)(_);if(G){const{width:K,height:U}=_.canvas,[z,L,S,B]=le.Util.getAxialAlignedBoundingBox([0,0,K,U],G);this.ctx.fillRect(z,L,S-z,B-L)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,le.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,le.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(m,_){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(m)&&6===m.length&&this.transform(...m),this.baseTransform=(0,Ee.getCurrentTransform)(this.ctx),_)&&(this.ctx.rect(_[0],_[1],_[2]-_[0],_[3]-_[1]),this.current.updateRectMinMax((0,Ee.getCurrentTransform)(this.ctx),_),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(m){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const _=this.ctx;m.isolated||(0,le.info)("TODO: Support non-isolated groups."),m.knockout&&(0,le.warn)("Knockout groups not supported.");const R=(0,Ee.getCurrentTransform)(_);if(m.matrix&&_.transform(...m.matrix),!m.bbox)throw new Error("Bounding box is required.");let G=le.Util.getAxialAlignedBoundingBox(m.bbox,(0,Ee.getCurrentTransform)(_));G=le.Util.intersect(G,[0,0,_.canvas.width,_.canvas.height])||[0,0,0,0];const U=Math.floor(G[0]),z=Math.floor(G[1]);let L=Math.max(Math.ceil(G[2])-U,1),S=Math.max(Math.ceil(G[3])-z,1),B=1,J=1;L>ee&&(B=L/ee,L=ee),S>ee&&(J=S/ee,S=ee),this.current.startNewPathAndClipBox([0,0,L,S]);let ie="groupAt"+this.groupLevel;m.smask&&(ie+="_smask_"+this.smaskCounter++%2);const ce=this.cachedCanvases.getCanvas(ie,L,S),pe=ce.context;pe.scale(1/B,1/J),pe.translate(-U,-z),pe.transform(...R),m.smask?this.smaskStack.push({canvas:ce.canvas,context:pe,offsetX:U,offsetY:z,scaleX:B,scaleY:J,subtype:m.smask.subtype,backdrop:m.smask.backdrop,transferMap:m.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate(U,z),_.scale(B,J),_.save()),N(_,pe),this.ctx=pe,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(_),this.groupLevel++}endGroup(m){if(!this.contentVisible)return;this.groupLevel--;const _=this.ctx,R=this.groupStack.pop();if(this.ctx=R,this.ctx.imageSmoothingEnabled=!1,m.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const G=(0,Ee.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...G);const K=le.Util.getAxialAlignedBoundingBox([0,0,_.canvas.width,_.canvas.height],G);this.ctx.drawImage(_.canvas,0,0),this.ctx.restore(),this.compose(K)}}beginAnnotation(m,_,R,G,K){if(this.#e(),O(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(_)&&4===_.length){const U=_[2]-_[0],z=_[3]-_[1];if(K&&this.annotationCanvasMap){(R=R.slice())[4]-=_[0],R[5]-=_[1],(_=_.slice())[0]=_[1]=0,_[2]=U,_[3]=z;const[L,S]=le.Util.singularValueDecompose2dScale((0,Ee.getCurrentTransform)(this.ctx)),{viewportScale:B}=this,J=Math.ceil(U*this.outputScaleX*B),ie=Math.ceil(z*this.outputScaleY*B);this.annotationCanvas=this.canvasFactory.create(J,ie);const{canvas:ce,context:pe}=this.annotationCanvas;this.annotationCanvasMap.set(m,ce),this.annotationCanvas.savedCtx=this.ctx,this.ctx=pe,this.ctx.save(),this.ctx.setTransform(L,0,0,-S,0,z*S),O(this.ctx)}else O(this.ctx),this.ctx.rect(_[0],_[1],U,z),this.ctx.clip(),this.endPath()}this.current=new ae(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...R),this.transform(...G)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(m){if(!this.contentVisible)return;const _=m.count;(m=this.getObject(m.data,m)).count=_;const R=this.ctx,G=this.processingType3;if(G&&(void 0===G.compiled&&(G.compiled=function $(p){const{width:m,height:_}=p;if(m>1e3||_>1e3)return null;const G=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),K=m+1;let z,L,S,U=new Uint8Array(K*(_+1));const B=m+7&-8;let J=new Uint8Array(B*_),ie=0;for(const _e of p.data){let we=128;for(;we>0;)J[ie++]=_e&we?0:255,we>>=1}let ce=0;for(ie=0,0!==J[ie]&&(U[0]=1,++ce),L=1;L<m;L++)J[ie]!==J[ie+1]&&(U[L]=J[ie]?2:1,++ce),ie++;for(0!==J[ie]&&(U[L]=2,++ce),z=1;z<_;z++){ie=z*B,S=z*K,J[ie-B]!==J[ie]&&(U[S]=J[ie]?1:8,++ce);let _e=(J[ie]?4:0)+(J[ie-B]?8:0);for(L=1;L<m;L++)_e=(_e>>2)+(J[ie+1]?4:0)+(J[ie-B+1]?8:0),G[_e]&&(U[S+L]=G[_e],++ce),ie++;if(J[ie-B]!==J[ie]&&(U[S+L]=J[ie]?2:4,++ce),ce>1e3)return null}for(ie=B*(_-1),S=z*K,0!==J[ie]&&(U[S]=8,++ce),L=1;L<m;L++)J[ie]!==J[ie+1]&&(U[S+L]=J[ie]?4:8,++ce),ie++;if(0!==J[ie]&&(U[S+L]=4,++ce),ce>1e3)return null;const pe=new Int32Array([0,K,-1,0,-K,0,0,0,1]),ye=new Path2D;for(z=0;ce&&z<=_;z++){let _e=z*K;const we=_e+m;for(;_e<we&&!U[_e];)_e++;if(_e===we)continue;ye.moveTo(_e%K,z);const De=_e;let xe=U[_e];do{const Ce=pe[xe];do{_e+=Ce}while(!U[_e]);const Me=U[_e];5!==Me&&10!==Me?(xe=Me,U[_e]=0):(xe=Me&51*xe>>4,U[_e]&=xe>>2|xe<<2),ye.lineTo(_e%K,_e/K|0),U[_e]||--ce}while(De!==_e);--z}return J=null,U=null,function(_e){_e.save(),_e.scale(1/m,-1/_),_e.translate(0,-_),_e.fill(ye),_e.beginPath(),_e.restore()}}(m)),G.compiled))return void G.compiled(R);const K=this._createMaskCanvas(m),U=K.canvas;R.save(),R.setTransform(1,0,0,1,0,0),R.drawImage(U,K.offsetX,K.offsetY),R.restore(),this.compose()}paintImageMaskXObjectRepeat(m,_,R=0,G=0,K,U){if(!this.contentVisible)return;m=this.getObject(m.data,m);const z=this.ctx;z.save();const L=(0,Ee.getCurrentTransform)(z);z.transform(_,R,G,K,0,0);const S=this._createMaskCanvas(m);z.setTransform(1,0,0,1,S.offsetX-L[4],S.offsetY-L[5]);for(let B=0,J=U.length;B<J;B+=2){const ie=le.Util.transform(L,[_,R,G,K,U[B],U[B+1]]),[ce,pe]=le.Util.applyTransform([0,0],ie);z.drawImage(S.canvas,ce,pe)}z.restore(),this.compose()}paintImageMaskXObjectGroup(m){if(!this.contentVisible)return;const _=this.ctx,R=this.current.fillColor,G=this.current.patternFill;for(const K of m){const{data:U,width:z,height:L,transform:S}=K,B=this.cachedCanvases.getCanvas("maskCanvas",z,L),J=B.context;J.save(),W(J,this.getObject(U,K)),J.globalCompositeOperation="source-in",J.fillStyle=G?R.getPattern(J,this,(0,Ee.getCurrentTransformInverse)(_),se.PathType.FILL):R,J.fillRect(0,0,z,L),J.restore(),_.save(),_.transform(...S),_.scale(1,-1),c(_,B.canvas,0,0,z,L,0,-1,1,1),_.restore()}this.compose()}paintImageXObject(m){if(!this.contentVisible)return;const _=this.getObject(m);_?this.paintInlineImageXObject(_):(0,le.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(m,_,R,G){if(!this.contentVisible)return;const K=this.getObject(m);if(!K)return void(0,le.warn)("Dependent image isn't ready yet");const U=K.width,z=K.height,L=[];for(let S=0,B=G.length;S<B;S+=2)L.push({transform:[_,0,0,R,G[S],G[S+1]],x:0,y:0,w:U,h:z});this.paintInlineImageXObjectGroup(K,L)}applyTransferMapsToCanvas(m){return"none"!==this.current.transferMaps&&(m.filter=this.current.transferMaps,m.drawImage(m.canvas,0,0),m.filter="none"),m.canvas}applyTransferMapsToBitmap(m){if("none"===this.current.transferMaps)return m.bitmap;const{bitmap:_,width:R,height:G}=m,K=this.cachedCanvases.getCanvas("inlineImage",R,G),U=K.context;return U.filter=this.current.transferMaps,U.drawImage(_,0,0),U.filter="none",K.canvas}paintInlineImageXObject(m){if(!this.contentVisible)return;const _=m.width,R=m.height,G=this.ctx;if(this.save(),!le.isNodeJS){const{filter:z}=G;"none"!==z&&""!==z&&(G.filter="none")}let K;if(G.scale(1/_,-1/R),m.bitmap)K=this.applyTransferMapsToBitmap(m);else if("function"==typeof HTMLElement&&m instanceof HTMLElement||!m.data)K=m;else{const L=this.cachedCanvases.getCanvas("inlineImage",_,R).context;oe(L,m),K=this.applyTransferMapsToCanvas(L)}const U=this._scaleImage(K,(0,Ee.getCurrentTransformInverse)(G));G.imageSmoothingEnabled=P((0,Ee.getCurrentTransform)(G),m.interpolate),c(G,U.img,0,0,U.paintWidth,U.paintHeight,0,-R,_,R),this.compose(),this.restore()}paintInlineImageXObjectGroup(m,_){if(!this.contentVisible)return;const R=this.ctx;let G;if(m.bitmap)G=m.bitmap;else{const L=this.cachedCanvases.getCanvas("inlineImage",m.width,m.height).context;oe(L,m),G=this.applyTransferMapsToCanvas(L)}for(const K of _)R.save(),R.transform(...K.transform),R.scale(1,-1),c(R,G,K.x,K.y,K.w,K.h,0,-1,1,1),R.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(m){}markPointProps(m,_){}beginMarkedContent(m){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(m,_){this.markedContentStack.push("OC"===m?{visible:this.optionalContentConfig.isVisible(_)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(m){const _=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(m);const R=this.ctx;this.pendingClip&&(_||(this.pendingClip===E?R.clip("evenodd"):R.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),R.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,Ee.getCurrentTransform)(this.ctx);if(0===m[1]&&0===m[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const _=Math.abs(m[0]*m[3]-m[2]*m[1]),R=Math.hypot(m[0],m[2]),G=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(R,G)/_}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:m}=this.current,{a:_,b:R,c:G,d:K}=this.ctx.getTransform();let U,z;if(0===R&&0===G){const L=Math.abs(_),S=Math.abs(K);if(L===S)if(0===m)U=z=1/L;else{const B=L*m;U=z=B<1?1/B:1}else if(0===m)U=1/L,z=1/S;else{const B=L*m,J=S*m;U=B<1?1/B:1,z=J<1?1/J:1}}else{const L=Math.abs(_*K-R*G),S=Math.hypot(_,R),B=Math.hypot(G,K);if(0===m)U=B/L,z=S/L;else{const J=m*L;U=B>J?B/J:1,z=S>J?S/J:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=z}return this._cachedScaleForStroking}rescaleAndStroke(m){const{ctx:_}=this,{lineWidth:R}=this.current,[G,K]=this.getScaleForStroking();if(_.lineWidth=R||1,1===G&&1===K)return void _.stroke();const U=_.getLineDash();if(m&&_.save(),_.scale(G,K),U.length>0){const z=Math.max(G,K);_.setLineDash(U.map(L=>L/z)),_.lineDashOffset/=z}_.stroke(),m&&_.restore()}isContentVisible(){for(let m=this.markedContentStack.length-1;m>=0;m--)if(!this.markedContentStack[m].visible)return!1;return!0}}he.CanvasGraphics=x;for(const p in le.OPS)void 0!==x.prototype[p]&&(x.prototype[le.OPS[p]]=x.prototype[p])},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.TilingPattern=he.PathType=void 0,he.getShadingPattern=function te(c){switch(c[0]){case"RadialAxial":return new fe(c);case"Mesh":return new V(c);case"Dummy":return new H}throw new Error(`Unknown IR type: ${c[0]}`)};var le=Oe(1),Ee=Oe(6);const se={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function y(c,$){if(!$)return;const ae=$[2]-$[0],oe=$[3]-$[1],W=new Path2D;W.rect($[0],$[1],ae,oe),c.clip(W)}he.PathType=se;class k{constructor(){this.constructor===k&&(0,le.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,le.unreachable)("Abstract method `getPattern` called.")}}class fe extends k{constructor($){super(),this._type=$[1],this._bbox=$[2],this._colorStops=$[3],this._p0=$[4],this._p1=$[5],this._r0=$[6],this._r1=$[7],this.matrix=null}_createGradient($){let ae;"axial"===this._type?ae=$.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(ae=$.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const oe of this._colorStops)ae.addColorStop(oe[0],oe[1]);return ae}getPattern($,ae,oe,W){let N;if(W===se.STROKE||W===se.FILL){const O=ae.current.getClippedPathBoundingBox(W,(0,Ee.getCurrentTransform)($))||[0,0,0,0],M=Math.ceil(O[2]-O[0])||1,A=Math.ceil(O[3]-O[1])||1,b=ae.cachedCanvases.getCanvas("pattern",M,A,!0),q=b.context;q.clearRect(0,0,q.canvas.width,q.canvas.height),q.beginPath(),q.rect(0,0,q.canvas.width,q.canvas.height),q.translate(-O[0],-O[1]),oe=le.Util.transform(oe,[1,0,0,1,O[0],O[1]]),q.transform(...ae.baseTransform),this.matrix&&q.transform(...this.matrix),y(q,this._bbox),q.fillStyle=this._createGradient(q),q.fill(),N=$.createPattern(b.canvas,"no-repeat");const C=new DOMMatrix(oe);N.setTransform(C)}else y($,this._bbox),N=this._createGradient($);return N}}function ee(c,$,ae,oe,W,N,O,M){const A=$.coords,b=$.colors,q=c.data,C=4*c.width;let P;A[ae+1]>A[oe+1]&&(P=ae,ae=oe,oe=P,P=N,N=O,O=P),A[oe+1]>A[W+1]&&(P=oe,oe=W,W=P,P=O,O=M,M=P),A[ae+1]>A[oe+1]&&(P=ae,ae=oe,oe=P,P=N,N=O,O=P);const F=(A[ae]+$.offsetX)*$.scaleX,I=(A[ae+1]+$.offsetY)*$.scaleY,j=(A[oe]+$.offsetX)*$.scaleX,E=(A[oe+1]+$.offsetY)*$.scaleY,x=(A[W]+$.offsetX)*$.scaleX,p=(A[W+1]+$.offsetY)*$.scaleY;if(I>=p)return;const m=b[N],_=b[N+1],R=b[N+2],G=b[O],K=b[O+1],U=b[O+2],z=b[M],L=b[M+1],S=b[M+2],B=Math.round(I),J=Math.round(p);let ie,ce,pe,ye,Te,_e,we,De;for(let xe=B;xe<=J;xe++){if(xe<E){const Xe=xe<I?0:(I-xe)/(I-E);ie=F-(F-j)*Xe,ce=m-(m-G)*Xe,pe=_-(_-K)*Xe,ye=R-(R-U)*Xe}else{let Xe;Xe=xe>p?1:E===p?0:(E-xe)/(E-p),ie=j-(j-x)*Xe,ce=G-(G-z)*Xe,pe=K-(K-L)*Xe,ye=U-(U-S)*Xe}let Ce;Ce=xe<I?0:xe>p?1:(I-xe)/(I-p),Te=F-(F-x)*Ce,_e=m-(m-z)*Ce,we=_-(_-L)*Ce,De=R-(R-S)*Ce;const Me=Math.round(Math.min(ie,Te)),Ne=Math.round(Math.max(ie,Te));let We=C*xe+4*Me;for(let Xe=Me;Xe<=Ne;Xe++)Ce=(ie-Xe)/(ie-Te),Ce<0?Ce=0:Ce>1&&(Ce=1),q[We++]=ce-(ce-_e)*Ce|0,q[We++]=pe-(pe-we)*Ce|0,q[We++]=ye-(ye-De)*Ce|0,q[We++]=255}}function e(c,$,ae){const oe=$.coords,W=$.colors;let N,O;switch($.type){case"lattice":const M=$.verticesPerRow,A=Math.floor(oe.length/M)-1,b=M-1;for(N=0;N<A;N++){let q=N*M;for(let C=0;C<b;C++,q++)ee(c,ae,oe[q],oe[q+1],oe[q+M],W[q],W[q+1],W[q+M]),ee(c,ae,oe[q+M+1],oe[q+1],oe[q+M],W[q+M+1],W[q+1],W[q+M])}break;case"triangles":for(N=0,O=oe.length;N<O;N+=3)ee(c,ae,oe[N],oe[N+1],oe[N+2],W[N],W[N+1],W[N+2]);break;default:throw new Error("illegal figure")}}class V extends k{constructor($){super(),this._coords=$[2],this._colors=$[3],this._figures=$[4],this._bounds=$[5],this._bbox=$[7],this._background=$[8],this.matrix=null}_createMeshCanvas($,ae,oe){const M=Math.floor(this._bounds[0]),A=Math.floor(this._bounds[1]),b=Math.ceil(this._bounds[2])-M,q=Math.ceil(this._bounds[3])-A,C=Math.min(Math.ceil(Math.abs(b*$[0]*1.1)),3e3),P=Math.min(Math.ceil(Math.abs(q*$[1]*1.1)),3e3),F=b/C,I=q/P,j={coords:this._coords,colors:this._colors,offsetX:-M,offsetY:-A,scaleX:1/F,scaleY:1/I},p=oe.getCanvas("mesh",C+4,P+4,!1),m=p.context,_=m.createImageData(C,P);if(ae){const G=_.data;for(let K=0,U=G.length;K<U;K+=4)G[K]=ae[0],G[K+1]=ae[1],G[K+2]=ae[2],G[K+3]=255}for(const G of this._figures)e(_,G,j);return m.putImageData(_,2,2),{canvas:p.canvas,offsetX:M-2*F,offsetY:A-2*I,scaleX:F,scaleY:I}}getPattern($,ae,oe,W){let N;if(y($,this._bbox),W===se.SHADING)N=le.Util.singularValueDecompose2dScale((0,Ee.getCurrentTransform)($));else if(N=le.Util.singularValueDecompose2dScale(ae.baseTransform),this.matrix){const M=le.Util.singularValueDecompose2dScale(this.matrix);N=[N[0]*M[0],N[1]*M[1]]}const O=this._createMeshCanvas(N,W===se.SHADING?null:this._background,ae.cachedCanvases);return W!==se.SHADING&&($.setTransform(...ae.baseTransform),this.matrix&&$.transform(...this.matrix)),$.translate(O.offsetX,O.offsetY),$.scale(O.scaleX,O.scaleY),$.createPattern(O.canvas,"no-repeat")}}class H extends k{getPattern(){return"hotpink"}}he.TilingPattern=(()=>{class c{static MAX_PATTERN_SIZE=3e3;constructor(ae,oe,W,N,O){this.operatorList=ae[2],this.matrix=ae[3]||[1,0,0,1,0,0],this.bbox=ae[4],this.xstep=ae[5],this.ystep=ae[6],this.paintType=ae[7],this.tilingType=ae[8],this.color=oe,this.ctx=W,this.canvasGraphicsFactory=N,this.baseTransform=O}createPatternCanvas(ae){const oe=this.operatorList,W=this.bbox,N=this.xstep,O=this.ystep,M=this.paintType,b=this.color,q=this.canvasGraphicsFactory;(0,le.info)("TilingType: "+this.tilingType);const C=W[0],P=W[1],F=W[2],I=W[3],j=le.Util.singularValueDecompose2dScale(this.matrix),E=le.Util.singularValueDecompose2dScale(this.baseTransform),x=[j[0]*E[0],j[1]*E[1]],p=this.getSizeAndScale(N,this.ctx.canvas.width,x[0]),m=this.getSizeAndScale(O,this.ctx.canvas.height,x[1]),_=ae.cachedCanvases.getCanvas("pattern",p.size,m.size,!0),R=_.context,G=q.createCanvasGraphics(R);G.groupLevel=ae.groupLevel,this.setFillAndStrokeStyleToContext(G,M,b);let K=C,U=P,z=F,L=I;return C<0&&(K=0,z+=Math.abs(C)),P<0&&(U=0,L+=Math.abs(P)),R.translate(-p.scale*K,-m.scale*U),G.transform(p.scale,0,0,m.scale,0,0),R.save(),this.clipBbox(G,K,U,z,L),G.baseTransform=(0,Ee.getCurrentTransform)(G.ctx),G.executeOperatorList(oe),G.endDrawing(),{canvas:_.canvas,scaleX:p.scale,scaleY:m.scale,offsetX:K,offsetY:U}}getSizeAndScale(ae,oe,W){ae=Math.abs(ae);const N=Math.max(c.MAX_PATTERN_SIZE,oe);let O=Math.ceil(ae*W);return O>=N?O=N:W=O/ae,{scale:W,size:O}}clipBbox(ae,oe,W,N,O){ae.ctx.rect(oe,W,N-oe,O-W),ae.current.updateRectMinMax((0,Ee.getCurrentTransform)(ae.ctx),[oe,W,N,O]),ae.clip(),ae.endPath()}setFillAndStrokeStyleToContext(ae,oe,W){const N=ae.ctx,O=ae.current;switch(oe){case 1:const M=this.ctx;N.fillStyle=M.fillStyle,N.strokeStyle=M.strokeStyle,O.fillColor=M.fillStyle,O.strokeColor=M.strokeStyle;break;case 2:const A=le.Util.makeHexColor(W[0],W[1],W[2]);N.fillStyle=A,N.strokeStyle=A,O.fillColor=A,O.strokeColor=A;break;default:throw new le.FormatError(`Unsupported paint type: ${oe}`)}}getPattern(ae,oe,W,N){let O=W;N!==se.SHADING&&(O=le.Util.transform(O,oe.baseTransform),this.matrix&&(O=le.Util.transform(O,this.matrix)));const M=this.createPatternCanvas(oe);let A=new DOMMatrix(O);A=A.translate(M.offsetX,M.offsetY),A=A.scale(1/M.scaleX,1/M.scaleY);const b=ae.createPattern(M.canvas,"repeat");return b.setTransform(A),b}}return c})()},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.convertBlackAndWhiteToRGBA=se,he.convertToRGBA=function Ee(fe){switch(fe.kind){case le.ImageKind.GRAYSCALE_1BPP:return se(fe);case le.ImageKind.RGB_24BPP:return function y({src:fe,srcPos:ee=0,dest:e,destPos:V=0}){let re=0;const f=fe.length>>2,c=new Uint32Array(fe.buffer,ee,f);if(le.FeatureTest.isLittleEndian){for(;re<f-2;re+=3,V+=4){const $=c[re],ae=c[re+1],oe=c[re+2];e[V]=4278190080|$,e[V+1]=$>>>24|ae<<8|4278190080,e[V+2]=ae>>>16|oe<<16|4278190080,e[V+3]=oe>>>8|4278190080}for(let $=4*re,ae=fe.length;$<ae;$+=3)e[V++]=fe[$]|fe[$+1]<<8|fe[$+2]<<16|4278190080}else{for(;re<f-2;re+=3,V+=4){const $=c[re],ae=c[re+1],oe=c[re+2];e[V]=255|$,e[V+1]=$<<24|ae>>>8|255,e[V+2]=ae<<16|oe>>>16|255,e[V+3]=oe<<8|255}for(let $=4*re,ae=fe.length;$<ae;$+=3)e[V++]=fe[$]<<24|fe[$+1]<<16|fe[$+2]<<8|255}return{srcPos:ee,destPos:V}}(fe)}return null},he.grayToRGBA=function k(fe,ee){if(le.FeatureTest.isLittleEndian)for(let e=0,V=fe.length;e<V;e++)ee[e]=65793*fe[e]|4278190080;else for(let e=0,V=fe.length;e<V;e++)ee[e]=16843008*fe[e]|255};var le=Oe(1);function se({src:fe,srcPos:ee=0,dest:e,width:V,height:H,nonBlackColor:te=4294967295,inverseDecode:re=!1}){const f=le.FeatureTest.isLittleEndian?4278190080:255,[c,$]=re?[te,f]:[f,te],ae=V>>3,oe=7&V,W=fe.length;e=new Uint32Array(e.buffer);let N=0;for(let O=0;O<H;O++){for(const A=ee+ae;ee<A;ee++){const b=ee<W?fe[ee]:255;e[N++]=128&b?$:c,e[N++]=64&b?$:c,e[N++]=32&b?$:c,e[N++]=16&b?$:c,e[N++]=8&b?$:c,e[N++]=4&b?$:c,e[N++]=2&b?$:c,e[N++]=1&b?$:c}if(0===oe)continue;const M=ee<W?fe[ee++]:255;for(let A=0;A<oe;A++)e[N++]=M&1<<7-A?$:c}return{srcPos:ee,destPos:N}}},(yt,he)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.GlobalWorkerOptions=void 0;const Oe=Object.create(null);he.GlobalWorkerOptions=Oe,Oe.workerPort=null,Oe.workerSrc=""},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.MessageHandler=void 0;var le=Oe(1);function y(fe){switch(fe instanceof Error||"object"==typeof fe&&null!==fe||(0,le.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),fe.name){case"AbortException":return new le.AbortException(fe.message);case"MissingPDFException":return new le.MissingPDFException(fe.message);case"PasswordException":return new le.PasswordException(fe.message,fe.code);case"UnexpectedResponseException":return new le.UnexpectedResponseException(fe.message,fe.status);case"UnknownErrorException":return new le.UnknownErrorException(fe.message,fe.details);default:return new le.UnknownErrorException(fe.message,fe.toString())}}he.MessageHandler=class k{constructor(ee,e,V){this.sourceName=ee,this.targetName=e,this.comObj=V,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=H=>{const te=H.data;if(te.targetName!==this.sourceName)return;if(te.stream)return void this.#t(te);if(te.callback){const f=te.callbackId,c=this.callbackCapabilities[f];if(!c)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],1===te.callback)c.resolve(te.data);else{if(2!==te.callback)throw new Error("Unexpected callback case");c.reject(y(te.reason))}return}const re=this.actionHandler[te.action];if(!re)throw new Error(`Unknown action from worker: ${te.action}`);if(te.callbackId){const f=this.sourceName,c=te.sourceName;new Promise(function($){$(re(te.data))}).then(function($){V.postMessage({sourceName:f,targetName:c,callback:1,callbackId:te.callbackId,data:$})},function($){V.postMessage({sourceName:f,targetName:c,callback:2,callbackId:te.callbackId,reason:y($)})})}else te.streamId?this.#e(te):re(te.data)},V.addEventListener("message",this._onComObjOnMessage)}on(ee,e){const V=this.actionHandler;if(V[ee])throw new Error(`There is already an actionName called "${ee}"`);V[ee]=e}send(ee,e,V){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ee,data:e},V)}sendWithPromise(ee,e,V){const H=this.callbackId++,te=new le.PromiseCapability;this.callbackCapabilities[H]=te;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ee,callbackId:H,data:e},V)}catch(re){te.reject(re)}return te.promise}sendWithStream(ee,e,V,H){const te=this.streamId++,re=this.sourceName,f=this.targetName,c=this.comObj;return new ReadableStream({start:$=>{const ae=new le.PromiseCapability;return this.streamControllers[te]={controller:$,startCall:ae,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:re,targetName:f,action:ee,streamId:te,data:e,desiredSize:$.desiredSize},H),ae.promise},pull:$=>{const ae=new le.PromiseCapability;return this.streamControllers[te].pullCall=ae,c.postMessage({sourceName:re,targetName:f,stream:6,streamId:te,desiredSize:$.desiredSize}),ae.promise},cancel:$=>{(0,le.assert)($ instanceof Error,"cancel must have a valid reason");const ae=new le.PromiseCapability;return this.streamControllers[te].cancelCall=ae,this.streamControllers[te].isClosed=!0,c.postMessage({sourceName:re,targetName:f,stream:1,streamId:te,reason:y($)}),ae.promise}},V)}#e(ee){const e=ee.streamId,V=this.sourceName,H=ee.sourceName,te=this.comObj,re=this,f=this.actionHandler[ee.action],c={enqueue($,ae=1,oe){if(this.isCancelled)return;const W=this.desiredSize;this.desiredSize-=ae,W>0&&this.desiredSize<=0&&(this.sinkCapability=new le.PromiseCapability,this.ready=this.sinkCapability.promise),te.postMessage({sourceName:V,targetName:H,stream:4,streamId:e,chunk:$},oe)},close(){this.isCancelled||(this.isCancelled=!0,te.postMessage({sourceName:V,targetName:H,stream:3,streamId:e}),delete re.streamSinks[e])},error($){(0,le.assert)($ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,te.postMessage({sourceName:V,targetName:H,stream:5,streamId:e,reason:y($)}))},sinkCapability:new le.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ee.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise(function($){$(f(ee.data,c))}).then(function(){te.postMessage({sourceName:V,targetName:H,stream:8,streamId:e,success:!0})},function($){te.postMessage({sourceName:V,targetName:H,stream:8,streamId:e,reason:y($)})})}#t(ee){const e=ee.streamId,V=this.sourceName,H=ee.sourceName,te=this.comObj,re=this.streamControllers[e],f=this.streamSinks[e];switch(ee.stream){case 8:ee.success?re.startCall.resolve():re.startCall.reject(y(ee.reason));break;case 7:ee.success?re.pullCall.resolve():re.pullCall.reject(y(ee.reason));break;case 6:if(!f){te.postMessage({sourceName:V,targetName:H,stream:7,streamId:e,success:!0});break}f.desiredSize<=0&&ee.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=ee.desiredSize,new Promise(function(c){c(f.onPull?.())}).then(function(){te.postMessage({sourceName:V,targetName:H,stream:7,streamId:e,success:!0})},function(c){te.postMessage({sourceName:V,targetName:H,stream:7,streamId:e,reason:y(c)})});break;case 4:if((0,le.assert)(re,"enqueue should have stream controller"),re.isClosed)break;re.controller.enqueue(ee.chunk);break;case 3:if((0,le.assert)(re,"close should have stream controller"),re.isClosed)break;re.isClosed=!0,re.controller.close(),this.#n(re,e);break;case 5:(0,le.assert)(re,"error should have stream controller"),re.controller.error(y(ee.reason)),this.#n(re,e);break;case 2:ee.success?re.cancelCall.resolve():re.cancelCall.reject(y(ee.reason)),this.#n(re,e);break;case 1:if(!f)break;new Promise(function(c){c(f.onCancel?.(y(ee.reason)))}).then(function(){te.postMessage({sourceName:V,targetName:H,stream:2,streamId:e,success:!0})},function(c){te.postMessage({sourceName:V,targetName:H,stream:2,streamId:e,reason:y(c)})}),f.sinkCapability.reject(y(ee.reason)),f.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#n(ee,e){var V=this;return _asyncToGenerator(function*(){yield Promise.allSettled([ee.startCall?.promise,ee.pullCall?.promise,ee.cancelCall?.promise]),delete V.streamControllers[e]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.Metadata=void 0;var le=Oe(1);he.Metadata=class Ee{#e;#t;constructor({parsedData:y,rawData:k}){this.#e=y,this.#t=k}getRaw(){return this.#t}get(y){return this.#e.get(y)??null}getAll(){return(0,le.objectFromMap)(this.#e)}has(y){return this.#e.has(y)}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.OptionalContentConfig=void 0;var le=Oe(1),Ee=Oe(8);const se=Symbol("INTERNAL");class y{#e=!0;constructor(ee,e){this.name=ee,this.intent=e}get visible(){return this.#e}_setVisible(ee,e){ee!==se&&(0,le.unreachable)("Internal method `_setVisible` called."),this.#e=e}}he.OptionalContentConfig=class k{#e=null;#t=new Map;#n=null;#i=null;constructor(ee){if(this.name=null,this.creator=null,null!==ee){this.name=ee.name,this.creator=ee.creator,this.#i=ee.order;for(const e of ee.groups)this.#t.set(e.id,new y(e.name,e.intent));if("OFF"===ee.baseState)for(const e of this.#t.values())e._setVisible(se,!1);for(const e of ee.on)this.#t.get(e)._setVisible(se,!0);for(const e of ee.off)this.#t.get(e)._setVisible(se,!1);this.#n=this.getHash()}}#o(ee){const e=ee.length;if(e<2)return!0;const V=ee[0];for(let H=1;H<e;H++){const te=ee[H];let re;if(Array.isArray(te))re=this.#o(te);else{if(!this.#t.has(te))return(0,le.warn)(`Optional content group not found: ${te}`),!0;re=this.#t.get(te).visible}switch(V){case"And":if(!re)return!1;break;case"Or":if(re)return!0;break;case"Not":return!re;default:return!0}}return"And"===V}isVisible(ee){if(0===this.#t.size)return!0;if(!ee)return(0,le.warn)("Optional content group not defined."),!0;if("OCG"===ee.type)return this.#t.has(ee.id)?this.#t.get(ee.id).visible:((0,le.warn)(`Optional content group not found: ${ee.id}`),!0);if("OCMD"===ee.type){if(ee.expression)return this.#o(ee.expression);if(!ee.policy||"AnyOn"===ee.policy){for(const e of ee.ids){if(!this.#t.has(e))return(0,le.warn)(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!0}return!1}if("AllOn"===ee.policy){for(const e of ee.ids){if(!this.#t.has(e))return(0,le.warn)(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!1}return!0}if("AnyOff"===ee.policy){for(const e of ee.ids){if(!this.#t.has(e))return(0,le.warn)(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!0}return!1}if("AllOff"===ee.policy){for(const e of ee.ids){if(!this.#t.has(e))return(0,le.warn)(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!1}return!0}return(0,le.warn)(`Unknown optional content policy ${ee.policy}.`),!0}return(0,le.warn)(`Unknown group type ${ee.type}.`),!0}setVisibility(ee,e=!0){this.#t.has(ee)?(this.#t.get(ee)._setVisible(se,!!e),this.#e=null):(0,le.warn)(`Optional content group not found: ${ee}`)}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,le.objectFromMap)(this.#t):null}getGroup(ee){return this.#t.get(ee)||null}getHash(){if(null!==this.#e)return this.#e;const ee=new Ee.MurmurHash3_64;for(const[e,V]of this.#t)ee.update(`${e}:${V.visible}`);return this.#e=ee.hexdigest()}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.PDFDataTransportStream=void 0;var le=Oe(1),Ee=Oe(6);he.PDFDataTransportStream=class se{constructor({length:ee,initialData:e,progressiveDone:V=!1,contentDispositionFilename:H=null,disableRange:te=!1,disableStream:re=!1},f){if((0,le.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=V,this._contentDispositionFilename=H,e?.length>0){const c=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!re,this._isRangeSupported=!te,this._contentLength=ee,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((c,$)=>{this._onReceiveData({begin:c,chunk:$})}),this._pdfDataRangeTransport.addProgressListener((c,$)=>{this._onProgress({loaded:c,total:$})}),this._pdfDataRangeTransport.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:ee,chunk:e}){const V=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(void 0===ee)this._fullRequestReader?this._fullRequestReader._enqueue(V):this._queuedChunks.push(V);else{const H=this._rangeReaders.some(function(te){return te._begin===ee&&(te._enqueue(V),!0)});(0,le.assert)(H,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(ee){void 0===ee.total?this._rangeReaders[0]?.onProgress?.({loaded:ee.loaded}):this._fullRequestReader?.onProgress?.({loaded:ee.loaded,total:ee.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(ee){const e=this._rangeReaders.indexOf(ee);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,le.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const ee=this._queuedChunks;return this._queuedChunks=null,new y(this,ee,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(ee,e){if(e<=this._progressiveDataLength)return null;const V=new k(this,ee,e);return this._pdfDataRangeTransport.requestDataRange(ee,e),this._rangeReaders.push(V),V}cancelAllRequests(ee){this._fullRequestReader?.cancel(ee);for(const e of this._rangeReaders.slice(0))e.cancel(ee);this._pdfDataRangeTransport.abort()}};class y{constructor(ee,e,V=!1,H=null){this._stream=ee,this._done=V||!1,this._filename=(0,Ee.isPdfFile)(H)?H:null,this._queuedChunks=e||[],this._loaded=0;for(const te of this._queuedChunks)this._loaded+=te.byteLength;this._requests=[],this._headersReady=Promise.resolve(),ee._fullRequestReader=this,this.onProgress=null}_enqueue(ee){this._done||(this._requests.length>0?this._requests.shift().resolve({value:ee,done:!1}):this._queuedChunks.push(ee),this._loaded+=ee.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var ee=this;return _asyncToGenerator(function*(){if(ee._queuedChunks.length>0)return{value:ee._queuedChunks.shift(),done:!1};if(ee._done)return{value:void 0,done:!0};const e=new le.PromiseCapability;return ee._requests.push(e),e.promise})()}cancel(ee){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k{constructor(ee,e,V){this._stream=ee,this._begin=e,this._end=V,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(ee){if(!this._done){if(0===this._requests.length)this._queuedChunk=ee;else{this._requests.shift().resolve({value:ee,done:!1});for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var ee=this;return _asyncToGenerator(function*(){if(ee._queuedChunk){const V=ee._queuedChunk;return ee._queuedChunk=null,{value:V,done:!1}}if(ee._done)return{value:void 0,done:!0};const e=new le.PromiseCapability;return ee._requests.push(e),e.promise})()}cancel(ee){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.PDFFetchStream=void 0;var le=Oe(1),Ee=Oe(20);function se(V,H,te){return{method:"GET",headers:V,signal:te.signal,mode:"cors",credentials:H?"include":"same-origin",redirect:"follow"}}function y(V){const H=new Headers;for(const te in V){const re=V[te];void 0!==re&&H.append(te,re)}return H}function k(V){return V instanceof Uint8Array?V.buffer:V instanceof ArrayBuffer?V:((0,le.warn)(`getArrayBuffer - unexpected data format: ${V}`),new Uint8Array(V).buffer)}he.PDFFetchStream=class fe{constructor(H){this.source=H,this.isHttp=/^https?:/i.test(H.url),this.httpHeaders=this.isHttp&&H.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,le.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ee(this),this._fullRequestReader}getRangeReader(H,te){if(te<=this._progressiveDataLength)return null;const re=new e(this,H,te);return this._rangeRequestReaders.push(re),re}cancelAllRequests(H){this._fullRequestReader?.cancel(H);for(const te of this._rangeRequestReaders.slice(0))te.cancel(H)}};class ee{constructor(H){this._stream=H,this._reader=null,this._loaded=0,this._filename=null;const te=H.source;this._withCredentials=te.withCredentials||!1,this._contentLength=te.length,this._headersCapability=new le.PromiseCapability,this._disableRange=te.disableRange||!1,this._rangeChunkSize=te.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!te.disableStream,this._isRangeSupported=!te.disableRange,this._headers=y(this._stream.httpHeaders);const re=te.url;fetch(re,se(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,Ee.validateResponseStatus)(f.status))throw(0,Ee.createResponseStatusError)(f.status,re);this._reader=f.body.getReader(),this._headersCapability.resolve();const c=oe=>f.headers.get(oe),{allowRangeRequests:$,suggestedLength:ae}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$,this._contentLength=ae||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new le.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var H=this;return _asyncToGenerator(function*(){yield H._headersCapability.promise;const{value:te,done:re}=yield H._reader.read();return re?{value:te,done:re}:(H._loaded+=te.byteLength,H.onProgress?.({loaded:H._loaded,total:H._contentLength}),{value:k(te),done:!1})})()}cancel(H){this._reader?.cancel(H),this._abortController.abort()}}class e{constructor(H,te,re){this._stream=H,this._reader=null,this._loaded=0;const f=H.source;this._withCredentials=f.withCredentials||!1,this._readCapability=new le.PromiseCapability,this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=y(this._stream.httpHeaders),this._headers.append("Range",`bytes=${te}-${re-1}`);const c=f.url;fetch(c,se(this._headers,this._withCredentials,this._abortController)).then($=>{if(!(0,Ee.validateResponseStatus)($.status))throw(0,Ee.createResponseStatusError)($.status,c);this._readCapability.resolve(),this._reader=$.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var H=this;return _asyncToGenerator(function*(){yield H._readCapability.promise;const{value:te,done:re}=yield H._reader.read();return re?{value:te,done:re}:(H._loaded+=te.byteLength,H.onProgress?.({loaded:H._loaded}),{value:k(te),done:!1})})()}cancel(H){this._reader?.cancel(H),this._abortController.abort()}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.createResponseStatusError=function fe(e,V){return 404===e||0===e&&V.startsWith("file:")?new le.MissingPDFException('Missing PDF "'+V+'".'):new le.UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${V}".`,e)},he.extractFilenameFromHeader=function k(e){const V=e("Content-Disposition");if(V){let H=(0,Ee.getFilenameFromContentDispositionHeader)(V);if(H.includes("%"))try{H=decodeURIComponent(H)}catch{}if((0,se.isPdfFile)(H))return H}return null},he.validateRangeRequestCapabilities=function y({getResponseHeader:e,isHttp:V,rangeChunkSize:H,disableRange:te}){const re={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(e("Content-Length"),10);return!Number.isInteger(f)||(re.suggestedLength=f,f<=2*H)||te||!V||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(re.allowRangeRequests=!0),re},he.validateResponseStatus=function ee(e){return 200===e||206===e};var le=Oe(1),Ee=Oe(21),se=Oe(6)},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.getFilenameFromContentDispositionHeader=function Ee(se){let y=!0,k=fe("filename\\*","i").exec(se);if(k){k=k[1];let f=H(k);return f=unescape(f),f=te(f),f=re(f),e(f)}if(k=function V(f){const c=[];let $;const ae=fe("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==($=ae.exec(f));){let[,W,N,O]=$;if(W=parseInt(W,10),W in c){if(0===W)break}else c[W]=[N,O]}const oe=[];for(let W=0;W<c.length&&W in c;++W){let[N,O]=c[W];O=H(O),N&&(O=unescape(O),0===W&&(O=te(O))),oe.push(O)}return oe.join("")}(se),k)return e(re(k));if(k=fe("filename","i").exec(se),k){k=k[1];let f=H(k);return f=re(f),e(f)}function fe(f,c){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',c)}function ee(f,c){if(f){if(!/^[\x00-\xFF]+$/.test(c))return c;try{const $=new TextDecoder(f,{fatal:!0}),ae=(0,le.stringToBytes)(c);c=$.decode(ae),y=!1}catch{}}return c}function e(f){return y&&/[\x80-\xff]/.test(f)&&(f=ee("utf-8",f),y&&(f=ee("iso-8859-1",f))),f}function H(f){if(f.startsWith('"')){const c=f.slice(1).split('\\"');for(let $=0;$<c.length;++$){const ae=c[$].indexOf('"');-1!==ae&&(c[$]=c[$].slice(0,ae),c.length=$+1),c[$]=c[$].replaceAll(/\\(.)/g,"$1")}f=c.join('"')}return f}function te(f){const c=f.indexOf("'");return-1===c?f:ee(f.slice(0,c),f.slice(c+1).replace(/^[^']*'/,""))}function re(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(c,$,ae,oe){if("q"===ae||"Q"===ae)return ee($,oe=(oe=oe.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(W,N){return String.fromCharCode(parseInt(N,16))}));try{oe=atob(oe)}catch{}return ee($,oe)})}return""};var le=Oe(1)},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.PDFNetworkStream=void 0;var le=Oe(1),Ee=Oe(20);class fe{constructor(te,re={}){this.url=te,this.isHttp=/^https?:/i.test(te),this.httpHeaders=this.isHttp&&re.httpHeaders||Object.create(null),this.withCredentials=re.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(te,re,f){const c={begin:te,end:re};for(const $ in f)c[$]=f[$];return this.request(c)}requestFull(te){return this.request(te)}request(te){const re=new XMLHttpRequest,f=this.currXhrId++,c=this.pendingRequests[f]={xhr:re};re.open("GET",this.url),re.withCredentials=this.withCredentials;for(const $ in this.httpHeaders){const ae=this.httpHeaders[$];void 0!==ae&&re.setRequestHeader($,ae)}return this.isHttp&&"begin"in te&&"end"in te?(re.setRequestHeader("Range",`bytes=${te.begin}-${te.end-1}`),c.expectedStatus=206):c.expectedStatus=200,re.responseType="arraybuffer",te.onError&&(re.onerror=function($){te.onError(re.status)}),re.onreadystatechange=this.onStateChange.bind(this,f),re.onprogress=this.onProgress.bind(this,f),c.onHeadersReceived=te.onHeadersReceived,c.onDone=te.onDone,c.onError=te.onError,c.onProgress=te.onProgress,re.send(null),f}onProgress(te,re){const f=this.pendingRequests[te];f&&f.onProgress?.(re)}onStateChange(te,re){const f=this.pendingRequests[te];if(!f)return;const c=f.xhr;if(c.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),4!==c.readyState||!(te in this.pendingRequests))return;if(delete this.pendingRequests[te],0===c.status&&this.isHttp)return void f.onError?.(c.status);const $=c.status||200;if((200!==$||206!==f.expectedStatus)&&$!==f.expectedStatus)return void f.onError?.(c.status);const oe=function k(H){const te=H.response;return"string"!=typeof te?te:(0,le.stringToBytes)(te).buffer}(c);if(206===$){const W=c.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(W);f.onDone({begin:parseInt(N[1],10),chunk:oe})}else oe?f.onDone({begin:0,chunk:oe}):f.onError?.(c.status)}getRequestXhr(te){return this.pendingRequests[te].xhr}isPendingRequest(te){return te in this.pendingRequests}abortRequest(te){const re=this.pendingRequests[te].xhr;delete this.pendingRequests[te],re.abort()}}he.PDFNetworkStream=class ee{constructor(te){this._source=te,this._manager=new fe(te.url,{httpHeaders:te.httpHeaders,withCredentials:te.withCredentials}),this._rangeChunkSize=te.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(te){const re=this._rangeRequestReaders.indexOf(te);re>=0&&this._rangeRequestReaders.splice(re,1)}getFullReader(){return(0,le.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new e(this._manager,this._source),this._fullRequestReader}getRangeReader(te,re){const f=new V(this._manager,te,re);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(te){this._fullRequestReader?.cancel(te);for(const re of this._rangeRequestReaders.slice(0))re.cancel(te)}};class e{constructor(te,re){this._manager=te;const f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=re.url,this._fullRequestId=te.requestFull(f),this._headersReceivedCapability=new le.PromiseCapability,this._disableRange=re.disableRange||!1,this._contentLength=re.length,this._rangeChunkSize=re.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const te=this._fullRequestId,re=this._manager.getRequestXhr(te),f=ae=>re.getResponseHeader(ae),{allowRangeRequests:c,suggestedLength:$}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});c&&(this._isRangeSupported=!0),this._contentLength=$||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(te),this._headersReceivedCapability.resolve()}_onDone(te){if(te&&(this._requests.length>0?this._requests.shift().resolve({value:te.chunk,done:!1}):this._cachedChunks.push(te.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const re of this._requests)re.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(te){this._storedError=(0,Ee.createResponseStatusError)(te,this._url),this._headersReceivedCapability.reject(this._storedError);for(const re of this._requests)re.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(te){this.onProgress?.({loaded:te.loaded,total:te.lengthComputable?te.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var te=this;return _asyncToGenerator(function*(){if(te._storedError)throw te._storedError;if(te._cachedChunks.length>0)return{value:te._cachedChunks.shift(),done:!1};if(te._done)return{value:void 0,done:!0};const re=new le.PromiseCapability;return te._requests.push(re),re.promise})()}cancel(te){this._done=!0,this._headersReceivedCapability.reject(te);for(const re of this._requests)re.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V{constructor(te,re,f){this._manager=te;const c={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=te.url,this._requestId=te.requestRange(re,f,c),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(te){const re=te.chunk;this._requests.length>0?this._requests.shift().resolve({value:re,done:!1}):this._queuedChunk=re,this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(te){this._storedError=(0,Ee.createResponseStatusError)(te,this._url);for(const re of this._requests)re.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(te){this.isStreamingSupported||this.onProgress?.({loaded:te.loaded})}get isStreamingSupported(){return!1}read(){var te=this;return _asyncToGenerator(function*(){if(te._storedError)throw te._storedError;if(null!==te._queuedChunk){const f=te._queuedChunk;return te._queuedChunk=null,{value:f,done:!1}}if(te._done)return{value:void 0,done:!0};const re=new le.PromiseCapability;return te._requests.push(re),re.promise})()}cancel(te){this._done=!0;for(const re of this._requests)re.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.PDFNodeStream=void 0;var le=Oe(1),Ee=Oe(20);const se=/^file:\/\/\/[a-zA-Z]:\//;he.PDFNodeStream=class k{constructor(c){this.source=c,this.url=function y(f){const c=__webpack_require__(598),$=c.parse(f);return"file:"===$.protocol||$.host?$:/^[a-z]:[/\\]/i.test(f)?c.parse(`file:///${f}`):($.host||($.protocol="file:"),$)}(c.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,le.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new te(this):new V(this),this._fullRequestReader}getRangeReader(c,$){if($<=this._progressiveDataLength)return null;const ae=this.isFsUrl?new re(this,c,$):new H(this,c,$);return this._rangeRequestReaders.push(ae),ae}cancelAllRequests(c){this._fullRequestReader?.cancel(c);for(const $ of this._rangeRequestReaders.slice(0))$.cancel(c)}};class fe{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const $=c.source;this._contentLength=$.length,this._loaded=0,this._filename=null,this._disableRange=$.disableRange||!1,this._rangeChunkSize=$.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!$.disableStream,this._isRangeSupported=!$.disableRange,this._readableStream=null,this._readCapability=new le.PromiseCapability,this._headersCapability=new le.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var c=this;return _asyncToGenerator(function*(){if(yield c._readCapability.promise,c._done)return{value:void 0,done:!0};if(c._storedError)throw c._storedError;const $=c._readableStream.read();return null===$?(c._readCapability=new le.PromiseCapability,c.read()):(c._loaded+=$.length,c.onProgress?.({loaded:c._loaded,total:c._contentLength}),{value:new Uint8Array($).buffer,done:!1})})()}cancel(c){this._readableStream?this._readableStream.destroy(c):this._error(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",$=>{this._error($)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new le.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ee{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new le.PromiseCapability,this._isStreamingSupported=!c.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var c=this;return _asyncToGenerator(function*(){if(yield c._readCapability.promise,c._done)return{value:void 0,done:!0};if(c._storedError)throw c._storedError;const $=c._readableStream.read();return null===$?(c._readCapability=new le.PromiseCapability,c.read()):(c._loaded+=$.length,c.onProgress?.({loaded:c._loaded}),{value:new Uint8Array($).buffer,done:!1})})()}cancel(c){this._readableStream?this._readableStream.destroy(c):this._error(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",$=>{this._error($)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function e(f,c){return{protocol:f.protocol,auth:f.auth,host:f.hostname,port:f.port,path:f.path,method:"GET",headers:c}}class V extends fe{constructor(c){super(c);const $=ae=>{if(404===ae.statusCode){const O=new le.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=O,void this._headersCapability.reject(O)}this._headersCapability.resolve(),this._setReadableStream(ae);const oe=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:W,suggestedLength:N}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:oe,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=W,this._contentLength=N||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(oe)};if(this._request=null,"http:"===this._url.protocol){const ae=__webpack_require__(828);this._request=ae.request(e(this._url,c.httpHeaders),$)}else{const ae=__webpack_require__(915);this._request=ae.request(e(this._url,c.httpHeaders),$)}this._request.on("error",ae=>{this._storedError=ae,this._headersCapability.reject(ae)}),this._request.end()}}class H extends ee{constructor(c,$,ae){super(c),this._httpHeaders={};for(const W in c.httpHeaders){const N=c.httpHeaders[W];void 0!==N&&(this._httpHeaders[W]=N)}this._httpHeaders.Range=`bytes=${$}-${ae-1}`;const oe=W=>{if(404!==W.statusCode)this._setReadableStream(W);else{const N=new le.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=N}};if(this._request=null,"http:"===this._url.protocol){const W=__webpack_require__(828);this._request=W.request(e(this._url,this._httpHeaders),oe)}else{const W=__webpack_require__(915);this._request=W.request(e(this._url,this._httpHeaders),oe)}this._request.on("error",W=>{this._storedError=W}),this._request.end()}}class te extends fe{constructor(c){super(c);let $=decodeURIComponent(this._url.path);se.test(this._url.href)&&($=$.replace(/^\//,""));const ae=__webpack_require__(339);ae.lstat($,(oe,W)=>{if(oe)return"ENOENT"===oe.code&&(oe=new le.MissingPDFException(`Missing PDF "${$}".`)),this._storedError=oe,void this._headersCapability.reject(oe);this._contentLength=W.size,this._setReadableStream(ae.createReadStream($)),this._headersCapability.resolve()})}}class re extends ee{constructor(c,$,ae){super(c);let oe=decodeURIComponent(this._url.path);se.test(this._url.href)&&(oe=oe.replace(/^\//,""));const W=__webpack_require__(339);this._setReadableStream(W.createReadStream(oe,{start:$,end:ae-1}))}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.SVGGraphics=void 0;var le=Oe(6),Ee=Oe(1);const fe=["butt","round","square"],ee=["miter","round","bevel"],e=function(W,N="",O=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!O)return URL.createObjectURL(new Blob([W],{type:N}));const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A=`data:${N};base64,`;for(let b=0,q=W.length;b<q;b+=3){const C=255&W[b],P=255&W[b+1],F=255&W[b+2];A+=M[C>>2]+M[(3&C)<<4|P>>4]+M[b+1<q?(15&P)<<2|F>>6:64]+M[b+2<q?63&F:64]}return A},V=function(){const W=new Uint8Array([137,80,78,71,13,10,26,10]),O=new Int32Array(256);for(let F=0;F<256;F++){let I=F;for(let j=0;j<8;j++)I=1&I?3988292384^I>>1&2147483647:I>>1&2147483647;O[F]=I}function A(F,I,j,E){let x=E;const p=I.length;j[x]=p>>24&255,j[x+1]=p>>16&255,j[x+2]=p>>8&255,j[x+3]=255&p,x+=4,j[x]=255&F.charCodeAt(0),j[x+1]=255&F.charCodeAt(1),j[x+2]=255&F.charCodeAt(2),j[x+3]=255&F.charCodeAt(3),x+=4,j.set(I,x),x+=I.length;const m=function M(F,I,j){let E=-1;for(let x=I;x<j;x++)E=E>>>8^O[255&(E^F[x])];return-1^E}(j,E+4,x);j[x]=m>>24&255,j[x+1]=m>>16&255,j[x+2]=m>>8&255,j[x+3]=255&m}function C(F){let I=F.length;const j=65535,E=Math.ceil(I/j),x=new Uint8Array(2+I+5*E+4);let p=0;x[p++]=120,x[p++]=156;let m=0;for(;I>j;)x[p++]=0,x[p++]=255,x[p++]=255,x[p++]=0,x[p++]=0,x.set(F.subarray(m,m+j),p),p+=j,m+=j,I-=j;x[p++]=1,x[p++]=255&I,x[p++]=I>>8&255,x[p++]=255&~I,x[p++]=(65535&~I)>>8&255,x.set(F.subarray(m),p),p+=F.length-m;const _=function b(F,I,j){let E=1,x=0;for(let p=I;p<j;++p)E=(E+(255&F[p]))%65521,x=(x+E)%65521;return x<<16|E}(F,0,F.length);return x[p++]=_>>24&255,x[p++]=_>>16&255,x[p++]=_>>8&255,x[p++]=255&_,x}return function(I,j,E){return function P(F,I,j,E){const x=F.width,p=F.height;let m,_,R;const G=F.data;switch(I){case Ee.ImageKind.GRAYSCALE_1BPP:_=0,m=1,R=x+7>>3;break;case Ee.ImageKind.RGB_24BPP:_=2,m=8,R=3*x;break;case Ee.ImageKind.RGBA_32BPP:_=6,m=8,R=4*x;break;default:throw new Error("invalid format")}const K=new Uint8Array((1+R)*p);let U=0,z=0;for(let ce=0;ce<p;++ce)K[U++]=0,K.set(G.subarray(z,z+R),U),z+=R,U+=R;if(I===Ee.ImageKind.GRAYSCALE_1BPP&&E){U=0;for(let ce=0;ce<p;ce++){U++;for(let pe=0;pe<R;pe++)K[U++]^=255}}const L=new Uint8Array([x>>24&255,x>>16&255,x>>8&255,255&x,p>>24&255,p>>16&255,p>>8&255,255&p,m,_,0,0,0]),S=function q(F){if(!Ee.isNodeJS)return C(F);try{const I=parseInt(process.versions.node)>=8?F:Buffer.from(F),j=__webpack_require__(372).deflateSync(I,{level:9});return j instanceof Uint8Array?j:new Uint8Array(j)}catch(I){(0,Ee.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+I)}return C(F)}(K),J=new Uint8Array(W.length+36+L.length+S.length);let ie=0;return J.set(W,ie),ie+=W.length,A("IHDR",L,J,ie),ie+=12+L.length,A("IDATA",S,J,ie),ie+=12+S.length,A("IEND",new Uint8Array(0),J,ie),e(J,"image/png",j)}(I,void 0===I.kind?Ee.ImageKind.GRAYSCALE_1BPP:I.kind,j,E)}}();class H{constructor(){this.fontSizeScale=1,this.fontWeight="normal",this.fontSize=0,this.textMatrix=Ee.IDENTITY_MATRIX,this.fontMatrix=Ee.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Ee.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(N,O){this.x=N,this.y=O}}function re(W){if(Number.isInteger(W))return W.toString();const N=W.toFixed(10);let O=N.length-1;if("0"!==N[O])return N;do{O--}while("0"===N[O]);return N.substring(0,"."===N[O]?O:O+1)}function f(W){if(0===W[4]&&0===W[5]){if(0===W[1]&&0===W[2])return 1===W[0]&&1===W[3]?"":`scale(${re(W[0])} ${re(W[3])})`;if(W[0]===W[3]&&W[1]===-W[2])return`rotate(${re(180*Math.acos(W[0])/Math.PI)})`}else if(1===W[0]&&0===W[1]&&0===W[2]&&1===W[3])return`translate(${re(W[4])} ${re(W[5])})`;return`matrix(${re(W[0])} ${re(W[1])} ${re(W[2])} ${re(W[3])} ${re(W[4])} ${re(W[5])})`}let c=0,$=0,ae=0;he.SVGGraphics=class oe{constructor(N,O,M=!1){(0,le.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new le.DOMSVGFactory,this.current=new H,this.transformMatrix=Ee.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=N,this.objs=O,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!M,this._operatorIdMapping=[];for(const A in Ee.OPS)this._operatorIdMapping[Ee.OPS[A]]=A}getObject(N,O=null){return"string"==typeof N?N.startsWith("g_")?this.commonObjs.get(N):this.objs.get(N):O}save(){this.transformStack.push(this.transformMatrix);const N=this.current;this.extraStack.push(N),this.current=N.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(N){this.save(),this.executeOpTree(N),this.restore()}loadDependencies(N){const O=N.fnArray,M=N.argsArray;for(let A=0,b=O.length;A<b;A++)if(O[A]===Ee.OPS.dependency)for(const q of M[A]){const C=q.startsWith("g_")?this.commonObjs:this.objs,P=new Promise(F=>{C.get(q,F)});this.current.dependencies.push(P)}return Promise.all(this.current.dependencies)}transform(N,O,M,A,b,q){this.transformMatrix=Ee.Util.transform(this.transformMatrix,[N,O,M,A,b,q]),this.tgrp=null}getSVG(N,O){this.viewport=O;const M=this._initialize(O);return this.loadDependencies(N).then(()=>(this.transformMatrix=Ee.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(N)),M))}convertOpList(N){const O=this._operatorIdMapping,M=N.argsArray,A=N.fnArray,b=[];for(let q=0,C=A.length;q<C;q++){const P=A[q];b.push({fnId:P,fn:O[P],args:M[q]})}return function te(W){let N=[];const O=[];for(const M of W)"save"!==M.fn?"restore"===M.fn?N=O.pop():N.push(M):(N.push({fnId:92,fn:"group",items:[]}),O.push(N),N=N.at(-1).items);return N}(b)}executeOpTree(N){for(const O of N){const M=O.fn,b=O.args;switch(0|O.fnId){case Ee.OPS.beginText:this.beginText();break;case Ee.OPS.dependency:break;case Ee.OPS.setLeading:this.setLeading(b);break;case Ee.OPS.setLeadingMoveText:this.setLeadingMoveText(b[0],b[1]);break;case Ee.OPS.setFont:this.setFont(b);break;case Ee.OPS.showText:case Ee.OPS.showSpacedText:this.showText(b[0]);break;case Ee.OPS.endText:this.endText();break;case Ee.OPS.moveText:this.moveText(b[0],b[1]);break;case Ee.OPS.setCharSpacing:this.setCharSpacing(b[0]);break;case Ee.OPS.setWordSpacing:this.setWordSpacing(b[0]);break;case Ee.OPS.setHScale:this.setHScale(b[0]);break;case Ee.OPS.setTextMatrix:this.setTextMatrix(b[0],b[1],b[2],b[3],b[4],b[5]);break;case Ee.OPS.setTextRise:this.setTextRise(b[0]);break;case Ee.OPS.setTextRenderingMode:this.setTextRenderingMode(b[0]);break;case Ee.OPS.setLineWidth:this.setLineWidth(b[0]);break;case Ee.OPS.setLineJoin:this.setLineJoin(b[0]);break;case Ee.OPS.setLineCap:this.setLineCap(b[0]);break;case Ee.OPS.setMiterLimit:this.setMiterLimit(b[0]);break;case Ee.OPS.setFillRGBColor:this.setFillRGBColor(b[0],b[1],b[2]);break;case Ee.OPS.setStrokeRGBColor:this.setStrokeRGBColor(b[0],b[1],b[2]);break;case Ee.OPS.setStrokeColorN:this.setStrokeColorN(b);break;case Ee.OPS.setFillColorN:this.setFillColorN(b);break;case Ee.OPS.shadingFill:this.shadingFill(b[0]);break;case Ee.OPS.setDash:this.setDash(b[0],b[1]);break;case Ee.OPS.setRenderingIntent:this.setRenderingIntent(b[0]);break;case Ee.OPS.setFlatness:this.setFlatness(b[0]);break;case Ee.OPS.setGState:this.setGState(b[0]);break;case Ee.OPS.fill:this.fill();break;case Ee.OPS.eoFill:this.eoFill();break;case Ee.OPS.stroke:this.stroke();break;case Ee.OPS.fillStroke:this.fillStroke();break;case Ee.OPS.eoFillStroke:this.eoFillStroke();break;case Ee.OPS.clip:this.clip("nonzero");break;case Ee.OPS.eoClip:this.clip("evenodd");break;case Ee.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Ee.OPS.paintImageXObject:this.paintImageXObject(b[0]);break;case Ee.OPS.paintInlineImageXObject:this.paintInlineImageXObject(b[0]);break;case Ee.OPS.paintImageMaskXObject:this.paintImageMaskXObject(b[0]);break;case Ee.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(b[0],b[1]);break;case Ee.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Ee.OPS.closePath:this.closePath();break;case Ee.OPS.closeStroke:this.closeStroke();break;case Ee.OPS.closeFillStroke:this.closeFillStroke();break;case Ee.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Ee.OPS.nextLine:this.nextLine();break;case Ee.OPS.transform:this.transform(b[0],b[1],b[2],b[3],b[4],b[5]);break;case Ee.OPS.constructPath:this.constructPath(b[0],b[1]);break;case Ee.OPS.endPath:this.endPath();break;case 92:this.group(O.items);break;default:(0,Ee.warn)(`Unimplemented operator ${M}`)}}}setWordSpacing(N){this.current.wordSpacing=N}setCharSpacing(N){this.current.charSpacing=N}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(N,O,M,A,b,q){const C=this.current;C.textMatrix=C.lineMatrix=[N,O,M,A,b,q],C.textMatrixScale=Math.hypot(N,O),C.x=C.lineX=0,C.y=C.lineY=0,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${re(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",re(-C.y)),C.txtElement=this.svgFactory.createElement("svg:text"),C.txtElement.append(C.tspan)}beginText(){const N=this.current;N.x=N.lineX=0,N.y=N.lineY=0,N.textMatrix=Ee.IDENTITY_MATRIX,N.lineMatrix=Ee.IDENTITY_MATRIX,N.textMatrixScale=1,N.tspan=this.svgFactory.createElement("svg:tspan"),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtgrp=this.svgFactory.createElement("svg:g"),N.xcoords=[],N.ycoords=[]}moveText(N,O){const M=this.current;M.x=M.lineX+=N,M.y=M.lineY+=O,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${re(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",re(-M.y))}showText(N){const O=this.current,M=O.font,A=O.fontSize;if(0===A)return;const b=O.fontSizeScale,q=O.charSpacing,C=O.wordSpacing,P=O.fontDirection,F=O.textHScale*P,I=M.vertical,j=I?1:-1,E=M.defaultVMetrics,x=A*O.fontMatrix[0];let p=0;for(const R of N){if(null===R){p+=P*C;continue}if("number"==typeof R){p+=j*R*A/1e3;continue}const G=(R.isSpace?C:0)+q,K=R.fontChar;let U,z,L=R.width;if(I){let B;const J=R.vmetric||E;B=R.vmetric?J[1]:.5*L,B=-B*x,L=J?-J[0]:L,U=B/b,z=(p+J[2]*x)/b}else U=p/b,z=0;(R.isInFont||M.missingFile)&&(O.xcoords.push(O.x+U),I&&O.ycoords.push(-O.y+z),O.tspan.textContent+=K),p+=I?L*x-G*P:L*x+G*P}O.tspan.setAttributeNS(null,"x",O.xcoords.map(re).join(" ")),O.tspan.setAttributeNS(null,"y",I?O.ycoords.map(re).join(" "):re(-O.y)),I?O.y-=p:O.x+=p*F,O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${re(O.fontSize)}px`),"normal"!==O.fontStyle&&O.tspan.setAttributeNS(null,"font-style",O.fontStyle),"normal"!==O.fontWeight&&O.tspan.setAttributeNS(null,"font-weight",O.fontWeight);const m=O.textRenderingMode&Ee.TextRenderingMode.FILL_STROKE_MASK;m===Ee.TextRenderingMode.FILL||m===Ee.TextRenderingMode.FILL_STROKE?("#000000"!==O.fillColor&&O.tspan.setAttributeNS(null,"fill",O.fillColor),O.fillAlpha<1&&O.tspan.setAttributeNS(null,"fill-opacity",O.fillAlpha)):O.tspan.setAttributeNS(null,"fill",O.textRenderingMode===Ee.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(m===Ee.TextRenderingMode.STROKE||m===Ee.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(O.tspan,1/(O.textMatrixScale||1));let _=O.textMatrix;0!==O.textRise&&(_=_.slice(),_[5]+=O.textRise),O.txtElement.setAttributeNS(null,"transform",`${f(_)} scale(${re(F)}, -1)`),O.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),O.txtElement.append(O.tspan),O.txtgrp.append(O.txtElement),this._ensureTransformGroup().append(O.txtElement)}setLeadingMoveText(N,O){this.setLeading(-O),this.moveText(N,O)}addFontStyle(N){if(!N.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const O=e(N.data,N.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${N.loadedName}"; src: url(${O}); }\n`}setFont(N){const O=this.current,M=this.commonObjs.get(N[0]);let A=N[1];O.font=M,this.embedFonts&&!M.missingFile&&!this.embeddedFonts[M.loadedName]&&(this.addFontStyle(M),this.embeddedFonts[M.loadedName]=M),O.fontMatrix=M.fontMatrix||Ee.FONT_IDENTITY_MATRIX;let b="normal";M.black?b="900":M.bold&&(b="bold");const q=M.italic?"italic":"normal";A<0?(A=-A,O.fontDirection=-1):O.fontDirection=1,O.fontSize=A,O.fontFamily=M.loadedName,O.fontWeight=b,O.fontStyle=q,O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"y",re(-O.y)),O.xcoords=[],O.ycoords=[]}endText(){const N=this.current;N.textRenderingMode&Ee.TextRenderingMode.ADD_TO_PATH_FLAG&&N.txtElement?.hasChildNodes()&&(N.element=N.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(N){N>0&&(this.current.lineWidth=N)}setLineCap(N){this.current.lineCap=fe[N]}setLineJoin(N){this.current.lineJoin=ee[N]}setMiterLimit(N){this.current.miterLimit=N}setStrokeAlpha(N){this.current.strokeAlpha=N}setStrokeRGBColor(N,O,M){this.current.strokeColor=Ee.Util.makeHexColor(N,O,M)}setFillAlpha(N){this.current.fillAlpha=N}setFillRGBColor(N,O,M){this.current.fillColor=Ee.Util.makeHexColor(N,O,M),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(N){this.current.strokeColor=this._makeColorN_Pattern(N)}setFillColorN(N){this.current.fillColor=this._makeColorN_Pattern(N)}shadingFill(N){const{width:O,height:M}=this.viewport,A=Ee.Util.inverseTransform(this.transformMatrix),[b,q,C,P]=Ee.Util.getAxialAlignedBoundingBox([0,0,O,M],A),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",b),F.setAttributeNS(null,"y",q),F.setAttributeNS(null,"width",C-b),F.setAttributeNS(null,"height",P-q),F.setAttributeNS(null,"fill",this._makeShadingPattern(N)),this.current.fillAlpha<1&&F.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(F)}_makeColorN_Pattern(N){return"TilingPattern"===N[0]?this._makeTilingPattern(N):this._makeShadingPattern(N)}_makeTilingPattern(N){const O=N[1],M=N[2],A=N[3]||Ee.IDENTITY_MATRIX,[b,q,C,P]=N[4],F=N[5],I=N[6],j=N[7],E="shading"+ae++,[x,p,m,_]=Ee.Util.normalizeRect([...Ee.Util.applyTransform([b,q],A),...Ee.Util.applyTransform([C,P],A)]),[R,G]=Ee.Util.singularValueDecompose2dScale(A),K=F*R,U=I*G,z=this.svgFactory.createElement("svg:pattern");z.setAttributeNS(null,"id",E),z.setAttributeNS(null,"patternUnits","userSpaceOnUse"),z.setAttributeNS(null,"width",K),z.setAttributeNS(null,"height",U),z.setAttributeNS(null,"x",`${x}`),z.setAttributeNS(null,"y",`${p}`);const L=this.svg,S=this.transformMatrix,B=this.current.fillColor,J=this.current.strokeColor,ie=this.svgFactory.create(m-x,_-p);if(this.svg=ie,this.transformMatrix=A,2===j){const ce=Ee.Util.makeHexColor(...O);this.current.fillColor=ce,this.current.strokeColor=ce}return this.executeOpTree(this.convertOpList(M)),this.svg=L,this.transformMatrix=S,this.current.fillColor=B,this.current.strokeColor=J,z.append(ie.childNodes[0]),this.defs.append(z),`url(#${E})`}_makeShadingPattern(N){switch("string"==typeof N&&(N=this.objs.get(N)),N[0]){case"RadialAxial":const O="shading"+ae++,M=N[3];let A;switch(N[1]){case"axial":const b=N[4],q=N[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",O),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",b[0]),A.setAttributeNS(null,"y1",b[1]),A.setAttributeNS(null,"x2",q[0]),A.setAttributeNS(null,"y2",q[1]);break;case"radial":const C=N[4],P=N[5],F=N[6],I=N[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",O),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",P[0]),A.setAttributeNS(null,"cy",P[1]),A.setAttributeNS(null,"r",I),A.setAttributeNS(null,"fx",C[0]),A.setAttributeNS(null,"fy",C[1]),A.setAttributeNS(null,"fr",F);break;default:throw new Error(`Unknown RadialAxial type: ${N[1]}`)}for(const b of M){const q=this.svgFactory.createElement("svg:stop");q.setAttributeNS(null,"offset",b[0]),q.setAttributeNS(null,"stop-color",b[1]),A.append(q)}return this.defs.append(A),`url(#${O})`;case"Mesh":return(0,Ee.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${N[0]}`)}}setDash(N,O){this.current.dashArray=N,this.current.dashPhase=O}constructPath(N,O){const M=this.current;let A=M.x,b=M.y,q=[],C=0;for(const P of N)switch(0|P){case Ee.OPS.rectangle:A=O[C++],b=O[C++];const j=A+O[C++],E=b+O[C++];q.push("M",re(A),re(b),"L",re(j),re(b),"L",re(j),re(E),"L",re(A),re(E),"Z");break;case Ee.OPS.moveTo:A=O[C++],b=O[C++],q.push("M",re(A),re(b));break;case Ee.OPS.lineTo:A=O[C++],b=O[C++],q.push("L",re(A),re(b));break;case Ee.OPS.curveTo:A=O[C+4],b=O[C+5],q.push("C",re(O[C]),re(O[C+1]),re(O[C+2]),re(O[C+3]),re(A),re(b)),C+=6;break;case Ee.OPS.curveTo2:q.push("C",re(A),re(b),re(O[C]),re(O[C+1]),re(O[C+2]),re(O[C+3])),A=O[C+2],b=O[C+3],C+=4;break;case Ee.OPS.curveTo3:A=O[C+2],b=O[C+3],q.push("C",re(O[C]),re(O[C+1]),re(A),re(b),re(A),re(b)),C+=4;break;case Ee.OPS.closePath:q.push("Z")}q=q.join(" "),M.path&&N.length>0&&N[0]!==Ee.OPS.rectangle&&N[0]!==Ee.OPS.moveTo?q=M.path.getAttributeNS(null,"d")+q:(M.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(M.path)),M.path.setAttributeNS(null,"d",q),M.path.setAttributeNS(null,"fill","none"),M.element=M.path,M.setCurrentPoint(A,b)}endPath(){const N=this.current;if(N.path=null,!this.pendingClip)return;if(!N.element)return void(this.pendingClip=null);const O="clippath"+c++,M=this.svgFactory.createElement("svg:clipPath");M.setAttributeNS(null,"id",O),M.setAttributeNS(null,"transform",f(this.transformMatrix));const A=N.element.cloneNode(!0);if(A.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,M.append(A),this.defs.append(M),N.activeClipUrl){N.clipGroup=null;for(const b of this.extraStack)b.clipGroup=null;M.setAttributeNS(null,"clip-path",N.activeClipUrl)}N.activeClipUrl=`url(#${O})`,this.tgrp=null}clip(N){this.pendingClip=N}closePath(){const N=this.current;if(N.path){const O=`${N.path.getAttributeNS(null,"d")}Z`;N.path.setAttributeNS(null,"d",O)}}setLeading(N){this.current.leading=-N}setTextRise(N){this.current.textRise=N}setTextRenderingMode(N){this.current.textRenderingMode=N}setHScale(N){this.current.textHScale=N/100}setRenderingIntent(N){}setFlatness(N){}setGState(N){for(const[O,M]of N)switch(O){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M);break;case"CA":this.setStrokeAlpha(M);break;case"ca":this.setFillAlpha(M);break;default:(0,Ee.warn)(`Unimplemented graphic state operator ${O}`)}}fill(){const N=this.current;N.element&&(N.element.setAttributeNS(null,"fill",N.fillColor),N.element.setAttributeNS(null,"fill-opacity",N.fillAlpha),this.endPath())}stroke(){const N=this.current;N.element&&(this._setStrokeAttributes(N.element),N.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(N,O=1){const M=this.current;let A=M.dashArray;1!==O&&A.length>0&&(A=A.map(function(b){return O*b})),N.setAttributeNS(null,"stroke",M.strokeColor),N.setAttributeNS(null,"stroke-opacity",M.strokeAlpha),N.setAttributeNS(null,"stroke-miterlimit",re(M.miterLimit)),N.setAttributeNS(null,"stroke-linecap",M.lineCap),N.setAttributeNS(null,"stroke-linejoin",M.lineJoin),N.setAttributeNS(null,"stroke-width",re(O*M.lineWidth)+"px"),N.setAttributeNS(null,"stroke-dasharray",A.map(re).join(" ")),N.setAttributeNS(null,"stroke-dashoffset",re(O*M.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width","1px"),N.setAttributeNS(null,"height","1px"),N.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(N)}paintImageXObject(N){const O=this.getObject(N);O?this.paintInlineImageXObject(O):(0,Ee.warn)(`Dependent image with object ID ${N} is not ready yet`)}paintInlineImageXObject(N,O){const M=N.width,A=N.height,b=V(N,this.forceDataSchema,!!O),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",re(M)),q.setAttributeNS(null,"height",re(A)),this.current.element=q,this.clip("nonzero");const C=this.svgFactory.createElement("svg:image");C.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b),C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y",re(-A)),C.setAttributeNS(null,"width",re(M)+"px"),C.setAttributeNS(null,"height",re(A)+"px"),C.setAttributeNS(null,"transform",`scale(${re(1/M)} ${re(-1/A)})`),O?O.append(C):this._ensureTransformGroup().append(C)}paintImageMaskXObject(N){const O=this.getObject(N.data,N);if(O.bitmap)return void(0,Ee.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const M=this.current,A=O.width,b=O.height,q=M.fillColor;M.maskId="mask"+$++;const C=this.svgFactory.createElement("svg:mask");C.setAttributeNS(null,"id",M.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",re(A)),P.setAttributeNS(null,"height",re(b)),P.setAttributeNS(null,"fill",q),P.setAttributeNS(null,"mask",`url(#${M.maskId})`),this.defs.append(C),this._ensureTransformGroup().append(P),this.paintInlineImageXObject(O,C)}paintFormXObjectBegin(N,O){if(Array.isArray(N)&&6===N.length&&this.transform(N[0],N[1],N[2],N[3],N[4],N[5]),O){const M=O[2]-O[0],A=O[3]-O[1],b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x",O[0]),b.setAttributeNS(null,"y",O[1]),b.setAttributeNS(null,"width",re(M)),b.setAttributeNS(null,"height",re(A)),this.current.element=b,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(N){const O=this.svgFactory.create(N.width,N.height),M=this.svgFactory.createElement("svg:defs");O.append(M),this.defs=M;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",f(N.transform)),O.append(A),this.svg=A,O}_ensureClipGroup(){if(!this.current.clipGroup){const N=this.svgFactory.createElement("svg:g");N.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(N),this.current.clipGroup=N}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(yt,he)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.XfaText=void 0;class Oe{static textContent(Ee){const se=[],y={items:se,styles:Object.create(null)};return function k(fe){if(!fe)return;let ee=null;const e=fe.name;if("#text"===e)ee=fe.value;else{if(!Oe.shouldBuildText(e))return;fe?.attributes?.textContent?ee=fe.attributes.textContent:fe.value&&(ee=fe.value)}if(null!==ee&&se.push({str:ee}),fe.children)for(const V of fe.children)k(V)}(Ee),y}static shouldBuildText(Ee){return!("textarea"===Ee||"input"===Ee||"option"===Ee||"select"===Ee)}}he.XfaText=Oe},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.TextLayerRenderTask=void 0,he.renderTextLayer=function f($){!$.textContentSource&&($.textContent||$.textContentStream)&&((0,Ee.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),$.textContentSource=$.textContent||$.textContentStream);const{container:ae,viewport:oe}=$,W=getComputedStyle(ae),N=W.getPropertyValue("visibility"),O=parseFloat(W.getPropertyValue("--scale-factor"));"visible"===N&&(!O||Math.abs(O-oe.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const M=new re($);return M._render(),M},he.updateTextLayer=function c({container:$,viewport:ae,textDivs:oe,textDivProperties:W,isOffscreenCanvasSupported:N,mustRotate:O=!0,mustRescale:M=!0}){if(O&&(0,Ee.setLayerDimensions)($,{rotation:ae.rotation}),M){const A=ee(0,N),q={prevFontSize:null,prevFontFamily:null,div:null,scale:ae.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:A};for(const C of oe)q.properties=W.get(C),q.div=C,H(q)}};var le=Oe(1),Ee=Oe(6);const y=30,fe=new Map;function ee($,ae){let oe;if(ae&&le.FeatureTest.isOffscreenCanvasSupported)oe=new OffscreenCanvas($,$).getContext("2d",{alpha:!1});else{const W=document.createElement("canvas");W.width=W.height=$,oe=W.getContext("2d",{alpha:!1})}return oe}function V($,ae,oe){const W=document.createElement("span"),N={angle:0,canvasWidth:0,hasText:""!==ae.str,hasEOL:ae.hasEOL,fontSize:0};$._textDivs.push(W);const O=le.Util.transform($._transform,ae.transform);let M=Math.atan2(O[1],O[0]);const A=oe[ae.fontName];A.vertical&&(M+=Math.PI/2);const b=Math.hypot(O[2],O[3]),q=b*function e($,ae){const oe=fe.get($);if(oe)return oe;const W=ee(y,ae);W.font=`30px ${$}`;const N=W.measureText("");let O=N.fontBoundingBoxAscent,M=Math.abs(N.fontBoundingBoxDescent);if(O){const b=O/(O+M);return fe.set($,b),W.canvas.width=W.canvas.height=0,b}W.strokeStyle="red",W.clearRect(0,0,y,y),W.strokeText("g",0,0);let A=W.getImageData(0,0,y,y).data;M=0;for(let b=A.length-1-3;b>=0;b-=4)if(A[b]>0){M=Math.ceil(b/4/y);break}W.clearRect(0,0,y,y),W.strokeText("A",0,y),A=W.getImageData(0,0,y,y).data,O=0;for(let b=0,q=A.length;b<q;b+=4)if(A[b]>0){O=y-Math.floor(b/4/y);break}if(W.canvas.width=W.canvas.height=0,O){const b=O/(O+M);return fe.set($,b),b}return fe.set($,.8),.8}(A.fontFamily,$._isOffscreenCanvasSupported);let C,P;0===M?(C=O[4],P=O[5]-q):(C=O[4]+q*Math.sin(M),P=O[5]-q*Math.cos(M));const F="calc(var(--scale-factor)*",I=W.style;$._container===$._rootContainer?(I.left=`${(100*C/$._pageWidth).toFixed(2)}%`,I.top=`${(100*P/$._pageHeight).toFixed(2)}%`):(I.left=`${F}${C.toFixed(2)}px)`,I.top=`${F}${P.toFixed(2)}px)`),I.fontSize=`${F}${b.toFixed(2)}px)`,I.fontFamily=A.fontFamily,N.fontSize=b,W.setAttribute("role","presentation"),W.textContent=ae.str,W.dir=ae.dir,$._fontInspectorEnabled&&(W.dataset.fontName=ae.fontName),0!==M&&(N.angle=M*(180/Math.PI));let j=!1;if(ae.str.length>1)j=!0;else if(" "!==ae.str&&ae.transform[0]!==ae.transform[3]){const E=Math.abs(ae.transform[0]),x=Math.abs(ae.transform[3]);E!==x&&Math.max(E,x)/Math.min(E,x)>1.5&&(j=!0)}j&&(N.canvasWidth=A.vertical?ae.height:ae.width),$._textDivProperties.set(W,N),$._isReadableStream&&$._layoutText(W)}function H($){const{div:ae,scale:oe,properties:W,ctx:N,prevFontSize:O,prevFontFamily:M}=$,{style:A}=ae;let b="";if(0!==W.canvasWidth&&W.hasText){const{fontFamily:q}=A,{canvasWidth:C,fontSize:P}=W;(O!==P||M!==q)&&(N.font=`${P*oe}px ${q}`,$.prevFontSize=P,$.prevFontFamily=q);const{width:F}=N.measureText(ae.textContent);F>0&&(b=`scaleX(${C*oe/F})`)}0!==W.angle&&(b=`rotate(${W.angle}deg) ${b}`),b.length>0&&(A.transform=b)}class re{constructor({textContentSource:ae,container:oe,viewport:W,textDivs:N,textDivProperties:O,textContentItemsStr:M,isOffscreenCanvasSupported:A}){this._textContentSource=ae,this._isReadableStream=ae instanceof ReadableStream,this._container=this._rootContainer=oe,this._textDivs=N||[],this._textContentItemsStr=M||[],this._isOffscreenCanvasSupported=A,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=O||new WeakMap,this._canceled=!1,this._capability=new le.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:W.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ee(0,A)};const{pageWidth:b,pageHeight:q,pageX:C,pageY:P}=W.rawDims;this._transform=[1,0,0,-1,-C,P+q],this._pageWidth=b,this._pageHeight=q,(0,Ee.setLayerDimensions)(oe,W),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new le.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new le.AbortException("TextLayer task cancelled."))}_processItems(ae,oe){for(const W of ae)if(void 0!==W.str)this._textContentItemsStr.push(W.str),V(this,W,oe);else if("beginMarkedContentProps"===W.type||"beginMarkedContent"===W.type){const N=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==W.id&&this._container.setAttribute("id",`${W.id}`),N.append(this._container)}else"endMarkedContent"===W.type&&(this._container=this._container.parentNode)}_layoutText(ae){const oe=this._layoutTextParams.properties=this._textDivProperties.get(ae);if(this._layoutTextParams.div=ae,H(this._layoutTextParams),oe.hasText&&this._container.append(ae),oe.hasEOL){const W=document.createElement("br");W.setAttribute("role","presentation"),this._container.append(W)}}_render(){const ae=new le.PromiseCapability;let oe=Object.create(null);if(this._isReadableStream){const W=()=>{this._reader.read().then(({value:N,done:O})=>{O?ae.resolve():(Object.assign(oe,N.styles),this._processItems(N.items,oe),W())},ae.reject)};this._reader=this._textContentSource.getReader(),W()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:W,styles:N}=this._textContentSource;this._processItems(W,N),ae.resolve()}}ae.promise.then(()=>{oe=null,function te($){if($._canceled)return;const ae=$._textDivs,oe=$._capability;if(ae.length>1e5)oe.resolve();else{if(!$._isReadableStream)for(const N of ae)$._layoutText(N);oe.resolve()}}(this)},this._capability.reject)}}he.TextLayerRenderTask=re},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.AnnotationEditorLayer=void 0;var le=Oe(1),Ee=Oe(4),se=Oe(28),y=Oe(33),k=Oe(6),fe=Oe(34);he.AnnotationEditorLayer=(()=>{class e{#e;#t=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#s=new Map;#a=!1;#l=!1;#c=!1;#r;static _initialized=!1;constructor({uiManager:H,pageIndex:te,div:re,accessibilityManager:f,annotationLayer:c,viewport:$,l10n:ae}){const oe=[se.FreeTextEditor,y.InkEditor,fe.StampEditor];if(!e._initialized){e._initialized=!0;for(const W of oe)W.initialize(ae)}H.registerEditorTypes(oe),this.#r=H,this.pageIndex=te,this.div=re,this.#e=f,this.#n=c,this.viewport=$,this.#r.addLayer(this)}get isEmpty(){return 0===this.#s.size}updateToolbar(H){this.#r.updateToolbar(H)}updateMode(H=this.#r.getMode()){this.#p(),H===le.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),H!==le.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",H===le.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",H===le.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",H===le.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(H){if(H||this.#r.getMode()===le.AnnotationEditorType.INK){if(!H)for(const re of this.#s.values())if(re.isEmpty())return void re.setInBackground();this.#h({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(H){this.#r.setEditingState(H)}addCommands(H){this.#r.addCommands(H)}enable(){this.div.style.pointerEvents="auto";const H=new Set;for(const re of this.#s.values())re.enableEditing(),re.annotationElementId&&H.add(re.annotationElementId);if(!this.#n)return;const te=this.#n.getEditableAnnotations();for(const re of te){if(re.hide(),this.#r.isDeletedAnnotationElement(re.data.id)||H.has(re.data.id))continue;const f=this.deserialize(re);f&&(this.addOrRebuild(f),f.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const H=new Set;for(const te of this.#s.values())te.disableEditing(),te.annotationElementId&&null===te.serialize()?(this.getEditableAnnotation(te.annotationElementId)?.show(),te.remove()):H.add(te.annotationElementId);if(this.#n){const te=this.#n.getEditableAnnotations();for(const re of te){const{id:f}=re.data;H.has(f)||this.#r.isDeletedAnnotationElement(f)||re.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(H){return this.#n?.getEditableAnnotation(H)||null}setActiveEditor(H){this.#r.getActive()!==H&&this.#r.setActiveEditor(H)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(H){this.#s.set(H.id,H);const{annotationElementId:te}=H;te&&this.#r.isDeletedAnnotationElement(te)&&this.#r.removeDeletedAnnotationElement(H)}detach(H){this.#s.delete(H.id),this.#e?.removePointerInTextLayer(H.contentDiv),!this.#c&&H.annotationElementId&&this.#r.addDeletedAnnotationElement(H)}remove(H){this.detach(H),this.#r.removeEditor(H),H.div.contains(document.activeElement)&&setTimeout(()=>{this.#r.focusMainContainer()},0),H.div.remove(),H.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(H){H.parent!==this&&(H.annotationElementId&&(this.#r.addDeletedAnnotationElement(H.annotationElementId),Ee.AnnotationEditor.deleteAnnotationElement(H),H.annotationElementId=null),this.attach(H),H.parent?.detach(H),H.setParent(this),H.div&&H.isAttachedToDOM&&(H.div.remove(),this.div.append(H.div)))}add(H){if(this.changeParent(H),this.#r.addEditor(H),this.attach(H),!H.isAttachedToDOM){const te=H.render();this.div.append(te),H.isAttachedToDOM=!0}H.fixAndSetPosition(),H.onceAdded(),this.#r.addToAnnotationStorage(H)}moveEditorInDOM(H){if(!H.isAttachedToDOM)return;const{activeElement:te}=document;H.div.contains(te)&&(H._focusEventsAllowed=!1,setTimeout(()=>{H.div.contains(document.activeElement)?H._focusEventsAllowed=!0:(H.div.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),te.focus())},0)),H._structTreeParentId=this.#e?.moveElementInDOM(this.div,H.div,H.contentDiv,!0)}addOrRebuild(H){H.needsToBeRebuilt()?H.rebuild():this.add(H)}addUndoableEditor(H){this.addCommands({cmd:()=>H._uiManager.rebuild(H),undo:()=>{H.remove()},mustExec:!1})}getNextId(){return this.#r.getId()}#u(H){switch(this.#r.getMode()){case le.AnnotationEditorType.FREETEXT:return new se.FreeTextEditor(H);case le.AnnotationEditorType.INK:return new y.InkEditor(H);case le.AnnotationEditorType.STAMP:return new fe.StampEditor(H)}return null}pasteEditor(H,te){this.#r.updateToolbar(H),this.#r.updateMode(H);const{offsetX:re,offsetY:f}=this.#f(),c=this.getNextId(),$=this.#u({parent:this,id:c,x:re,y:f,uiManager:this.#r,isCentered:!0,...te});$&&this.add($)}deserialize(H){switch(H.annotationType??H.annotationEditorType){case le.AnnotationEditorType.FREETEXT:return se.FreeTextEditor.deserialize(H,this,this.#r);case le.AnnotationEditorType.INK:return y.InkEditor.deserialize(H,this,this.#r);case le.AnnotationEditorType.STAMP:return fe.StampEditor.deserialize(H,this,this.#r)}return null}#h(H,te){const re=this.getNextId(),f=this.#u({parent:this,id:re,x:H.offsetX,y:H.offsetY,uiManager:this.#r,isCentered:te});return f&&this.add(f),f}#f(){const{x:H,y:te,width:re,height:f}=this.div.getBoundingClientRect(),c=Math.max(0,H),$=Math.max(0,te),W=(c+Math.min(window.innerWidth,H+re))/2-H,N=($+Math.min(window.innerHeight,te+f))/2-te,[O,M]=this.viewport.rotation%180==0?[W,N]:[N,W];return{offsetX:O,offsetY:M}}addNewEditor(){this.#h(this.#f(),!0)}setSelected(H){this.#r.setSelected(H)}toggleSelected(H){this.#r.toggleSelected(H)}isSelected(H){return this.#r.isSelected(H)}unselect(H){this.#r.unselect(H)}pointerup(H){const{isMac:te}=le.FeatureTest.platform;if(!(0!==H.button||H.ctrlKey&&te)&&H.target===this.div&&this.#a){if(this.#a=!1,!this.#t)return void(this.#t=!0);if(this.#r.getMode()===le.AnnotationEditorType.STAMP)return void this.#r.unselectAll();this.#h(H,!1)}}pointerdown(H){if(this.#a)return void(this.#a=!1);const{isMac:te}=le.FeatureTest.platform;if(0!==H.button||H.ctrlKey&&te||H.target!==this.div)return;this.#a=!0;const re=this.#r.getActive();this.#t=!re||re.isEmpty()}findNewParent(H,te,re){const f=this.#r.findParent(te,re);return null!==f&&f!==this&&(f.changeParent(H),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null));for(const H of this.#s.values())this.#e?.removePointerInTextLayer(H.contentDiv),H.setParent(null),H.isAttachedToDOM=!1,H.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#p(){this.#l=!0;for(const H of this.#s.values())H.isEmpty()&&H.remove();this.#l=!1}render({viewport:H}){this.viewport=H,(0,k.setLayerDimensions)(this.div,H);for(const te of this.#r.getEditors(this.pageIndex))this.add(te);this.updateMode()}update({viewport:H}){this.#r.commitOrRemove(),this.viewport=H,(0,k.setLayerDimensions)(this.div,{rotation:H.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:H,pageHeight:te}=this.viewport.rawDims;return[H,te]}}return e})()},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.FreeTextEditor=void 0;var le=Oe(1),Ee=Oe(5),se=Oe(4),y=Oe(29);he.FreeTextEditor=(()=>{class fe extends se.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#s="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=fe.prototype,V=re=>re.isEmpty(),H=Ee.AnnotationEditorUIManager.TRANSLATE_SMALL,te=Ee.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,le.shadow)(this,"_keyboardManager",new Ee.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-H,0],checker:V}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-te,0],checker:V}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[H,0],checker:V}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[te,0],checker:V}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-H],checker:V}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-te],checker:V}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,H],checker:V}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,te],checker:V}]]))}static _type="freetext";constructor(e){super({...e,name:"freeTextEditor"}),this.#o=e.color||fe._defaultColor||se.AnnotationEditor._defaultLineColor,this.#l=e.fontSize||fe._defaultFontSize}static initialize(e){se.AnnotationEditor.initialize(e,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const V=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(V.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,V){switch(e){case le.AnnotationEditorParamsType.FREETEXT_SIZE:fe._defaultFontSize=V;break;case le.AnnotationEditorParamsType.FREETEXT_COLOR:fe._defaultColor=V}}updateParams(e,V){switch(e){case le.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(V);break;case le.AnnotationEditorParamsType.FREETEXT_COLOR:this.#u(V)}}static get defaultPropertiesToUpdate(){return[[le.AnnotationEditorParamsType.FREETEXT_SIZE,fe._defaultFontSize],[le.AnnotationEditorParamsType.FREETEXT_COLOR,fe._defaultColor||se.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[le.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[le.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#r(e){const V=te=>{this.editorDiv.style.fontSize=`calc(${te}px * var(--scale-factor))`,this.translate(0,-(te-this.#l)*this.parentScale),this.#l=te,this.#f()},H=this.#l;this.addCommands({cmd:()=>{V(e)},undo:()=>{V(H)},mustExec:!0,type:le.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#u(e){const V=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=e},undo:()=>{this.#o=this.editorDiv.style.color=V},mustExec:!0,type:le.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,V){this._uiManager.translateSelectedEditors(e,V,!0)}getInitialTranslation(){const e=this.parentScale;return[-fe._internalPadding*e,-(fe._internalPadding+this.#l)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(le.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width?this.#m():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#h(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const V=[];for(const H of e)V.push(H.innerText.replace(/\r\n?|\n/,""));return V.join("\n")}#f(){const[e,V]=this.parentDimensions;let H;if(this.isAttachedToDOM)H=this.div.getBoundingClientRect();else{const{currentLayer:te,div:re}=this,f=re.style.display;re.style.display="hidden",te.div.append(this.div),H=re.getBoundingClientRect(),re.remove(),re.style.display=f}this.rotation%180==this.parentRotation%180?(this.width=H.width/e,this.height=H.height/V):(this.width=H.height/e,this.height=H.width/V),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#s,V=this.#s=this.#h().trimEnd();if(e===V)return;const H=te=>{this.#s=te,te?(this.#p(),this._uiManager.rebuild(this),this.#f()):this.remove()};this.addCommands({cmd:()=>{H(V)},undo:()=>{H(e)},mustExec:!1}),this.#f()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){fe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,V;this.width&&(e=this.x,V=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),se.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(te=>this.editorDiv?.setAttribute("aria-label",te)),se.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(te=>this.editorDiv?.setAttribute("default-content",te)),this.editorDiv.contentEditable=!0;const{style:H}=this.editorDiv;if(H.fontSize=`calc(${this.#l}px * var(--scale-factor))`,H.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,Ee.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[te,re]=this.parentDimensions;if(this.annotationElementId){const{position:f}=this.#c;let[c,$]=this.getInitialTranslation();[c,$]=this.pageTranslationToScreen(c,$);const[ae,oe]=this.pageDimensions,[W,N]=this.pageTranslation;let O,M;switch(this.rotation){case 0:O=e+(f[0]-W)/ae,M=V+this.height-(f[1]-N)/oe;break;case 90:O=e+(f[0]-W)/ae,M=V-(f[1]-N)/oe,[c,$]=[$,-c];break;case 180:O=e-this.width+(f[0]-W)/ae,M=V-(f[1]-N)/oe,[c,$]=[-c,-$];break;case 270:O=e+(f[0]-W-this.height*oe)/ae,M=V+(f[1]-N-this.width*ae)/oe,[c,$]=[-$,c]}this.setAt(O*te,M*re,c,$)}else this.setAt(e*te,V*re,this.width*te,this.height*re);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),this.#s)for(const e of this.#s.split("\n")){const V=document.createElement("div");V.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(V)}}get contentDiv(){return this.editorDiv}static deserialize(e,V,H){let te=null;if(e instanceof y.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:f,fontColor:c},rect:$,rotation:ae,id:oe},textContent:W,textPosition:N,parent:{page:{pageNumber:O}}}=e;if(!W||0===W.length)return null;te=e={annotationType:le.AnnotationEditorType.FREETEXT,color:Array.from(c),fontSize:f,value:W.join("\n"),position:N,pageIndex:O-1,rect:$,rotation:ae,id:oe,deleted:!1}}const re=super.deserialize(e,V,H);return re.#l=e.fontSize,re.#o=le.Util.makeHexColor(...e.color),re.#s=e.value,re.annotationElementId=e.id||null,re.#c=te,re}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const V=fe._internalPadding*this.parentScale,H=this.getRect(V,V),te=se.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),re={annotationType:le.AnnotationEditorType.FREETEXT,color:te,fontSize:this.#l,value:this.#s,pageIndex:this.pageIndex,rect:H,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?re:this.annotationElementId&&!this.#g(re)?null:(re.id=this.annotationElementId,re)}#g(e){const{value:V,fontSize:H,color:te,rect:re,pageIndex:f}=this.#c;return e.value!==V||e.fontSize!==H||e.rect.some((c,$)=>Math.abs(c-re[$])>=1)||e.color.some((c,$)=>c!==te[$])||e.pageIndex!==f}#m(e=!1){if(!this.annotationElementId)return;if(this.#f(),!e&&(0===this.width||0===this.height))return void setTimeout(()=>this.#m(!0),0);const V=fe._internalPadding*this.parentScale;this.#c.rect=this.getRect(V,V)}}return fe})()},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.StampAnnotationElement=he.InkAnnotationElement=he.FreeTextAnnotationElement=he.AnnotationLayer=void 0;var le=Oe(1),Ee=Oe(6),se=Oe(3),y=Oe(30),k=Oe(31),fe=Oe(32);const ee=1e3,V=new WeakSet;function H(z){return{width:z[2]-z[0],height:z[3]-z[1]}}class te{static create(L){switch(L.data.annotationType){case le.AnnotationType.LINK:return new f(L);case le.AnnotationType.TEXT:return new c(L);case le.AnnotationType.WIDGET:switch(L.data.fieldType){case"Tx":return new ae(L);case"Btn":return L.data.radioButton?new N(L):L.data.checkBox?new W(L):new O(L);case"Ch":return new M(L);case"Sig":return new oe(L)}return new $(L);case le.AnnotationType.POPUP:return new A(L);case le.AnnotationType.FREETEXT:return new q(L);case le.AnnotationType.LINE:return new C(L);case le.AnnotationType.SQUARE:return new P(L);case le.AnnotationType.CIRCLE:return new F(L);case le.AnnotationType.POLYLINE:return new I(L);case le.AnnotationType.CARET:return new E(L);case le.AnnotationType.INK:return new x(L);case le.AnnotationType.POLYGON:return new j(L);case le.AnnotationType.HIGHLIGHT:return new p(L);case le.AnnotationType.UNDERLINE:return new m(L);case le.AnnotationType.SQUIGGLY:return new _(L);case le.AnnotationType.STRIKEOUT:return new R(L);case le.AnnotationType.STAMP:return new G(L);case le.AnnotationType.FILEATTACHMENT:return new K(L);default:return new re(L)}}}class re{#e=!1;constructor(L,{isRenderable:S=!1,ignoreBorder:B=!1,createQuadrilaterals:J=!1}={}){this.isRenderable=S,this.data=L.data,this.layer=L.layer,this.linkService=L.linkService,this.downloadManager=L.downloadManager,this.imageResourcesPath=L.imageResourcesPath,this.renderForms=L.renderForms,this.svgFactory=L.svgFactory,this.annotationStorage=L.annotationStorage,this.enableScripting=L.enableScripting,this.hasJSActions=L.hasJSActions,this._fieldObjects=L.fieldObjects,this.parent=L.parent,S&&(this.container=this._createContainer(B)),J&&this._createQuadrilaterals()}static _hasPopupData({titleObj:L,contentsObj:S,richText:B}){return!!(L?.str||S?.str||B?.str)}get hasPopupData(){return re._hasPopupData(this.data)}_createContainer(L){const{data:S,parent:{page:B,viewport:J}}=this,ie=document.createElement("section");ie.setAttribute("data-annotation-id",S.id),this instanceof $||(ie.tabIndex=ee),ie.style.zIndex=this.parent.zIndex++,this.data.popupRef&&ie.setAttribute("aria-haspopup","dialog"),S.noRotate&&ie.classList.add("norotate");const{pageWidth:ce,pageHeight:pe,pageX:ye,pageY:Te}=J.rawDims;if(!S.rect||this instanceof A){const{rotation:Ce}=S;return!S.hasOwnCanvas&&0!==Ce&&this.setRotation(Ce,ie),ie}const{width:_e,height:we}=H(S.rect),De=le.Util.normalizeRect([S.rect[0],B.view[3]-S.rect[1]+B.view[1],S.rect[2],B.view[3]-S.rect[3]+B.view[1]]);if(!L&&S.borderStyle.width>0){ie.style.borderWidth=`${S.borderStyle.width}px`;const Ce=S.borderStyle.horizontalCornerRadius,Me=S.borderStyle.verticalCornerRadius;switch(Ce>0||Me>0?ie.style.borderRadius=`calc(${Ce}px * var(--scale-factor)) / calc(${Me}px * var(--scale-factor))`:this instanceof N&&(ie.style.borderRadius=`calc(${_e}px * var(--scale-factor)) / calc(${we}px * var(--scale-factor))`),S.borderStyle.style){case le.AnnotationBorderStyleType.SOLID:ie.style.borderStyle="solid";break;case le.AnnotationBorderStyleType.DASHED:ie.style.borderStyle="dashed";break;case le.AnnotationBorderStyleType.BEVELED:(0,le.warn)("Unimplemented border style: beveled");break;case le.AnnotationBorderStyleType.INSET:(0,le.warn)("Unimplemented border style: inset");break;case le.AnnotationBorderStyleType.UNDERLINE:ie.style.borderBottomStyle="solid"}const Ne=S.borderColor||null;Ne?(this.#e=!0,ie.style.borderColor=le.Util.makeHexColor(0|Ne[0],0|Ne[1],0|Ne[2])):ie.style.borderWidth=0}ie.style.left=100*(De[0]-ye)/ce+"%",ie.style.top=100*(De[1]-Te)/pe+"%";const{rotation:xe}=S;return S.hasOwnCanvas||0===xe?(ie.style.width=100*_e/ce+"%",ie.style.height=100*we/pe+"%"):this.setRotation(xe,ie),ie}setRotation(L,S=this.container){if(!this.data.rect)return;const{pageWidth:B,pageHeight:J}=this.parent.viewport.rawDims,{width:ie,height:ce}=H(this.data.rect);let pe,ye;L%180==0?(pe=100*ie/B,ye=100*ce/J):(pe=100*ce/B,ye=100*ie/J),S.style.width=`${pe}%`,S.style.height=`${ye}%`,S.setAttribute("data-main-rotation",(360-L)%360)}get _commonActions(){const L=(S,B,J)=>{const ie=J.detail[S],ce=ie[0],pe=ie.slice(1);J.target.style[B]=y.ColorConverters[`${ce}_HTML`](pe),this.annotationStorage.setValue(this.data.id,{[B]:y.ColorConverters[`${ce}_rgb`](pe)})};return(0,le.shadow)(this,"_commonActions",{display:S=>{const{display:B}=S.detail,J=B%2==1;this.container.style.visibility=J?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:J,noPrint:1===B||2===B})},print:S=>{this.annotationStorage.setValue(this.data.id,{noPrint:!S.detail.print})},hidden:S=>{const{hidden:B}=S.detail;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:B,noView:B})},focus:S=>{setTimeout(()=>S.target.focus({preventScroll:!1}),0)},userName:S=>{S.target.title=S.detail.userName},readonly:S=>{S.target.disabled=S.detail.readonly},required:S=>{this._setRequired(S.target,S.detail.required)},bgColor:S=>{L("bgColor","backgroundColor",S)},fillColor:S=>{L("fillColor","backgroundColor",S)},fgColor:S=>{L("fgColor","color",S)},textColor:S=>{L("textColor","color",S)},borderColor:S=>{L("borderColor","borderColor",S)},strokeColor:S=>{L("strokeColor","borderColor",S)},rotation:S=>{const B=S.detail.rotation;this.setRotation(B),this.annotationStorage.setValue(this.data.id,{rotation:B})}})}_dispatchEventFromSandbox(L,S){const B=this._commonActions;for(const J of Object.keys(S.detail))(L[J]||B[J])?.(S)}_setDefaultPropertiesFromJS(L){if(!this.enableScripting)return;const S=this.annotationStorage.getRawValue(this.data.id);if(!S)return;const B=this._commonActions;for(const[J,ie]of Object.entries(S)){const ce=B[J];ce&&(ce({detail:{[J]:ie},target:L}),delete S[J])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:L}=this.data;if(!L)return;const[S,B,J,ie]=this.data.rect;if(1===L.length){const[,{x:Me,y:Ne},{x:We,y:Xe}]=L[0];if(J===Me&&ie===Ne&&S===We&&B===Xe)return}const{style:ce}=this.container;let pe;if(this.#e){const{borderColor:Me,borderWidth:Ne}=ce;ce.borderWidth=0,pe=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Me}" stroke-width="${Ne}">`],this.container.classList.add("hasBorder")}const ye=J-S,Te=ie-B,{svgFactory:_e}=this,we=_e.createElement("svg");we.classList.add("quadrilateralsContainer"),we.setAttribute("width",0),we.setAttribute("height",0);const De=_e.createElement("defs");we.append(De);const xe=_e.createElement("clipPath"),Ce=`clippath_${this.data.id}`;xe.setAttribute("id",Ce),xe.setAttribute("clipPathUnits","objectBoundingBox"),De.append(xe);for(const[,{x:Me,y:Ne},{x:We,y:Xe}]of L){const Qe=_e.createElement("rect"),Ye=(We-S)/ye,Je=(ie-Ne)/Te,He=(Me-We)/ye,it=(Ne-Xe)/Te;Qe.setAttribute("x",Ye),Qe.setAttribute("y",Je),Qe.setAttribute("width",He),Qe.setAttribute("height",it),xe.append(Qe),pe?.push(`<rect vector-effect="non-scaling-stroke" x="${Ye}" y="${Je}" width="${He}" height="${it}"/>`)}this.#e&&(pe.push("</g></svg>')"),ce.backgroundImage=pe.join("")),this.container.append(we),this.container.style.clipPath=`url(#${Ce})`}_createPopup(){const{container:L,data:S}=this;L.setAttribute("aria-haspopup","dialog");const B=new A({data:{color:S.color,titleObj:S.titleObj,modificationDate:S.modificationDate,contentsObj:S.contentsObj,richText:S.richText,parentRect:S.rect,borderStyle:0,id:`popup_${S.id}`,rotation:S.rotation},parent:this.parent,elements:[this]});this.parent.div.append(B.render())}render(){(0,le.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(L,S=null){const B=[];if(this._fieldObjects){const J=this._fieldObjects[L];if(J)for(const{page:ie,id:ce,exportValues:pe}of J){if(-1===ie||ce===S)continue;const ye="string"==typeof pe?pe:null,Te=document.querySelector(`[data-element-id="${ce}"]`);!Te||V.has(Te)?B.push({id:ce,exportValue:ye,domElement:Te}):(0,le.warn)(`_getElementsByName - element not allowed: ${ce}`)}return B}for(const J of document.getElementsByName(L)){const{exportValue:ie}=J,ce=J.getAttribute("data-element-id");ce!==S&&V.has(J)&&B.push({id:ce,exportValue:ie,domElement:J})}return B}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const L=this.getElementsToTriggerPopup();if(Array.isArray(L))for(const S of L)S.classList.add("highlightArea");else L.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:L,data:{id:S}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:L,editId:S})})}}class f extends re{constructor(L,S=null){super(L,{isRenderable:!0,ignoreBorder:!!S?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=L.data.isTooltipOnly}render(){const{data:L,linkService:S}=this,B=document.createElement("a");B.setAttribute("data-element-id",L.id);let J=!1;return L.url?(S.addLinkAttributes(B,L.url,L.newWindow),J=!0):L.action?(this._bindNamedAction(B,L.action),J=!0):L.attachment?(this._bindAttachment(B,L.attachment),J=!0):L.setOCGState?(this.#t(B,L.setOCGState),J=!0):L.dest?(this._bindLink(B,L.dest),J=!0):(L.actions&&(L.actions.Action||L.actions["Mouse Up"]||L.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(B,L),J=!0),L.resetForm?(this._bindResetFormAction(B,L.resetForm),J=!0):this.isTooltipOnly&&!J&&(this._bindLink(B,""),J=!0)),this.container.classList.add("linkAnnotation"),J&&this.container.append(B),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(L,S){L.href=this.linkService.getDestinationHash(S),L.onclick=()=>(S&&this.linkService.goToDestination(S),!1),(S||""===S)&&this.#e()}_bindNamedAction(L,S){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.linkService.executeNamedAction(S),!1),this.#e()}_bindAttachment(L,S){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,S.content,S.filename),!1),this.#e()}#t(L,S){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.linkService.executeSetOCGState(S),!1),this.#e()}_bindJSAction(L,S){L.href=this.linkService.getAnchorUrl("");const B=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const J of Object.keys(S.actions)){const ie=B.get(J);ie&&(L[ie]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S.id,name:J}}),!1))}L.onclick||(L.onclick=()=>!1),this.#e()}_bindResetFormAction(L,S){const B=L.onclick;if(B||(L.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return(0,le.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(B||(L.onclick=()=>!1));L.onclick=()=>{B?.();const{fields:J,refs:ie,include:ce}=S,pe=[];if(0!==J.length||0!==ie.length){const _e=new Set(ie);for(const we of J){const De=this._fieldObjects[we]||[];for(const{id:xe}of De)_e.add(xe)}for(const we of Object.values(this._fieldObjects))for(const De of we)_e.has(De.id)===ce&&pe.push(De)}else for(const _e of Object.values(this._fieldObjects))pe.push(..._e);const ye=this.annotationStorage,Te=[];for(const _e of pe){const{id:we}=_e;switch(Te.push(we),_e.type){case"text":case"combobox":case"listbox":ye.setValue(we,{value:_e.defaultValue||""});break;case"checkbox":case"radiobutton":ye.setValue(we,{value:_e.defaultValue===_e.exportValues});break;default:continue}const De=document.querySelector(`[data-element-id="${we}"]`);De&&(V.has(De)?De.dispatchEvent(new Event("resetform")):(0,le.warn)(`_bindResetFormAction - element not allowed: ${we}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Te,name:"ResetForm"}}),!1}}}class c extends re{constructor(L){super(L,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const L=document.createElement("img");return L.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",L.alt="[{{type}} Annotation]",L.dataset.l10nId="text_annotation_type",L.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(L),this.container}}class $ extends re{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(L){this.data.hasOwnCanvas&&("CANVAS"===L.previousSibling?.nodeName&&(L.previousSibling.hidden=!0),L.hidden=!1)}_getKeyModifier(L){const{isWin:S,isMac:B}=le.FeatureTest.platform;return S&&L.ctrlKey||B&&L.metaKey}_setEventListener(L,S,B,J,ie){B.includes("mouse")?L.addEventListener(B,ce=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:J,value:ie(ce),shift:ce.shiftKey,modifier:this._getKeyModifier(ce)}})}):L.addEventListener(B,ce=>{if("blur"===B){if(!S.focused||!ce.relatedTarget)return;S.focused=!1}else if("focus"===B){if(S.focused)return;S.focused=!0}ie&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:J,value:ie(ce)}})})}_setEventListeners(L,S,B,J){for(const[ie,ce]of B)("Action"===ce||this.data.actions?.[ce])&&(("Focus"===ce||"Blur"===ce)&&(S||={focused:!1}),this._setEventListener(L,S,ie,ce,J),"Focus"!==ce||this.data.actions?.Blur?"Blur"===ce&&!this.data.actions?.Focus&&this._setEventListener(L,S,"focus","Focus",null):this._setEventListener(L,S,"blur","Blur",null))}_setBackgroundColor(L){const S=this.data.backgroundColor||null;L.style.backgroundColor=null===S?"transparent":le.Util.makeHexColor(S[0],S[1],S[2])}_setTextStyle(L){const{fontColor:B}=this.data.defaultAppearanceData,J=this.data.defaultAppearanceData.fontSize||9,ie=L.style;let ce;const ye=Te=>Math.round(10*Te)/10;if(this.data.multiLine){const Te=Math.abs(this.data.rect[3]-this.data.rect[1]-2),_e=Math.round(Te/(le.LINE_FACTOR*J))||1;ce=Math.min(J,ye(Te/_e/le.LINE_FACTOR))}else{const Te=Math.abs(this.data.rect[3]-this.data.rect[1]-2);ce=Math.min(J,ye(Te/le.LINE_FACTOR))}ie.fontSize=`calc(${ce}px * var(--scale-factor))`,ie.color=le.Util.makeHexColor(B[0],B[1],B[2]),null!==this.data.textAlignment&&(ie.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(L,S){S?L.setAttribute("required",!0):L.removeAttribute("required"),L.setAttribute("aria-required",S)}}class ae extends ${constructor(L){super(L,{isRenderable:L.renderForms||!L.data.hasAppearance&&!!L.data.fieldValue})}setPropertyOnSiblings(L,S,B,J){const ie=this.annotationStorage;for(const ce of this._getElementsByName(L.name,L.id))ce.domElement&&(ce.domElement[S]=B),ie.setValue(ce.id,{[J]:B})}render(){const L=this.annotationStorage,S=this.data.id;this.container.classList.add("textWidgetAnnotation");let B=null;if(this.renderForms){const J=L.getValue(S,{value:this.data.fieldValue});let ie=J.value||"";const ce=L.getValue(S,{charLimit:this.data.maxLen}).charLimit;ce&&ie.length>ce&&(ie=ie.slice(0,ce));let pe=J.formattedValue||this.data.textContent?.join("\n")||null;pe&&this.data.comb&&(pe=pe.replaceAll(/\s+/g,""));const ye={userValue:ie,formattedValue:pe,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(B=document.createElement("textarea"),B.textContent=pe??ie,this.data.doNotScroll&&(B.style.overflowY="hidden")):(B=document.createElement("input"),B.type="text",B.setAttribute("value",pe??ie),this.data.doNotScroll&&(B.style.overflowX="hidden")),this.data.hasOwnCanvas&&(B.hidden=!0),V.add(B),B.setAttribute("data-element-id",S),B.disabled=this.data.readOnly,B.name=this.data.fieldName,B.tabIndex=ee,this._setRequired(B,this.data.required),ce&&(B.maxLength=ce),B.addEventListener("input",_e=>{L.setValue(S,{value:_e.target.value}),this.setPropertyOnSiblings(B,"value",_e.target.value,"value"),ye.formattedValue=null}),B.addEventListener("resetform",_e=>{B.value=ye.userValue=this.data.defaultFieldValue??"",ye.formattedValue=null});let Te=_e=>{const{formattedValue:we}=ye;null!=we&&(_e.target.value=we),_e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){B.addEventListener("focus",we=>{if(ye.focused)return;const{target:De}=we;ye.userValue&&(De.value=ye.userValue),ye.lastCommittedValue=De.value,ye.commitKey=1,ye.focused=!0}),B.addEventListener("updatefromsandbox",we=>{this.showElementAndHideCanvas(we.target),this._dispatchEventFromSandbox({value(xe){ye.userValue=xe.detail.value??"",L.setValue(S,{value:ye.userValue.toString()}),xe.target.value=ye.userValue},formattedValue(xe){const{formattedValue:Ce}=xe.detail;ye.formattedValue=Ce,null!=Ce&&xe.target!==document.activeElement&&(xe.target.value=Ce),L.setValue(S,{formattedValue:Ce})},selRange(xe){xe.target.setSelectionRange(...xe.detail.selRange)},charLimit:xe=>{const{charLimit:Ce}=xe.detail,{target:Me}=xe;if(0===Ce)return void Me.removeAttribute("maxLength");Me.setAttribute("maxLength",Ce);let Ne=ye.userValue;!Ne||Ne.length<=Ce||(Ne=Ne.slice(0,Ce),Me.value=ye.userValue=Ne,L.setValue(S,{value:Ne}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:Ne,willCommit:!0,commitKey:1,selStart:Me.selectionStart,selEnd:Me.selectionEnd}}))}},we)}),B.addEventListener("keydown",we=>{ye.commitKey=1;let De=-1;if("Escape"===we.key?De=0:"Enter"!==we.key||this.data.multiLine?"Tab"===we.key&&(ye.commitKey=3):De=2,-1===De)return;const{value:xe}=we.target;ye.lastCommittedValue!==xe&&(ye.lastCommittedValue=xe,ye.userValue=xe,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:xe,willCommit:!0,commitKey:De,selStart:we.target.selectionStart,selEnd:we.target.selectionEnd}}))});const _e=Te;Te=null,B.addEventListener("blur",we=>{if(!ye.focused||!we.relatedTarget)return;ye.focused=!1;const{value:De}=we.target;ye.userValue=De,ye.lastCommittedValue!==De&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:De,willCommit:!0,commitKey:ye.commitKey,selStart:we.target.selectionStart,selEnd:we.target.selectionEnd}}),_e(we)}),this.data.actions?.Keystroke&&B.addEventListener("beforeinput",we=>{ye.lastCommittedValue=null;const{data:De,target:xe}=we,{value:Ce,selectionStart:Me,selectionEnd:Ne}=xe;let We=Me,Xe=Ne;switch(we.inputType){case"deleteWordBackward":{const Qe=Ce.substring(0,Me).match(/\w*[^\w]*$/);Qe&&(We-=Qe[0].length);break}case"deleteWordForward":{const Qe=Ce.substring(Me).match(/^[^\w]*\w*/);Qe&&(Xe+=Qe[0].length);break}case"deleteContentBackward":Me===Ne&&(We-=1);break;case"deleteContentForward":Me===Ne&&(Xe+=1)}we.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:Ce,change:De||"",willCommit:!1,selStart:We,selEnd:Xe}})}),this._setEventListeners(B,ye,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],we=>we.target.value)}if(Te&&B.addEventListener("blur",Te),this.data.comb){const we=(this.data.rect[2]-this.data.rect[0])/ce;B.classList.add("comb"),B.style.letterSpacing=`calc(${we}px * var(--scale-factor) - 1ch)`}}else B=document.createElement("div"),B.textContent=this.data.fieldValue,B.style.verticalAlign="middle",B.style.display="table-cell";return this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class oe extends ${constructor(L){super(L,{isRenderable:!!L.data.hasOwnCanvas})}}class W extends ${constructor(L){super(L,{isRenderable:L.renderForms})}render(){const L=this.annotationStorage,S=this.data,B=S.id;let J=L.getValue(B,{value:S.exportValue===S.fieldValue}).value;"string"==typeof J&&(J="Off"!==J,L.setValue(B,{value:J})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ie=document.createElement("input");return V.add(ie),ie.setAttribute("data-element-id",B),ie.disabled=S.readOnly,this._setRequired(ie,this.data.required),ie.type="checkbox",ie.name=S.fieldName,J&&ie.setAttribute("checked",!0),ie.setAttribute("exportValue",S.exportValue),ie.tabIndex=ee,ie.addEventListener("change",ce=>{const{name:pe,checked:ye}=ce.target;for(const Te of this._getElementsByName(pe,B)){const _e=ye&&Te.exportValue===S.exportValue;Te.domElement&&(Te.domElement.checked=_e),L.setValue(Te.id,{value:_e})}L.setValue(B,{value:ye})}),ie.addEventListener("resetform",ce=>{ce.target.checked=(S.defaultFieldValue||"Off")===S.exportValue}),this.enableScripting&&this.hasJSActions&&(ie.addEventListener("updatefromsandbox",ce=>{this._dispatchEventFromSandbox({value(ye){ye.target.checked="Off"!==ye.detail.value,L.setValue(B,{value:ye.target.checked})}},ce)}),this._setEventListeners(ie,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ce=>ce.target.checked)),this._setBackgroundColor(ie),this._setDefaultPropertiesFromJS(ie),this.container.append(ie),this.container}}class N extends ${constructor(L){super(L,{isRenderable:L.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const L=this.annotationStorage,S=this.data,B=S.id;let J=L.getValue(B,{value:S.fieldValue===S.buttonValue}).value;"string"==typeof J&&(J=J!==S.buttonValue,L.setValue(B,{value:J}));const ie=document.createElement("input");if(V.add(ie),ie.setAttribute("data-element-id",B),ie.disabled=S.readOnly,this._setRequired(ie,this.data.required),ie.type="radio",ie.name=S.fieldName,J&&ie.setAttribute("checked",!0),ie.tabIndex=ee,ie.addEventListener("change",ce=>{const{name:pe,checked:ye}=ce.target;for(const Te of this._getElementsByName(pe,B))L.setValue(Te.id,{value:!1});L.setValue(B,{value:ye})}),ie.addEventListener("resetform",ce=>{const pe=S.defaultFieldValue;ce.target.checked=null!=pe&&pe===S.buttonValue}),this.enableScripting&&this.hasJSActions){const ce=S.buttonValue;ie.addEventListener("updatefromsandbox",pe=>{this._dispatchEventFromSandbox({value:Te=>{const _e=ce===Te.detail.value;for(const we of this._getElementsByName(Te.target.name)){const De=_e&&we.id===B;we.domElement&&(we.domElement.checked=De),L.setValue(we.id,{value:De})}}},pe)}),this._setEventListeners(ie,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pe=>pe.target.checked)}return this._setBackgroundColor(ie),this._setDefaultPropertiesFromJS(ie),this.container.append(ie),this.container}}class O extends f{constructor(L){super(L,{ignoreBorder:L.data.hasAppearance})}render(){const L=super.render();L.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(L.title=this.data.alternativeText);const S=L.lastChild;return this.enableScripting&&this.hasJSActions&&S&&(this._setDefaultPropertiesFromJS(S),S.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({},B)})),L}}class M extends ${constructor(L){super(L,{isRenderable:L.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const L=this.annotationStorage,S=this.data.id,B=L.getValue(S,{value:this.data.fieldValue}),J=document.createElement("select");V.add(J),J.setAttribute("data-element-id",S),J.disabled=this.data.readOnly,this._setRequired(J,this.data.required),J.name=this.data.fieldName,J.tabIndex=ee;let ie=this.data.combo&&this.data.options.length>0;this.data.combo||(J.size=this.data.options.length,this.data.multiSelect&&(J.multiple=!0)),J.addEventListener("resetform",_e=>{const we=this.data.defaultFieldValue;for(const De of J.options)De.selected=De.value===we});for(const _e of this.data.options){const we=document.createElement("option");we.textContent=_e.displayValue,we.value=_e.exportValue,B.value.includes(_e.exportValue)&&(we.setAttribute("selected",!0),ie=!1),J.append(we)}let ce=null;if(ie){const _e=document.createElement("option");_e.value=" ",_e.setAttribute("hidden",!0),_e.setAttribute("selected",!0),J.prepend(_e),ce=()=>{_e.remove(),J.removeEventListener("input",ce),ce=null},J.addEventListener("input",ce)}const pe=_e=>{const we=_e?"value":"textContent",{options:De,multiple:xe}=J;return xe?Array.prototype.filter.call(De,Ce=>Ce.selected).map(Ce=>Ce[we]):-1===De.selectedIndex?null:De[De.selectedIndex][we]};let ye=pe(!1);const Te=_e=>Array.prototype.map.call(_e.target.options,De=>({displayValue:De.textContent,exportValue:De.value}));return this.enableScripting&&this.hasJSActions?(J.addEventListener("updatefromsandbox",_e=>{this._dispatchEventFromSandbox({value(De){ce?.();const xe=De.detail.value,Ce=new Set(Array.isArray(xe)?xe:[xe]);for(const Me of J.options)Me.selected=Ce.has(Me.value);L.setValue(S,{value:pe(!0)}),ye=pe(!1)},multipleSelection(De){J.multiple=!0},remove(De){const xe=J.options,Ce=De.detail.remove;xe[Ce].selected=!1,J.remove(Ce),xe.length>0&&-1===Array.prototype.findIndex.call(xe,Ne=>Ne.selected)&&(xe[0].selected=!0),L.setValue(S,{value:pe(!0),items:Te(De)}),ye=pe(!1)},clear(De){for(;0!==J.length;)J.remove(0);L.setValue(S,{value:null,items:[]}),ye=pe(!1)},insert(De){const{index:xe,displayValue:Ce,exportValue:Me}=De.detail.insert,Ne=J.children[xe],We=document.createElement("option");We.textContent=Ce,We.value=Me,Ne?Ne.before(We):J.append(We),L.setValue(S,{value:pe(!0),items:Te(De)}),ye=pe(!1)},items(De){const{items:xe}=De.detail;for(;0!==J.length;)J.remove(0);for(const Ce of xe){const{displayValue:Me,exportValue:Ne}=Ce,We=document.createElement("option");We.textContent=Me,We.value=Ne,J.append(We)}J.options.length>0&&(J.options[0].selected=!0),L.setValue(S,{value:pe(!0),items:Te(De)}),ye=pe(!1)},indices(De){const xe=new Set(De.detail.indices);for(const Ce of De.target.options)Ce.selected=xe.has(Ce.index);L.setValue(S,{value:pe(!0)}),ye=pe(!1)},editable(De){De.target.disabled=!De.detail.editable}},_e)}),J.addEventListener("input",_e=>{const we=pe(!0);L.setValue(S,{value:we}),_e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:ye,changeEx:we,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(J,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],_e=>_e.target.value)):J.addEventListener("input",function(_e){L.setValue(S,{value:pe(!0)})}),this.data.combo&&this._setTextStyle(J),this._setBackgroundColor(J),this._setDefaultPropertiesFromJS(J),this.container.append(J),this.container}}class A extends re{constructor(L){const{data:S,elements:B}=L;super(L,{isRenderable:re._hasPopupData(S)}),this.elements=B}render(){this.container.classList.add("popupAnnotation");const L=new b({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),S=[];for(const B of this.elements)B.popup=L,S.push(B.data.id),B.addHighlightArea();return this.container.setAttribute("aria-controls",S.map(B=>`${le.AnnotationPrefix}${B}`).join(",")),this.container}}class b{#e=null;#t=this.#d.bind(this);#n=this.#_.bind(this);#i=this.#S.bind(this);#o=this.#v.bind(this);#s=null;#a=null;#l=null;#c=null;#r=null;#u=null;#h=!1;#f=null;#p=null;#g=null;#m=null;#y=!1;constructor({container:L,color:S,elements:B,titleObj:J,modificationDate:ie,contentsObj:ce,richText:pe,parent:ye,rect:Te,parentRect:_e,open:we}){this.#a=L,this.#m=J,this.#l=ce,this.#g=pe,this.#r=ye,this.#s=S,this.#p=Te,this.#u=_e,this.#c=B;const De=Ee.PDFDateString.toDateObject(ie);De&&(this.#e=ye.l10n.get("annotation_date_string",{date:De.toLocaleDateString(),time:De.toLocaleTimeString()})),this.trigger=B.flatMap(xe=>xe.getElementsToTriggerPopup());for(const xe of this.trigger)xe.addEventListener("click",this.#o),xe.addEventListener("mouseenter",this.#i),xe.addEventListener("mouseleave",this.#n),xe.classList.add("popupTriggerArea");for(const xe of B)xe.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,we&&this.#v()}render(){if(this.#f)return;const{page:{view:L},viewport:{rawDims:{pageWidth:S,pageHeight:B,pageX:J,pageY:ie}}}=this.#r,ce=this.#f=document.createElement("div");if(ce.className="popup",this.#s){const Qe=ce.style.outlineColor=le.Util.makeHexColor(...this.#s);ce.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${Qe} 30%, white)`:le.Util.makeHexColor(...this.#s.map(Je=>Math.floor(.7*(255-Je)+Je)))}const pe=document.createElement("span");pe.className="header";const ye=document.createElement("h1");if(pe.append(ye),({dir:ye.dir,str:ye.textContent}=this.#m),ce.append(pe),this.#e){const Qe=document.createElement("span");Qe.classList.add("popupDate"),this.#e.then(Ye=>{Qe.textContent=Ye}),pe.append(Qe)}const Te=this.#l,_e=this.#g;if(!_e?.str||Te?.str&&Te.str!==_e.str){const Qe=this._formatContents(Te);ce.append(Qe)}else fe.XfaLayer.render({xfaHtml:_e.html,intent:"richText",div:ce}),ce.lastChild.classList.add("richText","popupContent");let we=!!this.#u,De=we?this.#u:this.#p;for(const Qe of this.#c)if(!De||null!==le.Util.intersect(Qe.data.rect,De)){De=Qe.data.rect,we=!0;break}const xe=le.Util.normalizeRect([De[0],L[3]-De[1]+L[1],De[2],L[3]-De[3]+L[1]]),Ne=xe[0]+(we?De[2]-De[0]+5:0),We=xe[1],{style:Xe}=this.#a;Xe.left=100*(Ne-J)/S+"%",Xe.top=100*(We-ie)/B+"%",this.#a.append(ce)}_formatContents({str:L,dir:S}){const B=document.createElement("p");B.classList.add("popupContent"),B.dir=S;const J=L.split(/(?:\r\n?|\n)/);for(let ie=0,ce=J.length;ie<ce;++ie)B.append(document.createTextNode(J[ie])),ie<ce-1&&B.append(document.createElement("br"));return B}#d(L){L.altKey||L.shiftKey||L.ctrlKey||L.metaKey||("Enter"===L.key||"Escape"===L.key&&this.#h)&&this.#v()}#v(){this.#h=!this.#h,this.#h?(this.#S(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#_(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#S(){this.#f||this.render(),this.isVisible?this.#h&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#_(){this.#a.classList.remove("focused"),!this.#h&&this.isVisible&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#a.hidden=!0)}maybeShow(){this.#y&&(this.#y=!1,this.#a.hidden=!1)}get isVisible(){return!1===this.#a.hidden}}class q extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0}),this.textContent=L.data.textContent,this.textPosition=L.data.textPosition,this.annotationEditorType=le.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const L=document.createElement("div");L.classList.add("annotationTextContent"),L.setAttribute("role","comment");for(const S of this.textContent){const B=document.createElement("span");B.textContent=S,L.append(B)}this.container.append(L)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}he.FreeTextAnnotationElement=q;class C extends re{#e=null;constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const L=this.data,{width:S,height:B}=H(L.rect),J=this.svgFactory.create(S,B,!0),ie=this.#e=this.svgFactory.createElement("svg:line");return ie.setAttribute("x1",L.rect[2]-L.lineCoordinates[0]),ie.setAttribute("y1",L.rect[3]-L.lineCoordinates[1]),ie.setAttribute("x2",L.rect[2]-L.lineCoordinates[2]),ie.setAttribute("y2",L.rect[3]-L.lineCoordinates[3]),ie.setAttribute("stroke-width",L.borderStyle.width||1),ie.setAttribute("stroke","transparent"),ie.setAttribute("fill","transparent"),J.append(ie),this.container.append(J),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class P extends re{#e=null;constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const L=this.data,{width:S,height:B}=H(L.rect),J=this.svgFactory.create(S,B,!0),ie=L.borderStyle.width,ce=this.#e=this.svgFactory.createElement("svg:rect");return ce.setAttribute("x",ie/2),ce.setAttribute("y",ie/2),ce.setAttribute("width",S-ie),ce.setAttribute("height",B-ie),ce.setAttribute("stroke-width",ie||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),J.append(ce),this.container.append(J),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class F extends re{#e=null;constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const L=this.data,{width:S,height:B}=H(L.rect),J=this.svgFactory.create(S,B,!0),ie=L.borderStyle.width,ce=this.#e=this.svgFactory.createElement("svg:ellipse");return ce.setAttribute("cx",S/2),ce.setAttribute("cy",B/2),ce.setAttribute("rx",S/2-ie/2),ce.setAttribute("ry",B/2-ie/2),ce.setAttribute("stroke-width",ie||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),J.append(ce),this.container.append(J),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class I extends re{#e=null;constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const L=this.data,{width:S,height:B}=H(L.rect),J=this.svgFactory.create(S,B,!0);let ie=[];for(const pe of L.vertices)ie.push(pe.x-L.rect[0]+","+(L.rect[3]-pe.y));ie=ie.join(" ");const ce=this.#e=this.svgFactory.createElement(this.svgElementName);return ce.setAttribute("points",ie),ce.setAttribute("stroke-width",L.borderStyle.width||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),J.append(ce),this.container.append(J),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class j extends I{constructor(L){super(L),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class E extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class x extends re{#e=[];constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=le.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const L=this.data,{width:S,height:B}=H(L.rect),J=this.svgFactory.create(S,B,!0);for(const ie of L.inkLists){let ce=[];for(const ye of ie)ce.push(`${ye.x-L.rect[0]},${L.rect[3]-ye.y}`);ce=ce.join(" ");const pe=this.svgFactory.createElement(this.svgElementName);this.#e.push(pe),pe.setAttribute("points",ce),pe.setAttribute("stroke-width",L.borderStyle.width||1),pe.setAttribute("stroke","transparent"),pe.setAttribute("fill","transparent"),!L.popupRef&&this.hasPopupData&&this._createPopup(),J.append(pe)}return this.container.append(J),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}he.InkAnnotationElement=x;class p extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class m extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _ extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class R extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class G extends re{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}he.StampAnnotationElement=G;class K extends re{#e=null;constructor(L){super(L,{isRenderable:!0});const{filename:S,content:B}=this.data.file;this.filename=(0,Ee.getFilenameFromUrl)(S,!0),this.content=B,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:S,content:B})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:L,data:S}=this;let B;S.hasAppearance||0===S.fillAlpha?B=document.createElement("div"):(B=document.createElement("img"),B.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(S.name)?"paperclip":"pushpin"}.svg`,S.fillAlpha&&S.fillAlpha<1&&(B.style=`filter: opacity(${Math.round(100*S.fillAlpha)}%);`)),B.addEventListener("dblclick",this.#t.bind(this)),this.#e=B;const{isMac:J}=le.FeatureTest.platform;return L.addEventListener("keydown",ie=>{"Enter"===ie.key&&(J?ie.metaKey:ie.ctrlKey)&&this.#t()}),!S.popupRef&&this.hasPopupData?this._createPopup():B.classList.add("popupTriggerArea"),L.append(B),L}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}he.AnnotationLayer=class U{#e=null;#t=null;#n=new Map;constructor({div:L,accessibilityManager:S,annotationCanvasMap:B,l10n:J,page:ie,viewport:ce}){this.div=L,this.#e=S,this.#t=B,this.l10n=J,this.page=ie,this.viewport=ce,this.zIndex=0,this.l10n||=k.NullL10n}#i(L,S){const B=L.firstChild||L;B.id=`${le.AnnotationPrefix}${S}`,this.div.append(L),this.#e?.moveElementInDOM(this.div,L,B,!1)}render(L){var S=this;return _asyncToGenerator(function*(){const{annotations:B}=L,J=S.div;(0,Ee.setLayerDimensions)(J,S.viewport);const ie=new Map,ce={data:null,layer:J,linkService:L.linkService,downloadManager:L.downloadManager,imageResourcesPath:L.imageResourcesPath||"",renderForms:!1!==L.renderForms,svgFactory:new Ee.DOMSVGFactory,annotationStorage:L.annotationStorage||new se.AnnotationStorage,enableScripting:!0===L.enableScripting,hasJSActions:L.hasJSActions,fieldObjects:L.fieldObjects,parent:S,elements:null};for(const pe of B){if(pe.noHTML)continue;const ye=pe.annotationType===le.AnnotationType.POPUP;if(ye){const we=ie.get(pe.id);if(!we)continue;ce.elements=we}else{const{width:we,height:De}=H(pe.rect);if(we<=0||De<=0)continue}ce.data=pe;const Te=te.create(ce);if(!Te.isRenderable)continue;if(!ye&&pe.popupRef){const we=ie.get(pe.popupRef);we?we.push(Te):ie.set(pe.popupRef,[Te])}Te.annotationEditorType>0&&S.#n.set(Te.data.id,Te);const _e=Te.render();pe.hidden&&(_e.style.visibility="hidden"),S.#i(_e,pe.id)}S.#o(),yield S.l10n.translate(J)})()}update({viewport:L}){const S=this.div;this.viewport=L,(0,Ee.setLayerDimensions)(S,{rotation:L.rotation}),this.#o(),S.hidden=!1}#o(){if(!this.#t)return;const L=this.div;for(const[S,B]of this.#t){const J=L.querySelector(`[data-annotation-id="${S}"]`);if(!J)continue;const{firstChild:ie}=J;ie?"CANVAS"===ie.nodeName?ie.replaceWith(B):ie.before(B):J.append(B)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(L){return this.#n.get(L)}}},(yt,he)=>{function Oe(se){return Math.floor(255*Math.max(0,Math.min(1,se))).toString(16).padStart(2,"0")}function le(se){return Math.max(0,Math.min(255,255*se))}Object.defineProperty(he,"__esModule",{value:!0}),he.ColorConverters=void 0,he.ColorConverters=class Ee{static CMYK_G([y,k,fe,ee]){return["G",1-Math.min(1,.3*y+.59*fe+.11*k+ee)]}static G_CMYK([y]){return["CMYK",0,0,0,1-y]}static G_RGB([y]){return["RGB",y,y,y]}static G_rgb([y]){return[y=le(y),y,y]}static G_HTML([y]){const k=Oe(y);return`#${k}${k}${k}`}static RGB_G([y,k,fe]){return["G",.3*y+.59*k+.11*fe]}static RGB_rgb(y){return y.map(le)}static RGB_HTML(y){return`#${y.map(Oe).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([y,k,fe,ee]){return["RGB",1-Math.min(1,y+ee),1-Math.min(1,fe+ee),1-Math.min(1,k+ee)]}static CMYK_rgb([y,k,fe,ee]){return[le(1-Math.min(1,y+ee)),le(1-Math.min(1,fe+ee)),le(1-Math.min(1,k+ee))]}static CMYK_HTML(y){const k=this.CMYK_RGB(y).slice(1);return this.RGB_HTML(k)}static RGB_CMYK([y,k,fe]){const ee=1-y,e=1-k,V=1-fe;return["CMYK",ee,e,V,Math.min(ee,e,V)]}}},(yt,he)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.NullL10n=void 0,he.getL10nFallback=le;const Oe={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function le(y,k){switch(y){case"find_match_count":y=`find_match_count[${1===k.total?"one":"other"}]`;break;case"find_match_count_limit":y=`find_match_count_limit[${1===k.limit?"one":"other"}]`}return Oe[y]||""}Oe.print_progress_percent="{{progress}}%",he.NullL10n={getLanguage:()=>_asyncToGenerator(function*(){return"en-us"})(),getDirection:()=>_asyncToGenerator(function*(){return"ltr"})(),get:(y,k=null,fe=le(y,k))=>_asyncToGenerator(function*(){return function Ee(y,k){return k?y.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(fe,ee)=>ee in k?k[ee]:"{{"+ee+"}}"):y}(fe,k)})(),translate:y=>_asyncToGenerator(function*(){})()}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.XfaLayer=void 0;var le=Oe(25);he.XfaLayer=class Ee{static setupStorage(y,k,fe,ee,e){const V=ee.getValue(k,{value:null});switch(fe.name){case"textarea":if(null!==V.value&&(y.textContent=V.value),"print"===e)break;y.addEventListener("input",H=>{ee.setValue(k,{value:H.target.value})});break;case"input":if("radio"===fe.attributes.type||"checkbox"===fe.attributes.type){if(V.value===fe.attributes.xfaOn?y.setAttribute("checked",!0):V.value===fe.attributes.xfaOff&&y.removeAttribute("checked"),"print"===e)break;y.addEventListener("change",H=>{ee.setValue(k,{value:H.target.getAttribute(H.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==V.value&&y.setAttribute("value",V.value),"print"===e)break;y.addEventListener("input",H=>{ee.setValue(k,{value:H.target.value})})}break;case"select":if(null!==V.value){y.setAttribute("value",V.value);for(const H of fe.children)H.attributes.value===V.value?H.attributes.selected=!0:H.attributes.hasOwnProperty("selected")&&delete H.attributes.selected}y.addEventListener("input",H=>{const te=H.target.options;ee.setValue(k,{value:-1===te.selectedIndex?"":te[te.selectedIndex].value})})}}static setAttributes({html:y,element:k,storage:fe=null,intent:ee,linkService:e}){const{attributes:V}=k,H=y instanceof HTMLAnchorElement;"radio"===V.type&&(V.name=`${V.name}-${ee}`);for(const[te,re]of Object.entries(V))if(null!=re)switch(te){case"class":re.length&&y.setAttribute(te,re.join(" "));break;case"dataId":break;case"id":y.setAttribute("data-element-id",re);break;case"style":Object.assign(y.style,re);break;case"textContent":y.textContent=re;break;default:(!H||"href"!==te&&"newWindow"!==te)&&y.setAttribute(te,re)}H&&e.addLinkAttributes(y,V.href,V.newWindow),fe&&V.dataId&&this.setupStorage(y,V.dataId,k,fe)}static render(y){const k=y.annotationStorage,fe=y.linkService,ee=y.xfaHtml,e=y.intent||"display",V=document.createElement(ee.name);ee.attributes&&this.setAttributes({html:V,element:ee,intent:e,linkService:fe});const H=[[ee,-1,V]],te=y.div;if(te.append(V),y.viewport){const f=`matrix(${y.viewport.transform.join(",")})`;te.style.transform=f}"richText"!==e&&te.setAttribute("class","xfaLayer xfaFont");const re=[];for(;H.length>0;){const[f,c,$]=H.at(-1);if(c+1===f.children.length){H.pop();continue}const ae=f.children[++H.at(-1)[1]];if(null===ae)continue;const{name:oe}=ae;if("#text"===oe){const N=document.createTextNode(ae.value);re.push(N),$.append(N);continue}const W=ae?.attributes?.xmlns?document.createElementNS(ae.attributes.xmlns,oe):document.createElement(oe);if($.append(W),ae.attributes&&this.setAttributes({html:W,element:ae,storage:k,intent:e,linkService:fe}),ae.children&&ae.children.length>0)H.push([ae,-1,W]);else if(ae.value){const N=document.createTextNode(ae.value);le.XfaText.shouldBuildText(oe)&&re.push(N),W.append(N)}}for(const f of te.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:re}}static update(y){const k=`matrix(${y.viewport.transform.join(",")})`;y.div.style.transform=k,y.div.hidden=!1}}},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.InkEditor=void 0;var le=Oe(1),Ee=Oe(4),se=Oe(29),y=Oe(6),k=Oe(5);he.InkEditor=(()=>{class ee extends Ee.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#s=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#r=!1;#u=null;#h=0;#f=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(V){super({...V,name:"inkEditor"}),this.color=V.color||null,this.thickness=V.thickness||null,this.opacity=V.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(V){Ee.AnnotationEditor.initialize(V,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(V,H){switch(V){case le.AnnotationEditorParamsType.INK_THICKNESS:ee._defaultThickness=H;break;case le.AnnotationEditorParamsType.INK_COLOR:ee._defaultColor=H;break;case le.AnnotationEditorParamsType.INK_OPACITY:ee._defaultOpacity=H/100}}updateParams(V,H){switch(V){case le.AnnotationEditorParamsType.INK_THICKNESS:this.#g(H);break;case le.AnnotationEditorParamsType.INK_COLOR:this.#m(H);break;case le.AnnotationEditorParamsType.INK_OPACITY:this.#y(H)}}static get defaultPropertiesToUpdate(){return[[le.AnnotationEditorParamsType.INK_THICKNESS,ee._defaultThickness],[le.AnnotationEditorParamsType.INK_COLOR,ee._defaultColor||Ee.AnnotationEditor._defaultLineColor],[le.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*ee._defaultOpacity)]]}get propertiesToUpdate(){return[[le.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ee._defaultThickness],[le.AnnotationEditorParamsType.INK_COLOR,this.color||ee._defaultColor||Ee.AnnotationEditor._defaultLineColor],[le.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ee._defaultOpacity))]]}#g(V){const H=this.thickness;this.addCommands({cmd:()=>{this.thickness=V,this.#I()},undo:()=>{this.thickness=H,this.#I()},mustExec:!0,type:le.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(V){const H=this.color;this.addCommands({cmd:()=>{this.color=V,this.#x()},undo:()=>{this.color=H,this.#x()},mustExec:!0,type:le.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#y(V){V/=100;const H=this.opacity;this.addCommands({cmd:()=>{this.opacity=V,this.#x()},undo:()=>{this.opacity=H,this.#x()},mustExec:!0,type:le.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#T(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#C()),this.#I()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#u.disconnect(),this.#u=null,super.remove())}setParent(V){!this.parent&&V?this._uiManager.removeShouldRescale(this):this.parent&&null===V&&this._uiManager.addShouldRescale(this),super.setParent(V)}onScaleChanging(){const[V,H]=this.parentDimensions;this.setDimensions(this.width*V,this.height*H)}enableEditMode(){this.#l||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#s))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#s))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#d(){const{parentRotation:V,parentDimensions:[H,te]}=this;switch(V){case 90:return[0,te,te,H];case 180:return[H,te,H,te];case 270:return[H,0,te,H];default:return[0,0,H,te]}}#v(){const{ctx:V,color:H,opacity:te,thickness:re,parentScale:f,scaleFactor:c}=this;V.lineWidth=re*f/c,V.lineCap="round",V.lineJoin="round",V.miterLimit=10,V.strokeStyle=`${H}${(0,k.opacityToHex)(te)}`}#S(V,H){this.canvas.addEventListener("contextmenu",y.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#s),this.isEditing=!0,this.#r||(this.#r=!0,this.#C(),this.thickness||=ee._defaultThickness,this.color||=ee._defaultColor||Ee.AnnotationEditor._defaultLineColor,this.opacity??=ee._defaultOpacity),this.currentPath.push([V,H]),this.#c=!1,this.#v(),this.#p=()=>{this.#F(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#_(V,H){const[te,re]=this.currentPath.at(-1);if(this.currentPath.length>1&&V===te&&H===re)return;const f=this.currentPath;let c=this.#a;if(f.push([V,H]),this.#c=!0,f.length<=2)return c.moveTo(...f[0]),void c.lineTo(V,H);3===f.length&&(this.#a=c=new Path2D,c.moveTo(...f[0])),this.#P(c,...f.at(-3),...f.at(-2),V,H)}#b(){if(0===this.currentPath.length)return;const V=this.currentPath.at(-1);this.#a.lineTo(...V)}#w(V,H){let te;if(this.#p=null,V=Math.min(Math.max(V,0),this.canvas.width),H=Math.min(Math.max(H,0),this.canvas.height),this.#_(V,H),this.#b(),1!==this.currentPath.length)te=this.#R();else{const ae=[V,H];te=[[ae,ae.slice(),ae.slice(),ae]]}const re=this.#a,f=this.currentPath;this.currentPath=[],this.#a=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(f),this.paths.push(te),this.bezierPath2D.push(re),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#T(),this.#M()),this.#I())},mustExec:!0})}#F(){if(!this.#c)return;this.#c=!1,Math.ceil(this.thickness*this.parentScale);const H=this.currentPath.slice(-3),te=H.map(W=>W[0]),re=H.map(W=>W[1]),{ctx:oe}=(Math.min(...te),Math.max(...te),Math.min(...re),Math.max(...re),this);oe.save(),oe.clearRect(0,0,this.canvas.width,this.canvas.height);for(const W of this.bezierPath2D)oe.stroke(W);oe.stroke(this.#a),oe.restore()}#P(V,H,te,re,f,c,$){const ae=(H+re)/2,oe=(te+f)/2,W=(re+c)/2,N=(f+$)/2;V.bezierCurveTo(ae+2*(re-ae)/3,oe+2*(f-oe)/3,W+2*(re-W)/3,N+2*(f-N)/3,W,N)}#R(){const V=this.currentPath;if(V.length<=2)return[[V[0],V[0],V.at(-1),V.at(-1)]];const H=[];let te,[re,f]=V[0];for(te=1;te<V.length-2;te++){const[O,M]=V[te],[A,b]=V[te+1],q=(O+A)/2,C=(M+b)/2;H.push([[re,f],[re+2*(O-re)/3,f+2*(M-f)/3],[q+2*(O-q)/3,C+2*(M-C)/3],[q,C]]),[re,f]=[q,C]}const[c,$]=V[te],[ae,oe]=V[te+1];return H.push([[re,f],[re+2*(c-re)/3,f+2*($-f)/3],[ae+2*(c-ae)/3,oe+2*($-oe)/3],[ae,oe]]),H}#x(){if(this.isEmpty())return void this.#k();this.#v();const{canvas:V,ctx:H}=this;H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,V.width,V.height),this.#k();for(const te of this.bezierPath2D)H.stroke(te)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#I(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(V){this._focusEventsAllowed&&(super.focusin(V),this.enableEditMode())}canvasPointerdown(V){0!==V.button||!this.isInEditMode()||this.#l||(this.setInForeground(),V.preventDefault(),"mouse"!==V.type&&this.div.focus(),this.#S(V.offsetX,V.offsetY))}canvasPointermove(V){V.preventDefault(),this.#_(V.offsetX,V.offsetY)}canvasPointerup(V){V.preventDefault(),this.#D(V)}canvasPointerleave(V){this.#D(V)}#D(V){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#s),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",y.noContextMenu)},10),this.#w(V.offsetX,V.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#T(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ee.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(V=>this.canvas?.setAttribute("aria-label",V)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#u=new ResizeObserver(V=>{const H=V[0].contentRect;H.width&&H.height&&this.setDimensions(H.width,H.height)}),this.#u.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let V,H;this.width&&(V=this.x,H=this.y),super.render(),Ee.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then($=>this.div?.setAttribute("aria-label",$));const[te,re,f,c]=this.#d();if(this.setAt(te,re,0,0),this.setDims(f,c),this.#T(),this.width){const[$,ae]=this.parentDimensions;this.setAspectRatio(this.width*$,this.height*ae),this.setAt(V*$,H*ae,this.width*$,this.height*ae),this.#r=!0,this.#C(),this.setDims(this.width*$,this.height*ae),this.#x(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#C(){if(!this.#r)return;const[V,H]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*V),this.canvas.height=Math.ceil(this.height*H),this.#k()}setDimensions(V,H){const te=Math.round(V),re=Math.round(H);if(this.#h===te&&this.#f===re)return;this.#h=te,this.#f=re,this.canvas.style.visibility="hidden";const[f,c]=this.parentDimensions;this.width=V/f,this.height=H/c,this.fixAndSetPosition(),this.#l&&this.#E(V,H),this.#C(),this.#x(),this.canvas.style.visibility="visible",this.fixDims()}#E(V,H){const te=this.#L(),re=(V-te)/this.#t,f=(H-te)/this.#e;this.scaleFactor=Math.min(re,f)}#k(){const V=this.#L()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+V,this.translationY*this.scaleFactor+V)}static#N(V){const H=new Path2D;for(let te=0,re=V.length;te<re;te++){const[f,c,$,ae]=V[te];0===te&&H.moveTo(...f),H.bezierCurveTo(c[0],c[1],$[0],$[1],ae[0],ae[1])}return H}static#B(V,H,te){const[re,f,c,$]=H;switch(te){case 0:for(let ae=0,oe=V.length;ae<oe;ae+=2)V[ae]+=re,V[ae+1]=$-V[ae+1];break;case 90:for(let ae=0,oe=V.length;ae<oe;ae+=2){const W=V[ae];V[ae]=V[ae+1]+re,V[ae+1]=W+f}break;case 180:for(let ae=0,oe=V.length;ae<oe;ae+=2)V[ae]=c-V[ae],V[ae+1]+=f;break;case 270:for(let ae=0,oe=V.length;ae<oe;ae+=2){const W=V[ae];V[ae]=c-V[ae+1],V[ae+1]=$-W}break;default:throw new Error("Invalid rotation")}return V}static#z(V,H,te){const[re,f,c,$]=H;switch(te){case 0:for(let ae=0,oe=V.length;ae<oe;ae+=2)V[ae]-=re,V[ae+1]=$-V[ae+1];break;case 90:for(let ae=0,oe=V.length;ae<oe;ae+=2){const W=V[ae];V[ae]=V[ae+1]-f,V[ae+1]=W-re}break;case 180:for(let ae=0,oe=V.length;ae<oe;ae+=2)V[ae]=c-V[ae],V[ae+1]-=f;break;case 270:for(let ae=0,oe=V.length;ae<oe;ae+=2){const W=V[ae];V[ae]=$-V[ae+1],V[ae+1]=c-W}break;default:throw new Error("Invalid rotation")}return V}#U(V,H,te,re){const f=[],c=this.thickness/2,$=V*H+c,ae=V*te+c;for(const oe of this.paths){const W=[],N=[];for(let O=0,M=oe.length;O<M;O++){const[A,b,q,C]=oe[O],P=V*A[0]+$,F=V*A[1]+ae,I=V*b[0]+$,j=V*b[1]+ae,E=V*q[0]+$,x=V*q[1]+ae,p=V*C[0]+$,m=V*C[1]+ae;0===O&&(W.push(P,F),N.push(P,F)),W.push(I,j,E,x,p,m),N.push(I,j),O===M-1&&N.push(p,m)}f.push({bezier:ee.#B(W,re,this.rotation),points:ee.#B(N,re,this.rotation)})}return f}#O(){let V=1/0,H=-1/0,te=1/0,re=-1/0;for(const f of this.paths)for(const[c,$,ae,oe]of f){const W=le.Util.bezierBoundingBox(...c,...$,...ae,...oe);V=Math.min(V,W[0]),te=Math.min(te,W[1]),H=Math.max(H,W[2]),re=Math.max(re,W[3])}return[V,te,H,re]}#L(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#I(V=!1){if(this.isEmpty())return;if(!this.#l)return void this.#x();const H=this.#O(),te=this.#L();this.#t=Math.max(Ee.AnnotationEditor.MIN_SIZE,H[2]-H[0]),this.#e=Math.max(Ee.AnnotationEditor.MIN_SIZE,H[3]-H[1]);const re=Math.ceil(te+this.#t*this.scaleFactor),f=Math.ceil(te+this.#e*this.scaleFactor),[c,$]=this.parentDimensions;this.width=re/c,this.height=f/$,this.setAspectRatio(re,f);const ae=this.translationX,oe=this.translationY;this.translationX=-H[0],this.translationY=-H[1],this.#C(),this.#x(),this.#h=re,this.#f=f,this.setDims(re,f);const W=V?te/this.scaleFactor/2:0;this.translate(ae-this.translationX-W,oe-this.translationY-W)}static deserialize(V,H,te){if(V instanceof se.InkAnnotationElement)return null;const re=super.deserialize(V,H,te);re.thickness=V.thickness,re.color=le.Util.makeHexColor(...V.color),re.opacity=V.opacity;const[f,c]=re.pageDimensions,$=re.width*f,ae=re.height*c,oe=re.parentScale,W=V.thickness/2;re.#l=!0,re.#h=Math.round($),re.#f=Math.round(ae);const{paths:N,rect:O,rotation:M}=V;for(let{bezier:b}of N){b=ee.#z(b,O,M);const q=[];re.paths.push(q);let C=oe*(b[0]-W),P=oe*(b[1]-W);for(let I=2,j=b.length;I<j;I+=6){const _=oe*(b[I+4]-W),R=oe*(b[I+5]-W);q.push([[C,P],[oe*(b[I]-W),oe*(b[I+1]-W)],[oe*(b[I+2]-W),oe*(b[I+3]-W)],[_,R]]),C=_,P=R}const F=this.#N(q);re.bezierPath2D.push(F)}const A=re.#O();return re.#t=Math.max(Ee.AnnotationEditor.MIN_SIZE,A[2]-A[0]),re.#e=Math.max(Ee.AnnotationEditor.MIN_SIZE,A[3]-A[1]),re.#E($,ae),re}serialize(){if(this.isEmpty())return null;const V=this.getRect(0,0),H=Ee.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:le.AnnotationEditorType.INK,color:H,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,V),pageIndex:this.pageIndex,rect:V,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return ee})()},(yt,he,Oe)=>{Object.defineProperty(he,"__esModule",{value:!0}),he.StampEditor=void 0;var le=Oe(1),Ee=Oe(4),se=Oe(6),y=Oe(29);he.StampEditor=(()=>{class fe extends Ee.AnnotationEditor{#e=null;#t=null;#n=null;#i=null;#o=null;#s=null;#a=null;#l=null;#c=!1;#r=!1;static _type="stamp";constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#o=e.bitmapFile}static initialize(e){Ee.AnnotationEditor.initialize(e)}static get supportedTypes(){return(0,le.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(V=>`image/${V}`))}static get supportedTypesStr(){return(0,le.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,V){V.pasteEditor(le.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}#u(e,V=!1){e?(this.#e=e.bitmap,V||(this.#t=e.id,this.#c=e.isSvg),this.#p()):this.remove()}#h(){this.#n=null,this._uiManager.enableWaiting(!1),this.#s&&this.div.focus()}#f(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(H=>this.#u(H,!0)).finally(()=>this.#h());if(this.#i){const H=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(H).then(te=>this.#u(te)).finally(()=>this.#h()))}if(this.#o){const H=this.#o;return this.#o=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(H).then(te=>this.#u(te)).finally(()=>this.#h()))}const V=document.createElement("input");V.type="file",V.accept=fe.supportedTypesStr,this.#n=new Promise(H=>{V.addEventListener("change",_asyncToGenerator(function*(){if(V.files&&0!==V.files.length){e._uiManager.enableWaiting(!0);const te=yield e._uiManager.imageManager.getFromFile(V.files[0]);e.#u(te)}else e.remove();H()})),V.addEventListener("cancel",()=>{this.remove(),H()})}).finally(()=>this.#h()),V.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&this.#f(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#f()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,V;if(this.width&&(e=this.x,V=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#f(),this.width){const[H,te]=this.parentDimensions;this.setAt(e*H,V*te,this.width*H,this.height*te)}return this.div}#p(){const{div:e}=this;let{width:V,height:H}=this.#e;const[te,re]=this.pageDimensions,f=.75;if(this.width)V=this.width*te,H=this.height*re;else if(V>f*te||H>f*re){const oe=Math.min(f*te/V,f*re/H);V*=oe,H*=oe}const[c,$]=this.parentDimensions;this.setDims(V*c/te,H*$/re),this._uiManager.enableWaiting(!1);const ae=this.#s=document.createElement("canvas");e.append(ae),e.hidden=!1,this.#y(V,H),this.#v(),this.#r||(this.parent.addUndoableEditor(this),this.#r=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#g(e,V){const[H,te]=this.parentDimensions;this.width=e/H,this.height=V/te,this.setDims(e,V),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#l&&clearTimeout(this.#l),this.#l=setTimeout(()=>{this.#l=null,this.#y(e,V)},200)}#m(e,V){const{width:H,height:te}=this.#e;let re=H,f=te,c=this.#e;for(;re>2*e||f>2*V;){const $=re,ae=f;re>2*e&&(re=re>=16384?Math.floor(re/2)-1:Math.ceil(re/2)),f>2*V&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));const oe=new OffscreenCanvas(re,f);oe.getContext("2d").drawImage(c,0,0,$,ae,0,0,re,f),c=oe.transferToImageBitmap()}return c}#y(e,V){e=Math.ceil(e),V=Math.ceil(V);const H=this.#s;if(!H||H.width===e&&H.height===V)return;H.width=e,H.height=V;const te=this.#c?this.#e:this.#m(e,V),re=H.getContext("2d");re.filter=this._uiManager.hcmFilter,re.drawImage(te,0,0,te.width,te.height,0,0,e,V)}#d(e){if(e){if(this.#c){const te=this._uiManager.imageManager.getSvgUrl(this.#t);if(te)return te}const V=document.createElement("canvas");return({width:V.width,height:V.height}=this.#e),V.getContext("2d").drawImage(this.#e,0,0),V.toDataURL()}if(this.#c){const[V,H]=this.pageDimensions,te=Math.round(this.width*V*se.PixelsPerInch.PDF_TO_CSS_UNITS),re=Math.round(this.height*H*se.PixelsPerInch.PDF_TO_CSS_UNITS),f=new OffscreenCanvas(te,re);return f.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,te,re),f.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#a=new ResizeObserver(e=>{const V=e[0].contentRect;V.width&&V.height&&this.#g(V.width,V.height)}),this.#a.observe(this.div)}static deserialize(e,V,H){if(e instanceof y.StampAnnotationElement)return null;const te=super.deserialize(e,V,H),{rect:re,bitmapUrl:f,bitmapId:c,isSvg:$,accessibilityData:ae}=e;c&&H.imageManager.isValidId(c)?te.#t=c:te.#i=f,te.#c=$;const[oe,W]=te.pageDimensions;return te.width=(re[2]-re[0])/oe,te.height=(re[3]-re[1])/W,ae&&(te.altTextData=ae),te}serialize(e=!1,V=null){if(this.isEmpty())return null;const H={annotationType:le.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(e)return H.bitmapUrl=this.#d(!0),H.accessibilityData=this.altTextData,H;const{decorative:te,altText:re}=this.altTextData;if(!te&&re&&(H.accessibilityData={type:"Figure",alt:re}),null===V)return H;V.stamps||=new Map;const f=this.#c?(H.rect[2]-H.rect[0])*(H.rect[3]-H.rect[1]):null;if(V.stamps.has(this.#t)){if(this.#c){const c=V.stamps.get(this.#t);f>c.area&&(c.area=f,c.serialized.bitmap.close(),c.serialized.bitmap=this.#d(!1))}}else V.stamps.set(this.#t,{area:f,serialized:H}),H.bitmap=this.#d(!1);return H}}return fe})()}],__webpack_module_cache__={};function __w_pdfjs_require__(yt){var he=__webpack_module_cache__[yt];if(void 0!==he)return he.exports;var Oe=__webpack_module_cache__[yt]={exports:{}};return __webpack_modules__[yt](Oe,Oe.exports,__w_pdfjs_require__),Oe.exports}var __nested_webpack_exports__={};return(()=>{var yt=__nested_webpack_exports__;Object.defineProperty(yt,"__esModule",{value:!0}),Object.defineProperty(yt,"AbortException",{enumerable:!0,get:function(){return he.AbortException}}),Object.defineProperty(yt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return se.AnnotationEditorLayer}}),Object.defineProperty(yt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return he.AnnotationEditorParamsType}}),Object.defineProperty(yt,"AnnotationEditorType",{enumerable:!0,get:function(){return he.AnnotationEditorType}}),Object.defineProperty(yt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return y.AnnotationEditorUIManager}}),Object.defineProperty(yt,"AnnotationLayer",{enumerable:!0,get:function(){return k.AnnotationLayer}}),Object.defineProperty(yt,"AnnotationMode",{enumerable:!0,get:function(){return he.AnnotationMode}}),Object.defineProperty(yt,"CMapCompressionType",{enumerable:!0,get:function(){return he.CMapCompressionType}}),Object.defineProperty(yt,"DOMSVGFactory",{enumerable:!0,get:function(){return le.DOMSVGFactory}}),Object.defineProperty(yt,"FeatureTest",{enumerable:!0,get:function(){return he.FeatureTest}}),Object.defineProperty(yt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return fe.GlobalWorkerOptions}}),Object.defineProperty(yt,"ImageKind",{enumerable:!0,get:function(){return he.ImageKind}}),Object.defineProperty(yt,"InvalidPDFException",{enumerable:!0,get:function(){return he.InvalidPDFException}}),Object.defineProperty(yt,"MissingPDFException",{enumerable:!0,get:function(){return he.MissingPDFException}}),Object.defineProperty(yt,"OPS",{enumerable:!0,get:function(){return he.OPS}}),Object.defineProperty(yt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Oe.PDFDataRangeTransport}}),Object.defineProperty(yt,"PDFDateString",{enumerable:!0,get:function(){return le.PDFDateString}}),Object.defineProperty(yt,"PDFWorker",{enumerable:!0,get:function(){return Oe.PDFWorker}}),Object.defineProperty(yt,"PasswordResponses",{enumerable:!0,get:function(){return he.PasswordResponses}}),Object.defineProperty(yt,"PermissionFlag",{enumerable:!0,get:function(){return he.PermissionFlag}}),Object.defineProperty(yt,"PixelsPerInch",{enumerable:!0,get:function(){return le.PixelsPerInch}}),Object.defineProperty(yt,"PromiseCapability",{enumerable:!0,get:function(){return he.PromiseCapability}}),Object.defineProperty(yt,"RenderingCancelledException",{enumerable:!0,get:function(){return le.RenderingCancelledException}}),Object.defineProperty(yt,"SVGGraphics",{enumerable:!0,get:function(){return Oe.SVGGraphics}}),Object.defineProperty(yt,"UnexpectedResponseException",{enumerable:!0,get:function(){return he.UnexpectedResponseException}}),Object.defineProperty(yt,"Util",{enumerable:!0,get:function(){return he.Util}}),Object.defineProperty(yt,"VerbosityLevel",{enumerable:!0,get:function(){return he.VerbosityLevel}}),Object.defineProperty(yt,"XfaLayer",{enumerable:!0,get:function(){return ee.XfaLayer}}),Object.defineProperty(yt,"build",{enumerable:!0,get:function(){return Oe.build}}),Object.defineProperty(yt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return he.createValidAbsoluteUrl}}),Object.defineProperty(yt,"getDocument",{enumerable:!0,get:function(){return Oe.getDocument}}),Object.defineProperty(yt,"getFilenameFromUrl",{enumerable:!0,get:function(){return le.getFilenameFromUrl}}),Object.defineProperty(yt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return le.getPdfFilenameFromUrl}}),Object.defineProperty(yt,"getXfaPageViewport",{enumerable:!0,get:function(){return le.getXfaPageViewport}}),Object.defineProperty(yt,"isDataScheme",{enumerable:!0,get:function(){return le.isDataScheme}}),Object.defineProperty(yt,"isPdfFile",{enumerable:!0,get:function(){return le.isPdfFile}}),Object.defineProperty(yt,"loadScript",{enumerable:!0,get:function(){return le.loadScript}}),Object.defineProperty(yt,"noContextMenu",{enumerable:!0,get:function(){return le.noContextMenu}}),Object.defineProperty(yt,"normalizeUnicode",{enumerable:!0,get:function(){return he.normalizeUnicode}}),Object.defineProperty(yt,"renderTextLayer",{enumerable:!0,get:function(){return Ee.renderTextLayer}}),Object.defineProperty(yt,"setLayerDimensions",{enumerable:!0,get:function(){return le.setLayerDimensions}}),Object.defineProperty(yt,"shadow",{enumerable:!0,get:function(){return he.shadow}}),Object.defineProperty(yt,"updateTextLayer",{enumerable:!0,get:function(){return Ee.updateTextLayer}}),Object.defineProperty(yt,"version",{enumerable:!0,get:function(){return Oe.version}});var he=__w_pdfjs_require__(1),Oe=__w_pdfjs_require__(2),le=__w_pdfjs_require__(6),Ee=__w_pdfjs_require__(26),se=__w_pdfjs_require__(27),y=__w_pdfjs_require__(5),k=__w_pdfjs_require__(29),fe=__w_pdfjs_require__(14),ee=__w_pdfjs_require__(32)})(),__nested_webpack_exports__})(),module.exports=he.pdfjsLib=Oe()},365:(yt,he,Oe)=>{var se,y,le=Oe(156).default;se=globalThis,y=()=>(()=>{"use strict";var Ee=[,(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFFindController=ee.FindState=void 0;var V=e(2),H=e(3),te=e(4);const re={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};ee.FindState=re;const ae={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},oe=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let W;const N=/\p{M}+/gu,O=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,M=/([^\p{M}])\p{M}*$/u,A=/^\p{M}*([^\p{M}])/u,b=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,q=new Map,P=new Map;let F=null,I=null;function j(p){const m=[];let _,R;for(;null!==(_=b.exec(p));){let{index:ce}=_;for(const pe of _[0]){let ye=q.get(pe);ye||(ye=pe.normalize("NFD").length,q.set(pe,ye)),m.push([ye,ce++])}}if(0===m.length&&F)R=F;else if(m.length>0&&I)R=I;else{const _e=`([${Object.keys(ae).join("")}])|([${(0,H.getNormalizeWithNFKC)()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;R=0===m.length?F=new RegExp(_e+"|(\\u0000)","gum"):I=new RegExp(_e+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const G=[];for(;null!==(_=N.exec(p));)G.push([_[0].length,_.index]);let K=p.normalize("NFD");const U=[[0,0]];let z=0,L=0,S=0,B=0,J=0,ie=!1;return K=K.replace(R,(ce,pe,ye,Te,_e,we,De,xe,Ce,Me)=>{if(Me-=B,pe){const Ne=ae[pe],We=Ne.length;for(let Xe=1;Xe<We;Xe++)U.push([Me-S+Xe,S-Xe]);return S-=We-1,Ne}if(ye){let Ne=P.get(ye);Ne||(Ne=ye.normalize("NFKC"),P.set(ye,Ne));const We=Ne.length;for(let Xe=1;Xe<We;Xe++)U.push([Me-S+Xe,S-Xe]);return S-=We-1,Ne}if(Te)return ie=!0,Me+J===G[z]?.[1]?++z:(U.push([Me-1-S+1,S-1]),S-=1,B+=1),U.push([Me-S+1,S]),B+=1,J+=1,Te.charAt(0);if(_e){const Ne=_e.endsWith("\n"),We=Ne?_e.length-2:_e.length;ie=!0;let Xe=We;Me+J===G[z]?.[1]&&(Xe-=G[z][0],++z);for(let Qe=1;Qe<=Xe;Qe++)U.push([Me-1-S+Qe,S-Qe]);return S-=Xe,B+=Xe,Ne?(U.push([(Me+=We-1)-S+1,1+S]),S+=1,B+=1,J+=1,_e.slice(0,We)):_e}if(we)return U.push([Me-S+(we.length-2),1+S]),S+=1,B+=1,J+=1,we.slice(0,-2);if(De)return U.push([Me-S+(De.length-1),S]),B+=1,J+=1,De.slice(0,-1);if(xe)return U.push([Me-S+1,S-1]),S-=1,B+=1,J+=1," ";if(Me+J===m[L]?.[1]){const Ne=m[L][0]-1;++L;for(let We=1;We<=Ne;We++)U.push([Me-(S-We),S-We]);S-=Ne,B+=Ne}return Ce}),U.push([K.length,S]),[K,U,ie]}function E(p,m,_){if(!p)return[m,_];const R=m,G=m+_-1;let K=(0,V.binarySearchFirstItem)(p,B=>B[0]>=R);p[K][0]>R&&--K;let U=(0,V.binarySearchFirstItem)(p,B=>B[0]>=G,K);p[U][0]>G&&--U;const z=R+p[K][1];return[z,G+p[U][1]+1-z]}ee.PDFFindController=class x{#e=null;#t=!0;#n=0;constructor({linkService:m,eventBus:_,updateMatchesCountOnProgress:R=!0}){this._linkService=m,this._eventBus=_,this.#t=R,this.onIsPageVisible=null,this.#o(),_._on("find",this.#i.bind(this)),_._on("findbarclose",this.#S.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(m){this._pdfDocument&&this.#o(),m&&(this._pdfDocument=m,this._firstPageCapability.resolve())}#i(m){if(!m)return;!1===m.phraseSearch&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),"string"==typeof m.query&&(m.query=m.query.match(/\S+/g)));const _=this._pdfDocument,{type:R}=m;(null===this.#e||this.#a(m))&&(this._dirtyMatch=!0),this.#e=m,"highlightallchange"!==R&&this.#w(re.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||_&&this._pdfDocument!==_)return;this.#h();const G=!this._highlightMatches,K=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),R?this._dirtyMatch?this.#g():"again"===R?(this.#g(),G&&this.#e.highlightAll&&this.#p()):"highlightallchange"===R?(K?this.#g():this._highlightMatches=!0,this.#p()):this.#g():this._findTimeout=setTimeout(()=>{this.#g(),this._findTimeout=null},250)})}scrollMatchIntoView({element:m=null,selectedLeft:_=0,pageIndex:R=-1,matchIndex:G=-1}){this._scrollMatches&&m&&-1!==G&&G===this._selected.matchIdx&&-1!==R&&R===this._selected.pageIdx&&(this._scrollMatches=!1,(0,V.scrollIntoView)(m,{top:-50,left:_+-400},!0))}#o(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new te.PromiseCapability}get#s(){const{query:m}=this.#e;return"string"==typeof m?(m!==this._rawQuery&&(this._rawQuery=m,[this._normalizedQuery]=j(m)),this._normalizedQuery):(m||[]).filter(_=>!!_).map(_=>j(_)[0])}#a(m){const _=m.query,R=this.#e.query,G=typeof _;if(G!==typeof R)return!0;if("string"===G){if(_!==R)return!0}else if(JSON.stringify(_)!==JSON.stringify(R))return!0;switch(m.type){case"again":const U=this._selected.pageIdx+1,z=this._linkService;return U>=1&&U<=z.pagesCount&&U!==z.page&&!(this.onIsPageVisible?.(U)??1);case"highlightallchange":return!1}return!0}#l(m,_,R){let G=m.slice(0,_).match(M);if(G){const K=m.charCodeAt(_),U=G[1].charCodeAt(0);if((0,H.getCharacterType)(K)===(0,H.getCharacterType)(U))return!1}if(G=m.slice(_+R).match(A),G){const K=m.charCodeAt(_+R-1),U=G[1].charCodeAt(0);if((0,H.getCharacterType)(K)===(0,H.getCharacterType)(U))return!1}return!0}#c(m,_,R,G){const K=this._pageMatches[R]=[],U=this._pageMatchesLength[R]=[];if(!m)return;const z=this._pageDiffs[R];let L;for(;null!==(L=m.exec(G));){if(_&&!this.#l(G,L.index,L[0].length))continue;const[S,B]=E(z,L.index,L[0].length);B&&(K.push(S),U.push(B))}}#r(m,_){const{matchDiacritics:R}=this.#e;let G=!1;return(m=m.replaceAll(O,(U,z,L,S,B,J)=>z?`[ ]*\\${z}[ ]*`:L?`[ ]*${L}[ ]*`:S?"[ ]+":R?B||J:B?oe.has(B.charCodeAt(0))?B:"":_?(G=!0,`${J}\\p{M}*`):J)).endsWith("[ ]*")&&(m=m.slice(0,m.length-4)),R&&_&&(W||=String.fromCharCode(...oe),G=!0,m=`${m}(?=[${W}]|[^\\p{M}]|$)`),[G,m]}#u(m){let _=this.#s;if(0===_.length)return;const{caseSensitive:R,entireWord:G}=this.#e,K=this._pageContents[m],U=this._hasDiacritics[m];let z=!1;"string"==typeof _?[z,_]=this.#r(_,U):_=_.sort().reverse().map(B=>{const[J,ie]=this.#r(B,U);return z||=J,`(${ie})`}).join("|"),_=_?new RegExp(_,`g${z?"u":""}${R?"":"i"}`):null,this.#c(_,G,m,K),this.#e.highlightAll&&this.#f(m),this._resumePageIdx===m&&(this._resumePageIdx=null,this.#y());const S=this._pageMatches[m].length;this._matchesCountTotal+=S,this.#t?S>0&&this.#b():++this.#n===this._linkService.pagesCount&&this.#b()}#h(){if(this._extractTextPromises.length>0)return;let m=Promise.resolve();const _={disableNormalization:!0};for(let R=0,G=this._linkService.pagesCount;R<G;R++){const K=new te.PromiseCapability;this._extractTextPromises[R]=K.promise,m=m.then(()=>this._pdfDocument.getPage(R+1).then(U=>U.getTextContent(_)).then(U=>{const z=[];for(const L of U.items)z.push(L.str),L.hasEOL&&z.push("\n");[this._pageContents[R],this._pageDiffs[R],this._hasDiacritics[R]]=j(z.join("")),K.resolve()},U=>{console.error(`Unable to get text content for page ${R+1}`,U),this._pageContents[R]="",this._pageDiffs[R]=null,this._hasDiacritics[R]=!1,K.resolve()}))}}#f(m){this._scrollMatches&&this._selected.pageIdx===m&&(this._linkService.page=m+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:m})}#p(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#g(){const m=this.#e.findPrevious,_=this._linkService.page-1,R=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=_,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#p();for(let U=0;U<R;U++)this._pendingFindMatches.has(U)||(this._pendingFindMatches.add(U),this._extractTextPromises[U].then(()=>{this._pendingFindMatches.delete(U),this.#u(U)}))}if(0===this.#s.length)return void this.#w(re.FOUND);if(this._resumePageIdx)return;const K=this._offset;if(this._pagesToSearch=R,null!==K.matchIdx){if(!m&&K.matchIdx+1<this._pageMatches[K.pageIdx].length||m&&K.matchIdx>0)return K.matchIdx=m?K.matchIdx-1:K.matchIdx+1,void this.#v(!0);this.#d(m)}this.#y()}#m(m){const _=this._offset,R=m.length,G=this.#e.findPrevious;return R?(_.matchIdx=G?R-1:0,this.#v(!0),!0):(this.#d(G),!!(_.wrapped&&(_.matchIdx=null,this._pagesToSearch<0))&&(this.#v(!1),!0))}#y(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let m=null;do{const _=this._offset.pageIdx;if(m=this._pageMatches[_],!m){this._resumePageIdx=_;break}}while(!this.#m(m))}#d(m){const _=this._offset,R=this._linkService.pagesCount;_.pageIdx=m?_.pageIdx-1:_.pageIdx+1,_.matchIdx=null,this._pagesToSearch--,(_.pageIdx>=R||_.pageIdx<0)&&(_.pageIdx=m?R-1:0,_.wrapped=!0)}#v(m=!1){let _=re.NOT_FOUND;const R=this._offset.wrapped;if(this._offset.wrapped=!1,m){const G=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,_=R?re.WRAPPED:re.FOUND,-1!==G&&G!==this._selected.pageIdx&&this.#f(G)}this.#w(_,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#f(this._selected.pageIdx))}#S(m){const _=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||_&&this._pdfDocument!==_||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w(re.FOUND),this._highlightMatches=!1,this.#p())})}#_(){const{pageIdx:m,matchIdx:_}=this._selected;let R=0,G=this._matchesCountTotal;if(-1!==_){for(let K=0;K<m;K++)R+=this._pageMatches[K]?.length||0;R+=_+1}return(R<1||R>G)&&(R=G=0),{current:R,total:G}}#b(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#_()})}#w(m,_=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||m===re.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:m,previous:_,matchesCount:this.#_(),rawQuery:this.#e?.query??null})}}},(fe,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.animationStarted=ee.VERTICAL_PADDING=ee.UNKNOWN_SCALE=ee.TextLayerMode=ee.SpreadMode=ee.SidebarView=ee.ScrollMode=ee.SCROLLBAR_PADDING=ee.RenderingStates=ee.ProgressBar=ee.PresentationModeState=ee.OutputScale=ee.MIN_SCALE=ee.MAX_SCALE=ee.MAX_AUTO_SCALE=ee.DEFAULT_SCALE_VALUE=ee.DEFAULT_SCALE_DELTA=ee.DEFAULT_SCALE=ee.CursorTool=ee.AutoPrintRegExp=void 0,ee.apiPageLayoutToViewerModes=function Te(xe){let Ce=M.VERTICAL,Me=A.NONE;switch(xe){case"SinglePage":Ce=M.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Ce=M.PAGE;case"TwoColumnLeft":Me=A.ODD;break;case"TwoPageRight":Ce=M.PAGE;case"TwoColumnRight":Me=A.EVEN}return{scrollMode:Ce,spreadMode:Me}},ee.apiPageModeToSidebarView=function _e(xe){switch(xe){case"UseNone":return N.NONE;case"UseThumbs":return N.THUMBS;case"UseOutlines":return N.OUTLINE;case"UseAttachments":return N.ATTACHMENTS;case"UseOC":return N.LAYERS}return N.NONE},ee.approximateFraction=function p(xe){if(Math.floor(xe)===xe)return[xe,1];const Ce=1/xe;if(Ce>8)return[1,8];if(Math.floor(Ce)===Ce)return[1,Ce];const Ne=xe>1?Ce:xe;let Je,We=0,Xe=1,Qe=1,Ye=1;for(;;){const He=We+Qe,it=Xe+Ye;if(it>8)break;Ne<=He/it?(Qe=He,Ye=it):(We=He,Xe=it)}return Je=Ne-We/Xe<Qe/Ye-Ne?Ne===xe?[We,Xe]:[Xe,We]:Ne===xe?[Qe,Ye]:[Ye,Qe],Je},ee.backtrackBeforeAllVisibleElements=R,ee.binarySearchFirstItem=x,ee.docStyle=void 0,ee.getActiveOrFocusedElement=function ye(){let xe=document,Ce=xe.activeElement||xe.querySelector(":focus");for(;Ce?.shadowRoot;)xe=Ce.shadowRoot,Ce=xe.activeElement||xe.querySelector(":focus");return Ce},ee.getPageSizeInches=function _({view:xe,userUnit:Ce,rotate:Me}){const[Ne,We,Xe,Qe]=xe,Ye=Me%180!=0,Je=(Xe-Ne)/72*Ce,He=(Qe-We)/72*Ce;return{width:Ye?He:Je,height:Ye?Je:He}},ee.getVisibleElements=function G({scrollEl:xe,views:Ce,sortByVisibility:Me=!1,horizontal:Ne=!1,rtl:We=!1}){const Xe=xe.scrollTop,Qe=Xe+xe.clientHeight,Ye=xe.scrollLeft,Je=Ye+xe.clientWidth,dt=[],pt=new Set,Dt=Ce.length;let et=x(Ce,Ne?function it(je){const Ue=je.div,ct=Ue.offsetLeft+Ue.clientLeft;return We?ct<Je:ct+Ue.clientWidth>Ye}:function He(je){const Ue=je.div;return Ue.offsetTop+Ue.clientTop+Ue.clientHeight>Xe});et>0&&et<Dt&&!Ne&&(et=R(et,Ce,Xe));let st=Ne?Je:-1;for(let je=et;je<Dt;je++){const Ue=Ce[je],ct=Ue.div,_t=ct.offsetLeft+ct.clientLeft,Ut=ct.offsetTop+ct.clientTop,jt=ct.clientWidth,rt=ct.clientHeight,Pe=_t+jt,Fe=Ut+rt;if(-1===st)Fe>=Qe&&(st=Fe);else if((Ne?_t:Ut)>st)break;if(Fe<=Xe||Ut>=Qe||Pe<=Ye||_t>=Je)continue;const $e=Math.max(0,Xe-Ut)+Math.max(0,Fe-Qe),bt=(jt-(Math.max(0,Ye-_t)+Math.max(0,Pe-Je)))/jt;dt.push({id:Ue.id,x:_t,y:Ut,view:Ue,percent:(rt-$e)/rt*bt*100|0,widthPercent:100*bt|0}),pt.add(Ue.id)}const Ge=dt[0],Ze=dt.at(-1);return Me&&dt.sort(function(je,Ue){const ct=je.percent-Ue.percent;return Math.abs(ct)>.001?-ct:je.id-Ue.id}),{first:Ge,last:Ze,views:dt,ids:pt}},ee.isPortraitOrientation=function B(xe){return xe.width<=xe.height},ee.isValidRotation=function z(xe){return Number.isInteger(xe)&&xe%90==0},ee.isValidScrollMode=function L(xe){return Number.isInteger(xe)&&Object.values(M).includes(xe)&&xe!==M.UNKNOWN},ee.isValidSpreadMode=function S(xe){return Number.isInteger(xe)&&Object.values(A).includes(xe)&&xe!==A.UNKNOWN},ee.normalizeWheelEventDelta=function U(xe){const Ce=xe.deltaMode;let Me=K(xe);return Ce===WheelEvent.DOM_DELTA_PIXEL?Me/=900:Ce===WheelEvent.DOM_DELTA_LINE&&(Me/=30),Me},ee.normalizeWheelEventDirection=K,ee.parseQueryString=function I(xe){const Ce=new Map;for(const[Me,Ne]of new URLSearchParams(xe))Ce.set(Me.toLowerCase(),Ne);return Ce},ee.removeNullCharacters=function E(xe,Ce=!1){return"string"!=typeof xe?(console.error("The argument must be a string."),xe):(Ce&&(xe=xe.replaceAll(j," ")),xe.replaceAll("\0",""))},ee.roundToDivide=function m(xe,Ce){const Me=xe%Ce;return 0===Me?xe:Math.round(xe-Me+Ce)},ee.scrollIntoView=function P(xe,Ce,Me=!1){let Ne=xe.offsetParent;if(!Ne)return void console.error("offsetParent is not set -- cannot scroll");let We=xe.offsetTop+xe.clientTop,Xe=xe.offsetLeft+xe.clientLeft;for(;Ne.clientHeight===Ne.scrollHeight&&Ne.clientWidth===Ne.scrollWidth||Me&&(Ne.classList.contains("markedContent")||"hidden"===getComputedStyle(Ne).overflow);)if(We+=Ne.offsetTop,Xe+=Ne.offsetLeft,Ne=Ne.offsetParent,!Ne)return;Ce&&(void 0!==Ce.top&&(We+=Ce.top),void 0!==Ce.left&&(Xe+=Ce.left,Ne.scrollLeft=Xe)),Ne.scrollTop=We},ee.toggleCheckedBtn=function we(xe,Ce,Me=null){xe.classList.toggle("toggled",Ce),xe.setAttribute("aria-checked",Ce),Me?.classList.toggle("hidden",!Ce)},ee.toggleExpandedBtn=function De(xe,Ce,Me=null){xe.classList.toggle("toggled",Ce),xe.setAttribute("aria-expanded",Ce),Me?.classList.toggle("hidden",!Ce)},ee.watchScroll=function F(xe,Ce){const Me=function(Xe){We||(We=window.requestAnimationFrame(function(){We=null;const Ye=xe.scrollLeft,Je=Ne.lastX;Ye!==Je&&(Ne.right=Ye>Je),Ne.lastX=Ye;const He=xe.scrollTop,it=Ne.lastY;He!==it&&(Ne.down=He>it),Ne.lastY=He,Ce(Ne)}))},Ne={right:!0,down:!0,lastX:xe.scrollLeft,lastY:xe.scrollTop,_eventHandler:Me};let We=null;return xe.addEventListener("scroll",Me,!0),Ne},ee.DEFAULT_SCALE_VALUE="auto",ee.DEFAULT_SCALE=1,ee.DEFAULT_SCALE_DELTA=1.1,ee.MIN_SCALE=.1,ee.MAX_SCALE=10,ee.UNKNOWN_SCALE=0,ee.MAX_AUTO_SCALE=1.25,ee.SCROLLBAR_PADDING=40,ee.VERTICAL_PADDING=5,ee.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ee.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const N={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};ee.SidebarView=N,ee.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};const M={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};ee.ScrollMode=M;const A={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};ee.SpreadMode=A,ee.CursorTool={SELECT:0,HAND:1,ZOOM:2},ee.AutoPrintRegExp=/\bprint\s*\(/,ee.OutputScale=class C{constructor(){const Ce=window.devicePixelRatio||1;this.sx=Ce,this.sy=Ce}get scaled(){return 1!==this.sx||1!==this.sy}};const j=/[\x01-\x1F]/g;function x(xe,Ce,Me=0){let Ne=Me,We=xe.length-1;if(We<0||!Ce(xe[We]))return xe.length;if(Ce(xe[Ne]))return Ne;for(;Ne<We;){const Xe=Ne+We>>1;Ce(xe[Xe])?We=Xe:Ne=Xe+1}return Ne}function R(xe,Ce,Me){if(xe<2)return xe;let Ne=Ce[xe].div,We=Ne.offsetTop+Ne.clientTop;We>=Me&&(Ne=Ce[xe-1].div,We=Ne.offsetTop+Ne.clientTop);for(let Xe=xe-2;Xe>=0&&(Ne=Ce[Xe].div,!(Ne.offsetTop+Ne.clientTop+Ne.clientHeight<=We));--Xe)xe=Xe;return xe}function K(xe){let Ce=Math.hypot(xe.deltaX,xe.deltaY);const Me=Math.atan2(xe.deltaY,xe.deltaX);return-.25*Math.PI<Me&&Me<.75*Math.PI&&(Ce=-Ce),Ce}const J=new Promise(function(xe){window.requestAnimationFrame(xe)});ee.animationStarted=J;const ie=document.documentElement.style;ee.docStyle=ie,ee.ProgressBar=class pe{#e=null;#t=null;#n=0;#i=null;#o=!0;constructor(Ce){this.#e=Ce.classList,this.#i=Ce.style}get percent(){return this.#n}set percent(Ce){this.#n=function ce(xe,Ce,Me){return Math.min(Math.max(xe,Ce),Me)}(Ce,0,100),isNaN(Ce)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(Ce){if(!Ce)return;const Ne=Ce.parentNode.offsetWidth-Ce.offsetWidth;Ne>0&&this.#i.setProperty("--progressBar-end-offset",`${Ne}px`)}setDisableAutoFetch(Ce=5e3){isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},Ce))}hide(){this.#o&&(this.#o=!1,this.#e.add("hidden"))}show(){this.#o||(this.#o=!0,this.#e.remove("hidden"))}}},(fe,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.CharacterType=void 0,ee.getCharacterType=function N(A){return function V(A){return A<11904}(A)?function H(A){return 0==(65408&A)}(A)?function f(A){return 32===A||9===A||13===A||10===A}(A)?e.SPACE:function te(A){return A>=97&&A<=122||A>=65&&A<=90}(A)||function re(A){return A>=48&&A<=57}(A)||95===A?e.ALPHA_LETTER:e.PUNCT:function W(A){return 3584==(65408&A)}(A)?e.THAI_LETTER:160===A?e.SPACE:e.ALPHA_LETTER:function c(A){return A>=13312&&A<=40959||A>=63744&&A<=64255}(A)?e.HAN_LETTER:function $(A){return A>=12448&&A<=12543}(A)?e.KATAKANA_LETTER:function ae(A){return A>=12352&&A<=12447}(A)?e.HIRAGANA_LETTER:function oe(A){return A>=65376&&A<=65439}(A)?e.HALFWIDTH_KATAKANA_LETTER:e.ALPHA_LETTER},ee.getNormalizeWithNFKC=function M(){return O||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",O};const e={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};let O;ee.CharacterType=e},fe=>{fe.exports=globalThis.pdfjsLib},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.SimpleLinkService=ee.PDFLinkService=ee.LinkTarget=void 0;var V=e(2);const te={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function re($,{url:ae,target:oe,rel:W,enabled:N=!0}={}){if(!ae||"string"!=typeof ae)throw new Error('A valid "url" parameter must provided.');N?$.href=$.title=ae:($.href="",$.title=`Disabled: ${ae}`,$.onclick=()=>!1);let O="";switch(oe){case te.NONE:break;case te.SELF:O="_self";break;case te.BLANK:O="_blank";break;case te.PARENT:O="_parent";break;case te.TOP:O="_top"}$.target=O,$.rel="string"==typeof W?W:"noopener noreferrer nofollow"}ee.LinkTarget=te;class f{#e=new Map;constructor({eventBus:ae,externalLinkTarget:oe=null,externalLinkRel:W=null,ignoreDestinationZoom:N=!1}={}){this.eventBus=ae,this.externalLinkTarget=oe,this.externalLinkRel=W,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=N,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(ae,oe=null){this.baseUrl=oe,this.pdfDocument=ae,this.#e.clear()}setViewer(ae){this.pdfViewer=ae}setHistory(ae){this.pdfHistory=ae}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(ae){this.pdfViewer.currentPageNumber=ae}get rotation(){return this.pdfViewer.pagesRotation}set rotation(ae){this.pdfViewer.pagesRotation=ae}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}#t(ae,oe=null,W){const N=W[0];let O;if("object"==typeof N&&null!==N){if(O=this._cachedPageNumber(N),!O)return void this.pdfDocument.getPageIndex(N).then(M=>{this.cachePageRef(M+1,N),this.#t(ae,oe,W)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${N}" is not a valid page reference, for dest="${ae}".`)})}else{if(!Number.isInteger(N))return void console.error(`PDFLinkService.#goToDestinationHelper: "${N}" is not a valid destination reference, for dest="${ae}".`);O=N+1}!O||O<1||O>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${O}" is not a valid page number, for dest="${ae}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:oe,explicitDest:W,pageNumber:O})),this.pdfViewer.scrollPageIntoView({pageNumber:O,destArray:W,ignoreDestinationZoom:this._ignoreDestinationZoom}))}goToDestination(ae){var oe=this;return le(function*(){if(!oe.pdfDocument)return;let W,N;"string"==typeof ae?(W=ae,N=yield oe.pdfDocument.getDestination(ae)):(W=null,N=yield ae),Array.isArray(N)?oe.#t(ae,W,N):console.error(`PDFLinkService.goToDestination: "${N}" is not a valid destination array, for dest="${ae}".`)})()}goToPage(ae){if(!this.pdfDocument)return;const oe="string"==typeof ae&&this.pdfViewer.pageLabelToPageNumber(ae)||0|ae;Number.isInteger(oe)&&oe>0&&oe<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(oe)),this.pdfViewer.scrollPageIntoView({pageNumber:oe})):console.error(`PDFLinkService.goToPage: "${ae}" is not a valid page.`)}addLinkAttributes(ae,oe,W=!1){re(ae,{url:oe,target:W?te.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(ae){if("string"==typeof ae){if(ae.length>0)return this.getAnchorUrl("#"+escape(ae))}else if(Array.isArray(ae)){const oe=JSON.stringify(ae);if(oe.length>0)return this.getAnchorUrl("#"+escape(oe))}return this.getAnchorUrl("")}getAnchorUrl(ae){return this.baseUrl?this.baseUrl+ae:ae}setHash(ae){if(!this.pdfDocument)return;let oe,W;if(ae.includes("=")){const N=(0,V.parseQueryString)(ae);if(N.has("search")){const O=N.get("search").replaceAll('"',""),M="true"===N.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:M?O:O.match(/\S+/g)})}if(N.has("page")&&(oe=0|N.get("page")||1),N.has("zoom")){const O=N.get("zoom").split(","),M=O[0],A=parseFloat(M);M.includes("Fit")?"Fit"===M||"FitB"===M?W=[null,{name:M}]:"FitH"===M||"FitBH"===M||"FitV"===M||"FitBV"===M?W=[null,{name:M},O.length>1?0|O[1]:null]:"FitR"===M?5!==O.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):W=[null,{name:M},0|O[1],0|O[2],0|O[3],0|O[4]]:console.error(`PDFLinkService.setHash: "${M}" is not a valid zoom value.`):W=[null,{name:"XYZ"},O.length>1?0|O[1]:null,O.length>2?0|O[2]:null,A?A/100:M]}W?this.pdfViewer.scrollPageIntoView({pageNumber:oe||this.page,destArray:W,allowNegativeOffset:!0}):oe&&(this.page=oe),N.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:N.get("pagemode")}),N.has("nameddest")&&this.goToDestination(N.get("nameddest"))}else{W=unescape(ae);try{W=JSON.parse(W),Array.isArray(W)||(W=W.toString())}catch{}if("string"==typeof W||f.#n(W))return void this.goToDestination(W);console.error(`PDFLinkService.setHash: "${unescape(ae)}" is not a valid destination.`)}}executeNamedAction(ae){switch(ae){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:ae})}executeSetOCGState(ae){var oe=this;return le(function*(){const W=oe.pdfDocument,N=yield oe.pdfViewer.optionalContentConfigPromise;if(W!==oe.pdfDocument)return;let O;for(const M of ae.state){switch(M){case"ON":case"OFF":case"Toggle":O=M;continue}switch(O){case"ON":N.setVisibility(M,!0);break;case"OFF":N.setVisibility(M,!1);break;case"Toggle":const A=N.getGroup(M);A&&N.setVisibility(M,!A.visible)}}oe.pdfViewer.optionalContentConfigPromise=Promise.resolve(N)})()}cachePageRef(ae,oe){oe&&this.#e.set(0===oe.gen?`${oe.num}R`:`${oe.num}R${oe.gen}`,ae)}_cachedPageNumber(ae){return ae&&this.#e.get(0===ae.gen?`${ae.num}R`:`${ae.num}R${ae.gen}`)||null}static#n(ae){if(!Array.isArray(ae))return!1;const oe=ae.length;if(oe<2)return!1;const W=ae[0];if(!("object"==typeof W&&Number.isInteger(W.num)&&Number.isInteger(W.gen)||Number.isInteger(W)&&W>=0))return!1;const N=ae[1];if("object"!=typeof N||"string"!=typeof N.name)return!1;let O=!0;switch(N.name){case"XYZ":if(5!==oe)return!1;break;case"Fit":case"FitB":return 2===oe;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==oe)return!1;break;case"FitR":if(6!==oe)return!1;O=!1;break;default:return!1}for(let M=2;M<oe;M++){const A=ae[M];if(!("number"==typeof A||O&&null===A))return!1}return!0}}ee.PDFLinkService=f,ee.SimpleLinkService=class c{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(ae){}get rotation(){return 0}set rotation(ae){}get isInPresentationMode(){return!1}goToDestination(ae){return le(function*(){})()}goToPage(ae){}addLinkAttributes(ae,oe,W=!1){re(ae,{url:oe,enabled:this.externalLinkEnabled})}getDestinationHash(ae){return"#"}getAnchorUrl(ae){return"#"}setHash(ae){}executeNamedAction(ae){}executeSetOCGState(ae){}cachePageRef(ae,oe){}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.AnnotationLayerBuilder=void 0;var V=e(4),H=e(7),te=e(2);ee.AnnotationLayerBuilder=class re{#e=null;constructor({pageDiv:c,pdfPage:$,linkService:ae,downloadManager:oe,annotationStorage:W=null,imageResourcesPath:N="",renderForms:O=!0,l10n:M=H.NullL10n,enableScripting:A=!1,hasJSActionsPromise:b=null,fieldObjectsPromise:q=null,annotationCanvasMap:C=null,accessibilityManager:P=null}){this.pageDiv=c,this.pdfPage=$,this.linkService=ae,this.downloadManager=oe,this.imageResourcesPath=N,this.renderForms=O,this.l10n=M,this.annotationStorage=W,this.enableScripting=A,this._hasJSActionsPromise=b||Promise.resolve(!1),this._fieldObjectsPromise=q||Promise.resolve(null),this._annotationCanvasMap=C,this._accessibilityManager=P,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=ae.eventBus}render(c,$="display"){var ae=this;return le(function*(){if(ae.div){if(ae._cancelled||!ae.annotationLayer)return;return void ae.annotationLayer.update({viewport:c.clone({dontFlip:!0})})}const[oe,W,N]=yield Promise.all([ae.pdfPage.getAnnotations({intent:$}),ae._hasJSActionsPromise,ae._fieldObjectsPromise]);if(ae._cancelled)return;const O=ae.div=document.createElement("div");O.className="annotationLayer",ae.pageDiv.append(O),0!==oe.length?(ae.annotationLayer=new V.AnnotationLayer({div:O,accessibilityManager:ae._accessibilityManager,annotationCanvasMap:ae._annotationCanvasMap,l10n:ae.l10n,page:ae.pdfPage,viewport:c.clone({dontFlip:!0})}),yield ae.annotationLayer.render({annotations:oe,imageResourcesPath:ae.imageResourcesPath,renderForms:ae.renderForms,linkService:ae.linkService,downloadManager:ae.downloadManager,annotationStorage:ae.annotationStorage,enableScripting:ae.enableScripting,hasJSActions:W,fieldObjects:N}),ae.linkService.isInPresentationMode&&ae.#t(te.PresentationModeState.FULLSCREEN),ae.#e||(ae.#e=M=>{ae.#t(M.state)},ae._eventBus?._on("presentationmodechanged",ae.#e))):ae.hide()})()}cancel(){this._cancelled=!0,this.#e&&(this._eventBus?._off("presentationmodechanged",this.#e),this.#e=null)}hide(){this.div&&(this.div.hidden=!0)}#t(c){if(!this.div)return;let $=!1;switch(c){case te.PresentationModeState.FULLSCREEN:$=!0;break;case te.PresentationModeState.NORMAL:break;default:return}for(const ae of this.div.childNodes)ae.hasAttribute("data-internal-link")||(ae.inert=$)}}},(fe,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NullL10n=void 0,ee.getL10nFallback=V;const e={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function V(re,f){switch(re){case"find_match_count":re=`find_match_count[${1===f.total?"one":"other"}]`;break;case"find_match_count_limit":re=`find_match_count_limit[${1===f.limit?"one":"other"}]`}return e[re]||""}e.print_progress_percent="{{progress}}%",ee.NullL10n={getLanguage:()=>le(function*(){return"en-us"})(),getDirection:()=>le(function*(){return"ltr"})(),get:(re,f=null,c=V(re,f))=>le(function*(){return function H(re,f){return f?re.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(c,$)=>$ in f?f[$]:"{{"+$+"}}"):re}(c,f)})(),translate:re=>le(function*(){})()}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.DownloadManager=void 0;var V=e(4);function H(re,f){const c=document.createElement("a");if(!c.click)throw new Error('DownloadManager: "a.click()" is not supported.');c.href=re,c.target="_parent","download"in c&&(c.download=f),(document.body||document.documentElement).append(c),c.click(),c.remove()}ee.DownloadManager=class te{#e=new WeakMap;downloadUrl(f,c,$){(0,V.createValidAbsoluteUrl)(f,"http://example.com")?H(f+"#pdfjs.action=download",c):console.error(`downloadUrl - not a valid URL: ${f}`)}downloadData(f,c,$){H(URL.createObjectURL(new Blob([f],{type:$})),c)}openOrDownloadData(f,c,$){const oe=(0,V.isPdfFile)($)?"application/pdf":"";return this.downloadData(c,$,oe),!1}download(f,c,$,ae){H(URL.createObjectURL(f),$)}}},(fe,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.WaitOnType=ee.EventBus=ee.AutomationEventBus=void 0,ee.waitOnEventOrTimeout=function V({target:re,name:f,delay:c=0}){return new Promise(function($,ae){if("object"!=typeof re||!f||"string"!=typeof f||!(Number.isInteger(c)&&c>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function oe(M){re instanceof H?re._off(f,W):re.removeEventListener(f,W),O&&clearTimeout(O),$(M)}const W=oe.bind(null,e.EVENT);re instanceof H?re._on(f,W):re.addEventListener(f,W);const N=oe.bind(null,e.TIMEOUT),O=setTimeout(N,c)})};const e={EVENT:"event",TIMEOUT:"timeout"};ee.WaitOnType=e;class H{#e=Object.create(null);on(f,c,$=null){this._on(f,c,{external:!0,once:$?.once})}off(f,c,$=null){this._off(f,c,{external:!0,once:$?.once})}dispatch(f,c){const $=this.#e[f];if(!$||0===$.length)return;let ae;for(const{listener:oe,external:W,once:N}of $.slice(0))N&&this._off(f,oe),W?(ae||=[]).push(oe):oe(c);if(ae){for(const oe of ae)oe(c);ae=null}}_on(f,c,$=null){(this.#e[f]||=[]).push({listener:c,external:!0===$?.external,once:!0===$?.once})}_off(f,c,$=null){const ae=this.#e[f];if(ae)for(let oe=0,W=ae.length;oe<W;oe++)if(ae[oe].listener===c)return void ae.splice(oe,1)}}ee.EventBus=H,ee.AutomationEventBus=class te extends H{dispatch(f,c){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.GenericL10n=void 0,e(11);var V=e(7);const H={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};ee.GenericL10n=class re{constructor(c){const{webL10n:$}=document;this._lang=c,this._ready=new Promise((ae,oe)=>{$.setLanguage(function te(f){return H[f?.toLowerCase()]||f}(c),()=>{ae($)})})}getLanguage(){var c=this;return le(function*(){return(yield c._ready).getLanguage()})()}getDirection(){var c=this;return le(function*(){return(yield c._ready).getDirection()})()}get(c,$=null,ae=(0,V.getL10nFallback)(c,$)){var oe=this;return le(function*(){return(yield oe._ready).get(c,$,ae)})()}translate(c){var $=this;return le(function*(){return(yield $._ready).translate(c)})()}}},()=>{document.webL10n=function(fe,ee){var e={},V="",H="textContent",te="",re={},f="loading",c=!0;function N(E,x,p){x=x||function(R){},p=p||function(){};var m=new XMLHttpRequest;m.open("GET",E,c),m.overrideMimeType&&m.overrideMimeType("text/plain; charset=utf-8"),m.onreadystatechange=function(){4==m.readyState&&(200==m.status||0===m.status?x(m.responseText):p())},m.onerror=p,m.ontimeout=p;try{m.send(null)}catch{p()}}function M(E,x){E&&(E=E.toLowerCase()),x=x||function(){},function A(){e={},V="",te=""}(),te=E;var p=function $(){return ee.querySelectorAll('link[type="application/l10n"]')}(),m=p.length;if(0!==m){var K,U=0;K=function(){++U>=m&&(x(),f="complete")};for(var L=0;L<m;L++)new z(p[L]).load(E,K)}else{var _=function ae(){var E=ee.querySelector('script[type="application/l10n"]');return E?JSON.parse(E.innerHTML):null}();if(_&&_.locales&&_.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(e=_.locales[E])){var R=_.default_locale.toLowerCase();for(var G in _.locales){if((G=G.toLowerCase())===E){e=_.locales[E];break}G===R&&(e=_.locales[R])}}x()}else console.log("no resource to load, early way out");f="complete"}function z(B){var J=B.href;this.load=function(ie,ce){!function O(E,x,p,m){var _=E.replace(/[^\/]*$/,"")||"./";function R(K){return K.lastIndexOf("\\")<0?K:K.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}N(E,function(K){V+=K,function G(K,U){var z={},L=/^\s*|\s*$/,S=/^\s*#|^\s*$/,B=/^\s*\[(.*)\]\s*$/,J=/^\s*@import\s+url\((.*)\)\s*$/i,ie=/^([^=\s]*)\s*=\s*(.+)$/;function ce(ye,Te,_e){var we=ye.replace(L,"").split(/[\r\n]+/),De="*",xe=x.split("-",1)[0],Ce=!1,Me="";!function Ne(){for(;;){if(!we.length)return void _e();var We=we.shift();if(!S.test(We)){if(Te){if(Me=B.exec(We)){De=Me[1].toLowerCase(),Ce="*"!==De&&De!==x&&De!==xe;continue}if(Ce)continue;if(Me=J.exec(We))return void pe(_+Me[1],Ne)}var Xe=We.match(ie);Xe&&3==Xe.length&&(z[Xe[1]]=R(Xe[2]))}}}()}function pe(ye,Te){N(ye,function(_e){ce(_e,!1,Te)},function(){console.warn(ye+" not found."),Te()})}ce(K,!0,function(){U(z)})}(K,function(U){for(var z in U){var L,S,B=z.lastIndexOf(".");B>0?(L=z.substring(0,B),S=z.substring(B+1)):(L=z,S=H),e[L]||(e[L]={}),e[L][S]=U[z]}p&&p()})},m)}(J,ie,ce,function(){console.warn(J+" not found."),console.warn('"'+ie+'" resource not found'),te="",ce()})}}}function q(E,x,p){var m=e[E];if(!m){if(console.warn("#"+E+" is undefined."),!p)return null;m=p}var _={};for(var R in m){var G=m[R];G=P(G=C(G,x,E,R),x,E),_[R]=G}return _}function C(E,x,p,m){var R=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(E);if(!R||!R.length)return E;var U,G=R[1],K=R[2];return x&&K in x?U=x[K]:K in e&&(U=e[K]),G in re&&(E=(0,re[G])(E,U,p,m)),E}function P(E,x,p){return E.replace(/\{\{\s*(.+?)\s*\}\}/g,function(_,R){return x&&R in x?x[R]:R in e?e[R]:(console.log("argument {{"+R+"}} for #"+p+" is undefined."),_)})}function F(E){var x=function W(E){if(!E)return{};var x=E.getAttribute("data-l10n-id"),p=E.getAttribute("data-l10n-args"),m={};if(p)try{m=JSON.parse(p)}catch{console.warn("could not parse arguments for #"+x)}return{id:x,args:m}}(E);if(x.id){var p=q(x.id,x.args);if(!p)return void console.warn("#"+x.id+" is undefined.");if(p[H]){if(0===function I(E){if(E.children)return E.children.length;if(typeof E.childElementCount<"u")return E.childElementCount;for(var x=0,p=0;p<E.childNodes.length;p++)x+=1===E.nodeType?1:0;return x}(E))E[H]=p[H];else{for(var m=E.childNodes,_=!1,R=0,G=m.length;R<G;R++)3===m[R].nodeType&&/\S/.test(m[R].nodeValue)&&(_?m[R].nodeValue="":(m[R].nodeValue=p[H],_=!0));if(!_){var K=ee.createTextNode(p[H]);E.prepend(K)}}delete p[H]}for(var U in p)E[U]=p[U]}}return re.plural=function(E,x,p,m){var _=parseFloat(x);if(isNaN(_)||m!=H)return E;re._pluralRules||(re._pluralRules=function b(E){function p(G,K){return-1!==K.indexOf(G)}function m(G,K,U){return K<=G&&G<=U}var _={0:function(G){return"other"},1:function(G){return m(G%100,3,10)?"few":0===G?"zero":m(G%100,11,99)?"many":2==G?"two":1==G?"one":"other"},2:function(G){return 0!==G&&G%10==0?"many":2==G?"two":1==G?"one":"other"},3:function(G){return 1==G?"one":"other"},4:function(G){return m(G,0,1)?"one":"other"},5:function(G){return m(G,0,2)&&2!=G?"one":"other"},6:function(G){return 0===G?"zero":G%10==1&&G%100!=11?"one":"other"},7:function(G){return 2==G?"two":1==G?"one":"other"},8:function(G){return m(G,3,6)?"few":m(G,7,10)?"many":2==G?"two":1==G?"one":"other"},9:function(G){return 0===G||1!=G&&m(G%100,1,19)?"few":1==G?"one":"other"},10:function(G){return m(G%10,2,9)&&!m(G%100,11,19)?"few":G%10!=1||m(G%100,11,19)?"other":"one"},11:function(G){return m(G%10,2,4)&&!m(G%100,12,14)?"few":G%10==0||m(G%10,5,9)||m(G%100,11,14)?"many":G%10==1&&G%100!=11?"one":"other"},12:function(G){return m(G,2,4)?"few":1==G?"one":"other"},13:function(G){return m(G%10,2,4)&&!m(G%100,12,14)?"few":1!=G&&m(G%10,0,1)||m(G%10,5,9)||m(G%100,12,14)?"many":1==G?"one":"other"},14:function(G){return m(G%100,3,4)?"few":G%100==2?"two":G%100==1?"one":"other"},15:function(G){return 0===G||m(G%100,2,10)?"few":m(G%100,11,19)?"many":1==G?"one":"other"},16:function(G){return G%10==1&&11!=G?"one":"other"},17:function(G){return 3==G?"few":0===G?"zero":6==G?"many":2==G?"two":1==G?"one":"other"},18:function(G){return 0===G?"zero":m(G,0,2)&&0!==G&&2!=G?"one":"other"},19:function(G){return m(G,2,10)?"few":m(G,0,1)?"one":"other"},20:function(G){return!m(G%10,3,4)&&G%10!=9||m(G%100,10,19)||m(G%100,70,79)||m(G%100,90,99)?G%1e6==0&&0!==G?"many":G%10!=2||p(G%100,[12,72,92])?G%10!=1||p(G%100,[11,71,91])?"other":"one":"two":"few"},21:function(G){return 0===G?"zero":1==G?"one":"other"},22:function(G){return m(G,0,1)||m(G,11,99)?"one":"other"},23:function(G){return m(G%10,1,2)||G%20==0?"one":"other"},24:function(G){return m(G,3,10)||m(G,13,19)?"few":p(G,[2,12])?"two":p(G,[1,11])?"one":"other"}},R={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[E.replace(/-.*$/,"")];return R in _?_[R]:(console.warn("plural form unknown for ["+E+"]"),function(){return"other"})}(te));var R="["+re._pluralRules(_)+"]";return 0===_&&p+"[zero]"in e?E=e[p+"[zero]"][m]:1==_&&p+"[one]"in e?E=e[p+"[one]"][m]:2==_&&p+"[two]"in e?E=e[p+"[two]"][m]:p+R in e?E=e[p+R][m]:p+"[other]"in e&&(E=e[p+"[other]"][m]),E},{get:function(E,x,p){var R,m=E.lastIndexOf("."),_=H;m>0&&(_=E.substring(m+1),E=E.substring(0,m)),p&&((R={})[_]=p);var G=q(E,x,R);return G&&_ in G?G[_]:"{{"+E+"}}"},getData:function(){return e},getText:function(){return V},getLanguage:function(){return te},setLanguage:function(E,x){M(E,function(){x&&x()})},getDirection:function(){var x=te.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(x)>=0?"rtl":"ltr"},translate:function j(E){for(var x=function oe(E){return E?E.querySelectorAll("*[data-l10n-id]"):[]}(E=E||ee.documentElement),p=x.length,m=0;m<p;m++)F(x[m]);F(E)},getReadyState:function(){return f},ready:function(E){E&&("complete"==f||"interactive"==f?fe.setTimeout(function(){E()}):ee.addEventListener&&ee.addEventListener("localized",function x(){ee.removeEventListener("localized",x),E()}))}}}(window,document)},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFHistory=void 0,ee.isDestArraysEqual=oe,ee.isDestHashesEqual=ae;var V=e(2),H=e(9);function c(){return document.location.hash}function ae(W,N){return"string"==typeof W&&"string"==typeof N&&(W===N||(0,V.parseQueryString)(W).get("nameddest")===N)}function oe(W,N){function O(M,A){if(typeof M!=typeof A||Array.isArray(M)||Array.isArray(A))return!1;if(null!==M&&"object"==typeof M&&null!==A){if(Object.keys(M).length!==Object.keys(A).length)return!1;for(const b in M)if(!O(M[b],A[b]))return!1;return!0}return M===A||Number.isNaN(M)&&Number.isNaN(A)}if(!Array.isArray(W)||!Array.isArray(N)||W.length!==N.length)return!1;for(let M=0,A=W.length;M<A;M++)if(!O(W[M],N[M]))return!1;return!0}ee.PDFHistory=class ${constructor({linkService:N,eventBus:O}){this.linkService=N,this.eventBus=O,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",M=>{this._isPagesLoaded=!!M.pagesCount},{once:!0})})}initialize({fingerprint:N,resetHistory:O=!1,updateUrl:M=!1}){if(!N||"string"!=typeof N)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const A=""!==this._fingerprint&&this._fingerprint!==N;this._fingerprint=N,this._updateUrl=!0===M,this._initialized=!0,this._bindEvents();const b=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=c(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(b,!0)||O){const{hash:C,page:P,rotation:F}=this._parseCurrentHash(!0);return!C||A||O?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:C,page:P,rotation:F},!0)}const q=b.destination;this._updateInternalState(q,b.uid,!0),void 0!==q.rotation&&(this._initialRotation=q.rotation),q.dest?(this._initialBookmark=JSON.stringify(q.dest),this._destination.page=null):q.hash?this._initialBookmark=q.hash:q.page&&(this._initialBookmark=`page=${q.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:N=null,explicitDest:O,pageNumber:M}){if(!this._initialized)return;if(N&&"string"!=typeof N)return void console.error(`PDFHistory.push: "${N}" is not a valid namedDest parameter.`);if(!Array.isArray(O))return void console.error(`PDFHistory.push: "${O}" is not a valid explicitDest parameter.`);if(!this._isValidPage(M)&&(null!==M||this._destination))return void console.error(`PDFHistory.push: "${M}" is not a valid pageNumber parameter.`);const A=N||JSON.stringify(O);if(!A)return;let b=!1;if(this._destination&&(ae(this._destination.hash,A)||oe(this._destination.dest,O))){if(this._destination.page)return;b=!0}this._popStateInProgress&&!b||(this._pushOrReplaceState({dest:O,hash:A,page:M,rotation:this.linkService.rotation},b),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(N){if(this._initialized){if(!this._isValidPage(N))return void console.error(`PDFHistory.pushPage: "${N}" is not a valid page number.`);this._destination?.page!==N&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${N}`,page:N,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const N=window.history.state;this._isValidState(N)&&N.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const N=window.history.state;this._isValidState(N)&&N.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(N,O=!1){const M=O||!this._destination,A={fingerprint:this._fingerprint,uid:M?this._uid:this._uid+1,destination:N};let b;if(this._updateInternalState(N,A.uid),this._updateUrl&&N?.hash){const q=document.location.href.split("#")[0];q.startsWith("file://")||(b=`${q}#${N.hash}`)}M?window.history.replaceState(A,"",b):window.history.pushState(A,"",b)}_tryPushCurrentPosition(N=!1){if(!this._position)return;let O=this._position;if(N&&(O=Object.assign(Object.create(null),this._position),O.temporary=!0),!this._destination)return void this._pushOrReplaceState(O);if(this._destination.temporary)return void this._pushOrReplaceState(O,!0);if(this._destination.hash===O.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let M=!1;if(this._destination.page>=O.first&&this._destination.page<=O.page){if(void 0!==this._destination.dest||!this._destination.first)return;M=!0}this._pushOrReplaceState(O,M)}_isValidPage(N){return Number.isInteger(N)&&N>0&&N<=this.linkService.pagesCount}_isValidState(N,O=!1){if(!N)return!1;if(N.fingerprint!==this._fingerprint){if(!O)return!1;{if("string"!=typeof N.fingerprint||N.fingerprint.length!==this._fingerprint.length)return!1;const[M]=performance.getEntriesByType("navigation");if("reload"!==M?.type)return!1}}return!(!Number.isInteger(N.uid)||N.uid<0||null===N.destination||"object"!=typeof N.destination)}_updateInternalState(N,O,M=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),M&&N?.temporary&&delete N.temporary,this._destination=N,this._uid=O,this._maxUid=Math.max(this._maxUid,O),this._numPositionUpdates=0}_parseCurrentHash(N=!1){const O=unescape(c()).substring(1),M=(0,V.parseQueryString)(O),A=M.get("nameddest")||"";let b=0|M.get("page");return(!this._isValidPage(b)||N&&A.length>0)&&(b=null),{hash:O,page:b,rotation:this.linkService.rotation}}_updateViewarea({location:N}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:N.pdfOpenParams.substring(1),page:this.linkService.page,first:N.pageNumber,rotation:N.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:N}){const O=c(),M=this._currentHash!==O;if(this._currentHash=O,!N){this._uid++;const{hash:b,page:q,rotation:C}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:b,page:q,rotation:C},!0)}if(!this._isValidState(N))return;this._popStateInProgress=!0,M&&(this._blockHashChange++,(0,H.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const A=N.destination;this._updateInternalState(A,N.uid,!0),(0,V.isValidRotation)(A.rotation)&&(this.linkService.rotation=A.rotation),A.dest?this.linkService.goToDestination(A.dest):A.hash?this.linkService.setHash(A.hash):A.page&&(this.linkService.page=A.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFPageView=void 0;var V=e(4),H=e(2),te=e(14),re=e(6),f=e(15),c=e(7),$=e(5),ae=e(16),oe=e(17),W=e(18),N=e(19),O=e(20);const M=f.compatibilityParams.maxCanvasPixels||16777216,A=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new $.SimpleLinkService}});ee.PDFPageView=class b{#e=V.AnnotationMode.ENABLE_FORMS;#t=!1;#n=null;#i=null;#o=null;#s=null;#a=H.RenderingStates.INITIAL;#l=H.TextLayerMode.ENABLE;#c={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#r=new WeakMap;constructor(C){const P=C.container,F=C.defaultViewport;this.id=C.id,this.renderingId="page"+this.id,this.#n=C.layerProperties||A,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=C.scale||H.DEFAULT_SCALE,this.viewport=F,this.pdfPageRotate=F.rotation,this._optionalContentConfigPromise=C.optionalContentConfigPromise||null,this.#l=C.textLayerMode??H.TextLayerMode.ENABLE,this.#e=C.annotationMode??V.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=C.imageResourcesPath||"",this.isOffscreenCanvasSupported=C.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=C.maxCanvasPixels??M,this.pageColors=C.pageColors||null,this.eventBus=C.eventBus,this.renderingQueue=C.renderingQueue,this.l10n=C.l10n||c.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=P,C.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const I=document.createElement("div");if(I.className="page",I.setAttribute("data-page-number",this.id),I.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(j=>{I.setAttribute("aria-label",j)}),this.div=I,this.#u(),P?.append(I),this._isStandalone){P?.style.setProperty("--scale-factor",this.scale*V.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:j}=C;j&&j.then(E=>{j===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=E.hasInitialVisibility)})}}get renderingState(){return this.#a}set renderingState(C){if(C!==this.#a)switch(this.#a=C,this.#i&&(clearTimeout(this.#i),this.#i=null),C){case H.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case H.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),this.#i=setTimeout(()=>{this.div.classList.add("loading"),this.#i=null},0);break;case H.RenderingStates.INITIAL:case H.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#u(){const{viewport:C}=this;if(this.pdfPage){if(this.#o===C.rotation)return;this.#o=C.rotation}(0,V.setLayerDimensions)(this.div,C,!0,!1)}setPdfPage(C){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&this._container?.style.setProperty("--hcm-highligh-filter",C.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight")),this.pdfPage=C,this.pdfPageRotate=C.rotate,this.viewport=C.getViewport({scale:this.scale*V.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#u(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return(0,V.shadow)(this,"_textHighlighter",new W.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#n().findController}))}#h(){var C=this;return le(function*(){let P=null;try{yield C.annotationLayer.render(C.viewport,"display")}catch(F){console.error(`#renderAnnotationLayer: "${F}".`),P=F}finally{C.eventBus.dispatch("annotationlayerrendered",{source:C,pageNumber:C.id,error:P})}})()}#f(){var C=this;return le(function*(){let P=null;try{yield C.annotationEditorLayer.render(C.viewport,"display")}catch(F){console.error(`#renderAnnotationEditorLayer: "${F}".`),P=F}finally{C.eventBus.dispatch("annotationeditorlayerrendered",{source:C,pageNumber:C.id,error:P})}})()}#p(){var C=this;return le(function*(){let P=null;try{const F=yield C.xfaLayer.render(C.viewport,"display");F?.textDivs&&C._textHighlighter&&C.#y(F.textDivs)}catch(F){console.error(`#renderXfaLayer: "${F}".`),P=F}finally{C.eventBus.dispatch("xfalayerrendered",{source:C,pageNumber:C.id,error:P})}})()}#g(){var C=this;return le(function*(){const{pdfPage:P,textLayer:F,viewport:I}=C;if(!F)return;let j=null;try{if(!F.renderingDone){const E=P.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});F.setTextContentSource(E)}yield F.render(I)}catch(E){if(E instanceof V.AbortException)return;console.error(`#renderTextLayer: "${E}".`),j=E}C.eventBus.dispatch("textlayerrendered",{source:C,pageNumber:C.id,numTextDivs:F.numTextDivs,error:j}),C.#m()})()}#m(){var C=this;return le(function*(){if(!C.textLayer)return;C.structTreeLayer||=new ae.StructTreeLayerBuilder;const P=yield C.structTreeLayer.renderingDone?null:C.pdfPage.getStructTree(),F=C.structTreeLayer?.render(P);F&&C.canvas?.append(F),C.structTreeLayer?.show()})()}#y(C){var P=this;return le(function*(){const F=yield P.pdfPage.getTextContent(),I=[];for(const j of F.items)I.push(j.str);P._textHighlighter.setTextMapping(C,I),P._textHighlighter.enable()})()}_resetZoomLayer(C=!1){if(!this.zoomLayer)return;const P=this.zoomLayer.firstChild;this.#r.delete(P),P.width=0,P.height=0,C&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:C=!1,keepAnnotationLayer:P=!1,keepAnnotationEditorLayer:F=!1,keepXfaLayer:I=!1,keepTextLayer:j=!1}={}){this.cancelRendering({keepAnnotationLayer:P,keepAnnotationEditorLayer:F,keepXfaLayer:I,keepTextLayer:j}),this.renderingState=H.RenderingStates.INITIAL;const E=this.div,x=E.childNodes,p=C&&this.zoomLayer||null,m=P&&this.annotationLayer?.div||null,_=F&&this.annotationEditorLayer?.div||null,R=I&&this.xfaLayer?.div||null,G=j&&this.textLayer?.div||null;for(let K=x.length-1;K>=0;K--){const U=x[K];switch(U){case p:case m:case _:case R:case G:continue}U.remove()}E.removeAttribute("data-loaded"),m&&this.annotationLayer.hide(),_&&this.annotationEditorLayer.hide(),R&&this.xfaLayer.hide(),G&&this.textLayer.hide(),this.structTreeLayer?.hide(),p||(this.canvas&&(this.#r.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:C=0,rotation:P=null,optionalContentConfigPromise:F=null,drawingDelay:I=-1}){if(this.scale=C||this.scale,"number"==typeof P&&(this.rotation=P),F instanceof Promise&&(this._optionalContentConfigPromise=F,F.then(E=>{F===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=E.hasInitialVisibility)})),this.#c.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*V.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#u(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let E=!1;if(this.#t)if(0===this.maxCanvasPixels)E=!0;else if(this.maxCanvasPixels>0){const{width:p,height:m}=this.viewport,{sx:_,sy:R}=this.outputScale;E=(Math.floor(p)*_|0)*(Math.floor(m)*R|0)>this.maxCanvasPixels}const x=!E&&I>=0&&I<1e3;if(x||E){if(x&&this.renderingState!==H.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:I}),this.renderingState=H.RenderingStates.FINISHED,this.#c.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!x,hideTextLayer:x}),x)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#s})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:C=!1,keepAnnotationEditorLayer:P=!1,keepXfaLayer:F=!1,keepTextLayer:I=!1,cancelExtraDelay:j=0}={}){this.renderTask&&(this.renderTask.cancel(j),this.renderTask=null),this.resume=null,this.textLayer&&(!I||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!C||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!P||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!F||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:C,redrawAnnotationLayer:P=!1,redrawAnnotationEditorLayer:F=!1,redrawXfaLayer:I=!1,redrawTextLayer:j=!1,hideTextLayer:E=!1}){if(!C.hasAttribute("zooming")){C.setAttribute("zooming",!0);const{style:p}=C;p.width=p.height=""}const x=this.#r.get(C);if(this.viewport!==x){const p=this.viewport.rotation-x.rotation,m=Math.abs(p);let _=1,R=1;if(90===m||270===m){const{width:G,height:K}=this.viewport;_=K/G,R=G/K}C.style.transform=`rotate(${p}deg) scale(${_}, ${R})`}P&&this.annotationLayer&&this.#h(),F&&this.annotationEditorLayer&&this.#f(),I&&this.xfaLayer&&this.#p(),this.textLayer&&(E?(this.textLayer.hide(),this.structTreeLayer?.hide()):j&&this.#g())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(C,P){return this.viewport.convertToPdfPoint(C,P)}#d(C,P=null){var F=this;return le(function*(){if(C===F.renderTask&&(F.renderTask=null),P instanceof V.RenderingCancelledException)F.#s=null;else if(F.#s=P,F.renderingState=H.RenderingStates.FINISHED,F._resetZoomLayer(!0),F.#c.regularAnnotations=!C.separateAnnots,F.eventBus.dispatch("pagerendered",{source:F,pageNumber:F.id,cssTransform:!1,timestamp:performance.now(),error:F.#s}),P)throw P})()}draw(){var C=this;return le(function*(){C.renderingState!==H.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),C.reset());const{div:P,l10n:F,pageColors:I,pdfPage:j,viewport:E}=C;if(!j)throw C.renderingState=H.RenderingStates.FINISHED,new Error("pdfPage is not loaded");C.renderingState=H.RenderingStates.RUNNING;const x=document.createElement("div");if(x.classList.add("canvasWrapper"),P.append(x),!C.textLayer&&C.#l!==H.TextLayerMode.DISABLE&&!j.isPureXfa&&(C._accessibilityManager||=new oe.TextAccessibilityManager,C.textLayer=new N.TextLayerBuilder({highlighter:C._textHighlighter,accessibilityManager:C._accessibilityManager,isOffscreenCanvasSupported:C.isOffscreenCanvasSupported,enablePermissions:C.#l===H.TextLayerMode.ENABLE_PERMISSIONS}),P.append(C.textLayer.div)),!C.annotationLayer&&C.#e!==V.AnnotationMode.DISABLE){const{annotationStorage:ye,downloadManager:Te,enableScripting:_e,fieldObjectsPromise:we,hasJSActionsPromise:De,linkService:xe}=C.#n();C._annotationCanvasMap||=new Map,C.annotationLayer=new re.AnnotationLayerBuilder({pageDiv:P,pdfPage:j,annotationStorage:ye,imageResourcesPath:C.imageResourcesPath,renderForms:C.#e===V.AnnotationMode.ENABLE_FORMS,linkService:xe,downloadManager:Te,l10n:F,enableScripting:_e,hasJSActionsPromise:De,fieldObjectsPromise:we,annotationCanvasMap:C._annotationCanvasMap,accessibilityManager:C._accessibilityManager})}const{width:m,height:_}=E,R=document.createElement("canvas");R.setAttribute("role","presentation"),R.hidden=!0;const G=!(!I?.background||!I?.foreground);let K=ye=>{(!G||ye)&&(R.hidden=!1,K=null)};x.append(R),C.canvas=R;const U=R.getContext("2d",{alpha:!1}),z=C.outputScale=new H.OutputScale;if(0===C.maxCanvasPixels){const ye=1/C.scale;z.sx*=ye,z.sy*=ye,C.#t=!0}else if(C.maxCanvasPixels>0){const Te=Math.sqrt(C.maxCanvasPixels/(m*_));z.sx>Te||z.sy>Te?(z.sx=Te,z.sy=Te,C.#t=!0):C.#t=!1}const L=(0,H.approximateFraction)(z.sx),S=(0,H.approximateFraction)(z.sy);R.width=(0,H.roundToDivide)(m*z.sx,L[0]),R.height=(0,H.roundToDivide)(_*z.sy,S[0]);const{style:B}=R;B.width=(0,H.roundToDivide)(m,L[1])+"px",B.height=(0,H.roundToDivide)(_,S[1])+"px",C.#r.set(R,E);const ie={canvasContext:U,transform:z.scaled?[z.sx,0,0,z.sy,0,0]:null,viewport:E,annotationMode:C.#e,optionalContentConfigPromise:C._optionalContentConfigPromise,annotationCanvasMap:C._annotationCanvasMap,pageColors:I},ce=C.renderTask=C.pdfPage.render(ie);ce.onContinue=ye=>{if(K?.(!1),C.renderingQueue&&!C.renderingQueue.isHighestPriority(C))return C.renderingState=H.RenderingStates.PAUSED,void(C.resume=()=>{C.renderingState=H.RenderingStates.RUNNING,ye()});ye()};const pe=ce.promise.then(le(function*(){if(K?.(!0),yield C.#d(ce),C.#g(),C.annotationLayer&&(yield C.#h()),!C.annotationEditorLayer){const{annotationEditorUIManager:ye}=C.#n();if(!ye)return;C.annotationEditorLayer=new te.AnnotationEditorLayerBuilder({uiManager:ye,pageDiv:P,pdfPage:j,l10n:F,accessibilityManager:C._accessibilityManager,annotationLayer:C.annotationLayer?.annotationLayer})}C.#f()}),ye=>(ye instanceof V.RenderingCancelledException||K?.(!0),C.#d(ce,ye)));if(j.isPureXfa){if(C.xfaLayer)C.xfaLayer.div&&P.append(C.xfaLayer.div);else{const{annotationStorage:ye,linkService:Te}=C.#n();C.xfaLayer=new O.XfaLayerBuilder({pageDiv:P,pdfPage:j,annotationStorage:ye,linkService:Te})}C.#p()}return P.setAttribute("data-loaded",!0),C.eventBus.dispatch("pagerender",{source:C,pageNumber:C.id}),pe})()}setPageLabel(C){this.pageLabel="string"==typeof C?C:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:C,initialOptionalContent:P,regularAnnotations:F}=this.#c;return C&&P&&F?this.canvas:null}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.AnnotationEditorLayerBuilder=void 0;var V=e(4),H=e(7);ee.AnnotationEditorLayerBuilder=class te{#e=null;#t;constructor(f){this.pageDiv=f.pageDiv,this.pdfPage=f.pdfPage,this.accessibilityManager=f.accessibilityManager,this.l10n=f.l10n||H.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#t=f.uiManager,this.#e=f.annotationLayer||null}render(f,c="display"){var $=this;return le(function*(){if("display"!==c||$._cancelled)return;const ae=f.clone({dontFlip:!0});if($.div)return $.annotationEditorLayer.update({viewport:ae}),void $.show();const oe=$.div=document.createElement("div");oe.className="annotationEditorLayer",oe.tabIndex=0,oe.hidden=!0,oe.dir=$.#t.direction,$.pageDiv.append(oe),$.annotationEditorLayer=new V.AnnotationEditorLayer({uiManager:$.#t,div:oe,accessibilityManager:$.accessibilityManager,pageIndex:$.pdfPage.pageNumber-1,l10n:$.l10n,viewport:ae,annotationLayer:$.#e}),$.annotationEditorLayer.render({viewport:ae,div:oe,annotations:null,intent:c}),$.show()})()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}},(fe,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.compatibilityParams=ee.OptionKind=ee.AppOptions=void 0;const e=Object.create(null);ee.compatibilityParams=e;{const f=navigator.userAgent||"",c=navigator.platform||"",$=navigator.maxTouchPoints||1,ae=/Android/.test(f);(/\b(iPad|iPhone|iPod)(?=;)/.test(f)||"MacIntel"===c&&$>1||ae)&&(e.maxCanvasPixels=5242880)}const V={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};ee.OptionKind=V;const H={annotationEditorMode:{value:0,kind:V.VIEWER+V.PREFERENCE},annotationMode:{value:2,kind:V.VIEWER+V.PREFERENCE},cursorToolOnLoad:{value:0,kind:V.VIEWER+V.PREFERENCE},defaultZoomDelay:{value:400,kind:V.VIEWER+V.PREFERENCE},defaultZoomValue:{value:"",kind:V.VIEWER+V.PREFERENCE},disableHistory:{value:!1,kind:V.VIEWER},disablePageLabels:{value:!1,kind:V.VIEWER+V.PREFERENCE},enablePermissions:{value:!1,kind:V.VIEWER+V.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:V.VIEWER+V.PREFERENCE},enableScripting:{value:!0,kind:V.VIEWER+V.PREFERENCE},enableStampEditor:{value:!0,kind:V.VIEWER+V.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:V.VIEWER},externalLinkTarget:{value:0,kind:V.VIEWER+V.PREFERENCE},historyUpdateUrl:{value:!1,kind:V.VIEWER+V.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:V.VIEWER+V.PREFERENCE},imageResourcesPath:{value:"./images/",kind:V.VIEWER},maxCanvasPixels:{value:16777216,kind:V.VIEWER},forcePageColors:{value:!1,kind:V.VIEWER+V.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:V.VIEWER+V.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:V.VIEWER+V.PREFERENCE},pdfBugEnabled:{value:!1,kind:V.VIEWER+V.PREFERENCE},printResolution:{value:150,kind:V.VIEWER},sidebarViewOnLoad:{value:-1,kind:V.VIEWER+V.PREFERENCE},scrollModeOnLoad:{value:-1,kind:V.VIEWER+V.PREFERENCE},spreadModeOnLoad:{value:-1,kind:V.VIEWER+V.PREFERENCE},textLayerMode:{value:1,kind:V.VIEWER+V.PREFERENCE},viewerCssTheme:{value:0,kind:V.VIEWER+V.PREFERENCE},viewOnLoad:{value:0,kind:V.VIEWER+V.PREFERENCE},cMapPacked:{value:!0,kind:V.API},cMapUrl:{value:"../web/cmaps/",kind:V.API},disableAutoFetch:{value:!1,kind:V.API+V.PREFERENCE},disableFontFace:{value:!1,kind:V.API+V.PREFERENCE},disableRange:{value:!1,kind:V.API+V.PREFERENCE},disableStream:{value:!1,kind:V.API+V.PREFERENCE},docBaseUrl:{value:"",kind:V.API},enableXfa:{value:!0,kind:V.API+V.PREFERENCE},fontExtraProperties:{value:!1,kind:V.API},isEvalSupported:{value:!0,kind:V.API},isOffscreenCanvasSupported:{value:!0,kind:V.API},maxImageSize:{value:-1,kind:V.API},pdfBug:{value:!1,kind:V.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:V.API},verbosity:{value:1,kind:V.API},workerPort:{value:null,kind:V.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:V.WORKER}};H.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:V.VIEWER},H.disablePreferences={value:!1,kind:V.VIEWER},H.locale={value:navigator.language||"en-US",kind:V.VIEWER},H.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:V.VIEWER};const te=Object.create(null);class re{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(c){const $=te[c];if(void 0!==$)return $;const ae=H[c];return void 0!==ae?e[c]??ae.value:void 0}static getAll(c=null){const $=Object.create(null);for(const ae in H){const oe=H[ae];if(c){if(!(c&oe.kind))continue;if(c===V.PREFERENCE){const N=oe.value,O=typeof N;if("boolean"===O||"string"===O||"number"===O&&Number.isInteger(N)){$[ae]=N;continue}throw new Error(`Invalid type for preference: ${ae}`)}}const W=te[ae];$[ae]=void 0!==W?W:e[ae]??oe.value}return $}static set(c,$){te[c]=$}static setAll(c){for(const $ in c)te[$]=c[$]}static remove(c){delete te[c]}}ee.AppOptions=re,re._hasUserOptions=function(){return Object.keys(te).length>0}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.StructTreeLayerBuilder=void 0;var V=e(2);const H={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},te=/^H(\d+)$/;ee.StructTreeLayerBuilder=class re{#e=void 0;get renderingDone(){return void 0!==this.#e}render(c){if(void 0!==this.#e)return this.#e;const $=this.#n(c);return $?.classList.add("structTree"),this.#e=$}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(c,$){const{alt:ae,id:oe,lang:W}=c;void 0!==ae&&$.setAttribute("aria-label",(0,V.removeNullCharacters)(ae)),void 0!==oe&&$.setAttribute("aria-owns",oe),void 0!==W&&$.setAttribute("lang",(0,V.removeNullCharacters)(W,!0))}#n(c){if(!c)return null;const $=document.createElement("span");if("role"in c){const{role:ae}=c,oe=ae.match(te);oe?($.setAttribute("role","heading"),$.setAttribute("aria-level",oe[1])):H[ae]&&$.setAttribute("role",H[ae])}if(this.#t(c,$),c.children)if(1===c.children.length&&"id"in c.children[0])this.#t(c.children[0],$);else for(const ae of c.children)$.append(this.#n(ae));return $}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.TextAccessibilityManager=void 0;var V=e(2);class H{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(re){this.#t=re}static#o(re,f){const c=re.getBoundingClientRect(),$=f.getBoundingClientRect();if(0===c.width&&0===c.height)return 1;if(0===$.width&&0===$.height)return-1;const W=c.y+c.height/2,M=$.y+$.height/2;return W<=$.y&&M>=c.y+c.height?-1:M<=c.y&&W>=$.y+$.height?1:c.x+c.width/2-($.x+$.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(H.#o),this.#n.size>0){const re=this.#t;for(const[f,c]of this.#n)document.getElementById(f)?this.#s(f,re[c]):this.#n.delete(f)}for(const[re,f]of this.#i)this.addPointerInTextLayer(re,f);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(re){if(!this.#e)return void this.#i.delete(re);const f=this.#t;if(!f||0===f.length)return;const{id:c}=re,$=this.#n.get(c);if(void 0===$)return;const ae=f[$];this.#n.delete(c);let oe=ae.getAttribute("aria-owns");oe?.includes(c)&&(oe=oe.split(" ").filter(W=>W!==c).join(" "),oe?ae.setAttribute("aria-owns",oe):(ae.removeAttribute("aria-owns"),ae.setAttribute("role","presentation")))}#s(re,f){const c=f.getAttribute("aria-owns");c?.includes(re)||f.setAttribute("aria-owns",c?`${c} ${re}`:re),f.removeAttribute("role")}addPointerInTextLayer(re,f){const{id:c}=re;if(!c)return null;if(!this.#e)return this.#i.set(re,f),null;f&&this.removePointerInTextLayer(re);const $=this.#t;if(!$||0===$.length)return null;const ae=(0,V.binarySearchFirstItem)($,O=>H.#o(re,O)<0),oe=Math.max(0,ae-1),W=$[oe];this.#s(c,W),this.#n.set(c,oe);const N=W.parentNode;return N?.classList.contains("markedContent")?N.id:null}moveElementInDOM(re,f,c,$){const ae=this.addPointerInTextLayer(c,$);if(!re.hasChildNodes())return re.append(f),ae;const oe=Array.from(re.childNodes).filter(O=>O!==f);if(0===oe.length)return ae;const W=c||f,N=(0,V.binarySearchFirstItem)(oe,O=>H.#o(W,O)<0);return 0===N?oe[0].before(f):oe[N-1].after(f),ae}}ee.TextAccessibilityManager=H},(fe,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.TextHighlighter=void 0,ee.TextHighlighter=class e{constructor({findController:H,eventBus:te,pageIndex:re}){this.findController=H,this.matches=[],this.eventBus=te,this.pageIdx=re,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(H,te){this.textDivs=H,this.textContentItemsStr=te}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=H=>{(H.pageIndex===this.pageIdx||-1===H.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(H,te){if(!H)return[];const{textContentItemsStr:re}=this;let f=0,c=0;const $=re.length-1,ae=[];for(let oe=0,W=H.length;oe<W;oe++){let N=H[oe];for(;f!==$&&N>=c+re[f].length;)c+=re[f].length,f++;f===re.length&&console.error("Could not find a matching mapping");const O={begin:{divIdx:f,offset:N-c}};for(N+=te[oe];f!==$&&N>c+re[f].length;)c+=re[f].length,f++;O.end={divIdx:f,offset:N-c},ae.push(O)}return ae}_renderMatches(H){if(0===H.length)return;const{findController:te,pageIdx:re}=this,{textContentItemsStr:f,textDivs:c}=this,$=re===te.selected.pageIdx,ae=te.selected.matchIdx;let W=null;function O(P,F){const I=P.divIdx;return c[I].textContent="",M(I,0,P.offset,F)}function M(P,F,I,j){let E=c[P];if(E.nodeType===Node.TEXT_NODE){const m=document.createElement("span");E.before(m),m.append(E),c[P]=m,E=m}const x=f[P].substring(F,I),p=document.createTextNode(x);if(j){const m=document.createElement("span");return m.className=`${j} appended`,m.append(p),E.append(m),j.includes("selected")?m.offsetLeft:0}return E.append(p),0}let A=ae,b=A+1;if(te.state.highlightAll)A=0,b=H.length;else if(!$)return;let q=-1,C=-1;for(let P=A;P<b;P++){const F=H[P],I=F.begin;if(I.divIdx===q&&I.offset===C)continue;q=I.divIdx,C=I.offset;const j=F.end,E=$&&P===ae,x=E?" selected":"";let p=0;if(W&&I.divIdx===W.divIdx?M(W.divIdx,W.offset,I.offset):(null!==W&&M(W.divIdx,W.offset,undefined),O(I)),I.divIdx===j.divIdx)p=M(I.divIdx,I.offset,j.offset,"highlight"+x);else{p=M(I.divIdx,I.offset,undefined,"highlight begin"+x);for(let m=I.divIdx+1,_=j.divIdx;m<_;m++)c[m].className="highlight middle"+x;O(j,"highlight end"+x)}W=j,E&&te.scrollMatchIntoView({element:c[I.divIdx],selectedLeft:p,pageIndex:re,matchIndex:ae})}W&&M(W.divIdx,W.offset,undefined)}_updateMatches(H=!1){if(!this.enabled&&!H)return;const{findController:te,matches:re,pageIdx:f}=this,{textContentItemsStr:c,textDivs:$}=this;let ae=-1;for(const N of re){for(let M=Math.max(ae,N.begin.divIdx),A=N.end.divIdx;M<=A;M++){const b=$[M];b.textContent=c[M],b.className=""}ae=N.end.divIdx+1}te?.highlightMatches&&!H&&(this.matches=this._convertMatches(te.pageMatches[f]||null,te.pageMatchesLength[f]||null),this._renderMatches(this.matches))}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.TextLayerBuilder=void 0;var V=e(4),H=e(2);ee.TextLayerBuilder=class te{#e=!1;#t=0;#n=0;#i=null;constructor({highlighter:f=null,accessibilityManager:c=null,isOffscreenCanvasSupported:$=!0,enablePermissions:ae=!1}){this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=f,this.accessibilityManager=c,this.isOffscreenCanvasSupported=$,this.#e=!0===ae,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}#o(){this.renderingDone=!0;const f=document.createElement("div");f.className="endOfContent",this.div.append(f),this.#s()}get numTextDivs(){return this.textDivs.length}render(f){var c=this;return le(function*(){if(!c.#i)throw new Error('No "textContentSource" parameter specified.');const $=f.scale*(globalThis.devicePixelRatio||1),{rotation:ae}=f;if(c.renderingDone){const oe=ae!==c.#t,W=$!==c.#n;return(oe||W)&&(c.hide(),(0,V.updateTextLayer)({container:c.div,viewport:f,textDivs:c.textDivs,textDivProperties:c.textDivProperties,isOffscreenCanvasSupported:c.isOffscreenCanvasSupported,mustRescale:W,mustRotate:oe}),c.#n=$,c.#t=ae),void c.show()}c.cancel(),c.highlighter?.setTextMapping(c.textDivs,c.textContentItemsStr),c.accessibilityManager?.setTextMapping(c.textDivs),c.textLayerRenderTask=(0,V.renderTextLayer)({textContentSource:c.#i,container:c.div,viewport:f,textDivs:c.textDivs,textDivProperties:c.textDivProperties,textContentItemsStr:c.textContentItemsStr,isOffscreenCanvasSupported:c.isOffscreenCanvasSupported}),yield c.textLayerRenderTask.promise,c.#o(),c.#n=$,c.#t=ae,c.show(),c.accessibilityManager?.enable()})()}hide(){this.div.hidden||(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(f){this.cancel(),this.#i=f}#s(){const{div:f}=this;f.addEventListener("mousedown",c=>{const $=f.querySelector(".endOfContent");if(!$)return;let ae=c.target!==f;if(ae&&="none"!==getComputedStyle($).getPropertyValue("-moz-user-select"),ae){const oe=f.getBoundingClientRect(),W=Math.max(0,(c.pageY-oe.top)/oe.height);$.style.top=(100*W).toFixed(2)+"%"}$.classList.add("active")}),f.addEventListener("mouseup",()=>{const c=f.querySelector(".endOfContent");c&&(c.style.top="",c.classList.remove("active"))}),f.addEventListener("copy",c=>{if(!this.#e){const $=document.getSelection();c.clipboardData.setData("text/plain",(0,H.removeNullCharacters)((0,V.normalizeUnicode)($.toString())))}c.preventDefault(),c.stopPropagation()})}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.XfaLayerBuilder=void 0;var V=e(4);ee.XfaLayerBuilder=class H{constructor({pageDiv:re,pdfPage:f,annotationStorage:c=null,linkService:$,xfaHtml:ae=null}){this.pageDiv=re,this.pdfPage=f,this.annotationStorage=c,this.linkService=$,this.xfaHtml=ae,this.div=null,this._cancelled=!1}render(re,f="display"){var c=this;return le(function*(){if("print"===f){const oe={viewport:re.clone({dontFlip:!0}),div:c.div,xfaHtml:c.xfaHtml,annotationStorage:c.annotationStorage,linkService:c.linkService,intent:f},W=document.createElement("div");return c.pageDiv.append(W),oe.div=W,V.XfaLayer.render(oe)}const $=yield c.pdfPage.getXfa();if(c._cancelled||!$)return{textDivs:[]};const ae={viewport:re.clone({dontFlip:!0}),div:c.div,xfaHtml:$,annotationStorage:c.annotationStorage,linkService:c.linkService,intent:f};return c.div?V.XfaLayer.update(ae):(c.div=document.createElement("div"),c.pageDiv.append(c.div),ae.div=c.div,V.XfaLayer.render(ae))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFScriptingManager=void 0;var V=e(22),H=e(23);ee.PDFScriptingManager=class te extends H.PDFScriptingManager{constructor(f){f.externalServices||window.addEventListener("updatefromsandbox",c=>{f.eventBus.dispatch("updatefromsandbox",{source:window,detail:c.detail})}),f.externalServices||={createScripting:({sandboxBundleSrc:c})=>new V.GenericScripting(c)},f.docProperties||=c=>(0,V.docProperties)(c),super(f)}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.GenericScripting=void 0,ee.docProperties=function H(f){return te.apply(this,arguments)};var V=e(4);function te(){return(te=le(function*(f){const $="".split("#")[0];let{info:ae,metadata:oe,contentDispositionFilename:W,contentLength:N}=yield f.getMetadata();if(!N){const{length:O}=yield f.getDownloadInfo();N=O}return{...ae,baseURL:$,filesize:N,filename:W||(0,V.getPdfFilenameFromUrl)(""),metadata:oe?.getRaw(),authors:oe?.get("dc:creator"),numPages:f.numPages,URL:""}})).apply(this,arguments)}ee.GenericScripting=class re{constructor(c){this._ready=(0,V.loadScript)(c,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(c){var $=this;return le(function*(){(yield $._ready).create(c)})()}dispatchEventInSandbox(c){var $=this;return le(function*(){const ae=yield $._ready;setTimeout(()=>ae.dispatchEvent(c),0)})()}destroySandbox(){var c=this;return le(function*(){(yield c._ready).nukeSandbox()})()}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFScriptingManager=void 0;var V=e(2),H=e(4);ee.PDFScriptingManager=class te{#e=null;#t=null;#n=null;#i=null;#o=null;#s=null;#a=null;#l=!1;#c=null;#r=null;#u=null;constructor({eventBus:f,sandboxBundleSrc:c=null,externalServices:$=null,docProperties:ae=null}){this.#i=f,this.#c=c,this.#o=$,this.#n=ae}setViewer(f){this.#a=f}setDocument(f){var c=this;return le(function*(){if(c.#s&&(yield c.#m()),c.#s=f,!f)return;const[$,ae,oe]=yield Promise.all([f.getFieldObjects(),f.getCalculationOrderIds(),f.getJSActions()]);if($||oe){if(f===c.#s){try{c.#r=c.#g()}catch(W){return console.error(`setDocument: "${W.message}".`),void(yield c.#m())}c._internalEvents.set("updatefromsandbox",W=>{W?.source===window&&c.#h(W.detail)}),c._internalEvents.set("dispatcheventinsandbox",W=>{c.#r?.dispatchEventInSandbox(W.detail)}),c._internalEvents.set("pagechanging",({pageNumber:W,previous:N})=>{W!==N&&(c.#p(N),c.#f(W))}),c._internalEvents.set("pagerendered",({pageNumber:W})=>{c._pageOpenPending.has(W)&&W===c.#a.currentPageNumber&&c.#f(W)}),c._internalEvents.set("pagesdestroy",le(function*(){yield c.#p(c.#a.currentPageNumber),yield c.#r?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),c.#e?.resolve()}));for(const[W,N]of c._internalEvents)c.#i._on(W,N);try{const W=yield c.#n(f);if(f!==c.#s)return;yield c.#r.createSandbox({objects:$,calculationOrder:ae,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...W,actions:oe}}),c.#i.dispatch("sandboxcreated",{source:c})}catch(W){return console.error(`setDocument: "${W.message}".`),void(yield c.#m())}yield c.#r?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield c.#f(c.#a.currentPageNumber,!0),Promise.resolve().then(()=>{f===c.#s&&(c.#l=!0)})}}else yield c.#m()})()}dispatchWillSave(){var f=this;return le(function*(){return f.#r?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var f=this;return le(function*(){return f.#r?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var f=this;return le(function*(){if(f.#r){yield f.#u?.promise,f.#u=new H.PromiseCapability;try{yield f.#r.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(c){throw f.#u.resolve(),f.#u=null,c}yield f.#u.promise}})()}dispatchDidPrint(){var f=this;return le(function*(){return f.#r?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#l}get _internalEvents(){return(0,H.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,H.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,H.shadow)(this,"_visitedPages",new Map)}#h(f){var c=this;return le(function*(){const $=c.#a,ae=$.isInPresentationMode||$.isChangingPresentationMode,{id:oe,siblings:W,command:N,value:O}=f;if(!oe){switch(N){case"clear":console.clear();break;case"error":console.error(O);break;case"layout":if(!ae){const A=(0,V.apiPageLayoutToViewerModes)(O);$.spreadMode=A.spreadMode}break;case"page-num":$.currentPageNumber=O+1;break;case"print":yield $.pagesPromise,c.#i.dispatch("print",{source:c});break;case"println":console.log(O);break;case"zoom":ae||($.currentScaleValue=O);break;case"SaveAs":c.#i.dispatch("download",{source:c});break;case"FirstPage":$.currentPageNumber=1;break;case"LastPage":$.currentPageNumber=$.pagesCount;break;case"NextPage":$.nextPage();break;case"PrevPage":$.previousPage();break;case"ZoomViewIn":ae||$.increaseScale();break;case"ZoomViewOut":ae||$.decreaseScale();break;case"WillPrintFinished":c.#u?.resolve(),c.#u=null}return}if(ae&&f.focus)return;delete f.id,delete f.siblings;const M=W?[oe,...W]:[oe];for(const A of M){const b=document.querySelector(`[data-element-id="${A}"]`);b?b.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:f})):c.#s?.annotationStorage.setValue(A,f)}})()}#f(f,c=!1){var $=this;return le(function*(){const ae=$.#s,oe=$._visitedPages;if(c&&($.#e=new H.PromiseCapability),!$.#e)return;const W=$.#a.getPageView(f-1);if(W?.renderingState!==V.RenderingStates.FINISHED)return void $._pageOpenPending.add(f);$._pageOpenPending.delete(f);const N=le(function*(){const O=yield oe.has(f)?null:W.pdfPage?.getJSActions();ae===$.#s&&(yield $.#r?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:f,actions:O}))})();oe.set(f,N)})()}#p(f){var c=this;return le(function*(){const $=c.#s,ae=c._visitedPages;if(!c.#e||c._pageOpenPending.has(f))return;const oe=ae.get(f);oe&&(ae.set(f,null),yield oe,$===c.#s&&(yield c.#r?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:f})))})()}#g(){if(this.#t=new H.PromiseCapability,this.#r)throw new Error("#initScripting: Scripting already exists.");return this.#o.createScripting({sandboxBundleSrc:this.#c})}#m(){var f=this;return le(function*(){if(!f.#r)return f.#s=null,void f.#t?.resolve();f.#e&&(yield Promise.race([f.#e.promise,new Promise(c=>{setTimeout(c,1e3)})]).catch(()=>{}),f.#e=null),f.#s=null;try{yield f.#r.destroySandbox()}catch{}f.#u?.reject(new Error("Scripting destroyed.")),f.#u=null;for(const[c,$]of f._internalEvents)f.#i._off(c,$);f._internalEvents.clear(),f._pageOpenPending.clear(),f._visitedPages.clear(),f.#r=null,f.#l=!1,f.#t?.resolve()})()}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFSinglePageViewer=void 0;var V=e(2),H=e(25);ee.PDFSinglePageViewer=class te extends H.PDFViewer{_resetView(){super._resetView(),this._scrollMode=V.ScrollMode.PAGE,this._spreadMode=V.SpreadMode.NONE}set scrollMode(f){}_updateScrollMode(){}set spreadMode(f){}_updateSpreadMode(){}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PagesCountLimit=ee.PDFViewer=ee.PDFPageViewBuffer=void 0;var V=e(4),H=e(2),te=e(7),re=e(13),f=e(26),c=e(5);const ae={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function oe(O){return Object.values(V.AnnotationEditorType).includes(O)&&O!==V.AnnotationEditorType.DISABLE}ee.PagesCountLimit=ae;class W{#e=new Set;#t=0;constructor(M){this.#t=M}push(M){const A=this.#e;A.has(M)&&A.delete(M),A.add(M),A.size>this.#t&&this.#n()}resize(M,A=null){this.#t=M;const b=this.#e;if(A){const q=b.size;let C=1;for(const P of b)if(A.has(P.id)&&(b.delete(P),b.add(P)),++C>q)break}for(;b.size>this.#t;)this.#n()}has(M){return this.#e.has(M)}[Symbol.iterator](){return this.#e.keys()}#n(){const M=this.#e.keys().next().value;M?.destroy(),this.#e.delete(M)}}ee.PDFPageViewBuffer=W,ee.PDFViewer=class N{#e=null;#t=null;#n=V.AnnotationEditorType.NONE;#i=null;#o=V.AnnotationMode.ENABLE_FORMS;#s=null;#a=null;#l=!1;#c=!1;#r=null;#u=!1;#h=0;#f=new ResizeObserver(this.#E.bind(this));#p=null;#g=null;#m=null;#y=H.TextLayerMode.ENABLE;constructor(M){const A="3.11.174";if(V.version!==A)throw new Error(`The API version "${V.version}" does not match the Viewer version "${A}".`);if(this.container=M.container,this.viewer=M.viewer||M.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#f.observe(this.container),this.eventBus=M.eventBus,this.linkService=M.linkService||new c.SimpleLinkService,this.downloadManager=M.downloadManager||null,this.findController=M.findController||null,this.#t=M.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=b=>this._getVisiblePages().ids.has(b)),this._scriptingManager=M.scriptingManager||null,this.#y=M.textLayerMode??H.TextLayerMode.ENABLE,this.#o=M.annotationMode??V.AnnotationMode.ENABLE_FORMS,this.#n=M.annotationEditorMode??V.AnnotationEditorType.NONE,this.imageResourcesPath=M.imageResourcesPath||"",this.enablePrintAutoRotate=M.enablePrintAutoRotate||!1,this.removePageBorders=M.removePageBorders||!1,M.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),M.maxCanvasPixels=0),this.isOffscreenCanvasSupported=M.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=M.maxCanvasPixels,this.l10n=M.l10n||te.NullL10n,this.#l=M.enablePermissions||!1,this.pageColors=M.pageColors||null,this.defaultRenderingQueue=!M.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new f.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=M.renderingQueue,this.scroll=(0,H.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=H.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#C(),this.eventBus._on("thumbnailrendered",({pageNumber:b,pdfPage:q})=>{this.#e.has(this._pages[b-1])||q?.cleanup()})}get pagesCount(){return this._pages.length}getPageView(M){return this._pages[M]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(M=>M?.pdfPage)}get renderForms(){return this.#o===V.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(M){if(!Number.isInteger(M))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(M,!0)||console.error(`currentPageNumber: "${M}" is not a valid page.`))}_setCurrentPageNumber(M,A=!1){if(this._currentPageNumber===M)return A&&this.#D(),!0;if(!(0<M&&M<=this.pagesCount))return!1;const b=this._currentPageNumber;return this._currentPageNumber=M,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:M,pageLabel:this._pageLabels?.[M-1]??null,previous:b}),A&&this.#D(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(M){if(!this.pdfDocument)return;let A=0|M;if(this._pageLabels){const b=this._pageLabels.indexOf(M);b>=0&&(A=b+1)}this._setCurrentPageNumber(A,!0)||console.error(`currentPageLabel: "${M}" is not a valid page.`)}get currentScale(){return this._currentScale!==H.UNKNOWN_SCALE?this._currentScale:H.DEFAULT_SCALE}set currentScale(M){if(isNaN(M))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#x(M,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(M){this.pdfDocument&&this.#x(M,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(M){if(!(0,H.isValidRotation)(M))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((M%=360)<0&&(M+=360),this._pagesRotation===M))return;this._pagesRotation=M;const A=this._currentPageNumber;this.refresh(!0,{rotation:M}),this._currentScaleValue&&this.#x(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:M,pageNumber:A}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#d(){const M=this;return{get annotationEditorUIManager(){return M.#i},get annotationStorage(){return M.pdfDocument?.annotationStorage},get downloadManager(){return M.downloadManager},get enableScripting(){return!!M._scriptingManager},get fieldObjectsPromise(){return M.pdfDocument?.getFieldObjects()},get findController(){return M.findController},get hasJSActionsPromise(){return M.pdfDocument?.hasJSActions()},get linkService(){return M.linkService}}}#v(M){const A={annotationEditorMode:this.#n,annotationMode:this.#o,textLayerMode:this.#y};return M&&(!M.includes(V.PermissionFlag.COPY)&&this.#y===H.TextLayerMode.ENABLE&&(A.textLayerMode=H.TextLayerMode.ENABLE_PERMISSIONS),M.includes(V.PermissionFlag.MODIFY_CONTENTS)||(A.annotationEditorMode=V.AnnotationEditorType.DISABLE),!M.includes(V.PermissionFlag.MODIFY_ANNOTATIONS)&&!M.includes(V.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#o===V.AnnotationMode.ENABLE_FORMS&&(A.annotationMode=V.AnnotationMode.ENABLE)),A}#S(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const M=new Promise(A=>{this.#g=()=>{"hidden"===document.visibilityState&&(A(),document.removeEventListener("visibilitychange",this.#g),this.#g=null)},document.addEventListener("visibilitychange",this.#g)});return Promise.race([this._onePageRenderedCapability.promise,M])}getAllText(){var M=this;return le(function*(){const A=[],b=[];for(let q=1,C=M.pdfDocument.numPages;q<=C;++q){if(M.#u)return null;b.length=0;const P=yield M.pdfDocument.getPage(q),{items:F}=yield P.getTextContent();for(const I of F)I.str&&b.push(I.str),I.hasEOL&&b.push("\n");A.push((0,H.removeNullCharacters)(b.join("")))}return A.join("\n")})()}#_(M,A){const b=document.getSelection(),{focusNode:q,anchorNode:C}=b;if(C&&q&&b.containsNode(this.#r)){if(this.#c||M===H.TextLayerMode.ENABLE_PERMISSIONS)return A.preventDefault(),void A.stopPropagation();this.#c=!0;const P=this.container.style.cursor;this.container.style.cursor="wait";const F=I=>this.#u="Escape"===I.key;window.addEventListener("keydown",F),this.getAllText().then(function(){var I=le(function*(j){null!==j&&(yield navigator.clipboard.writeText(j))});return function(j){return I.apply(this,arguments)}}()).catch(I=>{console.warn(`Something goes wrong when extracting the text: ${I.message}`)}).finally(()=>{this.#c=!1,this.#u=!1,window.removeEventListener("keydown",F),this.container.style.cursor=P}),A.preventDefault(),A.stopPropagation()}}setDocument(M){var A=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#i&&(this.#i.destroy(),this.#i=null)),this.pdfDocument=M,!M)return;const b=M.numPages,q=M.getPage(1),C=M.getOptionalContentConfig(),P=this.#l?M.getPermissions():Promise.resolve();if(b>ae.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const F=this._scrollMode=H.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:F})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:b})},()=>{}),this._onBeforeDraw=F=>{const I=this._pages[F.pageNumber-1];I&&this.#e.push(I)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=F=>{F.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:F.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([q,P]).then(([F,I])=>{if(M!==this.pdfDocument)return;this._firstPageCapability.resolve(F),this._optionalContentConfigPromise=C;const{annotationEditorMode:j,annotationMode:E,textLayerMode:x}=this.#v(I);if(x!==H.TextLayerMode.DISABLE){const K=this.#r=document.createElement("div");K.id="hiddenCopyElement",this.viewer.before(K)}if(j!==V.AnnotationEditorType.DISABLE){const K=j;M.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):oe(K)?(this.#i=new V.AnnotationEditorUIManager(this.container,this.viewer,this.#t,this.eventBus,M,this.pageColors),K!==V.AnnotationEditorType.NONE&&this.#i.updateMode(K)):console.error(`Invalid AnnotationEditor mode: ${K}`)}const p=this.#d.bind(this),m=this._scrollMode===H.ScrollMode.PAGE?null:this.viewer,_=this.currentScale,R=F.getViewport({scale:_*V.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",R.scale),("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&this.viewer.style.setProperty("--hcm-highligh-filter",M.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let K=1;K<=b;++K){const U=new re.PDFPageView({container:m,eventBus:this.eventBus,id:K,scale:_,defaultViewport:R.clone(),optionalContentConfigPromise:C,renderingQueue:this.renderingQueue,textLayerMode:x,annotationMode:E,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:p});this._pages.push(U)}const G=this._pages[0];G&&(G.setPdfPage(F),this.linkService.cachePageRef(1,F.ref)),this._scrollMode===H.ScrollMode.PAGE?this.#b():this._spreadMode!==H.SpreadMode.NONE&&this._updateSpreadMode(),this.#S().then(le(function*(){if(A.findController?.setDocument(M),A._scriptingManager?.setDocument(M),A.#r&&(A.#a=A.#_.bind(A,x),document.addEventListener("copy",A.#a)),A.#i&&A.eventBus.dispatch("annotationeditormodechanged",{source:A,mode:A.#n}),M.loadingParams.disableAutoFetch||b>ae.FORCE_LAZY_PAGE_INIT)return void A._pagesCapability.resolve();let K=b-1;if(K<=0)A._pagesCapability.resolve();else for(let U=2;U<=b;++U){const z=M.getPage(U).then(L=>{const S=A._pages[U-1];S.pdfPage||S.setPdfPage(L),A.linkService.cachePageRef(U,L.ref),0==--K&&A._pagesCapability.resolve()},L=>{console.error(`Unable to get page ${U} to initialize viewer`,L),0==--K&&A._pagesCapability.resolve()});U%ae.PAUSE_EAGER_PAGE_INIT==0&&(yield z)}})),this.eventBus.dispatch("pagesinit",{source:this}),M.getMetadata().then(({info:K})=>{M===this.pdfDocument&&K.Language&&(this.viewer.lang=K.Language)}),this.defaultRenderingQueue&&this.update()}).catch(F=>{console.error("Unable to initialize viewer",F),this._pagesCapability.reject(F)})}setPageLabels(M){if(this.pdfDocument){M?Array.isArray(M)&&this.pdfDocument.numPages===M.length?this._pageLabels=M:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let A=0,b=this._pages.length;A<b;A++)this._pages[A].setPageLabel(this._pageLabels?.[A]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=H.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new W(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new V.PromiseCapability,this._onePageRenderedCapability=new V.PromiseCapability,this._pagesCapability=new V.PromiseCapability,this._scrollMode=H.ScrollMode.VERTICAL,this._previousScrollMode=H.ScrollMode.UNKNOWN,this._spreadMode=H.SpreadMode.NONE,this.#p={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#r&&(document.removeEventListener("copy",this.#a),this.#a=null,this.#r.remove(),this.#r=null)}#b(){if(this._scrollMode!==H.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const M=this._currentPageNumber,A=this.#p,b=this.viewer;if(b.textContent="",A.pages.length=0,this._spreadMode!==H.SpreadMode.NONE||this.isInPresentationMode){const q=new Set,C=this._spreadMode-1;-1===C?q.add(M-1):M%2!==C?(q.add(M-1),q.add(M)):(q.add(M-2),q.add(M-1));const P=document.createElement("div");if(P.className="spread",this.isInPresentationMode){const F=document.createElement("div");F.className="dummyPage",P.append(F)}for(const F of q){const I=this._pages[F];I&&(P.append(I.div),A.pages.push(I))}b.append(P)}else{const q=this._pages[M-1];b.append(q.div),A.pages.push(q)}A.scrollDown=M>=A.previousPageNumber,A.previousPageNumber=M}_scrollUpdate(){0!==this.pagesCount&&this.update()}#w(M,A=null){const{div:b,id:q}=M;if(this._currentPageNumber!==q&&this._setCurrentPageNumber(q),this._scrollMode===H.ScrollMode.PAGE&&(this.#b(),this.update()),!A&&!this.isInPresentationMode){const C=b.offsetLeft+b.clientLeft,P=C+b.clientWidth,{scrollLeft:F,clientWidth:I}=this.container;(this._scrollMode===H.ScrollMode.HORIZONTAL||C<F||P>F+I)&&(A={left:0,top:0})}(0,H.scrollIntoView)(b,A),!this._currentScaleValue&&this._location&&(this._location=null)}#F(M){return M===this._currentScale||Math.abs(M-this._currentScale)<1e-15}#P(M,A,{noScroll:b=!1,preset:q=!1,drawingDelay:C=-1}){if(this._currentScaleValue=A.toString(),this.#F(M))return void(q&&this.eventBus.dispatch("scalechanging",{source:this,scale:M,presetValue:A}));this.viewer.style.setProperty("--scale-factor",M*V.PixelsPerInch.PDF_TO_CSS_UNITS);const P=C>=0&&C<1e3;if(this.refresh(!0,{scale:M,drawingDelay:P?C:-1}),P&&(this.#m=setTimeout(()=>{this.#m=null,this.refresh()},C)),this._currentScale=M,!b){let I,F=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(F=this._location.pageNumber,I=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:F,destArray:I,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:M,presetValue:q?A:void 0}),this.defaultRenderingQueue&&this.update()}get#R(){return this._spreadMode!==H.SpreadMode.NONE&&this._scrollMode!==H.ScrollMode.HORIZONTAL?2:1}#x(M,A){let b=parseFloat(M);if(b>0)A.preset=!1,this.#P(b,M,A);else{const q=this._pages[this._currentPageNumber-1];if(!q)return;let C=H.SCROLLBAR_PADDING,P=H.VERTICAL_PADDING;this.isInPresentationMode?(C=P=4,this._spreadMode!==H.SpreadMode.NONE&&(C*=2)):this.removePageBorders?C=P=0:this._scrollMode===H.ScrollMode.HORIZONTAL&&([C,P]=[P,C]);const F=(this.container.clientWidth-C)/q.width*q.scale/this.#R,I=(this.container.clientHeight-P)/q.height*q.scale;switch(M){case"page-actual":b=1;break;case"page-width":b=F;break;case"page-height":b=I;break;case"page-fit":b=Math.min(F,I);break;case"auto":const j=(0,H.isPortraitOrientation)(q)?F:Math.min(I,F);b=Math.min(H.MAX_AUTO_SCALE,j);break;default:return void console.error(`#setScale: "${M}" is an unknown zoom value.`)}A.preset=!0,this.#P(b,M,A)}}#D(){const M=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#x(this._currentScaleValue,{noScroll:!0}),this.#w(M)}pageLabelToPageNumber(M){if(!this._pageLabels)return null;const A=this._pageLabels.indexOf(M);return A<0?null:A+1}scrollPageIntoView({pageNumber:M,destArray:A=null,allowNegativeOffset:b=!1,ignoreDestinationZoom:q=!1}){if(!this.pdfDocument)return;const C=Number.isInteger(M)&&this._pages[M-1];if(!C)return void console.error(`scrollPageIntoView: "${M}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!A)return void this._setCurrentPageNumber(M,!0);let E,x,P=0,F=0,I=0,j=0;const p=C.rotation%180!=0,m=(p?C.height:C.width)/C.scale/V.PixelsPerInch.PDF_TO_CSS_UNITS,_=(p?C.width:C.height)/C.scale/V.PixelsPerInch.PDF_TO_CSS_UNITS;let R=0;switch(A[1].name){case"XYZ":P=A[2],F=A[3],R=A[4],P=null!==P?P:0,F=null!==F?F:_;break;case"Fit":case"FitB":R="page-fit";break;case"FitH":case"FitBH":F=A[2],R="page-width",null===F&&this._location?(P=this._location.left,F=this._location.top):("number"!=typeof F||F<0)&&(F=_);break;case"FitV":case"FitBV":P=A[2],I=m,j=_,R="page-height";break;case"FitR":P=A[2],F=A[3],I=A[4]-P,j=A[5]-F;let z=H.SCROLLBAR_PADDING,L=H.VERTICAL_PADDING;this.removePageBorders&&(z=L=0),E=(this.container.clientWidth-z)/I/V.PixelsPerInch.PDF_TO_CSS_UNITS,x=(this.container.clientHeight-L)/j/V.PixelsPerInch.PDF_TO_CSS_UNITS,R=Math.min(Math.abs(E),Math.abs(x));break;default:return void console.error(`scrollPageIntoView: "${A[1].name}" is not a valid destination type.`)}if(q||(R&&R!==this._currentScale?this.currentScaleValue=R:this._currentScale===H.UNKNOWN_SCALE&&(this.currentScaleValue=H.DEFAULT_SCALE_VALUE)),"page-fit"===R&&!A[4])return void this.#w(C);const G=[C.viewport.convertToViewportPoint(P,F),C.viewport.convertToViewportPoint(P+I,F+j)];let K=Math.min(G[0][0],G[1][0]),U=Math.min(G[0][1],G[1][1]);b||(K=Math.max(K,0),U=Math.max(U,0)),this.#w(C,{left:K,top:U})}_updateLocation(M){const A=this._currentScale,b=this._currentScaleValue,q=parseFloat(b)===A?Math.round(1e4*A)/100:b,C=M.id,F=this.container,I=this._pages[C-1].getPagePoint(F.scrollLeft-M.x,F.scrollTop-M.y),j=Math.round(I[0]),E=Math.round(I[1]);let x=`#page=${C}`;this.isInPresentationMode||(x+=`&zoom=${q},${j},${E}`),this._location={pageNumber:C,scale:q,top:E,left:j,rotation:this._pagesRotation,pdfOpenParams:x}}update(){const M=this._getVisiblePages(),A=M.views,b=A.length;if(0===b)return;const q=Math.max(10,2*b+1);this.#e.resize(q,M.ids),this.renderingQueue.renderHighestPriority(M);const C=this._spreadMode===H.SpreadMode.NONE&&(this._scrollMode===H.ScrollMode.PAGE||this._scrollMode===H.ScrollMode.VERTICAL),P=this._currentPageNumber;let F=!1;for(const I of A){if(I.percent<100)break;if(I.id===P&&C){F=!0;break}}this._setCurrentPageNumber(F?P:A[0].id),this._updateLocation(M.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(M){return this.container.contains(M)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===H.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===H.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const M=this._scrollMode===H.ScrollMode.PAGE?this.#p.pages:this._pages,A=this._scrollMode===H.ScrollMode.HORIZONTAL;return(0,H.getVisibleElements)({scrollEl:this.container,views:M,sortByVisibility:!0,horizontal:A,rtl:A&&this._isContainerRtl})}cleanup(){for(const M of this._pages)M.renderingState!==H.RenderingStates.FINISHED&&M.reset()}_cancelRendering(){for(const M of this._pages)M.cancelRendering()}#T(M){var A=this;return le(function*(){if(M.pdfPage)return M.pdfPage;try{const b=yield A.pdfDocument.getPage(M.id);return M.pdfPage||M.setPdfPage(b),A.linkService._cachedPageNumber?.(b.ref)||A.linkService.cachePageRef(M.id,b.ref),b}catch(b){return console.error("Unable to get page for page view",b),null}})()}#M(M){if(1===M.first?.id)return!0;if(M.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case H.ScrollMode.PAGE:return this.#p.scrollDown;case H.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(M){const A=M||this._getVisiblePages(),b=this.#M(A),C=this.renderingQueue.getHighestPriority(A,this._pages,b,this._spreadMode!==H.SpreadMode.NONE&&this._scrollMode!==H.ScrollMode.HORIZONTAL);return!!C&&(this.#T(C).then(()=>{this.renderingQueue.renderView(C)}),!0)}get hasEqualPageSizes(){const M=this._pages[0];for(let A=1,b=this._pages.length;A<b;++A){const q=this._pages[A];if(q.width!==M.width||q.height!==M.height)return!1}return!0}getPagesOverview(){let M;return this._pages.map(A=>{const b=A.pdfPage.getViewport({scale:1}),q=(0,H.isPortraitOrientation)(b);if(void 0===M)M=q;else if(this.enablePrintAutoRotate&&q!==M)return{width:b.height,height:b.width,rotation:(b.rotation-90)%360};return{width:b.width,height:b.height,rotation:b.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(M){if(!(M instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${M}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=M,this.refresh(!1,{optionalContentConfigPromise:M}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:M}))}get scrollMode(){return this._scrollMode}set scrollMode(M){if(this._scrollMode!==M){if(!(0,H.isValidScrollMode)(M))throw new Error(`Invalid scroll mode: ${M}`);this.pagesCount>ae.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=M,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:M}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(M=null){const A=this._scrollMode,b=this.viewer;b.classList.toggle("scrollHorizontal",A===H.ScrollMode.HORIZONTAL),b.classList.toggle("scrollWrapped",A===H.ScrollMode.WRAPPED),this.pdfDocument&&M&&(A===H.ScrollMode.PAGE?this.#b():this._previousScrollMode===H.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#x(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(M,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(M){if(this._spreadMode!==M){if(!(0,H.isValidSpreadMode)(M))throw new Error(`Invalid spread mode: ${M}`);this._spreadMode=M,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:M}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(M=null){if(!this.pdfDocument)return;const A=this.viewer,b=this._pages;if(this._scrollMode===H.ScrollMode.PAGE)this.#b();else if(A.textContent="",this._spreadMode===H.SpreadMode.NONE)for(const q of this._pages)A.append(q.div);else{const q=this._spreadMode-1;let C=null;for(let P=0,F=b.length;P<F;++P)null===C?(C=document.createElement("div"),C.className="spread",A.append(C)):P%2===q&&(C=C.cloneNode(!1),A.append(C)),C.append(b[P].div)}M&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#x(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(M,!0),this.update())}_getPageAdvance(M,A=!1){switch(this._scrollMode){case H.ScrollMode.WRAPPED:{const{views:b}=this._getVisiblePages(),q=new Map;for(const{id:C,y:P,percent:F,widthPercent:I}of b){if(0===F||I<100)continue;let j=q.get(P);j||q.set(P,j||=[]),j.push(C)}for(const C of q.values()){const P=C.indexOf(M);if(-1===P)continue;const F=C.length;if(1===F)break;if(A)for(let I=P-1,j=0;I>=j;I--){const x=C[I+1]-1;if(C[I]<x)return M-x}else for(let I=P+1,j=F;I<j;I++){const x=C[I-1]+1;if(C[I]>x)return x-M}if(A){const I=C[0];if(I<M)return M-I+1}else{const I=C[F-1];if(I>M)return I-M+1}break}break}case H.ScrollMode.HORIZONTAL:break;case H.ScrollMode.PAGE:case H.ScrollMode.VERTICAL:{if(this._spreadMode===H.SpreadMode.NONE)break;const b=this._spreadMode-1;if(A&&M%2!==b)break;if(!A&&M%2===b)break;const{views:q}=this._getVisiblePages(),C=A?M-1:M+1;for(const{id:P,percent:F,widthPercent:I}of q)if(P===C){if(F>0&&100===I)return 2;break}break}}return 1}nextPage(){const M=this._currentPageNumber,A=this.pagesCount;if(M>=A)return!1;const b=this._getPageAdvance(M,!1)||1;return this.currentPageNumber=Math.min(M+b,A),!0}previousPage(){const M=this._currentPageNumber;if(M<=1)return!1;const A=this._getPageAdvance(M,!0)||1;return this.currentPageNumber=Math.max(M-A,1),!0}increaseScale({drawingDelay:M,scaleFactor:A,steps:b}={}){if(!this.pdfDocument)return;let q=this._currentScale;if(A>1)q=Math.round(q*A*100)/100;else{b??=1;do{q=Math.ceil(10*(q*H.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--b>0&&q<H.MAX_SCALE)}this.#x(Math.min(H.MAX_SCALE,q),{noScroll:!1,drawingDelay:M})}decreaseScale({drawingDelay:M,scaleFactor:A,steps:b}={}){if(!this.pdfDocument)return;let q=this._currentScale;if(A>0&&A<1)q=Math.round(q*A*100)/100;else{b??=1;do{q=Math.floor(10*(q/H.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--b>0&&q>H.MIN_SCALE)}this.#x(Math.max(H.MIN_SCALE,q),{noScroll:!1,drawingDelay:M})}#C(M=this.container.clientHeight){M!==this.#h&&(this.#h=M,H.docStyle.setProperty("--viewer-container-height",`${M}px`))}#E(M){for(const A of M)if(A.target===this.container){this.#C(Math.floor(A.borderBoxSize[0].blockSize)),this.#s=null;break}}get containerTopLeft(){return this.#s||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#i?this.#n:V.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:M,editId:A=null}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");if(this.#n!==M){if(!oe(M))throw new Error(`Invalid AnnotationEditor mode: ${M}`);this.pdfDocument&&(this.#n=M,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:M}),this.#i.updateMode(M,A))}}set annotationEditorParams({type:M,value:A}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");this.#i.updateParams(M,A)}refresh(M=!1,A=Object.create(null)){if(this.pdfDocument){for(const b of this._pages)b.update(A);null!==this.#m&&(clearTimeout(this.#m),this.#m=null),M||this.update()}}}},(fe,ee,e)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PDFRenderingQueue=void 0;var V=e(4),H=e(2);ee.PDFRenderingQueue=class re{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(c){this.pdfViewer=c}setThumbnailViewer(c){this.pdfThumbnailViewer=c}isHighestPriority(c){return this.highestPriorityPage===c.renderingId}renderHighestPriority(c){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(c)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(c,$,ae,oe=!1){const W=c.views,N=W.length;if(0===N)return null;for(let q=0;q<N;q++){const C=W[q].view;if(!this.isViewFinished(C))return C}const O=c.first.id,M=c.last.id;if(M-O+1>N){const q=c.ids;for(let C=1,P=M-O;C<P;C++){const F=ae?O+C:M-C;if(q.has(F))continue;const I=$[F-1];if(!this.isViewFinished(I))return I}}let A=ae?M:O-2,b=$[A];return b&&!this.isViewFinished(b)||oe&&(A+=ae?1:-1,b=$[A],b&&!this.isViewFinished(b))?b:null}isViewFinished(c){return c.renderingState===H.RenderingStates.FINISHED}renderView(c){switch(c.renderingState){case H.RenderingStates.FINISHED:return!1;case H.RenderingStates.PAUSED:this.highestPriorityPage=c.renderingId,c.resume();break;case H.RenderingStates.RUNNING:this.highestPriorityPage=c.renderingId;break;case H.RenderingStates.INITIAL:this.highestPriorityPage=c.renderingId,c.draw().finally(()=>{this.renderHighestPriority()}).catch($=>{$ instanceof V.RenderingCancelledException||console.error(`renderView: "${$}"`)})}return!0}}}],se={};function y(fe){var ee=se[fe];if(void 0!==ee)return ee.exports;var e=se[fe]={exports:{}};return Ee[fe](e,e.exports,y),e.exports}var k={};return(()=>{var fe=k;Object.defineProperty(fe,"__esModule",{value:!0}),Object.defineProperty(fe,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return H.AnnotationLayerBuilder}}),Object.defineProperty(fe,"DownloadManager",{enumerable:!0,get:function(){return te.DownloadManager}}),Object.defineProperty(fe,"EventBus",{enumerable:!0,get:function(){return re.EventBus}}),Object.defineProperty(fe,"FindState",{enumerable:!0,get:function(){return ee.FindState}}),Object.defineProperty(fe,"GenericL10n",{enumerable:!0,get:function(){return f.GenericL10n}}),Object.defineProperty(fe,"LinkTarget",{enumerable:!0,get:function(){return e.LinkTarget}}),Object.defineProperty(fe,"NullL10n",{enumerable:!0,get:function(){return c.NullL10n}}),Object.defineProperty(fe,"PDFFindController",{enumerable:!0,get:function(){return ee.PDFFindController}}),Object.defineProperty(fe,"PDFHistory",{enumerable:!0,get:function(){return $.PDFHistory}}),Object.defineProperty(fe,"PDFLinkService",{enumerable:!0,get:function(){return e.PDFLinkService}}),Object.defineProperty(fe,"PDFPageView",{enumerable:!0,get:function(){return ae.PDFPageView}}),Object.defineProperty(fe,"PDFScriptingManager",{enumerable:!0,get:function(){return oe.PDFScriptingManager}}),Object.defineProperty(fe,"PDFSinglePageViewer",{enumerable:!0,get:function(){return W.PDFSinglePageViewer}}),Object.defineProperty(fe,"PDFViewer",{enumerable:!0,get:function(){return N.PDFViewer}}),Object.defineProperty(fe,"ProgressBar",{enumerable:!0,get:function(){return V.ProgressBar}}),Object.defineProperty(fe,"RenderingStates",{enumerable:!0,get:function(){return V.RenderingStates}}),Object.defineProperty(fe,"ScrollMode",{enumerable:!0,get:function(){return V.ScrollMode}}),Object.defineProperty(fe,"SimpleLinkService",{enumerable:!0,get:function(){return e.SimpleLinkService}}),Object.defineProperty(fe,"SpreadMode",{enumerable:!0,get:function(){return V.SpreadMode}}),Object.defineProperty(fe,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return O.StructTreeLayerBuilder}}),Object.defineProperty(fe,"TextLayerBuilder",{enumerable:!0,get:function(){return M.TextLayerBuilder}}),Object.defineProperty(fe,"XfaLayerBuilder",{enumerable:!0,get:function(){return A.XfaLayerBuilder}}),Object.defineProperty(fe,"parseQueryString",{enumerable:!0,get:function(){return V.parseQueryString}});var ee=y(1),e=y(5),V=y(2),H=y(6),te=y(8),re=y(9),f=y(10),c=y(7),$=y(12),ae=y(13),oe=y(21),W=y(24),N=y(25),O=y(16),M=y(19),A=y(20)})(),k})(),yt.exports=se.pdfjsViewer=y()},627:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(156).default,Oe;Oe=function(){return function(yt){var he={};function Oe(le){if(he[le])return he[le].exports;var Ee=he[le]={i:le,l:!1,exports:{}};return yt[le].call(Ee.exports,Ee,Ee.exports,Oe),Ee.l=!0,Ee.exports}return Oe.m=yt,Oe.c=he,Oe.d=function(le,Ee,se){Oe.o(le,Ee)||Object.defineProperty(le,Ee,{enumerable:!0,get:se})},Oe.r=function(le){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(le,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(le,"__esModule",{value:!0})},Oe.t=function(le,Ee){if(1&Ee&&(le=Oe(le)),8&Ee||4&Ee&&"object"==typeof le&&le&&le.__esModule)return le;var se=Object.create(null);if(Oe.r(se),Object.defineProperty(se,"default",{enumerable:!0,value:le}),2&Ee&&"string"!=typeof le)for(var y in le)Oe.d(se,y,function(k){return le[k]}.bind(null,y));return se},Oe.n=function(le){var Ee=le&&le.__esModule?function(){return le.default}:function(){return le};return Oe.d(Ee,"a",Ee),Ee},Oe.o=function(le,Ee){return Object.prototype.hasOwnProperty.call(le,Ee)},Oe.p="",Oe(Oe.s=0)}([function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),Object.defineProperty(he,"addLinkAttributes",{enumerable:!0,get:function(){return le.addLinkAttributes}}),Object.defineProperty(he,"getFilenameFromUrl",{enumerable:!0,get:function(){return le.getFilenameFromUrl}}),Object.defineProperty(he,"LinkTarget",{enumerable:!0,get:function(){return le.LinkTarget}}),Object.defineProperty(he,"loadScript",{enumerable:!0,get:function(){return le.loadScript}}),Object.defineProperty(he,"PDFDateString",{enumerable:!0,get:function(){return le.PDFDateString}}),Object.defineProperty(he,"RenderingCancelledException",{enumerable:!0,get:function(){return le.RenderingCancelledException}}),Object.defineProperty(he,"build",{enumerable:!0,get:function(){return Ee.build}}),Object.defineProperty(he,"getDocument",{enumerable:!0,get:function(){return Ee.getDocument}}),Object.defineProperty(he,"LoopbackPort",{enumerable:!0,get:function(){return Ee.LoopbackPort}}),Object.defineProperty(he,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Ee.PDFDataRangeTransport}}),Object.defineProperty(he,"PDFWorker",{enumerable:!0,get:function(){return Ee.PDFWorker}}),Object.defineProperty(he,"version",{enumerable:!0,get:function(){return Ee.version}}),Object.defineProperty(he,"CMapCompressionType",{enumerable:!0,get:function(){return se.CMapCompressionType}}),Object.defineProperty(he,"createObjectURL",{enumerable:!0,get:function(){return se.createObjectURL}}),Object.defineProperty(he,"createPromiseCapability",{enumerable:!0,get:function(){return se.createPromiseCapability}}),Object.defineProperty(he,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return se.createValidAbsoluteUrl}}),Object.defineProperty(he,"InvalidPDFException",{enumerable:!0,get:function(){return se.InvalidPDFException}}),Object.defineProperty(he,"MissingPDFException",{enumerable:!0,get:function(){return se.MissingPDFException}}),Object.defineProperty(he,"OPS",{enumerable:!0,get:function(){return se.OPS}}),Object.defineProperty(he,"PasswordResponses",{enumerable:!0,get:function(){return se.PasswordResponses}}),Object.defineProperty(he,"PermissionFlag",{enumerable:!0,get:function(){return se.PermissionFlag}}),Object.defineProperty(he,"removeNullCharacters",{enumerable:!0,get:function(){return se.removeNullCharacters}}),Object.defineProperty(he,"shadow",{enumerable:!0,get:function(){return se.shadow}}),Object.defineProperty(he,"UnexpectedResponseException",{enumerable:!0,get:function(){return se.UnexpectedResponseException}}),Object.defineProperty(he,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return se.UNSUPPORTED_FEATURES}}),Object.defineProperty(he,"Util",{enumerable:!0,get:function(){return se.Util}}),Object.defineProperty(he,"VerbosityLevel",{enumerable:!0,get:function(){return se.VerbosityLevel}}),Object.defineProperty(he,"AnnotationLayer",{enumerable:!0,get:function(){return y.AnnotationLayer}}),Object.defineProperty(he,"apiCompatibilityParams",{enumerable:!0,get:function(){return k.apiCompatibilityParams}}),Object.defineProperty(he,"GlobalWorkerOptions",{enumerable:!0,get:function(){return fe.GlobalWorkerOptions}}),Object.defineProperty(he,"renderTextLayer",{enumerable:!0,get:function(){return ee.renderTextLayer}}),Object.defineProperty(he,"SVGGraphics",{enumerable:!0,get:function(){return e.SVGGraphics}});var le=Oe(1),Ee=Oe(5),se=Oe(2),y=Oe(19),k=Oe(9),fe=Oe(12),ee=Oe(20),e=Oe(21);{const{isNodeJS:te}=Oe(4);if(te){const re=Oe(22).PDFNodeStream;(0,Ee.setPDFNetworkStreamFactory)(f=>new re(f))}else{const re=Oe(25).PDFNetworkStream;let f;(0,le.isFetchSupported)()&&(f=Oe(26).PDFFetchStream),(0,Ee.setPDFNetworkStreamFactory)(c=>f&&(0,le.isValidFetchUrl)(c.url)?new f(c):new re(c))}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.addLinkAttributes=function re(M,{url:A,target:b,rel:q,enabled:C=!0}={}){(0,le.assert)(A&&"string"==typeof A,'addLinkAttributes: A valid "url" parameter must provided.');const P=(0,le.removeNullCharacters)(A);C?M.href=M.title=P:(M.href="",M.title=`Disabled: ${P}`,M.onclick=()=>!1);let F="";switch(b){case te.NONE:break;case te.SELF:F="_self";break;case te.BLANK:F="_blank";break;case te.PARENT:F="_parent";break;case te.TOP:F="_top"}M.target=F,M.rel="string"==typeof q?q:Ee},he.getFilenameFromUrl=function f(M){const A=M.indexOf("#"),b=M.indexOf("?"),q=Math.min(A>0?A:M.length,b>0?b:M.length);return M.substring(M.lastIndexOf("/",q)+1,q)},he.isFetchSupported=$,he.isValidFetchUrl=ae,he.loadScript=function oe(M){return new Promise((A,b)=>{const q=document.createElement("script");q.src=M,q.onload=A,q.onerror=function(){b(new Error(`Cannot load script at: ${q.src}`))},(document.head||document.documentElement).appendChild(q)})},he.deprecated=function W(M){console.log("Deprecated API usage: "+M)},he.PDFDateString=he.StatTimer=he.DOMSVGFactory=he.DOMCMapReaderFactory=he.BaseCMapReaderFactory=he.DOMCanvasFactory=he.BaseCanvasFactory=he.DEFAULT_LINK_REL=he.LinkTarget=he.RenderingCancelledException=he.PageViewport=void 0;var le=Oe(2);const Ee="noopener noreferrer nofollow";he.DEFAULT_LINK_REL=Ee;const se="http://www.w3.org/2000/svg";class y{constructor(){this.constructor===y&&(0,le.unreachable)("Cannot initialize BaseCanvasFactory.")}create(A,b){(0,le.unreachable)("Abstract method `create` called.")}reset(A,b,q){if(!A.canvas)throw new Error("Canvas is not specified");if(b<=0||q<=0)throw new Error("Invalid canvas size");A.canvas.width=b,A.canvas.height=q}destroy(A){if(!A.canvas)throw new Error("Canvas is not specified");A.canvas.width=0,A.canvas.height=0,A.canvas=null,A.context=null}}he.BaseCanvasFactory=y,he.DOMCanvasFactory=class k extends y{constructor({ownerDocument:A=globalThis.document}={}){super(),this._document=A}create(A,b){if(A<=0||b<=0)throw new Error("Invalid canvas size");const q=this._document.createElement("canvas"),C=q.getContext("2d");return q.width=A,q.height=b,{canvas:q,context:C}}};class fe{constructor({baseUrl:A=null,isCompressed:b=!1}){this.constructor===fe&&(0,le.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=A,this.isCompressed=b}fetch({name:A}){var b=this;return _asyncToGenerator(function*(){if(!b.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!A)throw new Error("CMap name must be specified.");const q=b.baseUrl+A+(b.isCompressed?".bcmap":"");return b._fetchData(q,b.isCompressed?le.CMapCompressionType.BINARY:le.CMapCompressionType.NONE).catch(P=>{throw new Error(`Unable to load ${b.isCompressed?"binary ":""}CMap at: ${q}`)})})()}_fetchData(A,b){(0,le.unreachable)("Abstract method `_fetchData` called.")}}he.BaseCMapReaderFactory=fe,he.DOMCMapReaderFactory=class ee extends fe{_fetchData(A,b){var q=this;return $()&&ae(A,document.baseURI)?fetch(A).then(function(){var C=_asyncToGenerator(function*(P){if(!P.ok)throw new Error(P.statusText);let F;return F=q.isCompressed?new Uint8Array(yield P.arrayBuffer()):(0,le.stringToBytes)(yield P.text()),{cMapData:F,compressionType:b}});return function(P){return C.apply(this,arguments)}}()):new Promise((C,P)=>{const F=new XMLHttpRequest;F.open("GET",A,!0),this.isCompressed&&(F.responseType="arraybuffer"),F.onreadystatechange=()=>{if(F.readyState===XMLHttpRequest.DONE){if(200===F.status||0===F.status){let I;if(this.isCompressed&&F.response?I=new Uint8Array(F.response):!this.isCompressed&&F.responseText&&(I=(0,le.stringToBytes)(F.responseText)),I)return void C({cMapData:I,compressionType:b})}P(new Error(F.statusText))}},F.send(null)})}},he.DOMSVGFactory=class e{create(A,b){(0,le.assert)(A>0&&b>0,"Invalid SVG dimensions");const q=document.createElementNS(se,"svg:svg");return q.setAttribute("version","1.1"),q.setAttribute("width",A+"px"),q.setAttribute("height",b+"px"),q.setAttribute("preserveAspectRatio","none"),q.setAttribute("viewBox","0 0 "+A+" "+b),q}createElement(A){return(0,le.assert)("string"==typeof A,"Invalid SVG element type"),document.createElementNS(se,A)}};class V{constructor({viewBox:A,scale:b,rotation:q,offsetX:C=0,offsetY:P=0,dontFlip:F=!1}){this.viewBox=A,this.scale=b,this.rotation=q,this.offsetX=C,this.offsetY=P;const I=(A[2]+A[0])/2,j=(A[3]+A[1])/2;let E,x,p,m,_,R,G,K;switch(q=(q%=360)<0?q+360:q){case 180:E=-1,x=0,p=0,m=1;break;case 90:E=0,x=1,p=1,m=0;break;case 270:E=0,x=-1,p=-1,m=0;break;case 0:E=1,x=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(p=-p,m=-m),0===E?(_=Math.abs(j-A[1])*b+C,R=Math.abs(I-A[0])*b+P,G=Math.abs(A[3]-A[1])*b,K=Math.abs(A[2]-A[0])*b):(_=Math.abs(I-A[0])*b+C,R=Math.abs(j-A[1])*b+P,G=Math.abs(A[2]-A[0])*b,K=Math.abs(A[3]-A[1])*b),this.transform=[E*b,x*b,p*b,m*b,_-E*b*I-p*b*j,R-x*b*I-m*b*j],this.width=G,this.height=K}clone({scale:A=this.scale,rotation:b=this.rotation,offsetX:q=this.offsetX,offsetY:C=this.offsetY,dontFlip:P=!1}={}){return new V({viewBox:this.viewBox.slice(),scale:A,rotation:b,offsetX:q,offsetY:C,dontFlip:P})}convertToViewportPoint(A,b){return le.Util.applyTransform([A,b],this.transform)}convertToViewportRectangle(A){const b=le.Util.applyTransform([A[0],A[1]],this.transform),q=le.Util.applyTransform([A[2],A[3]],this.transform);return[b[0],b[1],q[0],q[1]]}convertToPdfPoint(A,b){return le.Util.applyInverseTransform([A,b],this.transform)}}he.PageViewport=V,he.RenderingCancelledException=class H extends le.BaseException{constructor(A,b){super(A),this.type=b}};const te={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function $(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&typeof ReadableStream<"u"}function ae(M,A){try{const{protocol:b}=A?new URL(M,A):new URL(M);return"http:"===b||"https:"===b}catch{return!1}}let N;he.LinkTarget=te,he.StatTimer=class c{constructor(){this.started=Object.create(null),this.times=[]}time(A){A in this.started&&(0,le.warn)(`Timer is already running for ${A}`),this.started[A]=Date.now()}timeEnd(A){A in this.started||(0,le.warn)(`Timer has not been started for ${A}`),this.times.push({name:A,start:this.started[A],end:Date.now()}),delete this.started[A]}toString(){const A=[];let b=0;for(const q of this.times){const C=q.name;C.length>b&&(b=C.length)}for(const q of this.times){const C=q.end-q.start;A.push(`${q.name.padEnd(b)} ${C}ms\n`)}return A.join("")}},he.PDFDateString=class O{static toDateObject(A){if(!A||!(0,le.isString)(A))return null;N||(N=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const b=N.exec(A);if(!b)return null;const q=parseInt(b[1],10);let C=parseInt(b[2],10);C=C>=1&&C<=12?C-1:0;let P=parseInt(b[3],10);P=P>=1&&P<=31?P:1;let F=parseInt(b[4],10);F=F>=0&&F<=23?F:0;let I=parseInt(b[5],10);I=I>=0&&I<=59?I:0;let j=parseInt(b[6],10);j=j>=0&&j<=59?j:0;const E=b[7]||"Z";let x=parseInt(b[8],10);x=x>=0&&x<=23?x:0;let p=parseInt(b[9],10)||0;return p=p>=0&&p<=59?p:0,"-"===E?(F+=x,I+=p):"+"===E&&(F-=x,I-=p),new Date(Date.UTC(q,C,P,F,I,j))}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.arrayByteLength=ie,he.arraysToBytes=function ce(et){const st=et.length;if(1===st&&et[0]instanceof Uint8Array)return et[0];let Ge=0;for(let Ue=0;Ue<st;Ue++)Ge+=ie(et[Ue]);let Ze=0;const je=new Uint8Array(Ge);for(let Ue=0;Ue<st;Ue++){let ct=et[Ue];ct instanceof Uint8Array||(ct="string"==typeof ct?J(ct):new Uint8Array(ct));const _t=ct.byteLength;je.set(ct,Ze),Ze+=_t}return je},he.assert=F,he.bytesToString=function B(et){F(null!==et&&"object"==typeof et&&void 0!==et.length,"Invalid argument for bytesToString");const st=et.length;if(st<8192)return String.fromCharCode.apply(null,et);const Ze=[];for(let je=0;je<st;je+=8192){const Ue=Math.min(je+8192,st),ct=et.subarray(je,Ue);Ze.push(String.fromCharCode.apply(null,ct))}return Ze.join("")},he.createPromiseCapability=function pt(){const et=Object.create(null);let st=!1;return Object.defineProperty(et,"settled",{get:()=>st}),et.promise=new Promise(function(Ge,Ze){et.resolve=function(je){st=!0,Ge(je)},et.reject=function(je){st=!0,Ze(je)}}),et},he.escapeString=function Ne(et){return et.replace(/([\(\)\\])/g,"\\$1")},he.getModificationDate=function dt(et=new Date(Date.now())){return[et.getUTCFullYear().toString(),(et.getUTCMonth()+1).toString().padStart(2,"0"),(et.getUTCDate()+1).toString().padStart(2,"0"),et.getUTCHours().toString().padStart(2,"0"),et.getUTCMinutes().toString().padStart(2,"0"),et.getUTCSeconds().toString().padStart(2,"0")].join("")},he.getVerbosityLevel=function b(){return M},he.info=function q(et){M>=ae.INFOS&&console.log(`Info: ${et}`)},he.isArrayBuffer=function He(et){return"object"==typeof et&&null!==et&&void 0!==et.byteLength},he.isArrayEqual=function it(et,st){return et.length===st.length&&et.every(function(Ge,Ze){return Ge===st[Ze]})},he.isBool=function Qe(et){return"boolean"==typeof et},he.isNum=function Ye(et){return"number"==typeof et},he.isString=function Je(et){return"string"==typeof et},he.isSameOrigin=function I(et,st){let Ge;try{if(Ge=new URL(et),!Ge.origin||"null"===Ge.origin)return!1}catch{return!1}const Ze=new URL(st,Ge);return Ge.origin===Ze.origin},he.createValidAbsoluteUrl=function E(et,st){if(!et)return null;try{const Ge=st?new URL(et,st):new URL(et);if(function j(et){if(!et)return!1;switch(et.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Ge))return Ge}catch{}return null},he.removeNullCharacters=function S(et){return"string"!=typeof et?(C("The argument for removeNullCharacters must be a string."),et):et.replace(L,"")},he.setVerbosityLevel=function A(et){Number.isInteger(et)&&(M=et)},he.shadow=x,he.string32=function pe(et){return String.fromCharCode(et>>24&255,et>>16&255,et>>8&255,255&et)},he.stringToBytes=J,he.stringToPDFString=function Me(et){const st=et.length,Ge=[];if("\xfe"===et[0]&&"\xff"===et[1])for(let Ze=2;Ze<st;Ze+=2)Ge.push(String.fromCharCode(et.charCodeAt(Ze)<<8|et.charCodeAt(Ze+1)));else if("\xff"===et[0]&&"\xfe"===et[1])for(let Ze=2;Ze<st;Ze+=2)Ge.push(String.fromCharCode(et.charCodeAt(Ze+1)<<8|et.charCodeAt(Ze)));else for(let Ze=0;Ze<st;++Ze){const je=Ce[et.charCodeAt(Ze)];Ge.push(je?String.fromCharCode(je):et.charAt(Ze))}return Ge.join("")},he.stringToUTF8String=function We(et){return decodeURIComponent(escape(et))},he.utf8StringToString=function Xe(et){return unescape(encodeURIComponent(et))},he.warn=C,he.unreachable=P,he.IsEvalSupportedCached=he.IsLittleEndianCached=he.createObjectURL=he.FormatError=he.Util=he.UnknownErrorException=he.UnexpectedResponseException=he.TextRenderingMode=he.StreamType=he.PermissionFlag=he.PasswordResponses=he.PasswordException=he.MissingPDFException=he.InvalidPDFException=he.AbortException=he.CMapCompressionType=he.ImageKind=he.FontType=he.AnnotationType=he.AnnotationStateModelType=he.AnnotationReviewState=he.AnnotationReplyType=he.AnnotationMarkedState=he.AnnotationFlag=he.AnnotationFieldFlag=he.AnnotationBorderStyleType=he.UNSUPPORTED_FEATURES=he.VerbosityLevel=he.OPS=he.IDENTITY_MATRIX=he.FONT_IDENTITY_MATRIX=he.BaseException=void 0,Oe(3),he.IDENTITY_MATRIX=[1,0,0,1,0,0],he.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],he.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},he.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},he.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},he.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},he.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},he.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},he.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},he.AnnotationReplyType={GROUP:"Group",REPLY:"R"},he.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},he.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},he.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},he.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},he.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const ae={ERRORS:0,WARNINGS:1,INFOS:5};he.VerbosityLevel=ae,he.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},he.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},he.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},he.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let M=ae.WARNINGS;function C(et){M>=ae.WARNINGS&&console.log(`Warning: ${et}`)}function P(et){throw new Error(et)}function F(et,st){et||P(st)}function x(et,st,Ge){return Object.defineProperty(et,st,{value:Ge,enumerable:!0,configurable:!0,writable:!1}),Ge}const p=function(){function st(Ge){this.constructor===st&&P("Cannot initialize BaseException."),this.message=Ge,this.name=this.constructor.name}return st.prototype=new Error,st.constructor=st,st}();he.BaseException=p,he.PasswordException=class m extends p{constructor(st,Ge){super(st),this.code=Ge}},he.UnknownErrorException=class _ extends p{constructor(st,Ge){super(st),this.details=Ge}},he.InvalidPDFException=class R extends p{},he.MissingPDFException=class G extends p{},he.UnexpectedResponseException=class K extends p{constructor(st,Ge){super(st),this.status=Ge}},he.FormatError=class U extends p{},he.AbortException=class z extends p{};const L=/\x00/g;function J(et){F("string"==typeof et,"Invalid argument for stringToBytes");const st=et.length,Ge=new Uint8Array(st);for(let Ze=0;Ze<st;++Ze)Ge[Ze]=255&et.charCodeAt(Ze);return Ge}function ie(et){return void 0!==et.length?et.length:(F(void 0!==et.byteLength,"arrayByteLength - invalid argument."),et.byteLength)}he.IsLittleEndianCached={get value(){return x(this,"value",function ye(){const et=new Uint8Array(4);return et[0]=1,1===new Uint32Array(et.buffer,0,1)[0]}())}},he.IsEvalSupportedCached={get value(){return x(this,"value",function _e(){try{return new Function(""),!0}catch{return!1}}())}};const De=["rgb(",0,",",0,",",0,")"];class xe{static makeCssRgb(st,Ge,Ze){return De[1]=st,De[3]=Ge,De[5]=Ze,De.join("")}static transform(st,Ge){return[st[0]*Ge[0]+st[2]*Ge[1],st[1]*Ge[0]+st[3]*Ge[1],st[0]*Ge[2]+st[2]*Ge[3],st[1]*Ge[2]+st[3]*Ge[3],st[0]*Ge[4]+st[2]*Ge[5]+st[4],st[1]*Ge[4]+st[3]*Ge[5]+st[5]]}static applyTransform(st,Ge){return[st[0]*Ge[0]+st[1]*Ge[2]+Ge[4],st[0]*Ge[1]+st[1]*Ge[3]+Ge[5]]}static applyInverseTransform(st,Ge){const Ze=Ge[0]*Ge[3]-Ge[1]*Ge[2];return[(st[0]*Ge[3]-st[1]*Ge[2]+Ge[2]*Ge[5]-Ge[4]*Ge[3])/Ze,(-st[0]*Ge[1]+st[1]*Ge[0]+Ge[4]*Ge[1]-Ge[5]*Ge[0])/Ze]}static getAxialAlignedBoundingBox(st,Ge){const Ze=xe.applyTransform(st,Ge),je=xe.applyTransform(st.slice(2,4),Ge),Ue=xe.applyTransform([st[0],st[3]],Ge),ct=xe.applyTransform([st[2],st[1]],Ge);return[Math.min(Ze[0],je[0],Ue[0],ct[0]),Math.min(Ze[1],je[1],Ue[1],ct[1]),Math.max(Ze[0],je[0],Ue[0],ct[0]),Math.max(Ze[1],je[1],Ue[1],ct[1])]}static inverseTransform(st){const Ge=st[0]*st[3]-st[1]*st[2];return[st[3]/Ge,-st[1]/Ge,-st[2]/Ge,st[0]/Ge,(st[2]*st[5]-st[4]*st[3])/Ge,(st[4]*st[1]-st[5]*st[0])/Ge]}static apply3dTransform(st,Ge){return[st[0]*Ge[0]+st[1]*Ge[1]+st[2]*Ge[2],st[3]*Ge[0]+st[4]*Ge[1]+st[5]*Ge[2],st[6]*Ge[0]+st[7]*Ge[1]+st[8]*Ge[2]]}static singularValueDecompose2dScale(st){const Ge=[st[0],st[2],st[1],st[3]],Ze=st[0]*Ge[0]+st[1]*Ge[2],ct=st[2]*Ge[1]+st[3]*Ge[3],_t=(Ze+ct)/2,Ut=Math.sqrt((Ze+ct)*(Ze+ct)-4*(Ze*ct-(st[2]*Ge[0]+st[3]*Ge[2])*(st[0]*Ge[1]+st[1]*Ge[3])))/2,rt=_t-Ut||1;return[Math.sqrt(_t+Ut||1),Math.sqrt(rt)]}static normalizeRect(st){const Ge=st.slice(0);return st[0]>st[2]&&(Ge[0]=st[2],Ge[2]=st[0]),st[1]>st[3]&&(Ge[1]=st[3],Ge[3]=st[1]),Ge}static intersect(st,Ge){function Ze(_t,Ut){return _t-Ut}const je=[st[0],st[2],Ge[0],Ge[2]].sort(Ze),Ue=[st[1],st[3],Ge[1],Ge[3]].sort(Ze),ct=[];return st=xe.normalizeRect(st),Ge=xe.normalizeRect(Ge),je[0]===st[0]&&je[1]===Ge[0]||je[0]===Ge[0]&&je[1]===st[0]?(ct[0]=je[1],ct[2]=je[2],Ue[0]===st[1]&&Ue[1]===Ge[1]||Ue[0]===Ge[1]&&Ue[1]===st[1]?(ct[1]=Ue[1],ct[3]=Ue[2],ct):null):null}}he.Util=xe;const Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],Dt=function(){const st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(Ze,je,Ue=!1){if(!Ue&&URL.createObjectURL){const _t=new Blob([Ze],{type:je});return URL.createObjectURL(_t)}let ct=`data:${je};base64,`;for(let _t=0,Ut=Ze.length;_t<Ut;_t+=3){const jt=255&Ze[_t],rt=255&Ze[_t+1],Pe=255&Ze[_t+2];ct+=st[jt>>2]+st[(3&jt)<<4|rt>>4]+st[_t+1<Ut?(15&rt)<<2|Pe>>6:64]+st[_t+2<Ut?63&Pe:64]}return ct}}();he.createObjectURL=Dt},function(yt,he,Oe){"use strict";Oe(4)},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.isNodeJS=void 0;const le=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);he.isNodeJS=le},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory,DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(yt){createPDFNetworkStream=yt}function getDocument(yt){const he=new PDFDocumentLoadingTask;let Oe;if("string"==typeof yt)Oe={url:yt};else if((0,_util.isArrayBuffer)(yt))Oe={data:yt};else if(yt instanceof PDFDataRangeTransport)Oe={range:yt};else{if("object"!=typeof yt)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!yt.url&&!yt.data&&!yt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");Oe=yt}const le=Object.create(null);let Ee=null,se=null;for(const k in Oe)if("url"===k&&typeof window<"u")le[k]=new URL(Oe[k],window.location).href;else if("range"!==k)if("worker"!==k)if("data"!==k||Oe[k]instanceof Uint8Array)le[k]=Oe[k];else{const fe=Oe[k];if("string"==typeof fe)le[k]=(0,_util.stringToBytes)(fe);else if("object"!=typeof fe||null===fe||isNaN(fe.length)){if(!(0,_util.isArrayBuffer)(fe))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");le[k]=new Uint8Array(fe)}else le[k]=new Uint8Array(fe)}else se=Oe[k];else Ee=Oe[k];if(le.rangeChunkSize=le.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,le.CMapReaderFactory=le.CMapReaderFactory||DefaultCMapReaderFactory,le.ignoreErrors=!0!==le.stopAtErrors,le.fontExtraProperties=!0===le.fontExtraProperties,le.pdfBug=!0===le.pdfBug,Number.isInteger(le.maxImageSize)||(le.maxImageSize=-1),"boolean"!=typeof le.isEvalSupported&&(le.isEvalSupported=!0),"boolean"!=typeof le.disableFontFace&&(le.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),typeof le.ownerDocument>"u"&&(le.ownerDocument=globalThis.document),"boolean"!=typeof le.disableRange&&(le.disableRange=!1),"boolean"!=typeof le.disableStream&&(le.disableStream=!1),"boolean"!=typeof le.disableAutoFetch&&(le.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(le.verbosity),!se){const k={verbosity:le.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};se=k.port?PDFWorker.fromPort(k):new PDFWorker(k),he._worker=se}const y=he.docId;return se.promise.then(function(){if(he.destroyed)throw new Error("Loading aborted");const k=_fetchDocument(se,le,Ee,y),fe=new Promise(function(ee){let e;Ee?e=new _transport_stream.PDFDataTransportStream({length:le.length,initialData:le.initialData,progressiveDone:le.progressiveDone,disableRange:le.disableRange,disableStream:le.disableStream},Ee):le.data||(e=createPDFNetworkStream({url:le.url,length:le.length,httpHeaders:le.httpHeaders,withCredentials:le.withCredentials,rangeChunkSize:le.rangeChunkSize,disableRange:le.disableRange,disableStream:le.disableStream})),ee(e)});return Promise.all([k,fe]).then(function([ee,e]){if(he.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(y,ee,se.port);V.postMessageTransfers=se.postMessageTransfers;const H=new WorkerTransport(V,he,e,le);he._transport=H,V.send("Ready",null)})}).catch(he._capability.reject),he}function _fetchDocument(yt,he,Oe,le){return yt.destroyed?Promise.reject(new Error("Worker was destroyed")):(Oe&&(he.length=Oe.length,he.initialData=Oe.initialData,he.progressiveDone=Oe.progressiveDone),yt.messageHandler.sendWithPromise("GetDocRequest",{docId:le,apiVersion:"2.6.347",source:{data:he.data,url:he.url,password:he.password,disableAutoFetch:he.disableAutoFetch,rangeChunkSize:he.rangeChunkSize,length:he.length},maxImageSize:he.maxImageSize,disableFontFace:he.disableFontFace,postMessageTransfers:yt.postMessageTransfers,docBaseUrl:he.docBaseUrl,ignoreErrors:he.ignoreErrors,isEvalSupported:he.isEvalSupported,fontExtraProperties:he.fontExtraProperties}).then(function(Ee){if(yt.destroyed)throw new Error("Worker was destroyed");return Ee}))}const PDFDocumentLoadingTask=function(){let he=0;return class Oe{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+he++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}}();class PDFDataRangeTransport{constructor(he,Oe,le=!1){this.length=he,this.initialData=Oe,this.progressiveDone=le,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(he){this._rangeListeners.push(he)}addProgressListener(he){this._progressListeners.push(he)}addProgressiveReadListener(he){this._progressiveReadListeners.push(he)}addProgressiveDoneListener(he){this._progressiveDoneListeners.push(he)}onDataRange(he,Oe){for(const le of this._rangeListeners)le(he,Oe)}onDataProgress(he,Oe){this._readyCapability.promise.then(()=>{for(const le of this._progressListeners)le(he,Oe)})}onDataProgressiveRead(he){this._readyCapability.promise.then(()=>{for(const Oe of this._progressiveReadListeners)Oe(he)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const he of this._progressiveDoneListeners)he()})}transportReady(){this._readyCapability.resolve()}requestDataRange(he,Oe){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(he,Oe){this._pdfInfo=he,this._transport=Oe}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(he){return this._transport.getPage(he)}getPageIndex(he){return this._transport.getPageIndex(he)}getDestinations(){return this._transport.getDestinations()}getDestination(he){return this._transport.getDestination(he)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(he){return this._transport.saveDocument(he)}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(he,Oe,le,Ee,se=!1){this._pageIndex=he,this._pageInfo=Oe,this._ownerDocument=Ee,this._transport=le,this._stats=se?new _display_utils.StatTimer:null,this._pdfBug=se,this.commonObjs=le.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:he,rotation:Oe=this.rotate,offsetX:le=0,offsetY:Ee=0,dontFlip:se=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:he,rotation:Oe,offsetX:le,offsetY:Ee,dontFlip:se})}getAnnotations({intent:he=null}={}){return(!this.annotationsPromise||this.annotationsIntent!==he)&&(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,he),this.annotationsIntent=he),this.annotationsPromise}render({canvasContext:he,viewport:Oe,intent:le="display",enableWebGL:Ee=!1,renderInteractiveForms:se=!1,transform:y=null,imageLayer:k=null,canvasFactory:fe=null,background:ee=null,annotationStorage:e=null,optionalContentConfigPromise:V=null}){this._stats&&this._stats.time("Overall");const H="print"===le?"print":"display";this.pendingCleanup=!1,V||(V=this._transport.getOptionalContentConfig());let te=this._intentStates.get(H);te||(te=Object.create(null),this._intentStates.set(H,te)),te.streamReaderCancelTimeout&&(clearTimeout(te.streamReaderCancelTimeout),te.streamReaderCancelTimeout=null);const re=fe||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=new _webgl.WebGLContext({enable:Ee});te.displayReadyCapability||(te.displayReadyCapability=(0,_util.createPromiseCapability)(),te.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:H,renderInteractiveForms:!0===se,annotationStorage:e&&e.getAll()||null}));const c=oe=>{const W=te.renderTasks.indexOf($);W>=0&&te.renderTasks.splice(W,1),(this.cleanupAfterRender||"print"===H)&&(this.pendingCleanup=!0),this._tryCleanup(),oe?($.capability.reject(oe),this._abortOperatorList({intentState:te,reason:oe})):$.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},$=new InternalRenderTask({callback:c,params:{canvasContext:he,viewport:Oe,transform:y,imageLayer:k,background:ee},objs:this.objs,commonObjs:this.commonObjs,operatorList:te.operatorList,pageIndex:this._pageIndex,canvasFactory:re,webGLContext:f,useRequestAnimationFrame:"print"!==H,pdfBug:this._pdfBug});te.renderTasks||(te.renderTasks=[]),te.renderTasks.push($);const ae=$.task;return Promise.all([te.displayReadyCapability.promise,V]).then(([oe,W])=>{this.pendingCleanup?c():(this._stats&&this._stats.time("Rendering"),$.initializeGraphics({transparency:oe,optionalContentConfig:W}),$.operatorListChanged())}).catch(c),ae}getOperatorList(){const Oe="oplist";let Ee,le=this._intentStates.get(Oe);return le||(le=Object.create(null),this._intentStates.set(Oe,le)),le.opListReadCapability||(Ee=Object.create(null),Ee.operatorListChanged=function he(){if(le.operatorList.lastChunk){le.opListReadCapability.resolve(le.operatorList);const se=le.renderTasks.indexOf(Ee);se>=0&&le.renderTasks.splice(se,1)}},le.opListReadCapability=(0,_util.createPromiseCapability)(),le.renderTasks=[],le.renderTasks.push(Ee),le.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:Oe})),le.opListReadCapability.promise}streamTextContent({normalizeWhitespace:he=!1,disableCombineTextItems:Oe=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===he,combineTextItems:!0!==Oe},{highWaterMark:100,size:Ee=>Ee.items.length})}getTextContent(he={}){const Oe=this.streamTextContent(he);return new Promise(function(le,Ee){const y=Oe.getReader(),k={items:[],styles:Object.create(null)};!function se(){y.read().then(function({value:fe,done:ee}){ee?le(k):(Object.assign(k.styles,fe.styles),k.items.push(...fe.items),se())},Ee)}()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const he=[];for(const[Oe,le]of this._intentStates)if(this._abortOperatorList({intentState:le,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==Oe)for(const Ee of le.renderTasks)he.push(Ee.completed),Ee.cancel();return this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(he)}cleanup(he=!1){return this.pendingCleanup=!0,this._tryCleanup(he)}_tryCleanup(he=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:Oe,operatorList:le}of this._intentStates.values())if(0!==Oe.length||!le.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,he&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(he,Oe){const le=this._intentStates.get(Oe);le&&(this._stats&&this._stats.timeEnd("Page Request"),le.displayReadyCapability&&le.displayReadyCapability.resolve(he))}_renderPageChunk(he,Oe){for(let le=0,Ee=he.length;le<Ee;le++)Oe.operatorList.fnArray.push(he.fnArray[le]),Oe.operatorList.argsArray.push(he.argsArray[le]);Oe.operatorList.lastChunk=he.lastChunk;for(let le=0;le<Oe.renderTasks.length;le++)Oe.renderTasks[le].operatorListChanged();he.lastChunk&&this._tryCleanup()}_pumpOperatorList(he){(0,_util.assert)(he.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const le=this._transport.messageHandler.sendWithStream("GetOperatorList",he).getReader(),Ee=this._intentStates.get(he.intent);Ee.streamReader=le;const se=()=>{le.read().then(({value:y,done:k})=>{k?Ee.streamReader=null:this._transport.destroyed||(this._renderPageChunk(y,Ee),se())},y=>{if(Ee.streamReader=null,!this._transport.destroyed){if(Ee.operatorList){Ee.operatorList.lastChunk=!0;for(let k=0;k<Ee.renderTasks.length;k++)Ee.renderTasks[k].operatorListChanged();this._tryCleanup()}if(Ee.displayReadyCapability)Ee.displayReadyCapability.reject(y);else{if(!Ee.opListReadCapability)throw y;Ee.opListReadCapability.reject(y)}}})};se()}_abortOperatorList({intentState:he,reason:Oe,force:le=!1}){if((0,_util.assert)(Oe instanceof Error||"object"==typeof Oe&&null!==Oe,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),he.streamReader){if(!le){if(0!==he.renderTasks.length)return;if(Oe instanceof _display_utils.RenderingCancelledException)return void(he.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:he,reason:Oe,force:!0}),he.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(he.streamReader.cancel(new _util.AbortException(Oe&&Oe.message)),he.streamReader=null,!this._transport.destroyed){for(const[Ee,se]of this._intentStates)if(se===he){this._intentStates.delete(Ee);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(he=!0){this._listeners=[],this._defer=he,this._deferred=Promise.resolve(void 0)}postMessage(he,Oe){if(!this._defer)return void this._listeners.forEach(y=>{y.call(this,{data:he})});const Ee=new WeakMap,se={data:function le(y){if("object"!=typeof y||null===y)return y;if(Ee.has(y))return Ee.get(y);let k,fe;if((k=y.buffer)&&(0,_util.isArrayBuffer)(k))return fe=Oe&&Oe.includes(k)?new y.constructor(k,y.byteOffset,y.byteLength):new y.constructor(y),Ee.set(y,fe),fe;fe=Array.isArray(y)?[]:{},Ee.set(y,fe);for(const ee in y){let e,V=y;for(;!(e=Object.getOwnPropertyDescriptor(V,ee));)V=Object.getPrototypeOf(V);if(!(typeof e.value>"u")){if("function"==typeof e.value){if(y.hasOwnProperty&&y.hasOwnProperty(ee))throw new Error(`LoopbackPort.postMessage - cannot clone: ${y[ee]}`);continue}fe[ee]=le(e.value)}}return fe}(he)};this._deferred.then(()=>{this._listeners.forEach(y=>{y.call(this,se)})})}addEventListener(he,Oe){this._listeners.push(Oe)}removeEventListener(he,Oe){const le=this._listeners.indexOf(Oe);this._listeners.splice(le,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const yt=document.currentScript&&document.currentScript.src;yt&&(fallbackWorkerSrc=yt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc<"u")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let yt;try{yt=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch{}return yt||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler});return function yt(){return _ref2.apply(this,arguments)}}();return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(yt){return URL.createObjectURL(new Blob(["importScripts('"+yt+"');"]))}class PDFWorker{constructor({name:he=null,port:Oe=null,verbosity:le=(0,_util.getVerbosityLevel)()}={}){if(Oe&&pdfWorkerPorts.has(Oe))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=he,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=le,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,Oe)return pdfWorkerPorts.set(Oe,this),void this._initializeFromPort(Oe);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(he){this._port=he,this._messageHandler=new _message_handler.MessageHandler("main","worker",he),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let he=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,he)||(he=createCDNWrapper(new URL(he,window.location).href));const Oe=new Worker(he),le=new _message_handler.MessageHandler("main","worker",Oe),Ee=()=>{Oe.removeEventListener("error",se),le.destroy(),Oe.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},se=()=>{this._webWorker||Ee()};Oe.addEventListener("error",se),le.on("test",k=>{Oe.removeEventListener("error",se),this.destroyed?Ee():k?(this._messageHandler=le,this._port=Oe,this._webWorker=Oe,k.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),le.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),le.destroy(),Oe.terminate())}),le.on("ready",k=>{if(Oe.removeEventListener("error",se),this.destroyed)Ee();else try{y()}catch{this._setupFakeWorker()}});const y=()=>{const k=new Uint8Array([this.postMessageTransfers?255:0]);try{le.send("test",k,[k.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),k[0]=0,le.send("test",k)}};return void y()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(he=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const Oe=new LoopbackPort;this._port=Oe;const le="fake"+nextFakeWorkerId++,Ee=new _message_handler.MessageHandler(le+"_worker",le,Oe);he.setup(Ee,Oe);const se=new _message_handler.MessageHandler(le,le+"_worker",Oe);this._messageHandler=se,this._readyCapability.resolve(),se.send("configure",{verbosity:this.verbosity})}).catch(he=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${he.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(he){if(!he||!he.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(he.port)?pdfWorkerPorts.get(he.port):new PDFWorker(he)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(he,Oe,le,Ee){this.messageHandler=he,this.loadingTask=Oe,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:Oe.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:Ee.ownerDocument}),this._params=Ee,this.CMapReaderFactory=new Ee.CMapReaderFactory({baseUrl:Ee.cMapUrl,isCompressed:Ee.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=le,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const he=[];this.pageCache.forEach(function(le){le&&he.push(le._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;const Oe=this.messageHandler.sendWithPromise("Terminate",null);return he.push(Oe),Promise.all(he).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:he,loadingTask:Oe}=this;he.on("GetReader",(le,Ee)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=se=>{this._lastProgress={loaded:se.loaded,total:se.total}},Ee.onPull=()=>{this._fullReader.read().then(function({value:se,done:y}){y?Ee.close():((0,_util.assert)((0,_util.isArrayBuffer)(se),"GetReader - expected an ArrayBuffer."),Ee.enqueue(new Uint8Array(se),1,[se]))}).catch(se=>{Ee.error(se)})},Ee.onCancel=se=>{this._fullReader.cancel(se),Ee.ready.catch(y=>{if(!this.destroyed)throw y})}}),he.on("ReaderHeadersReady",le=>{const Ee=(0,_util.createPromiseCapability)(),se=this._fullReader;return se.headersReady.then(()=>{(!se.isStreamingSupported||!se.isRangeSupported)&&(this._lastProgress&&Oe.onProgress&&Oe.onProgress(this._lastProgress),se.onProgress=y=>{Oe.onProgress&&Oe.onProgress({loaded:y.loaded,total:y.total})}),Ee.resolve({isStreamingSupported:se.isStreamingSupported,isRangeSupported:se.isRangeSupported,contentLength:se.contentLength})},Ee.reject),Ee.promise}),he.on("GetRangeReader",(le,Ee)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const se=this._networkStream.getRangeReader(le.begin,le.end);se?(Ee.onPull=()=>{se.read().then(function({value:y,done:k}){k?Ee.close():((0,_util.assert)((0,_util.isArrayBuffer)(y),"GetRangeReader - expected an ArrayBuffer."),Ee.enqueue(new Uint8Array(y),1,[y]))}).catch(y=>{Ee.error(y)})},Ee.onCancel=y=>{se.cancel(y),Ee.ready.catch(k=>{if(!this.destroyed)throw k})}):Ee.close()}),he.on("GetDoc",({pdfInfo:le})=>{this._numPages=le.numPages,Oe._capability.resolve(new PDFDocumentProxy(le,this))}),he.on("DocException",function(le){let Ee;switch(le.name){case"PasswordException":Ee=new _util.PasswordException(le.message,le.code);break;case"InvalidPDFException":Ee=new _util.InvalidPDFException(le.message);break;case"MissingPDFException":Ee=new _util.MissingPDFException(le.message);break;case"UnexpectedResponseException":Ee=new _util.UnexpectedResponseException(le.message,le.status);break;case"UnknownErrorException":Ee=new _util.UnknownErrorException(le.message,le.details)}Ee instanceof Error||(0,_util.warn)("DocException - expected a valid Error."),Oe._capability.reject(Ee)}),he.on("PasswordRequest",le=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),Oe.onPassword){const Ee=se=>{this._passwordCapability.resolve({password:se})};try{Oe.onPassword(Ee,le.code)}catch(se){this._passwordCapability.reject(se)}}else this._passwordCapability.reject(new _util.PasswordException(le.message,le.code));return this._passwordCapability.promise}),he.on("DataLoaded",le=>{Oe.onProgress&&Oe.onProgress({loaded:le.length,total:le.length}),this.downloadInfoCapability.resolve(le)}),he.on("StartRenderPage",le=>{this.destroyed||this.pageCache[le.pageIndex]._startRenderPage(le.transparency,le.intent)}),he.on("commonobj",le=>{if(this.destroyed)return;const[Ee,se,y]=le;if(!this.commonObjs.has(Ee))switch(se){case"Font":const k=this._params;if("error"in y){const e=y.error;(0,_util.warn)(`Error during font loading: ${e}`),this.commonObjs.resolve(Ee,e);break}let fe=null;k.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(fe={registerFont(e,V){globalThis.FontInspector.fontAdded(e,V)}});const ee=new _font_loader.FontFaceObject(y,{isEvalSupported:k.isEvalSupported,disableFontFace:k.disableFontFace,ignoreErrors:k.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:fe});this.fontLoader.bind(ee).catch(e=>he.sendWithPromise("FontFallback",{id:Ee})).finally(()=>{!k.fontExtraProperties&&ee.data&&(ee.data=null),this.commonObjs.resolve(Ee,ee)});break;case"FontPath":case"Image":this.commonObjs.resolve(Ee,y);break;default:throw new Error(`Got unknown common object type ${se}`)}}),he.on("obj",le=>{if(this.destroyed)return;const[Ee,se,y,k]=le,fe=this.pageCache[se];if(!fe.objs.has(Ee)){if("Image"!==y)throw new Error(`Got unknown object type ${y}`);fe.objs.resolve(Ee,k),k&&"data"in k&&k.data.length>8e6&&(fe.cleanupAfterRender=!0)}}),he.on("DocProgress",le=>{this.destroyed||Oe.onProgress&&Oe.onProgress({loaded:le.loaded,total:le.total})}),he.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),he.on("FetchBuiltInCMap",(le,Ee)=>{if(this.destroyed)return void Ee.error(new Error("Worker was destroyed"));let se=!1;Ee.onPull=()=>{se?Ee.close():(se=!0,this.CMapReaderFactory.fetch(le).then(function(y){Ee.enqueue(y,1,[y.cMapData.buffer])}).catch(function(y){Ee.error(y)}))}})}_onUnsupportedFeature({featureId:he}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(he)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(he){if(!Number.isInteger(he)||he<=0||he>this._numPages)return Promise.reject(new Error("Invalid page request"));const Oe=he-1;if(Oe in this.pagePromises)return this.pagePromises[Oe];const le=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Oe}).then(Ee=>{if(this.destroyed)throw new Error("Transport destroyed");const se=new PDFPageProxy(Oe,Ee,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[Oe]=se,se});return this.pagePromises[Oe]=le,le}getPageIndex(he){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:he}).catch(function(Oe){return Promise.reject(new Error(Oe))})}getAnnotations(he,Oe){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:he,intent:Oe})}saveDocument(he){return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:he&&he.getAll()||null,filename:this._fullReader?this._fullReader.filename:null}).finally(()=>{he&&he.resetModified()})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(he){return"string"!=typeof he?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:he})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(he=>new _optional_content_config.OptionalContentConfig(he))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(he=>({info:he[0],metadata:he[1]?new _metadata.Metadata(he[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let he=0,Oe=this.pageCache.length;he<Oe;he++){const le=this.pageCache[he];if(le&&!le.cleanup())throw new Error(`startCleanup: Page ${he+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const he=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:he.disableAutoFetch,disableFontFace:he.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(he){return this._objs[he]?this._objs[he]:this._objs[he]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(he,Oe=null){if(Oe)return this._ensureObj(he).capability.promise.then(Oe),null;const le=this._objs[he];if(!le||!le.resolved)throw new Error(`Requesting object that isn't resolved yet ${he}.`);return le.data}has(he){const Oe=this._objs[he];return!!Oe&&Oe.resolved}resolve(he,Oe){const le=this._ensureObj(he);le.resolved=!0,le.data=Oe,le.capability.resolve(Oe)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(he){this._internalRenderTask=he,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function yt(){const he=new WeakSet;return class Oe{constructor({callback:Ee,params:se,objs:y,commonObjs:k,operatorList:fe,pageIndex:ee,canvasFactory:e,webGLContext:V,useRequestAnimationFrame:H=!1,pdfBug:te=!1}){this.callback=Ee,this.params=se,this.objs=y,this.commonObjs=k,this.operatorListIdx=null,this.operatorList=fe,this._pageIndex=ee,this.canvasFactory=e,this.webGLContext=V,this._pdfBug=te,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===H&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=se.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Ee=!1,optionalContentConfig:se}){if(this.cancelled)return;if(this._canvas){if(he.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");he.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:y,viewport:k,transform:fe,imageLayer:ee,background:e}=this.params;this.gfx=new _canvas.CanvasGraphics(y,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,ee,se),this.gfx.beginDrawing({transform:fe,viewport:k,transparency:Ee,background:e}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(Ee=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&he.delete(this._canvas),this.callback(Ee||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}_next(){var Ee=this;return _asyncToGenerator(function*(){Ee.cancelled||(Ee.operatorListIdx=Ee.gfx.executeOperatorList(Ee.operatorList,Ee.operatorListIdx,Ee._continueBound,Ee.stepper),Ee.operatorListIdx===Ee.operatorList.argsArray.length&&(Ee.running=!1,Ee.operatorList.lastChunk&&(Ee.gfx.endDrawing(),Ee._canvas&&he.delete(Ee._canvas),Ee.callback())))})()}}}(),version="2.6.347";exports.version=version;const build="3be9c65f";exports.build=build},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.FontLoader=he.FontFaceObject=void 0;var le=Oe(2);class Ee{constructor({docId:fe,onUnsupportedFeature:ee,ownerDocument:e=globalThis.document}){this.constructor===Ee&&(0,le.unreachable)("Cannot initialize BaseFontLoader."),this.docId=fe,this._onUnsupportedFeature=ee,this._document=e,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(fe){this.nativeFontFaces.push(fe),this._document.fonts.add(fe)}insertRule(fe){let ee=this.styleElement;ee||(ee=this.styleElement=this._document.createElement("style"),ee.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(ee));const e=ee.sheet;e.insertRule(fe,e.cssRules.length)}clear(){this.nativeFontFaces.forEach(fe=>{this._document.fonts.delete(fe)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(fe){var ee=this;return _asyncToGenerator(function*(){if(fe.attached||fe.missingFile)return;if(fe.attached=!0,ee.isFontLoadingAPISupported){const V=fe.createNativeFontFace();if(V){ee.addNativeFontFace(V);try{yield V.loaded}catch(H){throw ee._onUnsupportedFeature({featureId:le.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,le.warn)(`Failed to load font '${V.family}': '${H}'.`),fe.disableFontFace=!0,H}}return}const e=fe.createFontFaceRule();if(e){if(ee.insertRule(e),ee.isSyncFontLoadingSupported)return;yield new Promise(V=>{const H=ee._queueLoadingCallback(V);ee._prepareFontLoadEvent([e],[fe],H)})}})()}_queueLoadingCallback(fe){(0,le.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,le.shadow)(this,"isFontLoadingAPISupported",typeof this._document<"u"&&!!this._document.fonts)}get isSyncFontLoadingSupported(){(0,le.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,le.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(fe,ee,e){(0,le.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let se;he.FontLoader=se,he.FontLoader=se=class extends Ee{constructor(fe){super(fe),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let fe=!1;if(typeof navigator>"u")fe=!0;else{const ee=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);ee&&ee[1]>=14&&(fe=!0)}return(0,le.shadow)(this,"isSyncFontLoadingSupported",fe)}_queueLoadingCallback(fe){const e=this.loadingContext,V={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function ee(){for((0,le.assert)(!V.done,"completeRequest() cannot be called twice."),V.done=!0;e.requests.length>0&&e.requests[0].done;){const H=e.requests.shift();setTimeout(H.callback,0)}},callback:fe};return e.requests.push(V),V}get _loadTestFont(){return(0,le.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(fe,ee,e){function V(F,I){return F.charCodeAt(I)<<24|F.charCodeAt(I+1)<<16|F.charCodeAt(I+2)<<8|255&F.charCodeAt(I+3)}function H(F,I,j,E){return F.substring(0,I)+E+F.substring(I+j)}let te,re;const f=this._document.createElement("canvas");f.width=1,f.height=1;const c=f.getContext("2d");let $=0;const oe=`lt${Date.now()}${this.loadTestFontId++}`;let W=this._loadTestFont;W=H(W,976,oe.length,oe);const M=1482184792;let A=V(W,16);for(te=0,re=oe.length-3;te<re;te+=4)A=A-M+V(oe,te)|0;te<oe.length&&(A=A-M+V(oe+"XXX",te)|0),W=H(W,16,4,(0,le.string32)(A));const b=`url(data:font/opentype;base64,${btoa(W)});`;this.insertRule(`@font-face {font-family:"${oe}";src:${b}}`);const C=[];for(te=0,re=ee.length;te<re;te++)C.push(ee[te].loadedName);C.push(oe);const P=this._document.createElement("div");for(P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px",te=0,re=C.length;te<re;++te){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=C[te],P.appendChild(F)}this._document.body.appendChild(P),function ae(F,I){if($++,$>30)return(0,le.warn)("Load test font never loaded."),void I();c.font="30px "+F,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?I():setTimeout(ae.bind(null,F,I))}(oe,()=>{this._document.body.removeChild(P),e.complete()})}},he.FontFaceObject=class y{constructor(fe,{isEvalSupported:ee=!0,disableFontFace:e=!1,ignoreErrors:V=!1,onUnsupportedFeature:H=null,fontRegistry:te=null}){this.compiledGlyphs=Object.create(null);for(const re in fe)this[re]=fe[re];this.isEvalSupported=!1!==ee,this.disableFontFace=!0===e,this.ignoreErrors=!0===V,this._onUnsupportedFeature=H,this.fontRegistry=te}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const fe=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),fe}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const fe=(0,le.bytesToString)(new Uint8Array(this.data)),ee=`url(data:${this.mimetype};base64,${btoa(fe)});`,e=`@font-face {font-family:"${this.loadedName}";src:${ee}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,ee),e}getPathGenerator(fe,ee){if(void 0!==this.compiledGlyphs[ee])return this.compiledGlyphs[ee];let e,V;try{e=fe.get(this.loadedName+"_path_"+ee)}catch(H){if(!this.ignoreErrors)throw H;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:le.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,le.warn)(`getPathGenerator - ignoring character: "${H}".`),this.compiledGlyphs[ee]=function(te,re){}}if(this.isEvalSupported&&le.IsEvalSupportedCached.value){let H,te="";for(let re=0,f=e.length;re<f;re++)V=e[re],H=void 0!==V.args?V.args.join(","):"",te+="c."+V.cmd+"("+H+");\n";return this.compiledGlyphs[ee]=new Function("c","size",te)}return this.compiledGlyphs[ee]=function(H,te){for(let re=0,f=e.length;re<f;re++)V=e[re],"scale"===V.cmd&&(V.args=[te,-te]),H[V.cmd].apply(H,V.args)}}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.NodeCMapReaderFactory=he.NodeCanvasFactory=void 0;var le=Oe(1),Ee=Oe(4),se=Oe(2);let y=class{constructor(){(0,se.unreachable)("Not implemented: NodeCanvasFactory")}};he.NodeCanvasFactory=y;let k=class{constructor(){(0,se.unreachable)("Not implemented: NodeCMapReaderFactory")}};he.NodeCMapReaderFactory=k,Ee.isNodeJS&&(he.NodeCanvasFactory=y=class extends le.BaseCanvasFactory{create(fe,ee){if(fe<=0||ee<=0)throw new Error("Invalid canvas size");const V=__webpack_require__(414).createCanvas(fe,ee);return{canvas:V,context:V.getContext("2d")}}},he.NodeCMapReaderFactory=k=class extends le.BaseCMapReaderFactory{_fetchData(fe,ee){return new Promise((e,V)=>{__webpack_require__(172).readFile(fe,(te,re)=>{!te&&re?e({cMapData:new Uint8Array(re),compressionType:ee}):V(new Error(te))})})}})},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.AnnotationStorage=void 0,he.AnnotationStorage=class le{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getOrCreateValue(se,y){return this._storage.has(se)?this._storage.get(se):(this._storage.set(se,y),y)}setValue(se,y){this._storage.get(se)!==y&&this._setModified(),this._storage.set(se,y)}getAll(){return 0===this._storage.size?null:Object.fromEntries(this._storage)}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.apiCompatibilityParams=void 0;var le=Oe(4);const Ee=Object.create(null);le.isNodeJS&&(Ee.disableFontFace=!0);const se=Object.freeze(Ee);he.apiCompatibilityParams=se},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.CanvasGraphics=void 0;var le=Oe(2),Ee=Oe(11),k=4096,V=16;function H($){$.mozCurrentTransform||($._originalSave=$.save,$._originalRestore=$.restore,$._originalRotate=$.rotate,$._originalScale=$.scale,$._originalTranslate=$.translate,$._originalTransform=$.transform,$._originalSetTransform=$.setTransform,$._transformMatrix=$._transformMatrix||[1,0,0,1,0,0],$._transformStack=[],Object.defineProperty($,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty($,"mozCurrentTransformInverse",{get:function(){var oe=this._transformMatrix,W=oe[0],N=oe[1],O=oe[2],M=oe[3],A=oe[4],b=oe[5],q=W*M-N*O,C=N*O-W*M;return[M/q,N/C,O/C,W/q,(M*A-O*b)/C,(N*A-W*b)/q]}}),$.save=function(){var oe=this._transformMatrix;this._transformStack.push(oe),this._transformMatrix=oe.slice(0,6),this._originalSave()},$.restore=function(){var oe=this._transformStack.pop();oe&&(this._transformMatrix=oe,this._originalRestore())},$.translate=function(oe,W){var N=this._transformMatrix;N[4]=N[0]*oe+N[2]*W+N[4],N[5]=N[1]*oe+N[3]*W+N[5],this._originalTranslate(oe,W)},$.scale=function(oe,W){var N=this._transformMatrix;N[0]=N[0]*oe,N[1]=N[1]*oe,N[2]=N[2]*W,N[3]=N[3]*W,this._originalScale(oe,W)},$.transform=function(oe,W,N,O,M,A){var b=this._transformMatrix;this._transformMatrix=[b[0]*oe+b[2]*W,b[1]*oe+b[3]*W,b[0]*N+b[2]*O,b[1]*N+b[3]*O,b[0]*M+b[2]*A+b[4],b[1]*M+b[3]*A+b[5]],$._originalTransform(oe,W,N,O,M,A)},$.setTransform=function(oe,W,N,O,M,A){this._transformMatrix=[oe,W,N,O,M,A],$._originalSetTransform(oe,W,N,O,M,A)},$.rotate=function(oe){var W=Math.cos(oe),N=Math.sin(oe),O=this._transformMatrix;this._transformMatrix=[O[0]*W+O[2]*N,O[1]*W+O[3]*N,O[0]*-N+O[2]*W,O[1]*-N+O[3]*W,O[4],O[5]],this._originalRotate(oe)})}var te=function(){function ae(oe){this.canvasFactory=oe,this.cache=Object.create(null)}return ae.prototype={getCanvas:function(W,N,O,M){var A;return void 0!==this.cache[W]?(this.canvasFactory.reset(A=this.cache[W],N,O),A.context.setTransform(1,0,0,1,0,0)):(A=this.canvasFactory.create(N,O),this.cache[W]=A),M&&H(A.context),A},clear(){for(var oe in this.cache)this.canvasFactory.destroy(this.cache[oe]),delete this.cache[oe]}},ae}(),f=function(){function ae(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=le.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=le.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=le.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return ae.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(W,N){this.x=W,this.y=N}},ae}(),c=function(){function W(m,_,R,G,K,U,z){this.ctx=m,this.current=new f,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=R,this.canvasFactory=G,this.webGLContext=K,this.imageLayer=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=z,this.cachedCanvases=new te(this.canvasFactory),m&&H(m),this._cachedGetSinglePixelWidth=null}function N(m,_,R=null){if(typeof ImageData<"u"&&_ instanceof ImageData)return void m.putImageData(_,0,0);var J,pe,ye,Te,_e,G=_.height,K=_.width,U=G%V,z=(G-U)/V,L=0===U?z:z+1,S=m.createImageData(K,V),B=0,ie=_.data,ce=S.data;let we,De,xe,Ce;if(R)switch(R.length){case 1:we=R[0],De=R[0],xe=R[0],Ce=R[0];break;case 4:we=R[0],De=R[1],xe=R[2],Ce=R[3]}if(_.kind===le.ImageKind.GRAYSCALE_1BPP){var Me=ie.byteLength,Ne=new Uint32Array(ce.buffer,0,ce.byteLength>>2),We=Ne.length,Xe=K+7>>3,Qe=4294967295,Ye=le.IsLittleEndianCached.value?4278190080:255;for(Ce&&255===Ce[0]&&0===Ce[255]&&([Qe,Ye]=[Ye,Qe]),pe=0;pe<L;pe++){for(Te=pe<z?V:U,J=0,ye=0;ye<Te;ye++){var Je=Me-B;let Dt=0;for(var He=Je>Xe?K:8*Je-7,it=-8&He,dt=0,pt=0;Dt<it;Dt+=8)pt=ie[B++],Ne[J++]=128&pt?Qe:Ye,Ne[J++]=64&pt?Qe:Ye,Ne[J++]=32&pt?Qe:Ye,Ne[J++]=16&pt?Qe:Ye,Ne[J++]=8&pt?Qe:Ye,Ne[J++]=4&pt?Qe:Ye,Ne[J++]=2&pt?Qe:Ye,Ne[J++]=1&pt?Qe:Ye;for(;Dt<He;Dt++)0===dt&&(pt=ie[B++],dt=128),Ne[J++]=pt&dt?Qe:Ye,dt>>=1}for(;J<We;)Ne[J++]=0;m.putImageData(S,0,pe*V)}}else if(_.kind===le.ImageKind.RGBA_32BPP){const Dt=!!(we||De||xe);for(ye=0,_e=K*V*4,pe=0;pe<z;pe++){if(ce.set(ie.subarray(B,B+_e)),B+=_e,Dt)for(let et=0;et<_e;et+=4)we&&(ce[et+0]=we[ce[et+0]]),De&&(ce[et+1]=De[ce[et+1]]),xe&&(ce[et+2]=xe[ce[et+2]]);m.putImageData(S,0,ye),ye+=V}if(pe<L){if(ce.set(ie.subarray(B,B+(_e=K*U*4))),Dt)for(let et=0;et<_e;et+=4)we&&(ce[et+0]=we[ce[et+0]]),De&&(ce[et+1]=De[ce[et+1]]),xe&&(ce[et+2]=xe[ce[et+2]]);m.putImageData(S,0,ye)}}else{if(_.kind!==le.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${_.kind}`);{const Dt=!!(we||De||xe);for(_e=K*(Te=V),pe=0;pe<L;pe++){for(pe>=z&&(_e=K*(Te=U)),J=0,ye=_e;ye--;)ce[J++]=ie[B++],ce[J++]=ie[B++],ce[J++]=ie[B++],ce[J++]=255;if(Dt)for(let et=0;et<J;et+=4)we&&(ce[et+0]=we[ce[et+0]]),De&&(ce[et+1]=De[ce[et+1]]),xe&&(ce[et+2]=xe[ce[et+2]]);m.putImageData(S,0,pe*V)}}}}function O(m,_){for(var R=_.height,G=_.width,K=R%V,U=(R-K)/V,z=0===K?U:U+1,L=m.createImageData(G,V),S=0,B=_.data,J=L.data,ie=0;ie<z;ie++){for(var ce=ie<U?V:K,pe=3,ye=0;ye<ce;ye++)for(var Te=0,_e=0;_e<G;_e++){if(!Te){var we=B[S++];Te=128}J[pe]=we&Te?0:255,pe+=4,Te>>=1}m.putImageData(L,0,ie*V)}}function M(m,_){for(var R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],G=0,K=R.length;G<K;G++){var U=R[G];void 0!==m[U]&&(_[U]=m[U])}void 0!==m.setLineDash&&(_.setLineDash(m.getLineDash()),_.lineDashOffset=m.lineDashOffset)}function A(m){m.strokeStyle="#000000",m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",void 0!==m.setLineDash&&(m.setLineDash([]),m.lineDashOffset=0)}function b(m,_,R,G){for(var K=m.length,U=3;U<K;U+=4){var z=m[U];if(0===z)m[U-3]=_,m[U-2]=R,m[U-1]=G;else if(z<255){var L=255-z;m[U-3]=m[U-3]*z+_*L>>8,m[U-2]=m[U-2]*z+R*L>>8,m[U-1]=m[U-1]*z+G*L>>8}}}function q(m,_,R){for(var G=m.length,U=3;U<G;U+=4)_[U]=_[U]*(R?R[m[U]]:m[U])*.00392156862745098|0}function C(m,_,R){for(var G=m.length,K=3;K<G;K+=4){var U=77*m[K-3]+152*m[K-2]+28*m[K-1];_[K]=R?_[K]*R[U>>8]>>8:_[K]*U>>16}}function F(m,_,R,G){var K=_.canvas,U=_.context;m.setTransform(_.scaleX,0,0,_.scaleY,_.offsetX,_.offsetY);var z=_.backdrop||null;if(!_.transferMap&&G.isEnabled){const L=G.composeSMask({layer:R.canvas,mask:K,properties:{subtype:_.subtype,backdrop:z}});return m.setTransform(1,0,0,1,0,0),void m.drawImage(L,_.offsetX,_.offsetY)}(function P(m,_,R,G,K,U,z){var ie,L=!!U,S=L?U[0]:0,B=L?U[1]:0,J=L?U[2]:0;ie="Luminosity"===K?C:q;for(var pe=Math.min(G,Math.ceil(1048576/R)),ye=0;ye<G;ye+=pe){var Te=Math.min(pe,G-ye),_e=m.getImageData(0,ye,R,Te),we=_.getImageData(0,ye,R,Te);L&&b(_e.data,S,B,J),ie(_e.data,we.data,z),m.putImageData(we,0,ye)}})(U,R,K.width,K.height,_.subtype,z,_.transferMap),m.drawImage(K,0,0)}var I=["butt","round","square"],j=["miter","round","bevel"],E={},x={};for(var p in W.prototype={beginDrawing({transform:m,viewport:_,transparency:R=!1,background:G=null}){var K=this.ctx.canvas.width,U=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=G||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,K,U),this.ctx.restore(),R){var z=this.cachedCanvases.getCanvas("transparent",K,U,!0);this.compositeCtx=this.ctx,this.transparentCanvas=z.canvas,this.ctx=z.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),A(this.ctx),m&&this.ctx.transform.apply(this.ctx,m),this.ctx.transform.apply(this.ctx,_.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(_,R,G,K){var U=_.argsArray,z=_.fnArray,L=R||0,S=U.length;if(S===L)return L;for(var ye,B=S-L>10&&"function"==typeof G,J=B?Date.now()+15:0,ie=0,ce=this.commonObjs,pe=this.objs;;){if(void 0!==K&&L===K.nextBreakPoint)return K.breakIt(L,G),L;if((ye=z[L])!==le.OPS.dependency)this[ye].apply(this,U[L]);else for(const Te of U[L]){const _e=Te.startsWith("g_")?ce:pe;if(!_e.has(Te))return _e.get(Te,G),L}if(++L===S)return L;if(B&&++ie>10){if(Date.now()>J)return G(),L;ie=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(_){this.current.lineWidth=_,this.ctx.lineWidth=_},setLineCap:function(_){this.ctx.lineCap=I[_]},setLineJoin:function(_){this.ctx.lineJoin=j[_]},setMiterLimit:function(_){this.ctx.miterLimit=_},setDash:function(_,R){var G=this.ctx;void 0!==G.setLineDash&&(G.setLineDash(_),G.lineDashOffset=R)},setRenderingIntent(m){},setFlatness(m){},setGState:function(_){for(var R=0,G=_.length;R<G;R++){var K=_[R],z=K[1];switch(K[0]){case"LW":this.setLineWidth(z);break;case"LC":this.setLineCap(z);break;case"LJ":this.setLineJoin(z);break;case"ML":this.setMiterLimit(z);break;case"D":this.setDash(z[0],z[1]);break;case"RI":this.setRenderingIntent(z);break;case"FL":this.setFlatness(z);break;case"Font":this.setFont(z[0],z[1]);break;case"CA":this.current.strokeAlpha=K[1];break;case"ca":this.current.fillAlpha=K[1],this.ctx.globalAlpha=K[1];break;case"BM":this.ctx.globalCompositeOperation=z;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=z?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=z}}},beginSMaskGroup:function(){var _=this.current.activeSMask,U=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,_.canvas.width,_.canvas.height,!0),z=this.ctx,L=z.mozCurrentTransform;this.ctx.save();var S=U.context;S.scale(1/_.scaleX,1/_.scaleY),S.translate(-_.offsetX,-_.offsetY),S.transform.apply(S,L),_.startTransformInverse=S.mozCurrentTransformInverse,M(z,S),this.ctx=S,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(z),this.groupLevel++},suspendSMaskGroup:function(){var _=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),F(this.ctx,this.current.activeSMask,_,this.webGLContext),this.ctx.restore(),this.ctx.save(),M(_,this.ctx),this.current.resumeSMaskCtx=_;var R=le.Util.transform(this.current.activeSMask.startTransformInverse,_.mozCurrentTransform);this.ctx.transform.apply(this.ctx,R),_.save(),_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,_.canvas.width,_.canvas.height),_.restore()},resumeSMaskGroup:function(){var R=this.ctx;this.ctx=this.current.resumeSMaskCtx,this.groupStack.push(R),this.groupLevel++},endSMaskGroup:function(){var _=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),F(this.ctx,this.current.activeSMask,_,this.webGLContext),this.ctx.restore(),M(_,this.ctx);var R=le.Util.transform(this.current.activeSMask.startTransformInverse,_.mozCurrentTransform);this.ctx.transform.apply(this.ctx,R)},save:function(){this.ctx.save();var _=this.current;this.stateStack.push(_),this.current=_.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null!==this.current.activeSMask&&(0===this.stateStack.length||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(_,R,G,K,U,z){this.ctx.transform(_,R,G,K,U,z),this._cachedGetSinglePixelWidth=null},constructPath:function(_,R){for(var G=this.ctx,K=this.current,U=K.x,z=K.y,L=0,S=0,B=_.length;L<B;L++)switch(0|_[L]){case le.OPS.rectangle:U=R[S++],z=R[S++];var J=R[S++],ie=R[S++];0===J&&G.lineWidth<this.getSinglePixelWidth()&&(J=this.getSinglePixelWidth()),0===ie&&G.lineWidth<this.getSinglePixelWidth()&&(ie=this.getSinglePixelWidth());var ce=U+J,pe=z+ie;G.moveTo(U,z),G.lineTo(ce,z),G.lineTo(ce,pe),G.lineTo(U,pe),G.lineTo(U,z),G.closePath();break;case le.OPS.moveTo:U=R[S++],z=R[S++],G.moveTo(U,z);break;case le.OPS.lineTo:U=R[S++],z=R[S++],G.lineTo(U,z);break;case le.OPS.curveTo:G.bezierCurveTo(R[S],R[S+1],R[S+2],R[S+3],U=R[S+4],z=R[S+5]),S+=6;break;case le.OPS.curveTo2:G.bezierCurveTo(U,z,R[S],R[S+1],R[S+2],R[S+3]),U=R[S+2],z=R[S+3],S+=4;break;case le.OPS.curveTo3:G.bezierCurveTo(R[S],R[S+1],U=R[S+2],z=R[S+3],U,z),S+=4;break;case le.OPS.closePath:G.closePath()}K.setCurrentPoint(U,z)},closePath:function(){this.ctx.closePath()},stroke:function(_){_=!(typeof _<"u")||_;var R=this.ctx,G=this.current.strokeColor;if(R.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(G&&G.hasOwnProperty("type")&&"Pattern"===G.type){R.save();const U=le.Util.singularValueDecompose2dScale(R.mozCurrentTransform)[0];R.strokeStyle=G.getPattern(R,this),R.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth*U),R.stroke(),R.restore()}else R.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),R.stroke();_&&this.consumePath(),R.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(_){_=!(typeof _<"u")||_;var R=this.ctx,G=this.current.fillColor,U=!1;this.current.patternFill&&(R.save(),this.baseTransform&&R.setTransform.apply(R,this.baseTransform),R.fillStyle=G.getPattern(R,this),U=!0),this.contentVisible&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),U&&R.restore(),_&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=E},eoClip:function(){this.pendingClip=x},beginText:function(){this.current.textMatrix=le.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var _=this.pendingTextPaths,R=this.ctx;if(void 0!==_){R.save(),R.beginPath();for(var G=0;G<_.length;G++){var K=_[G];R.setTransform.apply(R,K.transform),R.translate(K.x,K.y),K.addToPath(R,K.fontSize)}R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}else R.beginPath()},setCharSpacing:function(_){this.current.charSpacing=_},setWordSpacing:function(_){this.current.wordSpacing=_},setHScale:function(_){this.current.textHScale=_/100},setLeading:function(_){this.current.leading=-_},setFont:function(_,R){var G=this.commonObjs.get(_),K=this.current;if(!G)throw new Error(`Can't find font for ${_}`);if(K.fontMatrix=G.fontMatrix?G.fontMatrix:le.FONT_IDENTITY_MATRIX,(0===K.fontMatrix[0]||0===K.fontMatrix[3])&&(0,le.warn)("Invalid font matrix for font "+_),R<0?(R=-R,K.fontDirection=-1):K.fontDirection=1,this.current.font=G,this.current.fontSize=R,G.isType3Font)return;let z="normal";G.black?z="900":G.bold&&(z="bold");var L=G.italic?"italic":"normal",S=`"${G.loadedName||"sans-serif"}", ${G.fallbackName}`;let B=R;R<16?B=16:R>100&&(B=100),this.current.fontSizeScale=R/B,this.ctx.font=`${L} ${z} ${B}px ${S}`},setTextRenderingMode:function(_){this.current.textRenderingMode=_},setTextRise:function(_){this.current.textRise=_},moveText:function(_,R){this.current.x=this.current.lineX+=_,this.current.y=this.current.lineY+=R},setLeadingMoveText:function(_,R){this.setLeading(-R),this.moveText(_,R)},setTextMatrix:function(_,R,G,K,U,z){this.current.textMatrix=[_,R,G,K,U,z],this.current.textMatrixScale=Math.sqrt(_*_+R*R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(m,_,R,G){var K=this.ctx,U=this.current,z=U.font,L=U.textRenderingMode,S=U.fontSize/U.fontSizeScale,B=L&le.TextRenderingMode.FILL_STROKE_MASK,J=!!(L&le.TextRenderingMode.ADD_TO_PATH_FLAG);const ie=U.patternFill&&!z.missingFile;var ce;(z.disableFontFace||J||ie)&&(ce=z.getPathGenerator(this.commonObjs,m)),z.disableFontFace||ie?(K.save(),K.translate(_,R),K.beginPath(),ce(K,S),G&&K.setTransform.apply(K,G),(B===le.TextRenderingMode.FILL||B===le.TextRenderingMode.FILL_STROKE)&&K.fill(),(B===le.TextRenderingMode.STROKE||B===le.TextRenderingMode.FILL_STROKE)&&K.stroke(),K.restore()):((B===le.TextRenderingMode.FILL||B===le.TextRenderingMode.FILL_STROKE)&&K.fillText(m,_,R),(B===le.TextRenderingMode.STROKE||B===le.TextRenderingMode.FILL_STROKE)&&K.strokeText(m,_,R)),J&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:K.mozCurrentTransform,x:_,y:R,fontSize:S,addToPath:ce})},get isFontSubpixelAAEnabled(){const{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);for(var _=m.getImageData(0,0,10,10).data,R=!1,G=3;G<_.length;G+=4)if(_[G]>0&&_[G]<255){R=!0;break}return(0,le.shadow)(this,"isFontSubpixelAAEnabled",R)},showText:function(_){var R=this.current,G=R.font;if(G.isType3Font)return this.showType3Text(_);var K=R.fontSize;if(0===K)return;var U=this.ctx,z=R.fontSizeScale,L=R.charSpacing,S=R.wordSpacing,B=R.fontDirection,J=R.textHScale*B,ie=_.length,ce=G.vertical,pe=ce?1:-1,ye=G.defaultVMetrics,Te=K*R.fontMatrix[0],_e=R.textRenderingMode===le.TextRenderingMode.FILL&&!G.disableFontFace&&!R.patternFill;let we;if(U.save(),R.patternFill){U.save();const ct=R.fillColor.getPattern(U,this);we=U.mozCurrentTransform,U.restore(),U.fillStyle=ct}U.transform.apply(U,R.textMatrix),U.translate(R.x,R.y+R.textRise),U.scale(J,B>0?-1:1);var De=R.lineWidth,xe=R.textMatrixScale;if(0===xe||0===De){var Ce=R.textRenderingMode&le.TextRenderingMode.FILL_STROKE_MASK;(Ce===le.TextRenderingMode.STROKE||Ce===le.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,De=.65*this.getSinglePixelWidth())}else De/=xe;1!==z&&(U.scale(z,z),De/=z),U.lineWidth=De;var Ne,Me=0;for(Ne=0;Ne<ie;++Ne){var We=_[Ne];if((0,le.isNum)(We))Me+=pe*We*K/1e3;else{var He,it,et,st,Xe=!1,Qe=(We.isSpace?S:0)+L,Ye=We.fontChar,Je=We.accent,Dt=We.width;if(ce?(et=We.vmetric||ye,st=We.vmetric?et[1]:.5*Dt,Dt=et?-et[0]:Dt,He=(st=-st*Te)/z,it=(Me+et[2]*Te)/z):(He=Me/z,it=0),G.remeasure&&Dt>0){var Ze=1e3*U.measureText(Ye).width/K*z;if(Dt<Ze&&this.isFontSubpixelAAEnabled){var je=Dt/Ze;Xe=!0,U.save(),U.scale(je,1),He/=je}else Dt!==Ze&&(He+=(Dt-Ze)/2e3*K/z)}this.contentVisible&&(We.isInFont||G.missingFile)&&(_e&&!Je?U.fillText(Ye,He,it):(this.paintChar(Ye,He,it,we),Je&&this.paintChar(Je.fontChar,He+K*Je.offset.x/z,it-K*Je.offset.y/z,we))),Me+=ce?Dt*Te-Qe*B:Dt*Te+Qe*B,Xe&&U.restore()}}ce?R.y-=Me:R.x+=Me*J,U.restore()},showType3Text:function(_){var ye,Te,_e,we,R=this.ctx,G=this.current,K=G.font,U=G.fontSize,z=G.fontDirection,L=K.vertical?1:-1,S=G.charSpacing,B=G.wordSpacing,J=G.textHScale*z,ie=G.fontMatrix||le.FONT_IDENTITY_MATRIX,ce=_.length;if(G.textRenderingMode!==le.TextRenderingMode.INVISIBLE&&0!==U){for(this._cachedGetSinglePixelWidth=null,R.save(),R.transform.apply(R,G.textMatrix),R.translate(G.x,G.y),R.scale(J,z),ye=0;ye<ce;++ye)if((0,le.isNum)(Te=_[ye]))this.ctx.translate(we=L*Te*U/1e3,0),G.x+=we*J;else{var De=(Te.isSpace?B:0)+S,xe=K.charProcOperatorList[Te.operatorListId];if(xe){this.contentVisible&&(this.processingType3=Te,this.save(),R.scale(U,U),R.transform.apply(R,ie),this.executeOperatorList(xe),this.restore());var Ce=le.Util.applyTransform([Te.width,0],ie);R.translate(_e=Ce[0]*U+De,0),G.x+=_e*J}else(0,le.warn)(`Type3 character "${Te.operatorListId}" is not available.`)}R.restore(),this.processingType3=null}},setCharWidth:function(_,R){},setCharWidthAndBounds:function(_,R,G,K,U,z){this.ctx.rect(G,K,U-G,z-K),this.clip(),this.endPath()},getColorN_Pattern:function(_){var R;if("TilingPattern"===_[0]){var G=_[1],K=this.baseTransform||this.ctx.mozCurrentTransform.slice();R=new Ee.TilingPattern(_,G,this.ctx,{createCanvasGraphics:z=>new W(z,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)},K)}else R=(0,Ee.getShadingPatternFromIR)(_);return R},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(_,R,G){var K=le.Util.makeCssRgb(_,R,G);this.ctx.strokeStyle=K,this.current.strokeColor=K},setFillRGBColor:function(_,R,G){var K=le.Util.makeCssRgb(_,R,G);this.ctx.fillStyle=K,this.current.fillColor=K,this.current.patternFill=!1},shadingFill:function(_){if(this.contentVisible){var R=this.ctx;this.save();var G=(0,Ee.getShadingPatternFromIR)(_);R.fillStyle=G.getPattern(R,this,!0);var K=R.mozCurrentTransformInverse;if(K){var U=R.canvas,z=U.width,L=U.height,S=le.Util.applyTransform([0,0],K),B=le.Util.applyTransform([0,L],K),J=le.Util.applyTransform([z,0],K),ie=le.Util.applyTransform([z,L],K),ce=Math.min(S[0],B[0],J[0],ie[0]),pe=Math.min(S[1],B[1],J[1],ie[1]),ye=Math.max(S[0],B[0],J[0],ie[0]),Te=Math.max(S[1],B[1],J[1],ie[1]);this.ctx.fillRect(ce,pe,ye-ce,Te-pe)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}},beginInlineImage:function(){(0,le.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,le.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(_,R){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(_)&&6===_.length&&this.transform.apply(this,_),this.baseTransform=this.ctx.mozCurrentTransform,R)&&(this.ctx.rect(R[0],R[1],R[2]-R[0],R[3]-R[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function(_){if(this.contentVisible){this.save();var R=this.ctx;_.isolated||(0,le.info)("TODO: Support non-isolated groups."),_.knockout&&(0,le.warn)("Knockout groups not supported.");var G=R.mozCurrentTransform;if(_.matrix&&R.transform.apply(R,_.matrix),!_.bbox)throw new Error("Bounding box is required.");var K=le.Util.getAxialAlignedBoundingBox(_.bbox,R.mozCurrentTransform);K=le.Util.intersect(K,[0,0,R.canvas.width,R.canvas.height])||[0,0,0,0];var z=Math.floor(K[0]),L=Math.floor(K[1]),S=Math.max(Math.ceil(K[2])-z,1),B=Math.max(Math.ceil(K[3])-L,1),J=1,ie=1;S>k&&(J=S/k,S=k),B>k&&(ie=B/k,B=k);var ce="groupAt"+this.groupLevel;_.smask&&(ce+="_smask_"+this.smaskCounter++%2);var pe=this.cachedCanvases.getCanvas(ce,S,B,!0),ye=pe.context;ye.scale(1/J,1/ie),ye.translate(-z,-L),ye.transform.apply(ye,G),_.smask?this.smaskStack.push({canvas:pe.canvas,context:ye,offsetX:z,offsetY:L,scaleX:J,scaleY:ie,subtype:_.smask.subtype,backdrop:_.smask.backdrop,transferMap:_.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(z,L),R.scale(J,ie)),M(R,ye),this.ctx=ye,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++,this.current.activeSMask=null}},endGroup:function(_){if(this.contentVisible){this.groupLevel--;var R=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,_.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(R.canvas,0,0),this.restore()}},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(_,R,G){this.save(),A(this.ctx),this.current=new f,Array.isArray(_)&&4===_.length&&(this.ctx.rect(_[0],_[1],_[2]-_[0],_[3]-_[1]),this.clip(),this.endPath()),this.transform.apply(this,R),this.transform.apply(this,G)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(_){if(this.contentVisible){var R=this.ctx,G=_.width,K=_.height,U=this.current.fillColor,z=this.current.patternFill,L=this.processingType3;if(L&&void 0===L.compiled&&(L.compiled=G<=1e3&&K<=1e3?function re($){var N,O,M,j,oe=$.width,W=$.height,A=oe+1,b=new Uint8Array(A*(W+1)),q=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),C=oe+7&-8,P=$.data,F=new Uint8Array(C*W),I=0;for(N=0,j=P.length;N<j;N++)for(var E=128,x=P[N];E>0;)F[I++]=x&E?0:255,E>>=1;var p=0;for(0!==F[I=0]&&(b[0]=1,++p),O=1;O<oe;O++)F[I]!==F[I+1]&&(b[O]=F[I]?2:1,++p),I++;for(0!==F[I]&&(b[O]=2,++p),N=1;N<W;N++){M=N*A,F[(I=N*C)-C]!==F[I]&&(b[M]=F[I]?1:8,++p);var m=(F[I]?4:0)+(F[I-C]?8:0);for(O=1;O<oe;O++)q[m=(m>>2)+(F[I+1]?4:0)+(F[I-C+1]?8:0)]&&(b[M+O]=q[m],++p),I++;if(F[I-C]!==F[I]&&(b[M+O]=F[I]?2:4,++p),p>1e3)return null}for(M=N*A,0!==F[I=C*(W-1)]&&(b[M]=8,++p),O=1;O<oe;O++)F[I]!==F[I+1]&&(b[M+O]=F[I]?4:8,++p),I++;if(0!==F[I]&&(b[M+O]=4,++p),p>1e3)return null;var _=new Int32Array([0,A,-1,0,-A,0,0,0,1]),R=[];for(N=0;p&&N<=W;N++){for(var G=N*A,K=G+oe;G<K&&!b[G];)G++;if(G!==K){var S,U=[G%A,N],z=b[G],L=G;do{var B=_[z];do{G+=B}while(!b[G]);5!==(S=b[G])&&10!==S?(z=S,b[G]=0):b[G]&=(z=S&51*z>>4)>>2|z<<2,U.push(G%A),U.push(G/A|0),b[G]||--p}while(L!==G);R.push(U),--N}}return function(ie){ie.save(),ie.scale(1/oe,-1/W),ie.translate(0,-W),ie.beginPath();for(let pe=0,ye=R.length;pe<ye;pe++){var ce=R[pe];ie.moveTo(ce[0],ce[1]);for(let Te=2,_e=ce.length;Te<_e;Te+=2)ie.lineTo(ce[Te],ce[Te+1])}ie.fill(),ie.beginPath(),ie.restore()}}({data:_.data,width:G,height:K}):null),L&&L.compiled)return void L.compiled(R);var S=this.cachedCanvases.getCanvas("maskCanvas",G,K),B=S.context;B.save(),O(B,_),B.globalCompositeOperation="source-in",B.fillStyle=z?U.getPattern(B,this):U,B.fillRect(0,0,G,K),B.restore(),this.paintInlineImageXObject(S.canvas)}},paintImageMaskXObjectRepeat(m,_,R=0,G=0,K,U){if(this.contentVisible){var z=m.width,L=m.height,S=this.current.fillColor,B=this.current.patternFill,J=this.cachedCanvases.getCanvas("maskCanvas",z,L),ie=J.context;ie.save(),O(ie,m),ie.globalCompositeOperation="source-in",ie.fillStyle=B?S.getPattern(ie,this):S,ie.fillRect(0,0,z,L),ie.restore();for(var ce=this.ctx,pe=0,ye=U.length;pe<ye;pe+=2)ce.save(),ce.transform(_,R,G,K,U[pe],U[pe+1]),ce.scale(1,-1),ce.drawImage(J.canvas,0,0,z,L,0,-1,1,1),ce.restore()}},paintImageMaskXObjectGroup:function(_){if(this.contentVisible)for(var R=this.ctx,G=this.current.fillColor,K=this.current.patternFill,U=0,z=_.length;U<z;U++){var L=_[U],S=L.width,B=L.height,J=this.cachedCanvases.getCanvas("maskCanvas",S,B),ie=J.context;ie.save(),O(ie,L),ie.globalCompositeOperation="source-in",ie.fillStyle=K?G.getPattern(ie,this):G,ie.fillRect(0,0,S,B),ie.restore(),R.save(),R.transform.apply(R,L.transform),R.scale(1,-1),R.drawImage(J.canvas,0,0,S,B,0,-1,1,1),R.restore()}},paintImageXObject:function(_){if(!this.contentVisible)return;const R=_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_);R?this.paintInlineImageXObject(R):(0,le.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(_,R,G,K){if(!this.contentVisible)return;const U=_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_);if(U){for(var z=U.width,L=U.height,S=[],B=0,J=K.length;B<J;B+=2)S.push({transform:[R,0,0,G,K[B],K[B+1]],x:0,y:0,w:z,h:L});this.paintInlineImageXObjectGroup(U,S)}else(0,le.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(_){if(this.contentVisible){var R=_.width,G=_.height,K=this.ctx;this.save(),K.scale(1/R,-1/G);var ce,pe,U=K.mozCurrentTransformInverse,z=U[0],L=U[1],S=Math.max(Math.sqrt(z*z+L*L),1),B=U[2],J=U[3],ie=Math.max(Math.sqrt(B*B+J*J),1);if("function"==typeof HTMLElement&&_ instanceof HTMLElement||!_.data)ce=_;else{var ye=(pe=this.cachedCanvases.getCanvas("inlineImage",R,G)).context;N(ye,_,this.current.transferMaps),ce=pe.canvas}for(var Te=R,_e=G,we="prescale1";S>2&&Te>1||ie>2&&_e>1;){var De=Te,xe=_e;S>2&&Te>1&&(S/=Te/(De=Math.ceil(Te/2))),ie>2&&_e>1&&(ie/=_e/(xe=Math.ceil(_e/2))),(ye=(pe=this.cachedCanvases.getCanvas(we,De,xe)).context).clearRect(0,0,De,xe),ye.drawImage(ce,0,0,Te,_e,0,0,De,xe),ce=pe.canvas,Te=De,_e=xe,we="prescale1"===we?"prescale2":"prescale1"}if(K.drawImage(ce,0,0,Te,_e,0,-G,R,G),this.imageLayer){var Ce=this.getCanvasPosition(0,-G);this.imageLayer.appendImage({imgData:_,left:Ce[0],top:Ce[1],width:R/U[0],height:G/U[3]})}this.restore()}},paintInlineImageXObjectGroup:function(_,R){if(this.contentVisible){var G=this.ctx,K=_.width,U=_.height,z=this.cachedCanvases.getCanvas("inlineImage",K,U);N(z.context,_,this.current.transferMaps);for(var S=0,B=R.length;S<B;S++){var J=R[S];if(G.save(),G.transform.apply(G,J.transform),G.scale(1,-1),G.drawImage(z.canvas,J.x,J.y,J.w,J.h,0,-1,1,1),this.imageLayer){var ie=this.getCanvasPosition(J.x,J.y);this.imageLayer.appendImage({imgData:_,left:ie[0],top:ie[1],width:K,height:U})}G.restore()}}},paintSolidColorImageMask:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function(_){},markPointProps:function(_,R){},beginMarkedContent:function(_){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(_,R){this.markedContentStack.push("OC"===_?{visible:this.optionalContentConfig.isVisible(R)}:{visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){var _=this.ctx;this.pendingClip&&(this.pendingClip===x?_.clip("evenodd"):_.clip(),this.pendingClip=null),_.beginPath()},getSinglePixelWidth(m){if(null===this._cachedGetSinglePixelWidth){const _=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(_[0]*_[0]+_[1]*_[1],_[2]*_[2]+_[3]*_[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(_,R){var G=this.ctx.mozCurrentTransform;return[G[0]*_+G[2]*R+G[4],G[1]*_+G[3]*R+G[5]]},isContentVisible:function(){for(let _=this.markedContentStack.length-1;_>=0;_--)if(!this.markedContentStack[_].visible)return!1;return!0}},le.OPS)W.prototype[le.OPS[p]]=W.prototype[p];return W}();he.CanvasGraphics=c},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.getShadingPatternFromIR=function k(ee){var e=Ee[ee[0]];if(!e)throw new Error(`Unknown IR type: ${ee[0]}`);return e.fromIR(ee)},he.TilingPattern=void 0;var le=Oe(2),Ee={};function se(ee,e){if(!e||typeof Path2D>"u")return;const V=e[2]-e[0],H=e[3]-e[1],te=new Path2D;te.rect(e[0],e[1],V,H),ee.clip(te)}Ee.RadialAxial={fromIR:function(e){var V=e[1],H=e[2],te=e[3],re=e[4],f=e[5],c=e[6],$=e[7];return{type:"Pattern",getPattern:function(oe){var W;se(oe,H),"axial"===V?W=oe.createLinearGradient(re[0],re[1],f[0],f[1]):"radial"===V&&(W=oe.createRadialGradient(re[0],re[1],c,f[0],f[1],$));for(var N=0,O=te.length;N<O;++N){var M=te[N];W.addColorStop(M[0],M[1])}return W}}}};var y=function(){function e(te,re,f,c,$,ae,oe,W){var b,N=re.coords,O=re.colors,M=te.data,A=4*te.width;N[f+1]>N[c+1]&&(b=f,f=c,c=b,b=ae,ae=oe,oe=b),N[c+1]>N[$+1]&&(b=c,c=$,$=b,b=oe,oe=W,W=b),N[f+1]>N[c+1]&&(b=f,f=c,c=b,b=ae,ae=oe,oe=b);var q=(N[f]+re.offsetX)*re.scaleX,C=(N[f+1]+re.offsetY)*re.scaleY,P=(N[c]+re.offsetX)*re.scaleX,F=(N[c+1]+re.offsetY)*re.scaleY,I=(N[$]+re.offsetX)*re.scaleX,j=(N[$+1]+re.offsetY)*re.scaleY;if(!(C>=j))for(var S,B,J,ie,ce,pe,ye,Te,E=O[ae],x=O[ae+1],p=O[ae+2],m=O[oe],_=O[oe+1],R=O[oe+2],G=O[W],K=O[W+1],U=O[W+2],z=Math.round(C),L=Math.round(j),_e=z;_e<=L;_e++){if(_e<F){let Ne;Ne=_e<C?0:C===F?1:(C-_e)/(C-F),S=q-(q-P)*Ne,B=E-(E-m)*Ne,J=x-(x-_)*Ne,ie=p-(p-R)*Ne}else{let Ne;Ne=_e>j?1:F===j?0:(F-_e)/(F-j),S=P-(P-I)*Ne,B=m-(m-G)*Ne,J=_-(_-K)*Ne,ie=R-(R-U)*Ne}let Me;Me=_e<C?0:_e>j?1:(C-_e)/(C-j),ce=q-(q-I)*Me,pe=E-(E-G)*Me,ye=x-(x-K)*Me,Te=p-(p-U)*Me;for(var we=Math.round(Math.min(S,ce)),De=Math.round(Math.max(S,ce)),xe=A*_e+4*we,Ce=we;Ce<=De;Ce++)Me=(S-Ce)/(S-ce),Me<0?Me=0:Me>1&&(Me=1),M[xe++]=B-(B-pe)*Me|0,M[xe++]=J-(J-ye)*Me|0,M[xe++]=ie-(ie-Te)*Me|0,M[xe++]=255}}function V(te,re,f){var ae,oe,c=re.coords,$=re.colors;switch(re.type){case"lattice":var W=re.verticesPerRow,N=Math.floor(c.length/W)-1,O=W-1;for(ae=0;ae<N;ae++)for(var M=ae*W,A=0;A<O;A++,M++)e(te,f,c[M],c[M+1],c[M+W],$[M],$[M+1],$[M+W]),e(te,f,c[M+W+1],c[M+1],c[M+W],$[M+W+1],$[M+1],$[M+W]);break;case"triangles":for(ae=0,oe=c.length;ae<oe;ae+=3)e(te,f,c[ae],c[ae+1],c[ae+2],$[ae],$[ae+1],$[ae+2]);break;default:throw new Error("illegal figure")}}return function H(te,re,f,c,$,ae,oe,W){var m,_,R,G,A=Math.floor(te[0]),b=Math.floor(te[1]),q=Math.ceil(te[2])-A,C=Math.ceil(te[3])-b,P=Math.min(Math.ceil(Math.abs(q*re[0]*1.1)),3e3),F=Math.min(Math.ceil(Math.abs(C*re[1]*1.1)),3e3),I=q/P,j=C/F,E={coords:f,colors:c,offsetX:-A,offsetY:-b,scaleX:1/I,scaleY:1/j},x=P+4,p=F+4;if(W.isEnabled)m=W.drawFigures({width:P,height:F,backgroundColor:ae,figures:$,context:E}),(_=oe.getCanvas("mesh",x,p,!1)).context.drawImage(m,2,2),m=_.canvas;else{var K=(_=oe.getCanvas("mesh",x,p,!1)).context,U=K.createImageData(P,F);if(ae){var z=U.data;for(R=0,G=z.length;R<G;R+=4)z[R]=ae[0],z[R+1]=ae[1],z[R+2]=ae[2],z[R+3]=255}for(R=0;R<$.length;R++)V(U,$[R],E);K.putImageData(U,2,2),m=_.canvas}return{canvas:m,offsetX:A-2*I,offsetY:b-2*j,scaleX:I,scaleY:j}}}();Ee.Mesh={fromIR:function(e){var V=e[2],H=e[3],te=e[4],re=e[5],f=e[6],c=e[7],$=e[8];return{type:"Pattern",getPattern:function(oe,W,N){var O;if(se(oe,c),N)O=le.Util.singularValueDecompose2dScale(oe.mozCurrentTransform);else if(O=le.Util.singularValueDecompose2dScale(W.baseTransform),f){var M=le.Util.singularValueDecompose2dScale(f);O=[O[0]*M[0],O[1]*M[1]]}var A=y(re,O,V,H,te,N?null:$,W.cachedCanvases,W.webGLContext);return N||(oe.setTransform.apply(oe,W.baseTransform),f&&oe.transform.apply(oe,f)),oe.translate(A.offsetX,A.offsetY),oe.scale(A.scaleX,A.scaleY),oe.createPattern(A.canvas,"no-repeat")}}}},Ee.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var fe=function(){function H(te,re,f,c,$){this.operatorList=te[2],this.matrix=te[3]||[1,0,0,1,0,0],this.bbox=te[4],this.xstep=te[5],this.ystep=te[6],this.paintType=te[7],this.tilingType=te[8],this.color=re,this.canvasGraphicsFactory=c,this.baseTransform=$,this.type="Pattern",this.ctx=f}return H.prototype={createPatternCanvas:function(re){var f=this.operatorList,c=this.bbox,$=this.xstep,ae=this.ystep,oe=this.paintType,N=this.color,O=this.canvasGraphicsFactory;(0,le.info)("TilingType: "+this.tilingType);var M=c[0],A=c[1],b=c[2],q=c[3],C=le.Util.singularValueDecompose2dScale(this.matrix),P=le.Util.singularValueDecompose2dScale(this.baseTransform),F=[C[0]*P[0],C[1]*P[1]],I=this.getSizeAndScale($,this.ctx.canvas.width,F[0]),j=this.getSizeAndScale(ae,this.ctx.canvas.height,F[1]),E=re.cachedCanvases.getCanvas("pattern",I.size,j.size,!0),p=O.createCanvasGraphics(E.context);return p.groupLevel=re.groupLevel,this.setFillAndStrokeStyleToContext(p,oe,N),p.transform(I.scale,0,0,j.scale,0,0),p.transform(1,0,0,1,-M,-A),this.clipBbox(p,c,M,A,b,q),p.executeOperatorList(f),this.ctx.transform(1,0,0,1,M,A),this.ctx.scale(1/I.scale,1/j.scale),E.canvas},getSizeAndScale:function(re,f,c){re=Math.abs(re);var $=Math.max(3e3,f),ae=Math.ceil(re*c);return ae>=$?ae=$:c=ae/re,{scale:c,size:ae}},clipBbox:function(re,f,c,$,ae,oe){Array.isArray(f)&&4===f.length&&(re.ctx.rect(c,$,ae-c,oe-$),re.clip(),re.endPath())},setFillAndStrokeStyleToContext:function(re,f,c){const $=re.ctx,ae=re.current;switch(f){case 1:var oe=this.ctx;$.fillStyle=oe.fillStyle,$.strokeStyle=oe.strokeStyle,ae.fillColor=oe.fillStyle,ae.strokeColor=oe.strokeStyle;break;case 2:var W=le.Util.makeCssRgb(c[0],c[1],c[2]);$.fillStyle=W,$.strokeStyle=W,ae.fillColor=W,ae.strokeColor=W;break;default:throw new le.FormatError(`Unsupported paint type: ${f}`)}},getPattern:function(re,f){(re=this.ctx).setTransform.apply(re,this.baseTransform),re.transform.apply(re,this.matrix);var c=this.createPatternCanvas(f);return re.createPattern(c,"repeat")}},H}();he.TilingPattern=fe},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.GlobalWorkerOptions=void 0;const le=Object.create(null);he.GlobalWorkerOptions=le,le.workerPort=void 0===le.workerPort?null:le.workerPort,le.workerSrc=void 0===le.workerSrc?"":le.workerSrc},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.MessageHandler=void 0;var le=Oe(2);function y(fe){if("object"!=typeof fe||null===fe)return fe;switch(fe.name){case"AbortException":return new le.AbortException(fe.message);case"MissingPDFException":return new le.MissingPDFException(fe.message);case"UnexpectedResponseException":return new le.UnexpectedResponseException(fe.message,fe.status);case"UnknownErrorException":return new le.UnknownErrorException(fe.message,fe.details);default:return new le.UnknownErrorException(fe.message,fe.toString())}}he.MessageHandler=class k{constructor(ee,e,V){this.sourceName=ee,this.targetName=e,this.comObj=V,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=H=>{const te=H.data;if(te.targetName!==this.sourceName)return;if(te.stream)return void this._processStreamMessage(te);if(te.callback){const f=te.callbackId,c=this.callbackCapabilities[f];if(!c)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],1===te.callback)c.resolve(te.data);else{if(2!==te.callback)throw new Error("Unexpected callback case");c.reject(y(te.reason))}return}const re=this.actionHandler[te.action];if(!re)throw new Error(`Unknown action from worker: ${te.action}`);if(te.callbackId){const f=this.sourceName,c=te.sourceName;new Promise(function($){$(re(te.data))}).then(function($){V.postMessage({sourceName:f,targetName:c,callback:1,callbackId:te.callbackId,data:$})},function($){V.postMessage({sourceName:f,targetName:c,callback:2,callbackId:te.callbackId,reason:y($)})})}else te.streamId?this._createStreamSink(te):re(te.data)},V.addEventListener("message",this._onComObjOnMessage)}on(ee,e){const V=this.actionHandler;if(V[ee])throw new Error(`There is already an actionName called "${ee}"`);V[ee]=e}send(ee,e,V){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ee,data:e},V)}sendWithPromise(ee,e,V){const H=this.callbackId++,te=(0,le.createPromiseCapability)();this.callbackCapabilities[H]=te;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ee,callbackId:H,data:e},V)}catch(re){te.reject(re)}return te.promise}sendWithStream(ee,e,V,H){const te=this.streamId++,re=this.sourceName,f=this.targetName,c=this.comObj;return new ReadableStream({start:$=>{const ae=(0,le.createPromiseCapability)();return this.streamControllers[te]={controller:$,startCall:ae,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:re,targetName:f,action:ee,streamId:te,data:e,desiredSize:$.desiredSize},H),ae.promise},pull:$=>{const ae=(0,le.createPromiseCapability)();return this.streamControllers[te].pullCall=ae,c.postMessage({sourceName:re,targetName:f,stream:6,streamId:te,desiredSize:$.desiredSize}),ae.promise},cancel:$=>{(0,le.assert)($ instanceof Error,"cancel must have a valid reason");const ae=(0,le.createPromiseCapability)();return this.streamControllers[te].cancelCall=ae,this.streamControllers[te].isClosed=!0,c.postMessage({sourceName:re,targetName:f,stream:1,streamId:te,reason:y($)}),ae.promise}},V)}_createStreamSink(ee){const e=this,V=this.actionHandler[ee.action],H=ee.streamId,te=this.sourceName,re=ee.sourceName,f=this.comObj,c={enqueue($,ae=1,oe){if(this.isCancelled)return;const W=this.desiredSize;this.desiredSize-=ae,W>0&&this.desiredSize<=0&&(this.sinkCapability=(0,le.createPromiseCapability)(),this.ready=this.sinkCapability.promise),e._postMessage({sourceName:te,targetName:re,stream:4,streamId:H,chunk:$},oe)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:te,targetName:re,stream:3,streamId:H}),delete e.streamSinks[H])},error($){(0,le.assert)($ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:te,targetName:re,stream:5,streamId:H,reason:y($)}))},sinkCapability:(0,le.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:ee.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[H]=c,new Promise(function($){$(V(ee.data,c))}).then(function(){f.postMessage({sourceName:te,targetName:re,stream:8,streamId:H,success:!0})},function($){f.postMessage({sourceName:te,targetName:re,stream:8,streamId:H,reason:y($)})})}_processStreamMessage(ee){const e=ee.streamId,V=this.sourceName,H=ee.sourceName,te=this.comObj;switch(ee.stream){case 8:ee.success?this.streamControllers[e].startCall.resolve():this.streamControllers[e].startCall.reject(y(ee.reason));break;case 7:ee.success?this.streamControllers[e].pullCall.resolve():this.streamControllers[e].pullCall.reject(y(ee.reason));break;case 6:if(!this.streamSinks[e]){te.postMessage({sourceName:V,targetName:H,stream:7,streamId:e,success:!0});break}this.streamSinks[e].desiredSize<=0&&ee.desiredSize>0&&this.streamSinks[e].sinkCapability.resolve(),this.streamSinks[e].desiredSize=ee.desiredSize;const{onPull:re}=this.streamSinks[ee.streamId];new Promise(function(c){c(re&&re())}).then(function(){te.postMessage({sourceName:V,targetName:H,stream:7,streamId:e,success:!0})},function(c){te.postMessage({sourceName:V,targetName:H,stream:7,streamId:e,reason:y(c)})});break;case 4:if((0,le.assert)(this.streamControllers[e],"enqueue should have stream controller"),this.streamControllers[e].isClosed)break;this.streamControllers[e].controller.enqueue(ee.chunk);break;case 3:if((0,le.assert)(this.streamControllers[e],"close should have stream controller"),this.streamControllers[e].isClosed)break;this.streamControllers[e].isClosed=!0,this.streamControllers[e].controller.close(),this._deleteStreamController(e);break;case 5:(0,le.assert)(this.streamControllers[e],"error should have stream controller"),this.streamControllers[e].controller.error(y(ee.reason)),this._deleteStreamController(e);break;case 2:ee.success?this.streamControllers[e].cancelCall.resolve():this.streamControllers[e].cancelCall.reject(y(ee.reason)),this._deleteStreamController(e);break;case 1:if(!this.streamSinks[e])break;const{onCancel:f}=this.streamSinks[ee.streamId];new Promise(function(c){c(f&&f(y(ee.reason)))}).then(function(){te.postMessage({sourceName:V,targetName:H,stream:2,streamId:e,success:!0})},function(c){te.postMessage({sourceName:V,targetName:H,stream:2,streamId:e,reason:y(c)})}),this.streamSinks[e].sinkCapability.reject(y(ee.reason)),this.streamSinks[e].isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(ee){var e=this;return _asyncToGenerator(function*(){yield Promise.allSettled([e.streamControllers[ee].startCall,e.streamControllers[ee].pullCall,e.streamControllers[ee].cancelCall].map(function(V){return V&&V.promise})),delete e.streamControllers[ee]})()}_postMessage(ee,e){e&&this.postMessageTransfers?this.comObj.postMessage(ee,e):this.comObj.postMessage(ee)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.Metadata=void 0;var le=Oe(2),Ee=Oe(15);he.Metadata=class se{constructor(k){(0,le.assert)("string"==typeof k,"Metadata: input is not a string"),k=this._repair(k);const ee=(new Ee.SimpleXMLParser).parseFromString(k);this._metadataMap=new Map,ee&&this._parse(ee)}_repair(k){return k.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(fe,ee){const e=ee.replace(/\\([0-3])([0-7])([0-7])/g,function(H,te,re,f){return String.fromCharCode(64*te+8*re+1*f)}).replace(/&(amp|apos|gt|lt|quot);/g,function(H,te){switch(te){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${te} isn't defined.`)});let V="";for(let H=0,te=e.length;H<te;H+=2){const re=256*e.charCodeAt(H)+e.charCodeAt(H+1);V+=re>=32&&re<127&&60!==re&&62!==re&&38!==re?String.fromCharCode(re):"&#x"+(65536+re).toString(16).substring(1)+";"}return">"+V})}_parse(k){let fe=k.documentElement;if("rdf:rdf"!==fe.nodeName.toLowerCase())for(fe=fe.firstChild;fe&&"rdf:rdf"!==fe.nodeName.toLowerCase();)fe=fe.nextSibling;const ee=fe?fe.nodeName.toLowerCase():null;if(!fe||"rdf:rdf"!==ee||!fe.hasChildNodes())return;const e=fe.childNodes;for(let V=0,H=e.length;V<H;V++){const te=e[V];if("rdf:description"===te.nodeName.toLowerCase())for(let re=0,f=te.childNodes.length;re<f;re++)if("#text"!==te.childNodes[re].nodeName.toLowerCase()){const c=te.childNodes[re],$=c.nodeName.toLowerCase();this._metadataMap.set($,c.textContent.trim())}}}get(k){return this._metadataMap.has(k)?this._metadataMap.get(k):null}getAll(){return Object.fromEntries(this._metadataMap)}has(k){return this._metadataMap.has(k)}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.SimpleXMLParser=void 0;function Ee(ee,e){const V=ee[e];return" "===V||"\n"===V||"\r"===V||"\t"===V}class y{_resolveEntities(e){return e.replace(/&([^;]+);/g,(V,H)=>{if("#x"===H.substring(0,2))return String.fromCharCode(parseInt(H.substring(2),16));if("#"===H.substring(0,1))return String.fromCharCode(parseInt(H.substring(1),10));switch(H){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(H)})}_parseContent(e,V){const H=[];let te=V;function re(){for(;te<e.length&&Ee(e,te);)++te}for(;te<e.length&&!Ee(e,te)&&">"!==e[te]&&"/"!==e[te];)++te;const f=e.substring(V,te);for(re();te<e.length&&">"!==e[te]&&"/"!==e[te]&&"?"!==e[te];){re();let c="",$="";for(;te<e.length&&!Ee(e,te)&&"="!==e[te];)c+=e[te],++te;if(re(),"="!==e[te])return null;++te,re();const ae=e[te];if('"'!==ae&&"'"!==ae)return null;const oe=e.indexOf(ae,++te);if(oe<0)return null;$=e.substring(te,oe),H.push({name:c,value:this._resolveEntities($)}),te=oe+1,re()}return{name:f,attributes:H,parsed:te-V}}_parseProcessingInstruction(e,V){let H=V;for(;H<e.length&&!Ee(e,H)&&">"!==e[H]&&"/"!==e[H];)++H;const re=e.substring(V,H);!function te(){for(;H<e.length&&Ee(e,H);)++H}();const f=H;for(;H<e.length&&("?"!==e[H]||">"!==e[H+1]);)++H;return{name:re,value:e.substring(f,H),parsed:H-V}}parseXml(e){let V=0;for(;V<e.length;){let te=V;if("<"===e[V]){let f;switch(++te,e[te]){case"/":if(++te,f=e.indexOf(">",te),f<0)return void this.onError(-9);this.onEndElement(e.substring(te,f)),te=f+1;break;case"?":++te;const c=this._parseProcessingInstruction(e,te);if("?>"!==e.substring(te+c.parsed,te+c.parsed+2))return void this.onError(-3);this.onPi(c.name,c.value),te+=c.parsed+2;break;case"!":if("--"===e.substring(te+1,te+3)){if(f=e.indexOf("--\x3e",te+3),f<0)return void this.onError(-5);this.onComment(e.substring(te+3,f)),te=f+3}else if("[CDATA["===e.substring(te+1,te+8)){if(f=e.indexOf("]]>",te+8),f<0)return void this.onError(-2);this.onCdata(e.substring(te+8,f)),te=f+3}else{if("DOCTYPE"!==e.substring(te+1,te+8))return void this.onError(-6);{const oe=e.indexOf("[",te+8);let W=!1;if(f=e.indexOf(">",te+8),f<0)return void this.onError(-4);if(oe>0&&f>oe){if(f=e.indexOf("]>",te+8),f<0)return void this.onError(-4);W=!0}const N=e.substring(te+8,f+(W?1:0));this.onDoctype(N),te=f+(W?2:1)}}break;default:const $=this._parseContent(e,te);if(null===$)return void this.onError(-6);let ae=!1;if("/>"===e.substring(te+$.parsed,te+$.parsed+2))ae=!0;else if(">"!==e.substring(te+$.parsed,te+$.parsed+1))return void this.onError(-9);this.onBeginElement($.name,$.attributes,ae),te+=$.parsed+(ae?2:1)}}else{for(;te<e.length&&"<"!==e[te];)te++;const re=e.substring(V,te);this.onText(this._resolveEntities(re))}V=te}}onResolveEntity(e){return`&${e};`}onPi(e,V){}onComment(e){}onCdata(e){}onDoctype(e){}onText(e){}onBeginElement(e,V,H){}onEndElement(e){}onError(e){}}class k{constructor(e,V){this.nodeName=e,this.nodeValue=V,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const e=this.parentNode.childNodes;if(!e)return;const V=e.indexOf(this);return-1!==V?e[V+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map(function(e){return e.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}he.SimpleXMLParser=class fe extends y{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=0}parseFromString(e){if(this._currentFragment=[],this._stack=[],this._errorCode=0,this.parseXml(e),0!==this._errorCode)return;const[V]=this._currentFragment;return V?{documentElement:V}:void 0}onResolveEntity(e){return"apos"===e?"'":super.onResolveEntity(e)}onText(e){if(function se(ee){for(let e=0,V=ee.length;e<V;e++)if(!Ee(ee,e))return!1;return!0}(e))return;const V=new k("#text",e);this._currentFragment.push(V)}onCdata(e){const V=new k("#text",e);this._currentFragment.push(V)}onBeginElement(e,V,H){const te=new k(e);te.childNodes=[],this._currentFragment.push(te),!H&&(this._stack.push(this._currentFragment),this._currentFragment=te.childNodes)}onEndElement(e){this._currentFragment=this._stack.pop()||[];const V=this._currentFragment[this._currentFragment.length-1];if(V)for(let H=0,te=V.childNodes.length;H<te;H++)V.childNodes[H].parentNode=V}onError(e){this._errorCode=e}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.OptionalContentConfig=void 0;var le=Oe(2);class Ee{constructor(k,fe){this.visible=!0,this.name=k,this.intent=fe}}he.OptionalContentConfig=class se{constructor(k){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==k){this.name=k.name,this.creator=k.creator,this._order=k.order;for(const fe of k.groups)this._groups.set(fe.id,new Ee(fe.name,fe.intent));if("OFF"===k.baseState)for(const fe of this._groups)fe.visible=!1;for(const fe of k.on)this._groups.get(fe).visible=!0;for(const fe of k.off)this._groups.get(fe).visible=!1}}isVisible(k){if("OCG"===k.type)return this._groups.has(k.id)?this._groups.get(k.id).visible:((0,le.warn)(`Optional content group not found: ${k.id}`),!0);if("OCMD"===k.type){if(k.expression&&(0,le.warn)("Visibility expression not supported yet."),!k.policy||"AnyOn"===k.policy){for(const fe of k.ids){if(!this._groups.has(fe))return(0,le.warn)(`Optional content group not found: ${fe}`),!0;if(this._groups.get(fe).visible)return!0}return!1}if("AllOn"===k.policy){for(const fe of k.ids){if(!this._groups.has(fe))return(0,le.warn)(`Optional content group not found: ${fe}`),!0;if(!this._groups.get(fe).visible)return!1}return!0}if("AnyOff"===k.policy){for(const fe of k.ids){if(!this._groups.has(fe))return(0,le.warn)(`Optional content group not found: ${fe}`),!0;if(!this._groups.get(fe).visible)return!0}return!1}if("AllOff"===k.policy){for(const fe of k.ids){if(!this._groups.has(fe))return(0,le.warn)(`Optional content group not found: ${fe}`),!0;if(this._groups.get(fe).visible)return!1}return!0}return(0,le.warn)(`Unknown optional content policy ${k.policy}.`),!0}return(0,le.warn)(`Unknown group type ${k.type}.`),!0}setVisibility(k,fe=!0){this._groups.has(k)?this._groups.get(k).visible=!!fe:(0,le.warn)(`Optional content group not found: ${k}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size?Object.fromEntries(this._groups):null}getGroup(k){return this._groups.get(k)||null}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.PDFDataTransportStream=void 0;var le=Oe(2);he.PDFDataTransportStream=class Ee{constructor(fe,ee){(0,le.assert)(ee,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=fe.progressiveDone||!1;const e=fe.initialData;if(e&&e.length>0){const V=new Uint8Array(e).buffer;this._queuedChunks.push(V)}this._pdfDataRangeTransport=ee,this._isStreamingSupported=!fe.disableStream,this._isRangeSupported=!fe.disableRange,this._contentLength=fe.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((V,H)=>{this._onReceiveData({begin:V,chunk:H})}),this._pdfDataRangeTransport.addProgressListener((V,H)=>{this._onProgress({loaded:V,total:H})}),this._pdfDataRangeTransport.addProgressiveReadListener(V=>{this._onReceiveData({chunk:V})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(fe){const ee=new Uint8Array(fe.chunk).buffer;if(void 0===fe.begin)this._fullRequestReader?this._fullRequestReader._enqueue(ee):this._queuedChunks.push(ee);else{const e=this._rangeReaders.some(function(V){return V._begin===fe.begin&&(V._enqueue(ee),!0)});(0,le.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(fe){if(void 0===fe.total){const ee=this._rangeReaders[0];ee&&ee.onProgress&&ee.onProgress({loaded:fe.loaded})}else{const ee=this._fullRequestReader;ee&&ee.onProgress&&ee.onProgress({loaded:fe.loaded,total:fe.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(fe){const ee=this._rangeReaders.indexOf(fe);ee>=0&&this._rangeReaders.splice(ee,1)}getFullReader(){(0,le.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const fe=this._queuedChunks;return this._queuedChunks=null,new se(this,fe,this._progressiveDone)}getRangeReader(fe,ee){if(ee<=this._progressiveDataLength)return null;const e=new y(this,fe,ee);return this._pdfDataRangeTransport.requestDataRange(fe,ee),this._rangeReaders.push(e),e}cancelAllRequests(fe){this._fullRequestReader&&this._fullRequestReader.cancel(fe),this._rangeReaders.slice(0).forEach(function(e){e.cancel(fe)}),this._pdfDataRangeTransport.abort()}};class se{constructor(fe,ee,e=!1){this._stream=fe,this._done=e||!1,this._filename=null,this._queuedChunks=ee||[],this._loaded=0;for(const V of this._queuedChunks)this._loaded+=V.byteLength;this._requests=[],this._headersReady=Promise.resolve(),fe._fullRequestReader=this,this.onProgress=null}_enqueue(fe){this._done||(this._requests.length>0?this._requests.shift().resolve({value:fe,done:!1}):this._queuedChunks.push(fe),this._loaded+=fe.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var fe=this;return _asyncToGenerator(function*(){if(fe._queuedChunks.length>0)return{value:fe._queuedChunks.shift(),done:!1};if(fe._done)return{value:void 0,done:!0};const ee=(0,le.createPromiseCapability)();return fe._requests.push(ee),ee.promise})()}cancel(fe){this._done=!0,this._requests.forEach(function(ee){ee.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class y{constructor(fe,ee,e){this._stream=fe,this._begin=ee,this._end=e,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(fe){this._done||(0===this._requests.length?this._queuedChunk=fe:(this._requests.shift().resolve({value:fe,done:!1}),this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}get isStreamingSupported(){return!1}read(){var fe=this;return _asyncToGenerator(function*(){if(fe._queuedChunk){const e=fe._queuedChunk;return fe._queuedChunk=null,{value:e,done:!1}}if(fe._done)return{value:void 0,done:!0};const ee=(0,le.createPromiseCapability)();return fe._requests.push(ee),ee.promise})()}cancel(fe){this._done=!0,this._requests.forEach(function(ee){ee.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.WebGLContext=void 0;var le=Oe(2);he.WebGLContext=class Ee{constructor({enable:k=!1}){this._enabled=!0===k}get isEnabled(){let k=this._enabled;return k&&(k=se.tryInitGL()),(0,le.shadow)(this,"isEnabled",k)}composeSMask({layer:k,mask:fe,properties:ee}){return se.composeSMask(k,fe,ee)}drawFigures({width:k,height:fe,backgroundColor:ee,figures:e,context:V}){return se.drawFigures(k,fe,ee,e,V)}clear(){se.cleanup()}};var se=function(){function k(b,q,C){var P=b.createShader(C);if(b.shaderSource(P,q),b.compileShader(P),!b.getShaderParameter(P,b.COMPILE_STATUS)){var I=b.getShaderInfoLog(P);throw new Error("Error during shader compilation: "+I)}return P}function fe(b,q){return k(b,q,b.VERTEX_SHADER)}function ee(b,q){return k(b,q,b.FRAGMENT_SHADER)}function e(b,q){for(var C=b.createProgram(),P=0,F=q.length;P<F;++P)b.attachShader(C,q[P]);if(b.linkProgram(C),!b.getProgramParameter(C,b.LINK_STATUS)){var j=b.getProgramInfoLog(C);throw new Error("Error during program linking: "+j)}return C}function V(b,q,C){b.activeTexture(C);var P=b.createTexture();return b.bindTexture(b.TEXTURE_2D,P),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,q),P}var H,te;function re(){H||(te=document.createElement("canvas"),H=te.getContext("webgl",{premultipliedalpha:!1}))}var $=null,O=null;return{tryInitGL(){try{return re(),!!H}catch{}return!1},composeSMask:function oe(b,q,C){var P=b.width,F=b.height;$||function ae(){var b,q;re(),b=te,te=null,q=H,H=null;var F=e(q,[fe(q,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),ee(q,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);q.useProgram(F);var I={};I.gl=q,I.canvas=b,I.resolutionLocation=q.getUniformLocation(F,"u_resolution"),I.positionLocation=q.getAttribLocation(F,"a_position"),I.backdropLocation=q.getUniformLocation(F,"u_backdrop"),I.subtypeLocation=q.getUniformLocation(F,"u_subtype");var j=q.getAttribLocation(F,"a_texCoord"),E=q.getUniformLocation(F,"u_image"),x=q.getUniformLocation(F,"u_mask"),p=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,p),q.bufferData(q.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),q.STATIC_DRAW),q.enableVertexAttribArray(j),q.vertexAttribPointer(j,2,q.FLOAT,!1,0,0),q.uniform1i(E,0),q.uniform1i(x,1),$=I}();var I=$,j=I.canvas,E=I.gl;j.width=P,j.height=F,E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.uniform2f(I.resolutionLocation,P,F),C.backdrop?E.uniform4f(I.resolutionLocation,C.backdrop[0],C.backdrop[1],C.backdrop[2],1):E.uniform4f(I.resolutionLocation,0,0,0,0),E.uniform1i(I.subtypeLocation,"Luminosity"===C.subtype?1:0);var x=V(E,b,E.TEXTURE0),p=V(E,q,E.TEXTURE1),m=E.createBuffer();return E.bindBuffer(E.ARRAY_BUFFER,m),E.bufferData(E.ARRAY_BUFFER,new Float32Array([0,0,P,0,0,F,0,F,P,0,P,F]),E.STATIC_DRAW),E.enableVertexAttribArray(I.positionLocation),E.vertexAttribPointer(I.positionLocation,2,E.FLOAT,!1,0,0),E.clearColor(0,0,0,0),E.enable(E.BLEND),E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),E.clear(E.COLOR_BUFFER_BIT),E.drawArrays(E.TRIANGLES,0,6),E.flush(),E.deleteTexture(x),E.deleteTexture(p),E.deleteBuffer(m),j},drawFigures:function A(b,q,C,P,F){O||function M(){var b,q;re(),b=te,te=null,q=H,H=null;var F=e(q,[fe(q,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),ee(q,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);q.useProgram(F);var I={};I.gl=q,I.canvas=b,I.resolutionLocation=q.getUniformLocation(F,"u_resolution"),I.scaleLocation=q.getUniformLocation(F,"u_scale"),I.offsetLocation=q.getUniformLocation(F,"u_offset"),I.positionLocation=q.getAttribLocation(F,"a_position"),I.colorLocation=q.getAttribLocation(F,"a_color"),O=I}();var I=O,j=I.canvas,E=I.gl;j.width=b,j.height=q,E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.uniform2f(I.resolutionLocation,b,q);var p,m,_,x=0;for(p=0,m=P.length;p<m;p++)switch(P[p].type){case"lattice":x+=((_=P[p].coords.length/P[p].verticesPerRow|0)-1)*(P[p].verticesPerRow-1)*6;break;case"triangles":x+=P[p].coords.length}var R=new Float32Array(2*x),G=new Uint8Array(3*x),K=F.coords,U=F.colors,z=0,L=0;for(p=0,m=P.length;p<m;p++){var S=P[p],B=S.coords,J=S.colors;switch(S.type){case"lattice":var ie=S.verticesPerRow;_=B.length/ie|0;for(var ce=1;ce<_;ce++)for(var pe=ce*ie+1,ye=1;ye<ie;ye++,pe++)R[z]=K[B[pe-ie-1]],R[z+1]=K[B[pe-ie-1]+1],R[z+2]=K[B[pe-ie]],R[z+3]=K[B[pe-ie]+1],R[z+4]=K[B[pe-1]],R[z+5]=K[B[pe-1]+1],G[L]=U[J[pe-ie-1]],G[L+1]=U[J[pe-ie-1]+1],G[L+2]=U[J[pe-ie-1]+2],G[L+3]=U[J[pe-ie]],G[L+4]=U[J[pe-ie]+1],G[L+5]=U[J[pe-ie]+2],G[L+6]=U[J[pe-1]],G[L+7]=U[J[pe-1]+1],G[L+8]=U[J[pe-1]+2],R[z+6]=R[z+2],R[z+7]=R[z+3],R[z+8]=R[z+4],R[z+9]=R[z+5],R[z+10]=K[B[pe]],R[z+11]=K[B[pe]+1],G[L+9]=G[L+3],G[L+10]=G[L+4],G[L+11]=G[L+5],G[L+12]=G[L+6],G[L+13]=G[L+7],G[L+14]=G[L+8],G[L+15]=U[J[pe]],G[L+16]=U[J[pe]+1],G[L+17]=U[J[pe]+2],z+=12,L+=18;break;case"triangles":for(var Te=0,_e=B.length;Te<_e;Te++)R[z]=K[B[Te]],R[z+1]=K[B[Te]+1],G[L]=U[J[Te]],G[L+1]=U[J[Te]+1],G[L+2]=U[J[Te]+2],z+=2,L+=3}}C?E.clearColor(C[0]/255,C[1]/255,C[2]/255,1):E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT);var we=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,we),E.bufferData(E.ARRAY_BUFFER,R,E.STATIC_DRAW),E.enableVertexAttribArray(I.positionLocation),E.vertexAttribPointer(I.positionLocation,2,E.FLOAT,!1,0,0);var De=E.createBuffer();return E.bindBuffer(E.ARRAY_BUFFER,De),E.bufferData(E.ARRAY_BUFFER,G,E.STATIC_DRAW),E.enableVertexAttribArray(I.colorLocation),E.vertexAttribPointer(I.colorLocation,3,E.UNSIGNED_BYTE,!1,0,0),E.uniform2f(I.scaleLocation,F.scaleX,F.scaleY),E.uniform2f(I.offsetLocation,F.offsetX,F.offsetY),E.drawArrays(E.TRIANGLES,0,x),E.flush(),E.deleteBuffer(we),E.deleteBuffer(De),j},cleanup(){$&&$.canvas&&($.canvas.width=0,$.canvas.height=0),O&&O.canvas&&(O.canvas.width=0,O.canvas.height=0),$=null,O=null}}}()},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.AnnotationLayer=void 0;var le=Oe(1),Ee=Oe(2),se=Oe(8);class y{static create(p){switch(p.data.annotationType){case Ee.AnnotationType.LINK:return new fe(p);case Ee.AnnotationType.TEXT:return new ee(p);case Ee.AnnotationType.WIDGET:switch(p.data.fieldType){case"Tx":return new V(p);case"Btn":return p.data.radioButton?new te(p):p.data.checkBox?new H(p):new re(p);case"Ch":return new f(p)}return new e(p);case Ee.AnnotationType.POPUP:return new c(p);case Ee.AnnotationType.FREETEXT:return new ae(p);case Ee.AnnotationType.LINE:return new oe(p);case Ee.AnnotationType.SQUARE:return new W(p);case Ee.AnnotationType.CIRCLE:return new N(p);case Ee.AnnotationType.POLYLINE:return new O(p);case Ee.AnnotationType.CARET:return new A(p);case Ee.AnnotationType.INK:return new b(p);case Ee.AnnotationType.POLYGON:return new M(p);case Ee.AnnotationType.HIGHLIGHT:return new q(p);case Ee.AnnotationType.UNDERLINE:return new C(p);case Ee.AnnotationType.SQUIGGLY:return new P(p);case Ee.AnnotationType.STRIKEOUT:return new F(p);case Ee.AnnotationType.STAMP:return new I(p);case Ee.AnnotationType.FILEATTACHMENT:return new j(p);default:return new k(p)}}}class k{constructor(p,m=!1,_=!1){this.isRenderable=m,this.data=p.data,this.layer=p.layer,this.page=p.page,this.viewport=p.viewport,this.linkService=p.linkService,this.downloadManager=p.downloadManager,this.imageResourcesPath=p.imageResourcesPath,this.renderInteractiveForms=p.renderInteractiveForms,this.svgFactory=p.svgFactory,this.annotationStorage=p.annotationStorage,m&&(this.container=this._createContainer(_))}_createContainer(p=!1){const m=this.data,_=this.page,R=this.viewport,G=document.createElement("section");let K=m.rect[2]-m.rect[0],U=m.rect[3]-m.rect[1];G.setAttribute("data-annotation-id",m.id);const z=Ee.Util.normalizeRect([m.rect[0],_.view[3]-m.rect[1]+_.view[1],m.rect[2],_.view[3]-m.rect[3]+_.view[1]]);if(G.style.transform=`matrix(${R.transform.join(",")})`,G.style.transformOrigin=`-${z[0]}px -${z[1]}px`,!p&&m.borderStyle.width>0){G.style.borderWidth=`${m.borderStyle.width}px`,m.borderStyle.style!==Ee.AnnotationBorderStyleType.UNDERLINE&&(K-=2*m.borderStyle.width,U-=2*m.borderStyle.width);const L=m.borderStyle.horizontalCornerRadius,S=m.borderStyle.verticalCornerRadius;switch((L>0||S>0)&&(G.style.borderRadius=`${L}px / ${S}px`),m.borderStyle.style){case Ee.AnnotationBorderStyleType.SOLID:G.style.borderStyle="solid";break;case Ee.AnnotationBorderStyleType.DASHED:G.style.borderStyle="dashed";break;case Ee.AnnotationBorderStyleType.BEVELED:(0,Ee.warn)("Unimplemented border style: beveled");break;case Ee.AnnotationBorderStyleType.INSET:(0,Ee.warn)("Unimplemented border style: inset");break;case Ee.AnnotationBorderStyleType.UNDERLINE:G.style.borderBottomStyle="solid"}m.color?G.style.borderColor=Ee.Util.makeCssRgb(0|m.color[0],0|m.color[1],0|m.color[2]):G.style.borderWidth=0}return G.style.left=`${z[0]}px`,G.style.top=`${z[1]}px`,G.style.width=`${K}px`,G.style.height=`${U}px`,G}_createPopup(p,m,_){m||((m=document.createElement("div")).style.height=p.style.height,m.style.width=p.style.width,p.appendChild(m));const G=new $({container:p,trigger:m,color:_.color,title:_.title,modificationDate:_.modificationDate,contents:_.contents,hideWrapper:!0}).render();G.style.left=p.style.width,p.appendChild(G)}render(){(0,Ee.unreachable)("Abstract method `AnnotationElement.render` called")}}class fe extends k{constructor(p){super(p,!!(p.data.url||p.data.dest||p.data.action))}render(){this.container.className="linkAnnotation";const{data:p,linkService:m}=this,_=document.createElement("a");return p.url?(0,le.addLinkAttributes)(_,{url:p.url,target:p.newWindow?le.LinkTarget.BLANK:m.externalLinkTarget,rel:m.externalLinkRel,enabled:m.externalLinkEnabled}):p.action?this._bindNamedAction(_,p.action):this._bindLink(_,p.dest),this.container.appendChild(_),this.container}_bindLink(p,m){p.href=this.linkService.getDestinationHash(m),p.onclick=()=>(m&&this.linkService.navigateTo(m),!1),m&&(p.className="internalLink")}_bindNamedAction(p,m){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeNamedAction(m),!1),p.className="internalLink"}}class ee extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents))}render(){this.container.className="textAnnotation";const p=document.createElement("img");return p.style.height=this.container.style.height,p.style.width=this.container.style.width,p.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",p.alt="[{{type}} Annotation]",p.dataset.l10nId="text_annotation_type",p.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,p,this.data),this.container.appendChild(p),this.container}}class e extends k{render(){return this.container}}class V extends e{constructor(p){super(p,p.renderInteractiveForms||!p.data.hasAppearance&&!!p.data.fieldValue)}render(){const m=this.annotationStorage,_=this.data.id;this.container.className="textWidgetAnnotation";let R=null;if(this.renderInteractiveForms){const G=m.getOrCreateValue(_,this.data.fieldValue);if(this.data.multiLine?(R=document.createElement("textarea"),R.textContent=G):(R=document.createElement("input"),R.type="text",R.setAttribute("value",G)),R.addEventListener("input",function(K){m.setValue(_,K.target.value)}),R.disabled=this.data.readOnly,R.name=this.data.fieldName,null!==this.data.maxLen&&(R.maxLength=this.data.maxLen),this.data.comb){const U=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;R.classList.add("comb"),R.style.letterSpacing=`calc(${U}px - 1ch)`}}else{R=document.createElement("div"),R.textContent=this.data.fieldValue,R.style.verticalAlign="middle",R.style.display="table-cell";let G=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(G=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(R,G)}return null!==this.data.textAlignment&&(R.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(R),this.container}_setTextStyle(p,m){const _=p.style;if(_.fontSize=`${this.data.fontSize}px`,_.direction=this.data.fontDirection<0?"rtl":"ltr",!m)return;let R="normal";m.black?R="900":m.bold&&(R="bold"),_.fontWeight=R,_.fontStyle=m.italic?"italic":"normal",_.fontFamily=(m.loadedName?`"${m.loadedName}", `:"")+(m.fallbackName||"Helvetica, sans-serif")}}class H extends e{constructor(p){super(p,p.renderInteractiveForms)}render(){const p=this.annotationStorage,m=this.data,_=m.id,R=p.getOrCreateValue(_,m.fieldValue&&"Off"!==m.fieldValue);this.container.className="buttonWidgetAnnotation checkBox";const G=document.createElement("input");return G.disabled=m.readOnly,G.type="checkbox",G.name=this.data.fieldName,R&&G.setAttribute("checked",!0),G.addEventListener("change",function(K){p.setValue(_,K.target.checked)}),this.container.appendChild(G),this.container}}class te extends e{constructor(p){super(p,p.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const p=this.annotationStorage,m=this.data,_=m.id,R=p.getOrCreateValue(_,m.fieldValue===m.buttonValue),G=document.createElement("input");return G.disabled=m.readOnly,G.type="radio",G.name=m.fieldName,R&&G.setAttribute("checked",!0),G.addEventListener("change",function(K){const U=K.target.name;for(const z of document.getElementsByName(U))z!==K.target&&p.setValue(z.parentNode.getAttribute("data-annotation-id"),!1);p.setValue(_,K.target.checked)}),this.container.appendChild(G),this.container}}class re extends fe{render(){const p=super.render();return p.className="buttonWidgetAnnotation pushButton",p}}class f extends e{constructor(p){super(p,p.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const p=this.annotationStorage,m=this.data.id;p.getOrCreateValue(m,this.data.fieldValue.length>0?this.data.fieldValue[0]:null);const _=document.createElement("select");_.disabled=this.data.readOnly,_.name=this.data.fieldName,this.data.combo||(_.size=this.data.options.length,this.data.multiSelect&&(_.multiple=!0));for(const R of this.data.options){const G=document.createElement("option");G.textContent=R.displayValue,G.value=R.exportValue,this.data.fieldValue.includes(R.exportValue)&&G.setAttribute("selected",!0),_.appendChild(G)}return _.addEventListener("input",function(R){const G=R.target.options;p.setValue(m,G[G.selectedIndex].value)}),this.container.appendChild(_),this.container}}class c extends k{constructor(p){super(p,!(!p.data.title&&!p.data.contents))}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const _=this.layer.querySelector(`[data-annotation-id="${this.data.parentId}"]`);if(!_)return this.container;const R=new $({container:this.container,trigger:_,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),G=parseFloat(_.style.left),K=parseFloat(_.style.width);return this.container.style.transformOrigin=`-${G+K}px -${_.style.top}`,this.container.style.left=`${G+K}px`,this.container.appendChild(R.render()),this.container}}class ${constructor(p){this.container=p.container,this.trigger=p.trigger,this.color=p.color,this.title=p.title,this.modificationDate=p.modificationDate,this.contents=p.contents,this.hideWrapper=p.hideWrapper||!1,this.pinned=!1}render(){const m=document.createElement("div");m.className="popupWrapper",this.hideElement=this.hideWrapper?m:this.container,this.hideElement.setAttribute("hidden",!0);const _=document.createElement("div");_.className="popup";const R=this.color;R&&(_.style.backgroundColor=Ee.Util.makeCssRgb(0|.7*(255-R[0])+R[0],0|.7*(255-R[1])+R[1],0|.7*(255-R[2])+R[2]));const G=document.createElement("h1");G.textContent=this.title,_.appendChild(G);const K=le.PDFDateString.toDateObject(this.modificationDate);if(K){const z=document.createElement("span");z.textContent="{{date}}, {{time}}",z.dataset.l10nId="annotation_date_string",z.dataset.l10nArgs=JSON.stringify({date:K.toLocaleDateString(),time:K.toLocaleTimeString()}),_.appendChild(z)}const U=this._formatContents(this.contents);return _.appendChild(U),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),_.addEventListener("click",this._hide.bind(this,!0)),m.appendChild(_),m}_formatContents(p){const m=document.createElement("p"),_=p.split(/(?:\r\n?|\n)/);for(let R=0,G=_.length;R<G;++R)m.appendChild(document.createTextNode(_[R])),R<G-1&&m.appendChild(document.createElement("br"));return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(p=!1){p&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(p=!0){p&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class ae extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class oe extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){this.container.className="lineAnnotation";const p=this.data,R=this.svgFactory.create(p.rect[2]-p.rect[0],p.rect[3]-p.rect[1]),G=this.svgFactory.createElement("svg:line");return G.setAttribute("x1",p.rect[2]-p.lineCoordinates[0]),G.setAttribute("y1",p.rect[3]-p.lineCoordinates[1]),G.setAttribute("x2",p.rect[2]-p.lineCoordinates[2]),G.setAttribute("y2",p.rect[3]-p.lineCoordinates[3]),G.setAttribute("stroke-width",p.borderStyle.width||1),G.setAttribute("stroke","transparent"),R.appendChild(G),this.container.append(R),this._createPopup(this.container,G,p),this.container}}class W extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){this.container.className="squareAnnotation";const p=this.data,m=p.rect[2]-p.rect[0],_=p.rect[3]-p.rect[1],R=this.svgFactory.create(m,_),G=p.borderStyle.width,K=this.svgFactory.createElement("svg:rect");return K.setAttribute("x",G/2),K.setAttribute("y",G/2),K.setAttribute("width",m-G),K.setAttribute("height",_-G),K.setAttribute("stroke-width",G||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","none"),R.appendChild(K),this.container.append(R),this._createPopup(this.container,K,p),this.container}}class N extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){this.container.className="circleAnnotation";const p=this.data,m=p.rect[2]-p.rect[0],_=p.rect[3]-p.rect[1],R=this.svgFactory.create(m,_),G=p.borderStyle.width,K=this.svgFactory.createElement("svg:ellipse");return K.setAttribute("cx",m/2),K.setAttribute("cy",_/2),K.setAttribute("rx",m/2-G/2),K.setAttribute("ry",_/2-G/2),K.setAttribute("stroke-width",G||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","none"),R.appendChild(K),this.container.append(R),this._createPopup(this.container,K,p),this.container}}class O extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const p=this.data,R=this.svgFactory.create(p.rect[2]-p.rect[0],p.rect[3]-p.rect[1]);let G=[];for(const U of p.vertices)G.push(U.x-p.rect[0]+","+(p.rect[3]-U.y));G=G.join(" ");const K=this.svgFactory.createElement(this.svgElementName);return K.setAttribute("points",G),K.setAttribute("stroke-width",p.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","none"),R.appendChild(K),this.container.append(R),this._createPopup(this.container,K,p),this.container}}class M extends O{constructor(p){super(p),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class A extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class b extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const p=this.data,R=this.svgFactory.create(p.rect[2]-p.rect[0],p.rect[3]-p.rect[1]);for(const G of p.inkLists){let K=[];for(const z of G)K.push(`${z.x-p.rect[0]},${p.rect[3]-z.y}`);K=K.join(" ");const U=this.svgFactory.createElement(this.svgElementName);U.setAttribute("points",K),U.setAttribute("stroke-width",p.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","none"),this._createPopup(this.container,U,p),R.appendChild(U)}return this.container.append(R),this.container}}class q extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class C extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class P extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class F extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class I extends k{constructor(p){super(p,!!(p.data.hasPopup||p.data.title||p.data.contents),!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class j extends k{constructor(p){super(p,!0);const{filename:m,content:_}=this.data.file;this.filename=(0,le.getFilenameFromUrl)(m),this.content=_,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,Ee.stringToPDFString)(m),filename:m,content:_})}render(){this.container.className="fileAttachmentAnnotation";const p=document.createElement("div");return p.style.height=this.container.style.height,p.style.width=this.container.style.width,p.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,p,this.data),this.container.appendChild(p),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,Ee.warn)("Download cannot be started due to unavailable download manager")}}he.AnnotationLayer=class E{static render(p){const m=[],_=[];for(const R of p.annotations)if(R){if(R.annotationType===Ee.AnnotationType.POPUP){_.push(R);continue}m.push(R)}_.length&&m.push(..._);for(const R of m){const G=y.create({data:R,layer:p.div,page:p.page,viewport:p.viewport,linkService:p.linkService,downloadManager:p.downloadManager,imageResourcesPath:p.imageResourcesPath||"",renderInteractiveForms:"boolean"!=typeof p.renderInteractiveForms||p.renderInteractiveForms,svgFactory:new le.DOMSVGFactory,annotationStorage:p.annotationStorage||new se.AnnotationStorage});G.isRenderable&&p.div.appendChild(G.render())}}static update(p){for(const m of p.annotations){const _=p.div.querySelector(`[data-annotation-id="${m.id}"]`);_&&(_.style.transform=`matrix(${p.viewport.transform.join(",")})`)}p.div.removeAttribute("hidden")}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.renderTextLayer=void 0;var le=Oe(2),Ee=function(){var k=/\S/;function ee($,ae,oe){var W=document.createElement("span"),N={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if($._textDivs.push(W),function fe($){return!k.test($)}(ae.str))return N.isWhitespace=!0,void $._textDivProperties.set(W,N);var O=le.Util.transform($._viewport.transform,ae.transform),M=Math.atan2(O[1],O[0]),A=oe[ae.fontName];A.vertical&&(M+=Math.PI/2);var b=Math.sqrt(O[2]*O[2]+O[3]*O[3]),q=b;let C,P;A.ascent?q*=A.ascent:A.descent&&(q*=1+A.descent),0===M?(C=O[4],P=O[5]-q):(C=O[4]+q*Math.sin(M),P=O[5]-q*Math.cos(M)),W.style.left=`${C}px`,W.style.top=`${P}px`,W.style.fontSize=`${b}px`,W.style.fontFamily=A.fontFamily,W.textContent=ae.str,$._fontInspectorEnabled&&(W.dataset.fontName=ae.fontName),0!==M&&(N.angle=M*(180/Math.PI));let F=!1;if(ae.str.length>1)F=!0;else if(ae.transform[0]!==ae.transform[3]){const _=Math.abs(ae.transform[0]),R=Math.abs(ae.transform[3]);_!==R&&Math.max(_,R)/Math.min(_,R)>1.5&&(F=!0)}if(F&&(N.canvasWidth=A.vertical?ae.height*$._viewport.scale:ae.width*$._viewport.scale),$._textDivProperties.set(W,N),$._textContentStream&&$._layoutText(W),$._enhanceTextSelection){var I=1,j=0;0!==M&&(I=Math.cos(M),j=Math.sin(M));var p,m,E=(A.vertical?ae.height:ae.width)*$._viewport.scale,x=b;m=0!==M?le.Util.getAxialAlignedBoundingBox([0,0,E,x],p=[I,j,-j,I,C,P]):[C,P,C+E,P+x],$._bounds.push({left:m[0],top:m[1],right:m[2],bottom:m[3],div:W,size:[E,x],m:p})}}function e($){if(!$._canceled){var ae=$._textDivs,oe=$._capability,W=ae.length;if(W>1e5)return $._renderingDone=!0,void oe.resolve();if(!$._textContentStream)for(var N=0;N<W;N++)$._layoutText(ae[N]);$._renderingDone=!0,oe.resolve()}}function V($,ae,oe){let W=0;for(let N=0;N<oe;N++){const O=$[ae++];O>0&&(W=W?Math.min(O,W):O)}return W}function re($,ae){ae.sort(function(N,O){return N.x1-O.x1||N.index-O.index});var W=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];ae.forEach(function(N){for(var O=0;O<W.length&&W[O].end<=N.y1;)O++;for(var M=W.length-1;M>=0&&W[M].start>=N.y2;)M--;var A,b,q,C,P=-1/0;for(q=O;q<=M;q++){var F;(F=(b=(A=W[q]).boundary).x2>N.x1?b.index>N.index?b.x1New:N.x1:void 0===b.x2New?(b.x2+N.x1)/2:b.x2New)>P&&(P=F)}for(N.x1New=P,q=O;q<=M;q++)void 0===(b=(A=W[q]).boundary).x2New?b.x2>N.x1?b.index>N.index&&(b.x2New=b.x2):b.x2New=P:b.x2New>P&&(b.x2New=Math.max(P,b.x2));var I=[],j=null;for(q=O;q<=M;q++){var E=(b=(A=W[q]).boundary).x2>N.x2?b:N;j===E?I[I.length-1].end=A.end:(I.push({start:A.start,end:A.end,boundary:E}),j=E)}for(W[O].start<N.y1&&(I[0].start=N.y1,I.unshift({start:W[O].start,end:N.y1,boundary:W[O].boundary})),N.y2<W[M].end&&(I[I.length-1].end=N.y2,I.push({start:N.y2,end:W[M].end,boundary:W[M].boundary})),q=O;q<=M;q++)if(void 0===(b=(A=W[q]).boundary).x2New){var x=!1;for(C=O-1;!x&&C>=0&&W[C].start>=b.y1;C--)x=W[C].boundary===b;for(C=M+1;!x&&C<W.length&&W[C].end<=b.y2;C++)x=W[C].boundary===b;for(C=0;!x&&C<I.length;C++)x=I[C].boundary===b;x||(b.x2New=P)}Array.prototype.splice.apply(W,[O,M-O+1].concat(I))}),W.forEach(function(N){var O=N.boundary;void 0===O.x2New&&(O.x2New=Math.max($,O.x2))})}function f({textContent:$,textContentStream:ae,container:oe,viewport:W,textDivs:N,textContentItemsStr:O,enhanceTextSelection:M}){this._textContent=$,this._textContentStream=ae,this._container=oe,this._document=oe.ownerDocument,this._viewport=W,this._textDivs=N||[],this._textContentItemsStr=O||[],this._enhanceTextSelection=!!M,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,le.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}return f.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new le.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems($,ae){for(let oe=0,W=$.length;oe<W;oe++)this._textContentItemsStr.push($[oe].str),ee(this,$[oe],ae)},_layoutText($){const ae=this._textDivProperties.get($);if(ae.isWhitespace)return;let oe="";if(0!==ae.canvasWidth){const{fontSize:W,fontFamily:N}=$.style;(W!==this._layoutTextLastFontSize||N!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${W} ${N}`,this._layoutTextLastFontSize=W,this._layoutTextLastFontFamily=N);const{width:O}=this._layoutTextCtx.measureText($.textContent);O>0&&(ae.scale=ae.canvasWidth/O,oe=`scaleX(${ae.scale})`)}0!==ae.angle&&(oe=`rotate(${ae.angle}deg) ${oe}`),oe.length>0&&(this._enhanceTextSelection&&(ae.originalTransform=oe),$.style.transform=oe),this._textDivProperties.set($,ae),this._container.appendChild($)},_render:function(ae){const oe=(0,le.createPromiseCapability)();let W=Object.create(null);const N=this._document.createElement("canvas");if(N.mozOpaque=!0,this._layoutTextCtx=N.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),oe.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const O=()=>{this._reader.read().then(({value:M,done:A})=>{A?oe.resolve():(Object.assign(W,M.styles),this._processItems(M.items,W),O())},oe.reject)};this._reader=this._textContentStream.getReader(),O()}}oe.promise.then(()=>{W=null,ae?this._renderTimer=setTimeout(()=>{e(this),this._renderTimer=null},ae):e(this)},this._capability.reject)},expandTextDivs:function(ae){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function H($){for(var ae=$._bounds,oe=$._viewport,W=function te($,ae,oe){var W=oe.map(function(O,M){return{x1:O.left,y1:O.top,x2:O.right,y2:O.bottom,index:M,x1New:void 0,x2New:void 0}});re($,W);var N=new Array(oe.length);return W.forEach(function(O){N[O.index]={left:O.x1New,top:0,right:O.x2New,bottom:0}}),oe.map(function(O,M){var A=N[M],b=W[M];b.x1=O.top,b.y1=$-A.right,b.x2=O.bottom,b.y2=$-A.left,b.index=M,b.x1New=void 0,b.x2New=void 0}),re(ae,W),W.forEach(function(O){var M=O.index;N[M].top=O.x1New,N[M].bottom=O.x2New}),N}(oe.width,oe.height,ae),N=0;N<W.length;N++){var O=ae[N].div,M=$._textDivProperties.get(O);if(0!==M.angle){var A=W[N],b=ae[N],q=b.m,C=q[0],P=q[1],F=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],I=new Float64Array(64);F.forEach(function(E,x){var p=le.Util.applyTransform(E,q);I[x+0]=C&&(A.left-p[0])/C,I[x+4]=P&&(A.top-p[1])/P,I[x+8]=C&&(A.right-p[0])/C,I[x+12]=P&&(A.bottom-p[1])/P,I[x+16]=P&&(A.left-p[0])/-P,I[x+20]=C&&(A.top-p[1])/C,I[x+24]=P&&(A.right-p[0])/-P,I[x+28]=C&&(A.bottom-p[1])/C,I[x+32]=C&&(A.left-p[0])/-C,I[x+36]=P&&(A.top-p[1])/-P,I[x+40]=C&&(A.right-p[0])/-C,I[x+44]=P&&(A.bottom-p[1])/-P,I[x+48]=P&&(A.left-p[0])/P,I[x+52]=C&&(A.top-p[1])/-C,I[x+56]=P&&(A.right-p[0])/P,I[x+60]=C&&(A.bottom-p[1])/-C});var j=1+Math.min(Math.abs(C),Math.abs(P));M.paddingLeft=V(I,32,16)/j,M.paddingTop=V(I,48,16)/j,M.paddingRight=V(I,0,16)/j,M.paddingBottom=V(I,16,16)/j,$._textDivProperties.set(O,M)}else M.paddingLeft=ae[N].left-W[N].left,M.paddingTop=ae[N].top-W[N].top,M.paddingRight=W[N].right-ae[N].right,M.paddingBottom=W[N].bottom-ae[N].bottom,$._textDivProperties.set(O,M)}}(this),this._bounds=null);const oe=[],W=[];for(var N=0,O=this._textDivs.length;N<O;N++){const M=this._textDivs[N],A=this._textDivProperties.get(M);A.isWhitespace||(ae?(oe.length=0,W.length=0,A.originalTransform&&oe.push(A.originalTransform),A.paddingTop>0?(W.push(`${A.paddingTop}px`),oe.push(`translateY(${-A.paddingTop}px)`)):W.push(0),W.push(A.paddingRight>0?A.paddingRight/A.scale+"px":0),W.push(A.paddingBottom>0?`${A.paddingBottom}px`:0),A.paddingLeft>0?(W.push(A.paddingLeft/A.scale+"px"),oe.push(`translateX(${-A.paddingLeft/A.scale}px)`)):W.push(0),M.style.padding=W.join(" "),oe.length&&(M.style.transform=oe.join(" "))):(M.style.padding=null,M.style.transform=A.originalTransform))}}},function c($){var ae=new f({textContent:$.textContent,textContentStream:$.textContentStream,container:$.container,viewport:$.viewport,textDivs:$.textDivs,textContentItemsStr:$.textContentItemsStr,enhanceTextSelection:$.enhanceTextSelection});return ae._render($.timeout),ae}}();he.renderTextLayer=Ee},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.SVGGraphics=void 0;var le=Oe(2),Ee=Oe(1),se=Oe(4);let y=function(){throw new Error("Not implemented: SVGGraphics")};he.SVGGraphics=y;{let re=function(W){let N=[];const O=[];for(const M of W)"save"!==M.fn?"restore"===M.fn?N=O.pop():N.push(M):(N.push({fnId:92,fn:"group",items:[]}),O.push(N),N=N[N.length-1].items);return N},f=function(W){if(Number.isInteger(W))return W.toString();const N=W.toFixed(10);let O=N.length-1;if("0"!==N[O])return N;do{O--}while("0"===N[O]);return N.substring(0,"."===N[O]?O:O+1)},c=function(W){if(0===W[4]&&0===W[5]){if(0===W[1]&&0===W[2])return 1===W[0]&&1===W[3]?"":`scale(${f(W[0])} ${f(W[3])})`;if(W[0]===W[3]&&W[1]===-W[2]){const N=180*Math.acos(W[0])/Math.PI;return`rotate(${f(N)})`}}else if(1===W[0]&&0===W[1]&&0===W[2]&&1===W[3])return`translate(${f(W[4])} ${f(W[5])})`;return`matrix(${f(W[0])} ${f(W[1])} ${f(W[2])} ${f(W[3])} ${f(W[4])} ${f(W[5])})`};const k={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},fe="http://www.w3.org/XML/1998/namespace",ee="http://www.w3.org/1999/xlink",e=["butt","round","square"],V=["miter","round","bevel"],H=function(){const W=new Uint8Array([137,80,78,71,13,10,26,10]),O=new Int32Array(256);for(let F=0;F<256;F++){let I=F;for(let j=0;j<8;j++)I=1&I?3988292384^I>>1&2147483647:I>>1&2147483647;O[F]=I}function A(F,I,j,E){let x=E;const p=I.length;j[x]=p>>24&255,j[x+1]=p>>16&255,j[x+2]=p>>8&255,j[x+3]=255&p,x+=4,j[x]=255&F.charCodeAt(0),j[x+1]=255&F.charCodeAt(1),j[x+2]=255&F.charCodeAt(2),j[x+3]=255&F.charCodeAt(3),x+=4,j.set(I,x),x+=I.length;const m=function M(F,I,j){let E=-1;for(let x=I;x<j;x++)E=E>>>8^O[255&(E^F[x])];return-1^E}(j,E+4,x);j[x]=m>>24&255,j[x+1]=m>>16&255,j[x+2]=m>>8&255,j[x+3]=255&m}function C(F){let I=F.length;const j=65535,E=Math.ceil(I/j),x=new Uint8Array(2+I+5*E+4);let p=0;x[p++]=120,x[p++]=156;let m=0;for(;I>j;)x[p++]=0,x[p++]=255,x[p++]=255,x[p++]=0,x[p++]=0,x.set(F.subarray(m,m+j),p),p+=j,m+=j,I-=j;x[p++]=1,x[p++]=255&I,x[p++]=I>>8&255,x[p++]=255&~I,x[p++]=(65535&~I)>>8&255,x.set(F.subarray(m),p),p+=F.length-m;const _=function b(F,I,j){let E=1,x=0;for(let p=I;p<j;++p)E=(E+(255&F[p]))%65521,x=(x+E)%65521;return x<<16|E}(F,0,F.length);return x[p++]=_>>24&255,x[p++]=_>>16&255,x[p++]=_>>8&255,x[p++]=255&_,x}return function(I,j,E){return function P(F,I,j,E){const x=F.width,p=F.height;let m,_,R;const G=F.data;switch(I){case le.ImageKind.GRAYSCALE_1BPP:_=0,m=1,R=x+7>>3;break;case le.ImageKind.RGB_24BPP:_=2,m=8,R=3*x;break;case le.ImageKind.RGBA_32BPP:_=6,m=8,R=4*x;break;default:throw new Error("invalid format")}const K=new Uint8Array((1+R)*p);let U=0,z=0;for(let ce=0;ce<p;++ce)K[U++]=0,K.set(G.subarray(z,z+R),U),z+=R,U+=R;if(I===le.ImageKind.GRAYSCALE_1BPP&&E){U=0;for(let ce=0;ce<p;ce++){U++;for(let pe=0;pe<R;pe++)K[U++]^=255}}const L=new Uint8Array([x>>24&255,x>>16&255,x>>8&255,255&x,p>>24&255,p>>16&255,p>>8&255,255&p,m,_,0,0,0]),S=function q(F){if(!se.isNodeJS)return C(F);try{let I;I=parseInt(process.versions.node)>=8?F:Buffer.from(F);const j=__webpack_require__(258).deflateSync(I,{level:9});return j instanceof Uint8Array?j:new Uint8Array(j)}catch(I){(0,le.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+I)}return C(F)}(K),J=new Uint8Array(W.length+36+L.length+S.length);let ie=0;return J.set(W,ie),ie+=W.length,A("IHDR",L,J,ie),ie+=12+L.length,A("IDATA",S,J,ie),ie+=12+S.length,A("IEND",new Uint8Array(0),J,ie),(0,le.createObjectURL)(J,"image/png",j)}(I,void 0===I.kind?le.ImageKind.GRAYSCALE_1BPP:I.kind,j,E)}}();class te{constructor(){this.fontSizeScale=1,this.fontWeight=k.fontWeight,this.fontSize=0,this.textMatrix=le.IDENTITY_MATRIX,this.fontMatrix=le.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=le.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=k.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(N,O){this.x=N,this.y=O}}let $=0,ae=0,oe=0;he.SVGGraphics=y=class{constructor(N,O,M=!1){this.svgFactory=new Ee.DOMSVGFactory,this.current=new te,this.transformMatrix=le.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=N,this.objs=O,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!M,this._operatorIdMapping=[];for(const A in le.OPS)this._operatorIdMapping[le.OPS[A]]=A}save(){this.transformStack.push(this.transformMatrix);const N=this.current;this.extraStack.push(N),this.current=N.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(N){this.save(),this.executeOpTree(N),this.restore()}loadDependencies(N){const O=N.fnArray,M=N.argsArray;for(let A=0,b=O.length;A<b;A++)if(O[A]===le.OPS.dependency)for(const q of M[A]){const C=q.startsWith("g_")?this.commonObjs:this.objs,P=new Promise(F=>{C.get(q,F)});this.current.dependencies.push(P)}return Promise.all(this.current.dependencies)}transform(N,O,M,A,b,q){this.transformMatrix=le.Util.transform(this.transformMatrix,[N,O,M,A,b,q]),this.tgrp=null}getSVG(N,O){this.viewport=O;const M=this._initialize(O);return this.loadDependencies(N).then(()=>(this.transformMatrix=le.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(N)),M))}convertOpList(N){const O=this._operatorIdMapping,M=N.argsArray,A=N.fnArray,b=[];for(let q=0,C=A.length;q<C;q++){const P=A[q];b.push({fnId:P,fn:O[P],args:M[q]})}return re(b)}executeOpTree(N){for(const O of N){const M=O.fn,b=O.args;switch(0|O.fnId){case le.OPS.beginText:this.beginText();break;case le.OPS.dependency:break;case le.OPS.setLeading:this.setLeading(b);break;case le.OPS.setLeadingMoveText:this.setLeadingMoveText(b[0],b[1]);break;case le.OPS.setFont:this.setFont(b);break;case le.OPS.showText:case le.OPS.showSpacedText:this.showText(b[0]);break;case le.OPS.endText:this.endText();break;case le.OPS.moveText:this.moveText(b[0],b[1]);break;case le.OPS.setCharSpacing:this.setCharSpacing(b[0]);break;case le.OPS.setWordSpacing:this.setWordSpacing(b[0]);break;case le.OPS.setHScale:this.setHScale(b[0]);break;case le.OPS.setTextMatrix:this.setTextMatrix(b[0],b[1],b[2],b[3],b[4],b[5]);break;case le.OPS.setTextRise:this.setTextRise(b[0]);break;case le.OPS.setTextRenderingMode:this.setTextRenderingMode(b[0]);break;case le.OPS.setLineWidth:this.setLineWidth(b[0]);break;case le.OPS.setLineJoin:this.setLineJoin(b[0]);break;case le.OPS.setLineCap:this.setLineCap(b[0]);break;case le.OPS.setMiterLimit:this.setMiterLimit(b[0]);break;case le.OPS.setFillRGBColor:this.setFillRGBColor(b[0],b[1],b[2]);break;case le.OPS.setStrokeRGBColor:this.setStrokeRGBColor(b[0],b[1],b[2]);break;case le.OPS.setStrokeColorN:this.setStrokeColorN(b);break;case le.OPS.setFillColorN:this.setFillColorN(b);break;case le.OPS.shadingFill:this.shadingFill(b[0]);break;case le.OPS.setDash:this.setDash(b[0],b[1]);break;case le.OPS.setRenderingIntent:this.setRenderingIntent(b[0]);break;case le.OPS.setFlatness:this.setFlatness(b[0]);break;case le.OPS.setGState:this.setGState(b[0]);break;case le.OPS.fill:this.fill();break;case le.OPS.eoFill:this.eoFill();break;case le.OPS.stroke:this.stroke();break;case le.OPS.fillStroke:this.fillStroke();break;case le.OPS.eoFillStroke:this.eoFillStroke();break;case le.OPS.clip:this.clip("nonzero");break;case le.OPS.eoClip:this.clip("evenodd");break;case le.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case le.OPS.paintImageXObject:this.paintImageXObject(b[0]);break;case le.OPS.paintInlineImageXObject:this.paintInlineImageXObject(b[0]);break;case le.OPS.paintImageMaskXObject:this.paintImageMaskXObject(b[0]);break;case le.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(b[0],b[1]);break;case le.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case le.OPS.closePath:this.closePath();break;case le.OPS.closeStroke:this.closeStroke();break;case le.OPS.closeFillStroke:this.closeFillStroke();break;case le.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case le.OPS.nextLine:this.nextLine();break;case le.OPS.transform:this.transform(b[0],b[1],b[2],b[3],b[4],b[5]);break;case le.OPS.constructPath:this.constructPath(b[0],b[1]);break;case le.OPS.endPath:this.endPath();break;case 92:this.group(O.items);break;default:(0,le.warn)(`Unimplemented operator ${M}`)}}}setWordSpacing(N){this.current.wordSpacing=N}setCharSpacing(N){this.current.charSpacing=N}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(N,O,M,A,b,q){const C=this.current;C.textMatrix=C.lineMatrix=[N,O,M,A,b,q],C.textMatrixScale=Math.sqrt(N*N+O*O),C.x=C.lineX=0,C.y=C.lineY=0,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${f(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",f(-C.y)),C.txtElement=this.svgFactory.createElement("svg:text"),C.txtElement.appendChild(C.tspan)}beginText(){const N=this.current;N.x=N.lineX=0,N.y=N.lineY=0,N.textMatrix=le.IDENTITY_MATRIX,N.lineMatrix=le.IDENTITY_MATRIX,N.textMatrixScale=1,N.tspan=this.svgFactory.createElement("svg:tspan"),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtgrp=this.svgFactory.createElement("svg:g"),N.xcoords=[],N.ycoords=[]}moveText(N,O){const M=this.current;M.x=M.lineX+=N,M.y=M.lineY+=O,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${f(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",f(-M.y))}showText(N){const O=this.current,M=O.font,A=O.fontSize;if(0===A)return;const b=O.fontSizeScale,q=O.charSpacing,C=O.wordSpacing,P=O.fontDirection,F=O.textHScale*P,I=M.vertical,j=I?1:-1,E=M.defaultVMetrics,x=A*O.fontMatrix[0];let p=0;for(const R of N){if(null===R){p+=P*C;continue}if((0,le.isNum)(R)){p+=j*R*A/1e3;continue}const G=(R.isSpace?C:0)+q,K=R.fontChar;let U,z,S,L=R.width;if(I){let B;const J=R.vmetric||E;B=R.vmetric?J[1]:.5*L,B=-B*x,L=J?-J[0]:L,U=B/b,z=(p+J[2]*x)/b}else U=p/b,z=0;(R.isInFont||M.missingFile)&&(O.xcoords.push(O.x+U),I&&O.ycoords.push(-O.y+z),O.tspan.textContent+=K),S=I?L*x-G*P:L*x+G*P,p+=S}O.tspan.setAttributeNS(null,"x",O.xcoords.map(f).join(" ")),O.tspan.setAttributeNS(null,"y",I?O.ycoords.map(f).join(" "):f(-O.y)),I?O.y-=p:O.x+=p*F,O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${f(O.fontSize)}px`),O.fontStyle!==k.fontStyle&&O.tspan.setAttributeNS(null,"font-style",O.fontStyle),O.fontWeight!==k.fontWeight&&O.tspan.setAttributeNS(null,"font-weight",O.fontWeight);const m=O.textRenderingMode&le.TextRenderingMode.FILL_STROKE_MASK;m===le.TextRenderingMode.FILL||m===le.TextRenderingMode.FILL_STROKE?(O.fillColor!==k.fillColor&&O.tspan.setAttributeNS(null,"fill",O.fillColor),O.fillAlpha<1&&O.tspan.setAttributeNS(null,"fill-opacity",O.fillAlpha)):O.tspan.setAttributeNS(null,"fill",O.textRenderingMode===le.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(m===le.TextRenderingMode.STROKE||m===le.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(O.tspan,1/(O.textMatrixScale||1));let _=O.textMatrix;0!==O.textRise&&(_=_.slice(),_[5]+=O.textRise),O.txtElement.setAttributeNS(null,"transform",`${c(_)} scale(${f(F)}, -1)`),O.txtElement.setAttributeNS(fe,"xml:space","preserve"),O.txtElement.appendChild(O.tspan),O.txtgrp.appendChild(O.txtElement),this._ensureTransformGroup().appendChild(O.txtElement)}setLeadingMoveText(N,O){this.setLeading(-O),this.moveText(N,O)}addFontStyle(N){if(!N.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const O=(0,le.createObjectURL)(N.data,N.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${N.loadedName}"; src: url(${O}); }\n`}setFont(N){const O=this.current,M=this.commonObjs.get(N[0]);let A=N[1];O.font=M,this.embedFonts&&!M.missingFile&&!this.embeddedFonts[M.loadedName]&&(this.addFontStyle(M),this.embeddedFonts[M.loadedName]=M),O.fontMatrix=M.fontMatrix?M.fontMatrix:le.FONT_IDENTITY_MATRIX;let b="normal";M.black?b="900":M.bold&&(b="bold");const q=M.italic?"italic":"normal";A<0?(A=-A,O.fontDirection=-1):O.fontDirection=1,O.fontSize=A,O.fontFamily=M.loadedName,O.fontWeight=b,O.fontStyle=q,O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"y",f(-O.y)),O.xcoords=[],O.ycoords=[]}endText(){const N=this.current;N.textRenderingMode&le.TextRenderingMode.ADD_TO_PATH_FLAG&&N.txtElement&&N.txtElement.hasChildNodes()&&(N.element=N.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(N){N>0&&(this.current.lineWidth=N)}setLineCap(N){this.current.lineCap=e[N]}setLineJoin(N){this.current.lineJoin=V[N]}setMiterLimit(N){this.current.miterLimit=N}setStrokeAlpha(N){this.current.strokeAlpha=N}setStrokeRGBColor(N,O,M){this.current.strokeColor=le.Util.makeCssRgb(N,O,M)}setFillAlpha(N){this.current.fillAlpha=N}setFillRGBColor(N,O,M){this.current.fillColor=le.Util.makeCssRgb(N,O,M),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(N){this.current.strokeColor=this._makeColorN_Pattern(N)}setFillColorN(N){this.current.fillColor=this._makeColorN_Pattern(N)}shadingFill(N){const O=this.viewport.width,M=this.viewport.height,A=le.Util.inverseTransform(this.transformMatrix),b=le.Util.applyTransform([0,0],A),q=le.Util.applyTransform([0,M],A),C=le.Util.applyTransform([O,0],A),P=le.Util.applyTransform([O,M],A),F=Math.min(b[0],q[0],C[0],P[0]),I=Math.min(b[1],q[1],C[1],P[1]),j=Math.max(b[0],q[0],C[0],P[0]),E=Math.max(b[1],q[1],C[1],P[1]),x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x",F),x.setAttributeNS(null,"y",I),x.setAttributeNS(null,"width",j-F),x.setAttributeNS(null,"height",E-I),x.setAttributeNS(null,"fill",this._makeShadingPattern(N)),this.current.fillAlpha<1&&x.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(x)}_makeColorN_Pattern(N){return"TilingPattern"===N[0]?this._makeTilingPattern(N):this._makeShadingPattern(N)}_makeTilingPattern(N){const O=N[1],M=N[2],A=N[3]||le.IDENTITY_MATRIX,[b,q,C,P]=N[4],F=N[5],I=N[6],j=N[7],E="shading"+oe++,[x,p]=le.Util.applyTransform([b,q],A),[m,_]=le.Util.applyTransform([C,P],A),[R,G]=le.Util.singularValueDecompose2dScale(A),K=F*R,U=I*G,z=this.svgFactory.createElement("svg:pattern");z.setAttributeNS(null,"id",E),z.setAttributeNS(null,"patternUnits","userSpaceOnUse"),z.setAttributeNS(null,"width",K),z.setAttributeNS(null,"height",U),z.setAttributeNS(null,"x",`${x}`),z.setAttributeNS(null,"y",`${p}`);const L=this.svg,S=this.transformMatrix,B=this.current.fillColor,J=this.current.strokeColor,ie=this.svgFactory.create(m-x,_-p);if(this.svg=ie,this.transformMatrix=A,2===j){const ce=le.Util.makeCssRgb(...O);this.current.fillColor=ce,this.current.strokeColor=ce}return this.executeOpTree(this.convertOpList(M)),this.svg=L,this.transformMatrix=S,this.current.fillColor=B,this.current.strokeColor=J,z.appendChild(ie.childNodes[0]),this.defs.appendChild(z),`url(#${E})`}_makeShadingPattern(N){switch(N[0]){case"RadialAxial":const O="shading"+oe++,M=N[3];let A;switch(N[1]){case"axial":const b=N[4],q=N[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",O),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",b[0]),A.setAttributeNS(null,"y1",b[1]),A.setAttributeNS(null,"x2",q[0]),A.setAttributeNS(null,"y2",q[1]);break;case"radial":const C=N[4],P=N[5],F=N[6],I=N[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",O),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",P[0]),A.setAttributeNS(null,"cy",P[1]),A.setAttributeNS(null,"r",I),A.setAttributeNS(null,"fx",C[0]),A.setAttributeNS(null,"fy",C[1]),A.setAttributeNS(null,"fr",F);break;default:throw new Error(`Unknown RadialAxial type: ${N[1]}`)}for(const b of M){const q=this.svgFactory.createElement("svg:stop");q.setAttributeNS(null,"offset",b[0]),q.setAttributeNS(null,"stop-color",b[1]),A.appendChild(q)}return this.defs.appendChild(A),`url(#${O})`;case"Mesh":return(0,le.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${N[0]}`)}}setDash(N,O){this.current.dashArray=N,this.current.dashPhase=O}constructPath(N,O){const M=this.current;let A=M.x,b=M.y,q=[],C=0;for(const P of N)switch(0|P){case le.OPS.rectangle:A=O[C++],b=O[C++];const j=A+O[C++],E=b+O[C++];q.push("M",f(A),f(b),"L",f(j),f(b),"L",f(j),f(E),"L",f(A),f(E),"Z");break;case le.OPS.moveTo:A=O[C++],b=O[C++],q.push("M",f(A),f(b));break;case le.OPS.lineTo:A=O[C++],b=O[C++],q.push("L",f(A),f(b));break;case le.OPS.curveTo:A=O[C+4],b=O[C+5],q.push("C",f(O[C]),f(O[C+1]),f(O[C+2]),f(O[C+3]),f(A),f(b)),C+=6;break;case le.OPS.curveTo2:q.push("C",f(A),f(b),f(O[C]),f(O[C+1]),f(O[C+2]),f(O[C+3])),A=O[C+2],b=O[C+3],C+=4;break;case le.OPS.curveTo3:A=O[C+2],b=O[C+3],q.push("C",f(O[C]),f(O[C+1]),f(A),f(b),f(A),f(b)),C+=4;break;case le.OPS.closePath:q.push("Z")}q=q.join(" "),M.path&&N.length>0&&N[0]!==le.OPS.rectangle&&N[0]!==le.OPS.moveTo?q=M.path.getAttributeNS(null,"d")+q:(M.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(M.path)),M.path.setAttributeNS(null,"d",q),M.path.setAttributeNS(null,"fill","none"),M.element=M.path,M.setCurrentPoint(A,b)}endPath(){const N=this.current;if(N.path=null,!this.pendingClip)return;if(!N.element)return void(this.pendingClip=null);const O="clippath"+$++,M=this.svgFactory.createElement("svg:clipPath");M.setAttributeNS(null,"id",O),M.setAttributeNS(null,"transform",c(this.transformMatrix));const A=N.element.cloneNode(!0);A.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,M.appendChild(A),this.defs.appendChild(M),N.activeClipUrl&&(N.clipGroup=null,this.extraStack.forEach(function(b){b.clipGroup=null}),M.setAttributeNS(null,"clip-path",N.activeClipUrl)),N.activeClipUrl=`url(#${O})`,this.tgrp=null}clip(N){this.pendingClip=N}closePath(){const N=this.current;if(N.path){const O=`${N.path.getAttributeNS(null,"d")}Z`;N.path.setAttributeNS(null,"d",O)}}setLeading(N){this.current.leading=-N}setTextRise(N){this.current.textRise=N}setTextRenderingMode(N){this.current.textRenderingMode=N}setHScale(N){this.current.textHScale=N/100}setRenderingIntent(N){}setFlatness(N){}setGState(N){for(const[O,M]of N)switch(O){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M);break;case"CA":this.setStrokeAlpha(M);break;case"ca":this.setFillAlpha(M);break;default:(0,le.warn)(`Unimplemented graphic state operator ${O}`)}}fill(){const N=this.current;N.element&&(N.element.setAttributeNS(null,"fill",N.fillColor),N.element.setAttributeNS(null,"fill-opacity",N.fillAlpha),this.endPath())}stroke(){const N=this.current;N.element&&(this._setStrokeAttributes(N.element),N.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(N,O=1){const M=this.current;let A=M.dashArray;1!==O&&A.length>0&&(A=A.map(function(b){return O*b})),N.setAttributeNS(null,"stroke",M.strokeColor),N.setAttributeNS(null,"stroke-opacity",M.strokeAlpha),N.setAttributeNS(null,"stroke-miterlimit",f(M.miterLimit)),N.setAttributeNS(null,"stroke-linecap",M.lineCap),N.setAttributeNS(null,"stroke-linejoin",M.lineJoin),N.setAttributeNS(null,"stroke-width",f(O*M.lineWidth)+"px"),N.setAttributeNS(null,"stroke-dasharray",A.map(f).join(" ")),N.setAttributeNS(null,"stroke-dashoffset",f(O*M.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width","1px"),N.setAttributeNS(null,"height","1px"),N.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(N)}paintImageXObject(N){const O=N.startsWith("g_")?this.commonObjs.get(N):this.objs.get(N);O?this.paintInlineImageXObject(O):(0,le.warn)(`Dependent image with object ID ${N} is not ready yet`)}paintInlineImageXObject(N,O){const M=N.width,A=N.height,b=H(N,this.forceDataSchema,!!O),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",f(M)),q.setAttributeNS(null,"height",f(A)),this.current.element=q,this.clip("nonzero");const C=this.svgFactory.createElement("svg:image");C.setAttributeNS(ee,"xlink:href",b),C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y",f(-A)),C.setAttributeNS(null,"width",f(M)+"px"),C.setAttributeNS(null,"height",f(A)+"px"),C.setAttributeNS(null,"transform",`scale(${f(1/M)} ${f(-1/A)})`),O?O.appendChild(C):this._ensureTransformGroup().appendChild(C)}paintImageMaskXObject(N){const O=this.current,M=N.width,A=N.height,b=O.fillColor;O.maskId="mask"+ae++;const q=this.svgFactory.createElement("svg:mask");q.setAttributeNS(null,"id",O.maskId);const C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y","0"),C.setAttributeNS(null,"width",f(M)),C.setAttributeNS(null,"height",f(A)),C.setAttributeNS(null,"fill",b),C.setAttributeNS(null,"mask",`url(#${O.maskId})`),this.defs.appendChild(q),this._ensureTransformGroup().appendChild(C),this.paintInlineImageXObject(N,q)}paintFormXObjectBegin(N,O){if(Array.isArray(N)&&6===N.length&&this.transform(N[0],N[1],N[2],N[3],N[4],N[5]),O){const M=O[2]-O[0],A=O[3]-O[1],b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x",O[0]),b.setAttributeNS(null,"y",O[1]),b.setAttributeNS(null,"width",f(M)),b.setAttributeNS(null,"height",f(A)),this.current.element=b,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(N){const O=this.svgFactory.create(N.width,N.height),M=this.svgFactory.createElement("svg:defs");O.appendChild(M),this.defs=M;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",c(N.transform)),O.appendChild(A),this.svg=A,O}_ensureClipGroup(){if(!this.current.clipGroup){const N=this.svgFactory.createElement("svg:g");N.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(N),this.current.clipGroup=N}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.PDFNodeStream=void 0;var le=Oe(2),Ee=Oe(23);const se=__webpack_require__(172),y=__webpack_require__(1),k=__webpack_require__(779),fe=__webpack_require__(558),ee=/^file:\/\/\/[a-zA-Z]:\//;he.PDFNodeStream=class V{constructor(W){this.source=W,this.url=function e(oe){const W=fe.parse(oe);return"file:"===W.protocol||W.host?W:/^[a-z]:[/\\]/i.test(oe)?fe.parse(`file:///${oe}`):(W.host||(W.protocol="file:"),W)}(W.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&W.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,le.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new $(this):new f(this),this._fullRequestReader}getRangeReader(W,N){if(N<=this._progressiveDataLength)return null;const O=this.isFsUrl?new ae(this,W,N):new c(this,W,N);return this._rangeRequestReaders.push(O),O}cancelAllRequests(W){this._fullRequestReader&&this._fullRequestReader.cancel(W),this._rangeRequestReaders.slice(0).forEach(function(O){O.cancel(W)})}};class H{constructor(W){this._url=W.url,this._done=!1,this._storedError=null,this.onProgress=null;const N=W.source;this._contentLength=N.length,this._loaded=0,this._filename=null,this._disableRange=N.disableRange||!1,this._rangeChunkSize=N.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!N.disableStream,this._isRangeSupported=!N.disableRange,this._readableStream=null,this._readCapability=(0,le.createPromiseCapability)(),this._headersCapability=(0,le.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var W=this;return _asyncToGenerator(function*(){if(yield W._readCapability.promise,W._done)return{value:void 0,done:!0};if(W._storedError)throw W._storedError;const N=W._readableStream.read();return null===N?(W._readCapability=(0,le.createPromiseCapability)(),W.read()):(W._loaded+=N.length,W.onProgress&&W.onProgress({loaded:W._loaded,total:W._contentLength}),{value:new Uint8Array(N).buffer,done:!1})})()}cancel(W){this._readableStream?this._readableStream.destroy(W):this._error(W)}_error(W){this._storedError=W,this._readCapability.resolve()}_setReadableStream(W){this._readableStream=W,W.on("readable",()=>{this._readCapability.resolve()}),W.on("end",()=>{W.destroy(),this._done=!0,this._readCapability.resolve()}),W.on("error",N=>{this._error(N)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new le.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class te{constructor(W){this._url=W.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,le.createPromiseCapability)(),this._isStreamingSupported=!W.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var W=this;return _asyncToGenerator(function*(){if(yield W._readCapability.promise,W._done)return{value:void 0,done:!0};if(W._storedError)throw W._storedError;const N=W._readableStream.read();return null===N?(W._readCapability=(0,le.createPromiseCapability)(),W.read()):(W._loaded+=N.length,W.onProgress&&W.onProgress({loaded:W._loaded}),{value:new Uint8Array(N).buffer,done:!1})})()}cancel(W){this._readableStream?this._readableStream.destroy(W):this._error(W)}_error(W){this._storedError=W,this._readCapability.resolve()}_setReadableStream(W){this._readableStream=W,W.on("readable",()=>{this._readCapability.resolve()}),W.on("end",()=>{W.destroy(),this._done=!0,this._readCapability.resolve()}),W.on("error",N=>{this._error(N)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function re(oe,W){return{protocol:oe.protocol,auth:oe.auth,host:oe.hostname,port:oe.port,path:oe.path,method:"GET",headers:W}}class f extends H{constructor(W){super(W);const N=O=>{if(404===O.statusCode){const q=new le.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=q,void this._headersCapability.reject(q)}this._headersCapability.resolve(),this._setReadableStream(O);const M=q=>this._readableStream.headers[q.toLowerCase()],{allowRangeRequests:A,suggestedLength:b}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:W.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=b||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(M)};this._request=null,this._request="http:"===this._url.protocol?y.request(re(this._url,W.httpHeaders),N):k.request(re(this._url,W.httpHeaders),N),this._request.on("error",O=>{this._storedError=O,this._headersCapability.reject(O)}),this._request.end()}}class c extends te{constructor(W,N,O){super(W),this._httpHeaders={};for(const A in W.httpHeaders){const b=W.httpHeaders[A];typeof b>"u"||(this._httpHeaders[A]=b)}this._httpHeaders.Range=`bytes=${N}-${O-1}`;const M=A=>{if(404!==A.statusCode)this._setReadableStream(A);else{const b=new le.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=b}};this._request=null,this._request="http:"===this._url.protocol?y.request(re(this._url,this._httpHeaders),M):k.request(re(this._url,this._httpHeaders),M),this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class $ extends H{constructor(W){super(W);let N=decodeURIComponent(this._url.path);ee.test(this._url.href)&&(N=N.replace(/^\//,"")),se.lstat(N,(O,M)=>{if(O)return"ENOENT"===O.code&&(O=new le.MissingPDFException(`Missing PDF "${N}".`)),this._storedError=O,void this._headersCapability.reject(O);this._contentLength=M.size,this._setReadableStream(se.createReadStream(N)),this._headersCapability.resolve()})}}class ae extends te{constructor(W,N,O){super(W);let M=decodeURIComponent(this._url.path);ee.test(this._url.href)&&(M=M.replace(/^\//,"")),this._setReadableStream(se.createReadStream(M,{start:N,end:O-1}))}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.createResponseStatusError=function k(ee,e){return 404===ee||0===ee&&e.startsWith("file:")?new le.MissingPDFException('Missing PDF "'+e+'".'):new le.UnexpectedResponseException("Unexpected server response ("+ee+') while retrieving PDF "'+e+'".',ee)},he.extractFilenameFromHeader=function y(ee){const e=ee("Content-Disposition");if(e){let V=(0,Ee.getFilenameFromContentDispositionHeader)(e);if(V.includes("%"))try{V=decodeURIComponent(V)}catch{}if(/\.pdf$/i.test(V))return V}return null},he.validateRangeRequestCapabilities=function se({getResponseHeader:ee,isHttp:e,rangeChunkSize:V,disableRange:H}){(0,le.assert)(V>0,"Range chunk size must be larger than zero");const te={allowRangeRequests:!1,suggestedLength:void 0},re=parseInt(ee("Content-Length"),10);return!Number.isInteger(re)||(te.suggestedLength=re,re<=2*V)||H||!e||"bytes"!==ee("Accept-Ranges")||"identity"!==(ee("Content-Encoding")||"identity")||(te.allowRangeRequests=!0),te},he.validateResponseStatus=function fe(ee){return 200===ee||206===ee};var le=Oe(2),Ee=Oe(24)},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.getFilenameFromContentDispositionHeader=function le(Ee){let se=!0,y=k("filename\\*","i").exec(Ee);if(y){y=y[1];let re=V(y);return re=unescape(re),re=H(re),re=te(re),ee(re)}if(y=function e(re){const f=[];let c;const $=k("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(c=$.exec(re));){let[,oe,W,N]=c;if(oe=parseInt(oe,10),oe in f){if(0===oe)break}else f[oe]=[W,N]}const ae=[];for(let oe=0;oe<f.length&&oe in f;++oe){let[W,N]=f[oe];N=V(N),W&&(N=unescape(N),0===oe&&(N=H(N))),ae.push(N)}return ae.join("")}(Ee),y)return ee(te(y));if(y=k("filename","i").exec(Ee),y){y=y[1];let re=V(y);return re=te(re),ee(re)}function k(re,f){return new RegExp("(?:^|;)\\s*"+re+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function fe(re,f){if(re){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const c=new TextDecoder(re,{fatal:!0}),$=Array.from(f,function(ae){return 255&ae.charCodeAt(0)});f=c.decode(new Uint8Array($)),se=!1}catch{if(/^utf-?8$/i.test(re))try{f=decodeURIComponent(escape(f)),se=!1}catch{}}}return f}function ee(re){return se&&/[\x80-\xff]/.test(re)&&(re=fe("utf-8",re),se&&(re=fe("iso-8859-1",re))),re}function V(re){if(re.startsWith('"')){const f=re.slice(1).split('\\"');for(let c=0;c<f.length;++c){const $=f[c].indexOf('"');-1!==$&&(f[c]=f[c].slice(0,$),f.length=c+1),f[c]=f[c].replace(/\\(.)/g,"$1")}re=f.join('"')}return re}function H(re){const f=re.indexOf("'");return-1===f?re:fe(re.slice(0,f),re.slice(f+1).replace(/^[^']*'/,""))}function te(re){return!re.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(re)?re:re.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,c,$,ae){if("q"===$||"Q"===$)return fe(c,ae=(ae=ae.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(oe,W){return String.fromCharCode(parseInt(W,16))}));try{ae=atob(ae)}catch{}return fe(c,ae)})}return""}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.PDFNetworkStream=void 0;var le=Oe(2),Ee=Oe(23);class fe{constructor(te,re){this.url=te,re=re||{},this.isHttp=/^https?:/i.test(te),this.httpHeaders=this.isHttp&&re.httpHeaders||{},this.withCredentials=re.withCredentials||!1,this.getXhr=re.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(te,re,f){const c={begin:te,end:re};for(const $ in f)c[$]=f[$];return this.request(c)}requestFull(te){return this.request(te)}request(te){const re=this.getXhr(),f=this.currXhrId++,c=this.pendingRequests[f]={xhr:re};re.open("GET",this.url),re.withCredentials=this.withCredentials;for(const $ in this.httpHeaders){const ae=this.httpHeaders[$];typeof ae>"u"||re.setRequestHeader($,ae)}return this.isHttp&&"begin"in te&&"end"in te?(re.setRequestHeader("Range",`bytes=${te.begin}-${te.end-1}`),c.expectedStatus=206):c.expectedStatus=200,re.responseType="arraybuffer",te.onError&&(re.onerror=function($){te.onError(re.status)}),re.onreadystatechange=this.onStateChange.bind(this,f),re.onprogress=this.onProgress.bind(this,f),c.onHeadersReceived=te.onHeadersReceived,c.onDone=te.onDone,c.onError=te.onError,c.onProgress=te.onProgress,re.send(null),f}onProgress(te,re){const f=this.pendingRequests[te];f&&f.onProgress&&f.onProgress(re)}onStateChange(te,re){const f=this.pendingRequests[te];if(!f)return;const c=f.xhr;if(c.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),4!==c.readyState||!(te in this.pendingRequests))return;if(delete this.pendingRequests[te],0===c.status&&this.isHttp)return void(f.onError&&f.onError(c.status));const $=c.status||200;if((200!==$||206!==f.expectedStatus)&&$!==f.expectedStatus)return void(f.onError&&f.onError(c.status));const oe=function k(H){const te=H.response;return"string"!=typeof te?te:(0,le.stringToBytes)(te).buffer}(c);if(206===$){const W=c.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(W);f.onDone({begin:parseInt(N[1],10),chunk:oe})}else oe?f.onDone({begin:0,chunk:oe}):f.onError&&f.onError(c.status)}getRequestXhr(te){return this.pendingRequests[te].xhr}isPendingRequest(te){return te in this.pendingRequests}abortRequest(te){const re=this.pendingRequests[te].xhr;delete this.pendingRequests[te],re.abort()}}he.PDFNetworkStream=class ee{constructor(te){this._source=te,this._manager=new fe(te.url,{httpHeaders:te.httpHeaders,withCredentials:te.withCredentials}),this._rangeChunkSize=te.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(te){const re=this._rangeRequestReaders.indexOf(te);re>=0&&this._rangeRequestReaders.splice(re,1)}getFullReader(){return(0,le.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new e(this._manager,this._source),this._fullRequestReader}getRangeReader(te,re){const f=new V(this._manager,te,re);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(te){this._fullRequestReader&&this._fullRequestReader.cancel(te),this._rangeRequestReaders.slice(0).forEach(function(f){f.cancel(te)})}};class e{constructor(te,re){this._manager=te;const f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=re.url,this._fullRequestId=te.requestFull(f),this._headersReceivedCapability=(0,le.createPromiseCapability)(),this._disableRange=re.disableRange||!1,this._contentLength=re.length,this._rangeChunkSize=re.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const te=this._fullRequestId,re=this._manager.getRequestXhr(te),f=ae=>re.getResponseHeader(ae),{allowRangeRequests:c,suggestedLength:$}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});c&&(this._isRangeSupported=!0),this._contentLength=$||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(te),this._headersReceivedCapability.resolve()}_onDone(te){te&&(this._requests.length>0?this._requests.shift().resolve({value:te.chunk,done:!1}):this._cachedChunks.push(te.chunk)),this._done=!0,!(this._cachedChunks.length>0)&&(this._requests.forEach(function(re){re.resolve({value:void 0,done:!0})}),this._requests=[])}_onError(te){const f=(0,Ee.createResponseStatusError)(te,this._url);this._storedError=f,this._headersReceivedCapability.reject(f),this._requests.forEach(function(c){c.reject(f)}),this._requests=[],this._cachedChunks=[]}_onProgress(te){this.onProgress&&this.onProgress({loaded:te.loaded,total:te.lengthComputable?te.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var te=this;return _asyncToGenerator(function*(){if(te._storedError)throw te._storedError;if(te._cachedChunks.length>0)return{value:te._cachedChunks.shift(),done:!1};if(te._done)return{value:void 0,done:!0};const re=(0,le.createPromiseCapability)();return te._requests.push(re),re.promise})()}cancel(te){this._done=!0,this._headersReceivedCapability.reject(te),this._requests.forEach(function(re){re.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V{constructor(te,re,f){this._manager=te;const c={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=te.requestRange(re,f,c),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(te){const re=te.chunk;this._requests.length>0?this._requests.shift().resolve({value:re,done:!1}):this._queuedChunk=re,this._done=!0,this._requests.forEach(function(f){f.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(te){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:te.loaded})}get isStreamingSupported(){return!1}read(){var te=this;return _asyncToGenerator(function*(){if(null!==te._queuedChunk){const f=te._queuedChunk;return te._queuedChunk=null,{value:f,done:!1}}if(te._done)return{value:void 0,done:!0};const re=(0,le.createPromiseCapability)();return te._requests.push(re),re.promise})()}cancel(te){this._done=!0,this._requests.forEach(function(re){re.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(yt,he,Oe){"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.PDFFetchStream=void 0;var le=Oe(2),Ee=Oe(23);function se(e,V,H){return{method:"GET",headers:e,signal:H&&H.signal,mode:"cors",credentials:V?"include":"same-origin",redirect:"follow"}}function y(e){const V=new Headers;for(const H in e){const te=e[H];typeof te>"u"||V.append(H,te)}return V}he.PDFFetchStream=class k{constructor(V){this.source=V,this.isHttp=/^https?:/i.test(V.url),this.httpHeaders=this.isHttp&&V.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,le.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new fe(this),this._fullRequestReader}getRangeReader(V,H){if(H<=this._progressiveDataLength)return null;const te=new ee(this,V,H);return this._rangeRequestReaders.push(te),te}cancelAllRequests(V){this._fullRequestReader&&this._fullRequestReader.cancel(V),this._rangeRequestReaders.slice(0).forEach(function(te){te.cancel(V)})}};class fe{constructor(V){this._stream=V,this._reader=null,this._loaded=0,this._filename=null;const H=V.source;this._withCredentials=H.withCredentials||!1,this._contentLength=H.length,this._headersCapability=(0,le.createPromiseCapability)(),this._disableRange=H.disableRange||!1,this._rangeChunkSize=H.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!H.disableStream,this._isRangeSupported=!H.disableRange,this._headers=y(this._stream.httpHeaders);const te=H.url;fetch(te,se(this._headers,this._withCredentials,this._abortController)).then(re=>{if(!(0,Ee.validateResponseStatus)(re.status))throw(0,Ee.createResponseStatusError)(re.status,te);this._reader=re.body.getReader(),this._headersCapability.resolve();const f=ae=>re.headers.get(ae),{allowRangeRequests:c,suggestedLength:$}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=$||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new le.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var V=this;return _asyncToGenerator(function*(){yield V._headersCapability.promise;const{value:H,done:te}=yield V._reader.read();return te?{value:H,done:te}:(V._loaded+=H.byteLength,V.onProgress&&V.onProgress({loaded:V._loaded,total:V._contentLength}),{value:new Uint8Array(H).buffer,done:!1})})()}cancel(V){this._reader&&this._reader.cancel(V),this._abortController&&this._abortController.abort()}}class ee{constructor(V,H,te){this._stream=V,this._reader=null,this._loaded=0;const re=V.source;this._withCredentials=re.withCredentials||!1,this._readCapability=(0,le.createPromiseCapability)(),this._isStreamingSupported=!re.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=y(this._stream.httpHeaders),this._headers.append("Range",`bytes=${H}-${te-1}`);const f=re.url;fetch(f,se(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,Ee.validateResponseStatus)(c.status))throw(0,Ee.createResponseStatusError)(c.status,f);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(c=>{if(!c||"AbortError"!==c.name)throw c}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var V=this;return _asyncToGenerator(function*(){yield V._readCapability.promise;const{value:H,done:te}=yield V._reader.read();return te?{value:H,done:te}:(V._loaded+=H.byteLength,V.onProgress&&V.onProgress({loaded:V._loaded}),{value:new Uint8Array(H).buffer,done:!1})})()}cancel(V){this._reader&&this._reader.cancel(V),this._abortController&&this._abortController.abort()}}}])},module.exports=Oe()},272:(yt,he,Oe)=>{(typeof window<"u"?window:{}).pdfjsWorker=Oe(68)},68:function(yt,he,Oe){var le=Oe(156).default;yt.exports=function(Ee){var se={};function y(k){if(se[k])return se[k].exports;var fe=se[k]={i:k,l:!1,exports:{}};return Ee[k].call(fe.exports,fe,fe.exports,y),fe.l=!0,fe.exports}return y.m=Ee,y.c=se,y.d=function(k,fe,ee){y.o(k,fe)||Object.defineProperty(k,fe,{enumerable:!0,get:ee})},y.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},y.t=function(k,fe){if(1&fe&&(k=y(k)),8&fe||4&fe&&"object"==typeof k&&k&&k.__esModule)return k;var ee=Object.create(null);if(y.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:k}),2&fe&&"string"!=typeof k)for(var e in k)y.d(ee,e,function(V){return k[V]}.bind(null,e));return ee},y.n=function(k){var fe=k&&k.__esModule?function(){return k.default}:function(){return k};return y.d(fe,"a",fe),fe},y.o=function(k,fe){return Object.prototype.hasOwnProperty.call(k,fe)},y.p="",y(y.s=0)}([function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),Object.defineProperty(se,"WorkerMessageHandler",{enumerable:!0,get:function(){return k.WorkerMessageHandler}});var k=y(1)},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.WorkerMessageHandler=se.WorkerTask=void 0;var k=y(2),fe=y(5),ee=y(6),e=y(27),V=y(4),H=y(46),te=y(47),re=y(8);class f{constructor(oe){this.name=oe,this.terminated=!1,this._capability=(0,k.createPromiseCapability)()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}se.WorkerTask=f;class c{static setup(oe,W){var N=!1;oe.on("test",function(M){if(N)return;if(N=!0,!(M instanceof Uint8Array))return void oe.send("test",null);const A=255===M[0];oe.postMessageTransfers=A,oe.send("test",{supportTransfers:A})}),oe.on("configure",function(M){(0,k.setVerbosityLevel)(M.verbosity)}),oe.on("GetDocRequest",function(M){return c.createDocumentHandler(M,W)})}static createDocumentHandler(oe,W){var N,O=!1,M=null,A=[];const b=(0,k.getVerbosityLevel)(),q=oe.apiVersion,C="2.6.347";if(q!==C)throw new Error(`The API version "${q}" does not match the Worker version "${C}".`);const P=[];for(const U in[])P.push(U);if(P.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+P.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if(typeof ReadableStream>"u"||typeof Promise.allSettled>"u")throw new Error("The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream` and/or `Promise.allSettled`); please use an ES5-compatible build instead.");var F=oe.docId,I=oe.docBaseUrl,j=oe.docId+"_worker",E=new H.MessageHandler(j,F,W);function x(){if(O)throw new Error("Worker was terminated")}function p(U){A.push(U)}function m(U){U.finish();var z=A.indexOf(U);A.splice(z,1)}function _(U){return R.apply(this,arguments)}function R(){return(R=le(function*(U){yield N.ensureDoc("checkHeader"),yield N.ensureDoc("parseStartXRef"),yield N.ensureDoc("parse",[U]),U||(yield N.ensureDoc("checkFirstPage"));const[z,L]=yield Promise.all([N.ensureDoc("numPages"),N.ensureDoc("fingerprint")]);return{numPages:z,fingerprint:L}})).apply(this,arguments)}function G(U,z){var L=(0,k.createPromiseCapability)();let S;var B=U.source;if(B.data){try{S=new ee.LocalPdfManager(F,B.data,B.password,z,I),L.resolve(S)}catch(_e){L.reject(_e)}return L.promise}var J,ie=[];try{J=new te.PDFWorkerStream(E)}catch(_e){return L.reject(_e),L.promise}var ce=J.getFullReader();ce.headersReady.then(function(){if(ce.isRangeSupported){S=new ee.NetworkPdfManager(F,J,{msgHandler:E,password:B.password,length:ce.contentLength,disableAutoFetch:B.disableAutoFetch||ce.isStreamingSupported,rangeChunkSize:B.rangeChunkSize},z,I);for(let we=0;we<ie.length;we++)S.sendProgressiveData(ie[we]);ie=[],L.resolve(S),M=null}}).catch(function(_e){L.reject(_e),M=null});var pe=0;return new Promise(function(_e,we){var De=function({value:xe,done:Ce}){try{if(x(),Ce)return S||function(){var _e=(0,k.arraysToBytes)(ie);B.length&&_e.length!==B.length&&(0,k.warn)("reported HTTP length is different from actual");try{S=new ee.LocalPdfManager(F,_e,B.password,z,I),L.resolve(S)}catch(we){L.reject(we)}ie=[]}(),void(M=null);pe+=(0,k.arrayByteLength)(xe),ce.isStreamingSupported||E.send("DocProgress",{loaded:pe,total:Math.max(pe,ce.contentLength||0)}),S?S.sendProgressiveData(xe):ie.push(xe),ce.read().then(De,we)}catch(Me){we(Me)}};ce.read().then(De,we)}).catch(function(_e){L.reject(_e),M=null}),M=function(_e){J.cancelAllRequests(_e)},L.promise}return E.postMessageTransfers=oe.postMessageTransfers,E.on("GetPage",function(z){return N.getPage(z.pageIndex).then(function(L){return Promise.all([N.ensure(L,"rotate"),N.ensure(L,"ref"),N.ensure(L,"userUnit"),N.ensure(L,"view")]).then(function([S,B,J,ie]){return{rotate:S,ref:B,userUnit:J,view:ie}})})}),E.on("GetPageIndex",function({ref:z}){const L=fe.Ref.get(z.num,z.gen);return N.ensureCatalog("getPageIndex",[L])}),E.on("GetDestinations",function(z){return N.ensureCatalog("destinations")}),E.on("GetDestination",function(z){return N.ensureCatalog("getDestination",[z.id])}),E.on("GetPageLabels",function(z){return N.ensureCatalog("pageLabels")}),E.on("GetPageLayout",function(z){return N.ensureCatalog("pageLayout")}),E.on("GetPageMode",function(z){return N.ensureCatalog("pageMode")}),E.on("GetViewerPreferences",function(U){return N.ensureCatalog("viewerPreferences")}),E.on("GetOpenAction",function(U){return N.ensureCatalog("openAction")}),E.on("GetAttachments",function(z){return N.ensureCatalog("attachments")}),E.on("GetJavaScript",function(z){return N.ensureCatalog("javaScript")}),E.on("GetOutline",function(z){return N.ensureCatalog("documentOutline")}),E.on("GetOptionalContentConfig",function(U){return N.ensureCatalog("optionalContentConfig")}),E.on("GetPermissions",function(U){return N.ensureCatalog("permissions")}),E.on("GetMetadata",function(z){return Promise.all([N.ensureDoc("documentInfo"),N.ensureCatalog("metadata")])}),E.on("GetData",function(z){return N.requestLoadedStream(),N.onLoadedStream().then(function(L){return L.bytes})}),E.on("GetStats",function(z){return N.ensureXRef("stats")}),E.on("GetAnnotations",function({pageIndex:U,intent:z}){return N.getPage(U).then(function(L){return L.getAnnotationsData(z)})}),E.on("SaveDocument",function({numPages:U,annotationStorage:z,filename:L}){N.requestLoadedStream();const S=[N.onLoadedStream()],B=N.pdfDocument;for(let J=0;J<U;J++)S.push(N.getPage(J).then(function(ie){const ce=new f(`Save: page ${J}`);return ie.save(E,ce,z)}));return Promise.all(S).then(([J,...ie])=>{let ce=[];for(const Te of ie)ce=Te.filter(_e=>null!==_e).reduce((_e,we)=>_e.concat(we),ce);if(0===ce.length)return J.bytes;const pe=B.xref;let ye=Object.create(null);if(pe.trailer){const Te=Object.create(null),_e=pe.trailer.get("Info")||null;_e&&_e.forEach((we,De)=>{(0,k.isString)(we)&&(0,k.isString)(De)&&(Te[we]=(0,k.stringToPDFString)(De))}),ye={rootRef:pe.trailer.getRaw("Root")||null,encrypt:pe.trailer.getRaw("Encrypt")||null,newRef:pe.getNewRef(),infoRef:pe.trailer.getRaw("Info")||null,info:Te,fileIds:pe.trailer.getRaw("ID")||null,startXRef:B.startXRef,filename:L}}return pe.resetNewRef(),(0,e.incrementalUpdate)(J.bytes,ye,ce)})}),E.on("GetOperatorList",function(z,L){var S=z.pageIndex;N.getPage(S).then(function(B){var J=new f(`GetOperatorList: page ${S}`);p(J);const ie=b>=k.VerbosityLevel.INFOS?Date.now():0;B.getOperatorList({handler:E,sink:L,task:J,intent:z.intent,renderInteractiveForms:z.renderInteractiveForms,annotationStorage:z.annotationStorage}).then(function(ce){m(J),ie&&(0,k.info)(`page=${S+1} - getOperatorList: time=${Date.now()-ie}ms, len=${ce.length}`),L.close()},function(ce){m(J),!J.terminated&&(E.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorOperatorList}),L.error(ce))})})},this),E.on("GetTextContent",function(z,L){var S=z.pageIndex;L.onPull=function(B){},L.onCancel=function(B){},N.getPage(S).then(function(B){var J=new f("GetTextContent: page "+S);p(J);const ie=b>=k.VerbosityLevel.INFOS?Date.now():0;B.extractTextContent({handler:E,task:J,sink:L,normalizeWhitespace:z.normalizeWhitespace,combineTextItems:z.combineTextItems}).then(function(){m(J),ie&&(0,k.info)(`page=${S+1} - getTextContent: time=${Date.now()-ie}ms`),L.close()},function(ce){m(J),!J.terminated&&L.error(ce)})})}),E.on("FontFallback",function(U){return N.fontFallback(U.id,E)}),E.on("Cleanup",function(z){return N.cleanup(!0)}),E.on("Terminate",function(z){O=!0;const L=[];if(N){N.terminate(new k.AbortException("Worker was terminated."));const S=N.cleanup();L.push(S),N=null}else(0,fe.clearPrimitiveCaches)();return M&&M(new k.AbortException("Worker was terminated.")),A.forEach(function(S){L.push(S.finished),S.terminate()}),Promise.all(L).then(function(){E.destroy(),E=null})}),E.on("Ready",function(z){(function K(U){function z(J){x(),E.send("GetDoc",{pdfInfo:J})}function L(J){if(x(),J instanceof k.PasswordException){var ie=new f(`PasswordException: response ${J.code}`);p(ie),E.sendWithPromise("PasswordRequest",J).then(function({password:ce}){m(ie),N.updatePassword(ce),S()}).catch(function(){m(ie),E.send("DocException",J)})}else E.send("DocException",J instanceof k.InvalidPDFException||J instanceof k.MissingPDFException||J instanceof k.UnexpectedResponseException||J instanceof k.UnknownErrorException?J:new k.UnknownErrorException(J.message,J.toString()))}function S(){x(),_(!1).then(z,function(J){x(),J instanceof re.XRefParseException?(N.requestLoadedStream(),N.onLoadedStream().then(function(){x(),_(!0).then(z,L)})):L(J)})}x(),G(U,{maxImageSize:U.maxImageSize,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,isEvalSupported:U.isEvalSupported,fontExtraProperties:U.fontExtraProperties}).then(function(J){if(O)throw J.terminate(new k.AbortException("Worker was terminated.")),new Error("Worker was terminated");(N=J).onLoadedStream().then(function(ie){E.send("DataLoaded",{length:ie.bytes.byteLength})})}).then(S,L)})(oe),oe=null}),j}static initializeFromPort(oe){var W=new H.MessageHandler("worker","main",oe);c.setup(W,oe),W.send("ready",null)}}se.WorkerMessageHandler=c,typeof window>"u"&&!V.isNodeJS&&typeof self<"u"&&function $(ae){return"function"==typeof ae.postMessage&&"onmessage"in ae}(self)&&c.initializeFromPort(self)},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.arrayByteLength=Te,se.arraysToBytes=function _e(je){const Ue=je.length;if(1===Ue&&je[0]instanceof Uint8Array)return je[0];let ct=0;for(let jt=0;jt<Ue;jt++)ct+=Te(je[jt]);let _t=0;const Ut=new Uint8Array(ct);for(let jt=0;jt<Ue;jt++){let rt=je[jt];rt instanceof Uint8Array||(rt="string"==typeof rt?ye(rt):new Uint8Array(rt));const Pe=rt.byteLength;Ut.set(rt,_t),_t+=Pe}return Ut},se.assert=x,se.bytesToString=function pe(je){x(null!==je&&"object"==typeof je&&void 0!==je.length,"Invalid argument for bytesToString");const Ue=je.length;if(Ue<8192)return String.fromCharCode.apply(null,je);const _t=[];for(let Ut=0;Ut<Ue;Ut+=8192){const jt=Math.min(Ut+8192,Ue),rt=je.subarray(Ut,jt);_t.push(String.fromCharCode.apply(null,rt))}return _t.join("")},se.createPromiseCapability=function Ge(){const je=Object.create(null);let Ue=!1;return Object.defineProperty(je,"settled",{get:()=>Ue}),je.promise=new Promise(function(ct,_t){je.resolve=function(Ut){Ue=!0,ct(Ut)},je.reject=function(Ut){Ue=!0,_t(Ut)}}),je},se.escapeString=function Ye(je){return je.replace(/([\(\)\\])/g,"\\$1")},se.getModificationDate=function st(je=new Date(Date.now())){return[je.getUTCFullYear().toString(),(je.getUTCMonth()+1).toString().padStart(2,"0"),(je.getUTCDate()+1).toString().padStart(2,"0"),je.getUTCHours().toString().padStart(2,"0"),je.getUTCMinutes().toString().padStart(2,"0"),je.getUTCSeconds().toString().padStart(2,"0")].join("")},se.getVerbosityLevel=function F(){return C},se.info=function I(je){C>=O.INFOS&&console.log(`Info: ${je}`)},se.isArrayBuffer=function Dt(je){return"object"==typeof je&&null!==je&&void 0!==je.byteLength},se.isArrayEqual=function et(je,Ue){return je.length===Ue.length&&je.every(function(ct,_t){return ct===Ue[_t]})},se.isBool=function it(je){return"boolean"==typeof je},se.isNum=function dt(je){return"number"==typeof je},se.isString=function pt(je){return"string"==typeof je},se.isSameOrigin=function p(je,Ue){let ct;try{if(ct=new URL(je),!ct.origin||"null"===ct.origin)return!1}catch{return!1}const _t=new URL(Ue,ct);return ct.origin===_t.origin},se.createValidAbsoluteUrl=function _(je,Ue){if(!je)return null;try{const ct=Ue?new URL(je,Ue):new URL(je);if(function m(je){if(!je)return!1;switch(je.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(ct))return ct}catch{}return null},se.removeNullCharacters=function ce(je){return"string"!=typeof je?(j("The argument for removeNullCharacters must be a string."),je):je.replace(ie,"")},se.setVerbosityLevel=function P(je){Number.isInteger(je)&&(C=je)},se.shadow=R,se.string32=function we(je){return String.fromCharCode(je>>24&255,je>>16&255,je>>8&255,255&je)},se.stringToBytes=ye,se.stringToPDFString=function Qe(je){const Ue=je.length,ct=[];if("\xfe"===je[0]&&"\xff"===je[1])for(let _t=2;_t<Ue;_t+=2)ct.push(String.fromCharCode(je.charCodeAt(_t)<<8|je.charCodeAt(_t+1)));else if("\xff"===je[0]&&"\xfe"===je[1])for(let _t=2;_t<Ue;_t+=2)ct.push(String.fromCharCode(je.charCodeAt(_t+1)<<8|je.charCodeAt(_t)));else for(let _t=0;_t<Ue;++_t){const Ut=Xe[je.charCodeAt(_t)];ct.push(Ut?String.fromCharCode(Ut):je.charAt(_t))}return ct.join("")},se.stringToUTF8String=function Je(je){return decodeURIComponent(escape(je))},se.utf8StringToString=function He(je){return unescape(encodeURIComponent(je))},se.warn=j,se.unreachable=E,se.IsEvalSupportedCached=se.IsLittleEndianCached=se.createObjectURL=se.FormatError=se.Util=se.UnknownErrorException=se.UnexpectedResponseException=se.TextRenderingMode=se.StreamType=se.PermissionFlag=se.PasswordResponses=se.PasswordException=se.MissingPDFException=se.InvalidPDFException=se.AbortException=se.CMapCompressionType=se.ImageKind=se.FontType=se.AnnotationType=se.AnnotationStateModelType=se.AnnotationReviewState=se.AnnotationReplyType=se.AnnotationMarkedState=se.AnnotationFlag=se.AnnotationFieldFlag=se.AnnotationBorderStyleType=se.UNSUPPORTED_FEATURES=se.VerbosityLevel=se.OPS=se.IDENTITY_MATRIX=se.FONT_IDENTITY_MATRIX=se.BaseException=void 0,y(3),se.IDENTITY_MATRIX=[1,0,0,1,0,0],se.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],se.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},se.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},se.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},se.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},se.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},se.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},se.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},se.AnnotationReplyType={GROUP:"Group",REPLY:"R"},se.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},se.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},se.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},se.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},se.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const O={ERRORS:0,WARNINGS:1,INFOS:5};se.VerbosityLevel=O,se.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},se.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},se.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},se.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let C=O.WARNINGS;function j(je){C>=O.WARNINGS&&console.log(`Warning: ${je}`)}function E(je){throw new Error(je)}function x(je,Ue){je||E(Ue)}function R(je,Ue,ct){return Object.defineProperty(je,Ue,{value:ct,enumerable:!0,configurable:!0,writable:!1}),ct}const G=function(){function Ue(ct){this.constructor===Ue&&E("Cannot initialize BaseException."),this.message=ct,this.name=this.constructor.name}return Ue.prototype=new Error,Ue.constructor=Ue,Ue}();se.BaseException=G;se.PasswordException=class K extends G{constructor(Ue,ct){super(Ue),this.code=ct}};se.UnknownErrorException=class U extends G{constructor(Ue,ct){super(Ue),this.details=ct}};se.InvalidPDFException=class z extends G{};se.MissingPDFException=class L extends G{};se.UnexpectedResponseException=class S extends G{constructor(Ue,ct){super(Ue),this.status=ct}};se.FormatError=class B extends G{};se.AbortException=class J extends G{};const ie=/\x00/g;function ye(je){x("string"==typeof je,"Invalid argument for stringToBytes");const Ue=je.length,ct=new Uint8Array(Ue);for(let _t=0;_t<Ue;++_t)ct[_t]=255&je.charCodeAt(_t);return ct}function Te(je){return void 0!==je.length?je.length:(x(void 0!==je.byteLength,"arrayByteLength - invalid argument."),je.byteLength)}se.IsLittleEndianCached={get value(){return R(this,"value",function De(){const je=new Uint8Array(4);return je[0]=1,1===new Uint32Array(je.buffer,0,1)[0]}())}},se.IsEvalSupportedCached={get value(){return R(this,"value",function Ce(){try{return new Function(""),!0}catch{return!1}}())}};const Ne=["rgb(",0,",",0,",",0,")"];class We{static makeCssRgb(Ue,ct,_t){return Ne[1]=Ue,Ne[3]=ct,Ne[5]=_t,Ne.join("")}static transform(Ue,ct){return[Ue[0]*ct[0]+Ue[2]*ct[1],Ue[1]*ct[0]+Ue[3]*ct[1],Ue[0]*ct[2]+Ue[2]*ct[3],Ue[1]*ct[2]+Ue[3]*ct[3],Ue[0]*ct[4]+Ue[2]*ct[5]+Ue[4],Ue[1]*ct[4]+Ue[3]*ct[5]+Ue[5]]}static applyTransform(Ue,ct){return[Ue[0]*ct[0]+Ue[1]*ct[2]+ct[4],Ue[0]*ct[1]+Ue[1]*ct[3]+ct[5]]}static applyInverseTransform(Ue,ct){const _t=ct[0]*ct[3]-ct[1]*ct[2];return[(Ue[0]*ct[3]-Ue[1]*ct[2]+ct[2]*ct[5]-ct[4]*ct[3])/_t,(-Ue[0]*ct[1]+Ue[1]*ct[0]+ct[4]*ct[1]-ct[5]*ct[0])/_t]}static getAxialAlignedBoundingBox(Ue,ct){const _t=We.applyTransform(Ue,ct),Ut=We.applyTransform(Ue.slice(2,4),ct),jt=We.applyTransform([Ue[0],Ue[3]],ct),rt=We.applyTransform([Ue[2],Ue[1]],ct);return[Math.min(_t[0],Ut[0],jt[0],rt[0]),Math.min(_t[1],Ut[1],jt[1],rt[1]),Math.max(_t[0],Ut[0],jt[0],rt[0]),Math.max(_t[1],Ut[1],jt[1],rt[1])]}static inverseTransform(Ue){const ct=Ue[0]*Ue[3]-Ue[1]*Ue[2];return[Ue[3]/ct,-Ue[1]/ct,-Ue[2]/ct,Ue[0]/ct,(Ue[2]*Ue[5]-Ue[4]*Ue[3])/ct,(Ue[4]*Ue[1]-Ue[5]*Ue[0])/ct]}static apply3dTransform(Ue,ct){return[Ue[0]*ct[0]+Ue[1]*ct[1]+Ue[2]*ct[2],Ue[3]*ct[0]+Ue[4]*ct[1]+Ue[5]*ct[2],Ue[6]*ct[0]+Ue[7]*ct[1]+Ue[8]*ct[2]]}static singularValueDecompose2dScale(Ue){const ct=[Ue[0],Ue[2],Ue[1],Ue[3]],_t=Ue[0]*ct[0]+Ue[1]*ct[2],rt=Ue[2]*ct[1]+Ue[3]*ct[3],Pe=(_t+rt)/2,Fe=Math.sqrt((_t+rt)*(_t+rt)-4*(_t*rt-(Ue[2]*ct[0]+Ue[3]*ct[2])*(Ue[0]*ct[1]+Ue[1]*ct[3])))/2,at=Pe-Fe||1;return[Math.sqrt(Pe+Fe||1),Math.sqrt(at)]}static normalizeRect(Ue){const ct=Ue.slice(0);return Ue[0]>Ue[2]&&(ct[0]=Ue[2],ct[2]=Ue[0]),Ue[1]>Ue[3]&&(ct[1]=Ue[3],ct[3]=Ue[1]),ct}static intersect(Ue,ct){function _t(Pe,Fe){return Pe-Fe}const Ut=[Ue[0],Ue[2],ct[0],ct[2]].sort(_t),jt=[Ue[1],Ue[3],ct[1],ct[3]].sort(_t),rt=[];return Ue=We.normalizeRect(Ue),ct=We.normalizeRect(ct),Ut[0]===Ue[0]&&Ut[1]===ct[0]||Ut[0]===ct[0]&&Ut[1]===Ue[0]?(rt[0]=Ut[1],rt[2]=Ut[2],jt[0]===Ue[1]&&jt[1]===ct[1]||jt[0]===ct[1]&&jt[1]===Ue[1]?(rt[1]=jt[1],rt[3]=jt[2],rt):null):null}}se.Util=We;const Xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];const Ze=function(){const Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(_t,Ut,jt=!1){if(!jt&&URL.createObjectURL){const Pe=new Blob([_t],{type:Ut});return URL.createObjectURL(Pe)}let rt=`data:${Ut};base64,`;for(let Pe=0,Fe=_t.length;Pe<Fe;Pe+=3){const $e=255&_t[Pe],at=255&_t[Pe+1],lt=255&_t[Pe+2];rt+=Ue[$e>>2]+Ue[(3&$e)<<4|at>>4]+Ue[Pe+1<Fe?(15&at)<<2|lt>>6:64]+Ue[Pe+2<Fe?63&lt:64]}return rt}}();se.createObjectURL=Ze},function(Ee,se,y){"use strict";y(4)},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.isNodeJS=void 0;const k=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);se.isNodeJS=k},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.clearPrimitiveCaches=function O(){e._clearCache(),ee._clearCache(),H._clearCache()},se.isEOF=function f(M){return M===fe},se.isCmd=function $(M,A){return M instanceof e&&(void 0===A||M.cmd===A)},se.isDict=function ae(M,A){return M instanceof V&&(void 0===A||c(M.get("Type"),A))},se.isName=c,se.isRef=function oe(M){return M instanceof H},se.isRefsEqual=function W(M,A){return M.num===A.num&&M.gen===A.gen},se.isStream=function N(M){return"object"==typeof M&&null!==M&&void 0!==M.getBytes},se.RefSetCache=se.RefSet=se.Ref=se.Name=se.Dict=se.Cmd=se.EOF=void 0,y(2);var fe={};se.EOF=fe;var ee=function(){let A=Object.create(null);function b(q){this.name=q}return b.prototype={},b.get=function(C){return A[C]||(A[C]=new b(C))},b._clearCache=function(){A=Object.create(null)},b}();se.Name=ee;var e=function(){let A=Object.create(null);function b(q){this.cmd=q}return b.prototype={},b.get=function(C){return A[C]||(A[C]=new b(C))},b._clearCache=function(){A=Object.create(null)},b}();se.Cmd=e;var V=function(){var A=function(){return A};function b(q){this._map=Object.create(null),this.xref=q,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=A}return b.prototype={assignXref:function(C){this.xref=C},get size(){return Object.keys(this._map).length},get(q,C,P){let F=this._map[q];return void 0===F&&void 0!==C&&(F=this._map[C],void 0===F&&void 0!==P&&(F=this._map[P])),F instanceof H&&this.xref?this.xref.fetch(F,this.suppressEncryption):F},getAsync(q,C,P){var F=this;return le(function*(){let I=F._map[q];return void 0===I&&void 0!==C&&(I=F._map[C],void 0===I&&void 0!==P&&(I=F._map[P])),I instanceof H&&F.xref?F.xref.fetchAsync(I,F.suppressEncryption):I})()},getArray(q,C,P){let F=this.get(q,C,P);if(!Array.isArray(F)||!this.xref)return F;F=F.slice();for(let I=0,j=F.length;I<j;I++)F[I]instanceof H&&(F[I]=this.xref.fetch(F[I],this.suppressEncryption));return F},getRaw:function(C){return this._map[C]},getKeys:function(){return Object.keys(this._map)},getRawValues:function(){return Object.values(this._map)},set:function(C,P){this._map[C]=P},has:function(C){return void 0!==this._map[C]},forEach:function(C){for(var P in this._map)C(P,this.get(P))}},b.empty=new b(null),b.merge=function({xref:q,dictArray:C,mergeSubDicts:P=!1}){const F=new b(q);if(!P){for(const j of C)if(j instanceof b)for(const[E,x]of Object.entries(j._map))void 0===F._map[E]&&(F._map[E]=x);return F.size>0?F:b.empty}const I=new Map;for(const j of C)if(j instanceof b)for(const[E,x]of Object.entries(j._map)){let p=I.get(E);void 0===p&&(p=[],I.set(E,p)),p.push(x)}for(const[j,E]of I){if(1===E.length||!(E[0]instanceof b)){F._map[j]=E[0];continue}const x=new b(q);for(const p of E)if(p instanceof b)for(const[m,_]of Object.entries(p._map))void 0===x._map[m]&&(x._map[m]=_);x.size>0&&(F._map[j]=x)}return I.clear(),F.size>0?F:b.empty},b}();se.Dict=V;var H=function(){let A=Object.create(null);function b(q,C){this.num=q,this.gen=C}return b.prototype={toString:function(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}},b.get=function(q,C){const P=0===C?`${q}R`:`${q}R${C}`;return A[P]||(A[P]=new b(q,C))},b._clearCache=function(){A=Object.create(null)},b}();se.Ref=H;se.RefSet=class te{constructor(){this._set=new Set}has(A){return this._set.has(A.toString())}put(A){this._set.add(A.toString())}remove(A){this._set.delete(A.toString())}};function c(M,A){return M instanceof ee&&(void 0===A||M.name===A)}se.RefSetCache=class re{constructor(){this._map=new Map}get size(){return this._map.size}get(A){return this._map.get(A.toString())}has(A){return this._map.has(A.toString())}put(A,b){this._map.set(A.toString(),b)}putAlias(A,b){this._map.set(A.toString(),this.get(b))}forEach(A){for(const b of this._map.values())A(b)}clear(){this._map.clear()}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.NetworkPdfManager=se.LocalPdfManager=void 0;var k=y(2),fe=y(7),ee=y(8),e=y(9),V=y(12);class H{constructor(){this.constructor===H&&(0,k.unreachable)("Cannot initialize BasePdfManager.")}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){let c=null;if(this._docBaseUrl){const $=(0,k.createValidAbsoluteUrl)(this._docBaseUrl);$?c=$.href:(0,k.warn)(`Invalid absolute docBaseUrl: "${this._docBaseUrl}".`)}return(0,k.shadow)(this,"docBaseUrl",c)}onLoadedStream(){(0,k.unreachable)("Abstract method `onLoadedStream` called")}ensureDoc(c,$){return this.ensure(this.pdfDocument,c,$)}ensureXRef(c,$){return this.ensure(this.pdfDocument.xref,c,$)}ensureCatalog(c,$){return this.ensure(this.pdfDocument.catalog,c,$)}getPage(c){return this.pdfDocument.getPage(c)}fontFallback(c,$){return this.pdfDocument.fontFallback(c,$)}cleanup(c=!1){return this.pdfDocument.cleanup(c)}ensure(c,$,ae){return le(function*(){(0,k.unreachable)("Abstract method `ensure` called")})()}requestRange(c,$){(0,k.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,k.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(c){(0,k.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(c){this._password=c}terminate(c){(0,k.unreachable)("Abstract method `terminate` called")}}se.LocalPdfManager=class te extends H{constructor(c,$,ae,oe,W){super(),this._docId=c,this._password=ae,this._docBaseUrl=W,this.evaluatorOptions=oe;const N=new V.Stream($);this.pdfDocument=new e.PDFDocument(this,N),this._loadedStreamPromise=Promise.resolve(N)}ensure(c,$,ae){return le(function*(){const oe=c[$];return"function"==typeof oe?oe.apply(c,ae):oe})()}requestRange(c,$){return Promise.resolve()}requestLoadedStream(){}onLoadedStream(){return this._loadedStreamPromise}terminate(c){}};se.NetworkPdfManager=class re extends H{constructor(c,$,ae,oe,W){super(),this._docId=c,this._password=ae.password,this._docBaseUrl=W,this.msgHandler=ae.msgHandler,this.evaluatorOptions=oe,this.streamManager=new fe.ChunkedStreamManager($,{msgHandler:ae.msgHandler,length:ae.length,disableAutoFetch:ae.disableAutoFetch,rangeChunkSize:ae.rangeChunkSize}),this.pdfDocument=new e.PDFDocument(this,this.streamManager.getStream())}ensure(c,$,ae){var oe=this;return le(function*(){try{const W=c[$];return"function"==typeof W?W.apply(c,ae):W}catch(W){if(!(W instanceof ee.MissingDataException))throw W;return yield oe.requestRange(W.begin,W.end),oe.ensure(c,$,ae)}})()}requestRange(c,$){return this.streamManager.requestRange(c,$)}requestLoadedStream(){this.streamManager.requestAllChunks()}sendProgressiveData(c){this.streamManager.onReceiveData({chunk:c})}onLoadedStream(){return this.streamManager.onLoadedStream()}terminate(c){this.streamManager.abort(c)}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.ChunkedStreamManager=se.ChunkedStream=void 0;var k=y(2),fe=y(8);class ee{constructor(H,te,re){this.bytes=new Uint8Array(H),this.start=0,this.pos=0,this.end=H,this.chunkSize=te,this._loadedChunks=new Set,this.numChunks=Math.ceil(H/te),this.manager=re,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const H=[];for(let te=0,re=this.numChunks;te<re;++te)this._loadedChunks.has(te)||H.push(te);return H}getBaseStreams(){return[this]}get numChunksLoaded(){return this._loadedChunks.size}allChunksLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(H,te){const re=this.chunkSize;if(H%re!=0)throw new Error(`Bad begin offset: ${H}`);const f=H+te.byteLength;if(f%re!=0&&f!==this.bytes.length)throw new Error(`Bad end offset: ${f}`);this.bytes.set(new Uint8Array(te),H);const c=Math.floor(H/re),$=Math.floor((f-1)/re)+1;for(let ae=c;ae<$;++ae)this._loadedChunks.add(ae)}onReceiveProgressiveData(H){let te=this.progressiveDataLength;const re=Math.floor(te/this.chunkSize);this.bytes.set(new Uint8Array(H),te),te+=H.byteLength,this.progressiveDataLength=te;const f=te>=this.end?this.numChunks:Math.floor(te/this.chunkSize);for(let c=re;c<f;++c)this._loadedChunks.add(c)}ensureByte(H){if(H<this.progressiveDataLength)return;const te=Math.floor(H/this.chunkSize);if(te!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(te))throw new fe.MissingDataException(H,H+1);this.lastSuccessfulEnsureByteChunk=te}}ensureRange(H,te){if(H>=te||te<=this.progressiveDataLength)return;const re=this.chunkSize,f=Math.floor(H/re),c=Math.floor((te-1)/re)+1;for(let $=f;$<c;++$)if(!this._loadedChunks.has($))throw new fe.MissingDataException(H,te)}nextEmptyChunk(H){const te=this.numChunks;for(let re=0;re<te;++re){const f=(H+re)%te;if(!this._loadedChunks.has(f))return f}return null}hasChunk(H){return this._loadedChunks.has(H)}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){const H=this.pos;return H>=this.end?-1:(H>=this.progressiveDataLength&&this.ensureByte(H),this.bytes[this.pos++])}getUint16(){const H=this.getByte(),te=this.getByte();return-1===H||-1===te?-1:(H<<8)+te}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getBytes(H,te=!1){const re=this.bytes,f=this.pos,c=this.end;if(!H){c>this.progressiveDataLength&&this.ensureRange(f,c);const oe=re.subarray(f,c);return te?new Uint8ClampedArray(oe):oe}let $=f+H;$>c&&($=c),$>this.progressiveDataLength&&this.ensureRange(f,$),this.pos=$;const ae=re.subarray(f,$);return te?new Uint8ClampedArray(ae):ae}peekByte(){const H=this.getByte();return-1!==H&&this.pos--,H}peekBytes(H,te=!1){const re=this.getBytes(H,te);return this.pos-=re.length,re}getByteRange(H,te){return H<0&&(H=0),te>this.end&&(te=this.end),te>this.progressiveDataLength&&this.ensureRange(H,te),this.bytes.subarray(H,te)}skip(H){H||(H=1),this.pos+=H}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(H,te,re){function f(){}te?H+te>this.progressiveDataLength&&this.ensureRange(H,H+te):H>=this.progressiveDataLength&&this.ensureByte(H),(f.prototype=Object.create(this)).getMissingChunks=function(){const $=this.chunkSize,ae=Math.floor(this.start/$),oe=Math.floor((this.end-1)/$)+1,W=[];for(let N=ae;N<oe;++N)this._loadedChunks.has(N)||W.push(N);return W},f.prototype.allChunksLoaded=function(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length};const c=new f;return c.pos=c.start=H,c.end=H+te||this.end,c.dict=re,c}}se.ChunkedStream=ee;se.ChunkedStreamManager=class e{constructor(H,te){this.length=te.length,this.chunkSize=te.rangeChunkSize,this.stream=new ee(this.length,this.chunkSize,this),this.pdfNetworkStream=H,this.disableAutoFetch=te.disableAutoFetch,this.msgHandler=te.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,k.createPromiseCapability)()}onLoadedStream(){return this._loadedStreamCapability.promise}sendRequest(H,te){const re=this.pdfNetworkStream.getRangeReader(H,te);re.isStreamingSupported||(re.onProgress=this.onProgress.bind(this));let f=[],c=0;new Promise((ae,oe)=>{const W=N=>{try{if(!N.done){const M=N.value;return f.push(M),c+=(0,k.arrayByteLength)(M),re.isStreamingSupported&&this.onProgress({loaded:c}),void re.read().then(W,oe)}const O=(0,k.arraysToBytes)(f);f=null,ae(O)}catch(O){oe(O)}};re.read().then(W,oe)}).then(ae=>{this.aborted||this.onReceiveData({chunk:ae,begin:H})})}requestAllChunks(){const H=this.stream.getMissingChunks();return this._requestChunks(H),this._loadedStreamCapability.promise}_requestChunks(H){const te=this.currRequestId++,re=new Set;this._chunksNeededByRequest.set(te,re);for(const $ of H)this.stream.hasChunk($)||re.add($);if(0===re.size)return Promise.resolve();const f=(0,k.createPromiseCapability)();this._promisesByRequest.set(te,f);const c=[];for(const $ of re){let ae=this._requestsByChunk.get($);ae||(ae=[],this._requestsByChunk.set($,ae),c.push($)),ae.push(te)}if(c.length>0){const $=this.groupChunks(c);for(const ae of $){const oe=ae.beginChunk*this.chunkSize,W=Math.min(ae.endChunk*this.chunkSize,this.length);this.sendRequest(oe,W)}}return f.promise.catch($=>{if(!this.aborted)throw $})}getStream(){return this.stream}requestRange(H,te){te=Math.min(te,this.length);const re=this.getBeginChunk(H),f=this.getEndChunk(te),c=[];for(let $=re;$<f;++$)c.push($);return this._requestChunks(c)}requestRanges(H=[]){const te=[];for(const re of H){const f=this.getBeginChunk(re.begin),c=this.getEndChunk(re.end);for(let $=f;$<c;++$)te.includes($)||te.push($)}return te.sort(function(re,f){return re-f}),this._requestChunks(te)}groupChunks(H){const te=[];let re=-1,f=-1;for(let c=0,$=H.length;c<$;++c){const ae=H[c];re<0&&(re=ae),f>=0&&f+1!==ae&&(te.push({beginChunk:re,endChunk:f+1}),re=ae),c+1===H.length&&te.push({beginChunk:re,endChunk:ae+1}),f=ae}return te}onProgress(H){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+H.loaded,total:this.length})}onReceiveData(H){const te=H.chunk,re=void 0===H.begin,f=re?this.progressiveDataLength:H.begin,c=f+te.byteLength,$=Math.floor(f/this.chunkSize),ae=c<this.length?Math.floor(c/this.chunkSize):Math.ceil(c/this.chunkSize);re?(this.stream.onReceiveProgressiveData(te),this.progressiveDataLength=c):this.stream.onReceiveData(f,te),this.stream.allChunksLoaded()&&this._loadedStreamCapability.resolve(this.stream);const oe=[];for(let W=$;W<ae;++W){const N=this._requestsByChunk.get(W);if(N){this._requestsByChunk.delete(W);for(const O of N){const M=this._chunksNeededByRequest.get(O);M.has(W)&&M.delete(W),!(M.size>0)&&oe.push(O)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let W;if(1===this.stream.numChunksLoaded){const N=this.stream.numChunks-1;this.stream.hasChunk(N)||(W=N)}else W=this.stream.nextEmptyChunk(ae);Number.isInteger(W)&&this._requestChunks([W])}for(const W of oe){const N=this._promisesByRequest.get(W);this._promisesByRequest.delete(W),N.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(H){this._loadedStreamCapability.reject(H)}getBeginChunk(H){return Math.floor(H/this.chunkSize)}getEndChunk(H){return Math.floor((H-1)/this.chunkSize)+1}abort(H){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(H);for(const te of this._promisesByRequest.values())te.reject(H)}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getLookupTableFactory=function fe(W){let N;return function(){return W&&(N=Object.create(null),W(N),W=null),N}},se.getInheritableProperty=function H({dict:W,key:N,getArray:O=!1,stopWhenFound:M=!0}){let q,b=0;for(;W;){const C=O?W.getArray(N):W.get(N);if(void 0!==C){if(M)return C;q||(q=[]),q.push(C)}if(++b>100){(0,k.warn)(`getInheritableProperty: maximum loop count exceeded for "${N}"`);break}W=W.get("Parent")}return q},se.toRomanNumerals=function re(W,N=!1){(0,k.assert)(Number.isInteger(W)&&W>0,"The number should be a positive integer.");const O=[];let M;for(;W>=1e3;)W-=1e3,O.push("M");M=W/100|0,W%=100,O.push(te[M]),M=W/10|0,W%=10,O.push(te[10+M]),O.push(te[20+W]);const A=O.join("");return N?A.toLowerCase():A},se.log2=function f(W){return W<=0?0:Math.ceil(Math.log2(W))},se.readInt8=function c(W,N){return W[N]<<24>>24},se.readUint16=function $(W,N){return W[N]<<8|W[N+1]},se.readUint32=function ae(W,N){return(W[N]<<24|W[N+1]<<16|W[N+2]<<8|W[N+3])>>>0},se.isWhiteSpace=function oe(W){return 32===W||9===W||13===W||10===W},se.XRefParseException=se.XRefEntryException=se.MissingDataException=void 0;var k=y(2);se.MissingDataException=class ee extends k.BaseException{constructor(N,O){super(`Missing data [${N}, ${O})`),this.begin=N,this.end=O}};se.XRefEntryException=class e extends k.BaseException{};se.XRefParseException=class V extends k.BaseException{};const te=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"]},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.PDFDocument=se.Page=void 0;var k=y(2),fe=y(10),ee=y(5),e=y(8),V=y(12),H=y(25),te=y(22),re=y(11),f=y(26),c=y(28);const ae=[0,0,612,792];function oe(F,I){return"display"===I&&F.viewable||"print"===I&&F.printable}class W{constructor({pdfManager:I,xref:j,pageIndex:E,pageDict:x,ref:p,globalIdFactory:m,fontCache:_,builtInCMapCache:R,globalImageCache:G}){this.pdfManager=I,this.pageIndex=E,this.pageDict=x,this.xref=j,this.ref=p,this.fontCache=_,this.builtInCMapCache=R,this.globalImageCache=G,this.evaluatorOptions=I.evaluatorOptions,this.resourcesPromise=null;const K={obj:0};this._localIdFactory=class extends m{static createObjId(){return`p${E}_${++K.obj}`}}}_getInheritableProperty(I,j=!1){const E=(0,e.getInheritableProperty)({dict:this.pageDict,key:I,getArray:j,stopWhenFound:!1});return Array.isArray(E)?1!==E.length&&(0,ee.isDict)(E[0])?ee.Dict.merge({xref:this.xref,dictArray:E}):E[0]:E}get content(){return this.pageDict.get("Contents")}get resources(){return(0,k.shadow)(this,"resources",this._getInheritableProperty("Resources")||ee.Dict.empty)}_getBoundingBox(I){const j=this._getInheritableProperty(I,!0);if(Array.isArray(j)&&4===j.length){if(j[2]-j[0]!=0&&j[3]-j[1]!=0)return j;(0,k.warn)(`Empty /${I} entry.`)}return null}get mediaBox(){return(0,k.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||ae)}get cropBox(){return(0,k.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let I=this.pageDict.get("UserUnit");return(!(0,k.isNum)(I)||I<=0)&&(I=1),(0,k.shadow)(this,"userUnit",I)}get view(){const{cropBox:I,mediaBox:j}=this;let E;if(I===j||(0,k.isArrayEqual)(I,j))E=j;else{const x=k.Util.intersect(I,j);x&&x[2]-x[0]!=0&&x[3]-x[1]!=0?E=x:(0,k.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,k.shadow)(this,"view",E||j)}get rotate(){let I=this._getInheritableProperty("Rotate")||0;return I%90!=0?I=0:I>=360?I%=360:I<0&&(I=(I%360+360)%360),(0,k.shadow)(this,"rotate",I)}getContentStream(){const I=this.content;let j;if(Array.isArray(I)){const E=this.xref,x=[];for(const p of I)x.push(E.fetchIfRef(p));j=new V.StreamsSequenceStream(x)}else j=(0,ee.isStream)(I)?I:new V.NullStream;return j}save(I,j,E){const x=new c.PartialEvaluator({xref:this.xref,handler:I,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then(function(p){const m=[];for(const _ of p)oe(_,"print")&&m.push(_.save(x,j,E).catch(function(R){return(0,k.warn)(`save - ignoring annotation data during "${j.name}" task: "${R}".`),null}));return Promise.all(m)})}loadResources(I){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then(()=>new fe.ObjectLoader(this.resources,I,this.xref).load())}getOperatorList({handler:I,sink:j,task:E,intent:x,renderInteractiveForms:p,annotationStorage:m}){const _=this.pdfManager.ensure(this,"getContentStream"),R=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),G=new c.PartialEvaluator({xref:this.xref,handler:I,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),U=Promise.all([_,R]).then(([z])=>{const L=new f.OperatorList(x,j);return I.send("StartRenderPage",{transparency:G.hasBlendModes(this.resources),pageIndex:this.pageIndex,intent:x}),G.getOperatorList({stream:z,task:E,resources:this.resources,operatorList:L}).then(function(){return L})});return Promise.all([U,this._parsedAnnotations]).then(function([z,L]){if(0===L.length)return z.flush(!0),{length:z.totalLength};const S=[];for(const B of L)oe(B,x)&&S.push(B.getOperatorList(G,E,p,m).catch(function(J){return(0,k.warn)(`getOperatorList - ignoring annotation data during "${E.name}" task: "${J}".`),null}));return Promise.all(S).then(function(B){z.addOp(k.OPS.beginAnnotations,[]);for(const J of B)z.addOpList(J);return z.addOp(k.OPS.endAnnotations,[]),z.flush(!0),{length:z.totalLength}})})}extractTextContent({handler:I,task:j,normalizeWhitespace:E,sink:x,combineTextItems:p}){const m=this.pdfManager.ensure(this,"getContentStream"),_=this.loadResources(["ExtGState","XObject","Font"]);return Promise.all([m,_]).then(([G])=>new c.PartialEvaluator({xref:this.xref,handler:I,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}).getTextContent({stream:G,task:j,resources:this.resources,normalizeWhitespace:E,combineTextItems:p,sink:x}))}getAnnotationsData(I){return this._parsedAnnotations.then(function(j){const E=[];for(let x=0,p=j.length;x<p;x++)(!I||oe(j[x],I))&&E.push(j[x].data);return E})}get annotations(){return(0,k.shadow)(this,"annotations",this._getInheritableProperty("Annots")||[])}get _parsedAnnotations(){const I=this.pdfManager.ensure(this,"annotations").then(()=>{const j=[];for(const E of this.annotations)j.push(H.AnnotationFactory.create(this.xref,E,this.pdfManager,this._localIdFactory).catch(function(x){return(0,k.warn)(`_parsedAnnotations: "${x}".`),null}));return Promise.all(j).then(function(E){return E.filter(x=>!!x)})});return(0,k.shadow)(this,"_parsedAnnotations",I)}}se.Page=W;const N=new Uint8Array([37,80,68,70,45]),O=new Uint8Array([115,116,97,114,116,120,114,101,102]),M=new Uint8Array([101,110,100,111,98,106]),q=/^[1-9]\.[0-9]$/;function C(F,I,j=1024,E=!1){const x=I.length,p=F.peekBytes(j),m=p.length-x;if(m<=0)return!1;if(E){const _=x-1;let R=p.length-1;for(;R>=_;){let G=0;for(;G<x&&p[R-G]===I[_-G];)G++;if(G>=x)return F.pos+=R-_,!0;R--}}else{let _=0;for(;_<=m;){let R=0;for(;R<x&&p[_+R]===I[R];)R++;if(R>=x)return F.pos+=_,!0;_++}}return!1}se.PDFDocument=class P{constructor(I,j){let E;if((0,ee.isStream)(j))E=j;else{if(!(0,k.isArrayBuffer)(j))throw new Error("PDFDocument: Unknown argument type");E=new V.Stream(j)}if(E.length<=0)throw new k.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=I,this.stream=E,this.xref=new fe.XRef(E,I),this._pagePromises=[],this._version=null;const x={font:0};this._globalIdFactory=class{static getDocId(){return`g_${I.docId}`}static createFontId(){return"f"+ ++x.font}static createObjId(){(0,k.unreachable)("Abstract method `createObjId` called.")}}}parse(I){this.xref.parse(I),this.catalog=new fe.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}get linearization(){let I=null;try{I=re.Linearization.create(this.stream)}catch(j){if(j instanceof e.MissingDataException)throw j;(0,k.info)(j)}return(0,k.shadow)(this,"linearization",I)}get startXRef(){const I=this.stream;let j=0;if(this.linearization)I.reset(),C(I,M)&&(j=I.pos+6-I.start);else{const x=O.length;let p=!1,m=I.end;for(;!p&&m>0;)m-=1024-x,m<0&&(m=0),I.pos=m,p=C(I,O,1024,!0);if(p){let _;I.skip(9);do{_=I.getByte()}while((0,e.isWhiteSpace)(_));let R="";for(;_>=32&&_<=57;)R+=String.fromCharCode(_),_=I.getByte();j=parseInt(R,10),isNaN(j)&&(j=0)}}return(0,k.shadow)(this,"startXRef",j)}checkHeader(){const I=this.stream;if(I.reset(),!C(I,N))return;I.moveStart();let x,E="";for(;(x=I.getByte())>32&&!(E.length>=12);)E+=String.fromCharCode(x);this._version||(this._version=E.substring(5))}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){const I=this.linearization;return(0,k.shadow)(this,"numPages",I?I.numPages:this.catalog.numPages)}_hasOnlyDocumentSignatures(I,j=0){return I.every(x=>{if((x=this.xref.fetchIfRef(x)).has("Kids"))return++j>10?((0,k.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(x.get("Kids"),j);const p=(0,ee.isName)(x.get("FT"),"Sig"),m=x.get("Rect"),_=Array.isArray(m)&&m.every(R=>0===R);return p&&_})}get formInfo(){const I={hasAcroForm:!1,hasXfa:!1},j=this.catalog.acroForm;if(!j)return(0,k.shadow)(this,"formInfo",I);try{const E=j.get("XFA"),x=Array.isArray(E)&&E.length>0||(0,ee.isStream)(E)&&!E.isEmpty;I.hasXfa=x;const p=j.get("Fields"),m=Array.isArray(p)&&p.length>0,R=!!(1&j.get("SigFlags"))&&this._hasOnlyDocumentSignatures(p);I.hasAcroForm=m&&!R}catch(E){if(E instanceof e.MissingDataException)throw E;(0,k.info)("Cannot fetch form information.")}return(0,k.shadow)(this,"formInfo",I)}get documentInfo(){const I={Title:k.isString,Author:k.isString,Subject:k.isString,Keywords:k.isString,Creator:k.isString,Producer:k.isString,CreationDate:k.isString,ModDate:k.isString,Trapped:ee.isName};let j=this._version;("string"!=typeof j||!q.test(j))&&((0,k.warn)(`Invalid PDF header version number: ${j}`),j=null);const E={PDFFormatVersion:j,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection};let x;try{x=this.xref.trailer.get("Info")}catch(p){if(p instanceof e.MissingDataException)throw p;(0,k.info)("The document information dictionary is invalid.")}if((0,ee.isDict)(x))for(const p of x.getKeys()){const m=x.get(p);if(I[p])I[p](m)?E[p]="string"!=typeof m?m:(0,k.stringToPDFString)(m):(0,k.info)(`Bad value in document info for "${p}".`);else if("string"==typeof p){let _;if((0,k.isString)(m))_=(0,k.stringToPDFString)(m);else{if(!((0,ee.isName)(m)||(0,k.isNum)(m)||(0,k.isBool)(m))){(0,k.info)(`Unsupported value in document info for (custom) "${p}".`);continue}_=m}E.Custom||(E.Custom=Object.create(null)),E.Custom[p]=_}}return(0,k.shadow)(this,"documentInfo",E)}get fingerprint(){let I;const j=this.xref.trailer.get("ID");I=Array.isArray(j)&&j[0]&&(0,k.isString)(j[0])&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==j[0]?(0,k.stringToBytes)(j[0]):(0,te.calculateMD5)(this.stream.getByteRange(0,1024),0,1024);const E=[];for(let x=0,p=I.length;x<p;x++){const m=I[x].toString(16);E.push(m.padStart(2,"0"))}return(0,k.shadow)(this,"fingerprint",E.join(""))}_getLinearizationPage(I){const{catalog:j,linearization:E}=this,x=ee.Ref.get(E.objectNumberFirst,0);return this.xref.fetchAsync(x).then(p=>{if((0,ee.isDict)(p,"Page")||(0,ee.isDict)(p)&&!p.has("Type")&&p.has("Contents"))return x&&!j.pageKidsCountCache.has(x)&&j.pageKidsCountCache.put(x,1),[p,x];throw new k.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}).catch(p=>((0,k.info)(p),j.getPageDict(I)))}getPage(I){if(void 0!==this._pagePromises[I])return this._pagePromises[I];const{catalog:j,linearization:E}=this,x=E&&E.pageFirst===I?this._getLinearizationPage(I):j.getPageDict(I);return this._pagePromises[I]=x.then(([p,m])=>new W({pdfManager:this.pdfManager,xref:this.xref,pageIndex:I,pageDict:p,ref:m,globalIdFactory:this._globalIdFactory,fontCache:j.fontCache,builtInCMapCache:j.builtInCMapCache,globalImageCache:j.globalImageCache}))}checkFirstPage(){var I=this;return this.getPage(0).catch(function(){var j=le(function*(E){if(E instanceof e.XRefEntryException)throw I._pagePromises.length=0,yield I.cleanup(),new e.XRefParseException});return function(E){return j.apply(this,arguments)}}())}fontFallback(I,j){return this.catalog.fontFallback(I,j)}cleanup(I=!1){var j=this;return le(function*(){return j.catalog?j.catalog.cleanup(I):(0,ee.clearPrimitiveCaches)()})()}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.FileSpec=se.XRef=se.ObjectLoader=se.Catalog=void 0;var k=y(2),fe=y(5),ee=y(11),e=y(8),V=y(22),H=y(23),te=y(24);function re(O){return(0,fe.isDict)(O)?O.get("D"):O}class f{constructor(M,A){if(this.pdfManager=M,this.xref=A,this._catDict=A.getCatalogObj(),!(0,fe.isDict)(this._catDict))throw new k.FormatError("Catalog object is not a dictionary.");this.fontCache=new fe.RefSetCache,this.builtInCMapCache=new Map,this.globalImageCache=new te.GlobalImageCache,this.pageKidsCountCache=new fe.RefSetCache}get version(){const M=this._catDict.get("Version");return(0,fe.isName)(M)?(0,k.shadow)(this,"version",M.name):(0,k.shadow)(this,"version",null)}get collection(){let M=null;try{const A=this._catDict.get("Collection");(0,fe.isDict)(A)&&A.size>0&&(M=A)}catch(A){if(A instanceof e.MissingDataException)throw A;(0,k.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,k.shadow)(this,"collection",M)}get acroForm(){let M=null;try{const A=this._catDict.get("AcroForm");(0,fe.isDict)(A)&&A.size>0&&(M=A)}catch(A){if(A instanceof e.MissingDataException)throw A;(0,k.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,k.shadow)(this,"acroForm",M)}get metadata(){const M=this._catDict.getRaw("Metadata");if(!(0,fe.isRef)(M))return(0,k.shadow)(this,"metadata",null);const b=this.xref.fetch(M,!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata));let q;if(b&&(0,fe.isDict)(b.dict)){const C=b.dict.get("Type"),P=b.dict.get("Subtype");if((0,fe.isName)(C,"Metadata")&&(0,fe.isName)(P,"XML"))try{q=(0,k.stringToUTF8String)((0,k.bytesToString)(b.getBytes()))}catch(F){if(F instanceof e.MissingDataException)throw F;(0,k.info)("Skipping invalid metadata.")}}return(0,k.shadow)(this,"metadata",q)}get toplevelPagesDict(){const M=this._catDict.get("Pages");if(!(0,fe.isDict)(M))throw new k.FormatError("Invalid top-level pages dictionary.");return(0,k.shadow)(this,"toplevelPagesDict",M)}get documentOutline(){let M=null;try{M=this._readDocumentOutline()}catch(A){if(A instanceof e.MissingDataException)throw A;(0,k.warn)("Unable to read document outline.")}return(0,k.shadow)(this,"documentOutline",M)}_readDocumentOutline(){let M=this._catDict.get("Outlines");if(!(0,fe.isDict)(M)||(M=M.getRaw("First"),!(0,fe.isRef)(M)))return null;const A={items:[]},b=[{obj:M,parent:A}],q=new fe.RefSet;q.put(M);const C=this.xref,P=new Uint8ClampedArray(3);for(;b.length>0;){const F=b.shift(),I=C.fetchIfRef(F.obj);if(null===I)continue;if(!I.has("Title"))throw new k.FormatError("Invalid outline item encountered.");const j={url:null,dest:null};f.parseDestDictionary({destDict:I,resultObj:j,docBaseUrl:this.pdfManager.docBaseUrl});const E=I.get("Title"),x=I.get("F")||0,p=I.getArray("C"),m=I.get("Count");let _=P;Array.isArray(p)&&3===p.length&&(0!==p[0]||0!==p[1]||0!==p[2])&&(_=H.ColorSpace.singletons.rgb.getRgb(p,0));const R={dest:j.dest,url:j.url,unsafeUrl:j.unsafeUrl,newWindow:j.newWindow,title:(0,k.stringToPDFString)(E),color:_,count:Number.isInteger(m)?m:void 0,bold:!!(2&x),italic:!!(1&x),items:[]};F.parent.items.push(R),M=I.getRaw("First"),(0,fe.isRef)(M)&&!q.has(M)&&(b.push({obj:M,parent:R}),q.put(M)),M=I.getRaw("Next"),(0,fe.isRef)(M)&&!q.has(M)&&(b.push({obj:M,parent:F.parent}),q.put(M))}return A.items.length>0?A.items:null}get permissions(){let M=null;try{M=this._readPermissions()}catch(A){if(A instanceof e.MissingDataException)throw A;(0,k.warn)("Unable to read permissions.")}return(0,k.shadow)(this,"permissions",M)}_readPermissions(){const M=this.xref.trailer.get("Encrypt");if(!(0,fe.isDict)(M))return null;let A=M.get("P");if(!(0,k.isNum)(A))return null;A+=2**32;const b=[];for(const q in k.PermissionFlag){const C=k.PermissionFlag[q];A&C&&b.push(C)}return b}get optionalContentConfig(){let M=null;try{const A=this._catDict.get("OCProperties");if(!A)return(0,k.shadow)(this,"optionalContentConfig",null);const b=A.get("D");if(!b)return(0,k.shadow)(this,"optionalContentConfig",null);const q=A.get("OCGs");if(!Array.isArray(q))return(0,k.shadow)(this,"optionalContentConfig",null);const C=[],P=[];for(const F of q){if(!(0,fe.isRef)(F))continue;P.push(F);const I=this.xref.fetchIfRef(F);C.push({id:F.toString(),name:(0,k.isString)(I.get("Name"))?(0,k.stringToPDFString)(I.get("Name")):null,intent:(0,k.isString)(I.get("Intent"))?(0,k.stringToPDFString)(I.get("Intent")):null})}M=this._readOptionalContentConfig(b,P),M.groups=C}catch(A){if(A instanceof e.MissingDataException)throw A;(0,k.warn)(`Unable to read optional content config: ${A}`)}return(0,k.shadow)(this,"optionalContentConfig",M)}_readOptionalContentConfig(M,A){function b(j){const E=[];if(Array.isArray(j))for(const x of j)(0,fe.isRef)(x)&&A.includes(x)&&E.push(x.toString());return E}function q(j,E=0){if(!Array.isArray(j))return null;const x=[];for(const m of j){if((0,fe.isRef)(m)&&A.includes(m)){F.put(m),x.push(m.toString());continue}const _=C(m,E);_&&x.push(_)}if(E>0)return x;const p=[];for(const m of A)F.has(m)||p.push(m.toString());return p.length&&x.push({name:null,order:p}),x}function C(j,E){if(++E>I)return(0,k.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const x=P.fetchIfRef(j);if(!Array.isArray(x))return null;const p=P.fetchIfRef(x[0]);if("string"!=typeof p)return null;const m=q(x.slice(1),E);return m&&m.length?{name:(0,k.stringToPDFString)(p),order:m}:null}const P=this.xref,F=new fe.RefSet,I=10;return{name:(0,k.isString)(M.get("Name"))?(0,k.stringToPDFString)(M.get("Name")):null,creator:(0,k.isString)(M.get("Creator"))?(0,k.stringToPDFString)(M.get("Creator")):null,baseState:(0,fe.isName)(M.get("BaseState"))?M.get("BaseState").name:null,on:b(M.get("ON")),off:b(M.get("OFF")),order:q(M.get("Order")),groups:null}}get numPages(){const M=this.toplevelPagesDict.get("Count");if(!Number.isInteger(M))throw new k.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,k.shadow)(this,"numPages",M)}get destinations(){const M=this._readDests(),A=Object.create(null);if(M instanceof ae){const b=M.getAll();for(const q in b)A[q]=re(b[q])}else M instanceof fe.Dict&&M.forEach(function(b,q){q&&(A[b]=re(q))});return(0,k.shadow)(this,"destinations",A)}getDestination(M){const A=this._readDests();return A instanceof ae||A instanceof fe.Dict?re(A.get(M)||null):null}_readDests(){const M=this._catDict.get("Names");return M&&M.has("Dests")?new ae(M.getRaw("Dests"),this.xref):this._catDict.has("Dests")?this._catDict.get("Dests"):void 0}get pageLabels(){let M=null;try{M=this._readPageLabels()}catch(A){if(A instanceof e.MissingDataException)throw A;(0,k.warn)("Unable to read page labels.")}return(0,k.shadow)(this,"pageLabels",M)}_readPageLabels(){const M=this._catDict.getRaw("PageLabels");if(!M)return null;const A=new Array(this.numPages);let b=null,q="";const P=new oe(M,this.xref).getAll();let F="",I=1;for(let j=0,E=this.numPages;j<E;j++){if(j in P){const x=P[j];if(!(0,fe.isDict)(x))throw new k.FormatError("PageLabel is not a dictionary.");if(x.has("Type")&&!(0,fe.isName)(x.get("Type"),"PageLabel"))throw new k.FormatError("Invalid type in PageLabel dictionary.");if(x.has("S")){const p=x.get("S");if(!(0,fe.isName)(p))throw new k.FormatError("Invalid style in PageLabel dictionary.");b=p.name}else b=null;if(x.has("P")){const p=x.get("P");if(!(0,k.isString)(p))throw new k.FormatError("Invalid prefix in PageLabel dictionary.");q=(0,k.stringToPDFString)(p)}else q="";if(x.has("St")){const p=x.get("St");if(!(Number.isInteger(p)&&p>=1))throw new k.FormatError("Invalid start in PageLabel dictionary.");I=p}else I=1}switch(b){case"D":F=I;break;case"R":case"r":F=(0,e.toRomanNumerals)(I,"r"===b);break;case"A":case"a":const x=26,R=I-1,G=String.fromCharCode(("a"===b?97:65)+R%x),K=[];for(let U=0,z=R/x|0;U<=z;U++)K.push(G);F=K.join("");break;default:if(b)throw new k.FormatError(`Invalid style "${b}" in PageLabel dictionary.`);F=""}A[j]=q+F,I++}return A}get pageLayout(){const M=this._catDict.get("PageLayout");let A="";if((0,fe.isName)(M))switch(M.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":A=M.name}return(0,k.shadow)(this,"pageLayout",A)}get pageMode(){const M=this._catDict.get("PageMode");let A="UseNone";if((0,fe.isName)(M))switch(M.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":A=M.name}return(0,k.shadow)(this,"pageMode",A)}get viewerPreferences(){const M={HideToolbar:k.isBool,HideMenubar:k.isBool,HideWindowUI:k.isBool,FitWindow:k.isBool,CenterWindow:k.isBool,DisplayDocTitle:k.isBool,NonFullScreenPageMode:fe.isName,Direction:fe.isName,ViewArea:fe.isName,ViewClip:fe.isName,PrintArea:fe.isName,PrintClip:fe.isName,PrintScaling:fe.isName,Duplex:fe.isName,PickTrayByPDFSize:k.isBool,PrintPageRange:Array.isArray,NumCopies:Number.isInteger},A=this._catDict.get("ViewerPreferences");let b=null;if((0,fe.isDict)(A))for(const q in M){if(!A.has(q))continue;const C=A.get(q);if(!M[q](C)){(0,k.info)(`Bad value in ViewerPreferences for "${q}".`);continue}let P;switch(q){case"NonFullScreenPageMode":switch(C.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":P=C.name;break;default:P="UseNone"}break;case"Direction":switch(C.name){case"L2R":case"R2L":P=C.name;break;default:P="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":switch(C.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":P=C.name;break;default:P="CropBox"}break;case"PrintScaling":switch(C.name){case"None":case"AppDefault":P=C.name;break;default:P="AppDefault"}break;case"Duplex":switch(C.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":P=C.name;break;default:P="None"}break;case"PrintPageRange":if(C.length%2!=0)break;C.every((j,E,x)=>Number.isInteger(j)&&j>0&&(0===E||j>=x[E-1])&&j<=this.numPages)&&(P=C);break;case"NumCopies":C>0&&(P=C);break;default:if("boolean"!=typeof C)throw new k.FormatError(`viewerPreferences - expected a boolean value for: ${q}`);P=C}void 0!==P?(b||(b=Object.create(null)),b[q]=P):(0,k.info)(`Bad value in ViewerPreferences for "${q}".`)}return(0,k.shadow)(this,"viewerPreferences",b)}get openAction(){const M=this._catDict.get("OpenAction");let A=null;if((0,fe.isDict)(M)){const b=new fe.Dict(this.xref);b.set("A",M);const q={url:null,dest:null,action:null};f.parseDestDictionary({destDict:b,resultObj:q}),Array.isArray(q.dest)?(A||(A=Object.create(null)),A.dest=q.dest):q.action&&(A||(A=Object.create(null)),A.action=q.action)}else Array.isArray(M)&&(A||(A=Object.create(null)),A.dest=M);return(0,k.shadow)(this,"openAction",A)}get attachments(){const M=this._catDict.get("Names");let A=null;if(M&&M.has("EmbeddedFiles")){const q=new ae(M.getRaw("EmbeddedFiles"),this.xref).getAll();for(const C in q){const P=new W(q[C],this.xref);A||(A=Object.create(null)),A[(0,k.stringToPDFString)(C)]=P.serializable}}return(0,k.shadow)(this,"attachments",A)}get javaScript(){const M=this._catDict.get("Names");let A=null;function b(C){const P=C.get("S");if(!(0,fe.isName)(P,"JavaScript"))return;let F=C.get("JS");if((0,fe.isStream)(F))F=(0,k.bytesToString)(F.getBytes());else if(!(0,k.isString)(F))return;A||(A=[]),A.push((0,k.stringToPDFString)(F))}if(M&&M.has("JavaScript")){const P=new ae(M.getRaw("JavaScript"),this.xref).getAll();for(const F in P){const I=P[F];(0,fe.isDict)(I)&&b(I)}}const q=this._catDict.get("OpenAction");return(0,fe.isDict)(q)&&(0,fe.isName)(q.get("S"),"JavaScript")&&b(q),(0,k.shadow)(this,"javaScript",A)}fontFallback(M,A){const b=[];return this.fontCache.forEach(function(q){b.push(q)}),Promise.all(b).then(q=>{for(const C of q)if(C.loadedName===M)return void C.fallback(A)})}cleanup(M=!1){(0,fe.clearPrimitiveCaches)(),this.globalImageCache.clear(M),this.pageKidsCountCache.clear();const A=[];return this.fontCache.forEach(function(b){A.push(b)}),Promise.all(A).then(b=>{for(const{dict:q}of b)delete q.translated;this.fontCache.clear(),this.builtInCMapCache.clear()})}getPageDict(M){const A=(0,k.createPromiseCapability)(),b=[this._catDict.getRaw("Pages")],q=new fe.RefSet,C=this.xref,P=this.pageKidsCountCache;let F,I=0;return function j(){for(;b.length;){const E=b.pop();if((0,fe.isRef)(E)){if(F=P.get(E),F>0&&I+F<M){I+=F;continue}return q.has(E)?void A.reject(new k.FormatError("Pages tree contains circular reference.")):(q.put(E),void C.fetchAsync(E).then(function(p){(0,fe.isDict)(p,"Page")||(0,fe.isDict)(p)&&!p.has("Kids")?M===I?(E&&!P.has(E)&&P.put(E,1),A.resolve([p,E])):(I++,j()):(b.push(p),j())},A.reject))}if(!(0,fe.isDict)(E))return void A.reject(new k.FormatError("Page dictionary kid reference points to wrong type of object."));if(F=E.get("Count"),Number.isInteger(F)&&F>=0){const p=E.objId;if(p&&!P.has(p)&&P.put(p,F),I+F<=M){I+=F;continue}}const x=E.get("Kids");if(!Array.isArray(x)){if((0,fe.isName)(E.get("Type"),"Page")||!E.has("Type")&&E.has("Contents")){if(I===M)return void A.resolve([E,null]);I++;continue}return void A.reject(new k.FormatError("Page dictionary kids object is not an array."))}for(let p=x.length-1;p>=0;p--)b.push(x[p])}A.reject(new Error(`Page index ${M} not found.`))}(),A.promise}getPageIndex(M){const A=this.xref;let q=0;return function C(P){return function b(P){let I,F=0;return A.fetchAsync(P).then(function(j){if((0,fe.isRefsEqual)(P,M)&&!(0,fe.isDict)(j,"Page")&&(!(0,fe.isDict)(j)||j.has("Type")||!j.has("Contents")))throw new k.FormatError("The reference does not point to a /Page dictionary.");if(!j)return null;if(!(0,fe.isDict)(j))throw new k.FormatError("Node must be a dictionary.");return I=j.getRaw("Parent"),j.getAsync("Parent")}).then(function(j){if(!j)return null;if(!(0,fe.isDict)(j))throw new k.FormatError("Parent must be a dictionary.");return j.getAsync("Kids")}).then(function(j){if(!j)return null;const E=[];let x=!1;for(let p=0,m=j.length;p<m;p++){const _=j[p];if(!(0,fe.isRef)(_))throw new k.FormatError("Kid must be a reference.");if((0,fe.isRefsEqual)(_,P)){x=!0;break}E.push(A.fetchAsync(_).then(function(R){if(!(0,fe.isDict)(R))throw new k.FormatError("Kid node must be a dictionary.");R.has("Count")?F+=R.get("Count"):F++}))}if(!x)throw new k.FormatError("Kid reference not found in parent's kids.");return Promise.all(E).then(function(){return[F,I]})})}(P).then(function(F){if(!F)return q;const[I,j]=F;return q+=I,C(j)})}(M)}static parseDestDictionary(M){const q=M.destDict;if(!(0,fe.isDict)(q))return void(0,k.warn)("parseDestDictionary: `destDict` must be a dictionary.");const C=M.resultObj;if("object"!=typeof C)return void(0,k.warn)("parseDestDictionary: `resultObj` must be an object.");const P=M.docBaseUrl||null;let I,j,F=q.get("A");if(!(0,fe.isDict)(F)&&q.has("Dest")&&(F=q.get("Dest")),(0,fe.isDict)(F)){const E=F.get("S");if(!(0,fe.isName)(E))return void(0,k.warn)("parseDestDictionary: Invalid type in Action dictionary.");const x=E.name;switch(x){case"URI":I=F.get("URI"),(0,fe.isName)(I)?I="/"+I.name:(0,k.isString)(I)&&(I=function A(E){return E.startsWith("www.")?`http://${E}`:E}(I));break;case"GoTo":j=F.get("D");break;case"Launch":case"GoToR":const p=F.get("F");(0,fe.isDict)(p)?I=p.get("F")||null:(0,k.isString)(p)&&(I=p);let m=F.get("D");if(m&&((0,fe.isName)(m)&&(m=m.name),(0,k.isString)(I))){const U=I.split("#")[0];(0,k.isString)(m)?I=U+"#"+m:Array.isArray(m)&&(I=U+"#"+JSON.stringify(m))}const _=F.get("NewWindow");(0,k.isBool)(_)&&(C.newWindow=_);break;case"Named":const R=F.get("N");(0,fe.isName)(R)&&(C.action=R.name);break;case"JavaScript":const G=F.get("JS");let K;if((0,fe.isStream)(G)?K=(0,k.bytesToString)(G.getBytes()):(0,k.isString)(G)&&(K=G),K){const L=new RegExp("^\\s*("+["app.launchURL","window.open"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec((0,k.stringToPDFString)(K));if(L&&L[2]){I=L[2],"true"===L[3]&&"app.launchURL"===L[1]&&(C.newWindow=!0);break}}default:(0,k.warn)(`parseDestDictionary: unsupported action type "${x}".`)}}else q.has("Dest")&&(j=q.get("Dest"));if((0,k.isString)(I)){I=function b(E){try{return(0,k.stringToUTF8String)(E)}catch{return E}}(I);const E=(0,k.createValidAbsoluteUrl)(I,P);E&&(C.url=E.href),C.unsafeUrl=I}j&&((0,fe.isName)(j)&&(j=j.name),((0,k.isString)(j)||Array.isArray(j))&&(C.dest=j))}}se.Catalog=f;var c=function(){function M(A,b){this.stream=A,this.pdfManager=b,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this.stats={streamTypes:Object.create(null),fontTypes:Object.create(null)},this._newRefNum=null}return M.prototype={getNewRef:function(){return null===this._newRefNum&&(this._newRefNum=this.entries.length),fe.Ref.get(this._newRefNum++,0)},resetNewRef:function(){this._newRefNum=null},setStartXRef:function(b){this.startXRefQueue=[b]},parse:function(b){var q;let C,I;b?((0,k.warn)("Indexing all PDF objects"),q=this.indexObjects()):q=this.readXRef(),q.assignXref(this),this.trailer=q;try{C=q.get("Encrypt")}catch(j){if(j instanceof e.MissingDataException)throw j;(0,k.warn)(`XRef.parse - Invalid "Encrypt" reference: "${j}".`)}if((0,fe.isDict)(C)){var P=q.get("ID"),F=P&&P.length?P[0]:"";C.suppressEncryption=!0,this.encrypt=new V.CipherTransformFactory(C,F,this.pdfManager.password)}try{I=q.get("Root")}catch(j){if(j instanceof e.MissingDataException)throw j;(0,k.warn)(`XRef.parse - Invalid "Root" reference: "${j}".`)}if(!(0,fe.isDict)(I)||!I.has("Pages"))throw b?new k.FormatError("Invalid root reference"):new e.XRefParseException;this.root=I},processXRefTable:function(b){"tableState"in this||(this.tableState={entryNum:0,streamPos:b.lexer.stream.pos,parserBuf1:b.buf1,parserBuf2:b.buf2});var q=this.readXRefTable(b);if(!(0,fe.isCmd)(q,"trailer"))throw new k.FormatError("Invalid XRef table: could not find trailer dictionary");var C=b.getObj();if(!(0,fe.isDict)(C)&&C.dict&&(C=C.dict),!(0,fe.isDict)(C))throw new k.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,C},readXRefTable:function(b){var P,q=b.lexer.stream,C=this.tableState;for(q.pos=C.streamPos,b.buf1=C.parserBuf1,b.buf2=C.parserBuf2;;){if(!("firstEntryNum"in C)||!("entryCount"in C)){if((0,fe.isCmd)(P=b.getObj(),"trailer"))break;C.firstEntryNum=P,C.entryCount=b.getObj()}var F=C.firstEntryNum,I=C.entryCount;if(!Number.isInteger(F)||!Number.isInteger(I))throw new k.FormatError("Invalid XRef table: wrong types in subsection header");for(var j=C.entryNum;j<I;j++){C.streamPos=q.pos,C.entryNum=j,C.parserBuf1=b.buf1,C.parserBuf2=b.buf2;var E={};E.offset=b.getObj(),E.gen=b.getObj();var x=b.getObj();if(x instanceof fe.Cmd)switch(x.cmd){case"f":E.free=!0;break;case"n":E.uncompressed=!0}if(!Number.isInteger(E.offset)||!Number.isInteger(E.gen)||!E.free&&!E.uncompressed)throw new k.FormatError(`Invalid entry in XRef subsection: ${F}, ${I}`);0===j&&E.free&&1===F&&(F=0),this.entries[j+F]||(this.entries[j+F]=E)}C.entryNum=0,C.streamPos=q.pos,C.parserBuf1=b.buf1,C.parserBuf2=b.buf2,delete C.firstEntryNum,delete C.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new k.FormatError("Invalid XRef table: unexpected first object");return P},processXRefStream:function(b){if(!("streamState"in this)){var q=b.dict,C=q.get("W"),P=q.get("Index");P||(P=[0,q.get("Size")]),this.streamState={entryRanges:P,byteWidths:C,entryNum:0,streamPos:b.pos}}return this.readXRefStream(b),delete this.streamState,b.dict},readXRefStream:function(b){var q,C,P=this.streamState;b.pos=P.streamPos;for(var F=P.byteWidths,I=F[0],j=F[1],E=F[2],x=P.entryRanges;x.length>0;){var p=x[0],m=x[1];if(!Number.isInteger(p)||!Number.isInteger(m))throw new k.FormatError(`Invalid XRef range fields: ${p}, ${m}`);if(!Number.isInteger(I)||!Number.isInteger(j)||!Number.isInteger(E))throw new k.FormatError(`Invalid XRef entry fields length: ${p}, ${m}`);for(q=P.entryNum;q<m;++q){P.entryNum=q,P.streamPos=b.pos;var _=0,R=0,G=0;for(C=0;C<I;++C)_=_<<8|b.getByte();for(0===I&&(_=1),C=0;C<j;++C)R=R<<8|b.getByte();for(C=0;C<E;++C)G=G<<8|b.getByte();var K={};switch(K.offset=R,K.gen=G,_){case 0:K.free=!0;break;case 1:K.uncompressed=!0;break;case 2:break;default:throw new k.FormatError(`Invalid XRef entry type: ${_}`)}this.entries[p+q]||(this.entries[p+q]=K)}P.entryNum=0,P.streamPos=b.pos,x.splice(0,2)}},indexObjects:function(){function j(Ce,Me){for(var Ne="",We=Ce[Me];10!==We&&13!==We&&60!==We&&!(++Me>=Ce.length);)Ne+=String.fromCharCode(We),We=Ce[Me];return Ne}function E(Ce,Me,Ne){for(var We=Ne.length,Xe=Ce.length,Qe=0;Me<Xe;){for(var Ye=0;Ye<We&&Ce[Me+Ye]===Ne[Ye];)++Ye;if(Ye>=We)break;Me++,Qe++}return Qe}var x=/^(\d+)\s+(\d+)\s+obj\b/;const p=/\bendobj[\b\s]$/,m=/\s+(\d+\s+\d+\s+obj[\b\s<])$/;var R=new Uint8Array([116,114,97,105,108,101,114]),G=new Uint8Array([115,116,97,114,116,120,114,101,102]);const K=new Uint8Array([111,98,106]);var U=new Uint8Array([47,88,82,101,102]);this.entries.length=0;var _e,we,z=this.stream;z.pos=0;for(var L=z.getBytes(),S=z.start,B=L.length,J=[],ie=[];S<B;){var ce=L[S];if(9!==ce&&10!==ce&&13!==ce&&32!==ce)if(37!==ce){var ye,pe=j(L,S);if(pe.startsWith("xref")&&(4===pe.length||/\s/.test(pe[4])))S+=E(L,S,R),J.push(S),S+=E(L,S,G);else if(ye=x.exec(pe)){const Ce=0|ye[1],Me=0|ye[2];(!this.entries[Ce]||this.entries[Ce].gen===Me)&&(this.entries[Ce]={offset:S-z.start,gen:Me,uncompressed:!0});let Ne,We=S+pe.length;for(;We<L.length;){const Qe=We+E(L,We,K)+4;Ne=Qe-S;const Ye=Math.max(Qe-25,We),Je=(0,k.bytesToString)(L.subarray(Ye,Qe));if(p.test(Je))break;{const He=m.exec(Je);if(He&&He[1]){(0,k.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),Ne-=He[1].length;break}}We=Qe}const Xe=L.subarray(S,S+Ne);var Te=E(Xe,0,U);Te<Ne&&Xe[Te+5]<64&&(ie.push(S-z.start),this.xrefstms[S-z.start]=1),S+=Ne}else pe.startsWith("trailer")&&(7===pe.length||/\s/.test(pe[7]))?(J.push(S),S+=E(L,S,G)):S+=pe.length+1}else do{if(++S>=B)break;ce=L[S]}while(10!==ce&&13!==ce);else++S}for(_e=0,we=ie.length;_e<we;++_e)this.startXRefQueue.push(ie[_e]),this.readXRef(!0);let De;for(_e=0,we=J.length;_e<we;++_e){z.pos=J[_e];const Ce=new ee.Parser({lexer:new ee.Lexer(z),xref:this,allowStreams:!0,recoveryMode:!0});var xe=Ce.getObj();if(!(0,fe.isCmd)(xe,"trailer"))continue;const Me=Ce.getObj();if(!(0,fe.isDict)(Me))continue;let Ne;try{Ne=Me.get("Root")}catch(We){if(We instanceof e.MissingDataException)throw We;continue}if((0,fe.isDict)(Ne)&&Ne.has("Pages")){if(Me.has("ID"))return Me;De=Me}}if(De)return De;throw new k.InvalidPDFException("Invalid PDF structure.")},readXRef:function(b){var q=this.stream;const C=Object.create(null);try{for(;this.startXRefQueue.length;){var P=this.startXRefQueue[0];if(C[P]){(0,k.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}C[P]=!0,q.pos=P+q.start;const E=new ee.Parser({lexer:new ee.Lexer(q),xref:this,allowStreams:!0});var I,F=E.getObj();if((0,fe.isCmd)(F,"xref")){if(I=this.processXRefTable(E),this.topDict||(this.topDict=I),F=I.get("XRefStm"),Number.isInteger(F)){var j=F;j in this.xrefstms||(this.xrefstms[j]=1,this.startXRefQueue.push(j))}}else{if(!Number.isInteger(F))throw new k.FormatError("Invalid XRef stream header");if(!Number.isInteger(E.getObj())||!(0,fe.isCmd)(E.getObj(),"obj")||!(0,fe.isStream)(F=E.getObj()))throw new k.FormatError("Invalid XRef stream");if(I=this.processXRefStream(F),this.topDict||(this.topDict=I),!I)throw new k.FormatError("Failed to read XRef stream")}F=I.get("Prev"),Number.isInteger(F)?this.startXRefQueue.push(F):(0,fe.isRef)(F)&&this.startXRefQueue.push(F.num),this.startXRefQueue.shift()}return this.topDict}catch(E){if(E instanceof e.MissingDataException)throw E;(0,k.info)("(while reading XRef): "+E)}if(!b)throw new e.XRefParseException},getEntry:function(b){var q=this.entries[b];return q&&!q.free&&q.offset?q:null},fetchIfRef:function(b,q){return b instanceof fe.Ref?this.fetch(b,q):b},fetch:function(b,q){if(!(b instanceof fe.Ref))throw new Error("ref object is not a reference");const C=b.num,P=this._cacheMap.get(C);if(void 0!==P)return P instanceof fe.Dict&&!P.objId&&(P.objId=b.toString()),P;let F=this.getEntry(C);return null===F?(this._cacheMap.set(C,F),F):(F=F.uncompressed?this.fetchUncompressed(b,F,q):this.fetchCompressed(b,F,q),(0,fe.isDict)(F)?F.objId=b.toString():(0,fe.isStream)(F)&&(F.dict.objId=b.toString()),F)},fetchUncompressed(A,b,q=!1){var C=A.gen,P=A.num;if(b.gen!==C)throw new e.XRefEntryException(`Inconsistent generation in XRef: ${A}`);var F=this.stream.makeSubStream(b.offset+this.stream.start);const I=new ee.Parser({lexer:new ee.Lexer(F),xref:this,allowStreams:!0});var j=I.getObj(),E=I.getObj(),x=I.getObj();if(j!==P||E!==C||!(x instanceof fe.Cmd))throw new e.XRefEntryException(`Bad (uncompressed) XRef entry: ${A}`);if("obj"!==x.cmd){if(x.cmd.startsWith("obj")&&(P=parseInt(x.cmd.substring(3),10),!Number.isNaN(P)))return P;throw new e.XRefEntryException(`Bad (uncompressed) XRef entry: ${A}`)}return b=this.encrypt&&!q?I.getObj(this.encrypt.createCipherTransform(P,C)):I.getObj(),(0,fe.isStream)(b)||this._cacheMap.set(P,b),b},fetchCompressed(A,b,q=!1){const C=b.offset,P=this.fetch(fe.Ref.get(C,0));if(!(0,fe.isStream)(P))throw new k.FormatError("bad ObjStm stream");const F=P.dict.get("First"),I=P.dict.get("N");if(!Number.isInteger(F)||!Number.isInteger(I))throw new k.FormatError("invalid first and n parameters for ObjStm stream");const j=new ee.Parser({lexer:new ee.Lexer(P),xref:this,allowStreams:!0}),E=new Array(I);for(let p=0;p<I;++p){const m=j.getObj();if(!Number.isInteger(m))throw new k.FormatError(`invalid object number in the ObjStm stream: ${m}`);const _=j.getObj();if(!Number.isInteger(_))throw new k.FormatError(`invalid object offset in the ObjStm stream: ${_}`);E[p]=m}const x=new Array(I);for(let p=0;p<I;++p){const m=j.getObj();if(x[p]=m,j.buf1 instanceof fe.Cmd&&"endobj"===j.buf1.cmd&&j.shift(),(0,fe.isStream)(m))continue;const _=E[p],R=this.entries[_];R&&R.offset===C&&R.gen===p&&this._cacheMap.set(_,m)}if(void 0===(b=x[b.gen]))throw new e.XRefEntryException(`Bad (compressed) XRef entry: ${A}`);return b},fetchIfRefAsync(A,b){var q=this;return le(function*(){return A instanceof fe.Ref?q.fetchAsync(A,b):A})()},fetchAsync(A,b){var q=this;return le(function*(){try{return q.fetch(A,b)}catch(C){if(!(C instanceof e.MissingDataException))throw C;return yield q.pdfManager.requestRange(C.begin,C.end),q.fetchAsync(A,b)}})()},getCatalogObj:function(){return this.root}},M}();se.XRef=c;class ${constructor(M,A,b){this.constructor===$&&(0,k.unreachable)("Cannot initialize NameOrNumberTree."),this.root=M,this.xref=A,this._type=b}getAll(){const M=Object.create(null);if(!this.root)return M;const A=this.xref,b=new fe.RefSet;b.put(this.root);const q=[this.root];for(;q.length>0;){const C=A.fetchIfRef(q.shift());if(!(0,fe.isDict)(C))continue;if(C.has("Kids")){const F=C.get("Kids");for(let I=0,j=F.length;I<j;I++){const E=F[I];if(b.has(E))throw new k.FormatError(`Duplicate entry in "${this._type}" tree.`);q.push(E),b.put(E)}continue}const P=C.get(this._type);if(Array.isArray(P))for(let F=0,I=P.length;F<I;F+=2)M[A.fetchIfRef(P[F])]=A.fetchIfRef(P[F+1])}return M}get(M){if(!this.root)return null;const A=this.xref;let b=A.fetchIfRef(this.root),q=0;for(;b.has("Kids");){if(++q>10)return(0,k.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const F=b.get("Kids");if(!Array.isArray(F))return null;let I=0,j=F.length-1;for(;I<=j;){const E=I+j>>1,p=A.fetchIfRef(F[E]).get("Limits");if(M<A.fetchIfRef(p[0]))j=E-1;else{if(!(M>A.fetchIfRef(p[1]))){b=A.fetchIfRef(F[E]);break}I=E+1}}if(I>j)return null}const P=b.get(this._type);if(Array.isArray(P)){let F=0,I=P.length-2;for(;F<=I;){const j=F+I>>1,E=j+(1&j),x=A.fetchIfRef(P[E]);if(M<x)I=E-2;else{if(!(M>x))return A.fetchIfRef(P[E+1]);F=E+2}}(0,k.info)(`Falling back to an exhaustive search, for key "${M}", in "${this._type}" tree.`);for(let j=0,E=P.length;j<E;j+=2)if(A.fetchIfRef(P[j])===M)return(0,k.warn)(`The "${M}" key was found at an incorrect, i.e. out-of-order, position in "${this._type}" tree.`),A.fetchIfRef(P[j+1])}return null}}class ae extends ${constructor(M,A){super(M,A,"Names")}}class oe extends ${constructor(M,A){super(M,A,"Nums")}}var W=function(){function M(b,q){!b||!(0,fe.isDict)(b)||(this.xref=q,this.root=b,b.has("FS")&&(this.fs=b.get("FS")),this.description=b.has("Desc")?(0,k.stringToPDFString)(b.get("Desc")):"",b.has("RF")&&(0,k.warn)("Related file specifications are not supported"),this.contentAvailable=!0,b.has("EF")||(this.contentAvailable=!1,(0,k.warn)("Non-embedded file specifications are not supported")))}function A(b){return b.has("UF")?b.get("UF"):b.has("F")?b.get("F"):b.has("Unix")?b.get("Unix"):b.has("Mac")?b.get("Mac"):b.has("DOS")?b.get("DOS"):null}return M.prototype={get filename(){if(!this._filename&&this.root){var b=A(this.root)||"unnamed";this._filename=(0,k.stringToPDFString)(b).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename},get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=A(this.root.get("EF")));var b=null;if(this.contentRef){var C=this.xref.fetchIfRef(this.contentRef);C&&(0,fe.isStream)(C)?b=C.getBytes():(0,k.warn)("Embedded file specification points to non-existing/invalid content")}else(0,k.warn)("Embedded file specification does not have a content");return b},get serializable(){return{filename:this.filename,content:this.content}}},M}();se.FileSpec=W;const N=function(){function O(b){return b instanceof fe.Ref||b instanceof fe.Dict||Array.isArray(b)||(0,fe.isStream)(b)}function M(b,q){if(b instanceof fe.Dict)b=b.getRawValues();else if((0,fe.isStream)(b))b=b.dict.getRawValues();else if(!Array.isArray(b))return;for(const C of b)O(C)&&q.push(C)}function A(b,q,C){this.dict=b,this.keys=q,this.xref=C,this.refSet=null}return A.prototype={load(){var b=this;return le(function*(){if(!b.xref.stream.allChunksLoaded||b.xref.stream.allChunksLoaded())return;const{keys:q,dict:C}=b;b.refSet=new fe.RefSet;const P=[];for(let F=0,I=q.length;F<I;F++){const j=C.getRaw(q[F]);void 0!==j&&P.push(j)}return b._walk(P)})()},_walk(b){var q=this;return le(function*(){const C=[],P=[];for(;b.length;){let F=b.pop();if(F instanceof fe.Ref){if(q.refSet.has(F))continue;try{q.refSet.put(F),F=q.xref.fetch(F)}catch(I){if(!(I instanceof e.MissingDataException))throw I;C.push(F),P.push({begin:I.begin,end:I.end})}}if(F&&F.getBaseStreams){const I=F.getBaseStreams();let j=!1;for(let E=0,x=I.length;E<x;E++){const p=I[E];p.allChunksLoaded&&!p.allChunksLoaded()&&(j=!0,P.push({begin:p.start,end:p.end}))}j&&C.push(F)}M(F,b)}if(P.length){yield q.xref.stream.manager.requestRanges(P);for(let F=0,I=C.length;F<I;F++){const j=C[F];j instanceof fe.Ref&&q.refSet.remove(j)}return q._walk(C)}q.refSet=null})()}},A}();se.ObjectLoader=N},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.Parser=se.Linearization=se.Lexer=void 0;var k=y(12),fe=y(2),ee=y(5),e=y(8),V=y(13),H=y(15),te=y(18),re=y(20);function $(M){const A=M.length;let b=1,q=0;for(let C=0;C<A;++C)b+=255&M[C],q+=b;return q%65521<<16|b%65521}class ae{constructor({lexer:A,xref:b,allowStreams:q=!1,recoveryMode:C=!1}){this.lexer=A,this.xref=b,this.allowStreams=q,this.recoveryMode=C,this.imageCache=Object.create(null),this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof ee.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(A){if(A instanceof e.MissingDataException)throw A;return!1}}getObj(A=null){const b=this.buf1;if(this.shift(),b instanceof ee.Cmd)switch(b.cmd){case"BI":return this.makeInlineImage(A);case"[":const q=[];for(;!(0,ee.isCmd)(this.buf1,"]")&&!(0,ee.isEOF)(this.buf1);)q.push(this.getObj(A));if((0,ee.isEOF)(this.buf1)){if(!this.recoveryMode)throw new fe.FormatError("End of file inside array");return q}return this.shift(),q;case"<<":const C=new ee.Dict(this.xref);for(;!(0,ee.isCmd)(this.buf1,">>")&&!(0,ee.isEOF)(this.buf1);){if(!(0,ee.isName)(this.buf1)){(0,fe.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const P=this.buf1.name;if(this.shift(),(0,ee.isEOF)(this.buf1))break;C.set(P,this.getObj(A))}if((0,ee.isEOF)(this.buf1)){if(!this.recoveryMode)throw new fe.FormatError("End of file inside dictionary");return C}return(0,ee.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(C,A):C:(this.shift(),C);default:return b}if(Number.isInteger(b)){if(Number.isInteger(this.buf1)&&(0,ee.isCmd)(this.buf2,"R")){const q=ee.Ref.get(b,this.buf1);return this.shift(),this.shift(),q}return b}return"string"==typeof b&&A?A.decryptString(b):b}findDefaultInlineStreamEnd(A){const j=this.lexer,E=A.pos;let m,_,p=0;for(;-1!==(m=A.getByte());)if(0===p)p=69===m?1:0;else if(1===p)p=73===m?2:0;else if((0,fe.assert)(2===p,"findDefaultInlineStreamEnd - invalid state."),32===m||10===m||13===m){_=A.pos;const G=A.peekBytes(10);for(let K=0,U=G.length;K<U;K++)if(m=G[K],(0!==m||0===G[K+1])&&10!==m&&13!==m&&(m<32||m>127)){p=0;break}if(2!==p)continue;if(j.knownCommands){const K=j.peekObj();K instanceof ee.Cmd&&!j.knownCommands[K.cmd]&&(p=0)}else(0,fe.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(2===p)break}else p=0;-1===m&&((0,fe.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),_&&((0,fe.warn)('... trying to recover by using the last "EI" occurrence.'),A.skip(-(A.pos-_))));let R=4;return A.skip(-R),m=A.peekByte(),A.skip(R),(0,e.isWhiteSpace)(m)||R--,A.pos-R-E}findDCTDecodeInlineStreamEnd(A){const b=A.pos;let C,P,q=!1;for(;-1!==(C=A.getByte());)if(255===C){switch(A.getByte()){case 0:break;case 255:A.skip(-1);break;case 217:q=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:P=A.getUint16(),A.skip(P>2?P-2:-2)}if(q)break}const F=A.pos-b;return-1===C?((0,fe.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),A.skip(-F),this.findDefaultInlineStreamEnd(A)):(this.inlineStreamSkipEI(A),F)}findASCII85DecodeInlineStreamEnd(A){const C=A.pos;let P;for(;-1!==(P=A.getByte());)if(126===P){const I=A.pos;for(P=A.peekByte();(0,e.isWhiteSpace)(P);)A.skip(),P=A.peekByte();if(62===P){A.skip();break}if(A.pos>I){const j=A.peekBytes(2);if(69===j[0]&&73===j[1])break}}const F=A.pos-C;return-1===P?((0,fe.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),A.skip(-F),this.findDefaultInlineStreamEnd(A)):(this.inlineStreamSkipEI(A),F)}findASCIIHexDecodeInlineStreamEnd(A){const q=A.pos;let C;for(;-1!==(C=A.getByte())&&62!==C;);const P=A.pos-q;return-1===C?((0,fe.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),A.skip(-P),this.findDefaultInlineStreamEnd(A)):(this.inlineStreamSkipEI(A),P)}inlineStreamSkipEI(A){let P,C=0;for(;-1!==(P=A.getByte());)if(0===C)C=69===P?1:0;else if(1===C)C=73===P?2:0;else if(2===C)break}makeInlineImage(A){const b=this.lexer,q=b.stream,C=new ee.Dict(this.xref);let P;for(;!(0,ee.isCmd)(this.buf1,"ID")&&!(0,ee.isEOF)(this.buf1);){if(!(0,ee.isName)(this.buf1))throw new fe.FormatError("Dictionary key must be a name object");const m=this.buf1.name;if(this.shift(),(0,ee.isEOF)(this.buf1))break;C.set(m,this.getObj(A))}-1!==b.beginInlineImagePos&&(P=q.pos-b.beginInlineImagePos);const F=C.get("Filter","F");let I;if((0,ee.isName)(F))I=F.name;else if(Array.isArray(F)){const m=this.xref.fetchIfRef(F[0]);(0,ee.isName)(m)&&(I=m.name)}const j=q.pos;let E;E="DCTDecode"===I||"DCT"===I?this.findDCTDecodeInlineStreamEnd(q):"ASCII85Decode"===I||"A85"===I?this.findASCII85DecodeInlineStreamEnd(q):"ASCIIHexDecode"===I||"AHx"===I?this.findASCIIHexDecodeInlineStreamEnd(q):this.findDefaultInlineStreamEnd(q);let p,x=q.makeSubStream(j,E,C);if(E<1e3&&P<5552){const m=x.getBytes();x.reset();const _=q.pos;q.pos=b.beginInlineImagePos;const R=q.getBytes(P);q.pos=_,p=$(m)+"_"+$(R);const G=this.imageCache[p];if(void 0!==G)return this.buf2=ee.Cmd.get("EI"),this.shift(),G.reset(),G}return A&&(x=A.createStream(x,E)),x=this.filter(x,C,E),x.dict=C,void 0!==p&&(x.cacheKey=`inline_${E}_${p}`,this.imageCache[p]=x),this.buf2=ee.Cmd.get("EI"),this.shift(),x}_findStreamLength(A,b){const{stream:q}=this.lexer;q.pos=A;const P=b.length;for(;q.pos<q.end;){const F=q.peekBytes(2048),I=F.length-P;if(I<=0)break;let j=0;for(;j<I;){let E=0;for(;E<P&&F[j+E]===b[E];)E++;if(E>=P)return q.pos+=j,q.pos-A;j++}q.pos+=I}return-1}makeStream(A,b){const q=this.lexer;let C=q.stream;q.skipToNextLine();const P=C.pos-1;let F=A.get("Length");if(Number.isInteger(F)||((0,fe.info)(`Bad length "${F}" in stream`),F=0),C.pos=P+F,q.nextChar(),this.tryShift()&&(0,ee.isCmd)(this.buf2,"endstream"))this.shift();else{const I=new Uint8Array([101,110,100,115,116,114,101,97,109]);let j=this._findStreamLength(P,I);if(j<0){for(let x=1;x<=1;x++){const p=I.length-x,m=I.slice(0,p),_=this._findStreamLength(P,m);if(_>=0){const R=C.peekBytes(p+1)[p];if(!(0,e.isWhiteSpace)(R))break;(0,fe.info)(`Found "${(0,fe.bytesToString)(m)}" when searching for endstream command.`),j=_;break}}if(j<0)throw new fe.FormatError("Missing endstream command.")}F=j,q.nextChar(),this.shift(),this.shift()}return this.shift(),C=C.makeSubStream(P,F,A),b&&(C=b.createStream(C,F)),C=this.filter(C,A,F),C.dict=A,C}filter(A,b,q){let C=b.get("Filter","F"),P=b.get("DecodeParms","DP");if((0,ee.isName)(C))return Array.isArray(P)&&(0,fe.warn)("/DecodeParms should not contain an Array, when /Filter contains a Name."),this.makeFilter(A,C.name,q,P);let F=q;if(Array.isArray(C)){const I=C,j=P;for(let E=0,x=I.length;E<x;++E){if(C=this.xref.fetchIfRef(I[E]),!(0,ee.isName)(C))throw new fe.FormatError(`Bad filter name "${C}"`);P=null,Array.isArray(j)&&E in j&&(P=this.xref.fetchIfRef(j[E])),A=this.makeFilter(A,C.name,F,P),F=null}}return A}makeFilter(A,b,q,C){if(0===q)return(0,fe.warn)(`Empty "${b}" stream.`),new k.NullStream;try{const P=this.xref.stats.streamTypes;if("FlateDecode"===b||"Fl"===b)return P[fe.StreamType.FLATE]=!0,C?new k.PredictorStream(new k.FlateStream(A,q),q,C):new k.FlateStream(A,q);if("LZWDecode"===b||"LZW"===b){P[fe.StreamType.LZW]=!0;let F=1;return C?(C.has("EarlyChange")&&(F=C.get("EarlyChange")),new k.PredictorStream(new k.LZWStream(A,q,F),q,C)):new k.LZWStream(A,q,F)}return"DCTDecode"===b||"DCT"===b?(P[fe.StreamType.DCT]=!0,new te.JpegStream(A,q,A.dict,C)):"JPXDecode"===b||"JPX"===b?(P[fe.StreamType.JPX]=!0,new re.JpxStream(A,q,A.dict,C)):"ASCII85Decode"===b||"A85"===b?(P[fe.StreamType.A85]=!0,new k.Ascii85Stream(A,q)):"ASCIIHexDecode"===b||"AHx"===b?(P[fe.StreamType.AHX]=!0,new k.AsciiHexStream(A,q)):"CCITTFaxDecode"===b||"CCF"===b?(P[fe.StreamType.CCF]=!0,new V.CCITTFaxStream(A,q,C)):"RunLengthDecode"===b||"RL"===b?(P[fe.StreamType.RLX]=!0,new k.RunLengthStream(A,q)):"JBIG2Decode"===b?(P[fe.StreamType.JBIG]=!0,new H.Jbig2Stream(A,q,A.dict,C)):((0,fe.warn)(`Filter "${b}" is not supported.`),A)}catch(P){if(P instanceof e.MissingDataException)throw P;return(0,fe.warn)(`Invalid stream: "${P}"`),new k.NullStream}}}se.Parser=ae;const oe=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function W(M){return M>=48&&M<=57?15&M:M>=65&&M<=70||M>=97&&M<=102?9+(15&M):-1}class N{constructor(A,b=null){this.stream=A,this.nextChar(),this.strBuf=[],this.knownCommands=b,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let A=this.currentChar,b=!1,q=0,C=0;if(45===A?(C=-1,A=this.nextChar(),45===A&&(A=this.nextChar())):43===A&&(C=1,A=this.nextChar()),10===A||13===A)do{A=this.nextChar()}while(10===A||13===A);if(46===A&&(q=10,A=this.nextChar()),A<48||A>57){if(10===q&&0===C&&((0,e.isWhiteSpace)(A)||-1===A))return(0,fe.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;throw new fe.FormatError(`Invalid number: ${String.fromCharCode(A)} (charCode ${A})`)}C=C||1;let P=A-48,F=0,I=1;for(;(A=this.nextChar())>=0;)if(A>=48&&A<=57){const j=A-48;b?F=10*F+j:(0!==q&&(q*=10),P=10*P+j)}else if(46===A){if(0!==q)break;q=1}else if(45===A)(0,fe.warn)("Badly formatted number: minus sign in the middle");else{if(69!==A&&101!==A)break;if(A=this.peekChar(),43===A||45===A)I=45===A?-1:1,this.nextChar();else if(A<48||A>57)break;b=!0}return 0!==q&&(P/=q),b&&(P*=10**(I*F)),C*P}getString(){let A=1,b=!1;const q=this.strBuf;q.length=0;let C=this.nextChar();for(;;){let P=!1;switch(0|C){case-1:(0,fe.warn)("Unterminated string"),b=!0;break;case 40:++A,q.push("(");break;case 41:0==--A?(this.nextChar(),b=!0):q.push(")");break;case 92:switch(C=this.nextChar(),C){case-1:(0,fe.warn)("Unterminated string"),b=!0;break;case 110:q.push("\n");break;case 114:q.push("\r");break;case 116:q.push("\t");break;case 98:q.push("\b");break;case 102:q.push("\f");break;case 92:case 40:case 41:q.push(String.fromCharCode(C));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let F=15&C;C=this.nextChar(),P=!0,C>=48&&C<=55&&(F=(F<<3)+(15&C),C=this.nextChar(),C>=48&&C<=55&&(P=!1,F=(F<<3)+(15&C))),q.push(String.fromCharCode(F));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:q.push(String.fromCharCode(C))}break;default:q.push(String.fromCharCode(C))}if(b)break;P||(C=this.nextChar())}return q.join("")}getName(){let A,b;const q=this.strBuf;for(q.length=0;(A=this.nextChar())>=0&&!oe[A];)if(35===A){if(A=this.nextChar(),oe[A]){(0,fe.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),q.push("#");break}const C=W(A);if(-1!==C){b=A,A=this.nextChar();const P=W(A);if(-1===P){if((0,fe.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(A)}) in hexadecimal number.`),q.push("#",String.fromCharCode(b)),oe[A])break;q.push(String.fromCharCode(A));continue}q.push(String.fromCharCode(C<<4|P))}else q.push("#",String.fromCharCode(A))}else q.push(String.fromCharCode(A));return q.length>127&&(0,fe.warn)(`Name token is longer than allowed by the spec: ${q.length}`),ee.Name.get(q.join(""))}_hexStringWarn(A){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,fe.warn)(`getHexString - ignoring invalid character: ${A}`):(0,fe.warn)("getHexString - ignoring additional invalid characters.")}getHexString(){const A=this.strBuf;A.length=0;let C,P,b=this.currentChar,q=!0;for(this._hexStringNumWarn=0;;){if(b<0){(0,fe.warn)("Unterminated hex string");break}if(62===b){this.nextChar();break}if(1!==oe[b]){if(q){if(C=W(b),-1===C){this._hexStringWarn(b),b=this.nextChar();continue}}else{if(P=W(b),-1===P){this._hexStringWarn(b),b=this.nextChar();continue}A.push(String.fromCharCode(C<<4|P))}q=!q,b=this.nextChar()}else b=this.nextChar()}return A.join("")}getObj(){let A=!1,b=this.currentChar;for(;;){if(b<0)return ee.EOF;if(A)(10===b||13===b)&&(A=!1);else if(37===b)A=!0;else if(1!==oe[b])break;b=this.nextChar()}switch(0|b){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),ee.Cmd.get("[");case 93:return this.nextChar(),ee.Cmd.get("]");case 60:return b=this.nextChar(),60===b?(this.nextChar(),ee.Cmd.get("<<")):this.getHexString();case 62:return b=this.nextChar(),62===b?(this.nextChar(),ee.Cmd.get(">>")):ee.Cmd.get(">");case 123:return this.nextChar(),ee.Cmd.get("{");case 125:return this.nextChar(),ee.Cmd.get("}");case 41:throw this.nextChar(),new fe.FormatError(`Illegal character: ${b}`)}let q=String.fromCharCode(b);const C=this.knownCommands;let P=C&&void 0!==C[q];for(;(b=this.nextChar())>=0&&!oe[b];){const F=q+String.fromCharCode(b);if(P&&void 0===C[F])break;if(128===q.length)throw new fe.FormatError(`Command token too long: ${q.length}`);q=F,P=C&&void 0!==C[q]}return"true"===q||"false"!==q&&("null"===q?null:("BI"===q&&(this.beginInlineImagePos=this.stream.pos),ee.Cmd.get(q)))}peekObj(){const A=this.stream.pos,b=this.currentChar,q=this.beginInlineImagePos;let C;try{C=this.getObj()}catch(P){if(P instanceof e.MissingDataException)throw P;(0,fe.warn)(`peekObj: ${P}`)}return this.stream.pos=A,this.currentChar=b,this.beginInlineImagePos=q,C}skipToNextLine(){let A=this.currentChar;for(;A>=0;){if(13===A){A=this.nextChar(),10===A&&this.nextChar();break}if(10===A){this.nextChar();break}A=this.nextChar()}}}se.Lexer=N;se.Linearization=class O{static create(A){function b(p,m,_=!1){const R=p.get(m);if(Number.isInteger(R)&&(_?R>=0:R>0))return R;throw new Error(`The "${m}" parameter in the linearization dictionary is invalid.`)}const C=new ae({lexer:new N(A),xref:null}),P=C.getObj(),F=C.getObj(),I=C.getObj(),j=C.getObj();let E,x;if(!(Number.isInteger(P)&&Number.isInteger(F)&&(0,ee.isCmd)(I,"obj")&&(0,ee.isDict)(j)&&(0,fe.isNum)(E=j.get("Linearized"))&&E>0))return null;if((x=b(j,"L"))!==A.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:x,hints:function q(p){const m=p.get("H");let _;if(Array.isArray(m)&&(2===(_=m.length)||4===_)){for(let R=0;R<_;R++){const G=m[R];if(!(Number.isInteger(G)&&G>0))throw new Error(`Hint (${R}) in the linearization dictionary is invalid.`)}return m}throw new Error("Hint array in the linearization dictionary is invalid.")}(j),objectNumberFirst:b(j,"O"),endFirst:b(j,"E"),numPages:b(j,"N"),mainXRefEntriesOffset:b(j,"T"),pageFirst:j.has("P")?b(j,"P",!0):0}}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.LZWStream=se.StringStream=se.StreamsSequenceStream=se.Stream=se.RunLengthStream=se.PredictorStream=se.NullStream=se.FlateStream=se.DecodeStream=se.DecryptStream=se.AsciiHexStream=se.Ascii85Stream=void 0;var k=y(2),fe=y(5),ee=y(8),e=function(){function M(A,b,q,C){this.bytes=A instanceof Uint8Array?A:new Uint8Array(A),this.start=b||0,this.pos=this.start,this.end=b+q||this.bytes.length,this.dict=C}return M.prototype={get length(){return this.end-this.start},get isEmpty(){return 0===this.length},getByte:function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function(){var b=this.getByte(),q=this.getByte();return-1===b||-1===q?-1:(b<<8)+q},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes(A,b=!1){var q=this.bytes,C=this.pos,P=this.end;if(!A){const j=q.subarray(C,P);return b?new Uint8ClampedArray(j):j}var F=C+A;F>P&&(F=P),this.pos=F;const I=q.subarray(C,F);return b?new Uint8ClampedArray(I):I},peekByte:function(){var b=this.getByte();return-1!==b&&this.pos--,b},peekBytes(A,b=!1){var q=this.getBytes(A,b);return this.pos-=q.length,q},getByteRange(A,b){return A<0&&(A=0),b>this.end&&(b=this.end),this.bytes.subarray(A,b)},skip:function(b){b||(b=1),this.pos+=b},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(b,q,C){return new M(this.bytes.buffer,b,q,C)}},M}();se.Stream=e;var V=function(){function M(A){const b=(0,k.stringToBytes)(A);e.call(this,b)}return M.prototype=e.prototype,M}();se.StringStream=V;var H=function(){var M=new Uint8Array(0);function A(b){if(this._rawMinBufferLength=b||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=M,this.minBufferLength=512,b)for(;this.minBufferLength<b;)this.minBufferLength*=2}return A.prototype={get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},ensureBuffer:function(q){var C=this.buffer;if(q<=C.byteLength)return C;for(var P=this.minBufferLength;P<q;)P*=2;var F=new Uint8Array(P);return F.set(C),this.buffer=F},getByte:function(){for(var q=this.pos;this.bufferLength<=q;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function(){var q=this.getByte(),C=this.getByte();return-1===q||-1===C?-1:(q<<8)+C},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes(b,q=!1){var C,P=this.pos;if(b){for(this.ensureBuffer(P+b),C=P+b;!this.eof&&this.bufferLength<C;)this.readBlock();var F=this.bufferLength;C>F&&(C=F)}else{for(;!this.eof;)this.readBlock();C=this.bufferLength}this.pos=C;const I=this.buffer.subarray(P,C);return!q||I instanceof Uint8ClampedArray?I:new Uint8ClampedArray(I)},peekByte:function(){var q=this.getByte();return-1!==q&&this.pos--,q},peekBytes(b,q=!1){var C=this.getBytes(b,q);return this.pos-=C.length,C},makeSubStream:function(q,C,P){for(var F=q+C;this.bufferLength<=F&&!this.eof;)this.readBlock();return new e(this.buffer,q,C,P)},getByteRange(b,q){(0,k.unreachable)("Should not call DecodeStream.getByteRange")},skip:function(q){q||(q=1),this.pos+=q},reset:function(){this.pos=0},getBaseStreams:function(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}},A}();se.DecodeStream=H;var te=function(){function M(A){this.streams=A;let b=0;for(let q=0,C=A.length;q<C;q++){const P=A[q];b+=P instanceof H?P._rawMinBufferLength:P.length}H.call(this,b)}return(M.prototype=Object.create(H.prototype)).readBlock=function(){var b=this.streams;if(0!==b.length){var C=b.shift().getBytes(),P=this.bufferLength,F=P+C.length;this.ensureBuffer(F).set(C,P),this.bufferLength=F}else this.eof=!0},M.prototype.getBaseStreams=function(){for(var b=[],q=0,C=this.streams.length;q<C;q++){var P=this.streams[q];P.getBaseStreams&&b.push(...P.getBaseStreams())}return b},M}();se.StreamsSequenceStream=te;var re=function(){var M=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),b=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),q=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],C=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function P(F,I){this.str=F,this.dict=F.dict;var j=F.getByte(),E=F.getByte();if(-1===j||-1===E)throw new k.FormatError(`Invalid header in flate stream: ${j}, ${E}`);if(8!=(15&j))throw new k.FormatError(`Unknown compression method in flate stream: ${j}, ${E}`);if(((j<<8)+E)%31!=0)throw new k.FormatError(`Bad FCHECK in flate stream: ${j}, ${E}`);if(32&E)throw new k.FormatError(`FDICT bit set in flate stream: ${j}, ${E}`);this.codeSize=0,this.codeBuf=0,H.call(this,I)}return(P.prototype=Object.create(H.prototype)).getBits=function(I){for(var p,j=this.str,E=this.codeSize,x=this.codeBuf;E<I;){if(-1===(p=j.getByte()))throw new k.FormatError("Bad encoding in flate stream");x|=p<<E,E+=8}return p=x&(1<<I)-1,this.codeBuf=x>>I,this.codeSize=E-=I,p},P.prototype.getCode=function(I){for(var _,j=this.str,E=I[0],x=I[1],p=this.codeSize,m=this.codeBuf;p<x&&-1!==(_=j.getByte());)m|=_<<p,p+=8;var R=E[m&(1<<x)-1],G=R>>16,K=65535&R;if(G<1||p<G)throw new k.FormatError("Bad encoding in flate stream");return this.codeBuf=m>>G,this.codeSize=p-G,K},P.prototype.generateHuffmanTable=function(I){var x,j=I.length,E=0;for(x=0;x<j;++x)I[x]>E&&(E=I[x]);for(var p=1<<E,m=new Int32Array(p),_=1,R=0,G=2;_<=E;++_,R<<=1,G<<=1)for(var K=0;K<j;++K)if(I[K]===_){var U=0,z=R;for(x=0;x<_;++x)U=U<<1|1&z,z>>=1;for(x=U;x<p;x+=G)m[x]=_<<16|K;++R}return[m,E]},P.prototype.readBlock=function(){var I,j,E=this.str,x=this.getBits(3);if(1&x&&(this.eof=!0),0!=(x>>=1)){var R,G;if(1===x)R=q,G=C;else{if(2!==x)throw new k.FormatError("Unknown block type in flate stream");var S,K=this.getBits(5)+257,U=this.getBits(5)+1,z=this.getBits(4)+4,L=new Uint8Array(M.length);for(S=0;S<z;++S)L[M[S]]=this.getBits(3);var B=this.generateHuffmanTable(L);j=0,S=0;for(var ce,pe,ye,J=K+U,ie=new Uint8Array(J);S<J;){var Te=this.getCode(B);if(16===Te)ce=2,pe=3,ye=j;else if(17===Te)ce=3,pe=3,ye=j=0;else{if(18!==Te){ie[S++]=j=Te;continue}ce=7,pe=11,ye=j=0}for(var _e=this.getBits(ce)+pe;_e-- >0;)ie[S++]=ye}R=this.generateHuffmanTable(ie.subarray(0,K)),G=this.generateHuffmanTable(ie.subarray(K,J))}for(var we=(I=this.buffer)?I.length:0,De=this.bufferLength;;){var xe=this.getCode(R);if(xe<256)De+1>=we&&(we=(I=this.ensureBuffer(De+1)).length),I[De++]=xe;else{if(256===xe)return void(this.bufferLength=De);var Ce=(xe=A[xe-=257])>>16;Ce>0&&(Ce=this.getBits(Ce)),j=(65535&xe)+Ce,xe=this.getCode(G),(Ce=(xe=b[xe])>>16)>0&&(Ce=this.getBits(Ce));var Me=(65535&xe)+Ce;De+j>=we&&(we=(I=this.ensureBuffer(De+j)).length);for(var Ne=0;Ne<j;++Ne,++De)I[De]=I[De-Me]}}}else{var p;if(-1===(p=E.getByte()))throw new k.FormatError("Bad block header in flate stream");var m=p;if(-1===(p=E.getByte()))throw new k.FormatError("Bad block header in flate stream");if(m|=p<<8,-1===(p=E.getByte()))throw new k.FormatError("Bad block header in flate stream");var _=p;if(-1===(p=E.getByte()))throw new k.FormatError("Bad block header in flate stream");if((_|=p<<8)!=(65535&~m)&&(0!==m||0!==_))throw new k.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const We=this.bufferLength,Xe=We+m;if(I=this.ensureBuffer(Xe),this.bufferLength=Xe,0===m)-1===E.peekByte()&&(this.eof=!0);else{const Qe=E.getBytes(m);I.set(Qe,We),Qe.length<m&&(this.eof=!0)}}},P}();se.FlateStream=re;var f=function(){function M(A,b,q){if(!(0,fe.isDict)(q))return A;var C=this.predictor=q.get("Predictor")||1;if(C<=1)return A;if(2!==C&&(C<10||C>15))throw new k.FormatError(`Unsupported predictor: ${C}`);this.readBlock=2===C?this.readBlockTiff:this.readBlockPng,this.str=A,this.dict=A.dict;var P=this.colors=q.get("Colors")||1,F=this.bits=q.get("BitsPerComponent")||8,I=this.columns=q.get("Columns")||1;return this.pixBytes=P*F+7>>3,this.rowBytes=I*P*F+7>>3,H.call(this,b),this}return(M.prototype=Object.create(H.prototype)).readBlockTiff=function(){var b=this.rowBytes,q=this.bufferLength,C=this.ensureBuffer(q+b),P=this.bits,F=this.colors,I=this.str.getBytes(b);if(this.eof=!I.length,!this.eof){var _,j=0,E=0,x=0,p=0,m=q;if(1===P&&1===F)for(_=0;_<b;++_){var R=I[_]^j;R^=R>>1,R^=R>>2,j=(1&(R^=R>>4))<<7,C[m++]=R}else if(8===P){for(_=0;_<F;++_)C[m++]=I[_];for(;_<b;++_)C[m]=C[m-F]+I[_],m++}else if(16===P){var G=2*F;for(_=0;_<G;++_)C[m++]=I[_];for(;_<b;_+=2){var K=((255&I[_])<<8)+(255&I[_+1])+((255&C[m-G])<<8)+(255&C[m-G+1]);C[m++]=K>>8&255,C[m++]=255&K}}else{var U=new Uint8Array(F+1),z=(1<<P)-1,L=0,S=q,B=this.columns;for(_=0;_<B;++_)for(var J=0;J<F;++J)x<P&&(j=j<<8|255&I[L++],x+=8),U[J]=U[J]+(j>>x-P)&z,x-=P,E=E<<P|U[J],(p+=P)>=8&&(C[S++]=E>>p-8&255,p-=8);p>0&&(C[S++]=(E<<8-p)+(j&(1<<8-p)-1))}this.bufferLength+=b}},M.prototype.readBlockPng=function(){var b=this.rowBytes,q=this.pixBytes,C=this.str.getByte(),P=this.str.getBytes(b);if(this.eof=!P.length,!this.eof){var F=this.bufferLength,I=this.ensureBuffer(F+b),j=I.subarray(F-b,F);0===j.length&&(j=new Uint8Array(b));var E,p,m,x=F;switch(C){case 0:for(E=0;E<b;++E)I[x++]=P[E];break;case 1:for(E=0;E<q;++E)I[x++]=P[E];for(;E<b;++E)I[x]=I[x-q]+P[E]&255,x++;break;case 2:for(E=0;E<b;++E)I[x++]=j[E]+P[E]&255;break;case 3:for(E=0;E<q;++E)I[x++]=(j[E]>>1)+P[E];for(;E<b;++E)I[x]=(j[E]+I[x-q]>>1)+P[E]&255,x++;break;case 4:for(E=0;E<q;++E)I[x++]=(p=j[E])+(m=P[E]);for(;E<b;++E){var _=j[E-q],R=I[x-q],G=R+(p=j[E])-_,K=G-R;K<0&&(K=-K);var U=G-p;U<0&&(U=-U);var z=G-_;z<0&&(z=-z),m=P[E],I[x++]=K<=U&&K<=z?R+m:U<=z?p+m:_+m}break;default:throw new k.FormatError(`Unsupported predictor: ${C}`)}this.bufferLength+=b}},M}();se.PredictorStream=f;var c=function(){function M(b,q,C){this.str=b,this.dict=b.dict,this.decrypt=C,this.nextChunk=null,this.initialized=!1,H.call(this,q)}return(M.prototype=Object.create(H.prototype)).readBlock=function(){var q;if(this.initialized?q=this.nextChunk:(q=this.str.getBytes(512),this.initialized=!0),q&&0!==q.length){this.nextChunk=this.str.getBytes(512),q=(0,this.decrypt)(q,!(this.nextChunk&&this.nextChunk.length>0));var I,F=this.bufferLength,j=q.length,E=this.ensureBuffer(F+j);for(I=0;I<j;I++)E[F++]=q[I];this.bufferLength=F}else this.eof=!0},M}();se.DecryptStream=c;var $=function(){function M(A,b){this.str=A,this.dict=A.dict,this.input=new Uint8Array(5),b&&(b*=.8),H.call(this,b)}return(M.prototype=Object.create(H.prototype)).readBlock=function(){for(var P=this.str,F=P.getByte();(0,ee.isWhiteSpace)(F);)F=P.getByte();if(-1!==F&&126!==F){var j,E,I=this.bufferLength;if(122===F){for(j=this.ensureBuffer(I+4),E=0;E<4;++E)j[I+E]=0;this.bufferLength+=4}else{var x=this.input;for(x[0]=F,E=1;E<5;++E){for(F=P.getByte();(0,ee.isWhiteSpace)(F);)F=P.getByte();if(x[E]=F,-1===F||126===F)break}if(j=this.ensureBuffer(I+E-1),this.bufferLength+=E-1,E<5){for(;E<5;++E)x[E]=117;this.eof=!0}var p=0;for(E=0;E<5;++E)p=85*p+(x[E]-33);for(E=3;E>=0;--E)j[I+E]=255&p,p>>=8}}else this.eof=!0},M}();se.Ascii85Stream=$;var ae=function(){function M(A,b){this.str=A,this.dict=A.dict,this.firstDigit=-1,b&&(b*=.5),H.call(this,b)}return(M.prototype=Object.create(H.prototype)).readBlock=function(){var q=this.str.getBytes(8e3);if(q.length){for(var P=this.ensureBuffer(this.bufferLength+(q.length+1>>1)),F=this.bufferLength,I=this.firstDigit,j=0,E=q.length;j<E;j++){var p,x=q[j];if(x>=48&&x<=57)p=15&x;else{if(!(x>=65&&x<=70||x>=97&&x<=102)){if(62===x){this.eof=!0;break}continue}p=9+(15&x)}I<0?I=p:(P[F++]=I<<4|p,I=-1)}I>=0&&this.eof&&(P[F++]=I<<4,I=-1),this.firstDigit=I,this.bufferLength=F}else this.eof=!0},M}();se.AsciiHexStream=ae;var oe=function(){function M(A,b){this.str=A,this.dict=A.dict,H.call(this,b)}return(M.prototype=Object.create(H.prototype)).readBlock=function(){var b=this.str.getBytes(2);if(!b||b.length<2||128===b[0])this.eof=!0;else{var q,C=this.bufferLength,P=b[0];if(P<128){if((q=this.ensureBuffer(C+P+1))[C++]=b[1],P>0){var F=this.str.getBytes(P);q.set(F,C),C+=P}}else{var I=b[1];q=this.ensureBuffer(C+(P=257-P)+1);for(var j=0;j<P;j++)q[C++]=I}this.bufferLength=C}},M}();se.RunLengthStream=oe;var W=function(){function M(A,b,q){this.str=A,this.dict=A.dict,this.cachedData=0,this.bitsCached=0;for(var C=4096,P={earlyChange:q,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(C),dictionaryLengths:new Uint16Array(C),dictionaryPrevCodes:new Uint16Array(C),currentSequence:new Uint8Array(C),currentSequenceLength:0},F=0;F<256;++F)P.dictionaryValues[F]=F,P.dictionaryLengths[F]=1;this.lzwState=P,H.call(this,b)}return(M.prototype=Object.create(H.prototype)).readBits=function(b){for(var q=this.bitsCached,C=this.cachedData;q<b;){var P=this.str.getByte();if(-1===P)return this.eof=!0,null;C=C<<8|P,q+=8}return this.bitsCached=q-=b,this.cachedData=C,this.lastCode=null,C>>>q&(1<<b)-1},M.prototype.readBlock=function(){var P,F,I,q=1024,j=this.lzwState;if(j){var E=j.earlyChange,x=j.nextCode,p=j.dictionaryValues,m=j.dictionaryLengths,_=j.dictionaryPrevCodes,R=j.codeLength,G=j.prevCode,K=j.currentSequence,U=j.currentSequenceLength,z=0,L=this.bufferLength,S=this.ensureBuffer(this.bufferLength+q);for(P=0;P<512;P++){var B=this.readBits(R),J=U>0;if(B<256)K[0]=B,U=1;else{if(!(B>=258)){if(256===B){R=9,x=258,U=0;continue}this.eof=!0,delete this.lzwState;break}if(B<x)for(F=(U=m[B])-1,I=B;F>=0;F--)K[F]=p[I],I=_[I];else K[U++]=K[0]}if(J&&(_[x]=G,m[x]=m[G]+1,p[x]=K[0],R=++x+E&x+E-1?R:0|Math.min(Math.log(x+E)/.6931471805599453+1,12)),G=B,q<(z+=U)){do{q+=512}while(q<z);S=this.ensureBuffer(this.bufferLength+q)}for(F=0;F<U;F++)S[L++]=K[F]}j.nextCode=x,j.codeLength=R,j.prevCode=G,j.currentSequenceLength=U,this.bufferLength=L}},M}();se.LZWStream=W;var N=function(){function M(){e.call(this,new Uint8Array(0))}return M.prototype=e.prototype,M}();se.NullStream=N},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.CCITTFaxStream=void 0;var k=y(5),fe=y(14),ee=y(12),e=function(){function H(te,re,f){this.str=te,this.dict=te.dict,(0,k.isDict)(f)||(f=k.Dict.empty),this.ccittFaxDecoder=new fe.CCITTFaxDecoder({next:()=>te.getByte()},{K:f.get("K"),EndOfLine:f.get("EndOfLine"),EncodedByteAlign:f.get("EncodedByteAlign"),Columns:f.get("Columns"),Rows:f.get("Rows"),EndOfBlock:f.get("EndOfBlock"),BlackIs1:f.get("BlackIs1")}),ee.DecodeStream.call(this,re)}return(H.prototype=Object.create(ee.DecodeStream.prototype)).readBlock=function(){for(;!this.eof;){const te=this.ccittFaxDecoder.readNextChar();if(-1===te)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=te}},H}();se.CCITTFaxStream=e},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.CCITTFaxDecoder=void 0;var k=y(2);const fe=function(){const N=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],O=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],M=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],A=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],b=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],q=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];function C(P,F={}){if(!P||"function"!=typeof P.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=P,this.eof=!1,this.encoding=F.K||0,this.eoline=F.EndOfLine||!1,this.byteAlign=F.EncodedByteAlign||!1,this.columns=F.Columns||1728,this.rows=F.Rows||0;let j,I=F.EndOfBlock;for(null==I&&(I=!0),this.eoblock=I,this.black=F.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(j=this._lookBits(12));)this._eatBits(1);1===j&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}return C.prototype={readNextChar(){if(this.eof)return-1;const P=this.refLine,F=this.codingLine,I=this.columns;let j,E,x,p,m;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let _,R,G;if(this.err=!1,this.nextLine2D){for(p=0;F[p]<I;++p)P[p]=F[p];for(P[p++]=I,P[p]=I,F[0]=0,this.codingPos=0,j=0,E=0;F[this.codingPos]<I;)switch(_=this._getTwoDimCode(),_){case 0:this._addPixels(P[j+1],E),P[j+1]<I&&(j+=2);break;case 1:if(_=R=0,E){do{_+=G=this._getBlackCode()}while(G>=64);do{R+=G=this._getWhiteCode()}while(G>=64)}else{do{_+=G=this._getWhiteCode()}while(G>=64);do{R+=G=this._getBlackCode()}while(G>=64)}for(this._addPixels(F[this.codingPos]+_,E),F[this.codingPos]<I&&this._addPixels(F[this.codingPos]+R,1^E);P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 7:if(this._addPixels(P[j]+3,E),E^=1,F[this.codingPos]<I)for(++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 5:if(this._addPixels(P[j]+2,E),E^=1,F[this.codingPos]<I)for(++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 3:if(this._addPixels(P[j]+1,E),E^=1,F[this.codingPos]<I)for(++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 2:if(this._addPixels(P[j],E),E^=1,F[this.codingPos]<I)for(++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 8:if(this._addPixelsNeg(P[j]-3,E),E^=1,F[this.codingPos]<I)for(j>0?--j:++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 6:if(this._addPixelsNeg(P[j]-2,E),E^=1,F[this.codingPos]<I)for(j>0?--j:++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case 4:if(this._addPixelsNeg(P[j]-1,E),E^=1,F[this.codingPos]<I)for(j>0?--j:++j;P[j]<=F[this.codingPos]&&P[j]<I;)j+=2;break;case-1:this._addPixels(I,0),this.eof=!0;break;default:(0,k.info)("bad 2d code"),this._addPixels(I,0),this.err=!0}}else for(F[0]=0,this.codingPos=0,E=0;F[this.codingPos]<I;){if(_=0,E)do{_+=G=this._getBlackCode()}while(G>=64);else do{_+=G=this._getWhiteCode()}while(G>=64);this._addPixels(F[this.codingPos]+_,E),E^=1}let K=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(_=this._lookBits(12),this.eoline)for(;-1!==_&&1!==_;)this._eatBits(1),_=this._lookBits(12);else for(;0===_;)this._eatBits(1),_=this._lookBits(12);1===_?(this._eatBits(12),K=!0):-1===_&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&K&&this.byteAlign){if(_=this._lookBits(12),1===_){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(p=0;p<4;++p)_=this._lookBits(12),1!==_&&(0,k.info)("bad rtc code: "+_),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(_=this._lookBits(13),-1===_)return this.eof=!0,-1;if(_>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&_))}this.outputBits=F[0]>0?F[this.codingPos=0]:F[this.codingPos=1],this.row++}if(this.outputBits>=8)m=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&F[this.codingPos]<I&&(this.codingPos++,this.outputBits=F[this.codingPos]-F[this.codingPos-1]);else{x=8,m=0;do{this.outputBits>x?(m<<=x,1&this.codingPos||(m|=255>>8-x),this.outputBits-=x,x=0):(m<<=this.outputBits,1&this.codingPos||(m|=255>>8-this.outputBits),x-=this.outputBits,this.outputBits=0,F[this.codingPos]<I?(this.codingPos++,this.outputBits=F[this.codingPos]-F[this.codingPos-1]):x>0&&(m<<=x,x=0))}while(x)}return this.black&&(m^=255),m},_addPixels(P,F){const I=this.codingLine;let j=this.codingPos;P>I[j]&&(P>this.columns&&((0,k.info)("row is wrong length"),this.err=!0,P=this.columns),1&j^F&&++j,I[j]=P),this.codingPos=j},_addPixelsNeg(P,F){const I=this.codingLine;let j=this.codingPos;if(P>I[j])P>this.columns&&((0,k.info)("row is wrong length"),this.err=!0,P=this.columns),1&j^F&&++j,I[j]=P;else if(P<I[j]){for(P<0&&((0,k.info)("invalid code"),this.err=!0,P=0);j>0&&P<I[j-1];)--j;I[j]=P}this.codingPos=j},_findTableCode(P,F,I,j){const E=j||0;for(let x=P;x<=F;++x){let p=this._lookBits(x);if(-1===p)return[!0,1,!1];if(x<F&&(p<<=F-x),!E||p>=E){const m=I[p-E];if(m[0]===x)return this._eatBits(x),[!0,m[1],!0]}}return[!1,0,!1]},_getTwoDimCode(){let F,P=0;if(this.eoblock){if(P=this._lookBits(7),F=N[P],F&&F[0]>0)return this._eatBits(F[0]),F[1]}else{const I=this._findTableCode(1,7,N);if(I[0]&&I[2])return I[1]}return(0,k.info)("Bad two dim code"),-1},_getWhiteCode(){let F,P=0;if(this.eoblock){if(P=this._lookBits(12),-1===P)return 1;if(F=P>>5?M[P>>3]:O[P],F[0]>0)return this._eatBits(F[0]),F[1]}else{let I=this._findTableCode(1,9,M);if(I[0]||(I=this._findTableCode(11,12,O),I[0]))return I[1]}return(0,k.info)("bad white code"),this._eatBits(1),1},_getBlackCode(){let P,F;if(this.eoblock){if(P=this._lookBits(13),-1===P)return 1;if(F=P>>7?!(P>>9)&&P>>7?b[(P>>1)-64]:q[P>>7]:A[P],F[0]>0)return this._eatBits(F[0]),F[1]}else{let I=this._findTableCode(2,6,q);if(I[0]||(I=this._findTableCode(7,12,b,64),I[0])||(I=this._findTableCode(10,13,A),I[0]))return I[1]}return(0,k.info)("bad black code"),this._eatBits(1),1},_lookBits(P){let F;for(;this.inputBits<P;){if(-1===(F=this.source.next()))return 0===this.inputBits?-1:this.inputBuf<<P-this.inputBits&65535>>16-P;this.inputBuf=this.inputBuf<<8|F,this.inputBits+=8}return this.inputBuf>>this.inputBits-P&65535>>16-P},_eatBits(P){(this.inputBits-=P)<0&&(this.inputBits=0)}},C}();se.CCITTFaxDecoder=fe},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.Jbig2Stream=void 0;var k=y(5),fe=y(12),ee=y(16),e=y(2);const V=function(){function te(re,f,c,$){this.stream=re,this.maybeLength=f,this.dict=c,this.params=$,fe.DecodeStream.call(this,f)}return te.prototype=Object.create(fe.DecodeStream.prototype),Object.defineProperty(te.prototype,"bytes",{get(){return(0,e.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),te.prototype.ensureBuffer=function(re){},te.prototype.readBlock=function(){if(this.eof)return;const re=new ee.Jbig2Image,f=[];if((0,k.isDict)(this.params)){const ae=this.params.get("JBIG2Globals");if((0,k.isStream)(ae)){const oe=ae.getBytes();f.push({data:oe,start:0,end:oe.length})}}f.push({data:this.bytes,start:0,end:this.bytes.length});const c=re.parseChunks(f),$=c.length;for(let ae=0;ae<$;ae++)c[ae]^=255;this.buffer=c,this.bufferLength=$,this.eof=!0},te}();se.Jbig2Stream=V},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.Jbig2Image=void 0;var k=y(2),fe=y(8),ee=y(17),e=y(14);class V extends k.BaseException{constructor(re){super(`JBIG2 error: ${re}`)}}var H=function(){function re(){}function f(we,De,xe){this.data=we,this.start=De,this.end=xe}function c(we,De,xe){var Ce=we.getContexts(De),Me=1;function Ne(Qe){for(var Ye=0,Je=0;Je<Qe;Je++){var He=xe.readBit(Ce,Me);Me=Me<256?Me<<1|He:511&(Me<<1|He)|256,Ye=Ye<<1|He}return Ye>>>0}var We=Ne(1),Xe=Ne(1)?Ne(1)?Ne(1)?Ne(1)?Ne(1)?Ne(32)+4436:Ne(12)+340:Ne(8)+84:Ne(6)+20:Ne(4)+4:Ne(2);return 0===We?Xe:Xe>0?-Xe:null}function $(we,De,xe){for(var Ce=we.getContexts("IAID"),Me=1,Ne=0;Ne<xe;Ne++)Me=Me<<1|De.readBit(Ce,Me);return xe<31?Me&(1<<xe)-1:2147483647&Me}re.prototype={getContexts(we){return we in this?this[we]:this[we]=new Int8Array(65536)}},f.prototype={get decoder(){var we=new ee.ArithmeticDecoder(this.data,this.start,this.end);return(0,k.shadow)(this,"decoder",we)},get contextCache(){var we=new re;return(0,k.shadow)(this,"contextCache",we)}};var ae=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],oe=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],W=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],N=[39717,1941,229,405],O=[32,8];function A(we,De,xe,Ce,Me,Ne,We,Xe){if(we)return Te(new J(Xe.data,Xe.start,Xe.end),De,xe,!1);if(0===Ce&&!Ne&&!Me&&4===We.length&&3===We[0].x&&-1===We[0].y&&-3===We[1].x&&-1===We[1].y&&2===We[2].x&&-2===We[2].y&&-2===We[3].x&&-2===We[3].y)return function M(we,De,xe){var Ne,We,Xe,Qe,Ye,Je,He,Ce=xe.decoder,Me=xe.contextCache.getContexts("GB"),it=[];for(We=0;We<De;We++)for(Ye=it[We]=new Uint8Array(we),Ne=(He=We<2?Ye:it[We-2])[0]<<13|He[1]<<12|He[2]<<11|(Je=We<1?Ye:it[We-1])[0]<<7|Je[1]<<6|Je[2]<<5|Je[3]<<4,Xe=0;Xe<we;Xe++)Ye[Xe]=Qe=Ce.readBit(Me,Ne),Ne=(31735&Ne)<<1|(Xe+3<we?He[Xe+3]<<11:0)|(Xe+4<we?Je[Xe+4]<<4:0)|Qe;return it}(De,xe,Xe);var Qe=!!Ne,Ye=oe[Ce].concat(We);Ye.sort(function(Pn,En){return Pn.y-En.y||Pn.x-En.x});var Ge,Ze,Je=Ye.length,He=new Int8Array(Je),it=new Int8Array(Je),dt=[],pt=0,Dt=0,et=0,st=0;for(Ze=0;Ze<Je;Ze++)He[Ze]=Ye[Ze].x,it[Ze]=Ye[Ze].y,Dt=Math.min(Dt,Ye[Ze].x),et=Math.max(et,Ye[Ze].x),st=Math.min(st,Ye[Ze].y),Ze<Je-1&&Ye[Ze].y===Ye[Ze+1].y&&Ye[Ze].x===Ye[Ze+1].x-1?pt|=1<<Je-1-Ze:dt.push(Ze);var je=dt.length,Ue=new Int8Array(je),ct=new Int8Array(je),_t=new Uint16Array(je);for(Ge=0;Ge<je;Ge++)Ue[Ge]=Ye[Ze=dt[Ge]].x,ct[Ge]=Ye[Ze].y,_t[Ge]=1<<Je-1-Ze;for(var Et,mt,kt,It,Gt,Ut=-Dt,jt=-st,rt=De-et,Pe=N[Ce],Fe=new Uint8Array(De),$e=[],at=Xe.decoder,lt=Xe.contextCache.getContexts("GB"),bt=0,Lt=0,rn=0;rn<xe;rn++)if(Me&&(bt^=at.readBit(lt,Pe)))$e.push(Fe);else for(Fe=new Uint8Array(Fe),$e.push(Fe),Et=0;Et<De;Et++)if(Qe&&Ne[rn][Et])Fe[Et]=0;else{if(Et>=Ut&&Et<rt&&rn>=jt)for(Lt=Lt<<1&pt,Ze=0;Ze<je;Ze++)(It=$e[mt=rn+ct[Ze]][kt=Et+Ue[Ze]])&&(Lt|=It=_t[Ze]);else for(Lt=0,Gt=Je-1,Ze=0;Ze<Je;Ze++,Gt--)(kt=Et+He[Ze])>=0&&kt<De&&(mt=rn+it[Ze])>=0&&(It=$e[mt][kt])&&(Lt|=It<<Gt);var zn=at.readBit(lt,Lt);Fe[Et]=zn}return $e}function b(we,De,xe,Ce,Me,Ne,We,Xe,Qe){var Ye=W[xe].coding;0===xe&&(Ye=Ye.concat([Xe[0]]));var dt,Je=Ye.length,He=new Int32Array(Je),it=new Int32Array(Je);for(dt=0;dt<Je;dt++)He[dt]=Ye[dt].x,it[dt]=Ye[dt].y;var pt=W[xe].reference;0===xe&&(pt=pt.concat([Xe[1]]));var Dt=pt.length,et=new Int32Array(Dt),st=new Int32Array(Dt);for(dt=0;dt<Dt;dt++)et[dt]=pt[dt].x,st[dt]=pt[dt].y;for(var Ge=Ce[0].length,Ze=Ce.length,je=O[xe],Ue=[],ct=Qe.decoder,_t=Qe.contextCache.getContexts("GR"),Ut=0,jt=0;jt<De;jt++){if(We&&(Ut^=ct.readBit(_t,je)))throw new V("prediction is not supported");var Pe=new Uint8Array(we);Ue.push(Pe);for(var Fe=0;Fe<we;Fe++){var $e,at,lt=0;for(dt=0;dt<Je;dt++)at=Fe+He[dt],($e=jt+it[dt])<0||at<0||at>=we?lt<<=1:lt=lt<<1|Ue[$e][at];for(dt=0;dt<Dt;dt++)at=Fe+et[dt]-Me,($e=jt+st[dt]-Ne)<0||$e>=Ze||at<0||at>=Ge?lt<<=1:lt=lt<<1|Ce[$e][at];var bt=ct.readBit(_t,lt);Pe[Fe]=bt}}return Ue}function C(we,De,xe,Ce,Me,Ne,We,Xe,Qe,Ye,Je,He,it,dt,pt,Dt,et,st,Ge){if(we&&De)throw new V("refinement with Huffman is not supported");var je,Ue,Ze=[];for(je=0;je<Ce;je++){if(Ue=new Uint8Array(xe),Me)for(var ct=0;ct<xe;ct++)Ue[ct]=Me;Ze.push(Ue)}var _t=et.decoder,Ut=et.contextCache,jt=we?-dt.tableDeltaT.decode(Ge):-c(Ut,"IADT",_t),rt=0;for(je=0;je<Ne;){jt+=we?dt.tableDeltaT.decode(Ge):c(Ut,"IADT",_t);for(var $e=rt+=we?dt.tableFirstS.decode(Ge):c(Ut,"IAFS",_t);;){let Qn=0;We>1&&(Qn=we?Ge.readBits(st):c(Ut,"IAIT",_t));var at=We*jt+Qn,lt=we?dt.symbolIDTable.decode(Ge):$(Ut,_t,Qe),bt=De&&(we?Ge.readBit():c(Ut,"IARI",_t)),Et=Xe[lt],mt=Et[0].length,kt=Et.length;if(bt){var Lt=c(Ut,"IARDW",_t),It=c(Ut,"IARDH",_t);Et=b(mt+=Lt,kt+=It,pt,Et,(Lt>>1)+c(Ut,"IARDX",_t),(It>>1)+c(Ut,"IARDY",_t),!1,Dt,et)}var Pn,En,fi,un=at-(1&He?0:kt-1),zn=$e-(2&He?mt-1:0);if(Ye){for(Pn=0;Pn<kt;Pn++)if(Ue=Ze[zn+Pn]){fi=Et[Pn];var Ti=Math.min(xe-un,mt);switch(it){case 0:for(En=0;En<Ti;En++)Ue[un+En]|=fi[En];break;case 2:for(En=0;En<Ti;En++)Ue[un+En]^=fi[En];break;default:throw new V(`operator ${it} is not supported`)}}$e+=kt-1}else{for(En=0;En<kt;En++)if(Ue=Ze[un+En])switch(fi=Et[En],it){case 0:for(Pn=0;Pn<mt;Pn++)Ue[zn+Pn]|=fi[Pn];break;case 2:for(Pn=0;Pn<mt;Pn++)Ue[zn+Pn]^=fi[Pn];break;default:throw new V(`operator ${it} is not supported`)}$e+=mt-1}je++;var Li=we?dt.tableDeltaS.decode(Ge):c(Ut,"IADS",_t);if(null===Li)break;$e+=Li+Je}}return Ze}function I(we,De){var xe={};xe.number=(0,fe.readUint32)(we,De);var Ce=we[De+4],Me=63&Ce;if(!ae[Me])throw new V("invalid segment type: "+Me);xe.type=Me,xe.typeName=ae[Me],xe.deferredNonRetain=!!(128&Ce);var Ne=!!(64&Ce),We=we[De+5],Xe=We>>5&7,Qe=[31&We],Ye=De+6;if(7===We){Xe=536870911&(0,fe.readUint32)(we,Ye-1),Ye+=3;var Je=Xe+7>>3;for(Qe[0]=we[Ye++];--Je>0;)Qe.push(we[Ye++])}else if(5===We||6===We)throw new V("invalid referred-to flags");xe.retainBits=Qe;let He=4;xe.number<=256?He=1:xe.number<=65536&&(He=2);var dt,pt,it=[];for(dt=0;dt<Xe;dt++){let Ue;Ue=1===He?we[Ye]:2===He?(0,fe.readUint16)(we,Ye):(0,fe.readUint32)(we,Ye),it.push(Ue),Ye+=He}if(xe.referredTo=it,Ne?(xe.pageAssociation=(0,fe.readUint32)(we,Ye),Ye+=4):xe.pageAssociation=we[Ye++],xe.length=(0,fe.readUint32)(we,Ye),Ye+=4,4294967295===xe.length){if(38!==Me)throw new V("invalid unknown segment length");var Dt=E(we,Ye),st=!!(1&we[Ye+x]),Ze=new Uint8Array(6);for(st||(Ze[0]=255,Ze[1]=172),Ze[2]=Dt.height>>>24&255,Ze[3]=Dt.height>>16&255,Ze[4]=Dt.height>>8&255,Ze[5]=255&Dt.height,dt=Ye,pt=we.length;dt<pt;dt++){for(var je=0;je<6&&Ze[je]===we[dt+je];)je++;if(6===je){xe.length=dt+6;break}}if(4294967295===xe.length)throw new V("segment end was not found")}return xe.headerEnd=Ye,xe}function j(we,De,xe,Ce){for(var Me=[],Ne=xe;Ne<Ce;){var We=I(De,Ne);Ne=We.headerEnd;var Xe={header:We,data:De};if(we.randomAccess||(Xe.start=Ne,Xe.end=Ne+=We.length),Me.push(Xe),51===We.type)break}if(we.randomAccess)for(var Qe=0,Ye=Me.length;Qe<Ye;Qe++)Me[Qe].start=Ne,Me[Qe].end=Ne+=Me[Qe].header.length;return Me}function E(we,De){return{width:(0,fe.readUint32)(we,De),height:(0,fe.readUint32)(we,De+4),x:(0,fe.readUint32)(we,De+8),y:(0,fe.readUint32)(we,De+12),combinationOperator:7&we[De+16]}}var x=17;function p(we,De){var We,Xe,Qe,Ye,xe=we.header,Ce=we.data,Me=we.start,Ne=we.end;switch(xe.type){case 0:var Je={},He=(0,fe.readUint16)(Ce,Me);if(Je.huffman=!!(1&He),Je.refinement=!!(2&He),Je.huffmanDHSelector=He>>2&3,Je.huffmanDWSelector=He>>4&3,Je.bitmapSizeSelector=He>>6&1,Je.aggregationInstancesSelector=He>>7&1,Je.bitmapCodingContextUsed=!!(256&He),Je.bitmapCodingContextRetained=!!(512&He),Je.template=He>>10&3,Je.refinementTemplate=He>>12&1,Me+=2,!Je.huffman){for(Ye=0===Je.template?4:1,Xe=[],Qe=0;Qe<Ye;Qe++)Xe.push({x:(0,fe.readInt8)(Ce,Me),y:(0,fe.readInt8)(Ce,Me+1)}),Me+=2;Je.at=Xe}if(Je.refinement&&!Je.refinementTemplate){for(Xe=[],Qe=0;Qe<2;Qe++)Xe.push({x:(0,fe.readInt8)(Ce,Me),y:(0,fe.readInt8)(Ce,Me+1)}),Me+=2;Je.refinementAt=Xe}Je.numberOfExportedSymbols=(0,fe.readUint32)(Ce,Me),Je.numberOfNewSymbols=(0,fe.readUint32)(Ce,Me+=4),We=[Je,xe.number,xe.referredTo,Ce,Me+=4,Ne];break;case 6:case 7:var it={};it.info=E(Ce,Me);var dt=(0,fe.readUint16)(Ce,Me+=x);if(Me+=2,it.huffman=!!(1&dt),it.refinement=!!(2&dt),it.logStripSize=dt>>2&3,it.stripSize=1<<it.logStripSize,it.referenceCorner=dt>>4&3,it.transposed=!!(64&dt),it.combinationOperator=dt>>7&3,it.defaultPixelValue=dt>>9&1,it.dsOffset=dt<<17>>27,it.refinementTemplate=dt>>15&1,it.huffman){var pt=(0,fe.readUint16)(Ce,Me);Me+=2,it.huffmanFS=3&pt,it.huffmanDS=pt>>2&3,it.huffmanDT=pt>>4&3,it.huffmanRefinementDW=pt>>6&3,it.huffmanRefinementDH=pt>>8&3,it.huffmanRefinementDX=pt>>10&3,it.huffmanRefinementDY=pt>>12&3,it.huffmanRefinementSizeSelector=!!(16384&pt)}if(it.refinement&&!it.refinementTemplate){for(Xe=[],Qe=0;Qe<2;Qe++)Xe.push({x:(0,fe.readInt8)(Ce,Me),y:(0,fe.readInt8)(Ce,Me+1)}),Me+=2;it.refinementAt=Xe}it.numberOfSymbolInstances=(0,fe.readUint32)(Ce,Me),We=[it,xe.referredTo,Ce,Me+=4,Ne];break;case 16:const je={},Ue=Ce[Me++];je.mmr=!!(1&Ue),je.template=Ue>>1&3,je.patternWidth=Ce[Me++],je.patternHeight=Ce[Me++],je.maxPatternIndex=(0,fe.readUint32)(Ce,Me),We=[je,xe.number,Ce,Me+=4,Ne];break;case 22:case 23:const ct={};ct.info=E(Ce,Me),Me+=x;const _t=Ce[Me++];ct.mmr=!!(1&_t),ct.template=_t>>1&3,ct.enableSkip=!!(8&_t),ct.combinationOperator=_t>>4&7,ct.defaultPixelValue=_t>>7&1,ct.gridWidth=(0,fe.readUint32)(Ce,Me),ct.gridHeight=(0,fe.readUint32)(Ce,Me+=4),ct.gridOffsetX=4294967295&(0,fe.readUint32)(Ce,Me+=4),ct.gridOffsetY=4294967295&(0,fe.readUint32)(Ce,Me+=4),ct.gridVectorX=(0,fe.readUint16)(Ce,Me+=4),ct.gridVectorY=(0,fe.readUint16)(Ce,Me+=2),We=[ct,xe.referredTo,Ce,Me+=2,Ne];break;case 38:case 39:var Dt={};Dt.info=E(Ce,Me),Me+=x;var et=Ce[Me++];if(Dt.mmr=!!(1&et),Dt.template=et>>1&3,Dt.prediction=!!(8&et),!Dt.mmr){for(Ye=0===Dt.template?4:1,Xe=[],Qe=0;Qe<Ye;Qe++)Xe.push({x:(0,fe.readInt8)(Ce,Me),y:(0,fe.readInt8)(Ce,Me+1)}),Me+=2;Dt.at=Xe}We=[Dt,Ce,Me,Ne];break;case 48:var st={width:(0,fe.readUint32)(Ce,Me),height:(0,fe.readUint32)(Ce,Me+4),resolutionX:(0,fe.readUint32)(Ce,Me+8),resolutionY:(0,fe.readUint32)(Ce,Me+12)};4294967295===st.height&&delete st.height;var Ge=Ce[Me+16];(0,fe.readUint16)(Ce,Me+17),st.lossless=!!(1&Ge),st.refinement=!!(2&Ge),st.defaultPixelValue=Ge>>2&1,st.combinationOperator=Ge>>3&3,st.requiresBuffer=!!(32&Ge),st.combinationOperatorOverride=!!(64&Ge),We=[st];break;case 49:case 50:case 51:case 62:break;case 53:We=[xe.number,Ce,Me,Ne];break;default:throw new V(`segment type ${xe.typeName}(${xe.type}) is not implemented`)}var Ze="on"+xe.typeName;Ze in De&&De[Ze].apply(De,We)}function m(we,De){for(var xe=0,Ce=we.length;xe<Ce;xe++)p(we[xe],De)}function G(){}function K(we){2===we.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=we[0],this.rangeLength=0,this.prefixCode=we[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=we[0],this.prefixLength=we[1],this.rangeLength=we[2],this.prefixCode=we[3],this.isLowerRange="lower"===we[4])}function U(we){this.children=[],we?(this.isLeaf=!0,this.rangeLength=we.rangeLength,this.rangeLow=we.rangeLow,this.isLowerRange=we.isLowerRange,this.isOOB=we.isOOB):this.isLeaf=!1}function z(we,De){De||this.assignPrefixCodes(we),this.rootNode=new U(null);for(let xe=0,Ce=we.length;xe<Ce;xe++){const Me=we[xe];Me.prefixLength>0&&this.rootNode.buildTree(Me,Me.prefixLength-1)}}G.prototype={onPageInformation:function(De){this.currentPageInfo=De;var Ce=new Uint8ClampedArray((De.width+7>>3)*De.height);if(De.defaultPixelValue)for(var Me=0,Ne=Ce.length;Me<Ne;Me++)Ce[Me]=255;this.buffer=Ce},drawBitmap:function(De,xe){var He,it,dt,pt,Ce=this.currentPageInfo,Me=De.width,Ne=De.height,We=Ce.width+7>>3,Xe=Ce.combinationOperatorOverride?De.combinationOperator:Ce.combinationOperator,Qe=this.buffer,Ye=128>>(7&De.x),Je=De.y*We+(De.x>>3);switch(Xe){case 0:for(He=0;He<Ne;He++){for(dt=Ye,pt=Je,it=0;it<Me;it++)xe[He][it]&&(Qe[pt]|=dt),(dt>>=1)||(dt=128,pt++);Je+=We}break;case 2:for(He=0;He<Ne;He++){for(dt=Ye,pt=Je,it=0;it<Me;it++)xe[He][it]&&(Qe[pt]^=dt),(dt>>=1)||(dt=128,pt++);Je+=We}break;default:throw new V(`operator ${Xe} is not supported`)}},onImmediateGenericRegion:function(De,xe,Ce,Me){var Ne=De.info,We=new f(xe,Ce,Me),Xe=A(De.mmr,Ne.width,Ne.height,De.template,De.prediction,null,De.at,We);this.drawBitmap(Ne,Xe)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(De,xe,Ce,Me,Ne,We){let Xe,Qe;De.huffman&&(Xe=function pe(we,De,xe){let Me,Ne,We,Xe,Ce=0;switch(we.huffmanDHSelector){case 0:case 1:Me=B(we.huffmanDHSelector+4);break;case 3:Me=ie(Ce,De,xe),Ce++;break;default:throw new V("invalid Huffman DH selector")}switch(we.huffmanDWSelector){case 0:case 1:Ne=B(we.huffmanDWSelector+2);break;case 3:Ne=ie(Ce,De,xe),Ce++;break;default:throw new V("invalid Huffman DW selector")}return we.bitmapSizeSelector?(We=ie(Ce,De,xe),Ce++):We=B(1),Xe=we.aggregationInstancesSelector?ie(Ce,De,xe):B(1),{tableDeltaHeight:Me,tableDeltaWidth:Ne,tableBitmapSize:We,tableAggregateInstances:Xe}}(De,Ce,this.customTables),Qe=new J(Me,Ne,We));var Ye=this.symbols;Ye||(this.symbols=Ye={});for(var Je=[],He=0,it=Ce.length;He<it;He++){const pt=Ye[Ce[He]];pt&&(Je=Je.concat(pt))}var dt=new f(Me,Ne,We);Ye[xe]=function q(we,De,xe,Ce,Me,Ne,We,Xe,Qe,Ye,Je,He){if(we&&De)throw new V("symbol refinement with Huffman is not supported");var it=[],dt=0,pt=(0,fe.log2)(xe.length+Ce),Dt=Je.decoder,et=Je.contextCache;let st,Ge;for(we&&(st=B(1),Ge=[],pt=Math.max(pt,1));it.length<Ce;){dt+=we?Ne.tableDeltaHeight.decode(He):c(et,"IADH",Dt);let kt=0,Lt=0;const It=we?Ge.length:0;for(;;){var Ue,je=we?Ne.tableDeltaWidth.decode(He):c(et,"IADW",Dt);if(null===je)break;if(kt+=je,Lt+=kt,De){var ct=c(et,"IAAI",Dt);if(ct>1)Ue=C(we,De,kt,dt,0,ct,1,xe.concat(it),pt,0,0,1,0,Ne,Qe,Ye,Je,0,He);else{var _t=$(et,Dt,pt),Ut=c(et,"IARDX",Dt),jt=c(et,"IARDY",Dt);Ue=b(kt,dt,Qe,_t<xe.length?xe[_t]:it[_t-xe.length],Ut,jt,!1,Ye,Je)}it.push(Ue)}else we?Ge.push(kt):(Ue=A(!1,kt,dt,We,!1,null,Xe,Je),it.push(Ue))}if(we&&!De){const Gt=Ne.tableBitmapSize.decode(He);let rn;if(He.byteAlign(),0===Gt)rn=ye(He,Lt,dt);else{const zn=He.end,Pn=He.position+Gt;He.end=Pn,rn=Te(He,Lt,dt,!1),He.end=zn,He.position=Pn}const un=Ge.length;if(It===un-1)it.push(rn);else{let zn,Pn,fi,Ti,Li,En=0;for(zn=It;zn<un;zn++){for(Ti=Ge[zn],fi=En+Ti,Li=[],Pn=0;Pn<dt;Pn++)Li.push(rn[Pn].subarray(En,fi));it.push(Li),En=fi}}}}for(var Pe=[],Fe=[],$e=!1,at=xe.length+Ce;Fe.length<at;){for(var lt=we?st.decode(He):c(et,"IAEX",Dt);lt--;)Fe.push($e);$e=!$e}for(var bt=0,Et=xe.length;bt<Et;bt++)Fe[bt]&&Pe.push(xe[bt]);for(var mt=0;mt<Ce;bt++,mt++)Fe[bt]&&Pe.push(it[mt]);return Pe}(De.huffman,De.refinement,Je,De.numberOfNewSymbols,0,Xe,De.template,De.at,De.refinementTemplate,De.refinementAt,dt,Qe)},onImmediateTextRegion:function(De,xe,Ce,Me,Ne){var We=De.info;let Xe,Qe;for(var Ye=this.symbols,Je=[],He=0,it=xe.length;He<it;He++){const et=Ye[xe[He]];et&&(Je=Je.concat(et))}var dt=(0,fe.log2)(Je.length);De.huffman&&(Qe=new J(Ce,Me,Ne),Xe=function ce(we,De,xe,Ce,Me){const Ne=[];for(let it=0;it<=34;it++){const dt=Me.readBits(4);Ne.push(new K([it,dt,0,0]))}const We=new z(Ne,!1);Ne.length=0;for(let it=0;it<Ce;){const dt=We.decode(Me);if(dt>=32){let pt,Dt,et;switch(dt){case 32:if(0===it)throw new V("no previous value in symbol ID table");Dt=Me.readBits(2)+3,pt=Ne[it-1].prefixLength;break;case 33:Dt=Me.readBits(3)+3,pt=0;break;case 34:Dt=Me.readBits(7)+11,pt=0;break;default:throw new V("invalid code length in symbol ID table")}for(et=0;et<Dt;et++)Ne.push(new K([it,pt,0,0])),it++}else Ne.push(new K([it,dt,0,0])),it++}Me.byteAlign();const Xe=new z(Ne,!1);let Ye,Je,He,Qe=0;switch(we.huffmanFS){case 0:case 1:Ye=B(we.huffmanFS+6);break;case 3:Ye=ie(Qe,De,xe),Qe++;break;default:throw new V("invalid Huffman FS selector")}switch(we.huffmanDS){case 0:case 1:case 2:Je=B(we.huffmanDS+8);break;case 3:Je=ie(Qe,De,xe),Qe++;break;default:throw new V("invalid Huffman DS selector")}switch(we.huffmanDT){case 0:case 1:case 2:He=B(we.huffmanDT+11);break;case 3:He=ie(Qe,De,xe),Qe++;break;default:throw new V("invalid Huffman DT selector")}if(we.refinement)throw new V("refinement with Huffman is not supported");return{symbolIDTable:Xe,tableFirstS:Ye,tableDeltaS:Je,tableDeltaT:He}}(De,xe,this.customTables,Je.length,Qe));var pt=new f(Ce,Me,Ne),Dt=C(De.huffman,De.refinement,We.width,We.height,De.defaultPixelValue,De.numberOfSymbolInstances,De.stripSize,Je,dt,De.transposed,De.dsOffset,De.referenceCorner,De.combinationOperator,Xe,De.refinementTemplate,De.refinementAt,pt,De.logStripSize,Qe);this.drawBitmap(We,Dt)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)},onPatternDictionary(we,De,xe,Ce,Me){let Ne=this.patterns;Ne||(this.patterns=Ne={});const We=new f(xe,Ce,Me);Ne[De]=function P(we,De,xe,Ce,Me,Ne){const We=[];we||(We.push({x:-De,y:0}),0===Me&&(We.push({x:-3,y:-1}),We.push({x:2,y:-2}),We.push({x:-2,y:-2})));const Qe=A(we,(Ce+1)*De,xe,Me,!1,null,We,Ne),Ye=[];for(let Je=0;Je<=Ce;Je++){const He=[],it=De*Je,dt=it+De;for(let pt=0;pt<xe;pt++)He.push(Qe[pt].subarray(it,dt));Ye.push(He)}return Ye}(we.mmr,we.patternWidth,we.patternHeight,we.maxPatternIndex,we.template,We)},onImmediateHalftoneRegion(we,De,xe,Ce,Me){const Ne=this.patterns[De[0]],We=we.info,Xe=new f(xe,Ce,Me),Qe=function F(we,De,xe,Ce,Me,Ne,We,Xe,Qe,Ye,Je,He,it,dt,pt){if(We)throw new V("skip is not supported");if(0!==Xe)throw new V("operator "+Xe+" is not supported in halftone region");const et=[];let st,Ge,Ze;for(st=0;st<Me;st++){if(Ze=new Uint8Array(Ce),Ne)for(Ge=0;Ge<Ce;Ge++)Ze[Ge]=Ne;et.push(Ze)}const Ue=De[0],ct=Ue[0].length,_t=Ue.length,Ut=(0,fe.log2)(De.length),jt=[];we||(jt.push({x:xe<=1?3:2,y:-1}),0===xe&&(jt.push({x:-3,y:-1}),jt.push({x:2,y:-2}),jt.push({x:-2,y:-2})));const rt=[];let Pe,Fe,$e,at,lt,bt,Et,mt,kt,Lt,It;for(we&&(Pe=new J(pt.data,pt.start,pt.end)),st=Ut-1;st>=0;st--)Fe=we?Te(Pe,Qe,Ye,!0):A(!1,Qe,Ye,xe,!1,null,jt,pt),rt[st]=Fe;for($e=0;$e<Ye;$e++)for(at=0;at<Qe;at++){for(lt=0,bt=0,Ge=Ut-1;Ge>=0;Ge--)lt^=rt[Ge][$e][at],bt|=lt<<Ge;if(Et=De[bt],mt=Je+$e*dt+at*it>>8,kt=He+$e*it-at*dt>>8,mt>=0&&mt+ct<=Ce&&kt>=0&&kt+_t<=Me)for(st=0;st<_t;st++)for(It=et[kt+st],Lt=Et[st],Ge=0;Ge<ct;Ge++)It[mt+Ge]|=Lt[Ge];else{let Gt,rn;for(st=0;st<_t;st++)if(rn=kt+st,!(rn<0||rn>=Me))for(It=et[rn],Lt=Et[st],Ge=0;Ge<ct;Ge++)Gt=mt+Ge,Gt>=0&&Gt<Ce&&(It[Gt]|=Lt[Ge])}}return et}(we.mmr,Ne,we.template,We.width,We.height,we.defaultPixelValue,we.enableSkip,we.combinationOperator,we.gridWidth,we.gridHeight,we.gridOffsetX,we.gridOffsetY,we.gridVectorX,we.gridVectorY,Xe);this.drawBitmap(We,Qe)},onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)},onTables(we,De,xe,Ce){let Me=this.customTables;Me||(this.customTables=Me={}),Me[we]=function L(we,De,xe){const Ce=we[De],Me=4294967295&(0,fe.readUint32)(we,De+1),Ne=4294967295&(0,fe.readUint32)(we,De+5),We=new J(we,De+9,xe),Xe=1+(Ce>>1&7),Qe=1+(Ce>>4&7),Ye=[];let Je,He,it=Me;do{Je=We.readBits(Xe),He=We.readBits(Qe),Ye.push(new K([it,Je,He,0])),it+=1<<He}while(it<Ne);return Je=We.readBits(Xe),Ye.push(new K([Me-1,Je,32,0,"lower"])),Je=We.readBits(Xe),Ye.push(new K([Ne,Je,32,0])),1&Ce&&(Je=We.readBits(Xe),Ye.push(new K([Je,0]))),new z(Ye,!1)}(De,xe,Ce)}},U.prototype={buildTree(we,De){const xe=we.prefixCode>>De&1;if(De<=0)this.children[xe]=new U(we);else{let Ce=this.children[xe];Ce||(this.children[xe]=Ce=new U(null)),Ce.buildTree(we,De-1)}},decodeNode(we){if(this.isLeaf){if(this.isOOB)return null;const xe=we.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-xe:xe)}const De=this.children[we.readBit()];if(!De)throw new V("invalid Huffman data");return De.decodeNode(we)}},z.prototype={decode(we){return this.rootNode.decodeNode(we)},assignPrefixCodes(we){const De=we.length;let xe=0;for(let Ye=0;Ye<De;Ye++)xe=Math.max(xe,we[Ye].prefixLength);const Ce=new Uint32Array(xe+1);for(let Ye=0;Ye<De;Ye++)Ce[we[Ye].prefixLength]++;let We,Xe,Qe,Me=1,Ne=0;for(Ce[0]=0;Me<=xe;){for(Ne=Ne+Ce[Me-1]<<1,We=Ne,Xe=0;Xe<De;)Qe=we[Xe],Qe.prefixLength===Me&&(Qe.prefixCode=We,We++),Xe++;Me++}}};const S={};function B(we){let xe,De=S[we];if(De)return De;switch(we){case 1:xe=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:xe=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:xe=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:xe=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:xe=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:xe=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:xe=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:xe=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:xe=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:xe=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:xe=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:xe=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:xe=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:xe=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:xe=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new V(`standard table B.${we} does not exist`)}for(let Ce=0,Me=xe.length;Ce<Me;Ce++)xe[Ce]=new K(xe[Ce]);return De=new z(xe,!0),S[we]=De,De}function J(we,De,xe){this.data=we,this.start=De,this.end=xe,this.position=De,this.shift=-1,this.currentByte=0}function ie(we,De,xe){let Ce=0;for(let Me=0,Ne=De.length;Me<Ne;Me++){const We=xe[De[Me]];if(We){if(we===Ce)return We;Ce++}}throw new V("can't find custom Huffman table")}function ye(we,De,xe){const Ce=[];for(let Me=0;Me<xe;Me++){const Ne=new Uint8Array(De);Ce.push(Ne);for(let We=0;We<De;We++)Ne[We]=we.readBit();we.byteAlign()}return Ce}function Te(we,De,xe,Ce){const Ne=new e.CCITTFaxDecoder(we,{K:-1,Columns:De,Rows:xe,BlackIs1:!0,EndOfBlock:Ce}),We=[];let Xe,Qe=!1;for(let Ye=0;Ye<xe;Ye++){const Je=new Uint8Array(De);We.push(Je);let He=-1;for(let it=0;it<De;it++)He<0&&(Xe=Ne.readNextChar(),-1===Xe&&(Xe=0,Qe=!0),He=7),Je[it]=Xe>>He&1,He--}if(Ce&&!Qe)for(let Je=0;Je<5&&-1!==Ne.readNextChar();Je++);return We}function _e(){}return J.prototype={readBit(){if(this.shift<0){if(this.position>=this.end)throw new V("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const we=this.currentByte>>this.shift&1;return this.shift--,we},readBits(we){let xe,De=0;for(xe=we-1;xe>=0;xe--)De|=this.readBit()<<xe;return De},byteAlign(){this.shift=-1},next(){return this.position>=this.end?-1:this.data[this.position++]}},_e.prototype={parseChunks:we=>function _(we){for(var De=new G,xe=0,Ce=we.length;xe<Ce;xe++){var Me=we[xe];m(j({},Me.data,Me.start,Me.end),De)}return De.buffer}(we),parse(we){const{imgData:De,width:xe,height:Ce}=function R(we){const De=we.length;let xe=0;if(151!==we[xe]||74!==we[xe+1]||66!==we[xe+2]||50!==we[xe+3]||13!==we[xe+4]||10!==we[xe+5]||26!==we[xe+6]||10!==we[xe+7])throw new V("parseJbig2 - invalid header.");const Ce=Object.create(null);xe+=8;const Me=we[xe++];Ce.randomAccess=!(1&Me),2&Me||(Ce.numberOfPages=(0,fe.readUint32)(we,xe),xe+=4);const Ne=j(Ce,we,xe,De),We=new G;m(Ne,We);const{width:Xe,height:Qe}=We.currentPageInfo,Ye=We.buffer,Je=new Uint8ClampedArray(Xe*Qe);let He=0,it=0;for(let dt=0;dt<Qe;dt++){let Dt,pt=0;for(let et=0;et<Xe;et++)pt||(pt=128,Dt=Ye[it++]),Je[He++]=Dt&pt?0:255,pt>>=1}return{imgData:Je,width:Xe,height:Qe}}(we);return this.width=xe,this.height=Ce,De}},_e}();se.Jbig2Image=H},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.ArithmeticDecoder=void 0;const k=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];se.ArithmeticDecoder=class fe{constructor(e,V,H){this.data=e,this.bp=V,this.dataEnd=H,this.chigh=e[V],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const e=this.data;let V=this.bp;255===e[V]?e[V+1]>143?(this.clow+=65280,this.ct=8):(V++,this.clow+=e[V]<<9,this.ct=7,this.bp=V):(V++,this.clow+=V<this.dataEnd?e[V]<<8:65280,this.ct=8,this.bp=V),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(e,V){let H=e[V]>>1,te=1&e[V];const re=k[H],f=re.qe;let c,$=this.a-f;if(this.chigh<f)$<f?($=f,c=te,H=re.nmps):($=f,c=1^te,1===re.switchFlag&&(te=c),H=re.nlps);else{if(this.chigh-=f,32768&$)return this.a=$,te;$<f?(c=1^te,1===re.switchFlag&&(te=c),H=re.nlps):(c=te,H=re.nmps)}do{0===this.ct&&this.byteIn(),$<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(!(32768&$));return this.a=$,e[V]=H<<1|te,c}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.JpegStream=void 0;var k=y(12),fe=y(5),ee=y(19),e=y(2);const V=function(){function te(re,f,c,$){let ae;for(;-1!==(ae=re.getByte());)if(255===ae){re.skip(-1);break}this.stream=re,this.maybeLength=f,this.dict=c,this.params=$,k.DecodeStream.call(this,f)}return te.prototype=Object.create(k.DecodeStream.prototype),Object.defineProperty(te.prototype,"bytes",{get:function(){return(0,e.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),te.prototype.ensureBuffer=function(re){},te.prototype.readBlock=function(){if(this.eof)return;const re={decodeTransform:void 0,colorTransform:void 0},f=this.dict.getArray("Decode","D");if(this.forceRGB&&Array.isArray(f)){const ae=this.dict.get("BitsPerComponent")||8,oe=f.length,W=new Int32Array(oe);let N=!1;const O=(1<<ae)-1;for(let M=0;M<oe;M+=2)W[M]=256*(f[M+1]-f[M])|0,W[M+1]=f[M]*O|0,(256!==W[M]||0!==W[M+1])&&(N=!0);N&&(re.decodeTransform=W)}if((0,fe.isDict)(this.params)){const ae=this.params.get("ColorTransform");Number.isInteger(ae)&&(re.colorTransform=ae)}const c=new ee.JpegImage(re);c.parse(this.bytes);const $=c.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=$,this.bufferLength=$.length,this.eof=!0},te}();se.JpegStream=V},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.JpegImage=void 0;var k=y(2),fe=y(8);class ee extends k.BaseException{constructor(re){super(`JPEG error: ${re}`)}}class e extends k.BaseException{constructor(re,f){super(re),this.scanLines=f}}class V extends k.BaseException{}var H=function(){var re=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),f=4017,c=799,$=3406,ae=2276,oe=1567,W=3784,N=5793,O=2896;function M({decodeTransform:I=null,colorTransform:j=-1}={}){this._decodeTransform=I,this._colorTransform=j}function A(I,j){for(var p,m,E=0,x=[],_=16;_>0&&!I[_-1];)_--;x.push({children:[],index:0});var G,R=x[0];for(p=0;p<_;p++){for(m=0;m<I[p];m++){for((R=x.pop()).children[R.index]=j[E];R.index>0;)R=x.pop();for(R.index++,x.push(R);x.length<=p;)x.push(G={children:[],index:0}),R.children[R.index]=G.children,R=G;E++}p+1<_&&(x.push(G={children:[],index:0}),R.children[R.index]=G.children,R=G)}return x[0].children}function b(I,j,E){return 64*((I.blocksPerLine+1)*j+E)}function q(I,j,E,x,p,m,_,R,G,K=!1){var U=E.mcusPerLine;const L=j;let S=0,B=0;function J(){if(B>0)return B--,S>>B&1;if(S=I[j++],255===S){var Ue=I[j++];if(Ue){if(220===Ue&&K){const ct=(0,fe.readUint16)(I,j+=2);if(j+=2,ct>0&&ct!==E.scanLines)throw new e("Found DNL marker (0xFFDC) while parsing scan data",ct)}else if(217===Ue){if(K){const ct=Ne*(8===E.precision?8:0);if(ct>0&&Math.round(E.scanLines/ct)>=10)throw new e("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",ct)}throw new V("Found EOI marker (0xFFD9) while parsing scan data")}throw new ee(`unexpected marker ${(S<<8|Ue).toString(16)}`)}}return B=7,S>>>7}function ie(Ue){for(var ct=Ue;;){switch(typeof(ct=ct[J()])){case"number":return ct;case"object":continue}throw new ee("invalid huffman sequence")}}function ce(Ue){for(var ct=0;Ue>0;)ct=ct<<1|J(),Ue--;return ct}function pe(Ue){if(1===Ue)return 1===J()?1:-1;var ct=ce(Ue);return ct>=1<<Ue-1?ct:ct+(-1<<Ue)+1}var we=0;var Ce,xe=0;let Ne=0;function We(Ue,ct,_t,Ut,jt){Ne=(_t/U|0)*Ue.v+Ut,ct(Ue,b(Ue,Ne,_t%U*Ue.h+jt))}var Ye,Je,He,it,dt,pt,Qe=x.length;pt=E.progressive?0===m?0===R?function Te(Ue,ct){var _t=ie(Ue.huffmanTableDC),Ut=0===_t?0:pe(_t)<<G;Ue.blockData[ct]=Ue.pred+=Ut}:function _e(Ue,ct){Ue.blockData[ct]|=J()<<G}:0===R?function De(Ue,ct){if(we>0)we--;else for(var _t=m,Ut=_;_t<=Ut;){var jt=ie(Ue.huffmanTableAC),rt=15&jt,Pe=jt>>4;if(0!==rt)Ue.blockData[ct+re[_t+=Pe]]=pe(rt)*(1<<G),_t++;else{if(Pe<15){we=ce(Pe)+(1<<Pe)-1;break}_t+=16}}}:function Me(Ue,ct){for(var rt,Pe,_t=m,Ut=_,jt=0;_t<=Ut;){const Fe=ct+re[_t],$e=Ue.blockData[Fe]<0?-1:1;switch(xe){case 0:if(jt=(Pe=ie(Ue.huffmanTableAC))>>4,0==(rt=15&Pe))jt<15?(we=ce(jt)+(1<<jt),xe=4):(jt=16,xe=1);else{if(1!==rt)throw new ee("invalid ACn encoding");Ce=pe(rt),xe=jt?2:3}continue;case 1:case 2:Ue.blockData[Fe]?Ue.blockData[Fe]+=$e*(J()<<G):0==--jt&&(xe=2===xe?3:0);break;case 3:Ue.blockData[Fe]?Ue.blockData[Fe]+=$e*(J()<<G):(Ue.blockData[Fe]=Ce<<G,xe=0);break;case 4:Ue.blockData[Fe]&&(Ue.blockData[Fe]+=$e*(J()<<G))}_t++}4===xe&&0==--we&&(xe=0)}:function ye(Ue,ct){var _t=ie(Ue.huffmanTableDC),Ut=0===_t?0:pe(_t);Ue.blockData[ct]=Ue.pred+=Ut;for(var jt=1;jt<64;){var rt=ie(Ue.huffmanTableAC),Pe=15&rt,Fe=rt>>4;if(0!==Pe)Ue.blockData[ct+re[jt+=Fe]]=pe(Pe),jt++;else{if(Fe<15)break;jt+=16}}};var et,st,Ge,Ze,Ue,_t,Dt=0;for(st=1===Qe?x[0].blocksPerLine*x[0].blocksPerColumn:U*E.mcusPerColumn;Dt<=st;){var je=p?Math.min(st-Dt,p):st;if(je>0){for(Je=0;Je<Qe;Je++)x[Je].pred=0;if(we=0,1===Qe)for(Ye=x[0],dt=0;dt<je;dt++)Ne=(_t=Dt)/(Ue=Ye).blocksPerLine|0,pt(Ue,b(Ue,Ne,_t%Ue.blocksPerLine)),Dt++;else for(dt=0;dt<je;dt++){for(Je=0;Je<Qe;Je++)for(Ge=(Ye=x[Je]).h,Ze=Ye.v,He=0;He<Ze;He++)for(it=0;it<Ge;it++)We(Ye,pt,Dt,He,it);Dt++}}if(B=0,!(et=F(I,j)))break;if(et.invalid&&((0,k.warn)(`decodeScan - ${je>0?"unexpected":"excessive"} MCU data, current marker is: ${et.invalid}`),j=et.offset),!(et.marker>=65488&&et.marker<=65495))break;j+=2}return j-L}function C(I,j,E){var m,_,R,G,K,U,z,L,S,B,J,ie,ce,pe,ye,Te,_e,x=I.quantizationTable,p=I.blockData;if(!x)throw new ee("missing required Quantization Table.");for(var we=0;we<64;we+=8)S=p[j+we],S*=x[we],(B=p[j+we+1])|(J=p[j+we+2])|(ie=p[j+we+3])|(ce=p[j+we+4])|(pe=p[j+we+5])|(ye=p[j+we+6])|(Te=p[j+we+7])?(_=(m=(m=N*S+128>>8)+(_=N*(ce*=x[we+4])+128>>8)+1>>1)-_,_e=(R=J*=x[we+2])*W+(G=ye*=x[we+6])*oe+128>>8,R=R*oe-G*W+128>>8,z=(K=(K=O*((B*=x[we+1])-(Te*=x[we+7]))+128>>8)+(z=(pe*=x[we+5])<<4)+1>>1)-z,U=(L=(L=O*(B+Te)+128>>8)+(U=(ie*=x[we+3])<<4)+1>>1)-U,G=(m=m+(G=_e)+1>>1)-G,R=(_=_+R+1>>1)-R,_e=K*ae+L*$+2048>>12,K=K*$-L*ae+2048>>12,L=_e,_e=U*c+z*f+2048>>12,U=U*f-z*c+2048>>12,z=_e,E[we]=m+L,E[we+7]=m-L,E[we+1]=_+z,E[we+6]=_-z,E[we+2]=R+U,E[we+5]=R-U,E[we+3]=G+K,E[we+4]=G-K):(E[we]=_e=N*S+512>>10,E[we+1]=_e,E[we+2]=_e,E[we+3]=_e,E[we+4]=_e,E[we+5]=_e,E[we+6]=_e,E[we+7]=_e);for(var De=0;De<8;++De)S=E[De],(B=E[De+8])|(J=E[De+16])|(ie=E[De+24])|(ce=E[De+32])|(pe=E[De+40])|(ye=E[De+48])|(Te=E[De+56])?(_=(m=4112+((m=N*S+2048>>12)+(_=N*ce+2048>>12)+1>>1))-_,_e=(R=J)*W+(G=ye)*oe+2048>>12,R=R*oe-G*W+2048>>12,G=_e,z=(K=(K=O*(B-Te)+2048>>12)+(z=pe)+1>>1)-z,U=(L=(L=O*(B+Te)+2048>>12)+(U=ie)+1>>1)-U,_e=K*ae+L*$+2048>>12,K=K*$-L*ae+2048>>12,L=_e,_e=U*c+z*f+2048>>12,U=U*f-z*c+2048>>12,(S=(m=m+G+1>>1)+L)<16?S=0:S>=4080?S=255:S>>=4,(B=(_=_+R+1>>1)+(z=_e))<16?B=0:B>=4080?B=255:B>>=4,(J=(R=_-R)+U)<16?J=0:J>=4080?J=255:J>>=4,(ie=(G=m-G)+K)<16?ie=0:ie>=4080?ie=255:ie>>=4,(ce=G-K)<16?ce=0:ce>=4080?ce=255:ce>>=4,(pe=R-U)<16?pe=0:pe>=4080?pe=255:pe>>=4,(ye=_-z)<16?ye=0:ye>=4080?ye=255:ye>>=4,(Te=m-L)<16?Te=0:Te>=4080?Te=255:Te>>=4,p[j+De]=S,p[j+De+8]=B,p[j+De+16]=J,p[j+De+24]=ie,p[j+De+32]=ce,p[j+De+40]=pe,p[j+De+48]=ye,p[j+De+56]=Te):(p[j+De]=_e=(_e=N*S+8192>>14)<-2040?0:_e>=2024?255:_e+2056>>4,p[j+De+8]=_e,p[j+De+16]=_e,p[j+De+24]=_e,p[j+De+32]=_e,p[j+De+40]=_e,p[j+De+48]=_e,p[j+De+56]=_e)}function P(I,j){for(var E=j.blocksPerLine,x=j.blocksPerColumn,p=new Int16Array(64),m=0;m<x;m++)for(var _=0;_<E;_++)C(j,b(j,m,_),p);return j.blockData}function F(I,j,E=j){const x=I.length-1;var p=E<j?E:j;if(j>=x)return null;var m=(0,fe.readUint16)(I,j);if(m>=65472&&m<=65534)return{invalid:null,marker:m,offset:j};for(var _=(0,fe.readUint16)(I,p);!(_>=65472&&_<=65534);){if(++p>=x)return null;_=(0,fe.readUint16)(I,p)}return{invalid:m.toString(16),marker:_,offset:p}}return M.prototype={parse(I,{dnlScanLines:j=null}={}){function E(){const Ue=(0,fe.readUint16)(I,p);let ct=(p+=2)+Ue-2;var _t=F(I,ct,p);_t&&_t.invalid&&((0,k.warn)("readDataBlock - incorrect length, current marker is: "+_t.invalid),ct=_t.offset);var Ut=I.subarray(p,ct);return p+=Ut.length,Ut}function x(Ue){for(var ct=Math.ceil(Ue.samplesPerLine/8/Ue.maxH),_t=Math.ceil(Ue.scanLines/8/Ue.maxV),Ut=0;Ut<Ue.components.length;Ut++){dt=Ue.components[Ut];var jt=Math.ceil(Math.ceil(Ue.samplesPerLine/8)*dt.h/Ue.maxH),rt=Math.ceil(Math.ceil(Ue.scanLines/8)*dt.v/Ue.maxV);dt.blockData=new Int16Array(_t*dt.v*64*(ct*dt.h+1)),dt.blocksPerLine=jt,dt.blocksPerColumn=rt}Ue.mcusPerLine=ct,Ue.mcusPerColumn=_t}var R,G,p=0,m=null,_=null;let K=0;var U=[],z=[],L=[];let S=(0,fe.readUint16)(I,p);if(p+=2,65496!==S)throw new ee("SOI not found");S=(0,fe.readUint16)(I,p),p+=2;e:for(;65497!==S;){var B,J,ie;switch(S){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ce=E();65504===S&&74===ce[0]&&70===ce[1]&&73===ce[2]&&70===ce[3]&&0===ce[4]&&(m={version:{major:ce[5],minor:ce[6]},densityUnits:ce[7],xDensity:ce[8]<<8|ce[9],yDensity:ce[10]<<8|ce[11],thumbWidth:ce[12],thumbHeight:ce[13],thumbData:ce.subarray(14,14+3*ce[12]*ce[13])}),65518===S&&65===ce[0]&&100===ce[1]&&111===ce[2]&&98===ce[3]&&101===ce[4]&&(_={version:ce[5]<<8|ce[6],flags0:ce[7]<<8|ce[8],flags1:ce[9]<<8|ce[10],transformCode:ce[11]});break;case 65499:for(var pe=(0,fe.readUint16)(I,p)+(p+=2)-2;p<pe;){var Te=I[p++],_e=new Uint16Array(64);if(Te>>4){if(Te>>4!=1)throw new ee("DQT - invalid table spec");for(J=0;J<64;J++)_e[re[J]]=(0,fe.readUint16)(I,p),p+=2}else for(J=0;J<64;J++)_e[re[J]]=I[p++];U[15&Te]=_e}break;case 65472:case 65473:case 65474:if(R)throw new ee("Only single frame JPEGs supported");p+=2,(R={}).extended=65473===S,R.progressive=65474===S,R.precision=I[p++];const ct=(0,fe.readUint16)(I,p);p+=2,R.scanLines=j||ct,R.samplesPerLine=(0,fe.readUint16)(I,p),p+=2,R.components=[],R.componentIds={};var De,we=I[p++],xe=0,Ce=0;for(B=0;B<we;B++){De=I[p];var Me=I[p+1]>>4,Ne=15&I[p+1];xe<Me&&(xe=Me),Ce<Ne&&(Ce=Ne),ie=R.components.push({h:Me,v:Ne,quantizationId:I[p+2],quantizationTable:null}),R.componentIds[De]=ie-1,p+=3}R.maxH=xe,R.maxV=Ce,x(R);break;case 65476:const _t=(0,fe.readUint16)(I,p);for(p+=2,B=2;B<_t;){var Xe=I[p++],Qe=new Uint8Array(16),Ye=0;for(J=0;J<16;J++,p++)Ye+=Qe[J]=I[p];var Je=new Uint8Array(Ye);for(J=0;J<Ye;J++,p++)Je[J]=I[p];B+=17+Ye,(Xe>>4?z:L)[15&Xe]=A(Qe,Je)}break;case 65501:G=(0,fe.readUint16)(I,p+=2),p+=2;break;case 65498:const Ut=1==++K&&!j;p+=2;var dt,He=I[p++],it=[];for(B=0;B<He;B++){const rt=I[p++];(dt=R.components[R.componentIds[rt]]).index=rt;var Dt=I[p++];dt.huffmanTableDC=L[Dt>>4],dt.huffmanTableAC=z[15&Dt],it.push(dt)}var et=I[p++],st=I[p++],Ge=I[p++];try{var Ze=q(I,p,R,it,G,et,st,Ge>>4,15&Ge,Ut);p+=Ze}catch(rt){if(rt instanceof e)return(0,k.warn)(`${rt.message} -- attempting to re-parse the JPEG image.`),this.parse(I,{dnlScanLines:rt.scanLines});if(rt instanceof V){(0,k.warn)(`${rt.message} -- ignoring the rest of the image data.`);break e}throw rt}break;case 65500:p+=4;break;case 65535:255!==I[p]&&p--;break;default:const jt=F(I,p-2,p-3);if(jt&&jt.invalid){(0,k.warn)("JpegImage.parse - unexpected data, current marker is: "+jt.invalid),p=jt.offset;break}if(p>=I.length-1){(0,k.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new ee("JpegImage.parse - unknown marker: "+S.toString(16))}S=(0,fe.readUint16)(I,p),p+=2}for(this.width=R.samplesPerLine,this.height=R.scanLines,this.jfif=m,this.adobe=_,this.components=[],B=0;B<R.components.length;B++){var je=U[(dt=R.components[B]).quantizationId];je&&(dt.quantizationTable=je),this.components.push({index:dt.index,output:P(0,dt),scaleX:dt.h/R.maxH,scaleY:dt.v/R.maxV,blocksPerLine:dt.blocksPerLine,blocksPerColumn:dt.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData(I,j,E=!1){var m,_,R,G,K,U,z,L,S,B,ie,x=this.width/I,p=this.height/j,J=0,ce=this.components.length,pe=I*j*ce,ye=new Uint8ClampedArray(pe),Te=new Uint32Array(I),_e=4294967288;let we;for(z=0;z<ce;z++){if(R=(m=this.components[z]).scaleY*p,J=z,ie=m.output,G=m.blocksPerLine+1<<3,(_=m.scaleX*x)!==we){for(K=0;K<I;K++)Te[K]=((L=0|K*_)&_e)<<3|7&L;we=_}for(U=0;U<j;U++)for(B=G*((L=0|U*R)&_e)|(7&L)<<3,K=0;K<I;K++)ye[J]=ie[B+Te[K]],J+=ce}let De=this._decodeTransform;if(!E&&4===ce&&!De&&(De=new Int32Array([-256,255,-256,255,-256,255,-256,255])),De)for(z=0;z<pe;)for(L=0,S=0;L<ce;L++,z++,S+=2)ye[z]=(ye[z]*De[S]>>8)+De[S+1];return ye},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&!(82===this.components[0].index&&71===this.components[1].index&&66===this.components[2].index):1===this._colorTransform},_convertYccToRgb:function(j){for(var E,x,p,m=0,_=j.length;m<_;m+=3)x=j[m+1],j[m]=(E=j[m])-179.456+1.402*(p=j[m+2]),j[m+1]=E+135.459-.344*x-.714*p,j[m+2]=E-226.816+1.772*x;return j},_convertYcckToRgb:function(j){for(var E,x,p,m,_=0,R=0,G=j.length;R<G;R+=4)j[_++]=(x=j[R+1])*(-660635669420364e-19*x+.000437130475926232*(p=j[R+2])-54080610064599e-18*(E=j[R])+.00048449797120281*(m=j[R+3])-.154362151871126)-122.67195406894+p*(-.000957964378445773*p+.000817076911346625*E-.00477271405408747*m+1.53380253221734)+E*(.000961250184130688*E-.00266257332283933*m+.48357088451265)+m*(-.000336197177618394*m+.484791561490776),j[_++]=107.268039397724+x*(219927104525741e-19*x-.000640992018297945*p+.000659397001245577*E+.000426105652938837*m-.176491792462875)+p*(-.000778269941513683*p+.00130872261408275*E+.000770482631801132*m-.151051492775562)+E*(.00126935368114843*E-.00265090189010898*m+.25802910206845)+m*(-.000318913117588328*m-.213742400323665),j[_++]=x*(-.000570115196973677*x-263409051004589e-19*p+.0020741088115012*E-.00288260236853442*m+.814272968359295)-20.810012546947+p*(-153496057440975e-19*p-.000132689043961446*E+.000560833691242812*m-.195152027534049)+E*(.00174418132927582*E-.00255243321439347*m+.116935020465145)+m*(-.000343531996510555*m+.24165260232407);return j.subarray(0,_)},_convertYcckToCmyk:function(j){for(var E,x,p,m=0,_=j.length;m<_;m+=4)x=j[m+1],j[m]=434.456-(E=j[m])-1.402*(p=j[m+2]),j[m+1]=119.541-E+.344*x+.714*p,j[m+2]=481.816-E-1.772*x;return j},_convertCmykToRgb:function(j){for(var E,x,p,m,_=0,R=0,G=j.length;R<G;R+=4)j[_++]=255+(E=j[R])*(-6747147073602441e-20*E+.0008379262121013727*(x=j[R+1])+.0002894718188643294*(p=j[R+2])+.003264231057537806*(m=j[R+3])-1.1185611867203937)+x*(26374107616089405e-21*x-8626949158638572e-20*p-.0002748769067499491*m-.02155688794978967)+p*(-3878099212869363e-20*p-.0003267808279485286*m+.0686742238595345)-m*(.0003361971776183937*m+.7430659151342254),j[_++]=255+E*(.00013596372813588848*E+.000924537132573585*x+.00010567359618683593*p+.0004791864687436512*m-.3109689587515875)+x*(-.00023545346108370344*x+.0002702845253534714*p+.0020200308977307156*m-.7488052167015494)+p*(6834815998235662e-20*p+.00015168452363460973*m-.09751927774728933)-m*(.0003189131175883281*m+.7364883807733168),j[_++]=255+E*(13598650411385307e-21*E+.00012423956175490851*x+.0004751985097583589*p-36729317476630422e-22*m-.05562186980264034)+x*(.00016141380598724676*x+.0009692239130725186*p+.0007782692450036253*m-.44015232367526463)+p*(5.068882914068769e-7*p+.0017778369011375071*m-.7591454649749609)-m*(.0003435319965105553*m+.7063770186160144);return j.subarray(0,_)},getData({width:I,height:j,forceRGB:E=!1,isSourcePDF:x=!1}){if(this.numComponents>4)throw new ee("Unsupported color mode");var p=this._getLinearizedBlockData(I,j,x);if(1===this.numComponents&&E){for(var m=p.length,_=new Uint8ClampedArray(3*m),R=0,G=0;G<m;G++){var K=p[G];_[R++]=K,_[R++]=K,_[R++]=K}return _}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(p);if(4===this.numComponents){if(this._isColorConversionNeeded)return E?this._convertYcckToRgb(p):this._convertYcckToCmyk(p);if(E)return this._convertCmykToRgb(p)}return p}},M}();se.JpegImage=H},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.JpxStream=void 0;var k=y(12),fe=y(21),ee=y(2);const e=function(){function H(te,re,f,c){this.stream=te,this.maybeLength=re,this.dict=f,this.params=c,k.DecodeStream.call(this,re)}return H.prototype=Object.create(k.DecodeStream.prototype),Object.defineProperty(H.prototype,"bytes",{get:function(){return(0,ee.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),H.prototype.ensureBuffer=function(te){},H.prototype.readBlock=function(){if(this.eof)return;const te=new fe.JpxImage;te.parse(this.bytes);const re=te.width,f=te.height,c=te.componentsCount,$=te.tiles.length;if(1===$)this.buffer=te.tiles[0].items;else{const ae=new Uint8ClampedArray(re*f*c);for(let oe=0;oe<$;oe++){const W=te.tiles[oe],O=W.height,b=W.items;let q=0,C=(re*W.top+W.left)*c;const P=re*c,F=W.width*c;for(let I=0;I<O;I++){const j=b.subarray(q,q+F);ae.set(j,C),q+=F,C+=P}}this.buffer=ae}this.bufferLength=this.buffer.length,this.eof=!0},H}();se.JpxStream=e},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.JpxImage=void 0;var k=y(2),fe=y(8),ee=y(17);class e extends k.BaseException{constructor(te){super(`JPX error: ${te}`)}}var V=function(){var te={LL:0,LH:1,HL:1,HH:2};function re(){this.failOnCorruptedImage=!1}function f(U,z){U.x0=Math.ceil(z.XOsiz/U.XRsiz),U.x1=Math.ceil(z.Xsiz/U.XRsiz),U.y0=Math.ceil(z.YOsiz/U.YRsiz),U.y1=Math.ceil(z.Ysiz/U.YRsiz),U.width=U.x1-U.x0,U.height=U.y1-U.y0}function c(U,z){for(var S,L=U.SIZ,B=[],J=Math.ceil((L.Xsiz-L.XTOsiz)/L.XTsiz),ie=Math.ceil((L.Ysiz-L.YTOsiz)/L.YTsiz),ce=0;ce<ie;ce++)for(var pe=0;pe<J;pe++)(S={}).tx0=Math.max(L.XTOsiz+pe*L.XTsiz,L.XOsiz),S.ty0=Math.max(L.YTOsiz+ce*L.YTsiz,L.YOsiz),S.tx1=Math.min(L.XTOsiz+(pe+1)*L.XTsiz,L.Xsiz),S.ty1=Math.min(L.YTOsiz+(ce+1)*L.YTsiz,L.Ysiz),S.width=S.tx1-S.tx0,S.height=S.ty1-S.ty0,S.components=[],B.push(S);U.tiles=B;for(var Te=0,_e=L.Csiz;Te<_e;Te++)for(var we=z[Te],De=0,xe=B.length;De<xe;De++){var Ce={};S=B[De],Ce.tcx0=Math.ceil(S.tx0/we.XRsiz),Ce.tcy0=Math.ceil(S.ty0/we.YRsiz),Ce.tcx1=Math.ceil(S.tx1/we.XRsiz),Ce.tcy1=Math.ceil(S.ty1/we.YRsiz),Ce.width=Ce.tcx1-Ce.tcx0,Ce.height=Ce.tcy1-Ce.tcy0,S.components[Te]=Ce}}function $(U,z,L){var S=z.codingStyleParameters,B={};return S.entropyCoderWithCustomPrecincts?(B.PPx=S.precinctsSizes[L].PPx,B.PPy=S.precinctsSizes[L].PPy):(B.PPx=15,B.PPy=15),B.xcb_=L>0?Math.min(S.xcb,B.PPx-1):Math.min(S.xcb,B.PPx),B.ycb_=L>0?Math.min(S.ycb,B.PPy-1):Math.min(S.ycb,B.PPy),B}function ae(U,z,L){var S=1<<L.PPx,B=1<<L.PPy,J=0===z.resLevel,ie=1<<L.PPx+(J?0:-1),ce=1<<L.PPy+(J?0:-1),pe=z.trx1>z.trx0?Math.ceil(z.trx1/S)-Math.floor(z.trx0/S):0,ye=z.try1>z.try0?Math.ceil(z.try1/B)-Math.floor(z.try0/B):0;z.precinctParameters={precinctWidth:S,precinctHeight:B,numprecinctswide:pe,numprecinctshigh:ye,numprecincts:pe*ye,precinctWidthInSubband:ie,precinctHeightInSubband:ce}}function oe(U,z,L){var xe,Ce,Me,Ne,S=L.xcb_,B=L.ycb_,J=1<<S,ie=1<<B,ce=z.tbx0>>S,pe=z.tby0>>B,ye=z.tbx1+J-1>>S,Te=z.tby1+ie-1>>B,_e=z.resolution.precinctParameters,we=[],De=[];for(Ce=pe;Ce<Te;Ce++)for(xe=ce;xe<ye;xe++){(Me={cbx:xe,cby:Ce,tbx0:J*xe,tby0:ie*Ce,tbx1:J*(xe+1),tby1:ie*(Ce+1)}).tbx0_=Math.max(z.tbx0,Me.tbx0),Me.tby0_=Math.max(z.tby0,Me.tby0),Me.tbx1_=Math.min(z.tbx1,Me.tbx1),Me.tby1_=Math.min(z.tby1,Me.tby1);var We=Math.floor((Me.tbx0_-z.tbx0)/_e.precinctWidthInSubband),Xe=Math.floor((Me.tby0_-z.tby0)/_e.precinctHeightInSubband);if(Me.precinctNumber=Ne=We+Xe*_e.numprecinctswide,Me.subbandType=z.type,Me.Lblock=3,!(Me.tbx1_<=Me.tbx0_||Me.tby1_<=Me.tby0_)){we.push(Me);var Qe=De[Ne];void 0!==Qe?(xe<Qe.cbxMin?Qe.cbxMin=xe:xe>Qe.cbxMax&&(Qe.cbxMax=xe),Ce<Qe.cbyMin?Qe.cbxMin=Ce:Ce>Qe.cbyMax&&(Qe.cbyMax=Ce)):De[Ne]=Qe={cbxMin:xe,cbyMin:Ce,cbxMax:xe,cbyMax:Ce},Me.precinct=Qe}}z.codeblockParameters={codeblockWidth:S,codeblockHeight:B,numcodeblockwide:ye-ce+1,numcodeblockhigh:Te-pe+1},z.codeblocks=we,z.precincts=De}function W(U,z,L){for(var S=[],B=U.subbands,J=0,ie=B.length;J<ie;J++)for(var pe=B[J].codeblocks,ye=0,Te=pe.length;ye<Te;ye++){var _e=pe[ye];_e.precinctNumber===z&&S.push(_e)}return{layerNumber:L,codeblocks:S}}function N(U){for(var S=U.tiles[U.currentTile.index],B=S.codingStyleDefaultParameters.layersCount,J=U.SIZ.Csiz,ie=0,ce=0;ce<J;ce++)ie=Math.max(ie,S.components[ce].codingStyleParameters.decompositionLevelsCount);var pe=0,ye=0,Te=0,_e=0;this.nextPacket=function(){for(;pe<B;pe++){for(;ye<=ie;ye++){for(;Te<J;Te++){var De=S.components[Te];if(!(ye>De.codingStyleParameters.decompositionLevelsCount)){for(var xe=De.resolutions[ye],Ce=xe.precinctParameters.numprecincts;_e<Ce;){var Me=W(xe,_e,pe);return _e++,Me}_e=0}}Te=0}ye=0}throw new e("Out of packets")}}function O(U){for(var S=U.tiles[U.currentTile.index],B=S.codingStyleDefaultParameters.layersCount,J=U.SIZ.Csiz,ie=0,ce=0;ce<J;ce++)ie=Math.max(ie,S.components[ce].codingStyleParameters.decompositionLevelsCount);var pe=0,ye=0,Te=0,_e=0;this.nextPacket=function(){for(;pe<=ie;pe++){for(;ye<B;ye++){for(;Te<J;Te++){var De=S.components[Te];if(!(pe>De.codingStyleParameters.decompositionLevelsCount)){for(var xe=De.resolutions[pe],Ce=xe.precinctParameters.numprecincts;_e<Ce;){var Me=W(xe,_e,ye);return _e++,Me}_e=0}}Te=0}ye=0}throw new e("Out of packets")}}function M(U){var ie,ce,pe,ye,S=U.tiles[U.currentTile.index],B=S.codingStyleDefaultParameters.layersCount,J=U.SIZ.Csiz,Te=0;for(pe=0;pe<J;pe++)Te=Math.max(Te,S.components[pe].codingStyleParameters.decompositionLevelsCount);var _e=new Int32Array(Te+1);for(ce=0;ce<=Te;++ce){var we=0;for(pe=0;pe<J;++pe){var De=S.components[pe].resolutions;ce<De.length&&(we=Math.max(we,De[ce].precinctParameters.numprecincts))}_e[ce]=we}ie=0,ce=0,pe=0,ye=0,this.nextPacket=function(){for(;ce<=Te;ce++){for(;ye<_e[ce];ye++){for(;pe<J;pe++){const We=S.components[pe];if(!(ce>We.codingStyleParameters.decompositionLevelsCount)){var Ce=We.resolutions[ce];if(!(ye>=Ce.precinctParameters.numprecincts)){for(;ie<B;){var Ne=W(Ce,ye,ie);return ie++,Ne}ie=0}}}pe=0}ye=0}throw new e("Out of packets")}}function A(U){var S=U.tiles[U.currentTile.index],B=S.codingStyleDefaultParameters.layersCount,J=U.SIZ.Csiz,ie=C(S),ce=ie,pe=0,ye=0,Te=0,_e=0,we=0;this.nextPacket=function(){for(;we<ce.maxNumHigh;we++){for(;_e<ce.maxNumWide;_e++){for(;Te<J;Te++){for(var xe=S.components[Te],Ce=xe.codingStyleParameters.decompositionLevelsCount;ye<=Ce;ye++){var Me=xe.resolutions[ye],We=q(_e,we,ie.components[Te].resolutions[ye],ce,Me);if(null!==We){for(;pe<B;){var Xe=W(Me,We,pe);return pe++,Xe}pe=0}}ye=0}Te=0}_e=0}throw new e("Out of packets")}}function b(U){var S=U.tiles[U.currentTile.index],B=S.codingStyleDefaultParameters.layersCount,J=U.SIZ.Csiz,ie=C(S),ce=0,pe=0,ye=0,Te=0,_e=0;this.nextPacket=function(){for(;ye<J;++ye){for(var De=S.components[ye],xe=ie.components[ye],Ce=De.codingStyleParameters.decompositionLevelsCount;_e<xe.maxNumHigh;_e++){for(;Te<xe.maxNumWide;Te++){for(;pe<=Ce;pe++){var Me=De.resolutions[pe],We=q(Te,_e,xe.resolutions[pe],xe,Me);if(null!==We){for(;ce<B;){var Xe=W(Me,We,ce);return ce++,Xe}ce=0}}pe=0}Te=0}_e=0}throw new e("Out of packets")}}function q(U,z,L,S,B){var J=U*S.minWidth,ie=z*S.minHeight;return J%L.width!=0||ie%L.height!=0?null:J/L.height+ie/L.width*B.precinctParameters.numprecinctswide}function C(U){for(var z=U.components.length,L=Number.MAX_VALUE,S=Number.MAX_VALUE,B=0,J=0,ie=new Array(z),ce=0;ce<z;ce++){for(var pe=U.components[ce],ye=pe.codingStyleParameters.decompositionLevelsCount,Te=new Array(ye+1),_e=Number.MAX_VALUE,we=Number.MAX_VALUE,De=0,xe=0,Ce=1,Me=ye;Me>=0;--Me){var Ne=pe.resolutions[Me],We=Ce*Ne.precinctParameters.precinctWidth,Xe=Ce*Ne.precinctParameters.precinctHeight;_e=Math.min(_e,We),we=Math.min(we,Xe),De=Math.max(De,Ne.precinctParameters.numprecinctswide),xe=Math.max(xe,Ne.precinctParameters.numprecinctshigh),Te[Me]={width:We,height:Xe},Ce<<=1}L=Math.min(L,_e),S=Math.min(S,we),B=Math.max(B,De),J=Math.max(J,xe),ie[ce]={resolutions:Te,minWidth:_e,minHeight:we,maxNumWide:De,maxNumHigh:xe}}return{components:ie,minWidth:L,minHeight:S,maxNumWide:B,maxNumHigh:J}}function P(U){for(var S=U.tiles[U.currentTile.index],B=U.SIZ.Csiz,J=0;J<B;J++){for(var ie=S.components[J],ce=ie.codingStyleParameters.decompositionLevelsCount,pe=[],ye=[],Te=0;Te<=ce;Te++){var xe,_e=$(0,ie,Te),we={},De=1<<ce-Te;if(we.trx0=Math.ceil(ie.tcx0/De),we.try0=Math.ceil(ie.tcy0/De),we.trx1=Math.ceil(ie.tcx1/De),we.try1=Math.ceil(ie.tcy1/De),we.resLevel=Te,ae(0,we,_e),pe.push(we),0===Te)(xe={}).type="LL",xe.tbx0=Math.ceil(ie.tcx0/De),xe.tby0=Math.ceil(ie.tcy0/De),xe.tbx1=Math.ceil(ie.tcx1/De),xe.tby1=Math.ceil(ie.tcy1/De),xe.resolution=we,oe(0,xe,_e),ye.push(xe),we.subbands=[xe];else{var Ce=1<<ce-Te+1,Me=[];(xe={}).type="HL",xe.tbx0=Math.ceil(ie.tcx0/Ce-.5),xe.tby0=Math.ceil(ie.tcy0/Ce),xe.tbx1=Math.ceil(ie.tcx1/Ce-.5),xe.tby1=Math.ceil(ie.tcy1/Ce),xe.resolution=we,oe(0,xe,_e),ye.push(xe),Me.push(xe),(xe={}).type="LH",xe.tbx0=Math.ceil(ie.tcx0/Ce),xe.tby0=Math.ceil(ie.tcy0/Ce-.5),xe.tbx1=Math.ceil(ie.tcx1/Ce),xe.tby1=Math.ceil(ie.tcy1/Ce-.5),xe.resolution=we,oe(0,xe,_e),ye.push(xe),Me.push(xe),(xe={}).type="HH",xe.tbx0=Math.ceil(ie.tcx0/Ce-.5),xe.tby0=Math.ceil(ie.tcy0/Ce-.5),xe.tbx1=Math.ceil(ie.tcx1/Ce-.5),xe.tby1=Math.ceil(ie.tcy1/Ce-.5),xe.resolution=we,oe(0,xe,_e),ye.push(xe),Me.push(xe),we.subbands=Me}}ie.resolutions=pe,ie.subbands=ye}var Ne=S.codingStyleDefaultParameters.progressionOrder;switch(Ne){case 0:S.packetsIterator=new N(U);break;case 1:S.packetsIterator=new O(U);break;case 2:S.packetsIterator=new M(U);break;case 3:S.packetsIterator=new A(U);break;case 4:S.packetsIterator=new b(U);break;default:throw new e(`Unsupported progression order ${Ne}`)}}function F(U,z,L,S){var J,B=0,ie=0,ce=!1;function pe(Pe){for(;ie<Pe;){var Fe=z[L+B];B++,ce?(J=J<<7|Fe,ie+=7,ce=!1):(J=J<<8|Fe,ie+=8),255===Fe&&(ce=!0)}return J>>>(ie-=Pe)&(1<<Pe)-1}function ye(Pe){return 255===z[L+B-1]&&z[L+B]===Pe?(Te(1),!0):255===z[L+B]&&z[L+B+1]===Pe&&(Te(2),!0)}function Te(Pe){B+=Pe}function _e(){ie=0,ce&&(B++,ce=!1)}function we(){if(0===pe(1))return 1;if(0===pe(1))return 2;var Pe=pe(2);return Pe<3?Pe+3:(Pe=pe(5))<31?Pe+6:(Pe=pe(7))+37}for(var Ce=U.COD.sopMarkerUsed,Me=U.COD.ephMarkerUsed,Ne=U.tiles[U.currentTile.index].packetsIterator;B<S;){_e(),Ce&&ye(145)&&Te(4);var We=Ne.nextPacket();if(pe(1)){for(var Ye,Xe=We.layerNumber,Qe=[],Je=0,He=We.codeblocks.length;Je<He;Je++){var it=(Ye=We.codeblocks[Je]).precinct,dt=Ye.cbx-it.cbxMin,pt=Ye.cby-it.cbyMin,Dt=!1,et=!1;if(void 0!==Ye.included)Dt=!!pe(1);else{var Ge,Ze;if(void 0!==(it=Ye.precinct).inclusionTree)Ge=it.inclusionTree;else{var je=it.cbxMax-it.cbxMin+1,Ue=it.cbyMax-it.cbyMin+1;Ge=new m(je,Ue,Xe),Ze=new p(je,Ue),it.inclusionTree=Ge,it.zeroBitPlanesTree=Ze}if(Ge.reset(dt,pt,Xe))for(;;){if(!pe(1)){Ge.incrementValue(Xe);break}if(!Ge.nextLevel()){Ye.included=!0,Dt=et=!0;break}}}if(Dt){if(et){for((Ze=it.zeroBitPlanesTree).reset(dt,pt);;)if(pe(1)){if(!Ze.nextLevel())break}else Ze.incrementValue();Ye.zeroBitPlanes=Ze.value}for(var ct=we();pe(1);)Ye.Lblock++;var _t=(0,fe.log2)(ct),jt=pe((ct<1<<_t?_t-1:_t)+Ye.Lblock);Qe.push({codeblock:Ye,codingpasses:ct,dataLength:jt})}}for(_e(),Me&&ye(146);Qe.length>0;){var rt=Qe.shift();void 0===(Ye=rt.codeblock).data&&(Ye.data=[]),Ye.data.push({data:z,start:L+B,end:L+B+rt.dataLength,codingpasses:rt.codingpasses}),B+=rt.dataLength}}}return B}function I(U,z,L,S,B,J,ie,ce){for(var pe=S.tbx0,ye=S.tby0,Te=S.tbx1-S.tbx0,_e=S.codeblocks,we="H"===S.type.charAt(0)?1:0,De="H"===S.type.charAt(1)?z:0,xe=0,Ce=_e.length;xe<Ce;++xe){var Me=_e[xe],Ne=Me.tbx1_-Me.tbx0_,We=Me.tby1_-Me.tby0_;if(0!==Ne&&0!==We&&void 0!==Me.data){var Xe,Qe;Xe=new _(Ne,We,Me.subbandType,Me.zeroBitPlanes,J),Qe=2;var it,dt,pt,Ye=Me.data,Je=0,He=0;for(it=0,dt=Ye.length;it<dt;it++)Je+=(pt=Ye[it]).end-pt.start,He+=pt.codingpasses;var Dt=new Uint8Array(Je),et=0;for(it=0,dt=Ye.length;it<dt;it++){var st=(pt=Ye[it]).data.subarray(pt.start,pt.end);Dt.set(st,et),et+=st.length}var Ge=new ee.ArithmeticDecoder(Dt,0,Je);for(Xe.setDecoder(Ge),it=0;it<He;it++){switch(Qe){case 0:Xe.runSignificancePropagationPass();break;case 1:Xe.runMagnitudeRefinementPass();break;case 2:Xe.runCleanupPass(),ce&&Xe.checkSegmentationSymbol()}Qe=(Qe+1)%3}var Ut,jt,rt,Ze=Me.tbx0_-pe+(Me.tby0_-ye)*Te,je=Xe.coefficentsSign,Ue=Xe.coefficentsMagnitude,ct=Xe.bitsDecoded,_t=ie?0:.5;et=0;var Pe="LL"!==S.type;for(it=0;it<We;it++){var $e=2*(Ze/Te|0)*(z-Te)+we+De;for(Ut=0;Ut<Ne;Ut++){if(0!==(jt=Ue[et]))jt=(jt+_t)*B,0!==je[et]&&(jt=-jt),rt=ct[et],U[Pe?$e+(Ze<<1):Ze]=ie&&rt>=J?jt:jt*(1<<J-rt);Ze++,et++}Ze+=Te-Ne}}}}function j(U,z,L){for(var S=z.components[L],B=S.codingStyleParameters,J=S.quantizationParameters,ie=B.decompositionLevelsCount,ce=J.SPqcds,pe=J.scalarExpounded,ye=J.guardBits,Te=B.segmentationSymbolUsed,_e=U.components[L].precision,we=B.reversibleTransformation,De=we?new K:new G,xe=[],Ce=0,Me=0;Me<=ie;Me++){for(var Ne=S.resolutions[Me],We=Ne.trx1-Ne.trx0,Xe=Ne.try1-Ne.try0,Qe=new Float32Array(We*Xe),Ye=0,Je=Ne.subbands.length;Ye<Je;Ye++){var He,it;pe?(He=ce[Ce].mu,it=ce[Ce].epsilon,Ce++):(He=ce[0].mu,it=ce[0].epsilon+(Me>0?1-Me:0));var dt=Ne.subbands[Ye];I(Qe,We,0,dt,we?1:2**(_e+te[dt.type]-it)*(1+He/2048),ye+it-1,we,Te)}xe.push({width:We,height:Xe,items:Qe})}var st=De.calculate(xe,S.tcx0,S.tcy0);return{left:S.tcx0,top:S.tcy0,width:st.width,height:st.height,items:st.items}}function x(U,z){for(var S=U.SIZ.Csiz,B=U.tiles[z],J=0;J<S;J++){var ie=B.components[J];ie.quantizationParameters=void 0!==U.currentTile.QCC[J]?U.currentTile.QCC[J]:U.currentTile.QCD,ie.codingStyleParameters=void 0!==U.currentTile.COC[J]?U.currentTile.COC[J]:U.currentTile.COD}B.codingStyleDefaultParameters=U.currentTile.COD}re.prototype={parse:function(z){if(65359!==(0,fe.readUint16)(z,0))for(var S=0,B=z.length;S<B;){var J=8,ie=(0,fe.readUint32)(z,S),ce=(0,fe.readUint32)(z,S+4);if(S+=J,1===ie&&(ie=4294967296*(0,fe.readUint32)(z,S)+(0,fe.readUint32)(z,S+4),S+=8,J+=8),0===ie&&(ie=B-S+J),ie<J)throw new e("Invalid box field size");var pe=ie-J,ye=!0;switch(ce){case 1785737832:ye=!1;break;case 1668246642:var Te=z[S];if(1===Te){var _e=(0,fe.readUint32)(z,S+3);switch(_e){case 16:case 17:case 18:break;default:(0,k.warn)("Unknown colorspace "+_e)}}else 2===Te&&(0,k.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(z,S,S+pe);break;case 1783636e3:218793738!==(0,fe.readUint32)(z,S)&&(0,k.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var we=String.fromCharCode(ce>>24&255,ce>>16&255,ce>>8&255,255&ce);(0,k.warn)("Unsupported header type "+ce+" ("+we+")")}ye&&(S+=pe)}else this.parseCodestream(z,0,z.length)},parseImageProperties:function(z){for(var L=z.getByte();L>=0;)if(65361==(L<<8|(L=z.getByte()))){z.skip(4);var J=z.getInt32()>>>0,ie=z.getInt32()>>>0,ce=z.getInt32()>>>0,pe=z.getInt32()>>>0;z.skip(16);var ye=z.getUint16();return this.width=J-ce,this.height=ie-pe,this.componentsCount=ye,void(this.bitsPerComponent=8)}throw new e("No size marker found in JPX stream")},parseCodestream:function(z,L,S){var B={},J=!1;try{for(var ie=L;ie+1<S;){var ce=(0,fe.readUint16)(z,ie);ie+=2;var ye,Te,_e,we,De,xe,pe=0;switch(ce){case 65359:B.mainHeader=!0;break;case 65497:break;case 65361:pe=(0,fe.readUint16)(z,ie);var Ce={};Ce.Xsiz=(0,fe.readUint32)(z,ie+4),Ce.Ysiz=(0,fe.readUint32)(z,ie+8),Ce.XOsiz=(0,fe.readUint32)(z,ie+12),Ce.YOsiz=(0,fe.readUint32)(z,ie+16),Ce.XTsiz=(0,fe.readUint32)(z,ie+20),Ce.YTsiz=(0,fe.readUint32)(z,ie+24),Ce.XTOsiz=(0,fe.readUint32)(z,ie+28),Ce.YTOsiz=(0,fe.readUint32)(z,ie+32);var Me=(0,fe.readUint16)(z,ie+36);Ce.Csiz=Me;var Ne=[];ye=ie+38;for(var We=0;We<Me;We++){var Xe={precision:1+(127&z[ye]),isSigned:!!(128&z[ye]),XRsiz:z[ye+1],YRsiz:z[ye+2]};ye+=3,f(Xe,Ce),Ne.push(Xe)}B.SIZ=Ce,B.components=Ne,c(B,Ne),B.QCC=[],B.COC=[];break;case 65372:pe=(0,fe.readUint16)(z,ie);var Qe={};switch(ye=ie+2,31&(Te=z[ye++])){case 0:we=8,De=!0;break;case 1:we=16,De=!1;break;case 2:we=16,De=!0;break;default:throw new Error("Invalid SQcd value "+Te)}for(Qe.noQuantization=8===we,Qe.scalarExpounded=De,Qe.guardBits=Te>>5,_e=[];ye<pe+ie;){var Ye={};8===we?(Ye.epsilon=z[ye++]>>3,Ye.mu=0):(Ye.epsilon=z[ye]>>3,Ye.mu=(7&z[ye])<<8|z[ye+1],ye+=2),_e.push(Ye)}Qe.SPqcds=_e,B.mainHeader?B.QCD=Qe:(B.currentTile.QCD=Qe,B.currentTile.QCC=[]);break;case 65373:pe=(0,fe.readUint16)(z,ie);var He,Je={};switch(ye=ie+2,B.SIZ.Csiz<257?He=z[ye++]:(He=(0,fe.readUint16)(z,ye),ye+=2),31&(Te=z[ye++])){case 0:we=8,De=!0;break;case 1:we=16,De=!1;break;case 2:we=16,De=!0;break;default:throw new Error("Invalid SQcd value "+Te)}for(Je.noQuantization=8===we,Je.scalarExpounded=De,Je.guardBits=Te>>5,_e=[];ye<pe+ie;)Ye={},8===we?(Ye.epsilon=z[ye++]>>3,Ye.mu=0):(Ye.epsilon=z[ye]>>3,Ye.mu=(7&z[ye])<<8|z[ye+1],ye+=2),_e.push(Ye);Je.SPqcds=_e,B.mainHeader?B.QCC[He]=Je:B.currentTile.QCC[He]=Je;break;case 65362:pe=(0,fe.readUint16)(z,ie);var it={};ye=ie+2;var dt=z[ye++];it.entropyCoderWithCustomPrecincts=!!(1&dt),it.sopMarkerUsed=!!(2&dt),it.ephMarkerUsed=!!(4&dt),it.progressionOrder=z[ye++],it.layersCount=(0,fe.readUint16)(z,ye),ye+=2,it.multipleComponentTransform=z[ye++],it.decompositionLevelsCount=z[ye++],it.xcb=2+(15&z[ye++]),it.ycb=2+(15&z[ye++]);var pt=z[ye++];if(it.selectiveArithmeticCodingBypass=!!(1&pt),it.resetContextProbabilities=!!(2&pt),it.terminationOnEachCodingPass=!!(4&pt),it.verticallyStripe=!!(8&pt),it.predictableTermination=!!(16&pt),it.segmentationSymbolUsed=!!(32&pt),it.reversibleTransformation=z[ye++],it.entropyCoderWithCustomPrecincts){for(var Dt=[];ye<pe+ie;){var et=z[ye++];Dt.push({PPx:15&et,PPy:et>>4})}it.precinctsSizes=Dt}var st=[];if(it.selectiveArithmeticCodingBypass&&st.push("selectiveArithmeticCodingBypass"),it.resetContextProbabilities&&st.push("resetContextProbabilities"),it.terminationOnEachCodingPass&&st.push("terminationOnEachCodingPass"),it.verticallyStripe&&st.push("verticallyStripe"),it.predictableTermination&&st.push("predictableTermination"),st.length>0)throw J=!0,new Error("Unsupported COD options ("+st.join(", ")+")");B.mainHeader?B.COD=it:(B.currentTile.COD=it,B.currentTile.COC=[]);break;case 65424:pe=(0,fe.readUint16)(z,ie),(xe={}).index=(0,fe.readUint16)(z,ie+2),xe.length=(0,fe.readUint32)(z,ie+4),xe.dataEnd=xe.length+ie-2,xe.partIndex=z[ie+8],xe.partsCount=z[ie+9],B.mainHeader=!1,0===xe.partIndex&&(xe.COD=B.COD,xe.COC=B.COC.slice(0),xe.QCD=B.QCD,xe.QCC=B.QCC.slice(0)),B.currentTile=xe;break;case 65427:0===(xe=B.currentTile).partIndex&&(x(B,xe.index),P(B)),F(B,z,ie,pe=xe.dataEnd-ie);break;case 65365:case 65367:case 65368:case 65380:pe=(0,fe.readUint16)(z,ie);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+ce.toString(16))}ie+=pe}}catch(Ge){if(J||this.failOnCorruptedImage)throw new e(Ge.message);(0,k.warn)("JPX: Trying to recover from: "+Ge.message)}this.tiles=function E(U){for(var L=U.components,S=U.SIZ.Csiz,B=[],J=0,ie=U.tiles.length;J<ie;J++){var ye,ce=U.tiles[J],pe=[];for(ye=0;ye<S;ye++)pe[ye]=j(U,ce,ye);var De,xe,Me,Ne,We,Xe,Qe,Te=pe[0],_e=new Uint8ClampedArray(Te.items.length*S),we={left:Te.left,top:Te.top,width:Te.width,height:Te.height,items:_e},Ce=0;if(ce.codingStyleDefaultParameters.multipleComponentTransform){var Ye=4===S,Je=pe[0].items,He=pe[1].items,it=pe[2].items,dt=Ye?pe[3].items:null;xe=.5+(128<<(De=L[0].precision-8));var Dt=S-3;if(Ne=Je.length,ce.components[0].codingStyleParameters.reversibleTransformation)for(Me=0;Me<Ne;Me++,Ce+=Dt){const st=(We=Je[Me]+xe)-((Qe=it[Me])+(Xe=He[Me])>>2);_e[Ce++]=st+Qe>>De,_e[Ce++]=st>>De,_e[Ce++]=st+Xe>>De}else for(Me=0;Me<Ne;Me++,Ce+=Dt)Xe=He[Me],_e[Ce++]=(We=Je[Me]+xe)+1.402*(Qe=it[Me])>>De,_e[Ce++]=We-.34413*Xe-.71414*Qe>>De,_e[Ce++]=We+1.772*Xe>>De;if(Ye)for(Me=0,Ce=3;Me<Ne;Me++,Ce+=4)_e[Ce]=dt[Me]+xe>>De}else for(ye=0;ye<S;ye++){var et=pe[ye].items;for(xe=.5+(128<<(De=L[ye].precision-8)),Ce=ye,Me=0,Ne=et.length;Me<Ne;Me++)_e[Ce]=et[Me]+xe>>De,Ce+=S}B.push(we)}return B}(B),this.width=B.SIZ.Xsiz-B.SIZ.XOsiz,this.height=B.SIZ.Ysiz-B.SIZ.YOsiz,this.componentsCount=B.SIZ.Csiz}};var p=function(){function z(L,S){var B=(0,fe.log2)(Math.max(L,S))+1;this.levels=[];for(var J=0;J<B;J++)this.levels.push({width:L,height:S,items:[]}),L=Math.ceil(L/2),S=Math.ceil(S/2)}return z.prototype={reset:function(S,B){for(var ce,J=0,ie=0;J<this.levels.length;){var pe=S+B*(ce=this.levels[J]).width;if(void 0!==ce.items[pe]){ie=ce.items[pe];break}ce.index=pe,S>>=1,B>>=1,J++}J--,(ce=this.levels[J]).items[ce.index]=ie,this.currentLevel=J,delete this.value},incrementValue:function(){var S=this.levels[this.currentLevel];S.items[S.index]++},nextLevel:function(){var S=this.currentLevel,B=this.levels[S],J=B.items[B.index];return--S<0?(this.value=J,!1):(this.currentLevel=S,(B=this.levels[S]).items[B.index]=J,!0)}},z}(),m=function(){function z(L,S,B){var J=(0,fe.log2)(Math.max(L,S))+1;this.levels=[];for(var ie=0;ie<J;ie++){for(var ce=new Uint8Array(L*S),pe=0,ye=ce.length;pe<ye;pe++)ce[pe]=B;this.levels.push({width:L,height:S,items:ce}),L=Math.ceil(L/2),S=Math.ceil(S/2)}}return z.prototype={reset:function(S,B,J){for(var ie=0;ie<this.levels.length;){var ce=this.levels[ie],pe=S+B*ce.width;ce.index=pe;var ye=ce.items[pe];if(255===ye)break;if(ye>J)return this.currentLevel=ie,this.propagateValues(),!1;S>>=1,B>>=1,ie++}return this.currentLevel=ie-1,!0},incrementValue:function(S){var B=this.levels[this.currentLevel];B.items[B.index]=S+1,this.propagateValues()},propagateValues:function(){for(var S=this.currentLevel,B=this.levels[S],J=B.items[B.index];--S>=0;)(B=this.levels[S]).items[B.index]=J},nextLevel:function(){var S=this.currentLevel,B=this.levels[S],J=B.items[B.index];return B.items[B.index]=255,!(--S<0||(this.currentLevel=S,(B=this.levels[S]).items[B.index]=J,0))}},z}(),_=function(){var z=17,S=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),B=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),J=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function ie(ce,pe,ye,Te,_e){let we;this.width=ce,this.height=pe,we="HH"===ye?J:"HL"===ye?B:S,this.contextLabelTable=we;var De=ce*pe;let xe;this.neighborsSignificance=new Uint8Array(De),this.coefficentsSign=new Uint8Array(De),xe=_e>14?new Uint32Array(De):_e>6?new Uint16Array(De):new Uint8Array(De),this.coefficentsMagnitude=xe,this.processingFlags=new Uint8Array(De);var Ce=new Uint8Array(De);if(0!==Te)for(var Me=0;Me<De;Me++)Ce[Me]=Te;this.bitsDecoded=Ce,this.reset()}return ie.prototype={setDecoder:function(pe){this.decoder=pe},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[z]=92,this.contexts[18]=6},setNeighborsSignificance:function(pe,ye,Te){var Me,_e=this.neighborsSignificance,we=this.width,De=this.height,xe=ye>0,Ce=ye+1<we;pe>0&&(Me=Te-we,xe&&(_e[Me-1]+=16),Ce&&(_e[Me+1]+=16),_e[Me]+=4),pe+1<De&&(Me=Te+we,xe&&(_e[Me-1]+=16),Ce&&(_e[Me+1]+=16),_e[Me]+=4),xe&&(_e[Te-1]+=1),Ce&&(_e[Te+1]+=1),_e[Te]|=128},runSignificancePropagationPass:function(){for(var pe=this.decoder,ye=this.width,Te=this.height,_e=this.coefficentsMagnitude,we=this.coefficentsSign,De=this.neighborsSignificance,xe=this.processingFlags,Ce=this.contexts,Me=this.contextLabelTable,Ne=this.bitsDecoded,Ye=0;Ye<Te;Ye+=4)for(var Je=0;Je<ye;Je++)for(var He=Ye*ye+Je,it=0;it<4;it++,He+=ye){var dt=Ye+it;if(dt>=Te)break;if(xe[He]&=-2,!_e[He]&&De[He]){if(pe.readBit(Ce,Me[De[He]])){var et=this.decodeSignBit(dt,Je,He);we[He]=et,_e[He]=1,this.setNeighborsSignificance(dt,Je,He),xe[He]|=2}Ne[He]++,xe[He]|=1}}},decodeSignBit:function(pe,ye,Te){var Ce,Me,Ne,We,_e=this.width,De=this.coefficentsMagnitude,xe=this.coefficentsSign;We=ye>0&&0!==De[Te-1],ye+1<_e&&0!==De[Te+1]?(Ne=xe[Te+1],Ce=We?1-Ne-(Me=xe[Te-1]):1-Ne-Ne):Ce=We?1-(Me=xe[Te-1])-Me:0;var Ye=3*Ce;return We=pe>0&&0!==De[Te-_e],pe+1<this.height&&0!==De[Te+_e]?(Ne=xe[Te+_e],Ce=We?1-Ne-(Me=xe[Te-_e])+Ye:1-Ne-Ne+Ye):Ce=We?1-(Me=xe[Te-_e])-Me+Ye:Ye,Ce>=0?this.decoder.readBit(this.contexts,9+Ce):1^this.decoder.readBit(this.contexts,9-Ce)},runMagnitudeRefinementPass:function(){for(var Ye,pe=this.decoder,ye=this.width,_e=this.coefficentsMagnitude,we=this.neighborsSignificance,De=this.contexts,xe=this.bitsDecoded,Ce=this.processingFlags,We=ye*this.height,Xe=4*ye,Qe=0;Qe<We;Qe=Ye){Ye=Math.min(We,Qe+Xe);for(var Je=0;Je<ye;Je++)for(var He=Qe+Je;He<Ye;He+=ye)if(_e[He]&&!(1&Ce[He])){var it=16;2&Ce[He]&&(Ce[He]^=2,it=0==(127&we[He])?15:14);var pt=pe.readBit(De,it);_e[He]=_e[He]<<1|pt,xe[He]++,Ce[He]|=1}}},runCleanupPass:function(){for(var He,pe=this.decoder,ye=this.width,Te=this.height,_e=this.neighborsSignificance,we=this.coefficentsMagnitude,De=this.coefficentsSign,xe=this.contexts,Ce=this.contextLabelTable,Me=this.bitsDecoded,Ne=this.processingFlags,Qe=ye,Ye=2*ye,Je=3*ye,it=0;it<Te;it=He){He=Math.min(it+4,Te);for(var dt=it*ye,pt=it+3<Te,Dt=0;Dt<ye;Dt++){var Ue,et=dt+Dt,Ge=0,Ze=et,je=it;if(pt&&0===Ne[et]&&0===Ne[et+Qe]&&0===Ne[et+Ye]&&0===Ne[et+Je]&&0===_e[et]&&0===_e[et+Qe]&&0===_e[et+Ye]&&0===_e[et+Je]){if(!pe.readBit(xe,18)){Me[et]++,Me[et+Qe]++,Me[et+Ye]++,Me[et+Je]++;continue}0!=(Ge=pe.readBit(xe,z)<<1|pe.readBit(xe,z))&&(je=it+Ge,Ze+=Ge*ye),Ue=this.decodeSignBit(je,Dt,Ze),De[Ze]=Ue,we[Ze]=1,this.setNeighborsSignificance(je,Dt,Ze),Ne[Ze]|=2,Ze=et;for(var _t=it;_t<=je;_t++,Ze+=ye)Me[Ze]++;Ge++}for(je=it+Ge;je<He;je++,Ze+=ye)we[Ze]||1&Ne[Ze]||(1===pe.readBit(xe,Ce[_e[Ze]])&&(Ue=this.decodeSignBit(je,Dt,Ze),De[Ze]=Ue,we[Ze]=1,this.setNeighborsSignificance(je,Dt,Ze),Ne[Ze]|=2),Me[Ze]++)}}},checkSegmentationSymbol:function(){var pe=this.decoder,ye=this.contexts;if(10!=(pe.readBit(ye,z)<<3|pe.readBit(ye,z)<<2|pe.readBit(ye,z)<<1|pe.readBit(ye,z)))throw new e("Invalid segmentation symbol")}},ie}(),R=function(){function z(){}return z.prototype.calculate=function(S,B,J){for(var ie=S[0],ce=1,pe=S.length;ce<pe;ce++)ie=this.iterate(ie,S[ce],B,J);return ie},z.prototype.extend=function(S,B,J){var ie=B-1,ce=B+1,pe=B+J-2,ye=B+J;S[ie--]=S[ce++],S[ye++]=S[pe--],S[ie--]=S[ce++],S[ye++]=S[pe--],S[ie--]=S[ce++],S[ye++]=S[pe--],S[ie]=S[ce],S[ye]=S[pe]},z.prototype.iterate=function(S,B,J,ie){var De,xe,Ce,Me,Ne,We,ce=S.width,pe=S.height,ye=S.items,Te=B.width,_e=B.height,we=B.items;for(Ce=0,De=0;De<pe;De++)for(Me=2*De*Te,xe=0;xe<ce;xe++,Ce++,Me+=2)we[Me]=ye[Ce];ye=S.items=null;var Qe=new Float32Array(Te+8);if(1===Te){if(1&J)for(We=0,Ce=0;We<_e;We++,Ce+=Te)we[Ce]*=.5}else for(We=0,Ce=0;We<_e;We++,Ce+=Te)Qe.set(we.subarray(Ce,Ce+Te),4),this.extend(Qe,4,Te),this.filter(Qe,4,Te),we.set(Qe.subarray(4,4+Te),Ce);var Ye=16,Je=[];for(De=0;De<Ye;De++)Je.push(new Float32Array(_e+8));var He,it=0;if(S=4+_e,1===_e){if(1&ie)for(Ne=0;Ne<Te;Ne++)we[Ne]*=.5}else for(Ne=0;Ne<Te;Ne++){if(0===it){for(Ye=Math.min(Te-Ne,Ye),Ce=Ne,Me=4;Me<S;Ce+=Te,Me++)for(He=0;He<Ye;He++)Je[He][Me]=we[Ce+He];it=Ye}var dt=Je[--it];if(this.extend(dt,4,_e),this.filter(dt,4,_e),0===it)for(Ce=Ne-Ye+1,Me=4;Me<S;Ce+=Te,Me++)for(He=0;He<Ye;He++)we[Ce+He]=Je[He][Me]}return{width:Te,height:_e,items:we}},z}(),G=function(){function z(){R.call(this)}return(z.prototype=Object.create(R.prototype)).filter=function(S,B,J){var ce,pe,ye,Te,ie=J>>1,_e=-1.586134342059924,we=-.052980118572961,De=.882911075530934,xe=.443506852043971,Ce=1.230174104914001;for(ce=(B|=0)-3,pe=ie+4;pe--;ce+=2)S[ce]*=.8128930661159609;for(ye=xe*S[(ce=B-2)-1],pe=ie+3;pe--&&(S[ce]=Ce*S[ce]-ye-(Te=xe*S[ce+1]),pe--);ce+=2)S[ce+=2]=Ce*S[ce]-(ye=xe*S[ce+1])-Te;for(ye=De*S[(ce=B-1)-1],pe=ie+2;pe--&&(S[ce]-=ye+(Te=De*S[ce+1]),pe--);ce+=2)S[ce+=2]-=(ye=De*S[ce+1])+Te;for(ye=we*S[(ce=B)-1],pe=ie+1;pe--&&(S[ce]-=ye+(Te=we*S[ce+1]),pe--);ce+=2)S[ce+=2]-=(ye=we*S[ce+1])+Te;if(0!==ie)for(ye=_e*S[(ce=B+1)-1],pe=ie;pe--&&(S[ce]-=ye+(Te=_e*S[ce+1]),pe--);ce+=2)S[ce+=2]-=(ye=_e*S[ce+1])+Te},z}(),K=function(){function z(){R.call(this)}return(z.prototype=Object.create(R.prototype)).filter=function(S,B,J){var ce,pe,ie=J>>1;for(ce=B|=0,pe=ie+1;pe--;ce+=2)S[ce]-=S[ce-1]+S[ce+1]+2>>2;for(ce=B+1,pe=ie;pe--;ce+=2)S[ce]+=S[ce-1]+S[ce+1]>>1},z}();return re}();se.JpxImage=V},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.calculateSHA512=se.calculateSHA384=se.calculateSHA256=se.calculateMD5=se.PDF20=se.PDF17=se.CipherTransformFactory=se.ARCFourCipher=se.AES256Cipher=se.AES128Cipher=void 0;var k=y(2),fe=y(5),ee=y(12),e=function(){function b(q){this.a=0,this.b=0;var P,I,C=new Uint8Array(256),F=0,j=q.length;for(P=0;P<256;++P)C[P]=P;for(P=0;P<256;++P)C[P]=C[F=F+(I=C[P])+q[P%j]&255],C[F]=I;this.s=C}return(b.prototype={encryptBlock:function(C){var P,I,j,F=C.length,E=this.a,x=this.b,p=this.s,m=new Uint8Array(F);for(P=0;P<F;++P)p[E=E+1&255]=j=p[x=x+(I=p[E])&255],p[x]=I,m[P]=C[P]^p[I+j&255];return this.a=E,this.b=x,m}}).decryptBlock=b.prototype.encryptBlock,b.prototype.encrypt=b.prototype.encryptBlock,b}();se.ARCFourCipher=e;var b,q,V=(b=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),q=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]),function C(P,F,I){var R,G,K,j=1732584193,E=-271733879,x=-1732584194,p=271733878,m=I+72&-64,_=new Uint8Array(m);for(R=0;R<I;++R)_[R]=P[F++];for(_[R++]=128,K=m-8;R<K;)_[R++]=0;_[R++]=I<<3&255,_[R++]=I>>5&255,_[R++]=I>>13&255,_[R++]=I>>21&255,_[R++]=I>>>29&255,_[R++]=0,_[R++]=0,_[R++]=0;var U=new Int32Array(16);for(R=0;R<m;){for(G=0;G<16;++G,R+=4)U[G]=_[R]|_[R+1]<<8|_[R+2]<<16|_[R+3]<<24;var J,ie,z=j,L=E,S=x,B=p;for(G=0;G<64;++G){G<16?(J=L&S|~L&B,ie=G):G<32?(J=B&L|~B&S,ie=5*G+1&15):G<48?(J=L^S^B,ie=3*G+5&15):(J=S^(L|~B),ie=7*G&15);var ce=B,pe=z+J+q[G]+U[ie]|0,ye=b[G];B=S,S=L,L=L+(pe<<ye|pe>>>32-ye)|0,z=ce}j=j+z|0,E=E+L|0,x=x+S|0,p=p+B|0}return new Uint8Array([255&j,j>>8&255,j>>16&255,j>>>24&255,255&E,E>>8&255,E>>16&255,E>>>24&255,255&x,x>>8&255,x>>16&255,x>>>24&255,255&p,p>>8&255,p>>16&255,p>>>24&255])});se.calculateMD5=V;var H=function(){function b(q,C){this.high=0|q,this.low=0|C}return b.prototype={and:function(C){this.high&=C.high,this.low&=C.low},xor:function(C){this.high^=C.high,this.low^=C.low},or:function(C){this.high|=C.high,this.low|=C.low},shiftRight:function(C){C>=32?(this.low=this.high>>>C-32|0,this.high=0):(this.low=this.low>>>C|this.high<<32-C,this.high=this.high>>>C|0)},shiftLeft:function(C){C>=32?(this.high=this.low<<C-32,this.low=0):(this.high=this.high<<C|this.low>>>32-C,this.low=this.low<<C)},rotateRight:function(C){var P,F;32&C?(F=this.low,P=this.high):(P=this.low,F=this.high),this.low=P>>>(C&=31)|F<<32-C,this.high=F>>>C|P<<32-C},not:function(){this.high=~this.high,this.low=~this.low},add:function(C){var P=(this.low>>>0)+(C.low>>>0),F=(this.high>>>0)+(C.high>>>0);P>4294967295&&(F+=1),this.low=0|P,this.high=0|F},copyTo:function(C,P){C[P]=this.high>>>24&255,C[P+1]=this.high>>16&255,C[P+2]=this.high>>8&255,C[P+3]=255&this.high,C[P+4]=this.low>>>24&255,C[P+5]=this.low>>16&255,C[P+6]=this.low>>8&255,C[P+7]=255&this.low},assign:function(C){this.high=C.high,this.low=C.low}},b}(),te=function(){function b(p,m){return p>>>m|p<<32-m}function q(p,m,_){return p&m^~p&_}function C(p,m,_){return p&m^p&_^m&_}function P(p){return b(p,2)^b(p,13)^b(p,22)}function F(p){return b(p,6)^b(p,11)^b(p,25)}function I(p){return b(p,7)^b(p,18)^p>>>3}function j(p){return b(p,17)^b(p,19)^p>>>10}var E=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function x(p,m,_){var ce,pe,ye,R=1779033703,G=3144134277,K=1013904242,U=2773480762,z=1359893119,L=2600822924,S=528734635,B=1541459225,J=64*Math.ceil((_+9)/64),ie=new Uint8Array(J);for(ce=0;ce<_;++ce)ie[ce]=p[m++];for(ie[ce++]=128,ye=J-8;ce<ye;)ie[ce++]=0;ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=_>>>29&255,ie[ce++]=_>>21&255,ie[ce++]=_>>13&255,ie[ce++]=_>>5&255,ie[ce++]=_<<3&255;var Te=new Uint32Array(64);for(ce=0;ce<J;){for(pe=0;pe<16;++pe)Te[pe]=ie[ce]<<24|ie[ce+1]<<16|ie[ce+2]<<8|ie[ce+3],ce+=4;for(pe=16;pe<64;++pe)Te[pe]=j(Te[pe-2])+Te[pe-7]+I(Te[pe-15])+Te[pe-16]|0;var Xe,Qe,_e=R,we=G,De=K,xe=U,Ce=z,Me=L,Ne=S,We=B;for(pe=0;pe<64;++pe)Xe=We+F(Ce)+q(Ce,Me,Ne)+E[pe]+Te[pe],Qe=P(_e)+C(_e,we,De),We=Ne,Ne=Me,Me=Ce,Ce=xe+Xe|0,xe=De,De=we,we=_e,_e=Xe+Qe|0;R=R+_e|0,G=G+we|0,K=K+De|0,U=U+xe|0,z=z+Ce|0,L=L+Me|0,S=S+Ne|0,B=B+We|0}return new Uint8Array([R>>24&255,R>>16&255,R>>8&255,255&R,G>>24&255,G>>16&255,G>>8&255,255&G,K>>24&255,K>>16&255,K>>8&255,255&K,U>>24&255,U>>16&255,U>>8&255,255&U,z>>24&255,z>>16&255,z>>8&255,255&z,L>>24&255,L>>16&255,L>>8&255,255&L,S>>24&255,S>>16&255,S>>8&255,255&S,B>>24&255,B>>16&255,B>>8&255,255&B])}}();se.calculateSHA256=te;var re=function(){function b(x,p,m,_,R){x.assign(p),x.and(m),R.assign(p),R.not(),R.and(_),x.xor(R)}function q(x,p,m,_,R){x.assign(p),x.and(m),R.assign(p),R.and(_),x.xor(R),R.assign(m),R.and(_),x.xor(R)}function C(x,p,m){x.assign(p),x.rotateRight(28),m.assign(p),m.rotateRight(34),x.xor(m),m.assign(p),m.rotateRight(39),x.xor(m)}function P(x,p,m){x.assign(p),x.rotateRight(14),m.assign(p),m.rotateRight(18),x.xor(m),m.assign(p),m.rotateRight(41),x.xor(m)}function F(x,p,m){x.assign(p),x.rotateRight(1),m.assign(p),m.rotateRight(8),x.xor(m),m.assign(p),m.shiftRight(7),x.xor(m)}function I(x,p,m){x.assign(p),x.rotateRight(19),m.assign(p),m.rotateRight(61),x.xor(m),m.assign(p),m.shiftRight(6),x.xor(m)}var j=[new H(1116352408,3609767458),new H(1899447441,602891725),new H(3049323471,3964484399),new H(3921009573,2173295548),new H(961987163,4081628472),new H(1508970993,3053834265),new H(2453635748,2937671579),new H(2870763221,3664609560),new H(3624381080,2734883394),new H(310598401,1164996542),new H(607225278,1323610764),new H(1426881987,3590304994),new H(1925078388,4068182383),new H(2162078206,991336113),new H(2614888103,633803317),new H(3248222580,3479774868),new H(3835390401,2666613458),new H(4022224774,944711139),new H(264347078,2341262773),new H(604807628,2007800933),new H(770255983,1495990901),new H(1249150122,1856431235),new H(1555081692,3175218132),new H(1996064986,2198950837),new H(2554220882,3999719339),new H(2821834349,766784016),new H(2952996808,2566594879),new H(3210313671,3203337956),new H(3336571891,1034457026),new H(3584528711,2466948901),new H(113926993,3758326383),new H(338241895,168717936),new H(666307205,1188179964),new H(773529912,1546045734),new H(1294757372,1522805485),new H(1396182291,2643833823),new H(1695183700,2343527390),new H(1986661051,1014477480),new H(2177026350,1206759142),new H(2456956037,344077627),new H(2730485921,1290863460),new H(2820302411,3158454273),new H(3259730800,3505952657),new H(3345764771,106217008),new H(3516065817,3606008344),new H(3600352804,1432725776),new H(4094571909,1467031594),new H(275423344,851169720),new H(430227734,3100823752),new H(506948616,1363258195),new H(659060556,3750685593),new H(883997877,3785050280),new H(958139571,3318307427),new H(1322822218,3812723403),new H(1537002063,2003034995),new H(1747873779,3602036899),new H(1955562222,1575990012),new H(2024104815,1125592928),new H(2227730452,2716904306),new H(2361852424,442776044),new H(2428436474,593698344),new H(2756734187,3733110249),new H(3204031479,2999351573),new H(3329325298,3815920427),new H(3391569614,3928383900),new H(3515267271,566280711),new H(3940187606,3454069534),new H(4118630271,4000239992),new H(116418474,1914138554),new H(174292421,2731055270),new H(289380356,3203993006),new H(460393269,320620315),new H(685471733,587496836),new H(852142971,1086792851),new H(1017036298,365543100),new H(1126000580,2618297676),new H(1288033470,3409855158),new H(1501505948,4234509866),new H(1607167915,987167468),new H(1816402316,1246189591)];return function E(x,p,m,_){var R,G,K,U,z,L,S,B;(_=!!_)?(R=new H(3418070365,3238371032),G=new H(1654270250,914150663),K=new H(2438529370,812702999),U=new H(355462360,4144912697),z=new H(1731405415,4290775857),L=new H(2394180231,1750603025),S=new H(3675008525,1694076839),B=new H(1203062813,3204075428)):(R=new H(1779033703,4089235720),G=new H(3144134277,2227873595),K=new H(1013904242,4271175723),U=new H(2773480762,1595750129),z=new H(1359893119,2917565137),L=new H(2600822924,725511199),S=new H(528734635,4215389547),B=new H(1541459225,327033209));var ce,pe,ye,J=128*Math.ceil((m+17)/128),ie=new Uint8Array(J);for(ce=0;ce<m;++ce)ie[ce]=x[p++];for(ie[ce++]=128,ye=J-16;ce<ye;)ie[ce++]=0;ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=0,ie[ce++]=m>>>29&255,ie[ce++]=m>>21&255,ie[ce++]=m>>13&255,ie[ce++]=m>>5&255,ie[ce++]=m<<3&255;var Te=new Array(80);for(ce=0;ce<80;ce++)Te[ce]=new H(0,0);var He,it,_e=new H(0,0),we=new H(0,0),De=new H(0,0),xe=new H(0,0),Ce=new H(0,0),Me=new H(0,0),Ne=new H(0,0),We=new H(0,0),Xe=new H(0,0),Qe=new H(0,0),Ye=new H(0,0),Je=new H(0,0);for(ce=0;ce<J;){for(pe=0;pe<16;++pe)Te[pe].high=ie[ce]<<24|ie[ce+1]<<16|ie[ce+2]<<8|ie[ce+3],Te[pe].low=ie[ce+4]<<24|ie[ce+5]<<16|ie[ce+6]<<8|ie[ce+7],ce+=8;for(pe=16;pe<80;++pe)I(He=Te[pe],Te[pe-2],Je),He.add(Te[pe-7]),F(Ye,Te[pe-15],Je),He.add(Ye),He.add(Te[pe-16]);for(_e.assign(R),we.assign(G),De.assign(K),xe.assign(U),Ce.assign(z),Me.assign(L),Ne.assign(S),We.assign(B),pe=0;pe<80;++pe)Xe.assign(We),P(Ye,Ce,Je),Xe.add(Ye),b(Ye,Ce,Me,Ne,Je),Xe.add(Ye),Xe.add(j[pe]),Xe.add(Te[pe]),C(Qe,_e,Je),q(Ye,_e,we,De,Je),Qe.add(Ye),He=We,We=Ne,Ne=Me,Me=Ce,xe.add(Xe),Ce=xe,xe=De,De=we,we=_e,He.assign(Xe),He.add(Qe),_e=He;R.add(_e),G.add(we),K.add(De),U.add(xe),z.add(Ce),L.add(Me),S.add(Ne),B.add(We)}return _?(it=new Uint8Array(48),R.copyTo(it,0),G.copyTo(it,8),K.copyTo(it,16),U.copyTo(it,24),z.copyTo(it,32),L.copyTo(it,40)):(it=new Uint8Array(64),R.copyTo(it,0),G.copyTo(it,8),K.copyTo(it,16),U.copyTo(it,24),z.copyTo(it,32),L.copyTo(it,40),S.copyTo(it,48),B.copyTo(it,56)),it}}();se.calculateSHA512=re;var f=function b(q,C,P){return re(q,C,P,!0)};se.calculateSHA384=f;var c=function(){function b(){}return b.prototype={decryptBlock:function(C){return C},encrypt:function(C){return C}},b}();class ${constructor(){this.constructor===$&&(0,k.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let b=0;b<256;b++)this._mixCol[b]=b<128?b<<1:b<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(b){(0,k.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(b,q){let C,P,F;const I=new Uint8Array(16);I.set(b);for(let j=0,E=this._keySize;j<16;++j,++E)I[j]^=q[E];for(let j=this._cyclesOfRepetition-1;j>=1;--j){C=I[13],I[13]=I[9],I[9]=I[5],I[5]=I[1],I[1]=C,C=I[14],P=I[10],I[14]=I[6],I[10]=I[2],I[6]=C,I[2]=P,C=I[15],P=I[11],F=I[7],I[15]=I[3],I[11]=C,I[7]=P,I[3]=F;for(let E=0;E<16;++E)I[E]=this._inv_s[I[E]];for(let E=0,x=16*j;E<16;++E,++x)I[E]^=q[x];for(let E=0;E<16;E+=4){const p=this._mix[I[E+1]],m=this._mix[I[E+2]],_=this._mix[I[E+3]];C=this._mix[I[E]]^p>>>8^p<<24^m>>>16^m<<16^_>>>24^_<<8,I[E]=C>>>24&255,I[E+1]=C>>16&255,I[E+2]=C>>8&255,I[E+3]=255&C}}C=I[13],I[13]=I[9],I[9]=I[5],I[5]=I[1],I[1]=C,C=I[14],P=I[10],I[14]=I[6],I[10]=I[2],I[6]=C,I[2]=P,C=I[15],P=I[11],F=I[7],I[15]=I[3],I[11]=C,I[7]=P,I[3]=F;for(let j=0;j<16;++j)I[j]=this._inv_s[I[j]],I[j]^=q[j];return I}_encrypt(b,q){const C=this._s;let P,F,I;const j=new Uint8Array(16);j.set(b);for(let E=0;E<16;++E)j[E]^=q[E];for(let E=1;E<this._cyclesOfRepetition;E++){for(let x=0;x<16;++x)j[x]=C[j[x]];I=j[1],j[1]=j[5],j[5]=j[9],j[9]=j[13],j[13]=I,I=j[2],F=j[6],j[2]=j[10],j[6]=j[14],j[10]=I,j[14]=F,I=j[3],F=j[7],P=j[11],j[3]=j[15],j[7]=I,j[11]=F,j[15]=P;for(let x=0;x<16;x+=4){const p=j[x+0],m=j[x+1],_=j[x+2],R=j[x+3];P=p^m^_^R,j[x+0]^=P^this._mixCol[p^m],j[x+1]^=P^this._mixCol[m^_],j[x+2]^=P^this._mixCol[_^R],j[x+3]^=P^this._mixCol[R^p]}for(let x=0,p=16*E;x<16;++x,++p)j[x]^=q[p]}for(let E=0;E<16;++E)j[E]=C[j[E]];I=j[1],j[1]=j[5],j[5]=j[9],j[9]=j[13],j[13]=I,I=j[2],F=j[6],j[2]=j[10],j[6]=j[14],j[10]=I,j[14]=F,I=j[3],F=j[7],P=j[11],j[3]=j[15],j[7]=I,j[11]=F,j[15]=P;for(let E=0,x=this._keySize;E<16;++E,++x)j[E]^=q[x];return j}_decryptBlock2(b,q){const C=b.length;let P=this.buffer,F=this.bufferPosition;const I=[];let j=this.iv;for(let p=0;p<C;++p){if(P[F]=b[p],++F,F<16)continue;const m=this._decrypt(P,this._key);for(let _=0;_<16;++_)m[_]^=j[_];j=P,I.push(m),P=new Uint8Array(16),F=0}if(this.buffer=P,this.bufferLength=F,this.iv=j,0===I.length)return new Uint8Array(0);let E=16*I.length;if(q){const p=I[I.length-1];let m=p[15];if(m<=16){for(let _=15,R=16-m;_>=R;--_)if(p[_]!==m){m=0;break}E-=m,I[I.length-1]=p.subarray(0,16-m)}}const x=new Uint8Array(E);for(let p=0,m=0,_=I.length;p<_;++p,m+=16)x.set(I[p],m);return x}decryptBlock(b,q,C=null){const P=b.length,F=this.buffer;let I=this.bufferPosition;if(C)this.iv=C;else{for(let j=0;I<16&&j<P;++j,++I)F[I]=b[j];if(I<16)return this.bufferLength=I,new Uint8Array(0);this.iv=F,b=b.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(b,q)}encrypt(b,q){const C=b.length;let P=this.buffer,F=this.bufferPosition;const I=[];q||(q=new Uint8Array(16));for(let x=0;x<C;++x){if(P[F]=b[x],++F,F<16)continue;for(let m=0;m<16;++m)P[m]^=q[m];const p=this._encrypt(P,this._key);q=p,I.push(p),P=new Uint8Array(16),F=0}if(this.buffer=P,this.bufferLength=F,this.iv=q,0===I.length)return new Uint8Array(0);const E=new Uint8Array(16*I.length);for(let x=0,p=0,m=I.length;x<m;++x,p+=16)E.set(I[x],p);return E}}class ae extends ${constructor(b){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(b)}_expandKey(b){const C=this._s,P=this._rcon,F=new Uint8Array(176);F.set(b);for(let I=16,j=1;I<176;++j){let E=F[I-3],x=F[I-2],p=F[I-1],m=F[I-4];E=C[E],x=C[x],p=C[p],m=C[m],E^=P[j];for(let _=0;_<4;++_)F[I]=E^=F[I-16],I++,F[I]=x^=F[I-16],I++,F[I]=p^=F[I-16],I++,F[I]=m^=F[I-16],I++}return F}}se.AES128Cipher=ae;class oe extends ${constructor(b){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(b)}_expandKey(b){const C=this._s,P=new Uint8Array(240);P.set(b);let I,j,E,x,F=1;for(let p=32,m=1;p<240;++m){p%32==16?(I=C[I],j=C[j],E=C[E],x=C[x]):p%32==0&&(I=P[p-3],j=P[p-2],E=P[p-1],x=P[p-4],I=C[I],j=C[j],E=C[E],x=C[x],I^=F,(F<<=1)>=256&&(F=255&(27^F)));for(let _=0;_<4;++_)P[p]=I^=P[p-32],p++,P[p]=j^=P[p-32],p++,P[p]=E^=P[p-32],p++,P[p]=x^=P[p-32],p++}return P}}se.AES256Cipher=oe;var W=function(){function b(C,P){if(C.length!==P.length)return!1;for(var F=0;F<C.length;F++)if(C[F]!==P[F])return!1;return!0}function q(){}return q.prototype={checkOwnerPassword:function(P,F,I,j){var E=new Uint8Array(P.length+56);return E.set(P,0),E.set(F,P.length),E.set(I,P.length+F.length),b(te(E,0,E.length),j)},checkUserPassword:function(P,F,I){var j=new Uint8Array(P.length+8);return j.set(P,0),j.set(F,P.length),b(te(j,0,j.length),I)},getOwnerKey:function(P,F,I,j){var E=new Uint8Array(P.length+56);E.set(P,0),E.set(F,P.length),E.set(I,P.length+F.length);var x=te(E,0,E.length);return new oe(x).decryptBlock(j,!1,new Uint8Array(16))},getUserKey:function(P,F,I){var j=new Uint8Array(P.length+8);j.set(P,0),j.set(F,P.length);var E=te(j,0,j.length);return new oe(E).decryptBlock(I,!1,new Uint8Array(16))}},q}();se.PDF17=W;var N=function(){function b(F,I){var j=new Uint8Array(F.length+I.length);return j.set(F,0),j.set(I,F.length),j}function q(F,I,j){for(var E=te(I,0,I.length).subarray(0,32),x=[0],p=0;p<64||x[x.length-1]>p-32;){var m=F.length+E.length+j.length,_=new Uint8Array(64*m),R=b(F,E);R=b(R,j);for(var G=0,K=0;G<64;G++,K+=m)_.set(R,K);x=new ae(E.subarray(0,16)).encrypt(_,E.subarray(16,32));for(var z=0,L=0;L<16;L++)z*=1,z%=3,z+=(x[L]>>>0)%3,z%=3;0===z?E=te(x,0,x.length):1===z?E=f(x,0,x.length):2===z&&(E=re(x,0,x.length)),p++}return E.subarray(0,32)}function C(){}function P(F,I){if(F.length!==I.length)return!1;for(var j=0;j<F.length;j++)if(F[j]!==I[j])return!1;return!0}return C.prototype={hash:function(I,j,E){return q(I,j,E)},checkOwnerPassword:function(I,j,E,x){var p=new Uint8Array(I.length+56);return p.set(I,0),p.set(j,I.length),p.set(E,I.length+j.length),P(q(I,p,E),x)},checkUserPassword:function(I,j,E){var x=new Uint8Array(I.length+8);return x.set(I,0),x.set(j,I.length),P(q(I,x,[]),E)},getOwnerKey:function(I,j,E,x){var p=new Uint8Array(I.length+56);p.set(I,0),p.set(j,I.length),p.set(E,I.length+j.length);var m=q(I,p,E);return new oe(m).decryptBlock(x,!1,new Uint8Array(16))},getUserKey:function(I,j,E){var x=new Uint8Array(I.length+8);x.set(I,0),x.set(j,I.length);var p=q(I,x,[]);return new oe(p).decryptBlock(E,!1,new Uint8Array(16))}},C}();se.PDF20=N;var O=function(){function b(q,C){this.StringCipherConstructor=q,this.StreamCipherConstructor=C}return b.prototype={createStream:function(C,P){var F=new this.StreamCipherConstructor;return new ee.DecryptStream(C,P,function(j,E){return F.decryptBlock(j,E)})},decryptString:function(C){var P=new this.StringCipherConstructor,F=(0,k.stringToBytes)(C);return F=P.decryptBlock(F,!0),(0,k.bytesToString)(F)},encryptString:function(C){const P=new this.StringCipherConstructor;if(P instanceof $){const I=C.length,j=16-I%16;16!==j&&(C=C.padEnd(16*Math.ceil(I/16),String.fromCharCode(j)));const E=new Uint8Array(16);if(typeof crypto<"u")crypto.getRandomValues(E);else for(let m=0;m<16;m++)E[m]=Math.floor(256*Math.random());let x=(0,k.stringToBytes)(C);x=P.encrypt(x,E);const p=new Uint8Array(16+x.length);return p.set(E),p.set(x,16),(0,k.bytesToString)(p)}let F=(0,k.stringToBytes)(C);return F=P.encrypt(F),(0,k.bytesToString)(F)}},b}(),M=function(){var b=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function C(x,p,m,_,R,G,K,U){var B,J,L=new Uint8Array(40+m.length+x.length),S=0;if(p)for(J=Math.min(32,p.length);S<J;++S)L[S]=p[S];for(B=0;S<32;)L[S++]=b[B++];for(B=0,J=m.length;B<J;++B)L[S++]=m[B];for(L[S++]=255&R,L[S++]=R>>8&255,L[S++]=R>>16&255,L[S++]=R>>>24&255,B=0,J=x.length;B<J;++B)L[S++]=x[B];G>=4&&!U&&(L[S++]=255,L[S++]=255,L[S++]=255,L[S++]=255);var ie=V(L,0,S),ce=K>>3;if(G>=3)for(B=0;B<50;++B)ie=V(ie,0,ce);var Te,pe=ie.subarray(0,ce);if(G>=3){for(S=0;S<32;++S)L[S]=b[S];for(B=0,J=x.length;B<J;++B)L[S++]=x[B];Te=new e(pe).encryptBlock(V(L,0,S)),J=pe.length;var we,_e=new Uint8Array(J);for(B=1;B<=19;++B){for(we=0;we<J;++we)_e[we]=pe[we]^B;Te=new e(_e).encryptBlock(Te)}for(B=0,J=Te.length;B<J;++B)if(_[B]!==Te[B])return null}else for(B=0,J=(Te=new e(pe).encryptBlock(b)).length;B<J;++B)if(_[B]!==Te[B])return null;return pe}var F=fe.Name.get("Identity");function I(x,p,m){var _=x.get("Filter");if(!(0,fe.isName)(_,"Standard"))throw new k.FormatError("unknown encryption method");this.dict=x;var R=x.get("V");if(!Number.isInteger(R)||1!==R&&2!==R&&4!==R&&5!==R)throw new k.FormatError("unsupported encryption algorithm");this.algorithm=R;var G=x.get("Length");if(!G)if(R<=3)G=40;else{var K=x.get("CF"),U=x.get("StmF");if((0,fe.isDict)(K)&&(0,fe.isName)(U)){K.suppressEncryption=!0;var z=K.get(U.name);(G=z&&z.get("Length")||128)<40&&(G<<=3)}}if(!Number.isInteger(G)||G<40||G%8!=0)throw new k.FormatError("invalid key length");var L=(0,k.stringToBytes)(x.get("O")).subarray(0,32),S=(0,k.stringToBytes)(x.get("U")).subarray(0,32),B=x.get("P"),J=x.get("R"),ie=(4===R||5===R)&&!1!==x.get("EncryptMetadata");this.encryptMetadata=ie;var pe,ye,ce=(0,k.stringToBytes)(p);if(m){if(6===J)try{m=(0,k.utf8StringToString)(m)}catch{(0,k.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}pe=(0,k.stringToBytes)(m)}if(!(ye=5!==R?C(ce,pe,L,S,B,J,G,ie):function q(x,p,m,_,R,G,K,U,z,L,S,B){if(p){var J=Math.min(127,p.length);p=p.subarray(0,J)}else p=[];var ie;return(ie=6===x?new N:new W).checkUserPassword(p,U,K)?ie.getUserKey(p,z,S):p.length&&ie.checkOwnerPassword(p,_,G,m)?ie.getOwnerKey(p,R,G,L):null}(J,pe,L,(0,k.stringToBytes)(x.get("O")).subarray(32,40),(0,k.stringToBytes)(x.get("O")).subarray(40,48),(0,k.stringToBytes)(x.get("U")).subarray(0,48),S,(0,k.stringToBytes)(x.get("U")).subarray(32,40),(0,k.stringToBytes)(x.get("U")).subarray(40,48),(0,k.stringToBytes)(x.get("OE")),(0,k.stringToBytes)(x.get("UE")),(0,k.stringToBytes)(x.get("Perms"))))&&!m)throw new k.PasswordException("No password given",k.PasswordResponses.NEED_PASSWORD);if(!ye&&m&&(ye=C(ce,function P(x,p,m,_){var K,U,R=new Uint8Array(32),G=0;for(U=Math.min(32,x.length);G<U;++G)R[G]=x[G];for(K=0;G<32;)R[G++]=b[K++];var B,z=V(R,0,G),L=_>>3;if(m>=3)for(K=0;K<50;++K)z=V(z,0,z.length);if(m>=3){B=p;var ie,J=new Uint8Array(L);for(K=19;K>=0;K--){for(ie=0;ie<L;++ie)J[ie]=z[ie]^K;B=new e(J).encryptBlock(B)}}else B=new e(z.subarray(0,L)).encryptBlock(p);return B}(pe,L,J,G),L,S,B,J,G,ie)),!ye)throw new k.PasswordException("Incorrect Password",k.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=ye,R>=4){var Xe=x.get("CF");(0,fe.isDict)(Xe)&&(Xe.suppressEncryption=!0),this.cf=Xe,this.stmf=x.get("StmF")||F,this.strf=x.get("StrF")||F,this.eff=x.get("EFF")||this.stmf}}function j(x,p,m,_){var G,K,R=new Uint8Array(m.length+9);for(G=0,K=m.length;G<K;++G)R[G]=m[G];return R[G++]=255&x,R[G++]=x>>8&255,R[G++]=x>>16&255,R[G++]=255&p,R[G++]=p>>8&255,_&&(R[G++]=115,R[G++]=65,R[G++]=108,R[G++]=84),V(R,0,G).subarray(0,Math.min(m.length+5,16))}function E(x,p,m,_,R){if(!(0,fe.isName)(p))throw new k.FormatError("Invalid crypt filter name.");var K,G=x.get(p.name);if(null!=G&&(K=G.get("CFM")),!K||"None"===K.name)return function(){return new c};if("V2"===K.name)return function(){return new e(j(m,_,R,!1))};if("AESV2"===K.name)return function(){return new ae(j(m,_,R,!0))};if("AESV3"===K.name)return function(){return new oe(R)};throw new k.FormatError("Unknown crypto method")}return I.prototype={createCipherTransform:function(p,m){if(4===this.algorithm||5===this.algorithm)return new O(E(this.cf,this.stmf,p,m,this.encryptionKey),E(this.cf,this.strf,p,m,this.encryptionKey));var _=j(p,m,this.encryptionKey,!1),R=function(){return new e(_)};return new O(R,R)}},I}();se.CipherTransformFactory=M},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.ColorSpace=void 0;var k=y(2),fe=y(5),ee=y(8);class V{constructor(O,M){this.constructor===V&&(0,k.unreachable)("Cannot initialize ColorSpace."),this.name=O,this.numComps=M}getRgb(O,M){const A=new Uint8ClampedArray(3);return this.getRgbItem(O,M,A,0),A}getRgbItem(O,M,A,b){(0,k.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(O,M,A,b,q,C,P){(0,k.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(O,M){(0,k.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(O){return!1}isDefaultDecode(O,M){return V.isDefaultDecode(O,this.numComps)}fillRgb(O,M,A,b,q,C,P,F,I){const j=M*A;let E=null;const x=1<<P,p=A!==q||M!==b;if(this.isPassthrough(P))E=F;else if(1===this.numComps&&j>x&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){const m=P<=8?new Uint8Array(x):new Uint16Array(x);for(let R=0;R<x;R++)m[R]=R;const _=new Uint8ClampedArray(3*x);if(this.getRgbBuffer(m,0,x,_,0,P,0),p){E=new Uint8Array(3*j);let R=0;for(let G=0;G<j;++G){const K=3*F[G];E[R++]=_[K],E[R++]=_[K+1],E[R++]=_[K+2]}}else{let R=0;for(let G=0;G<j;++G){const K=3*F[G];O[R++]=_[K],O[R++]=_[K+1],O[R++]=_[K+2],R+=I}}}else p?(E=new Uint8ClampedArray(3*j),this.getRgbBuffer(F,0,j,E,0,P,0)):this.getRgbBuffer(F,0,b*C,O,0,P,I);if(E)if(p)!function e(N,O,M,A,b,q,C){C=1!==C?0:C;const F=M/b,I=A/q;let E,j=0;const x=new Uint16Array(b),p=3*M;for(let m=0;m<b;m++)x[m]=3*Math.floor(m*F);for(let m=0;m<q;m++){const _=Math.floor(m*I)*p;for(let R=0;R<b;R++)E=_+x[R],O[j++]=N[E++],O[j++]=N[E++],O[j++]=N[E++],j+=C}}(E,O,M,A,b,q,I);else{let m=0,_=0;for(let R=0,G=b*C;R<G;R++)O[m++]=E[_++],O[m++]=E[_++],O[m++]=E[_++],m+=I}}get usesZeroToOneRange(){return(0,k.shadow)(this,"usesZeroToOneRange",!0)}static _cache(O,M,A,b){if(!A)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!b)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let q,C;O instanceof fe.Ref&&(C=O,O=M.fetch(O)),O instanceof fe.Name&&(q=O.name),(q||C)&&A.set(q,C,b)}static getCached(O,M,A){if(!A)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(O instanceof fe.Ref){const b=A.getByRef(O);if(b)return b;try{O=M.fetch(O)}catch(q){if(q instanceof ee.MissingDataException)throw q}}if(O instanceof fe.Name){const b=A.getByName(O.name);if(b)return b}return null}static parseAsync({cs:O,xref:M,resources:A=null,pdfFunctionFactory:b,localColorSpaceCache:q}){var C=this;return le(function*(){const P=C._parse(O,M,A,b);return C._cache(O,M,q,P),P})()}static parse({cs:O,xref:M,resources:A=null,pdfFunctionFactory:b,localColorSpaceCache:q}){const C=this.getCached(O,M,q);if(C)return C;const P=this._parse(O,M,A,b);return this._cache(O,M,q,P),P}static _parse(O,M,A=null,b){if(O=M.fetchIfRef(O),(0,fe.isName)(O))switch(O.name){case"DeviceGray":case"G":return this.singletons.gray;case"DeviceRGB":case"RGB":return this.singletons.rgb;case"DeviceCMYK":case"CMYK":return this.singletons.cmyk;case"Pattern":return new te(null);default:if((0,fe.isDict)(A)){const q=A.get("ColorSpace");if((0,fe.isDict)(q)){const C=q.get(O.name);if(C){if((0,fe.isName)(C))return this._parse(C,M,A,b);O=C;break}}}throw new k.FormatError(`Unrecognized ColorSpace: ${O.name}`)}if(Array.isArray(O)){const q=M.fetchIfRef(O[0]).name;let C,P,F,I,j,E;switch(q){case"DeviceGray":case"G":return this.singletons.gray;case"DeviceRGB":case"RGB":return this.singletons.rgb;case"DeviceCMYK":case"CMYK":return this.singletons.cmyk;case"CalGray":return C=M.fetchIfRef(O[1]),I=C.getArray("WhitePoint"),j=C.getArray("BlackPoint"),E=C.get("Gamma"),new ae(I,j,E);case"CalRGB":C=M.fetchIfRef(O[1]),I=C.getArray("WhitePoint"),j=C.getArray("BlackPoint"),E=C.getArray("Gamma");const x=C.getArray("Matrix");return new oe(I,j,E,x);case"ICCBased":const m=M.fetchIfRef(O[1]).dict;P=m.get("N");const _=m.get("Alternate");if(_){const L=this._parse(_,M,A,b);if(L.numComps===P)return L;(0,k.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===P)return this.singletons.gray;if(3===P)return this.singletons.rgb;if(4===P)return this.singletons.cmyk;break;case"Pattern":return F=O[1]||null,F&&(F=this._parse(F,M,A,b)),new te(F);case"Indexed":case"I":F=this._parse(O[1],M,A,b);const R=M.fetchIfRef(O[2])+1,G=M.fetchIfRef(O[3]);return new re(F,R,G);case"Separation":case"DeviceN":const K=M.fetchIfRef(O[1]);P=Array.isArray(K)?K.length:1,F=this._parse(O[2],M,A,b);const U=b.create(O[3]);return new H(P,F,U);case"Lab":C=M.fetchIfRef(O[1]),I=C.getArray("WhitePoint"),j=C.getArray("BlackPoint");const z=C.getArray("Range");return new W(I,j,z);default:throw new k.FormatError(`Unimplemented ColorSpace object: ${q}`)}}throw new k.FormatError(`Unrecognized ColorSpace object: ${O}`)}static isDefaultDecode(O,M){if(!Array.isArray(O))return!0;if(2*M!==O.length)return(0,k.warn)("The decode map is not the correct length"),!0;for(let A=0,b=O.length;A<b;A+=2)if(0!==O[A]||1!==O[A+1])return!1;return!0}static get singletons(){return(0,k.shadow)(this,"singletons",{get gray(){return(0,k.shadow)(this,"gray",new f)},get rgb(){return(0,k.shadow)(this,"rgb",new c)},get cmyk(){return(0,k.shadow)(this,"cmyk",new $)}})}}se.ColorSpace=V;class H extends V{constructor(O,M,A){super("Alternate",O),this.base=M,this.tintFn=A,this.tmpBuf=new Float32Array(M.numComps)}getRgbItem(O,M,A,b){const q=this.tmpBuf;this.tintFn(O,M,q,0),this.base.getRgbItem(q,0,A,b)}getRgbBuffer(O,M,A,b,q,C,P){const F=this.tintFn,I=this.base,j=1/((1<<C)-1),E=I.numComps,x=I.usesZeroToOneRange,p=(I.isPassthrough(8)||!x)&&0===P;let m=p?q:0;const _=p?b:new Uint8ClampedArray(E*A),R=this.numComps,G=new Float32Array(R),K=new Float32Array(E);let U,z;for(U=0;U<A;U++){for(z=0;z<R;z++)G[z]=O[M++]*j;if(F(G,0,K,0),x)for(z=0;z<E;z++)_[m++]=255*K[z];else I.getRgbItem(K,0,_,m),m+=E}p||I.getRgbBuffer(_,0,A,b,q,8,P)}getOutputLength(O,M){return this.base.getOutputLength(O*this.base.numComps/this.numComps,M)}}class te extends V{constructor(O){super("Pattern",null),this.base=O}isDefaultDecode(O,M){(0,k.unreachable)("Should not call PatternCS.isDefaultDecode")}}class re extends V{constructor(O,M,A){super("Indexed",1),this.base=O,this.highVal=M;const b=O.numComps*M;if(this.lookup=new Uint8Array(b),(0,fe.isStream)(A)){const q=A.getBytes(b);this.lookup.set(q)}else{if("string"!=typeof A)throw new k.FormatError(`IndexedCS - unrecognized lookup table: ${A}`);for(let q=0;q<b;++q)this.lookup[q]=255&A.charCodeAt(q)}}getRgbItem(O,M,A,b){this.base.getRgbBuffer(this.lookup,O[M]*this.base.numComps,1,A,b,8,0)}getRgbBuffer(O,M,A,b,q,C,P){const F=this.base,I=F.numComps,j=F.getOutputLength(I,P),E=this.lookup;for(let x=0;x<A;++x){const p=O[M++]*I;F.getRgbBuffer(E,p,1,b,q,8,P),q+=j}}getOutputLength(O,M){return this.base.getOutputLength(O*this.base.numComps,M)}isDefaultDecode(O,M){return!Array.isArray(O)||(2!==O.length?((0,k.warn)("Decode map length is not correct"),!0):!Number.isInteger(M)||M<1?((0,k.warn)("Bits per component is not correct"),!0):0===O[0]&&O[1]===(1<<M)-1)}}class f extends V{constructor(){super("DeviceGray",1)}getRgbItem(O,M,A,b){A[b]=A[b+1]=A[b+2]=255*O[M]}getRgbBuffer(O,M,A,b,q,C,P){const F=255/((1<<C)-1);let I=M,j=q;for(let E=0;E<A;++E){const x=F*O[I++];b[j++]=x,b[j++]=x,b[j++]=x,j+=P}}getOutputLength(O,M){return O*(3+M)}}class c extends V{constructor(){super("DeviceRGB",3)}getRgbItem(O,M,A,b){A[b]=255*O[M],A[b+1]=255*O[M+1],A[b+2]=255*O[M+2]}getRgbBuffer(O,M,A,b,q,C,P){if(8===C&&0===P)return void b.set(O.subarray(M,M+3*A),q);const F=255/((1<<C)-1);let I=M,j=q;for(let E=0;E<A;++E)b[j++]=F*O[I++],b[j++]=F*O[I++],b[j++]=F*O[I++],j+=P}getOutputLength(O,M){return O*(3+M)/3|0}isPassthrough(O){return 8===O}}const $=function(){function O(A,b,q,C,P){const F=A[b]*q,I=A[b+1]*q,j=A[b+2]*q,E=A[b+3]*q;C[P]=255+F*(-4.387332384609988*F+54.48615194189176*I+18.82290502165302*j+212.25662451639585*E-285.2331026137004)+I*(1.7149763477362134*I-5.6096736904047315*j+-17.873870861415444*E-5.497006427196366)+j*(-2.5217340131683033*j-21.248923337353073*E+17.5119270841813)+E*(-21.86122147463605*E-189.48180835922747),C[P+1]=255+F*(8.841041422036149*F+60.118027045597366*I+6.871425592049007*j+31.159100130055922*E-79.2970844816548)+I*(-15.310361306967817*I+17.575251261109482*j+131.35250912493976*E-190.9453302588951)+j*(4.444339102852739*j+9.8632861493405*E-24.86741582555878)+E*(-20.737325471181034*E-187.80453709719578),C[P+2]=255+F*(.8842522430003296*F+8.078677503112928*I+30.89978309703729*j-.23883238689178934*E-14.183576799673286)+I*(10.49593273432072*I+63.02378494754052*j+50.606957656360734*E-112.23884253719248)+j*(.03296041114873217*j+115.60384449646641*E-193.58209356861505)+E*(-22.33816807309886*E-180.12613974708367)}return class M extends V{constructor(){super("DeviceCMYK",4)}getRgbItem(b,q,C,P){O(b,q,1,C,P)}getRgbBuffer(b,q,C,P,F,I,j){const E=1/((1<<I)-1);for(let x=0;x<C;x++)O(b,q,E,P,F),q+=4,F+=3+j}getOutputLength(b,q){return b/4*(3+q)|0}}}(),ae=function(){function O(A,b,q,C,P,F){const x=Math.max(295.8*(A.YW*(b[q]*F)**A.G)**.3333333333333333-40.8,0);C[P]=x,C[P+1]=x,C[P+2]=x}return class M extends V{constructor(b,q,C){if(super("CalGray",1),!b)throw new k.FormatError("WhitePoint missing - required for color space CalGray");if(q=q||[0,0,0],C=C||1,this.XW=b[0],this.YW=b[1],this.ZW=b[2],this.XB=q[0],this.YB=q[1],this.ZB=q[2],this.G=C,this.XW<0||this.ZW<0||1!==this.YW)throw new k.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,k.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),(0!==this.XB||0!==this.YB||0!==this.ZB)&&(0,k.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,k.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(b,q,C,P){O(this,b,q,C,P,1)}getRgbBuffer(b,q,C,P,F,I,j){const E=1/((1<<I)-1);for(let x=0;x<C;++x)O(this,b,q,P,F,E),q+=1,F+=3+j}getOutputLength(b,q){return b*(3+q)}}}(),oe=function(){const O=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),M=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),A=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),b=new Float32Array([1,1,1]),q=new Float32Array(3),C=new Float32Array(3),P=new Float32Array(3),F=(24/116)**3/8;function I(z,L,S){S[0]=z[0]*L[0]+z[1]*L[1]+z[2]*L[2],S[1]=z[3]*L[0]+z[4]*L[1]+z[5]*L[2],S[2]=z[6]*L[0]+z[7]*L[1]+z[8]*L[2]}function x(z){return z<=.0031308?p(0,1,12.92*z):z>=.99554525?1:p(0,1,1.055*z**(1/2.4)-.055)}function p(z,L,S){return Math.max(z,Math.min(L,S))}function m(z){return z<0?-m(-z):z>8?((z+16)/116)**3:z*F}function K(z,L,S,B,J,ie){const ce=p(0,1,L[S]*ie),pe=p(0,1,L[S+1]*ie),ye=p(0,1,L[S+2]*ie),Te=1===ce?1:ce**z.GR,_e=1===pe?1:pe**z.GG,we=1===ye?1:ye**z.GB,xe=z.MYA*Te+z.MYB*_e+z.MYC*we,Ce=z.MZA*Te+z.MZB*_e+z.MZC*we,Me=C;Me[0]=z.MXA*Te+z.MXB*_e+z.MXC*we,Me[1]=xe,Me[2]=Ce;const Ne=P;!function R(z,L,S){if(1===z[0]&&1===z[2])return S[0]=L[0],S[1]=L[1],void(S[2]=L[2]);const B=S;I(O,L,B);const J=q;(function j(z,L,S){S[0]=1*L[0]/z[0],S[1]=1*L[1]/z[1],S[2]=1*L[2]/z[2]})(z,B,J),I(M,J,S)}(z.whitePoint,Me,Ne);const We=C;!function _(z,L,S){if(0===z[0]&&0===z[1]&&0===z[2])return S[0]=L[0],S[1]=L[1],void(S[2]=L[2]);const B=m(0),_e=(1-B)/(1-m(z[0])),De=(1-B)/(1-m(z[1])),xe=1-De,Ce=(1-B)/(1-m(z[2])),Me=1-Ce;S[0]=L[0]*_e+(1-_e),S[1]=L[1]*De+xe,S[2]=L[2]*Ce+Me}(z.blackPoint,Ne,We);const Xe=P;!function G(z,L,S){const B=S;I(O,L,B);const J=q;(function E(z,L,S){S[0]=.95047*L[0]/z[0],S[1]=1*L[1]/z[1],S[2]=1.08883*L[2]/z[2]})(z,B,J),I(M,J,S)}(b,We,Xe);const Qe=C;I(A,Xe,Qe),B[J]=255*x(Qe[0]),B[J+1]=255*x(Qe[1]),B[J+2]=255*x(Qe[2])}return class U extends V{constructor(L,S,B,J){if(super("CalRGB",3),!L)throw new k.FormatError("WhitePoint missing - required for color space CalRGB");S=S||new Float32Array(3),B=B||new Float32Array([1,1,1]),J=J||new Float32Array([1,0,0,0,1,0,0,0,1]);const ie=L[0],ce=L[1],pe=L[2];this.whitePoint=L;const ye=S[0],Te=S[1],_e=S[2];if(this.blackPoint=S,this.GR=B[0],this.GG=B[1],this.GB=B[2],this.MXA=J[0],this.MYA=J[1],this.MZA=J[2],this.MXB=J[3],this.MYB=J[4],this.MZB=J[5],this.MXC=J[6],this.MYC=J[7],this.MZC=J[8],ie<0||pe<0||1!==ce)throw new k.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(ye<0||Te<0||_e<0)&&((0,k.info)(`Invalid BlackPoint for ${this.name} [${ye}, ${Te}, ${_e}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,k.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(L,S,B,J){K(this,L,S,B,J,1)}getRgbBuffer(L,S,B,J,ie,ce,pe){const ye=1/((1<<ce)-1);for(let Te=0;Te<B;++Te)K(this,L,S,J,ie,ye),S+=3,ie+=3+pe}getOutputLength(L,S){return L*(3+S)/3|0}}}(),W=function(){function O(q){let C;return C=q>=6/29?q*q*q:108/841*(q-4/29),C}function M(q,C,P,F){return P+q*(F-P)/C}function A(q,C,P,F,I,j){let E=C[P],x=C[P+1],p=C[P+2];!1!==F&&(E=M(E,F,0,100),x=M(x,F,q.amin,q.amax),p=M(p,F,q.bmin,q.bmax)),x>q.amax?x=q.amax:x<q.amin&&(x=q.amin),p>q.bmax?p=q.bmax:p<q.bmin&&(p=q.bmin);const m=(E+16)/116,R=m-p/200,G=q.XW*O(m+x/500),K=q.YW*O(m),U=q.ZW*O(R);let z,L,S;q.ZW<1?(z=3.1339*G+-1.617*K+-.4906*U,L=-.9785*G+1.916*K+.0333*U,S=.072*G+-.229*K+1.4057*U):(z=3.2406*G+-1.5372*K+-.4986*U,L=-.9689*G+1.8758*K+.0415*U,S=.0557*G+-.204*K+1.057*U),I[j]=255*Math.sqrt(z),I[j+1]=255*Math.sqrt(L),I[j+2]=255*Math.sqrt(S)}return class b extends V{constructor(C,P,F){if(super("Lab",3),!C)throw new k.FormatError("WhitePoint missing - required for color space Lab");if(P=P||[0,0,0],F=F||[-100,100,-100,100],this.XW=C[0],this.YW=C[1],this.ZW=C[2],this.amin=F[0],this.amax=F[1],this.bmin=F[2],this.bmax=F[3],this.XB=P[0],this.YB=P[1],this.ZB=P[2],this.XW<0||this.ZW<0||1!==this.YW)throw new k.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,k.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,k.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(C,P,F,I){A(this,C,P,!1,F,I)}getRgbBuffer(C,P,F,I,j,E,x){const p=(1<<E)-1;for(let m=0;m<F;m++)A(this,C,P,p,I,j),P+=3,j+=3+x}getOutputLength(C,P){return C*(3+P)/3|0}isDefaultDecode(C,P){return!0}get usesZeroToOneRange(){return(0,k.shadow)(this,"usesZeroToOneRange",!1)}}}()},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.GlobalImageCache=se.LocalGStateCache=se.LocalFunctionCache=se.LocalColorSpaceCache=se.LocalImageCache=void 0;var k=y(2),fe=y(5);class ee{constructor(c){this.constructor===ee&&(0,k.unreachable)("Cannot initialize BaseLocalCache."),(!c||!c.onlyRefs)&&(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new fe.RefSetCache}getByName(c){const $=this._nameRefMap.get(c);return $?this.getByRef($):this._imageMap.get(c)||null}getByRef(c){return this._imageCache.get(c)||null}set(c,$,ae){(0,k.unreachable)("Abstract method `set` called.")}}se.LocalImageCache=class e extends ee{set(c,$=null,ae){if(!c)throw new Error('LocalImageCache.set - expected "name" argument.');if($){if(this._imageCache.has($))return;return this._nameRefMap.set(c,$),void this._imageCache.put($,ae)}this._imageMap.has(c)||this._imageMap.set(c,ae)}};se.LocalColorSpaceCache=class V extends ee{set(c=null,$=null,ae){if(!c&&!$)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if($){if(this._imageCache.has($))return;return c&&this._nameRefMap.set(c,$),void this._imageCache.put($,ae)}this._imageMap.has(c)||this._imageMap.set(c,ae)}};se.LocalFunctionCache=class H extends ee{constructor(c){super({onlyRefs:!0})}getByName(c){(0,k.unreachable)("Should not call `getByName` method.")}set(c=null,$,ae){if(!$)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has($)||this._imageCache.put($,ae)}};se.LocalGStateCache=class te extends ee{set(c,$=null,ae){if(!c)throw new Error('LocalGStateCache.set - expected "name" argument.');if($){if(this._imageCache.has($))return;return this._nameRefMap.set(c,$),void this._imageCache.put($,ae)}this._imageMap.has(c)||this._imageMap.set(c,ae)}};class re{static get NUM_PAGES_THRESHOLD(){return(0,k.shadow)(this,"NUM_PAGES_THRESHOLD",2)}static get MAX_IMAGES_TO_CACHE(){return(0,k.shadow)(this,"MAX_IMAGES_TO_CACHE",10)}constructor(){this._refCache=new fe.RefSetCache,this._imageCache=new fe.RefSetCache}shouldCache(c,$){const ae=this._refCache.get(c);return!((ae?ae.size+(ae.has($)?0:1):1)<re.NUM_PAGES_THRESHOLD||!this._imageCache.has(c)&&this._imageCache.size>=re.MAX_IMAGES_TO_CACHE)}addPageIndex(c,$){let ae=this._refCache.get(c);ae||(ae=new Set,this._refCache.put(c,ae)),ae.add($)}getData(c,$){const ae=this._refCache.get(c);return!ae||ae.size<re.NUM_PAGES_THRESHOLD||!this._imageCache.has(c)?null:(ae.add($),this._imageCache.get(c))}setData(c,$){if(!this._refCache.has(c))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');if(!this._imageCache.has(c)){if(this._imageCache.size>=re.MAX_IMAGES_TO_CACHE)return void(0,k.info)("GlobalImageCache.setData - ignoring image above MAX_IMAGES_TO_CACHE.");this._imageCache.put(c,$)}}clear(c=!1){c||this._refCache.clear(),this._imageCache.clear()}}se.GlobalImageCache=re},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getQuadPoints=c,se.MarkupAnnotation=se.AnnotationFactory=se.AnnotationBorderStyle=se.Annotation=void 0;var k=y(2),fe=y(10),ee=y(5),e=y(23),V=y(8),H=y(26),te=y(12),re=y(27);function c(L,S){if(!L.has("QuadPoints"))return null;const B=L.getArray("QuadPoints");if(!Array.isArray(B)||B.length%8>0)return null;const J=[];for(let ie=0,ce=B.length/8;ie<ce;ie++){J.push([]);for(let pe=8*ie,ye=8*ie+8;pe<ye;pe+=2){const Te=B[pe],_e=B[pe+1];if(Te<S[0]||Te>S[2]||_e<S[1]||_e>S[3])return null;J[ie].push({x:Te,y:_e})}}return J}function $(L,S,B){const[J,ie,ce,pe]=k.Util.getAxialAlignedBoundingBox(S,B);if(J===ce||ie===pe)return[1,0,0,1,L[0],L[1]];const ye=(L[2]-L[0])/(ce-J),Te=(L[3]-L[1])/(pe-ie);return[ye,0,0,Te,L[0]-J*ye,L[1]-ie*Te]}se.AnnotationFactory=class f{static create(S,B,J,ie){return J.ensureCatalog("acroForm").then(ce=>J.ensure(this,"_create",[S,B,J,ie,ce]))}static _create(S,B,J,ie,ce){const pe=S.fetchIfRef(B);if(!(0,ee.isDict)(pe))return;const ye=(0,ee.isRef)(B)?B.toString():`annot_${ie.createObjId()}`;let Te=pe.get("Subtype");Te=(0,ee.isName)(Te)?Te.name:null;const _e={xref:S,ref:B,dict:pe,subtype:Te,id:ye,pdfManager:J,acroForm:ce instanceof ee.Dict?ce:ee.Dict.empty};switch(Te){case"Link":return new q(_e);case"Text":return new b(_e);case"Widget":let we=(0,V.getInheritableProperty)({dict:pe,key:"FT"});switch(we=(0,ee.isName)(we)?we.name:null,we){case"Tx":return new O(_e);case"Btn":return new M(_e);case"Ch":return new A(_e)}return(0,k.warn)('Unimplemented widget field type "'+we+'", falling back to base field type.'),new N(_e);case"Popup":return new C(_e);case"FreeText":return new P(_e);case"Line":return new F(_e);case"Square":return new I(_e);case"Circle":return new j(_e);case"PolyLine":return new E(_e);case"Polygon":return new x(_e);case"Caret":return new p(_e);case"Ink":return new m(_e);case"Highlight":return new _(_e);case"Underline":return new R(_e);case"Squiggly":return new G(_e);case"StrikeOut":return new K(_e);case"Stamp":return new U(_e);case"FileAttachment":return new z(_e);default:return(0,k.warn)(Te?'Unimplemented annotation type "'+Te+'", falling back to base annotation.':"Annotation is missing the required /Subtype."),new ae(_e)}}};class ae{constructor(S){const B=S.dict;this.setContents(B.get("Contents")),this.setModificationDate(B.get("M")),this.setFlags(B.get("F")),this.setRectangle(B.getArray("Rect")),this.setColor(B.getArray("C")),this.setBorderStyle(B),this.setAppearance(B),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,contents:this.contents,hasAppearance:!!this.appearance,id:S.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:S.subtype}}_hasFlag(S,B){return!!(S&B)}_isViewable(S){return!this._hasFlag(S,k.AnnotationFlag.INVISIBLE)&&!this._hasFlag(S,k.AnnotationFlag.HIDDEN)&&!this._hasFlag(S,k.AnnotationFlag.NOVIEW)}_isPrintable(S){return this._hasFlag(S,k.AnnotationFlag.PRINT)&&!this._hasFlag(S,k.AnnotationFlag.INVISIBLE)&&!this._hasFlag(S,k.AnnotationFlag.HIDDEN)}get viewable(){return 0===this.flags||this._isViewable(this.flags)}get printable(){return 0!==this.flags&&this._isPrintable(this.flags)}setContents(S){this.contents=(0,k.stringToPDFString)(S||"")}setModificationDate(S){this.modificationDate=(0,k.isString)(S)?S:null}setFlags(S){this.flags=Number.isInteger(S)&&S>0?S:0}hasFlag(S){return this._hasFlag(this.flags,S)}setRectangle(S){this.rectangle=Array.isArray(S)&&4===S.length?k.Util.normalizeRect(S):[0,0,0,0]}setColor(S){const B=new Uint8ClampedArray(3);if(Array.isArray(S))switch(S.length){case 0:this.color=null;break;case 1:e.ColorSpace.singletons.gray.getRgbItem(S,0,B,0),this.color=B;break;case 3:e.ColorSpace.singletons.rgb.getRgbItem(S,0,B,0),this.color=B;break;case 4:e.ColorSpace.singletons.cmyk.getRgbItem(S,0,B,0),this.color=B;break;default:this.color=B}else this.color=B}setBorderStyle(S){if(this.borderStyle=new oe,(0,ee.isDict)(S))if(S.has("BS")){const B=S.get("BS"),J=B.get("Type");(!J||(0,ee.isName)(J,"Border"))&&(this.borderStyle.setWidth(B.get("W"),this.rectangle),this.borderStyle.setStyle(B.get("S")),this.borderStyle.setDashArray(B.getArray("D")))}else if(S.has("Border")){const B=S.getArray("Border");Array.isArray(B)&&B.length>=3&&(this.borderStyle.setHorizontalCornerRadius(B[0]),this.borderStyle.setVerticalCornerRadius(B[1]),this.borderStyle.setWidth(B[2],this.rectangle),4===B.length&&this.borderStyle.setDashArray(B[3]))}else this.borderStyle.setWidth(0)}setAppearance(S){this.appearance=null;const B=S.get("AP");if(!(0,ee.isDict)(B))return;const J=B.get("N");if((0,ee.isStream)(J))return void(this.appearance=J);if(!(0,ee.isDict)(J))return;const ie=S.get("AS");!(0,ee.isName)(ie)||!J.has(ie.name)||(this.appearance=J.get(ie.name))}loadResources(S){return this.appearance.dict.getAsync("Resources").then(B=>B?new fe.ObjectLoader(B,S,B.xref).load().then(function(){return B}):void 0)}getOperatorList(S,B,J,ie){if(!this.appearance)return Promise.resolve(new H.OperatorList);const ce=this.appearance,pe=this.data,ye=ce.dict,Te=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),_e=ye.getArray("BBox")||[0,0,1,1],we=ye.getArray("Matrix")||[1,0,0,1,0,0],De=$(pe.rect,_e,we);return Te.then(xe=>{const Ce=new H.OperatorList;return Ce.addOp(k.OPS.beginAnnotation,[pe.rect,De,we]),S.getOperatorList({stream:ce,task:B,resources:xe,operatorList:Ce}).then(()=>(Ce.addOp(k.OPS.endAnnotation,[]),ce.reset(),Ce))})}save(S,B,J){return le(function*(){return null})()}}se.Annotation=ae;class oe{constructor(){this.width=1,this.style=k.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(S,B=[0,0,0,0]){if((0,ee.isName)(S))this.width=0;else if(Number.isInteger(S)){if(S>0){const J=(B[2]-B[0])/2,ie=(B[3]-B[1])/2;J>0&&ie>0&&(S>J||S>ie)&&((0,k.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${S}`),S=1)}this.width=S}}setStyle(S){if((0,ee.isName)(S))switch(S.name){case"S":this.style=k.AnnotationBorderStyleType.SOLID;break;case"D":this.style=k.AnnotationBorderStyleType.DASHED;break;case"B":this.style=k.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=k.AnnotationBorderStyleType.INSET;break;case"U":this.style=k.AnnotationBorderStyleType.UNDERLINE}}setDashArray(S){if(Array.isArray(S)&&S.length>0){let B=!0,J=!0;for(const ie of S){if(!(+ie>=0)){B=!1;break}ie>0&&(J=!1)}B&&!J?this.dashArray=S:this.width=0}else S&&(this.width=0)}setHorizontalCornerRadius(S){Number.isInteger(S)&&(this.horizontalCornerRadius=S)}setVerticalCornerRadius(S){Number.isInteger(S)&&(this.verticalCornerRadius=S)}}se.AnnotationBorderStyle=oe;class W extends ae{constructor(S){super(S);const B=S.dict;if(B.has("IRT")){const J=B.getRaw("IRT");this.data.inReplyTo=(0,ee.isRef)(J)?J.toString():null;const ie=B.get("RT");this.data.replyType=(0,ee.isName)(ie)?ie.name:k.AnnotationReplyType.REPLY}if(this.data.replyType===k.AnnotationReplyType.GROUP){const J=B.get("IRT");this.data.title=(0,k.stringToPDFString)(J.get("T")||""),this.setContents(J.get("Contents")),this.data.contents=this.contents,J.has("CreationDate")?(this.setCreationDate(J.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,J.has("M")?(this.setModificationDate(J.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,this.data.hasPopup=J.has("Popup"),J.has("C")?(this.setColor(J.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.title=(0,k.stringToPDFString)(B.get("T")||""),this.setCreationDate(B.get("CreationDate")),this.data.creationDate=this.creationDate,this.data.hasPopup=B.has("Popup"),B.has("C")||(this.data.color=null)}setCreationDate(S){this.creationDate=(0,k.isString)(S)?S:null}}se.MarkupAnnotation=W;class N extends ae{constructor(S){super(S);const B=S.dict,J=this.data;this.ref=S.ref,J.annotationType=k.AnnotationType.WIDGET,J.fieldName=this._constructFieldName(B);const ie=(0,V.getInheritableProperty)({dict:B,key:"V",getArray:!0});J.fieldValue=this._decodeFormValue(ie),J.alternativeText=(0,k.stringToPDFString)(B.get("TU")||""),J.defaultAppearance=(0,V.getInheritableProperty)({dict:B,key:"DA"})||S.acroForm.get("DA")||"";const ce=(0,V.getInheritableProperty)({dict:B,key:"FT"});J.fieldType=(0,ee.isName)(ce)?ce.name:null,this.fieldResources=(0,V.getInheritableProperty)({dict:B,key:"DR"})||S.acroForm.get("DR")||ee.Dict.empty,J.fieldFlags=(0,V.getInheritableProperty)({dict:B,key:"Ff"}),(!Number.isInteger(J.fieldFlags)||J.fieldFlags<0)&&(J.fieldFlags=0),J.readOnly=this.hasFieldFlag(k.AnnotationFieldFlag.READONLY),"Sig"===J.fieldType&&(J.fieldValue=null,this.setFlags(k.AnnotationFlag.HIDDEN))}_constructFieldName(S){if(!S.has("T")&&!S.has("Parent"))return(0,k.warn)("Unknown field name, falling back to empty field name."),"";if(!S.has("Parent"))return(0,k.stringToPDFString)(S.get("T"));const B=[];S.has("T")&&B.unshift((0,k.stringToPDFString)(S.get("T")));let J=S;for(;J.has("Parent")&&(J=J.get("Parent"),(0,ee.isDict)(J));)J.has("T")&&B.unshift((0,k.stringToPDFString)(J.get("T")));return B.join(".")}_decodeFormValue(S){return Array.isArray(S)?S.filter(B=>(0,k.isString)(B)).map(B=>(0,k.stringToPDFString)(B)):(0,ee.isName)(S)?(0,k.stringToPDFString)(S.name):(0,k.isString)(S)?(0,k.stringToPDFString)(S):null}hasFieldFlag(S){return!!(this.data.fieldFlags&S)}getOperatorList(S,B,J,ie){return J?Promise.resolve(new H.OperatorList):this._hasText?this._getAppearance(S,B,ie).then(ce=>{if(this.appearance&&null===ce)return super.getOperatorList(S,B,J,ie);const pe=new H.OperatorList;if(!this.data.defaultAppearance||null===ce)return pe;const ye=[1,0,0,1,0,0],_e=$(this.data.rect,[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],ye);pe.addOp(k.OPS.beginAnnotation,[this.data.rect,_e,ye]);const we=new te.StringStream(ce);return S.getOperatorList({stream:we,task:B,resources:this.fieldResources,operatorList:pe}).then(function(){return pe.addOp(k.OPS.endAnnotation,[]),pe})}):super.getOperatorList(S,B,J,ie)}save(S,B,J){var ie=this;return le(function*(){if(ie.data.fieldValue===J[ie.data.id])return null;let ce=yield ie._getAppearance(S,B,J);if(null===ce)return null;const pe=S.xref.fetchIfRef(ie.ref);if(!(0,ee.isDict)(pe))return null;const ye=[0,0,ie.data.rect[2]-ie.data.rect[0],ie.data.rect[3]-ie.data.rect[1]],Te=S.xref.getNewRef(),_e=new ee.Dict(S.xref);_e.set("N",Te);const we=J[ie.data.id],De=S.xref.encrypt;let xe=null,Ce=null;De&&(xe=De.createCipherTransform(ie.ref.num,ie.ref.gen),Ce=De.createCipherTransform(Te.num,Te.gen),ce=Ce.encryptString(ce)),pe.set("V",we),pe.set("AP",_e),pe.set("M",`D:${(0,k.getModificationDate)()}`);const Me=new ee.Dict(S.xref);Me.set("Length",ce.length),Me.set("Subtype",ee.Name.get("Form")),Me.set("Resources",ie.fieldResources),Me.set("BBox",ye);const Ne=[`${ie.ref.num} ${ie.ref.gen} obj\n`];(0,re.writeDict)(pe,Ne,xe),Ne.push("\nendobj\n");const We=[`${Te.num} ${Te.gen} obj\n`];return(0,re.writeDict)(Me,We,Ce),We.push(" stream\n"),We.push(ce),We.push("\nendstream\nendobj\n"),[{ref:ie.ref,data:Ne.join("")},{ref:Te,data:We.join("")}]})()}_getAppearance(S,B,J){var ie=this;return le(function*(){const ce=ie.hasFieldFlag(k.AnnotationFieldFlag.PASSWORD);if(!J||ce)return null;const pe=J[ie.data.id];if(""===pe)return"";const _e=ie.data.rect[3]-ie.data.rect[1],we=ie.data.rect[2]-ie.data.rect[0],De=yield ie._getFontData(S,B),[xe,Ce]=De;let Me=De[2];Me=ie._computeFontSize(xe,Ce,Me,_e);let Ne=xe.descent;isNaN(Ne)&&(Ne=0);const We=2+Math.abs(Ne)*Me,Xe=ie.data.defaultAppearance,Qe=ie.data.textAlignment;return ie.data.comb?ie._getCombAppearance(Xe,pe,we,2,We):ie.data.multiLine?ie._getMultilineAppearance(Xe,pe,xe,Me,we,_e,Qe,2,We):0===Qe||Qe>2?"/Tx BMC q BT "+Xe+` 1 0 0 1 2 ${We} Tm (${(0,k.escapeString)(pe)}) Tj ET Q EMC`:"/Tx BMC q BT "+Xe+` 1 0 0 1 0 0 Tm ${ie._renderText(pe,xe,Me,we,Qe,2,We)} ET Q EMC`})()}_getFontData(S,B){var J=this;return le(function*(){const ie=new H.OperatorList,ce={fontSize:0,font:null,fontName:null,clone(){return this}};return yield S.getOperatorList({stream:new te.StringStream(J.data.defaultAppearance),task:B,resources:J.fieldResources,operatorList:ie,initialState:ce}),[ce.font,ce.fontName,ce.fontSize]})()}_computeFontSize(S,B,J,ie){if(null===J||0===J){const pe=S.charsToGlyphs("M",!0)[0].width/1e3*.7;J=Math.max(1,Math.floor(ie/(1.5*pe)));let ye=new RegExp(`/${B}\\s+[0-9.]+\\s+Tf`);-1===this.data.defaultAppearance.search(ye)&&(ye=new RegExp(`/${B}\\s+Tf`)),this.data.defaultAppearance=this.data.defaultAppearance.replace(ye,`/${B} ${J} Tf`)}return J}_renderText(S,B,J,ie,ce,pe,ye){const Te=B.charsToGlyphs(S),_e=J/1e3;let De,we=0;for(const xe of Te)we+=xe.width*_e;return De=1===ce?(ie-we)/2:2===ce?ie-we-pe:pe,De=De.toFixed(2),`${De} ${ye=ye.toFixed(2)} Td (${(0,k.escapeString)(S)}) Tj`}}class O extends N{constructor(S){super(S),this._hasText=!0;const B=S.dict;(0,k.isString)(this.data.fieldValue)||(this.data.fieldValue="");let J=(0,V.getInheritableProperty)({dict:B,key:"Q"});(!Number.isInteger(J)||J<0||J>2)&&(J=null),this.data.textAlignment=J;let ie=(0,V.getInheritableProperty)({dict:B,key:"MaxLen"});(!Number.isInteger(ie)||ie<0)&&(ie=null),this.data.maxLen=ie,this.data.multiLine=this.hasFieldFlag(k.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(k.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(k.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(k.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(k.AnnotationFieldFlag.FILESELECT)&&null!==this.data.maxLen}_getCombAppearance(S,B,J,ie,ce){const pe=(J/this.data.maxLen).toFixed(2),ye=[];for(const _e of B)ye.push(`(${(0,k.escapeString)(_e)}) Tj`);return"/Tx BMC q BT "+S+` 1 0 0 1 ${ie} ${ce} Tm ${ye.join(` ${pe} 0 Td `)} ET Q EMC`}_getMultilineAppearance(S,B,J,ie,ce,pe,ye,Te,_e){const we=B.split(/\r\n|\r|\n/),De=[],xe=ce-2*Te;for(const Me of we){const Ne=this._splitLine(Me,J,ie,xe);for(const We of Ne)De.push(this._renderText(We,J,ie,ce,ye,0===De.length?Te:0,-ie))}return"/Tx BMC q BT "+S+` 1 0 0 1 0 ${pe} Tm ${De.join("\n")} ET Q EMC`}_splitLine(S,B,J,ie){if(S.length<=1)return[S];const ce=J/1e3,pe=B.charsToGlyphs(" ",!0)[0].width*ce,ye=[];let Te=-1,_e=0,we=0;for(let De=0,xe=S.length;De<xe;De++){const Ce=S.charAt(De);if(" "===Ce)we+pe>ie?(ye.push(S.substring(_e,De)),_e=De,we=pe,Te=-1):(we+=pe,Te=De);else{const Me=B.charsToGlyphs(Ce,!1)[0].width*ce;we+Me>ie?-1!==Te?(ye.push(S.substring(_e,Te+1)),_e=De=Te+1,Te=-1,we=0):(ye.push(S.substring(_e,De)),_e=De,we=Me):we+=Me}}return _e<S.length&&ye.push(S.substring(_e,S.length)),ye}}class M extends N{constructor(S){super(S),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(k.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(k.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(k.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(k.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(k.AnnotationFieldFlag.PUSHBUTTON),this.data.checkBox?this._processCheckBox(S):this.data.radioButton?this._processRadioButton(S):this.data.pushButton?this._processPushButton(S):(0,k.warn)("Invalid field flags for button widget annotation")}getOperatorList(S,B,J,ie){if(this.data.pushButton)return super.getOperatorList(S,B,!1,ie);if(ie){let pe;if(pe=ie[this.data.id]?this.checkedAppearance:this.uncheckedAppearance,pe){const ye=this.appearance;this.appearance=pe;const Te=super.getOperatorList(S,B,J,ie);return this.appearance=ye,Te}return Promise.resolve(new H.OperatorList)}return super.getOperatorList(S,B,J,ie)}save(S,B,J){var ie=()=>super.save,ce=this;return le(function*(){return ce.data.checkBox?ce._saveCheckbox(S,B,J):ce.data.radioButton?ce._saveRadioButton(S,B,J):ie().call(ce,S,B,J)})()}_saveCheckbox(S,B,J){var ie=this;return le(function*(){const pe=J[ie.data.id];if((ie.data.fieldValue&&"Off"!==ie.data.fieldValue)===pe)return null;const ye=S.xref.fetchIfRef(ie.ref);if(!(0,ee.isDict)(ye))return null;const Te=ee.Name.get(pe?ie.data.exportValue:"Off");ye.set("V",Te),ye.set("AS",Te),ye.set("M",`D:${(0,k.getModificationDate)()}`);const _e=S.xref.encrypt;let we=null;_e&&(we=_e.createCipherTransform(ie.ref.num,ie.ref.gen));const De=[`${ie.ref.num} ${ie.ref.gen} obj\n`];return(0,re.writeDict)(ye,De,we),De.push("\nendobj\n"),[{ref:ie.ref,data:De.join("")}]})()}_saveRadioButton(S,B,J){var ie=this;return le(function*(){const pe=J[ie.data.id];if(ie.data.fieldValue===ie.data.buttonValue===pe)return null;const ye=S.xref.fetchIfRef(ie.ref);if(!(0,ee.isDict)(ye))return null;const Te=ee.Name.get(pe?ie.data.buttonValue:"Off");let _e=null;const we=S.xref.encrypt;if(pe)if((0,ee.isRef)(ie.parent)){const Me=S.xref.fetch(ie.parent);let Ne=null;we&&(Ne=we.createCipherTransform(ie.parent.num,ie.parent.gen)),Me.set("V",Te),_e=[`${ie.parent.num} ${ie.parent.gen} obj\n`],(0,re.writeDict)(Me,_e,Ne),_e.push("\nendobj\n")}else(0,ee.isDict)(ie.parent)&&ie.parent.set("V",Te);ye.set("AS",Te),ye.set("M",`D:${(0,k.getModificationDate)()}`);let De=null;we&&(De=we.createCipherTransform(ie.ref.num,ie.ref.gen));const xe=[`${ie.ref.num} ${ie.ref.gen} obj\n`];(0,re.writeDict)(ye,xe,De),xe.push("\nendobj\n");const Ce=[{ref:ie.ref,data:xe.join("")}];return null!==_e&&Ce.push({ref:ie.parent,data:_e.join("")}),Ce})()}_processCheckBox(S){const B=S.dict.get("AP");if(!(0,ee.isDict)(B))return;const J=B.get("N");if(!(0,ee.isDict)(J))return;const ie=J.getKeys();ie.includes("Off")||ie.push("Off"),2===ie.length&&(this.data.exportValue="Off"===ie[0]?ie[1]:ie[0],this.checkedAppearance=J.get(this.data.exportValue),this.uncheckedAppearance=J.get("Off")||null)}_processRadioButton(S){this.data.fieldValue=this.data.buttonValue=null;const B=S.dict.get("Parent");if((0,ee.isDict)(B)&&B.has("V")){const ce=B.get("V");(0,ee.isName)(ce)&&(this.parent=S.dict.getRaw("Parent"),this.data.fieldValue=this._decodeFormValue(ce))}const J=S.dict.get("AP");if(!(0,ee.isDict)(J))return;const ie=J.get("N");if((0,ee.isDict)(ie)){for(const ce of ie.getKeys())if("Off"!==ce){this.data.buttonValue=ce;break}this.checkedAppearance=ie.get(this.data.buttonValue),this.uncheckedAppearance=ie.get("Off")||null}}_processPushButton(S){S.dict.has("A")?fe.Catalog.parseDestDictionary({destDict:S.dict,resultObj:this.data,docBaseUrl:S.pdfManager.docBaseUrl}):(0,k.warn)("Push buttons without action dictionaries are not supported")}}class A extends N{constructor(S){super(S),this.data.options=[];const B=(0,V.getInheritableProperty)({dict:S.dict,key:"Opt"});if(Array.isArray(B)){const J=S.xref;for(let ie=0,ce=B.length;ie<ce;ie++){const pe=J.fetchIfRef(B[ie]),ye=Array.isArray(pe);this.data.options[ie]={exportValue:this._decodeFormValue(ye?J.fetchIfRef(pe[0]):pe),displayValue:this._decodeFormValue(ye?J.fetchIfRef(pe[1]):pe)}}}(0,k.isString)(this.data.fieldValue)?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]),this.data.combo=this.hasFieldFlag(k.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(k.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}}class b extends W{constructor(S){super(S);const J=S.dict;this.data.annotationType=k.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=J.has("Name")?J.get("Name").name:"Note"),J.has("State")?(this.data.state=J.get("State")||null,this.data.stateModel=J.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class q extends ae{constructor(S){super(S),this.data.annotationType=k.AnnotationType.LINK;const B=c(S.dict,this.rectangle);B&&(this.data.quadPoints=B),fe.Catalog.parseDestDictionary({destDict:S.dict,resultObj:this.data,docBaseUrl:S.pdfManager.docBaseUrl})}}class C extends ae{constructor(S){super(S),this.data.annotationType=k.AnnotationType.POPUP;let B=S.dict.get("Parent");if(!B)return void(0,k.warn)("Popup annotation has a missing or invalid parent annotation.");const J=B.get("Subtype");this.data.parentType=(0,ee.isName)(J)?J.name:null;const ie=S.dict.getRaw("Parent");this.data.parentId=(0,ee.isRef)(ie)?ie.toString():null;const ce=B.get("RT");if((0,ee.isName)(ce,k.AnnotationReplyType.GROUP)&&(B=B.get("IRT")),B.has("M")?(this.setModificationDate(B.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,B.has("C")?(this.setColor(B.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const pe=B.get("F");this._isViewable(pe)&&this.setFlags(pe)}this.data.title=(0,k.stringToPDFString)(B.get("T")||""),this.data.contents=(0,k.stringToPDFString)(B.get("Contents")||"")}}class P extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.FREETEXT}}class F extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.LINE,this.data.lineCoordinates=k.Util.normalizeRect(S.dict.getArray("L"))}}class I extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.SQUARE}}class j extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.CIRCLE}}class E extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.POLYLINE;const B=S.dict.getArray("Vertices");this.data.vertices=[];for(let J=0,ie=B.length;J<ie;J+=2)this.data.vertices.push({x:B[J],y:B[J+1]})}}class x extends E{constructor(S){super(S),this.data.annotationType=k.AnnotationType.POLYGON}}class p extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.CARET}}class m extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.INK;const B=S.xref,J=S.dict.getArray("InkList");this.data.inkLists=[];for(let ie=0,ce=J.length;ie<ce;++ie){this.data.inkLists.push([]);for(let pe=0,ye=J[ie].length;pe<ye;pe+=2)this.data.inkLists[ie].push({x:B.fetchIfRef(J[ie][pe]),y:B.fetchIfRef(J[ie][pe+1])})}}}class _ extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.HIGHLIGHT;const B=c(S.dict,this.rectangle);B&&(this.data.quadPoints=B)}}class R extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.UNDERLINE;const B=c(S.dict,this.rectangle);B&&(this.data.quadPoints=B)}}class G extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.SQUIGGLY;const B=c(S.dict,this.rectangle);B&&(this.data.quadPoints=B)}}class K extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.STRIKEOUT;const B=c(S.dict,this.rectangle);B&&(this.data.quadPoints=B)}}class U extends W{constructor(S){super(S),this.data.annotationType=k.AnnotationType.STAMP}}class z extends W{constructor(S){super(S);const B=new fe.FileSpec(S.dict.get("FS"),S.xref);this.data.annotationType=k.AnnotationType.FILEATTACHMENT,this.data.file=B.serializable}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.OperatorList=void 0;var k=y(2),fe=function(){function H(c,$,ae,oe,W){for(var N=c,O=0,M=$.length-1;O<M;O++){var A=$[O];N=N[A]||(N[A]=[])}N[$[$.length-1]]={checkFn:ae,iterateFn:oe,processFn:W}}var re=[];function f(c){this.queue=c,this.state=null,this.context={iCurr:0,fnArray:c.fnArray,argsArray:c.argsArray},this.match=null,this.lastProcessed=0}return H(re,[k.OPS.save,k.OPS.transform,k.OPS.paintInlineImageXObject,k.OPS.restore],null,function($,ae){var oe=$.fnArray,N=(ae-($.iCurr-3))%4;switch(N){case 0:return oe[ae]===k.OPS.save;case 1:return oe[ae]===k.OPS.transform;case 2:return oe[ae]===k.OPS.paintInlineImageXObject;case 3:return oe[ae]===k.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${N}`)},function($,ae){var M=$.fnArray,A=$.argsArray,b=$.iCurr,q=b-3,C=b-2,P=b-1,F=Math.min(Math.floor((ae-q)/4),200);if(F<10)return ae-(ae-q)%4;var m,I=0,j=[],E=0,x=1,p=1;for(m=0;m<F;m++){var _=A[C+(m<<2)],R=A[P+(m<<2)][0];x+R.width>1e3&&(I=Math.max(I,x),p+=E+2,x=0,E=0),j.push({transform:_,x,y:p,w:R.width,h:R.height}),x+=R.width+2,E=Math.max(E,R.height)}var G=Math.max(I,x)+1,K=p+E+1,U=new Uint8ClampedArray(G*K*4),z=G<<2;for(m=0;m<F;m++){var L=A[P+(m<<2)][0].data,S=j[m].w<<2,B=0,J=j[m].x+j[m].y*G<<2;U.set(L.subarray(0,S),J-z);for(var ie=0,ce=j[m].h;ie<ce;ie++)U.set(L.subarray(B,B+S),J),B+=S,J+=z;for(U.set(L.subarray(B-S,B),J);J>=0;)L[J-4]=L[J],L[J-3]=L[J+1],L[J-2]=L[J+2],L[J-1]=L[J+3],L[J+S]=L[J+S-4],L[J+S+1]=L[J+S-3],L[J+S+2]=L[J+S-2],L[J+S+3]=L[J+S-1],J-=z}return M.splice(q,4*F,k.OPS.paintInlineImageXObjectGroup),A.splice(q,4*F,[{width:G,height:K,kind:k.ImageKind.RGBA_32BPP,data:U},j]),q+1}),H(re,[k.OPS.save,k.OPS.transform,k.OPS.paintImageMaskXObject,k.OPS.restore],null,function($,ae){var oe=$.fnArray,N=(ae-($.iCurr-3))%4;switch(N){case 0:return oe[ae]===k.OPS.save;case 1:return oe[ae]===k.OPS.transform;case 2:return oe[ae]===k.OPS.paintImageMaskXObject;case 3:return oe[ae]===k.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${N}`)},function($,ae){var O=$.fnArray,M=$.argsArray,A=$.iCurr,b=A-3,q=A-2,C=A-1,P=Math.floor((ae-b)/4);if((P=function te(c,$,ae,oe){for(var W=c+2,N=0;N<$;N++){var O=oe[W+4*N],M=1===O.length&&O[0];if(!M||1!==M.width||1!==M.height||M.data.length&&(1!==M.data.length||0!==M.data[0]))break;ae[W+4*N]=k.OPS.paintSolidColorImageMask}return $-N}(b,P,O,M))<10)return ae-(ae-b)%4;var F,j,E,I=!1,x=M[C][0];const p=M[q][0],m=M[q][1],_=M[q][2],R=M[q][3];if(m===_){I=!0,j=q+4;var G=C+4;for(F=1;F<P;F++,j+=4,G+=4)if(E=M[j],M[G][0]!==x||E[0]!==p||E[1]!==m||E[2]!==_||E[3]!==R){F<10?I=!1:P=F;break}}if(I){P=Math.min(P,1e3);var K=new Float32Array(2*P);for(j=q,F=0;F<P;F++,j+=4)K[F<<1]=(E=M[j])[4],K[1+(F<<1)]=E[5];O.splice(b,4*P,k.OPS.paintImageMaskXObjectRepeat),M.splice(b,4*P,[x,p,m,_,R,K])}else{P=Math.min(P,100);var U=[];for(F=0;F<P;F++){var z=M[C+(F<<2)][0];U.push({data:z.data,width:z.width,height:z.height,transform:E=M[q+(F<<2)]})}O.splice(b,4*P,k.OPS.paintImageMaskXObjectGroup),M.splice(b,4*P,[U])}return b+1}),H(re,[k.OPS.save,k.OPS.transform,k.OPS.paintImageXObject,k.OPS.restore],function(c){var $=c.argsArray,ae=c.iCurr-2;return 0===$[ae][1]&&0===$[ae][2]},function($,ae){var oe=$.fnArray,W=$.argsArray,O=(ae-($.iCurr-3))%4;switch(O){case 0:return oe[ae]===k.OPS.save;case 1:if(oe[ae]!==k.OPS.transform)return!1;var M=$.iCurr-2;return!(W[ae][0]!==W[M][0]||0!==W[ae][1]||0!==W[ae][2]||W[ae][3]!==W[M][3]);case 2:return oe[ae]===k.OPS.paintImageXObject&&W[ae][0]===W[$.iCurr-1][0];case 3:return oe[ae]===k.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${O}`)},function(c,$){var W=c.fnArray,N=c.argsArray,O=c.iCurr,M=O-3,A=O-2,q=N[O-1][0],C=N[A][0],P=N[A][3],F=Math.min(Math.floor(($-M)/4),1e3);if(F<3)return $-($-M)%4;for(var I=new Float32Array(2*F),j=A,E=0;E<F;E++,j+=4){var x=N[j];I[E<<1]=x[4],I[1+(E<<1)]=x[5]}var p=[q,C,P,I];return W.splice(M,4*F,k.OPS.paintImageXObjectRepeat),N.splice(M,4*F,p),M+1}),H(re,[k.OPS.beginText,k.OPS.setFont,k.OPS.setTextMatrix,k.OPS.showText,k.OPS.endText],null,function($,ae){var oe=$.fnArray,W=$.argsArray,O=(ae-($.iCurr-4))%5;switch(O){case 0:return oe[ae]===k.OPS.beginText;case 1:return oe[ae]===k.OPS.setFont;case 2:return oe[ae]===k.OPS.setTextMatrix;case 3:if(oe[ae]!==k.OPS.showText)return!1;var M=$.iCurr-3;return!(W[ae][0]!==W[M][0]||W[ae][1]!==W[M][1]);case 4:return oe[ae]===k.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${O}`)},function(c,$){var W=c.fnArray,N=c.argsArray,O=c.iCurr,M=O-4,A=O-3,b=O-2,q=O-1,C=O,P=N[A][0],F=N[A][1],I=Math.min(Math.floor(($-M)/5),1e3);if(I<3)return $-($-M)%5;var j=M;M>=4&&W[M-4]===W[A]&&W[M-3]===W[b]&&W[M-2]===W[q]&&W[M-1]===W[C]&&N[M-4][0]===P&&N[M-4][1]===F&&(I++,j-=5);for(var E=j+4,x=1;x<I;x++)W.splice(E,3),N.splice(E,3),E+=2;return E+1}),f.prototype={_optimize(){const c=this.queue.fnArray;let $=this.lastProcessed,ae=c.length,oe=this.state,W=this.match;if(!oe&&!W&&$+1===ae&&!re[c[$]])return void(this.lastProcessed=ae);const N=this.context;for(;$<ae;){if(W){if((0,W.iterateFn)(N,$)){$++;continue}if($=(0,W.processFn)(N,$+1),ae=c.length,W=null,oe=null,$>=ae)break}oe=(oe||re)[c[$]],oe&&!Array.isArray(oe)?(N.iCurr=$,$++,!oe.checkFn||(0,oe.checkFn)(N)?(W=oe,oe=null):oe=null):$++}this.state=oe,this.match=W,this.lastProcessed=$},push(c,$){this.queue.fnArray.push(c),this.queue.argsArray.push($),this._optimize()},flush(){for(;this.match;)this.lastProcessed=(0,this.match.processFn)(this.context,this.queue.fnArray.length),this.match=null,this.state=null,this._optimize()},reset(){this.state=null,this.match=null,this.lastProcessed=0}},f}(),ee=function(){function H(te){this.queue=te}return H.prototype={push(te,re){this.queue.fnArray.push(te),this.queue.argsArray.push(re)},flush(){},reset(){}},H}(),e=function(){function re(f,c){this._streamSink=c,this.fnArray=[],this.argsArray=[],this.optimizer=c&&"oplist"!==f?new fe(this):new ee(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=c?null:Promise.resolve()}return re.prototype={get length(){return this.argsArray.length},get ready(){return this._resolved||this._streamSink.ready},get totalLength(){return this._totalLength+this.length},addOp(f,c){this.optimizer.push(f,c),this.weight++,this._streamSink&&(this.weight>=1e3||this.weight>=995&&(f===k.OPS.restore||f===k.OPS.endText))&&this.flush()},addDependency(f){this.dependencies.has(f)||(this.dependencies.add(f),this.addOp(k.OPS.dependency,[f]))},addDependencies(f){for(const c of f)this.addDependency(c)},addOpList(f){if(f instanceof re){for(const ae of f.dependencies)this.dependencies.add(ae);for(var c=0,$=f.length;c<$;c++)this.addOp(f.fnArray[c],f.argsArray[c])}else(0,k.warn)('addOpList - ignoring invalid "opList" parameter.')},getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}},get _transfers(){const f=[],{fnArray:c,argsArray:$,length:ae}=this;for(let oe=0;oe<ae;oe++)switch(c[oe]){case k.OPS.paintInlineImageXObject:case k.OPS.paintInlineImageXObjectGroup:case k.OPS.paintImageMaskXObject:const W=$[oe][0];W.cached||f.push(W.data.buffer)}return f},flush(f=!1){this.optimizer.flush();const c=this.length;this._totalLength+=c,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:f,length:c},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}},re}();se.OperatorList=e},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.writeDict=e,se.incrementalUpdate=function ae(oe,W,N){const O=new fe.Dict(null),M=W.newRef;let A,b;const q=oe[oe.length-1];10===q||13===q?(A=[],b=oe.length):(A=["\n"],b=oe.length+1),O.set("Size",M.num+1),O.set("Prev",W.startXRef),O.set("Type",fe.Name.get("XRef")),null!==W.rootRef&&O.set("Root",W.rootRef),null!==W.infoRef&&O.set("Info",W.infoRef),null!==W.encrypt&&O.set("Encrypt",W.encrypt),N.push({ref:M,data:""}),N=N.sort((G,K)=>G.ref.num-K.ref.num);const C=[[0,1,65535]],P=[0,1];let F=0;for(const{ref:G,data:K}of N)F=Math.max(F,b),C.push([1,b,Math.min(G.gen,65535)]),b+=K.length,P.push(G.num),P.push(1),A.push(K);if(O.set("Index",P),0!==W.fileIds.length){const G=function $(oe,W){const N=Math.floor(Date.now()/1e3),O=W.filename||"",M=[N.toString(),O,oe.toString()];let A=M.reduce((C,P)=>C+P.length,0);for(const C of Object.values(W.info))M.push(C),A+=C.length;const b=new Uint8Array(A);let q=0;for(const C of M)c(C,q,b),q+=C.length;return(0,k.bytesToString)((0,ee.calculateMD5)(b))}(b,W);O.set("ID",[W.fileIds[0],G])}const j=[1,Math.ceil(Math.log2(F)/8),2],x=(j[0]+j[1]+j[2])*C.length;O.set("W",j),O.set("Length",x),A.push(`${M.num} ${M.gen} obj\n`),e(O,A,null),A.push(" stream\n");const p=A.reduce((G,K)=>G+K.length,0),m=`\nendstream\nendobj\nstartxref\n${b}\n%%EOF\n`,_=new Uint8Array(oe.length+p+x+m.length);_.set(oe);let R=oe.length;for(const G of A)c(G,R,_),R+=G.length;for(const[G,K,U]of C)R=f(G,j[0],R,_),R=f(K,j[1],R,_),R=f(U,j[2],R,_);return c(m,R,_),_};var k=y(2),fe=y(5),ee=y(22);function e(oe,W,N){W.push("<<");for(const O of oe.getKeys())W.push(` /${O} `),re(oe.getRaw(O),W,N);W.push(">>")}function re(oe,W,N){(0,fe.isName)(oe)?W.push(`/${oe.name}`):(0,fe.isRef)(oe)?W.push(`${oe.num} ${oe.gen} R`):Array.isArray(oe)?function H(oe,W,N){W.push("[");let O=!0;for(const M of oe)O?O=!1:W.push(" "),re(M,W,N);W.push("]")}(oe,W,N):"string"==typeof oe?(null!==N&&(oe=N.encryptString(oe)),W.push(`(${(0,k.escapeString)(oe)})`)):"number"==typeof oe?W.push(function te(oe){if(Number.isInteger(oe))return oe.toString();const W=Math.round(100*oe);return W%100==0?(W/100).toString():oe.toFixed(W%10==0?1:2)}(oe)):(0,fe.isDict)(oe)?e(oe,W,N):(0,fe.isStream)(oe)&&function V(oe,W,N){e(oe.dict,W,N),W.push(" stream\n");let O=(0,k.bytesToString)(oe.getBytes());null!==N&&(O=N.encryptString(O)),W.push(O),W.push("\nendstream\n")}(oe,W,N)}function f(oe,W,N,O){for(let M=W+N-1;M>N-1;M--)O[M]=255&oe,oe>>=8;return N+W}function c(oe,W,N){for(let O=0,M=oe.length;O<M;O++)N[W+O]=255&oe.charCodeAt(O)}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.PartialEvaluator=void 0;var k=y(2),fe=y(29),ee=y(5),e=y(30),V=y(33),H=y(8),te=y(36),re=y(35),f=y(39),c=y(40),$=y(11),ae=y(24),oe=y(42),W=y(23),N=y(12),O=y(34),M=y(43),A=y(44),b=y(26),q=y(45);const C=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1}),P_TILING=1,P_SHADING=2,F=Promise.resolve();function I(G,K=!1){if(Array.isArray(G)){for(let U=0,z=G.length;U<z;U++){const L=I(G[U],!0);if(L)return L}return(0,k.warn)(`Unsupported blend mode Array: ${G}`),"source-over"}if(!(0,ee.isName)(G))return K?null:"source-over";switch(G.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return K?null:((0,k.warn)(`Unsupported blend mode: ${G.name}`),"source-over")}class j{static get TIME_SLOT_DURATION_MS(){return(0,k.shadow)(this,"TIME_SLOT_DURATION_MS",20)}static get CHECK_TIME_EVERY(){return(0,k.shadow)(this,"CHECK_TIME_EVERY",100)}constructor(){this.reset()}check(){return!(++this.checked<j.CHECK_TIME_EVERY)&&(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+j.TIME_SLOT_DURATION_MS,this.checked=0}}class E{constructor({xref:K,handler:U,pageIndex:z,idFactory:L,fontCache:S,builtInCMapCache:B,globalImageCache:J,options:ie=null}){this.xref=K,this.handler=U,this.pageIndex=z,this.idFactory=L,this.fontCache=S,this.builtInCMapCache=B,this.globalImageCache=J,this.options=ie||C,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){const K=new c.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,k.shadow)(this,"_pdfFunctionFactory",K)}clone(K=C){var U=Object.create(this);return U.options=K,U}hasBlendModes(K){if(!(K instanceof ee.Dict))return!1;const U=new ee.RefSet;K.objId&&U.put(K.objId);for(var z=[K],L=this.xref;z.length;){var S=z.shift(),B=S.get("ExtGState");if(B instanceof ee.Dict)for(let ce of B.getRawValues()){if(ce instanceof ee.Ref){if(U.has(ce))continue;try{ce=L.fetch(ce)}catch(ye){if(ye instanceof H.MissingDataException)throw ye;U.put(ce),(0,k.info)(`hasBlendModes - ignoring ExtGState: "${ye}".`);continue}}if(!(ce instanceof ee.Dict))continue;ce.objId&&U.put(ce.objId);const pe=ce.get("BM");if(pe instanceof ee.Name){if("Normal"!==pe.name)return!0}else if(void 0!==pe&&Array.isArray(pe))for(const ye of pe)if(ye instanceof ee.Name&&"Normal"!==ye.name)return!0}var J=S.get("XObject");if(J instanceof ee.Dict)for(let ce of J.getRawValues()){if(ce instanceof ee.Ref){if(U.has(ce))continue;try{ce=L.fetch(ce)}catch(pe){if(pe instanceof H.MissingDataException)throw pe;U.put(ce),(0,k.info)(`hasBlendModes - ignoring XObject: "${pe}".`);continue}}if((0,ee.isStream)(ce)){ce.dict.objId&&U.put(ce.dict.objId);var ie=ce.dict.get("Resources");ie instanceof ee.Dict&&(ie.objId&&U.has(ie.objId)||(z.push(ie),ie.objId&&U.put(ie.objId)))}}}return!1}fetchBuiltInCMap(K){var U=this;return le(function*(){const z=U.builtInCMapCache.get(K);if(z)return z;const S=U.handler.sendWithStream("FetchBuiltInCMap",{name:K}).getReader(),B=yield new Promise(function(J,ie){!function ce(){S.read().then(function({value:pe,done:ye}){ye||(J(pe),ce())},ie)}()});return B.compressionType!==k.CMapCompressionType.NONE&&U.builtInCMapCache.set(K,B),B})()}buildFormXObject(K,U,z,L,S,B,J){var ie=this;return le(function*(){var ce=U.dict,pe=ce.getArray("Matrix"),ye=ce.getArray("BBox");ye=Array.isArray(ye)&&4===ye.length?k.Util.normalizeRect(ye):null;let Te=null;ce.has("OC")&&(Te=yield ie.parseMarkedContentProps(ce.get("OC"),K),L.addOp(k.OPS.beginMarkedContentProps,["OC",Te]));var _e=ce.get("Group");if(_e){var we={matrix:pe,bbox:ye,smask:z,isolated:!1,knockout:!1},De=_e.get("S"),xe=null;if((0,ee.isName)(De,"Transparency")&&(we.isolated=_e.get("I")||!1,we.knockout=_e.get("K")||!1,_e.has("CS"))){const Ce=_e.getRaw("CS");xe=W.ColorSpace.getCached(Ce,ie.xref,J)||(yield ie.parseColorSpace({cs:Ce,resources:K,localColorSpaceCache:J}))}z&&z.backdrop&&(z.backdrop=(xe=xe||W.ColorSpace.singletons.rgb).getRgb(z.backdrop,0)),L.addOp(k.OPS.beginGroup,[we])}return L.addOp(k.OPS.paintFormXObjectBegin,[pe,ye]),ie.getOperatorList({stream:U,task:S,resources:ce.get("Resources")||K,operatorList:L,initialState:B}).then(function(){L.addOp(k.OPS.paintFormXObjectEnd,[]),_e&&L.addOp(k.OPS.endGroup,[we]),Te&&L.addOp(k.OPS.endMarkedContent,[])})})()}_sendImgData(K,U,z=!1){const L=U?[U.data.buffer]:null;return this.parsingType3Font||z?this.handler.send("commonobj",[K,"Image",U],L):this.handler.send("obj",[K,this.pageIndex,"Image",U],L)}buildPaintImageXObject({resources:K,image:U,isInline:z=!1,operatorList:L,cacheKey:S,localImageCache:B,localColorSpaceCache:J}){var ie=this;return le(function*(){var ce=U.dict;const pe=ce.objId;var ye=ce.get("Width","W"),Te=ce.get("Height","H");if(!(ye&&(0,k.isNum)(ye)&&Te&&(0,k.isNum)(Te)))return void(0,k.warn)("Image dimensions are missing, or not numbers.");var De,xe,_e=ie.options.maxImageSize;if(-1!==_e&&ye*Te>_e)return void(0,k.warn)("Image exceeded maximum allowed size and was removed.");if(ce.get("ImageMask","IM")){var Ce=ce.get("Width","W"),Me=ce.get("Height","H"),We=U.getBytes((Ce+7>>3)*Me,!0),Xe=ce.getArray("Decode","D");return(De=q.PDFImage.createMask({imgArray:We,width:Ce,height:Me,imageIsFromDecodeStream:U instanceof N.DecodeStream,inverseDecode:!!Xe&&Xe[0]>0})).cached=!!S,L.addOp(k.OPS.paintImageMaskXObject,xe=[De]),void(S&&B.set(S,pe,{fn:k.OPS.paintImageMaskXObject,args:xe}))}var Qe=ce.get("SMask","SM")||!1,Ye=ce.get("Mask")||!1;if(z&&!Qe&&!Ye&&ye+Te<200)return De=new q.PDFImage({xref:ie.xref,res:K,image:U,isInline:z,pdfFunctionFactory:ie._pdfFunctionFactory,localColorSpaceCache:J}).createImageData(!0),void L.addOp(k.OPS.paintInlineImageXObject,[De]);let He=`img_${ie.idFactory.createObjId()}`,it=!1;ie.parsingType3Font?He=`${ie.idFactory.getDocId()}_type3_${He}`:pe&&(it=ie.globalImageCache.shouldCache(pe,ie.pageIndex),it&&(He=`${ie.idFactory.getDocId()}_${He}`)),L.addDependency(He),xe=[He,ye,Te],q.PDFImage.buildImage({xref:ie.xref,res:K,image:U,isInline:z,pdfFunctionFactory:ie._pdfFunctionFactory,localColorSpaceCache:J}).then(dt=>(De=dt.createImageData(!1),ie._sendImgData(He,De,it))).catch(dt=>((0,k.warn)(`Unable to decode image "${He}": "${dt}".`),ie._sendImgData(He,null,it))),L.addOp(k.OPS.paintImageXObject,xe),S&&(B.set(S,pe,{fn:k.OPS.paintImageXObject,args:xe}),pe&&((0,k.assert)(!z,"Cannot cache an inline image globally."),ie.globalImageCache.addPageIndex(pe,ie.pageIndex),it&&ie.globalImageCache.setData(pe,{objId:He,fn:k.OPS.paintImageXObject,args:xe})))})()}handleSMask(K,U,z,L,S,B){var J=K.get("G"),ie={subtype:K.get("S").name,backdrop:K.get("BC")},ce=K.get("TR");if((0,c.isPDFFunction)(ce)){const _e=this._pdfFunctionFactory.create(ce);for(var pe=new Uint8Array(256),ye=new Float32Array(1),Te=0;Te<256;Te++)ye[0]=Te/255,_e(ye,0,ye,0),pe[Te]=255*ye[0]|0;ie.transferMap=pe}return this.buildFormXObject(U,J,ie,z,L,S.state.clone(),B)}handleTransferFunction(K){let U;if(Array.isArray(K))U=K;else{if(!(0,c.isPDFFunction)(K))return null;U=[K]}const z=[];let L=0,S=0;for(const B of U){const J=this.xref.fetchIfRef(B);if(L++,(0,ee.isName)(J,"Identity")){z.push(null);continue}if(!(0,c.isPDFFunction)(J))return null;const ie=this._pdfFunctionFactory.create(J),ce=new Uint8Array(256),pe=new Float32Array(1);for(let ye=0;ye<256;ye++)pe[0]=ye/255,ie(pe,0,pe,0),ce[ye]=255*pe[0]|0;z.push(ce),S++}return 1!==L&&4!==L||0===S?null:z}handleTilingType(K,U,z,L,S,B,J){const ie=new b.OperatorList,ce=ee.Dict.merge({xref:this.xref,dictArray:[S.get("Resources"),z]});return this.getOperatorList({stream:L,task:J,resources:ce,operatorList:ie}).then(function(){return(0,f.getTilingPatternIR)({fnArray:ie.fnArray,argsArray:ie.argsArray},S,U)}).then(function(pe){B.addDependencies(ie.dependencies),B.addOp(K,pe)},pe=>{if(!(pe instanceof k.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorTilingPattern}),void(0,k.warn)(`handleTilingType - ignoring pattern: "${pe}".`);throw pe}})}handleSetFont(K,U,z,L,S,B){var J,ie=0;return U&&(U=U.slice(),J=U[0].name,ie=U[1]),this.loadFont(J,z,K).then(ce=>ce.font.isType3Font?ce.loadType3Data(this,K,S).then(function(){return L.addDependencies(ce.type3Dependencies),ce}).catch(pe=>(this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorFontLoadType3}),new x({loadedName:"g_font_error",font:new e.ErrorFont(`Type3 font load error: ${pe}`),dict:ce.font,extraProperties:this.options.fontExtraProperties}))):ce).then(ce=>(B.font=ce.font,B.fontSize=ie,B.fontName=J,ce.send(this.handler),ce.loadedName))}handleText(K,U){const z=U.font,L=z.charsToGlyphs(K);return z.data&&(U.textRenderingMode&k.TextRenderingMode.ADD_TO_PATH_FLAG||"Pattern"===U.fillColorSpace.name||z.disableFontFace||this.options.disableFontFace)&&E.buildFontPaths(z,L,this.handler),L}ensureStateFont(K){if(K.font)return;const U=new k.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorFontState}),void(0,k.warn)(`ensureStateFont: "${U}".`);throw U}setGState({resources:K,gState:U,operatorList:z,cacheKey:L,task:S,stateManager:B,localGStateCache:J,localColorSpaceCache:ie}){var ce=this;return le(function*(){const pe=U.objId;let ye=!0;for(var Te=[],_e=U.getKeys(),we=Promise.resolve(),De=0,xe=_e.length;De<xe;De++){const Ce=_e[De],Me=U.get(Ce);switch(Ce){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":Te.push([Ce,Me]);break;case"Font":ye=!1,we=we.then(()=>ce.handleSetFont(K,null,Me[0],z,S,B.state).then(function(We){z.addDependency(We),Te.push([Ce,[We,Me[1]]])}));break;case"BM":Te.push([Ce,I(Me)]);break;case"SMask":if((0,ee.isName)(Me,"None")){Te.push([Ce,!1]);break}(0,ee.isDict)(Me)?(ye=!1,we=we.then(()=>ce.handleSMask(Me,K,z,S,B,ie)),Te.push([Ce,!0])):(0,k.warn)("Unsupported SMask type");break;case"TR":const Ne=ce.handleTransferFunction(Me);Te.push([Ce,Ne]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,k.info)("graphic state operator "+Ce);break;default:(0,k.info)("Unknown graphic state operator "+Ce)}}return we.then(function(){Te.length>0&&z.addOp(k.OPS.setGState,[Te]),ye&&J.set(L,pe,Te)})})()}loadFont(K,U,z){const L=()=>Promise.resolve(new x({loadedName:"g_font_error",font:new e.ErrorFont(`Font "${K}" is not available.`),dict:U,extraProperties:this.options.fontExtraProperties}));var S,B=this.xref;if(U){if(!(0,ee.isRef)(U))throw new k.FormatError('The "font" object should be a reference.');S=U}else{var J=z.get("Font");J&&(S=J.getRaw(K))}if(!S){const Ce=`Font "${K||U&&U.toString()}" is not available`;if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,k.warn)(`${Ce}.`),L();this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorFontMissing}),(0,k.warn)(`${Ce} -- attempting to fallback to a default font.`),S=E.fallbackFontDict}if(this.fontCache.has(S))return this.fontCache.get(S);if(U=B.fetchIfRef(S),!(0,ee.isDict)(U))return L();if(U.translated)return U.translated;var ie=(0,k.createPromiseCapability)(),ce=this.preEvaluateFont(U);const{descriptor:pe,hash:ye}=ce;var _e,xe,Te=(0,ee.isRef)(S);if(Te&&(_e=`f${S.toString()}`),ye&&(0,ee.isDict)(pe)){pe.fontAliases||(pe.fontAliases=Object.create(null));var we=pe.fontAliases;if(we[ye]){var De=we[ye].aliasRef;if(Te&&De&&this.fontCache.has(De))return this.fontCache.putAlias(S,De),this.fontCache.get(S)}else we[ye]={fontID:this.idFactory.createFontId()};Te&&(we[ye].aliasRef=S),_e=we[ye].fontID}Te?this.fontCache.put(S,ie.promise):(_e||(_e=this.idFactory.createFontId()),this.fontCache.put(`id_${_e}`,ie.promise)),(0,k.assert)(_e&&_e.startsWith("f"),'The "fontID" must be (correctly) defined.'),U.loadedName=`${this.idFactory.getDocId()}_${_e}`,U.translated=ie.promise;try{xe=this.translateFont(ce)}catch(Ce){xe=Promise.reject(Ce)}return xe.then(Ce=>{void 0!==Ce.fontType&&(B.stats.fontTypes[Ce.fontType]=!0),ie.resolve(new x({loadedName:U.loadedName,font:Ce,dict:U,extraProperties:this.options.fontExtraProperties}))}).catch(Ce=>{this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorFontTranslate});try{var Me=pe&&pe.get("FontFile3"),Ne=Me&&Me.get("Subtype"),We=(0,e.getFontType)(ce.type,Ne&&Ne.name);B.stats.fontTypes[We]=!0}catch{}ie.resolve(new x({loadedName:U.loadedName,font:new e.ErrorFont(Ce instanceof Error?Ce.message:Ce),dict:U,extraProperties:this.options.fontExtraProperties}))}),ie.promise}buildPath(K,U,z,L=!1){var S=K.length-1;if(z||(z=[]),S<0||K.fnArray[S]!==k.OPS.constructPath)L&&((0,k.warn)(`Encountered path operator "${U}" inside of a text object.`),K.addOp(k.OPS.save,null)),K.addOp(k.OPS.constructPath,[[U],z]),L&&K.addOp(k.OPS.restore,null);else{var B=K.argsArray[S];B[0].push(U),Array.prototype.push.apply(B[1],z)}}parseColorSpace({cs:K,resources:U,localColorSpaceCache:z}){return W.ColorSpace.parseAsync({cs:K,xref:this.xref,resources:U,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:z}).catch(L=>{if(L instanceof k.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorColorSpace}),(0,k.warn)(`parseColorSpace - ignoring ColorSpace: "${L}".`),null;throw L})}handleColorN(K,U,z,L,S,B,J,ie){var ce=this;return le(function*(){var ye,pe=z[z.length-1];if((0,ee.isName)(pe)&&(ye=S.get(pe.name))){var Te=(0,ee.isStream)(ye)?ye.dict:ye,_e=Te.get("PatternType");if(_e===P_TILING){var we=L.base?L.base.getRgb(z,0):null;return ce.handleTilingType(U,we,B,ye,Te,K,J)}if(_e===P_SHADING){var De=Te.get("Shading"),xe=Te.getArray("Matrix");return ye=f.Pattern.parseShading(De,xe,ce.xref,B,ce.handler,ce._pdfFunctionFactory,ie),void K.addOp(U,ye.getIR())}throw new k.FormatError(`Unknown PatternType: ${_e}`)}throw new k.FormatError(`Unknown PatternName: ${pe}`)})()}parseMarkedContentProps(K,U){return le(function*(){let z;if((0,ee.isName)(K))z=U.get("Properties").get(K.name);else{if(!(0,ee.isDict)(K))throw new k.FormatError("Optional content properties malformed.");z=K}const L=z.get("Type").name;if("OCG"===L)return{type:L,id:z.objId};if("OCMD"===L){const S=z.get("OCGs");if(Array.isArray(S)||(0,ee.isDict)(S)){const B=[];Array.isArray(S)?z.get("OCGs").forEach(ie=>{B.push(ie.toString())}):B.push(S.objId);let J=null;return z.get("VE")&&(J=!0),{type:L,ids:B,policy:(0,ee.isName)(z.get("P"))?z.get("P").name:null,expression:J}}if((0,ee.isRef)(S))return{type:L,id:S.toString()}}return null})()}getOperatorList({stream:K,task:U,resources:z,operatorList:L,initialState:S=null}){if(z=z||ee.Dict.empty,S=S||new _,!L)throw new Error('getOperatorList: missing "operatorList" parameter');var B=this,J=this.xref;let ie=!1;const ce=new ae.LocalImageCache,pe=new ae.LocalColorSpaceCache,ye=new ae.LocalGStateCache;var Te=z.get("XObject")||ee.Dict.empty,_e=z.get("Pattern")||ee.Dict.empty,we=new p(S),De=new R(K,J,we),xe=new j;function Ce(Me){for(var Ne=0,We=De.savedStatesDepth;Ne<We;Ne++)L.addOp(k.OPS.restore,[])}return new Promise(function Me(Ne,We){const Xe=function(Pe){Promise.all([Pe,L.ready]).then(function(){try{Me(Ne,We)}catch(Fe){We(Fe)}},We)};U.ensureNotTerminated(),xe.reset();for(var Qe,Je,He,it,dt,Ye={};!(Qe=xe.check())&&(Ye.args=null,De.read(Ye));){var pt=Ye.args,Dt=Ye.fn;switch(0|Dt){case k.OPS.paintXObject:if(dt=pt[0].name){const Pe=ce.getByName(dt);if(Pe){L.addOp(Pe.fn,Pe.args),pt=null;continue}}return void Xe(new Promise(function(Pe,Fe){if(!dt)throw new k.FormatError("XObject must be referred to by name.");let $e=Te.getRaw(dt);if($e instanceof ee.Ref){const lt=ce.getByRef($e);if(lt)return L.addOp(lt.fn,lt.args),void Pe();const bt=B.globalImageCache.getData($e,B.pageIndex);if(bt)return L.addDependency(bt.objId),L.addOp(bt.fn,bt.args),void Pe();$e=J.fetch($e)}if(!(0,ee.isStream)($e))throw new k.FormatError("XObject should be a stream");const at=$e.dict.get("Subtype");if(!(0,ee.isName)(at))throw new k.FormatError("XObject should have a Name subtype");if("Form"===at.name)return we.save(),void B.buildFormXObject(z,$e,null,L,U,we.state.clone(),pe).then(function(){we.restore(),Pe()},Fe);if("Image"!==at.name){if("PS"!==at.name)throw new k.FormatError(`Unhandled XObject subtype ${at.name}`);(0,k.info)("Ignored XObject subtype PS"),Pe()}else B.buildPaintImageXObject({resources:z,image:$e,operatorList:L,cacheKey:dt,localImageCache:ce,localColorSpaceCache:pe}).then(Pe,Fe)}).catch(function(Pe){if(!(Pe instanceof k.AbortException)){if(B.options.ignoreErrors)return B.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorXObject}),void(0,k.warn)(`getOperatorList - ignoring XObject: "${Pe}".`);throw Pe}}));case k.OPS.setFont:var et=pt[1];return void Xe(B.handleSetFont(z,pt,null,L,U,we.state).then(function(Pe){L.addDependency(Pe),L.addOp(k.OPS.setFont,[Pe,et])}));case k.OPS.beginText:ie=!0;break;case k.OPS.endText:ie=!1;break;case k.OPS.endInlineImage:var st=pt[0].cacheKey;if(st){const Pe=ce.getByName(st);if(Pe){L.addOp(Pe.fn,Pe.args),pt=null;continue}}return void Xe(B.buildPaintImageXObject({resources:z,image:pt[0],isInline:!0,operatorList:L,cacheKey:st,localImageCache:ce,localColorSpaceCache:pe}));case k.OPS.showText:if(!we.state.font){B.ensureStateFont(we.state);continue}pt[0]=B.handleText(pt[0],we.state);break;case k.OPS.showSpacedText:if(!we.state.font){B.ensureStateFont(we.state);continue}var Ge=pt[0],Ze=[],je=Ge.length,Ue=we.state;for(Je=0;Je<je;++Je){var ct=Ge[Je];(0,k.isString)(ct)?Array.prototype.push.apply(Ze,B.handleText(ct,Ue)):(0,k.isNum)(ct)&&Ze.push(ct)}pt[0]=Ze,Dt=k.OPS.showText;break;case k.OPS.nextLineShowText:if(!we.state.font){B.ensureStateFont(we.state);continue}L.addOp(k.OPS.nextLine),pt[0]=B.handleText(pt[0],we.state),Dt=k.OPS.showText;break;case k.OPS.nextLineSetSpacingShowText:if(!we.state.font){B.ensureStateFont(we.state);continue}L.addOp(k.OPS.nextLine),L.addOp(k.OPS.setWordSpacing,[pt.shift()]),L.addOp(k.OPS.setCharSpacing,[pt.shift()]),pt[0]=B.handleText(pt[0],we.state),Dt=k.OPS.showText;break;case k.OPS.setTextRenderingMode:we.state.textRenderingMode=pt[0];break;case k.OPS.setFillColorSpace:{const Pe=W.ColorSpace.getCached(pt[0],J,pe);if(Pe){we.state.fillColorSpace=Pe;continue}return void Xe(B.parseColorSpace({cs:pt[0],resources:z,localColorSpaceCache:pe}).then(function(Fe){Fe&&(we.state.fillColorSpace=Fe)}))}case k.OPS.setStrokeColorSpace:{const Pe=W.ColorSpace.getCached(pt[0],J,pe);if(Pe){we.state.strokeColorSpace=Pe;continue}return void Xe(B.parseColorSpace({cs:pt[0],resources:z,localColorSpaceCache:pe}).then(function(Fe){Fe&&(we.state.strokeColorSpace=Fe)}))}case k.OPS.setFillColor:pt=(it=we.state.fillColorSpace).getRgb(pt,0),Dt=k.OPS.setFillRGBColor;break;case k.OPS.setStrokeColor:pt=(it=we.state.strokeColorSpace).getRgb(pt,0),Dt=k.OPS.setStrokeRGBColor;break;case k.OPS.setFillGray:we.state.fillColorSpace=W.ColorSpace.singletons.gray,pt=W.ColorSpace.singletons.gray.getRgb(pt,0),Dt=k.OPS.setFillRGBColor;break;case k.OPS.setStrokeGray:we.state.strokeColorSpace=W.ColorSpace.singletons.gray,pt=W.ColorSpace.singletons.gray.getRgb(pt,0),Dt=k.OPS.setStrokeRGBColor;break;case k.OPS.setFillCMYKColor:we.state.fillColorSpace=W.ColorSpace.singletons.cmyk,pt=W.ColorSpace.singletons.cmyk.getRgb(pt,0),Dt=k.OPS.setFillRGBColor;break;case k.OPS.setStrokeCMYKColor:we.state.strokeColorSpace=W.ColorSpace.singletons.cmyk,pt=W.ColorSpace.singletons.cmyk.getRgb(pt,0),Dt=k.OPS.setStrokeRGBColor;break;case k.OPS.setFillRGBColor:we.state.fillColorSpace=W.ColorSpace.singletons.rgb,pt=W.ColorSpace.singletons.rgb.getRgb(pt,0);break;case k.OPS.setStrokeRGBColor:we.state.strokeColorSpace=W.ColorSpace.singletons.rgb,pt=W.ColorSpace.singletons.rgb.getRgb(pt,0);break;case k.OPS.setFillColorN:if("Pattern"===(it=we.state.fillColorSpace).name)return void Xe(B.handleColorN(L,k.OPS.setFillColorN,pt,it,_e,z,U,pe));pt=it.getRgb(pt,0),Dt=k.OPS.setFillRGBColor;break;case k.OPS.setStrokeColorN:if("Pattern"===(it=we.state.strokeColorSpace).name)return void Xe(B.handleColorN(L,k.OPS.setStrokeColorN,pt,it,_e,z,U,pe));pt=it.getRgb(pt,0),Dt=k.OPS.setStrokeRGBColor;break;case k.OPS.shadingFill:var _t=z.get("Shading");if(!_t)throw new k.FormatError("No shading resource found");var Ut=_t.get(pt[0].name);if(!Ut)throw new k.FormatError("No shading object found");pt=[f.Pattern.parseShading(Ut,null,J,z,B.handler,B._pdfFunctionFactory,pe).getIR()],Dt=k.OPS.shadingFill;break;case k.OPS.setGState:if(dt=pt[0].name){const Pe=ye.getByName(dt);if(Pe){Pe.length>0&&L.addOp(k.OPS.setGState,[Pe]),pt=null;continue}}return void Xe(new Promise(function(Pe,Fe){if(!dt)throw new k.FormatError("GState must be referred to by name.");const $e=z.get("ExtGState");if(!($e instanceof ee.Dict))throw new k.FormatError("ExtGState should be a dictionary.");const at=$e.get(dt);if(!(at instanceof ee.Dict))throw new k.FormatError("GState should be a dictionary.");B.setGState({resources:z,gState:at,operatorList:L,cacheKey:dt,task:U,stateManager:we,localGStateCache:ye,localColorSpaceCache:pe}).then(Pe,Fe)}).catch(function(Pe){if(!(Pe instanceof k.AbortException)){if(B.options.ignoreErrors)return B.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorExtGState}),void(0,k.warn)(`getOperatorList - ignoring ExtGState: "${Pe}".`);throw Pe}}));case k.OPS.moveTo:case k.OPS.lineTo:case k.OPS.curveTo:case k.OPS.curveTo2:case k.OPS.curveTo3:case k.OPS.closePath:case k.OPS.rectangle:B.buildPath(L,Dt,pt,ie);continue;case k.OPS.markPoint:case k.OPS.markPointProps:case k.OPS.beginCompat:case k.OPS.endCompat:continue;case k.OPS.beginMarkedContentProps:if(!(0,ee.isName)(pt[0])){(0,k.warn)(`Expected name for beginMarkedContentProps arg0=${pt[0]}`);continue}if("OC"===pt[0].name)return void Xe(B.parseMarkedContentProps(pt[1],z).then(Pe=>{L.addOp(k.OPS.beginMarkedContentProps,["OC",Pe])}).catch(Pe=>{if(!(Pe instanceof k.AbortException)){if(B.options.ignoreErrors)return B.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorMarkedContent}),void(0,k.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${Pe}".`);throw Pe}}));pt=[pt[0].name];break;default:if(null!==pt){for(Je=0,He=pt.length;Je<He&&!(pt[Je]instanceof ee.Dict);Je++);if(Je<He){(0,k.warn)("getOperatorList - ignoring operator: "+Dt);continue}}}L.addOp(Dt,pt)}Qe?Xe(F):(Ce(),Ne())}).catch(Me=>{if(!(Me instanceof k.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorOperatorList}),(0,k.warn)(`getOperatorList - ignoring errors during "${U.name}" task: "${Me}".`),void Ce();throw Me}})}getTextContent({stream:K,task:U,resources:z,stateManager:L=null,normalizeWhitespace:S=!1,combineTextItems:B=!1,sink:J,seenStyles:ie=Object.create(null)}){z=z||ee.Dict.empty,L=L||new p(new m);var ce=/\s/g,pe={items:[],styles:Object.create(null)},ye={initialized:!1,str:[],width:0,height:0,vertical:!1,lastAdvanceWidth:0,lastAdvanceHeight:0,textAdvanceScale:0,spaceWidth:0,fakeSpaceMin:1/0,fakeMultiSpaceMin:1/0,fakeMultiSpaceMax:-0,textRunBreakAllowed:!1,transform:null,fontName:null},De=this,xe=this.xref,Ce=null;const Me=new ae.LocalImageCache,Ne=new ae.LocalGStateCache;var Xe,We=new R(K,xe,L);function Qe(){if(ye.initialized)return ye;var st=Xe.font;st.loadedName in ie||(ie[st.loadedName]=!0,pe.styles[st.loadedName]={fontFamily:st.fallbackName,ascent:st.ascent,descent:st.descent,vertical:st.vertical}),ye.fontName=st.loadedName;var Ge=[Xe.fontSize*Xe.textHScale,0,0,Xe.fontSize,0,Xe.textRise];if(st.isType3Font&&Xe.fontSize<=1&&!(0,k.isArrayEqual)(Xe.fontMatrix,k.FONT_IDENTITY_MATRIX)){const jt=st.bbox[3]-st.bbox[1];jt>0&&(Ge[3]*=jt*Xe.fontMatrix[3])}var Ze=k.Util.transform(Xe.ctm,k.Util.transform(Xe.textMatrix,Ge));ye.transform=Ze,st.vertical?(ye.width=Math.sqrt(Ze[0]*Ze[0]+Ze[1]*Ze[1]),ye.height=0,ye.vertical=!0):(ye.width=0,ye.height=Math.sqrt(Ze[2]*Ze[2]+Ze[3]*Ze[3]),ye.vertical=!1);var je=Xe.textLineMatrix[0],Ue=Xe.textLineMatrix[1],ct=Math.sqrt(je*je+Ue*Ue);je=Xe.ctm[0],Ue=Xe.ctm[1];var _t=Math.sqrt(je*je+Ue*Ue);ye.textAdvanceScale=_t*ct,ye.lastAdvanceWidth=0,ye.lastAdvanceHeight=0;var Ut=st.spaceWidth/1e3*Xe.fontSize;return Ut?(ye.spaceWidth=Ut,ye.fakeSpaceMin=.3*Ut,ye.fakeMultiSpaceMin=1.5*Ut,ye.fakeMultiSpaceMax=4*Ut,ye.textRunBreakAllowed=!st.isMonospace):(ye.spaceWidth=0,ye.fakeSpaceMin=1/0,ye.fakeMultiSpaceMin=1/0,ye.fakeMultiSpaceMax=0,ye.textRunBreakAllowed=!1),ye.initialized=!0,ye}function Ye(st){for(var je,Ge=0,Ze=st.length;Ge<Ze&&(je=st.charCodeAt(Ge))>=32&&je<=127;)Ge++;return Ge<Ze?st.replace(ce," "):st}function He(st,Ge){return De.loadFont(st,Ge,z).then(function(Ze){Xe.font=Ze.font,Xe.fontMatrix=Ze.font.fontMatrix||k.FONT_IDENTITY_MATRIX})}function it(st){for(var Ge=Xe.font,Ze=Qe(),je=0,Ue=0,ct=Ge.charsToGlyphs(st),_t=0;_t<ct.length;_t++){var jt,Ut=ct[_t];jt=Ge.vertical&&Ut.vmetric?Ut.vmetric[0]:Ut.width;var rt=Ut.unicode,Pe=(0,te.getNormalizedUnicodes)();void 0!==Pe[rt]&&(rt=Pe[rt]),rt=(0,te.reverseIfRtl)(rt);var Fe=Xe.charSpacing;if(Ut.isSpace){var $e=Xe.wordSpacing;Fe+=$e,$e>0&&dt($e,Ze.str)}var at=0,lt=0;Ge.vertical?Ue+=lt=jt*Xe.fontMatrix[0]*Xe.fontSize+Fe:je+=at=(jt*Xe.fontMatrix[0]*Xe.fontSize+Fe)*Xe.textHScale,Xe.translateTextMatrix(at,lt),Ze.str.push(rt)}return Ge.vertical?(Ze.lastAdvanceHeight=Ue,Ze.height+=Math.abs(Ue)):(Ze.lastAdvanceWidth=je,Ze.width+=je),Ze}function dt(st,Ge){if(!(st<ye.fakeSpaceMin)){if(st<ye.fakeMultiSpaceMin)return void Ge.push(" ");for(var Ze=Math.round(st/ye.spaceWidth);Ze-- >0;)Ge.push(" ")}}function pt(){ye.initialized&&(ye.vertical?ye.height*=ye.textAdvanceScale:ye.width*=ye.textAdvanceScale,pe.items.push(function Je(st){var Ge=st.str.join(""),Ze=(0,oe.bidi)(Ge,-1,st.vertical);return{str:S?Ye(Ze.str):Ze.str,dir:Ze.dir,width:st.width,height:st.height,transform:st.transform,fontName:st.fontName}}(ye)),ye.initialized=!1,ye.str.length=0)}function Dt(){const st=pe.items.length;st>0&&(J.enqueue(pe,st),pe.items=[],pe.styles=Object.create(null))}var et=new j;return new Promise(function st(Ge,Ze){const je=function(Lt){Dt(),Promise.all([Lt,J.ready]).then(function(){try{st(Ge,Ze)}catch(It){Ze(It)}},Ze)};U.ensureNotTerminated(),et.reset();for(var Ue,ct={},_t=[];!(Ue=et.check())&&(_t.length=0,ct.args=_t,We.read(ct));){var jt;switch(Xe=L.state,_t=ct.args,0|ct.fn){case k.OPS.setFont:var Pe=_t[0].name,Fe=_t[1];if(Xe.font&&Pe===Xe.fontName&&Fe===Xe.fontSize)break;return pt(),Xe.fontName=Pe,Xe.fontSize=Fe,void je(He(Pe,null));case k.OPS.setTextRise:pt(),Xe.textRise=_t[0];break;case k.OPS.setHScale:pt(),Xe.textHScale=_t[0]/100;break;case k.OPS.setLeading:pt(),Xe.leading=_t[0];break;case k.OPS.moveText:if(jt=_t[0]-_t[1],B&&Xe.font&&0===(Xe.font.vertical?_t[0]:_t[1])&&ye.initialized&&jt>0&&jt<=ye.fakeMultiSpaceMax){Xe.translateTextLineMatrix(_t[0],_t[1]),ye.width+=_t[0]-ye.lastAdvanceWidth,ye.height+=_t[1]-ye.lastAdvanceHeight,dt(_t[0]-ye.lastAdvanceWidth-(_t[1]-ye.lastAdvanceHeight),ye.str);break}pt(),Xe.translateTextLineMatrix(_t[0],_t[1]),Xe.textMatrix=Xe.textLineMatrix.slice();break;case k.OPS.setLeadingMoveText:pt(),Xe.leading=-_t[1],Xe.translateTextLineMatrix(_t[0],_t[1]),Xe.textMatrix=Xe.textLineMatrix.slice();break;case k.OPS.nextLine:pt(),Xe.carriageReturn();break;case k.OPS.setTextMatrix:if(jt=Xe.calcTextLineMatrixAdvance(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]),B&&null!==jt&&ye.initialized&&jt.value>0&&jt.value<=ye.fakeMultiSpaceMax){Xe.translateTextLineMatrix(jt.width,jt.height),ye.width+=jt.width-ye.lastAdvanceWidth,ye.height+=jt.height-ye.lastAdvanceHeight,dt(jt.width-ye.lastAdvanceWidth-(jt.height-ye.lastAdvanceHeight),ye.str);break}pt(),Xe.setTextMatrix(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]),Xe.setTextLineMatrix(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]);break;case k.OPS.setCharSpacing:Xe.charSpacing=_t[0];break;case k.OPS.setWordSpacing:Xe.wordSpacing=_t[0];break;case k.OPS.beginText:pt(),Xe.textMatrix=k.IDENTITY_MATRIX.slice(),Xe.textLineMatrix=k.IDENTITY_MATRIX.slice();break;case k.OPS.showSpacedText:if(!L.state.font){De.ensureStateFont(L.state);continue}for(var lt,at=_t[0],bt=0,Et=at.length;bt<Et;bt++)if("string"==typeof at[bt])it(at[bt]);else if((0,k.isNum)(at[bt])){Qe(),jt=at[bt]*Xe.fontSize/1e3;var mt=!1;Xe.font.vertical?(Xe.translateTextMatrix(0,lt=jt),(mt=ye.textRunBreakAllowed&&jt>ye.fakeMultiSpaceMax)||(ye.height+=lt)):(Xe.translateTextMatrix(lt=(jt=-jt)*Xe.textHScale,0),(mt=ye.textRunBreakAllowed&&jt>ye.fakeMultiSpaceMax)||(ye.width+=lt)),mt?pt():jt>0&&dt(jt,ye.str)}break;case k.OPS.showText:if(!L.state.font){De.ensureStateFont(L.state);continue}it(_t[0]);break;case k.OPS.nextLineShowText:if(!L.state.font){De.ensureStateFont(L.state);continue}pt(),Xe.carriageReturn(),it(_t[0]);break;case k.OPS.nextLineSetSpacingShowText:if(!L.state.font){De.ensureStateFont(L.state);continue}pt(),Xe.wordSpacing=_t[0],Xe.charSpacing=_t[1],Xe.carriageReturn(),it(_t[2]);break;case k.OPS.paintXObject:pt(),Ce||(Ce=z.get("XObject")||ee.Dict.empty);var kt=_t[0].name;if(kt&&Me.getByName(kt))break;return void je(new Promise(function(Lt,It){if(!kt)throw new k.FormatError("XObject must be referred to by name.");let Gt=Ce.getRaw(kt);if(Gt instanceof ee.Ref){if(Me.getByRef(Gt))return void Lt();Gt=xe.fetch(Gt)}if(!(0,ee.isStream)(Gt))throw new k.FormatError("XObject should be a stream");const rn=Gt.dict.get("Subtype");if(!(0,ee.isName)(rn))throw new k.FormatError("XObject should have a Name subtype");if("Form"!==rn.name)return Me.set(kt,Gt.dict.objId,!0),void Lt();const un=L.state.clone(),zn=new p(un),Pn=Gt.dict.getArray("Matrix");Array.isArray(Pn)&&6===Pn.length&&zn.transform(Pn),Dt();const En={enqueueInvoked:!1,enqueue(fi,Ti){this.enqueueInvoked=!0,J.enqueue(fi,Ti)},get desiredSize(){return J.desiredSize},get ready(){return J.ready}};De.getTextContent({stream:Gt,task:U,resources:Gt.dict.get("Resources")||z,stateManager:zn,normalizeWhitespace:S,combineTextItems:B,sink:En,seenStyles:ie}).then(function(){En.enqueueInvoked||Me.set(kt,Gt.dict.objId,!0),Lt()},It)}).catch(function(Lt){if(!(Lt instanceof k.AbortException)){if(De.options.ignoreErrors)return void(0,k.warn)(`getTextContent - ignoring XObject: "${Lt}".`);throw Lt}}));case k.OPS.setGState:if((kt=_t[0].name)&&Ne.getByName(kt))break;return void je(new Promise(function(Lt,It){if(!kt)throw new k.FormatError("GState must be referred to by name.");const Gt=z.get("ExtGState");if(!(Gt instanceof ee.Dict))throw new k.FormatError("ExtGState should be a dictionary.");const rn=Gt.get(kt);if(!(rn instanceof ee.Dict))throw new k.FormatError("GState should be a dictionary.");const un=rn.get("Font");if(!un)return Ne.set(kt,rn.objId,!0),void Lt();pt(),Xe.fontName=null,Xe.fontSize=un[1],He(null,un[0]).then(Lt,It)}).catch(function(Lt){if(!(Lt instanceof k.AbortException)){if(De.options.ignoreErrors)return void(0,k.warn)(`getTextContent - ignoring ExtGState: "${Lt}".`);throw Lt}}))}if(pe.items.length>=J.desiredSize){Ue=!0;break}}Ue?je(F):(pt(),Dt(),Ge())}).catch(st=>{if(!(st instanceof k.AbortException)){if(this.options.ignoreErrors)return(0,k.warn)(`getTextContent - ignoring errors during "${U.name}" task: "${st}".`),pt(),void Dt();throw st}})}extractDataStructures(K,U,z){const L=this.xref;let S;var B=K.get("ToUnicode")||U.get("ToUnicode"),J=B?this.readToUnicode(B):Promise.resolve(void 0);if(z.composite){var ie=K.get("CIDSystemInfo");(0,ee.isDict)(ie)&&(z.cidSystemInfo={registry:(0,k.stringToPDFString)(ie.get("Registry")),ordering:(0,k.stringToPDFString)(ie.get("Ordering")),supplement:ie.get("Supplement")});var ce=K.get("CIDToGIDMap");(0,ee.isStream)(ce)&&(S=ce.getBytes())}var Te,pe=[],ye=null;if(K.has("Encoding")){if(Te=K.get("Encoding"),(0,ee.isDict)(Te)){if(ye=Te.get("BaseEncoding"),ye=(0,ee.isName)(ye)?ye.name:null,Te.has("Differences"))for(var _e=Te.get("Differences"),we=0,De=0,xe=_e.length;De<xe;De++){var Ce=L.fetchIfRef(_e[De]);if((0,k.isNum)(Ce))we=Ce;else{if(!(0,ee.isName)(Ce))throw new k.FormatError(`Invalid entry in 'Differences' array: ${Ce}`);pe[we++]=Ce.name}}}else{if(!(0,ee.isName)(Te))throw new k.FormatError("Encoding is not a Name nor a Dict");ye=Te.name}"MacRomanEncoding"!==ye&&"MacExpertEncoding"!==ye&&"WinAnsiEncoding"!==ye&&(ye=null)}return ye?z.defaultEncoding=(0,V.getEncoding)(ye).slice():(Te=V.StandardEncoding,"TrueType"===z.type&&!(z.flags&e.FontFlags.Nonsymbolic)&&(Te=V.WinAnsiEncoding),!!(z.flags&e.FontFlags.Symbolic)&&(Te=V.MacRomanEncoding,z.file||(/Symbol/i.test(z.name)?Te=V.SymbolSetEncoding:/Dingbats|Wingdings/i.test(z.name)&&(Te=V.ZapfDingbatsEncoding))),z.defaultEncoding=Te),z.differences=pe,z.baseEncodingName=ye,z.hasEncoding=!!ye||pe.length>0,z.dict=K,J.then(We=>(z.toUnicode=We,this.buildToUnicode(z))).then(We=>(z.toUnicode=We,S&&(z.cidToGidMap=this.readCidToGidMap(S,We)),z))}_buildSimpleFontToUnicode(K,U=!1){(0,k.assert)(!K.composite,"Must be a simple font.");const z=[],L=K.defaultEncoding.slice(),S=K.baseEncodingName,B=K.differences;for(const ie in B){const ce=B[ie];".notdef"!==ce&&(L[ie]=ce)}const J=(0,O.getGlyphsUnicode)();for(const ie in L){let ce=L[ie];if(""!==ce){if(void 0===J[ce]){let pe=0;switch(ce[0]){case"G":3===ce.length&&(pe=parseInt(ce.substring(1),16));break;case"g":5===ce.length&&(pe=parseInt(ce.substring(1),16));break;case"C":case"c":if(ce.length>=3&&ce.length<=4){const Te=ce.substring(1);if(U){pe=parseInt(Te,16);break}if(pe=+Te,Number.isNaN(pe)&&Number.isInteger(parseInt(Te,16)))return this._buildSimpleFontToUnicode(K,!0)}break;default:const ye=(0,te.getUnicodeForGlyph)(ce,J);-1!==ye&&(pe=ye)}if(pe>0&&pe<=1114111&&Number.isInteger(pe)){if(S&&pe===+ie){const ye=(0,V.getEncoding)(S);if(ye&&(ce=ye[ie])){z[ie]=String.fromCharCode(J[ce]);continue}}z[ie]=String.fromCodePoint(pe)}continue}z[ie]=String.fromCharCode(J[ce])}}return new e.ToUnicodeMap(z)}buildToUnicode(K){if(K.hasIncludedToUnicodeMap=!!K.toUnicode&&K.toUnicode.length>0,K.hasIncludedToUnicodeMap)return!K.composite&&K.hasEncoding&&(K.fallbackToUnicode=this._buildSimpleFontToUnicode(K)),Promise.resolve(K.toUnicode);if(!K.composite)return Promise.resolve(this._buildSimpleFontToUnicode(K));if(K.composite&&(K.cMap.builtInCMap&&!(K.cMap instanceof fe.IdentityCMap)||"Adobe"===K.cidSystemInfo.registry&&("GB1"===K.cidSystemInfo.ordering||"CNS1"===K.cidSystemInfo.ordering||"Japan1"===K.cidSystemInfo.ordering||"Korea1"===K.cidSystemInfo.ordering))){const L=ee.Name.get(K.cidSystemInfo.registry+"-"+K.cidSystemInfo.ordering+"-UCS2");return fe.CMapFactory.create({encoding:L,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(S){const J=[];return K.cMap.forEach(function(ie,ce){if(ce>65535)throw new k.FormatError("Max size of CID is 65,535");const pe=S.lookup(ce);pe&&(J[ie]=String.fromCharCode((pe.charCodeAt(0)<<8)+pe.charCodeAt(1)))}),new e.ToUnicodeMap(J)})}return Promise.resolve(new e.IdentityToUnicodeMap(K.firstChar,K.lastChar))}readToUnicode(K){var U=K;return(0,ee.isName)(U)?fe.CMapFactory.create({encoding:U,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(z){return z instanceof fe.IdentityCMap?new e.IdentityToUnicodeMap(0,65535):new e.ToUnicodeMap(z.getMap())}):(0,ee.isStream)(U)?fe.CMapFactory.create({encoding:U,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(z){if(z instanceof fe.IdentityCMap)return new e.IdentityToUnicodeMap(0,65535);var L=new Array(z.length);return z.forEach(function(S,B){for(var J=[],ie=0;ie<B.length;ie+=2){var ce=B.charCodeAt(ie)<<8|B.charCodeAt(ie+1);if(55296==(63488&ce)){var pe=B.charCodeAt(ie+=2)<<8|B.charCodeAt(ie+1);J.push(((1023&ce)<<10)+(1023&pe)+65536)}else J.push(ce)}L[S]=String.fromCodePoint.apply(String,J)}),new e.ToUnicodeMap(L)},z=>{if(z instanceof k.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,k.warn)(`readToUnicode - ignoring ToUnicode data: "${z}".`),null;throw z}):Promise.resolve(null)}readCidToGidMap(K,U){for(var z=[],L=0,S=K.length;L<S;L++){var B=K[L++]<<8|K[L];const J=L>>1;0===B&&!U.has(J)||(z[J]=B)}return z}extractWidths(K,U,z){var ie,ce,pe,ye,Te,_e,we,De,L=this.xref,S=[],B=0,J=[];if(z.composite){if(B=K.has("DW")?K.get("DW"):1e3,De=K.get("W"))for(ce=0,pe=De.length;ce<pe;ce++)if(_e=L.fetchIfRef(De[ce++]),we=L.fetchIfRef(De[ce]),Array.isArray(we))for(ye=0,Te=we.length;ye<Te;ye++)S[_e++]=L.fetchIfRef(we[ye]);else{var xe=L.fetchIfRef(De[++ce]);for(ye=_e;ye<=we;ye++)S[ye]=xe}if(z.vertical){var Ce=K.getArray("DW2")||[880,-1e3];if(ie=[Ce[1],.5*B,Ce[0]],Ce=K.get("W2"))for(ce=0,pe=Ce.length;ce<pe;ce++)if(_e=L.fetchIfRef(Ce[ce++]),we=L.fetchIfRef(Ce[ce]),Array.isArray(we))for(ye=0,Te=we.length;ye<Te;ye++)J[_e++]=[L.fetchIfRef(we[ye++]),L.fetchIfRef(we[ye++]),L.fetchIfRef(we[ye])];else{var Me=[L.fetchIfRef(Ce[++ce]),L.fetchIfRef(Ce[++ce]),L.fetchIfRef(Ce[++ce])];for(ye=_e;ye<=we;ye++)J[ye]=Me}}}else{var Ne=z.firstChar;if(De=K.get("Widths")){for(ye=Ne,ce=0,pe=De.length;ce<pe;ce++)S[ye++]=L.fetchIfRef(De[ce]);B=parseFloat(U.get("MissingWidth"))||0}else{var We=K.get("BaseFont");if((0,ee.isName)(We)){var Xe=this.getBaseFontMetrics(We.name);S=this.buildCharCodeToWidth(Xe.widths,z),B=Xe.defaultWidth}}}var Qe=!0,Ye=B;for(var Je in S){var He=S[Je];if(He){if(!Ye){Ye=He;continue}if(Ye!==He){Qe=!1;break}}}Qe&&(z.flags|=e.FontFlags.FixedPitch),z.defaultWidth=B,z.widths=S,z.defaultVMetrics=ie,z.vmetrics=J}isSerifFont(K){var U=K.split("-")[0];return U in(0,re.getSerifFonts)()||-1!==U.search(/serif/gi)}getBaseFontMetrics(K){var U=0,z=[],L=!1,B=(0,re.getStdFontMap)()[K]||K,J=(0,M.getMetrics)();B in J||(B=this.isSerifFont(K)?"Times-Roman":"Helvetica");var ie=J[B];return(0,k.isNum)(ie)?(U=ie,L=!0):z=ie(),{defaultWidth:U,monospace:L,widths:z}}buildCharCodeToWidth(K,U){for(var z=Object.create(null),L=U.differences,S=U.defaultEncoding,B=0;B<256;B++)B in L&&K[L[B]]?z[B]=K[L[B]]:B in S&&K[S[B]]&&(z[B]=K[S[B]]);return z}preEvaluateFont(K){var U=K,z=K.get("Subtype");if(!(0,ee.isName)(z))throw new k.FormatError("invalid font Subtype");var S,L=!1;if("Type0"===z.name){var B=K.get("DescendantFonts");if(!B)throw new k.FormatError("Descendant fonts are not specified");if(z=(K=Array.isArray(B)?this.xref.fetchIfRef(B[0]):B).get("Subtype"),!(0,ee.isName)(z))throw new k.FormatError("invalid font Subtype");L=!0}var J=K.get("FontDescriptor");if(J){var ie=new A.MurmurHash3_64,ce=U.getRaw("Encoding");if((0,ee.isName)(ce))ie.update(ce.name);else if((0,ee.isRef)(ce))ie.update(ce.toString());else if((0,ee.isDict)(ce))for(const Ne of ce.getRawValues())if((0,ee.isName)(Ne))ie.update(Ne.name);else if((0,ee.isRef)(Ne))ie.update(Ne.toString());else if(Array.isArray(Ne)){for(var pe=Ne.length,ye=new Array(pe),Te=0;Te<pe;Te++){var _e=Ne[Te];(0,ee.isName)(_e)?ye[Te]=_e.name:((0,k.isNum)(_e)||(0,ee.isRef)(_e))&&(ye[Te]=_e.toString())}ie.update(ye.join())}const Ce=K.get("FirstChar")||0,Me=K.get("LastChar")||(L?65535:255);ie.update(`${Ce}-${Me}`);var we=K.get("ToUnicode")||U.get("ToUnicode");if((0,ee.isStream)(we)){var De=we.str||we;S=De.buffer?new Uint8Array(De.buffer.buffer,0,De.bufferLength):new Uint8Array(De.bytes.buffer,De.start,De.end-De.start),ie.update(S)}else(0,ee.isName)(we)&&ie.update(we.name);var xe=K.get("Widths")||U.get("Widths");xe&&(S=new Uint8Array(new Uint32Array(xe).buffer),ie.update(S))}return{descriptor:J,dict:K,baseDict:U,composite:L,type:z.name,hash:ie?ie.hexdigest():""}}translateFont(K){var ie,U=K.baseDict,z=K.dict,L=K.composite,S=K.descriptor,B=K.type,J=L?65535:255;const ce=z.get("FirstChar")||0,pe=z.get("LastChar")||J;if(!S){if("Type3"!==B){var ye=z.get("BaseFont");if(!(0,ee.isName)(ye))throw new k.FormatError("Base font is not specified");ye=ye.name.replace(/[,_]/g,"-");var Te=this.getBaseFontMetrics(ye),_e=ye.split("-")[0],we=(this.isSerifFont(_e)?e.FontFlags.Serif:0)|(Te.monospace?e.FontFlags.FixedPitch:0)|((0,re.getSymbolsFonts)()[_e]?e.FontFlags.Symbolic:e.FontFlags.Nonsymbolic);ie={type:B,name:ye,widths:Te.widths,defaultWidth:Te.defaultWidth,flags:we,firstChar:ce,lastChar:pe};const it=z.get("Widths");return this.extractDataStructures(z,z,ie).then(dt=>{if(it){const pt=[];let Dt=ce;for(let et=0,st=it.length;et<st;et++)pt[Dt++]=this.xref.fetchIfRef(it[et]);dt.widths=pt}else dt.widths=this.buildCharCodeToWidth(Te.widths,dt);return new e.Font(ye,null,dt)})}(S=new ee.Dict(null)).set("FontName",ee.Name.get(B)),S.set("FontBBox",z.getArray("FontBBox")||[0,0,0,0])}var De=S.get("FontName"),xe=z.get("BaseFont");if((0,k.isString)(De)&&(De=ee.Name.get(De)),(0,k.isString)(xe)&&(xe=ee.Name.get(xe)),"Type3"!==B){var Ce=De&&De.name,Me=xe&&xe.name;Ce!==Me&&((0,k.info)(`The FontDescriptor's FontName is "${Ce}" but should be the same as the Font's BaseFont "${Me}".`),Ce&&Me&&Me.startsWith(Ce)&&(De=xe))}if(!(0,ee.isName)(De=De||xe))throw new k.FormatError("invalid font name");var Je,Ne=S.get("FontFile","FontFile2","FontFile3");if(Ne&&Ne.dict){var We=Ne.dict.get("Subtype");We&&(We=We.name);var Xe=Ne.dict.get("Length1"),Qe=Ne.dict.get("Length2"),Ye=Ne.dict.get("Length3")}if(ie={type:B,name:De.name,subtype:We,file:Ne,length1:Xe,length2:Qe,length3:Ye,loadedName:U.loadedName,composite:L,fixedPitch:!1,fontMatrix:z.getArray("FontMatrix")||k.FONT_IDENTITY_MATRIX,firstChar:ce||0,lastChar:pe||J,bbox:S.getArray("FontBBox"),ascent:S.get("Ascent"),descent:S.get("Descent"),xHeight:S.get("XHeight"),capHeight:S.get("CapHeight"),flags:S.get("Flags"),italicAngle:S.get("ItalicAngle"),isType3Font:!1},L){var He=U.get("Encoding");(0,ee.isName)(He)&&(ie.cidEncoding=He.name),Je=fe.CMapFactory.create({encoding:He,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(it){ie.cMap=it,ie.vertical=ie.cMap.vertical})}else Je=Promise.resolve(void 0);return Je.then(()=>this.extractDataStructures(z,U,ie)).then(it=>(this.extractWidths(z,S,it),"Type3"===B&&(it.isType3Font=!0),new e.Font(De.name,Ne,it)))}static buildFontPaths(K,U,z){function L(S){K.renderer.hasBuiltPath(S)||z.send("commonobj",[`${K.loadedName}_path_${S}`,"FontPath",K.renderer.getPathJs(S)])}for(const S of U){L(S.fontChar);const B=S.accent;B&&B.fontChar&&L(B.fontChar)}}static get fallbackFontDict(){const K=new ee.Dict;return K.set("BaseFont",ee.Name.get("PDFJS-FallbackFont")),K.set("Type",ee.Name.get("FallbackType")),K.set("Subtype",ee.Name.get("FallbackType")),K.set("Encoding",ee.Name.get("WinAnsiEncoding")),(0,k.shadow)(this,"fallbackFontDict",K)}}se.PartialEvaluator=E;class x{constructor({loadedName:K,font:U,dict:z,extraProperties:L=!1}){this.loadedName=K,this.font=U,this.dict=z,this._extraProperties=L,this.type3Loaded=null,this.type3Dependencies=U.isType3Font?new Set:null,this.sent=!1}send(K){this.sent||(this.sent=!0,K.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._extraProperties)]))}fallback(K){this.font.data&&(this.font.disableFontFace=!0,E.buildFontPaths(this.font,this.font.glyphCacheValues,K))}loadType3Data(K,U,z){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");var L=Object.create(K.options);L.ignoreErrors=!1;var S=K.clone(L);S.parsingType3Font=!0;const B=this.font,J=this.type3Dependencies;var ie=Promise.resolve(),ce=this.dict.get("CharProcs"),pe=this.dict.get("Resources")||U,ye=Object.create(null);for(const Te of ce.getKeys())ie=ie.then(function(){var _e=ce.get(Te),we=new b.OperatorList;return S.getOperatorList({stream:_e,task:z,resources:pe,operatorList:we}).then(function(){ye[Te]=we.getIR();for(const De of we.dependencies)J.add(De)}).catch(function(De){(0,k.warn)(`Type3 font resource "${Te}" is not available.`);const xe=new b.OperatorList;ye[Te]=xe.getIR()})});return this.type3Loaded=ie.then(function(){B.charProcOperatorList=ye}),this.type3Loaded}}class p{constructor(K){this.state=K,this.stateStack=[]}save(){var K=this.state;this.stateStack.push(this.state),this.state=K.clone()}restore(){var K=this.stateStack.pop();K&&(this.state=K)}transform(K){this.state.ctm=k.Util.transform(this.state.ctm,K)}}class m{constructor(){this.ctm=new Float32Array(k.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=k.FONT_IDENTITY_MATRIX,this.textMatrix=k.IDENTITY_MATRIX.slice(),this.textLineMatrix=k.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(K,U,z,L,S,B){var J=this.textMatrix;J[0]=K,J[1]=U,J[2]=z,J[3]=L,J[4]=S,J[5]=B}setTextLineMatrix(K,U,z,L,S,B){var J=this.textLineMatrix;J[0]=K,J[1]=U,J[2]=z,J[3]=L,J[4]=S,J[5]=B}translateTextMatrix(K,U){var z=this.textMatrix;z[4]=z[0]*K+z[2]*U+z[4],z[5]=z[1]*K+z[3]*U+z[5]}translateTextLineMatrix(K,U){var z=this.textLineMatrix;z[4]=z[0]*K+z[2]*U+z[4],z[5]=z[1]*K+z[3]*U+z[5]}calcTextLineMatrixAdvance(K,U,z,L,S,B){var J=this.font;if(!J)return null;var ie=this.textLineMatrix;if(K!==ie[0]||U!==ie[1]||z!==ie[2]||L!==ie[3])return null;var ce=S-ie[4],pe=B-ie[5];if(J.vertical&&0!==ce||!J.vertical&&0!==pe)return null;var ye,Te,_e=K*L-U*z;return J.vertical?(ye=-pe*z/_e,Te=pe*K/_e):(ye=ce*L/_e,Te=-ce*U/_e),{width:ye,height:Te,value:J.vertical?Te:ye}}calcRenderMatrix(K){return k.Util.transform(K,k.Util.transform(this.textMatrix,[this.fontSize*this.textHScale,0,0,this.fontSize,0,this.textRise]))}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){var K=Object.create(this);return K.textMatrix=this.textMatrix.slice(),K.textLineMatrix=this.textLineMatrix.slice(),K.fontMatrix=this.fontMatrix.slice(),K}}class _{constructor(){this.ctm=new Float32Array(k.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=k.TextRenderingMode.FILL,this.fillColorSpace=W.ColorSpace.singletons.gray,this.strokeColorSpace=W.ColorSpace.singletons.gray}clone(){return Object.create(this)}}class R{static get opMap(){const K=(0,H.getLookupTableFactory)(function(U){U.w={id:k.OPS.setLineWidth,numArgs:1,variableArgs:!1},U.J={id:k.OPS.setLineCap,numArgs:1,variableArgs:!1},U.j={id:k.OPS.setLineJoin,numArgs:1,variableArgs:!1},U.M={id:k.OPS.setMiterLimit,numArgs:1,variableArgs:!1},U.d={id:k.OPS.setDash,numArgs:2,variableArgs:!1},U.ri={id:k.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},U.i={id:k.OPS.setFlatness,numArgs:1,variableArgs:!1},U.gs={id:k.OPS.setGState,numArgs:1,variableArgs:!1},U.q={id:k.OPS.save,numArgs:0,variableArgs:!1},U.Q={id:k.OPS.restore,numArgs:0,variableArgs:!1},U.cm={id:k.OPS.transform,numArgs:6,variableArgs:!1},U.m={id:k.OPS.moveTo,numArgs:2,variableArgs:!1},U.l={id:k.OPS.lineTo,numArgs:2,variableArgs:!1},U.c={id:k.OPS.curveTo,numArgs:6,variableArgs:!1},U.v={id:k.OPS.curveTo2,numArgs:4,variableArgs:!1},U.y={id:k.OPS.curveTo3,numArgs:4,variableArgs:!1},U.h={id:k.OPS.closePath,numArgs:0,variableArgs:!1},U.re={id:k.OPS.rectangle,numArgs:4,variableArgs:!1},U.S={id:k.OPS.stroke,numArgs:0,variableArgs:!1},U.s={id:k.OPS.closeStroke,numArgs:0,variableArgs:!1},U.f={id:k.OPS.fill,numArgs:0,variableArgs:!1},U.F={id:k.OPS.fill,numArgs:0,variableArgs:!1},U["f*"]={id:k.OPS.eoFill,numArgs:0,variableArgs:!1},U.B={id:k.OPS.fillStroke,numArgs:0,variableArgs:!1},U["B*"]={id:k.OPS.eoFillStroke,numArgs:0,variableArgs:!1},U.b={id:k.OPS.closeFillStroke,numArgs:0,variableArgs:!1},U["b*"]={id:k.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},U.n={id:k.OPS.endPath,numArgs:0,variableArgs:!1},U.W={id:k.OPS.clip,numArgs:0,variableArgs:!1},U["W*"]={id:k.OPS.eoClip,numArgs:0,variableArgs:!1},U.BT={id:k.OPS.beginText,numArgs:0,variableArgs:!1},U.ET={id:k.OPS.endText,numArgs:0,variableArgs:!1},U.Tc={id:k.OPS.setCharSpacing,numArgs:1,variableArgs:!1},U.Tw={id:k.OPS.setWordSpacing,numArgs:1,variableArgs:!1},U.Tz={id:k.OPS.setHScale,numArgs:1,variableArgs:!1},U.TL={id:k.OPS.setLeading,numArgs:1,variableArgs:!1},U.Tf={id:k.OPS.setFont,numArgs:2,variableArgs:!1},U.Tr={id:k.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},U.Ts={id:k.OPS.setTextRise,numArgs:1,variableArgs:!1},U.Td={id:k.OPS.moveText,numArgs:2,variableArgs:!1},U.TD={id:k.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},U.Tm={id:k.OPS.setTextMatrix,numArgs:6,variableArgs:!1},U["T*"]={id:k.OPS.nextLine,numArgs:0,variableArgs:!1},U.Tj={id:k.OPS.showText,numArgs:1,variableArgs:!1},U.TJ={id:k.OPS.showSpacedText,numArgs:1,variableArgs:!1},U["'"]={id:k.OPS.nextLineShowText,numArgs:1,variableArgs:!1},U['"']={id:k.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},U.d0={id:k.OPS.setCharWidth,numArgs:2,variableArgs:!1},U.d1={id:k.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},U.CS={id:k.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},U.cs={id:k.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},U.SC={id:k.OPS.setStrokeColor,numArgs:4,variableArgs:!0},U.SCN={id:k.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},U.sc={id:k.OPS.setFillColor,numArgs:4,variableArgs:!0},U.scn={id:k.OPS.setFillColorN,numArgs:33,variableArgs:!0},U.G={id:k.OPS.setStrokeGray,numArgs:1,variableArgs:!1},U.g={id:k.OPS.setFillGray,numArgs:1,variableArgs:!1},U.RG={id:k.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},U.rg={id:k.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},U.K={id:k.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},U.k={id:k.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},U.sh={id:k.OPS.shadingFill,numArgs:1,variableArgs:!1},U.BI={id:k.OPS.beginInlineImage,numArgs:0,variableArgs:!1},U.ID={id:k.OPS.beginImageData,numArgs:0,variableArgs:!1},U.EI={id:k.OPS.endInlineImage,numArgs:1,variableArgs:!1},U.Do={id:k.OPS.paintXObject,numArgs:1,variableArgs:!1},U.MP={id:k.OPS.markPoint,numArgs:1,variableArgs:!1},U.DP={id:k.OPS.markPointProps,numArgs:2,variableArgs:!1},U.BMC={id:k.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},U.BDC={id:k.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},U.EMC={id:k.OPS.endMarkedContent,numArgs:0,variableArgs:!1},U.BX={id:k.OPS.beginCompat,numArgs:0,variableArgs:!1},U.EX={id:k.OPS.endCompat,numArgs:0,variableArgs:!1},U.BM=null,U.BD=null,U.true=null,U.fa=null,U.fal=null,U.fals=null,U.false=null,U.nu=null,U.nul=null,U.null=null});return(0,k.shadow)(this,"opMap",K())}static get MAX_INVALID_PATH_OPS(){return(0,k.shadow)(this,"MAX_INVALID_PATH_OPS",20)}constructor(K,U,z){this.parser=new $.Parser({lexer:new $.Lexer(K,R.opMap),xref:U}),this.stateManager=z,this.nonProcessedArgs=[],this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(K){for(var U=K.args;;){var z=this.parser.getObj();if(z instanceof ee.Cmd){var L=z.cmd,S=R.opMap[L];if(!S){(0,k.warn)(`Unknown command "${L}".`);continue}var B=S.id,J=S.numArgs,ie=null!==U?U.length:0;if(S.variableArgs)ie>J&&(0,k.info)(`Command ${L}: expected [0, ${J}] args, but received ${ie} args.`);else{if(ie!==J){for(var ce=this.nonProcessedArgs;ie>J;)ce.push(U.shift()),ie--;for(;ie<J&&0!==ce.length;)null===U&&(U=[]),U.unshift(ce.pop()),ie++}if(ie<J){const pe=`command ${L}: expected ${J} args, but received ${ie} args.`;if(B>=k.OPS.moveTo&&B<=k.OPS.endPath&&++this._numInvalidPathOPS>R.MAX_INVALID_PATH_OPS)throw new k.FormatError(`Invalid ${pe}`);(0,k.warn)(`Skipping ${pe}`),null!==U&&(U.length=0);continue}}return this.preprocessCommand(B,U),K.fn=B,K.args=U,!0}if(z===ee.EOF)return!1;if(null!==z&&(null===U&&(U=[]),U.push(z),U.length>33))throw new k.FormatError("Too many arguments")}}preprocessCommand(K,U){switch(0|K){case k.OPS.save:this.stateManager.save();break;case k.OPS.restore:this.stateManager.restore();break;case k.OPS.transform:this.stateManager.transform(U)}}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.CMapFactory=se.IdentityCMap=se.CMap=void 0;var k=y(2),fe=y(5),ee=y(11),e=y(8),V=y(12),H=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"];const te=2**24-1;class re{constructor(oe=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=oe}addCodespaceRange(oe,W,N){this.codespaceRanges[oe-1].push(W,N),this.numCodespaceRanges++}mapCidRange(oe,W,N){if(W-oe>te)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;oe<=W;)this._map[oe++]=N++}mapBfRange(oe,W,N){if(W-oe>te)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");for(var O=N.length-1;oe<=W;)this._map[oe++]=N,N=N.substring(0,O)+String.fromCharCode(N.charCodeAt(O)+1)}mapBfRangeToArray(oe,W,N){if(W-oe>te)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const O=N.length;let M=0;for(;oe<=W&&M<O;)this._map[oe]=N[M++],++oe}mapOne(oe,W){this._map[oe]=W}lookup(oe){return this._map[oe]}contains(oe){return void 0!==this._map[oe]}forEach(oe){const W=this._map,N=W.length;if(N<=65536)for(let O=0;O<N;O++)void 0!==W[O]&&oe(O,W[O]);else for(const O in W)oe(O,W[O])}charCodeOf(oe){const W=this._map;if(W.length<=65536)return W.indexOf(oe);for(const N in W)if(W[N]===oe)return 0|N;return-1}getMap(){return this._map}readCharCode(oe,W,N){let O=0;const M=this.codespaceRanges;for(let A=0,b=M.length;A<b;A++){O=(O<<8|oe.charCodeAt(W+A))>>>0;const q=M[A];for(let C=0,P=q.length;C<P;){const F=q[C++],I=q[C++];if(O>=F&&O<=I)return N.charcode=O,void(N.length=A+1)}}N.charcode=0,N.length=1}get length(){return this._map.length}get isIdentityCMap(){if("Identity-H"!==this.name&&"Identity-V"!==this.name||65536!==this._map.length)return!1;for(let oe=0;oe<65536;oe++)if(this._map[oe]!==oe)return!1;return!0}}se.CMap=re;class f extends re{constructor(oe,W){super(),this.vertical=oe,this.addCodespaceRange(W,0,65535)}mapCidRange(oe,W,N){(0,k.unreachable)("should not call mapCidRange")}mapBfRange(oe,W,N){(0,k.unreachable)("should not call mapBfRange")}mapBfRangeToArray(oe,W,N){(0,k.unreachable)("should not call mapBfRangeToArray")}mapOne(oe,W){(0,k.unreachable)("should not call mapCidOne")}lookup(oe){return Number.isInteger(oe)&&oe<=65535?oe:void 0}contains(oe){return Number.isInteger(oe)&&oe<=65535}forEach(oe){for(let W=0;W<=65535;W++)oe(W,W)}charCodeOf(oe){return Number.isInteger(oe)&&oe<=65535?oe:-1}getMap(){const oe=new Array(65536);for(let W=0;W<=65535;W++)oe[W]=W;return oe}get length(){return 65536}get isIdentityCMap(){(0,k.unreachable)("should not access .isIdentityCMap")}}se.IdentityCMap=f;var c=function(){function oe(P,F){for(var I=0,j=0;j<=F;j++)I=I<<8|P[j];return I>>>0}function W(P,F){return 1===F?String.fromCharCode(P[0],P[1]):3===F?String.fromCharCode(P[0],P[1],P[2],P[3]):String.fromCharCode.apply(null,P.subarray(0,F+1))}function N(P,F,I){for(var j=0,E=I;E>=0;E--)P[E]=255&(j+=P[E]+F[E]),j>>=8}function O(P,F){for(var I=1,j=F;j>=0&&I>0;j--)P[j]=255&(I+=P[j]),I>>=8}var M=16,A=19;function b(P){this.buffer=P,this.pos=0,this.end=P.length,this.tmpBuf=new Uint8Array(A)}function C(){}return b.prototype={readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]},readNumber(){var F,P=0;do{var I=this.readByte();if(I<0)throw new k.FormatError("unexpected EOF in bcmap");F=!(128&I),P=P<<7|127&I}while(!F);return P},readSigned(){var P=this.readNumber();return 1&P?~(P>>>1):P>>>1},readHex(P,F){P.set(this.buffer.subarray(this.pos,this.pos+F+1)),this.pos+=F+1},readHexNumber(P,F){var I,j=this.tmpBuf,E=0;do{var x=this.readByte();if(x<0)throw new k.FormatError("unexpected EOF in bcmap");I=!(128&x),j[E++]=127&x}while(!I);for(var p=F,m=0,_=0;p>=0;){for(;_<8&&j.length>0;)m=j[--E]<<_|m,_+=7;P[p]=255&m,p--,m>>=8,_-=8}},readHexSigned(P,F){this.readHexNumber(P,F);for(var I=1&P[F]?255:0,j=0,E=0;E<=F;E++)P[E]=(j=(1&j)<<8|P[E])>>1^I},readString(){for(var P=this.readNumber(),F="",I=0;I<P;I++)F+=String.fromCharCode(this.readNumber());return F}},C.prototype={process:function q(P,F,I){return new Promise(function(j,E){var x=new b(P),p=x.readByte();F.vertical=!!(1&p);for(var z,L,m=null,_=new Uint8Array(M),R=new Uint8Array(M),G=new Uint8Array(M),K=new Uint8Array(M),U=new Uint8Array(M);(L=x.readByte())>=0;){var S=L>>5;if(7!==S){var B=!!(16&L),J=15&L;if(J+1>M)throw new Error("processBinaryCMap: Invalid dataSize.");var pe,ce=x.readNumber();switch(S){case 0:for(x.readHex(_,J),x.readHexNumber(R,J),N(R,_,J),F.addCodespaceRange(J+1,oe(_,J),oe(R,J)),pe=1;pe<ce;pe++)O(R,J),x.readHexNumber(_,J),N(_,R,J),x.readHexNumber(R,J),N(R,_,J),F.addCodespaceRange(J+1,oe(_,J),oe(R,J));break;case 1:for(x.readHex(_,J),x.readHexNumber(R,J),N(R,_,J),x.readNumber(),pe=1;pe<ce;pe++)O(R,J),x.readHexNumber(_,J),N(_,R,J),x.readHexNumber(R,J),N(R,_,J),x.readNumber();break;case 2:for(x.readHex(G,J),z=x.readNumber(),F.mapOne(oe(G,J),z),pe=1;pe<ce;pe++)O(G,J),B||(x.readHexNumber(U,J),N(G,U,J)),z=x.readSigned()+(z+1),F.mapOne(oe(G,J),z);break;case 3:for(x.readHex(_,J),x.readHexNumber(R,J),N(R,_,J),z=x.readNumber(),F.mapCidRange(oe(_,J),oe(R,J),z),pe=1;pe<ce;pe++)O(R,J),B?_.set(R):(x.readHexNumber(_,J),N(_,R,J)),x.readHexNumber(R,J),N(R,_,J),z=x.readNumber(),F.mapCidRange(oe(_,J),oe(R,J),z);break;case 4:for(x.readHex(G,1),x.readHex(K,J),F.mapOne(oe(G,1),W(K,J)),pe=1;pe<ce;pe++)O(G,1),B||(x.readHexNumber(U,1),N(G,U,1)),O(K,J),x.readHexSigned(U,J),N(K,U,J),F.mapOne(oe(G,1),W(K,J));break;case 5:for(x.readHex(_,1),x.readHexNumber(R,1),N(R,_,1),x.readHex(K,J),F.mapBfRange(oe(_,1),oe(R,1),W(K,J)),pe=1;pe<ce;pe++)O(R,1),B?_.set(R):(x.readHexNumber(_,1),N(_,R,1)),x.readHexNumber(R,1),N(R,_,1),x.readHex(K,J),F.mapBfRange(oe(_,1),oe(R,1),W(K,J));break;default:return void E(new Error("processBinaryCMap: Unknown type: "+S))}}else switch(31&L){case 0:x.readString();break;case 1:m=x.readString()}}j(m?I(m):F)})}},C}(),$=function(){function oe(E){for(var x=0,p=0;p<E.length;p++)x=x<<8|E.charCodeAt(p);return x>>>0}function W(E){if(!(0,k.isString)(E))throw new k.FormatError("Malformed CMap: expected string.")}function N(E){if(!Number.isInteger(E))throw new k.FormatError("Malformed CMap: expected int.")}function O(E,x){for(;;){var p=x.getObj();if((0,fe.isEOF)(p))break;if((0,fe.isCmd)(p,"endbfchar"))return;W(p);var m=oe(p);W(p=x.getObj()),E.mapOne(m,p)}}function M(E,x){for(;;){var p=x.getObj();if((0,fe.isEOF)(p))break;if((0,fe.isCmd)(p,"endbfrange"))return;W(p);var m=oe(p);W(p=x.getObj());var _=oe(p);if(p=x.getObj(),Number.isInteger(p)||(0,k.isString)(p)){var R=Number.isInteger(p)?String.fromCharCode(p):p;E.mapBfRange(m,_,R)}else{if(!(0,fe.isCmd)(p,"["))break;p=x.getObj();for(var G=[];!(0,fe.isCmd)(p,"]")&&!(0,fe.isEOF)(p);)G.push(p),p=x.getObj();E.mapBfRangeToArray(m,_,G)}}throw new k.FormatError("Invalid bf range.")}function A(E,x){for(;;){var p=x.getObj();if((0,fe.isEOF)(p))break;if((0,fe.isCmd)(p,"endcidchar"))return;W(p);var m=oe(p);N(p=x.getObj()),E.mapOne(m,p)}}function b(E,x){for(;;){var p=x.getObj();if((0,fe.isEOF)(p))break;if((0,fe.isCmd)(p,"endcidrange"))return;W(p);var m=oe(p);W(p=x.getObj());var _=oe(p);N(p=x.getObj()),E.mapCidRange(m,_,p)}}function q(E,x){for(;;){var p=x.getObj();if((0,fe.isEOF)(p))break;if((0,fe.isCmd)(p,"endcodespacerange"))return;if(!(0,k.isString)(p))break;var m=oe(p);if(p=x.getObj(),!(0,k.isString)(p))break;var _=oe(p);E.addCodespaceRange(p.length,m,_)}throw new k.FormatError("Invalid codespace range.")}function C(E,x){var p=x.getObj();Number.isInteger(p)&&(E.vertical=!!p)}function P(E,x){var p=x.getObj();(0,fe.isName)(p)&&(0,k.isString)(p.name)&&(E.name=p.name)}function F(E,x,p,m){var _,R;e:for(;;)try{var G=x.getObj();if((0,fe.isEOF)(G))break;if((0,fe.isName)(G))"WMode"===G.name?C(E,x):"CMapName"===G.name&&P(E,x),_=G;else if((0,fe.isCmd)(G))switch(G.cmd){case"endcmap":break e;case"usecmap":(0,fe.isName)(_)&&(R=_.name);break;case"begincodespacerange":q(E,x);break;case"beginbfchar":O(E,x);break;case"begincidchar":A(E,x);break;case"beginbfrange":M(E,x);break;case"begincidrange":b(E,x)}}catch(K){if(K instanceof e.MissingDataException)throw K;(0,k.warn)("Invalid cMap data: "+K);continue}return!m&&R&&(m=R),m?I(E,p,m):Promise.resolve(E)}function I(E,x,p){return j(p,x).then(function(m){if(E.useCMap=m,0===E.numCodespaceRanges){for(var _=E.useCMap.codespaceRanges,R=0;R<_.length;R++)E.codespaceRanges[R]=_[R].slice();E.numCodespaceRanges=E.useCMap.numCodespaceRanges}return E.useCMap.forEach(function(G,K){E.contains(G)||E.mapOne(G,E.useCMap.lookup(G))}),E})}function j(E,x){return"Identity-H"===E?Promise.resolve(new f(!1,2)):"Identity-V"===E?Promise.resolve(new f(!0,2)):H.includes(E)?x?x(E).then(function(p){var m=p.cMapData,_=p.compressionType,R=new re(!0);if(_===k.CMapCompressionType.BINARY)return(new c).process(m,R,function(K){return I(R,x,K)});if(_===k.CMapCompressionType.NONE){var G=new ee.Lexer(new V.Stream(m));return F(R,G,x,null)}return Promise.reject(new Error("TODO: Only BINARY/NONE CMap compression is currently supported."))}):Promise.reject(new Error("Built-in CMap parameters are not provided.")):Promise.reject(new Error("Unknown CMap name: "+E))}return{create:E=>le(function*(){var x=E.encoding,p=E.fetchBuiltInCMap,m=E.useCMap;if((0,fe.isName)(x))return j(x.name,p);if((0,fe.isStream)(x))return F(new re,new ee.Lexer(x),p,m).then(function(G){return G.isIdentityCMap?j(G.name,p):G});throw new Error("Encoding required.")})()}}();se.CMapFactory=$},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getFontType=C,se.IdentityToUnicodeMap=se.ToUnicodeMap=se.FontFlags=se.Font=se.ErrorFont=se.SEAC_ANALYSIS_ENABLED=void 0;var k=y(2),fe=y(31),ee=y(34),e=y(33),V=y(35),H=y(36),te=y(8),re=y(37),f=y(29),c=y(12),$=y(38);const ae=[[57344,63743],[1048576,1114109]];var W=!0;se.SEAC_ANALYSIS_ENABLED=W;const N=["ascent","bbox","black","bold","charProcOperatorList","composite","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isMonospace","isSerifFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],O=["cMap","defaultEncoding","differences","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];var M={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};se.FontFlags=M;var A=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function b(G){if(G.fontMatrix&&G.fontMatrix[0]!==k.FONT_IDENTITY_MATRIX[0]){var K=.001/G.fontMatrix[0],U=G.widths;for(var z in U)U[z]*=K;G.defaultWidth*=K}}function C(G,K){switch(G){case"Type1":return"Type1C"===K?k.FontType.TYPE1C:k.FontType.TYPE1;case"CIDFontType0":return"CIDFontType0C"===K?k.FontType.CIDFONTTYPE0C:k.FontType.CIDFONTTYPE0;case"OpenType":return k.FontType.OPENTYPE;case"TrueType":return k.FontType.TRUETYPE;case"CIDFontType2":return k.FontType.CIDFONTTYPE2;case"MMType1":return k.FontType.MMTYPE1;case"Type0":return k.FontType.TYPE0;default:return k.FontType.UNKNOWN}}function P(G,K){if(void 0!==K[G])return G;var U=(0,H.getUnicodeForGlyph)(G,K);if(-1!==U)for(var z in K)if(K[z]===U)return z;return(0,k.info)("Unable to recover a standard glyph name for: "+G),G}var F=function(){function K(U,z,L,S,B,J,ie,ce){this.fontChar=U,this.unicode=z,this.accent=L,this.width=S,this.vmetric=B,this.operatorListId=J,this.isSpace=ie,this.isInFont=ce}return K.prototype.matchesForCache=function(U,z,L,S,B,J,ie,ce){return this.fontChar===U&&this.unicode===z&&this.accent===L&&this.width===S&&this.vmetric===B&&this.operatorListId===J&&this.isSpace===ie&&this.isInFont===ce},K}(),I=function(){function K(U=[]){this._map=U}return K.prototype={get length(){return this._map.length},forEach(U){for(var z in this._map)U(z,this._map[z].charCodeAt(0))},has(U){return void 0!==this._map[U]},get(U){return this._map[U]},charCodeOf(U){const z=this._map;if(z.length<=65536)return z.indexOf(U);for(const L in z)if(z[L]===U)return 0|L;return-1},amend(U){for(var z in U)this._map[z]=U[z]}},K}();se.ToUnicodeMap=I;var j=function(){function K(U,z){this.firstChar=U,this.lastChar=z}return K.prototype={get length(){return this.lastChar+1-this.firstChar},forEach(U){for(var z=this.firstChar,L=this.lastChar;z<=L;z++)U(z,z)},has(U){return this.firstChar<=U&&U<=this.lastChar},get(U){if(this.firstChar<=U&&U<=this.lastChar)return String.fromCharCode(U)},charCodeOf(U){return Number.isInteger(U)&&U>=this.firstChar&&U<=this.lastChar?U:-1},amend(U){(0,k.unreachable)("Should not call amend()")}},K}();se.IdentityToUnicodeMap=j;var E=function(){function K(J,ie,ce){J[ie]=ce>>8&255,J[ie+1]=255&ce}function U(J,ie,ce){J[ie]=ce>>24&255,J[ie+1]=ce>>16&255,J[ie+2]=ce>>8&255,J[ie+3]=255&ce}function z(J,ie,ce){var pe,ye;if(ce instanceof Uint8Array)J.set(ce,ie);else if("string"==typeof ce)for(pe=0,ye=ce.length;pe<ye;pe++)J[ie++]=255&ce.charCodeAt(pe);else for(pe=0,ye=ce.length;pe<ye;pe++)J[ie++]=255&ce[pe]}function L(J){this.sfnt=J,this.tables=Object.create(null)}L.getSearchParams=function(ie,ce){for(var pe=1,ye=0;(pe^ie)>pe;)pe<<=1,ye++;var Te=pe*ce;return{range:Te,entry:ye,rangeShift:ce*ie-Te}};return L.prototype={toArray:function(){var ie=this.sfnt,ce=this.tables,pe=Object.keys(ce);pe.sort();var Te,_e,we,xe,ye=pe.length,Ce=12+16*ye,Me=[Ce];for(Te=0;Te<ye;Te++)Me.push(Ce+=(ce[pe[Te]].length+3&-4)>>>0);var We=new Uint8Array(Ce);for(Te=0;Te<ye;Te++)z(We,Me[Te],ce[pe[Te]]);"true"===ie&&(ie=(0,k.string32)(65536)),We[0]=255&ie.charCodeAt(0),We[1]=255&ie.charCodeAt(1),We[2]=255&ie.charCodeAt(2),We[3]=255&ie.charCodeAt(3),K(We,4,ye);var Xe=L.getSearchParams(ye,16);for(K(We,6,Xe.range),K(We,8,Xe.entry),K(We,10,Xe.rangeShift),Ce=12,Te=0;Te<ye;Te++){We[Ce]=255&(xe=pe[Te]).charCodeAt(0),We[Ce+1]=255&xe.charCodeAt(1),We[Ce+2]=255&xe.charCodeAt(2),We[Ce+3]=255&xe.charCodeAt(3);var Qe=0;for(_e=Me[Te],we=Me[Te+1];_e<we;_e+=4)Qe=Qe+(0,te.readUint32)(We,_e)>>>0;U(We,Ce+4,Qe),U(We,Ce+8,Me[Te]),U(We,Ce+12,ce[xe].length),Ce+=16}return We},addTable:function(ie,ce){if(ie in this.tables)throw new Error("Table "+ie+" already exists");this.tables[ie]=ce}},L}(),x=function(){function K(Qe,Ye,Je){var He;this.name=Qe,this.loadedName=Je.loadedName,this.isType3Font=Je.isType3Font,this.missingFile=!1,this.glyphCache=Object.create(null),this.isSerifFont=!!(Je.flags&M.Serif),this.isSymbolicFont=!!(Je.flags&M.Symbolic),this.isMonospace=!!(Je.flags&M.FixedPitch);var it=Je.type,dt=Je.subtype;this.type=it,this.subtype=dt;let pt="sans-serif";if(this.isMonospace?pt="monospace":this.isSerifFont&&(pt="serif"),this.fallbackName=pt,this.differences=Je.differences,this.widths=Je.widths,this.defaultWidth=Je.defaultWidth,this.composite=Je.composite,this.cMap=Je.cMap,this.ascent=Je.ascent/1e3,this.descent=Je.descent/1e3,this.fontMatrix=Je.fontMatrix,this.bbox=Je.bbox,this.defaultEncoding=Je.defaultEncoding,this.toUnicode=Je.toUnicode,this.fallbackToUnicode=Je.fallbackToUnicode||new I,this.toFontChar=[],"Type3"!==Je.type){if(this.cidEncoding=Je.cidEncoding,this.vertical=!!Je.vertical,this.vertical&&(this.vmetrics=Je.vmetrics,this.defaultVMetrics=Je.defaultVMetrics),!Ye||Ye.isEmpty)return Ye&&(0,k.warn)('Font file is empty in "'+Qe+'" ('+this.loadedName+")"),void this.fallbackToSystemFont();[it,dt]=function _e(Qe,{type:Ye,subtype:Je,composite:He}){let it,dt;return function ie(Qe){var Ye=Qe.peekBytes(4);return 65536===(0,te.readUint32)(Ye,0)||"true"===(0,k.bytesToString)(Ye)}(Qe)||ce(Qe)?it=He?"CIDFontType2":"TrueType":function pe(Qe){var Ye=Qe.peekBytes(4);return"OTTO"===(0,k.bytesToString)(Ye)}(Qe)?it=He?"CIDFontType2":"OpenType":function ye(Qe){var Ye=Qe.peekBytes(2);return 37===Ye[0]&&33===Ye[1]||128===Ye[0]&&1===Ye[1]}(Qe)?it=He?"CIDFontType0":"MMType1"===Ye?"MMType1":"Type1":function Te(Qe){const Ye=Qe.peekBytes(4);return Ye[0]>=1&&Ye[3]>=1&&Ye[3]<=4}(Qe)?He?(it="CIDFontType0",dt="CIDFontType0C"):(it="MMType1"===Ye?"MMType1":"Type1",dt="Type1C"):((0,k.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),it=Ye,dt=Je),[it,dt]}(Ye,Je),(it!==this.type||dt!==this.subtype)&&(0,k.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${it}/${dt}.`);try{var Dt;switch(it){case"MMType1":(0,k.info)("MMType1 font ("+Qe+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var et="Type1C"===dt||"CIDFontType0C"===dt?new R(Ye,Je):new _(Qe,Ye,Je);b(Je),Dt=this.convert(Qe,et,Je);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",Dt=this.checkAndRepair(Qe,Ye,Je),this.isOpenType&&(b(Je),it="OpenType");break;default:throw new k.FormatError(`Font ${it} is not supported`)}}catch(st){return(0,k.warn)(st),void this.fallbackToSystemFont()}this.data=Dt,this.fontType=C(it,dt),this.fontMatrix=Je.fontMatrix,this.widths=Je.widths,this.defaultWidth=Je.defaultWidth,this.toUnicode=Je.toUnicode,this.seacMap=Je.seacMap}else{for(He=0;He<256;He++)this.toFontChar[He]=this.differences[He]||Je.defaultEncoding[He];this.fontType=k.FontType.TYPE3}}function U(Qe,Ye){return(Qe<<8)+Ye}function L(Qe,Ye){var Je=(Qe<<8)+Ye;return 32768&Je?Je-65536:Je}function B(Qe){return String.fromCharCode(Qe>>8&255,255&Qe)}function J(Qe){return Qe>32767?Qe=32767:Qe<-32768&&(Qe=-32768),String.fromCharCode(Qe>>8&255,255&Qe)}function ce(Qe){const Ye=Qe.peekBytes(4);return"ttcf"===(0,k.bytesToString)(Ye)}function we(Qe,Ye,Je){for(var it,He=[],dt=0,pt=Qe.length;dt<pt;dt++)-1!==(it=(0,H.getUnicodeForGlyph)(Qe[dt],Ye))&&(He[dt]=it);for(var Dt in Je)-1!==(it=(0,H.getUnicodeForGlyph)(Je[Dt],Ye))&&(He[+Dt]=it);return He}function De(Qe,Ye,Je){var He=Object.create(null),it=[],dt=0,pt=ae[dt][0],Dt=ae[dt][1];for(var et in Qe){var st=Qe[et|=0];if(Ye(st)){if(pt>Dt){if(++dt>=ae.length){(0,k.warn)("Ran out of space in font private use area.");break}pt=ae[dt][0],Dt=ae[dt][1]}var Ge=pt++;0===st&&(st=Je),He[Ge]=st,it[et]=Ge}}return{toFontChar:it,charCodeToGlyphId:He,nextAvailableFontCharCode:pt}}function Ce(Qe,Ye){var dt,pt,Dt,et,Je=function xe(Qe,Ye){var Je=[];for(var He in Qe)Qe[He]>=Ye||Je.push({fontCharCode:0|He,glyphId:Qe[He]});0===Je.length&&Je.push({fontCharCode:0,glyphId:0}),Je.sort(function(Ze,je){return Ze.fontCharCode-je.fontCharCode});for(var it=[],dt=Je.length,pt=0;pt<dt;){var Dt=Je[pt].fontCharCode,et=[Je[pt].glyphId];++pt;for(var st=Dt;pt<dt&&st+1===Je[pt].fontCharCode&&(et.push(Je[pt].glyphId),++pt,65535!=++st););it.push([Dt,st,et])}return it}(Qe,Ye),He=Je[Je.length-1][1]>65535?2:1,it="\0\0"+B(He)+"\0\x03\0\x01"+(0,k.string32)(4+8*He);for(dt=Je.length-1;dt>=0&&!(Je[dt][0]<=65535);--dt);var st=dt+1;Je[dt][0]<65535&&65535===Je[dt][1]&&(Je[dt][1]=65534);var Pe,Fe,$e,at,Ge=Je[dt][1]<65535?1:0,Ze=st+Ge,je=E.getSearchParams(Ze,2),Ue="",ct="",_t="",Ut="",jt="",rt=0;for(dt=0,pt=st;dt<pt;dt++){$e=(Pe=Je[dt])[1],Ue+=B(Fe=Pe[0]),ct+=B($e);var lt=!0;for(Dt=1,et=(at=Pe[2]).length;Dt<et;++Dt)if(at[Dt]!==at[Dt-1]+1){lt=!1;break}if(lt)_t+=B(at[0]-Fe&65535),Ut+=B(0);else{var bt=2*(Ze-dt)+2*rt;for(rt+=$e-Fe+1,_t+=B(0),Ut+=B(bt),Dt=0,et=at.length;Dt<et;++Dt)jt+=B(at[Dt])}}Ge>0&&(ct+="\xff\xff",Ue+="\xff\xff",_t+="\0\x01",Ut+="\0\0");var mt="\0\0"+B(2*Ze)+B(je.range)+B(je.entry)+B(je.rangeShift)+ct+"\0\0"+Ue+_t+Ut+jt,kt="",Lt="";if(He>1){for(it+="\0\x03\0\n"+(0,k.string32)(4+8*He+4+mt.length),kt="",dt=0,pt=Je.length;dt<pt;dt++){Fe=(Pe=Je[dt])[0];var It=(at=Pe[2])[0];for(Dt=1,et=at.length;Dt<et;++Dt)at[Dt]!==at[Dt-1]+1&&($e=Pe[0]+Dt-1,kt+=(0,k.string32)(Fe)+(0,k.string32)($e)+(0,k.string32)(It),Fe=$e+1,It=at[Dt]);kt+=(0,k.string32)(Fe)+(0,k.string32)(Pe[1])+(0,k.string32)(It)}Lt="\0\f\0\0"+(0,k.string32)(kt.length+16)+"\0\0\0\0"+(0,k.string32)(kt.length/12)}return it+"\0\x04"+B(mt.length+4)+mt+Lt+kt}function Ne(Qe,Ye,Je){Je=Je||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};var He=0,it=0,dt=0,pt=0,Dt=null,et=0;if(Ye){for(var st in Ye){(Dt>(st|=0)||!Dt)&&(Dt=st),et<st&&(et=st);var Ge=(0,H.getUnicodeRangeFor)(st);if(Ge<32)He|=1<<Ge;else if(Ge<64)it|=1<<Ge-32;else if(Ge<96)dt|=1<<Ge-64;else{if(!(Ge<123))throw new k.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");pt|=1<<Ge-96}}et>65535&&(et=65535)}else Dt=0,et=255;var Ze=Qe.bbox||[0,0,0,0],Ue=Qe.ascentScaled?1:(Je.unitsPerEm||1/(Qe.fontMatrix||k.FONT_IDENTITY_MATRIX)[0])/1e3,ct=Je.ascent||Math.round(Ue*(Qe.ascent||Ze[3])),_t=Je.descent||Math.round(Ue*(Qe.descent||Ze[1]));_t>0&&Qe.descent>0&&Ze[1]<0&&(_t=-_t);var Ut=Je.yMax||ct,jt=-Je.yMin||-_t;return"\0\x03\x02$\x01\xf4\0\x05\0\0\x02\x8a\x02\xbb\0\0\0\x8c\x02\x8a\x02\xbb\0\0\x01\xdf\x001\x01\x02\0\0\0\0\x06"+String.fromCharCode(Qe.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,k.string32)(He)+(0,k.string32)(it)+(0,k.string32)(dt)+(0,k.string32)(pt)+"*21*"+B(Qe.italicAngle?1:0)+B(Dt||Qe.firstChar)+B(et||Qe.lastChar)+B(ct)+B(_t)+"\0d"+B(Ut)+B(jt)+"\0\0\0\0\0\0\0\0"+B(Qe.xHeight)+B(Qe.capHeight)+B(0)+B(Dt||Qe.firstChar)+"\0\x03"}function We(Qe){var Ye=Math.floor(65536*Qe.italicAngle);return"\0\x03\0\0"+(0,k.string32)(Ye)+"\0\0\0\0"+(0,k.string32)(Qe.fixedPitch)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function Xe(Qe,Ye){Ye||(Ye=[[],[]]);var it,dt,pt,Dt,et,Je=[Ye[0][0]||"Original licence",Ye[0][1]||Qe,Ye[0][2]||"Unknown",Ye[0][3]||"uniqueID",Ye[0][4]||Qe,Ye[0][5]||"Version 0.11",Ye[0][6]||"",Ye[0][7]||"Unknown",Ye[0][8]||"Unknown",Ye[0][9]||"Unknown"],He=[];for(it=0,dt=Je.length;it<dt;it++){var st=[];for(pt=0,Dt=(et=Ye[1][it]||Je[it]).length;pt<Dt;pt++)st.push(B(et.charCodeAt(pt)));He.push(st.join(""))}var Ge=[Je,He],Ze=["\0\x01","\0\x03"],je=["\0\0","\0\x01"],Ue=["\0\0","\x04\t"],ct=Je.length*Ze.length,_t="\0\0"+B(ct)+B(12*ct+6),Ut=0;for(it=0,dt=Ze.length;it<dt;it++){var jt=Ge[it];for(pt=0,Dt=jt.length;pt<Dt;pt++)et=jt[pt],_t+=Ze[it]+je[it]+Ue[it]+B(pt)+B(et.length)+B(Ut),Ut+=et.length}return _t+(Je.join("")+He.join(""))}return K.prototype={name:null,font:null,mimetype:null,disableFontFace:!1,get renderer(){var Qe=re.FontRendererFactory.create(this,W);return(0,k.shadow)(this,"renderer",Qe)},exportData(Qe=!1){const Ye=Qe?[...N,...O]:N,Je=Object.create(null);let He,it;for(He of Ye)it=this[He],void 0!==it&&(Je[He]=it);return Je},fallbackToSystemFont:function(){this.missingFile=!0;var Ye=this.name,Je=this.type,He=this.subtype;let it=Ye.replace(/[,_]/g,"-").replace(/\s/g,"");var dt=(0,V.getStdFontMap)(),pt=(0,V.getNonStdFontMap)(),Dt=!!dt[it]||!(!pt[it]||!dt[pt[it]]);if(it=dt[it]||pt[it]||it,this.bold=-1!==it.search(/bold/gi),this.italic=-1!==it.search(/oblique/gi)||-1!==it.search(/italic/gi),this.black=-1!==Ye.search(/Black/g),this.remeasure=Object.keys(this.widths).length>0,Dt&&"CIDFontType2"===Je&&this.cidEncoding.startsWith("Identity-")){const Ge=(0,V.getGlyphMapForStandardFonts)(),Ze=[];for(const je in Ge)Ze[+je]=Ge[je];if(/Arial-?Black/i.test(Ye)){var et=(0,V.getSupplementalGlyphMapForArialBlack)();for(const je in et)Ze[+je]=et[je]}else if(/Calibri/i.test(Ye)){const je=(0,V.getSupplementalGlyphMapForCalibri)();for(const Ue in je)Ze[+Ue]=je[Ue]}this.toUnicode instanceof j||this.toUnicode.forEach(function(je,Ue){Ze[+je]=Ue}),this.toFontChar=Ze,this.toUnicode=new I(Ze)}else if(/Symbol/i.test(it))this.toFontChar=we(e.SymbolSetEncoding,(0,ee.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(it))/Wingdings/i.test(Ye)&&(0,k.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=we(e.ZapfDingbatsEncoding,(0,ee.getDingbatsGlyphsUnicode)(),this.differences);else if(Dt)this.toFontChar=we(this.defaultEncoding,(0,ee.getGlyphsUnicode)(),this.differences);else{const Ge=(0,ee.getGlyphsUnicode)(),Ze=[];if(this.toUnicode.forEach((je,Ue)=>{if(!this.composite){const _t=(0,H.getUnicodeForGlyph)(this.differences[je]||this.defaultEncoding[je],Ge);-1!==_t&&(Ue=_t)}Ze[+je]=Ue}),this.composite&&this.toUnicode instanceof j&&/Verdana/i.test(Ye)){const je=(0,V.getGlyphMapForStandardFonts)();for(const Ue in je)Ze[+Ue]=je[Ue]}this.toFontChar=Ze}this.loadedName=it.split("-")[0],this.fontType=C(Je,He)},checkAndRepair:function(Ye,Je,He){const it=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function dt(Zt,Jt){const $t=Object.create(null);$t["OS/2"]=null,$t.cmap=null,$t.head=null,$t.hhea=null,$t.hmtx=null,$t.maxp=null,$t.name=null,$t.post=null;for(let pn=0;pn<Jt;pn++){const sn=pt(Zt);it.includes(sn.tag)&&0!==sn.length&&($t[sn.tag]=sn)}return $t}function pt(Zt){var Jt=(0,k.bytesToString)(Zt.getBytes(4)),$t=Zt.getInt32()>>>0,pn=Zt.getInt32()>>>0,sn=Zt.getInt32()>>>0,tn=Zt.pos;Zt.pos=Zt.start?Zt.start:0,Zt.skip(pn);var Wn=Zt.getBytes(sn);return Zt.pos=tn,"head"===Jt&&(Wn[8]=Wn[9]=Wn[10]=Wn[11]=0,Wn[17]|=32),{tag:Jt,checksum:$t,length:sn,offset:pn,data:Wn}}function Dt(Zt){return{version:(0,k.bytesToString)(Zt.getBytes(4)),numTables:Zt.getUint16(),searchRange:Zt.getUint16(),entrySelector:Zt.getUint16(),rangeShift:Zt.getUint16()}}function je(Zt,Jt,$t,pn,sn,tn){var Wn={length:0,sizeOfInstructions:0};if($t-Jt<=12)return Wn;var vn=Zt.subarray(Jt,$t),fn=L(vn[0],vn[1]);if(fn<0)return function z(Qe,Ye,Je){Qe[Ye+1]=Je,Qe[Ye]=Je>>>8}(vn,0,fn=-1),pn.set(vn,sn),Wn.length=vn.length,Wn;var ai,mi=10,Dn=0;for(ai=0;ai<fn;ai++)Dn=1+(vn[mi]<<8|vn[mi+1]),mi+=2;var oi=mi,wi=vn[mi]<<8|vn[mi+1];Wn.sizeOfInstructions=wi;var Mi=mi+=2+wi,Mn=0;for(ai=0;ai<Dn;ai++){var an=vn[mi++];192&an&&(vn[mi-1]=63&an);let qi=2;2&an?qi=1:16&an&&(qi=0);let ki=2;4&an?ki=1:32&an&&(ki=0);const qt=qi+ki;if(Mn+=qt,8&an){var sr=vn[mi++];ai+=sr,Mn+=sr*qt}}if(0===Mn)return Wn;var li=mi+Mn;return li>vn.length?Wn:!tn&&wi>0?(pn.set(vn.subarray(0,oi),sn),pn.set([0,0],sn+oi),pn.set(vn.subarray(Mi,li),sn+oi+2),vn.length-(li-=wi)>3&&(li=li+3&-4),Wn.length=li,Wn):vn.length-li>3?(pn.set(vn.subarray(0,li=li+3&-4),sn),Wn.length=li,Wn):(pn.set(vn,sn),Wn.length=vn.length,Wn)}function Ut(Zt){var Jt=(Je.start?Je.start:0)+Zt.offset;Je.pos=Jt;var $t=[[],[]],pn=Zt.length,sn=Jt+pn;if(0!==Je.getUint16()||pn<6)return $t;var Dn,zi,vn=Je.getUint16(),fn=Je.getUint16(),ai=[];for(Dn=0;Dn<vn&&Je.pos+12<=sn;Dn++){var oi={platform:Je.getUint16(),encoding:Je.getUint16(),language:Je.getUint16(),name:Je.getUint16(),length:Je.getUint16(),offset:Je.getUint16()};(1===oi.platform&&0===oi.encoding&&0===oi.language||3===oi.platform&&1===oi.encoding&&1033===oi.language)&&ai.push(oi)}for(Dn=0,zi=ai.length;Dn<zi;Dn++){var wi=ai[Dn];if(!(wi.length<=0)){var Mi=Jt+fn+wi.offset;if(!(Mi+wi.length>sn)){Je.pos=Mi;var Mn=wi.name;if(wi.encoding){for(var an="",sr=0,li=wi.length;sr<li;sr+=2)an+=String.fromCharCode(Je.getUint16());$t[1][Mn]=an}else $t[0][Mn]=(0,k.bytesToString)(Je.getBytes(wi.length))}}}return $t}var jt=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function rt(Zt,Jt){for(var sn,tn,Wn,vn,fn,$t=Zt.data,pn=0,ai=0,mi=0,Dn=[],zi=[],oi=[],wi=Jt.tooComplexToFollowFunctions,Mi=!1,Mn=0,an=0,sr=$t.length;pn<sr;){var li=$t[pn++];if(64===li)if(tn=$t[pn++],Mi||an)pn+=tn;else for(sn=0;sn<tn;sn++)Dn.push($t[pn++]);else if(65===li)if(tn=$t[pn++],Mi||an)pn+=2*tn;else for(sn=0;sn<tn;sn++)Wn=$t[pn++],Dn.push(Wn<<8|$t[pn++]);else if(176==(248&li))if(tn=li-176+1,Mi||an)pn+=tn;else for(sn=0;sn<tn;sn++)Dn.push($t[pn++]);else if(184==(248&li))if(tn=li-184+1,Mi||an)pn+=2*tn;else for(sn=0;sn<tn;sn++)Wn=$t[pn++],Dn.push(Wn<<8|$t[pn++]);else if(43!==li||wi)if(44!==li||wi){if(45===li)if(Mi)Mi=!1,ai=pn;else{if(!(fn=zi.pop()))return(0,k.warn)("TT: ENDF bad stack"),void(Jt.hintsValid=!1);vn=oi.pop(),$t=fn.data,pn=fn.i,Jt.functionsStackDeltas[vn]=Dn.length-fn.stackTop}else if(137===li)(Mi||an)&&((0,k.warn)("TT: nested IDEFs not allowed"),wi=!0),Mi=!0,mi=pn;else if(88===li)++Mn;else if(27===li)an=Mn;else if(89===li)an===Mn&&(an=0),--Mn;else if(28===li&&!Mi&&!an){var qi=Dn[Dn.length-1];qi>0&&(pn+=qi-1)}}else(Mi||an)&&((0,k.warn)("TT: nested FDEFs not allowed"),wi=!0),Mi=!0,mi=pn,vn=Dn.pop(),Jt.functionsDefined[vn]={data:$t,i:pn};else if(!Mi&&!an)if(vn=Dn[Dn.length-1],isNaN(vn))(0,k.info)("TT: CALL empty stack (or invalid entry).");else if(Jt.functionsUsed[vn]=!0,vn in Jt.functionsStackDeltas){const qt=Dn.length+Jt.functionsStackDeltas[vn];if(qt<0)return(0,k.warn)("TT: CALL invalid functions stack delta."),void(Jt.hintsValid=!1);Dn.length=qt}else if(vn in Jt.functionsDefined&&!oi.includes(vn)){if(zi.push({data:$t,i:pn,stackTop:Dn.length-1}),oi.push(vn),!(fn=Jt.functionsDefined[vn]))return(0,k.warn)("TT: CALL non-existent function"),void(Jt.hintsValid=!1);$t=fn.data,pn=fn.i}if(!Mi&&!an){let qt=0;for(li<=142?qt=jt[li]:li>=192&&li<=223?qt=-1:li>=224&&(qt=-2),li>=113&&li<=117&&(tn=Dn.pop(),isNaN(tn)||(qt=2*-tn));qt<0&&Dn.length>0;)Dn.pop(),qt++;for(;qt>0;)Dn.push(NaN),qt--}}Jt.tooComplexToFollowFunctions=wi;var ki=[$t];pn>$t.length&&ki.push(new Uint8Array(pn-$t.length)),mi>ai&&((0,k.warn)("TT: complementing a missing function tail"),ki.push(new Uint8Array([34,45]))),function Fe(Zt,Jt){if(Jt.length>1){var pn,sn,$t=0;for(pn=0,sn=Jt.length;pn<sn;pn++)$t+=Jt[pn].length;$t=$t+3&-4;var tn=new Uint8Array($t),Wn=0;for(pn=0,sn=Jt.length;pn<sn;pn++)tn.set(Jt[pn],Wn),Wn+=Jt[pn].length;Zt.data=tn,Zt.length=$t}}(Zt,ki)}let at,lt,bt,Et;if(ce(Je=new c.Stream(new Uint8Array(Je.getBytes())))){const Zt=function st(Zt,Jt){const{numFonts:$t,offsetTable:pn}=function et(Zt){const Jt=(0,k.bytesToString)(Zt.getBytes(4));(0,k.assert)("ttcf"===Jt,"Must be a TrueType Collection font.");const $t=Zt.getUint16(),pn=Zt.getUint16(),sn=Zt.getInt32()>>>0,tn=[];for(let vn=0;vn<sn;vn++)tn.push(Zt.getInt32()>>>0);const Wn={ttcTag:Jt,majorVersion:$t,minorVersion:pn,numFonts:sn,offsetTable:tn};switch($t){case 1:return Wn;case 2:return Wn.dsigTag=Zt.getInt32()>>>0,Wn.dsigLength=Zt.getInt32()>>>0,Wn.dsigOffset=Zt.getInt32()>>>0,Wn}throw new k.FormatError(`Invalid TrueType Collection majorVersion: ${$t}.`)}(Zt);for(let sn=0;sn<$t;sn++){Zt.pos=(Zt.start||0)+pn[sn];const tn=Dt(Zt),Wn=dt(Zt,tn.numTables);if(!Wn.name)throw new k.FormatError('TrueType Collection font must contain a "name" table.');const vn=Ut(Wn.name);for(let fn=0,ai=vn.length;fn<ai;fn++)for(let mi=0,Dn=vn[fn].length;mi<Dn;mi++){const zi=vn[fn][mi];if(zi&&zi.replace(/\s/g,"")===Jt)return{header:tn,tables:Wn}}}throw new k.FormatError(`TrueType Collection does not contain "${Jt}" font.`)}(Je,this.name);at=Zt.header,lt=Zt.tables}else at=Dt(Je),lt=dt(Je,at.numTables);var mt=!lt["CFF "];if(mt){if(!lt.loca)throw new k.FormatError('Required "loca" table is not found');lt.glyf||((0,k.warn)('Required "glyf" table is not found -- trying to recover.'),lt.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{if("OTTO"===at.version&&(!He.composite||!((He.cidToGidMap||[]).length>0)&&He.cMap instanceof f.IdentityCMap)||!lt.head||!lt.hhea||!lt.maxp||!lt.post)return Et=new c.Stream(lt["CFF "].data),bt=new R(Et,He),b(He),this.convert(Ye,bt,He);delete lt.glyf,delete lt.loca,delete lt.fpgm,delete lt.prep,delete lt["cvt "],this.isOpenType=!0}if(!lt.maxp)throw new k.FormatError('Required "maxp" table is not found');Je.pos=(Je.start||0)+lt.maxp.offset;var kt=Je.getInt32();const Lt=Je.getUint16();let It=Lt+1,Gt=!0;It>65535&&(Gt=!1,It=Lt,(0,k.warn)("Not enough space in glyfs to duplicate first glyph."));var rn=0,un=0;kt>=65536&&lt.maxp.length>=22&&(Je.pos+=8,Je.getUint16()>2&&(lt.maxp.data[14]=0,lt.maxp.data[15]=2),Je.pos+=4,rn=Je.getUint16(),Je.pos+=4,un=Je.getUint16()),lt.maxp.data[4]=It>>8,lt.maxp.data[5]=255&It;var Pn=function $e(Zt,Jt,$t,pn){var sn={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(Zt&&rt(Zt,sn),Jt&&rt(Jt,sn),Zt&&function Pe(Zt,Jt){if(!Zt.tooComplexToFollowFunctions){if(Zt.functionsDefined.length>Jt)return(0,k.warn)("TT: more functions defined than expected"),void(Zt.hintsValid=!1);for(var $t=0,pn=Zt.functionsUsed.length;$t<pn;$t++){if($t>Jt)return(0,k.warn)("TT: invalid function id: "+$t),void(Zt.hintsValid=!1);if(Zt.functionsUsed[$t]&&!Zt.functionsDefined[$t])return(0,k.warn)("TT: undefined function: "+$t),void(Zt.hintsValid=!1)}}}(sn,pn),$t&&1&$t.length){var tn=new Uint8Array($t.length+1);tn.set($t.data),$t.data=tn}return sn.hintsValid}(lt.fpgm,lt.prep,lt["cvt "],rn);if(Pn||(delete lt.fpgm,delete lt.prep,delete lt["cvt "]),function Ze(Zt,Jt,$t,pn,sn){if(Jt){Zt.pos=(Zt.start?Zt.start:0)+Jt.offset,Zt.pos+=4,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=2,Zt.pos+=8,Zt.pos+=2;var tn=Zt.getUint16();tn>pn&&((0,k.info)("The numOfMetrics ("+tn+") should not be greater than the numGlyphs ("+pn+")"),Jt.data[34]=(65280&(tn=pn))>>8,Jt.data[35]=255&tn);var vn=pn-tn-($t.length-4*tn>>1);if(vn>0){var fn=new Uint8Array($t.length+2*vn);fn.set($t.data),sn&&(fn[$t.length]=$t.data[2],fn[$t.length+1]=$t.data[3]),$t.data=fn}}else $t&&($t.data=null)}(Je,lt.hhea,lt.hmtx,It,Gt),!lt.head)throw new k.FormatError('Required "head" table is not found');!function Ue(Zt,Jt,$t){var pn=Zt.data,sn=function S(Qe,Ye,Je,He){return(Qe<<24)+(Ye<<16)+(Je<<8)+He}(pn[0],pn[1],pn[2],pn[3]);sn>>16!=1&&((0,k.info)("Attempting to fix invalid version in head table: "+sn),pn[0]=0,pn[1]=1,pn[2]=0,pn[3]=0);var tn=U(pn[50],pn[51]);if(tn<0||tn>1){(0,k.info)("Attempting to fix invalid indexToLocFormat in head table: "+tn);var Wn=Jt+1;if($t===Wn<<1)pn[50]=0,pn[51]=0;else{if($t!==Wn<<2)throw new k.FormatError("Could not fix indexToLocFormat: "+tn);pn[50]=0,pn[51]=1}}}(lt.head,Lt,mt?lt.loca.length:0);var En=Object.create(null);if(mt){var fi=U(lt.head.data[50],lt.head.data[51]),Ti=function ct(Zt,Jt,$t,pn,sn,tn,Wn){var vn,fn,ai;pn?(vn=4,fn=function(Wi,Pr){return Wi[Pr]<<24|Wi[Pr+1]<<16|Wi[Pr+2]<<8|Wi[Pr+3]},ai=function(Wi,Pr,aa){Wi[Pr]=aa>>>24&255,Wi[Pr+1]=aa>>16&255,Wi[Pr+2]=aa>>8&255,Wi[Pr+3]=255&aa}):(vn=2,fn=function(Wi,Pr){return Wi[Pr]<<9|Wi[Pr+1]<<1},ai=function(Wi,Pr,aa){Wi[Pr]=aa>>9&255,Wi[Pr+1]=aa>>1&255});var mi=tn?$t+1:$t,Dn=vn*(1+mi),zi=new Uint8Array(Dn);zi.set(Zt.data.subarray(0,Dn)),Zt.data=zi;var Mn,an,oi=Jt.data,wi=oi.length,Mi=new Uint8Array(wi);const sr=[];for(Mn=0,an=0;Mn<$t+1;Mn++,an+=vn){let Xn=fn(zi,an);Xn>wi&&(Xn=wi),sr.push({index:Mn,offset:Xn,endOffset:0})}for(sr.sort((Xn,Wi)=>Xn.offset-Wi.offset),Mn=0;Mn<$t;Mn++)sr[Mn].endOffset=sr[Mn+1].offset;sr.sort((Xn,Wi)=>Xn.index-Wi.index);var li=Object.create(null),qi=0;for(ai(zi,0,qi),Mn=0,an=vn;Mn<$t;Mn++,an+=vn){var ki=je(oi,sr[Mn].offset,sr[Mn].endOffset,Mi,qi,sn),qt=ki.length;0===qt&&(li[Mn]=!0),ki.sizeOfInstructions>Wn&&(Wn=ki.sizeOfInstructions),ai(zi,an,qi+=qt)}if(0===qi){var ws=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(Mn=0,an=vn;Mn<mi;Mn++,an+=vn)ai(zi,an,ws.length);Jt.data=ws}else if(tn){var jn=fn(zi,vn);Mi.length>jn+qi?Jt.data=Mi.subarray(0,jn+qi):(Jt.data=new Uint8Array(jn+qi),Jt.data.set(Mi.subarray(0,qi))),Jt.data.set(Mi.subarray(0,jn),qi),ai(Zt.data,zi.length-vn,qi+jn)}else Jt.data=Mi.subarray(0,qi);return{missingGlyphs:li,maxSizeOfInstructions:Wn}}(lt.loca,lt.glyf,Lt,fi,Pn,Gt,un);En=Ti.missingGlyphs,kt>=65536&&lt.maxp.length>=22&&(lt.maxp.data[26]=Ti.maxSizeOfInstructions>>8,lt.maxp.data[27]=255&Ti.maxSizeOfInstructions)}if(!lt.hhea)throw new k.FormatError('Required "hhea" table is not found');0===lt.hhea.data[10]&&0===lt.hhea.data[11]&&(lt.hhea.data[10]=255,lt.hhea.data[11]=255);var Li={unitsPerEm:U(lt.head.data[18],lt.head.data[19]),yMax:U(lt.head.data[42],lt.head.data[43]),yMin:L(lt.head.data[38],lt.head.data[39]),ascent:U(lt.hhea.data[4],lt.hhea.data[5]),descent:L(lt.hhea.data[6],lt.hhea.data[7])};this.ascent=Li.ascent/Li.unitsPerEm,this.descent=Li.descent/Li.unitsPerEm,lt.post&&function _t(Zt,Jt,$t){var pn=(Je.start?Je.start:0)+Zt.offset;Je.pos=pn;var tn=pn+Zt.length,Wn=Je.getInt32();Je.skip(28);var vn,ai,fn=!0;switch(Wn){case 65536:vn=A;break;case 131072:var mi=Je.getUint16();if(mi!==$t){fn=!1;break}var Dn=[];for(ai=0;ai<mi;++ai){var zi=Je.getUint16();if(zi>=32768){fn=!1;break}Dn.push(zi)}if(!fn)break;for(var oi=[],wi=[];Je.pos<tn;){var Mi=Je.getByte();for(wi.length=Mi,ai=0;ai<Mi;++ai)wi[ai]=String.fromCharCode(Je.getByte());oi.push(wi.join(""))}for(vn=[],ai=0;ai<mi;++ai){var Mn=Dn[ai];vn.push(Mn<258?A[Mn]:oi[Mn-258])}break;case 196608:break;default:(0,k.warn)("Unknown/unsupported post table version "+Wn),fn=!1,Jt.defaultEncoding&&(vn=Jt.defaultEncoding)}return Jt.glyphNames=vn,fn}(lt.post,He,Lt),lt.post={tag:"post",data:We(He)};const Qn=[];function pi(Zt){return!En[Zt]}if(He.composite){var ji=He.cidToGidMap||[],_i=0===ji.length;He.cMap.forEach(function(Zt,Jt){if(Jt>65535)throw new k.FormatError("Max size of CID is 65,535");var $t=-1;_i?$t=Jt:void 0!==ji[Jt]&&($t=ji[Jt]),$t>=0&&$t<Lt&&pi($t)&&(Qn[Zt]=$t)})}else{var lr=function Ge(Zt,Jt,$t,pn){if(!Zt)return(0,k.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var sn,tn=(Jt.start?Jt.start:0)+Zt.offset;Jt.pos=tn,Jt.skip(2);for(var vn,Wn=Jt.getUint16(),fn=!1,ai=0;ai<Wn;ai++){var mi=Jt.getUint16(),Dn=Jt.getUint16(),zi=Jt.getInt32()>>>0,oi=!1;if((!vn||vn.platformId!==mi||vn.encodingId!==Dn)&&(0===mi&&(0===Dn||1===Dn||3===Dn)||1===mi&&0===Dn?oi=!0:3!==mi||1!==Dn||!pn&&vn?$t&&3===mi&&0===Dn&&(oi=!0,fn=!0):(oi=!0,$t||(fn=!0)),oi&&(vn={platformId:mi,encodingId:Dn,offset:zi}),fn))break}if(vn&&(Jt.pos=tn+vn.offset),!vn||-1===Jt.peekByte())return(0,k.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var wi=Jt.getUint16();Jt.skip(4);var an,sr,Mi=!1,Mn=[];if(0===wi){for(an=0;an<256;an++){var li=Jt.getByte();li&&Mn.push({charCode:an,glyphId:li})}Mi=!0}else if(4===wi){var qi=Jt.getUint16()>>1;Jt.skip(6);var ki,qt=[];for(ki=0;ki<qi;ki++)qt.push({end:Jt.getUint16()});for(Jt.skip(2),ki=0;ki<qi;ki++)qt[ki].start=Jt.getUint16();for(ki=0;ki<qi;ki++)qt[ki].delta=Jt.getUint16();var ws=0;for(ki=0;ki<qi;ki++){sn=qt[ki];var jn=Jt.getUint16();if(jn){var Xn=(jn>>1)-(qi-ki);sn.offsetIndex=Xn,ws=Math.max(ws,Xn+sn.end-sn.start+1)}else sn.offsetIndex=-1}var Wi=[];for(an=0;an<ws;an++)Wi.push(Jt.getUint16());for(ki=0;ki<qi;ki++){var Pr=(sn=qt[ki]).end,aa=sn.delta;for(Xn=sn.offsetIndex,an=tn=sn.start;an<=Pr;an++)65535!==an&&Mn.push({charCode:an,glyphId:sr=(sr=Xn<0?an:Wi[Xn+an-tn])+aa&65535})}}else{if(6!==wi)return(0,k.warn)("cmap table has unsupported format: "+wi),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var ul=Jt.getUint16(),Fr=Jt.getUint16();for(an=0;an<Fr;an++)sr=Jt.getUint16(),Mn.push({charCode:ul+an,glyphId:sr})}for(Mn.sort(function(Hu,hd){return Hu.charCode-hd.charCode}),ai=1;ai<Mn.length;ai++)Mn[ai-1].charCode===Mn[ai].charCode&&(Mn.splice(ai,1),ai--);return{platformId:vn.platformId,encodingId:vn.encodingId,mappings:Mn,hasShortCmap:Mi}}(lt.cmap,Je,this.isSymbolicFont,He.hasEncoding),Bi=lr.platformId,Za=lr.encodingId,bi=lr.mappings,ko=bi.length;let Zt=[];if(He.hasEncoding&&("MacRomanEncoding"===He.baseEncodingName||"WinAnsiEncoding"===He.baseEncodingName)&&(Zt=(0,e.getEncoding)(He.baseEncodingName)),He.hasEncoding&&!this.isSymbolicFont&&(3===Bi&&1===Za||1===Bi&&0===Za)){var uo=(0,ee.getGlyphsUnicode)();for(let Jt=0;Jt<256;Jt++){var br,kr;if(br=this.differences&&Jt in this.differences?this.differences[Jt]:Jt in Zt&&""!==Zt[Jt]?Zt[Jt]:e.StandardEncoding[Jt]){var Zl;kr=P(br,uo),3===Bi&&1===Za?Zl=uo[kr]:1===Bi&&0===Za&&(Zl=e.MacRomanEncoding.indexOf(kr));for(let $t=0;$t<ko;++$t)if(bi[$t].charCode===Zl){Qn[Jt]=bi[$t].glyphId;break}}}}else if(0===Bi)for(let Jt=0;Jt<ko;++Jt)Qn[bi[Jt].charCode]=bi[Jt].glyphId;else for(let Jt=0;Jt<ko;++Jt){let $t=bi[Jt].charCode;3===Bi&&$t>=61440&&$t<=61695&&($t&=255),Qn[$t]=bi[Jt].glyphId}if(He.glyphNames&&Zt.length)for(let Jt=0;Jt<256;++Jt)if(void 0===Qn[Jt]&&Zt[Jt]){const $t=He.glyphNames.indexOf(br=Zt[Jt]);$t>0&&pi($t)&&(Qn[Jt]=$t)}}0===Qn.length&&(Qn[0]=0);let ts=It-1;Gt||(ts=0);var Ir=De(Qn,pi,ts);if(this.toFontChar=Ir.toFontChar,lt.cmap={tag:"cmap",data:Ce(Ir.charCodeToGlyphId,It)},(!lt["OS/2"]||!function Me(Qe,Ye){Ye.pos=(Ye.start||0)+Qe.offset;var Je=Ye.getUint16();Ye.skip(60);var He=Ye.getUint16();return!(Je<4&&768&He||Ye.getUint16()>Ye.getUint16()||(Ye.skip(6),0===Ye.getUint16()||(Qe.data[8]=Qe.data[9]=0,0)))}(lt["OS/2"],Je))&&(lt["OS/2"]={tag:"OS/2",data:Ne(He,Ir.charCodeToGlyphId,Li)}),!mt)try{Et=new c.Stream(lt["CFF "].data),bt=new fe.CFFParser(Et,He,W).parse(),bt.duplicateFirstGlyph();var Io=new fe.CFFCompiler(bt);lt["CFF "].data=Io.compile()}catch{(0,k.warn)("Failed to compile font "+He.loadedName)}if(lt.name){var wr=Ut(lt.name);lt.name.data=Xe(Ye,wr)}else lt.name={tag:"name",data:Xe(this.name)};var sa=new E(at.version);for(var ba in lt)sa.addTable(ba,lt[ba].data);return sa.toArray()},convert:function(Ye,Je,He){He.fixedPitch=!1,He.builtInEncoding&&function q(G,K){if(!(G.hasIncludedToUnicodeMap||G.hasEncoding||K===G.defaultEncoding||G.toUnicode instanceof j)){var U=[],z=(0,ee.getGlyphsUnicode)();for(var L in K){var B=(0,H.getUnicodeForGlyph)(K[L],z);-1!==B&&(U[L]=String.fromCharCode(B))}G.toUnicode.amend(U)}}(He,He.builtInEncoding);let it=1;Je instanceof R&&(it=Je.numGlyphs-1);var dt=Je.getGlyphMapping(He),pt=De(dt,Je.hasGlyphId.bind(Je),it);this.toFontChar=pt.toFontChar;var Dt=Je.numGlyphs;function et(Lt,It){var Gt=null;for(var rn in Lt)It===Lt[rn]&&(Gt||(Gt=[]),Gt.push(0|rn));return Gt}function st(Lt,It){for(var Gt in Lt)if(It===Lt[Gt])return 0|Gt;return pt.charCodeToGlyphId[pt.nextAvailableFontCharCode]=It,pt.nextAvailableFontCharCode++}var Ge=Je.seacs;if(Ge&&Ge.length){var Ze=He.fontMatrix||k.FONT_IDENTITY_MATRIX,je=Je.getCharset(),Ue=Object.create(null);for(var ct in Ge){var _t=Ge[ct|=0],jt=e.StandardEncoding[_t[3]],rt=je.indexOf(e.StandardEncoding[_t[2]]),Pe=je.indexOf(jt);if(!(rt<0||Pe<0)){var Fe={x:_t[0]*Ze[0]+_t[1]*Ze[2]+Ze[4],y:_t[0]*Ze[1]+_t[1]*Ze[3]+Ze[5]},$e=et(dt,ct);if($e)for(let Lt=0,It=$e.length;Lt<It;Lt++){var at=$e[Lt],lt=pt.charCodeToGlyphId,bt=st(lt,rt),Et=st(lt,Pe);Ue[at]={baseFontCharCode:bt,accentFontCharCode:Et,accentOffset:Fe}}}}He.seacMap=Ue}var mt=1/(He.fontMatrix||k.FONT_IDENTITY_MATRIX)[0],kt=new E("OTTO");return kt.addTable("CFF ",Je.data),kt.addTable("OS/2",Ne(He,pt.charCodeToGlyphId)),kt.addTable("cmap",Ce(pt.charCodeToGlyphId,Dt)),kt.addTable("head","\0\x01\0\0\0\0\x10\0\0\0\0\0_\x0f<\xf5\0\0"+J(mt)+"\0\0\0\0\x9e\v~'\0\0\0\0\x9e\v~'\0\0"+J(He.descent)+"\x0f\xff"+J(He.ascent)+B(He.italicAngle?2:0)+"\0\x11\0\0\0\0\0\0"),kt.addTable("hhea","\0\x01\0\0"+J(He.ascent)+J(He.descent)+"\0\0\xff\xff\0\0\0\0\0\0"+J(He.capHeight)+J(Math.tan(He.italicAngle)*He.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+B(Dt)),kt.addTable("hmtx",function(){var It=Je.charstrings,Gt=Je.cff?Je.cff.widths:null,rn="\0\0\0\0";for(let Pn=1,En=Dt;Pn<En;Pn++){var un=0;if(It){var zn=It[Pn-1];un="width"in zn?zn.width:0}else Gt&&(un=Math.ceil(Gt[Pn]||0));rn+=B(un)+B(0)}return rn}()),kt.addTable("maxp","\0\0P\0"+B(Dt)),kt.addTable("name",Xe(Ye)),kt.addTable("post",We(He)),kt.toArray()},get spaceWidth(){for(var Ye,Qe=["space","minus","one","i","I"],Je=0,He=Qe.length;Je<He;Je++){var it=Qe[Je];if(it in this.widths){Ye=this.widths[it];break}var pt=(0,ee.getGlyphsUnicode)()[it],Dt=0;if(this.composite&&this.cMap.contains(pt)&&(Dt=this.cMap.lookup(pt)),!Dt&&this.toUnicode&&(Dt=this.toUnicode.charCodeOf(pt)),Dt<=0&&(Dt=pt),Ye=this.widths[Dt])break}return(0,k.shadow)(this,"spaceWidth",Ye=Ye||this.defaultWidth)},charToGlyph:function(Ye,Je){var He,it,dt,pt=Ye;this.cMap&&this.cMap.contains(Ye)&&(pt=this.cMap.lookup(Ye)),it=(0,k.isNum)(it=this.widths[pt])?it:this.defaultWidth;var Dt=this.vmetrics&&this.vmetrics[pt];let et=this.toUnicode.get(Ye)||this.fallbackToUnicode.get(Ye)||Ye;"number"==typeof et&&(et=String.fromCharCode(et));var st=Ye in this.toFontChar;if(He=this.toFontChar[Ye]||Ye,this.missingFile){const ct=this.differences[Ye]||this.defaultEncoding[Ye];(".notdef"===ct||""===ct)&&"Type1"===this.type&&(He=32),He=(0,H.mapSpecialUnicodeValues)(He)}this.isType3Font&&(dt=He);var Ge=null;if(this.seacMap&&this.seacMap[Ye]){st=!0;var Ze=this.seacMap[Ye];He=Ze.baseFontCharCode,Ge={fontChar:String.fromCodePoint(Ze.accentFontCharCode),offset:Ze.accentOffset}}let je="";"number"==typeof He&&(He<=1114111?je=String.fromCodePoint(He):(0,k.warn)(`charToGlyph - invalid fontCharCode: ${He}`));var Ue=this.glyphCache[Ye];return(!Ue||!Ue.matchesForCache(je,et,Ge,it,Dt,dt,Je,st))&&(Ue=new F(je,et,Ge,it,Dt,dt,Je,st),this.glyphCache[Ye]=Ue),Ue},charsToGlyphs:function(Ye){var He,it,dt,Je=this.charsCache;if(Je&&(He=Je[Ye]))return He;Je||(Je=this.charsCache=Object.create(null)),He=[];var et,pt=Ye,Dt=0;if(this.cMap)for(var st=Object.create(null);Dt<Ye.length;){this.cMap.readCharCode(Ye,Dt,st),dt=st.charcode;var Ge=st.length;Dt+=Ge;var Ze=1===Ge&&32===Ye.charCodeAt(Dt-1);it=this.charToGlyph(dt,Ze),He.push(it)}else for(Dt=0,et=Ye.length;Dt<et;++Dt)dt=Ye.charCodeAt(Dt),it=this.charToGlyph(dt,32===dt),He.push(it);return Je[pt]=He},get glyphCacheValues(){return Object.values(this.glyphCache)}},K}();se.Font=x;var p=function(){function K(U){this.error=U,this.loadedName="g_font_error",this.missingFile=!0}return K.prototype={charsToGlyphs:function(){return[]},exportData(U=!1){return{error:this.error}}},K}();function m(G,K,U){var L,S,B,z=Object.create(null),J=!!(G.flags&M.Symbolic);if(G.baseEncodingName)for(B=(0,e.getEncoding)(G.baseEncodingName),S=0;S<B.length;S++)L=U.indexOf(B[S]),z[S]=L>=0?L:0;else if(J)for(S in K)z[S]=K[S];else for(B=e.StandardEncoding,S=0;S<B.length;S++)L=U.indexOf(B[S]),z[S]=L>=0?L:0;var ce,ie=G.differences;if(ie)for(S in ie){var pe=ie[S];if(-1===(L=U.indexOf(pe))){ce||(ce=(0,ee.getGlyphsUnicode)());var ye=P(pe,ce);ye!==pe&&(L=U.indexOf(ye))}z[S]=L>=0?L:0}return z}se.ErrorFont=p;var _=function(){function K(S,B,J){for(var Te,ie=S.length,ce=B.length,pe=ie-ce,ye=J,_e=!1;ye<pe;){for(Te=0;Te<ce&&S[ye+Te]===B[Te];)Te++;if(Te>=ce){for(ye+=Te;ye<ie&&(0,te.isWhiteSpace)(S[ye]);)ye++;_e=!0;break}ye++}return{found:_e,length:ye}}function L(S,B,J){var ce=J.length1,ye=B.peekBytes(6),Te=128===ye[0]&&1===ye[1];Te&&(B.skip(6),ce=ye[5]<<24|ye[4]<<16|ye[3]<<8|ye[2]);var _e=function U(S,B){var ce,pe,ye,_e,J=[101,101,120,101,99],ie=S.pos;try{pe=(ce=S.getBytes(B)).length}catch(De){if(De instanceof te.MissingDataException)throw De}if(pe===B&&(ye=K(ce,J,B-2*J.length)).found&&ye.length===B)return{stream:new c.Stream(ce),length:B};for((0,k.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),S.pos=ie;0!==(ye=K(S.peekBytes(2048),J,0)).length;)if(S.pos+=ye.length,ye.found){_e=S.pos-ie;break}return S.pos=ie,_e?{stream:new c.Stream(S.getBytes(_e)),length:_e}:((0,k.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new c.Stream(S.getBytes(B)),length:B})}(B,ce);new $.Type1Parser(_e.stream,!1,W).extractFontHeader(J),Te&&(ye=B.getBytes(6));var De=function z(S,B){var J=S.getBytes();return{stream:new c.Stream(J),length:J.length}}(B),Ce=new $.Type1Parser(De.stream,!0,W).extractFontProgram(J);for(const Xe in Ce.properties)J[Xe]=Ce.properties[Xe];var Me=Ce.charstrings,Ne=this.getType2Charstrings(Me),We=this.getType2Subrs(Ce.subrs);this.charstrings=Me,this.data=this.wrap(S,Ne,this.charstrings,We,J),this.seacs=this.getSeacs(Ce.charstrings)}return L.prototype={get numGlyphs(){return this.charstrings.length+1},getCharset:function(){for(var B=[".notdef"],J=this.charstrings,ie=0;ie<J.length;ie++)B.push(J[ie].glyphName);return B},getGlyphMapping:function(B){var J=this.charstrings;if(B.composite){const _e=Object.create(null);for(let we=0,De=J.length;we<De;we++)_e[B.cMap.charCodeOf(we)]=we+1;return _e}var ce,ie=[".notdef"];for(ce=0;ce<J.length;ce++)ie.push(J[ce].glyphName);var pe=B.builtInEncoding;if(pe){var ye=Object.create(null);for(var Te in pe)(ce=ie.indexOf(pe[Te]))>=0&&(ye[Te]=ce)}return m(B,ye,ie)},hasGlyphId:function(B){return!(B<0||B>=this.numGlyphs)&&(0===B||this.charstrings[B-1].charstring.length>0)},getSeacs:function(B){var J,ie,ce=[];for(J=0,ie=B.length;J<ie;J++){var pe=B[J];pe.seac&&(ce[J+1]=pe.seac)}return ce},getType2Charstrings:function(B){for(var J=[],ie=0,ce=B.length;ie<ce;ie++)J.push(B[ie].charstring);return J},getType2Subrs:function(B){var J,ie=B.length;J=ie<1133?107:ie<33769?1131:32768;var pe,ce=[];for(pe=0;pe<J;pe++)ce.push([11]);for(pe=0;pe<ie;pe++)ce.push(B[pe]);return ce},wrap:function(B,J,ie,ce,pe){var ye=new fe.CFF;ye.header=new fe.CFFHeader(1,0,4,4),ye.names=[B];var Te=new fe.CFFTopDict;Te.setByName("version",391),Te.setByName("Notice",392),Te.setByName("FullName",393),Te.setByName("FamilyName",394),Te.setByName("Weight",395),Te.setByName("Encoding",null),Te.setByName("FontMatrix",pe.fontMatrix),Te.setByName("FontBBox",pe.bbox),Te.setByName("charset",null),Te.setByName("CharStrings",null),Te.setByName("Private",null),ye.topDict=Te;var _e=new fe.CFFStrings;_e.add("Version 0.11"),_e.add("See original notice"),_e.add(B),_e.add(B),_e.add("Medium"),ye.strings=_e,ye.globalSubrIndex=new fe.CFFIndex;var xe,Ce,we=J.length,De=[".notdef"];for(xe=0;xe<we;xe++){const it=ie[xe].glyphName;-1===fe.CFFStandardStrings.indexOf(it)&&_e.add(it),De.push(it)}ye.charset=new fe.CFFCharset(!1,0,De);var Me=new fe.CFFIndex;for(Me.add([139,14]),xe=0;xe<we;xe++)Me.add(J[xe]);ye.charStrings=Me;var Ne=new fe.CFFPrivateDict;Ne.setByName("Subrs",null);var We=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(xe=0,Ce=We.length;xe<Ce;xe++){var Xe=We[xe];if(Xe in pe.privateData){var Qe=pe.privateData[Xe];if(Array.isArray(Qe))for(var Ye=Qe.length-1;Ye>0;Ye--)Qe[Ye]-=Qe[Ye-1];Ne.setByName(Xe,Qe)}}ye.topDict.privateDict=Ne;var Je=new fe.CFFIndex;for(xe=0,Ce=ce.length;xe<Ce;xe++)Je.add(ce[xe]);return Ne.subrsIndex=Je,new fe.CFFCompiler(ye).compile()}},L}(),R=function(){function K(U,z){this.properties=z;var L=new fe.CFFParser(U,z,W);this.cff=L.parse(),this.cff.duplicateFirstGlyph();var S=new fe.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=S.compile()}catch{(0,k.warn)("Failed to compile font "+z.loadedName),this.data=U}}return K.prototype={get numGlyphs(){return this.cff.charStrings.count},getCharset:function(){return this.cff.charset.charset},getGlyphMapping:function(){var B,J,z=this.cff,L=this.properties,S=z.charset.charset;if(L.composite){let pe;if(B=Object.create(null),z.isCIDFont)for(J=0;J<S.length;J++)pe=L.cMap.charCodeOf(S[J]),B[pe]=J;else for(J=0;J<z.charStrings.count;J++)pe=L.cMap.charCodeOf(J),B[pe]=J;return B}return m(L,z.encoding?z.encoding.encoding:null,S)},hasGlyphId:function(z){return this.cff.hasGlyphId(z)}},K}()},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.CFFFDSelect=se.CFFCompiler=se.CFFPrivateDict=se.CFFTopDict=se.CFFCharset=se.CFFIndex=se.CFFStrings=se.CFFHeader=se.CFF=se.CFFParser=se.CFFStandardStrings=void 0;var k=y(2),fe=y(32),ee=y(33),V=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];se.CFFStandardStrings=V;const H=391;var P,F,te=(P=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],F=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function(E,x){E[x-2]=E[x-2]+E[x-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function(E,x){E[x-2]=E[x-2]-E[x-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function(E,x){E[x-2]=E[x-2]/E[x-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function(E,x){E[x-1]=-E[x-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function(E,x){E[x-2]=E[x-2]*E[x-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}],class I{constructor(E,x,p){this.bytes=E.getBytes(),this.properties=x,this.seacAnalysisEnabled=!!p}parse(){var E=this.properties,x=new re;this.cff=x;var p=this.parseHeader(),m=this.parseIndex(p.endPos),_=this.parseIndex(m.endPos),R=this.parseIndex(_.endPos),G=this.parseIndex(R.endPos),K=this.parseDict(_.obj.get(0)),U=this.createDict(oe,K,x.strings);x.header=p.obj,x.names=this.parseNameIndex(m.obj),x.strings=this.parseStringIndex(R.obj),x.topDict=U,x.globalSubrIndex=G.obj,this.parsePrivateDict(x.topDict),x.isCIDFont=U.hasName("ROS");var z=U.getByName("CharStrings"),L=this.parseIndex(z).obj,S=U.getByName("FontMatrix");S&&(E.fontMatrix=S);var J,ie,B=U.getByName("FontBBox");if(B&&(E.ascent=Math.max(B[3],B[1]),E.descent=Math.min(B[1],B[3]),E.ascentScaled=!0),x.isCIDFont){for(var ce=this.parseIndex(U.getByName("FDArray")).obj,pe=0,ye=ce.count;pe<ye;++pe){var Te=ce.get(pe),_e=this.createDict(oe,this.parseDict(Te),x.strings);this.parsePrivateDict(_e),x.fdArray.push(_e)}ie=null,J=this.parseCharsets(U.getByName("charset"),L.count,x.strings,!0),x.fdSelect=this.parseFDSelect(U.getByName("FDSelect"),L.count)}else J=this.parseCharsets(U.getByName("charset"),L.count,x.strings,!1),ie=this.parseEncoding(U.getByName("Encoding"),E,x.strings,J.charset);x.charset=J,x.encoding=ie;var we=this.parseCharStrings({charStrings:L,localSubrIndex:U.privateDict.subrsIndex,globalSubrIndex:G.obj,fdSelect:x.fdSelect,fdArray:x.fdArray,privateDict:U.privateDict});return x.charStrings=we.charStrings,x.seacs=we.seacs,x.widths=we.widths,x}parseHeader(){for(var E=this.bytes,x=E.length,p=0;p<x&&1!==E[p];)++p;if(p>=x)throw new k.FormatError("Invalid CFF header");0!==p&&((0,k.info)("cff data is shifted"),E=E.subarray(p),this.bytes=E);var R=E[2];return{obj:new f(E[0],E[1],R,E[3]),endPos:R}}parseDict(E){var x=0;function p(){var U=E[x++];return 30===U?function m(){var U="",z=15;const L=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(var S=E.length;x<S;){var B=E[x++],J=B>>4,ie=15&B;if(J===z||(U+=L[J],ie===z))break;U+=L[ie]}return parseFloat(U)}():28===U?U=((U=E[x++])<<24|E[x++]<<16)>>16:29===U?U=(U=(U=(U=E[x++])<<8|E[x++])<<8|E[x++])<<8|E[x++]:U>=32&&U<=246?U-139:U>=247&&U<=250?256*(U-247)+E[x++]+108:U>=251&&U<=254?-256*(U-251)-E[x++]-108:((0,k.warn)('CFFParser_parseDict: "'+U+'" is a reserved command.'),NaN)}var _=[],R=[];x=0;for(var G=E.length;x<G;){var K=E[x];K<=21?(12===K&&(K=K<<8|E[++x]),R.push([K,_]),_=[],++x):_.push(p())}return R}parseIndex(E){var G,K,x=new $,p=this.bytes,m=p[E++]<<8|p[E++],_=[],R=E;if(0!==m){var U=p[E++],z=E+(m+1)*U-1;for(G=0,K=m+1;G<K;++G){for(var L=0,S=0;S<U;++S)L<<=8,L+=p[E++];_.push(z+L)}R=_[m]}for(G=0,K=_.length-1;G<K;++G)x.add(p.subarray(_[G],_[G+1]));return{obj:x,endPos:R}}parseNameIndex(E){for(var x=[],p=0,m=E.count;p<m;++p){var _=E.get(p);x.push((0,k.bytesToString)(_))}return x}parseStringIndex(E){for(var x=new c,p=0,m=E.count;p<m;++p){var _=E.get(p);x.add((0,k.bytesToString)(_))}return x}createDict(E,x,p){for(var m=new E(p),_=0,R=x.length;_<R;++_){var G=x[_];m.setByKey(G[0],G[1])}return m}parseCharString(E,x,p,m){if(!x||E.callDepth>10)return!1;for(var _=E.stackSize,R=E.stack,G=x.length,K=0;K<G;){var U=x[K++],z=null;if(12===U){var L=x[K++];0===L?(x[K-2]=139,x[K-1]=22,_=0):z=F[L]}else if(28===U)R[_]=(x[K]<<24|x[K+1]<<16)>>16,K+=2,_++;else if(14===U){if(_>=4&&(_-=4,this.seacAnalysisEnabled))return E.seac=R.slice(_,_+4),!1;z=P[U]}else if(U>=32&&U<=246)R[_]=U-139,_++;else if(U>=247&&U<=254)R[_]=U<251?(U-247<<8)+x[K]+108:-(U-251<<8)-x[K]-108,K++,_++;else if(255===U)R[_]=(x[K]<<24|x[K+1]<<16|x[K+2]<<8|x[K+3])/65536,K+=4,_++;else if(19===U||20===U)E.hints+=_>>1,K+=E.hints+7>>3,_%=2,z=P[U];else{if(10===U||29===U){var S;if(!(S=10===U?p:m))return(0,k.warn)("Missing subrsIndex for "+(z=P[U]).id),!1;var B=32768;S.count<1240?B=107:S.count<33900&&(B=1131);var J=R[--_]+B;if(J<0||J>=S.count||isNaN(J))return(0,k.warn)("Out of bounds subrIndex for "+(z=P[U]).id),!1;if(E.stackSize=_,E.callDepth++,!this.parseCharString(E,S.get(J),p,m))return!1;E.callDepth--,_=E.stackSize;continue}if(11===U)return E.stackSize=_,!0;z=P[U]}if(z){if(z.stem&&(E.hints+=_>>1,3===U||23===U?E.hasVStems=!0:E.hasVStems&&(1===U||18===U)&&((0,k.warn)("CFF stem hints are in wrong order"),x[K-1]=1===U?3:23)),"min"in z&&!E.undefStack&&_<z.min)return(0,k.warn)("Not enough parameters for "+z.id+"; actual: "+_+", expected: "+z.min),!1;E.firstStackClearing&&z.stackClearing&&(E.firstStackClearing=!1,(_-=z.min)>=2&&z.stem?_%=2:_>1&&(0,k.warn)("Found too many parameters for stack-clearing command"),_>0&&R[_-1]>=0&&(E.width=R[_-1])),"stackDelta"in z?("stackFn"in z&&z.stackFn(R,_),_+=z.stackDelta):z.stackClearing?_=0:z.resetStack?(_=0,E.undefStack=!1):z.undefStack&&(_=0,E.undefStack=!0,E.firstStackClearing=!1)}}return E.stackSize=_,!0}parseCharStrings({charStrings:E,localSubrIndex:x,globalSubrIndex:p,fdSelect:m,fdArray:_,privateDict:R}){for(var G=[],K=[],U=E.count,z=0;z<U;z++){var L=E.get(z),S={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1},B=!0,J=null,ie=R;if(m&&_.length){var ce=m.getFDIndex(z);-1===ce&&((0,k.warn)("Glyph index is not in fd select."),B=!1),ce>=_.length&&((0,k.warn)("Invalid fd index for glyph index."),B=!1),B&&(J=(ie=_[ce].privateDict).subrsIndex)}else x&&(J=x);if(B&&(B=this.parseCharString(S,L,J,p)),null!==S.width){const pe=ie.getByName("nominalWidthX");K[z]=pe+S.width}else{const pe=ie.getByName("defaultWidthX");K[z]=pe}null!==S.seac&&(G[z]=S.seac),B||E.set(z,new Uint8Array([14]))}return{charStrings:E,seacs:G,widths:K}}emptyPrivateDictionary(E){var x=this.createDict(W,[],E.strings);E.setByKey(18,[0,0]),E.privateDict=x}parsePrivateDict(E){if(E.hasName("Private")){var x=E.getByName("Private");if(Array.isArray(x)&&2===x.length){var p=x[0],m=x[1];if(0===p||m>=this.bytes.length)this.emptyPrivateDictionary(E);else{var R=this.bytes.subarray(m,m+p),G=this.parseDict(R),K=this.createDict(W,G,E.strings);if(E.privateDict=K,K.getByName("Subrs")){var U=K.getByName("Subrs"),z=m+U;if(0===U||z>=this.bytes.length)return void this.emptyPrivateDictionary(E);var L=this.parseIndex(z);K.subrsIndex=L.obj}}}else E.removeByName("Private")}else this.emptyPrivateDictionary(E)}parseCharsets(E,x,p,m){if(0===E)return new O(!0,N.ISO_ADOBE,fe.ISOAdobeCharset);if(1===E)return new O(!0,N.EXPERT,fe.ExpertCharset);if(2===E)return new O(!0,N.EXPERT_SUBSET,fe.ExpertSubsetCharset);var _=this.bytes,R=E,G=_[E++];const K=[m?0:".notdef"];var U,z,L;switch(x-=1,G){case 0:for(L=0;L<x;L++)U=_[E++]<<8|_[E++],K.push(m?U:p.get(U));break;case 1:for(;K.length<=x;)for(U=_[E++]<<8|_[E++],z=_[E++],L=0;L<=z;L++)K.push(m?U++:p.get(U++));break;case 2:for(;K.length<=x;)for(U=_[E++]<<8|_[E++],z=_[E++]<<8|_[E++],L=0;L<=z;L++)K.push(m?U++:p.get(U++));break;default:throw new k.FormatError("Unknown charset format")}var B=_.subarray(R,E);return new O(!1,G,K,B)}parseEncoding(E,x,p,m){var K,U,z,_=Object.create(null),R=this.bytes,G=!1,L=null;if(0===E||1===E){G=!0,K=E;var B=E?ee.ExpertEncoding:ee.StandardEncoding;for(U=0,z=m.length;U<z;U++){var J=B.indexOf(m[U]);-1!==J&&(_[J]=U)}}else{var ie=E;switch(127&(K=R[E++])){case 0:var ce=R[E++];for(U=1;U<=ce;U++)_[R[E++]]=U;break;case 1:var pe=R[E++],ye=1;for(U=0;U<pe;U++)for(var Te=R[E++],_e=R[E++],we=Te;we<=Te+_e;we++)_[we]=ye++;break;default:throw new k.FormatError(`Unknown encoding format: ${K} in CFF`)}var De=E;128&K&&(R[ie]&=127,function S(){var xe=R[E++];for(U=0;U<xe;U++){var Ce=R[E++],Me=(R[E++]<<8)+(255&R[E++]);_[Ce]=m.indexOf(p.get(Me))}}()),L=R.subarray(ie,De)}return new M(G,K&=127,_,L)}parseFDSelect(E,x){var R,p=this.bytes,m=p[E++],_=[];switch(m){case 0:for(R=0;R<x;++R){var G=p[E++];_.push(G)}break;case 3:var K=p[E++]<<8|p[E++];for(R=0;R<K;++R){var U=p[E++]<<8|p[E++];0===R&&0!==U&&((0,k.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),U=0);for(var z=p[E++],L=p[E]<<8|p[E+1],S=U;S<L;++S)_.push(z)}E+=2;break;default:throw new k.FormatError(`parseFDSelect: Unknown format "${m}".`)}if(_.length!==x)throw new k.FormatError("parseFDSelect: Invalid font data.");return new A(m,_)}});se.CFFParser=te;class re{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new c,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535)(0,k.warn)("Not enough space in charstrings to duplicate first glyph.");else{var P=this.charStrings.get(0);this.charStrings.add(P),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}}hasGlyphId(P){return!(P<0||P>=this.charStrings.count)&&this.charStrings.get(P).length>0}}se.CFF=re;class f{constructor(P,F,I,j){this.major=P,this.minor=F,this.hdrSize=I,this.offSize=j}}se.CFFHeader=f;class c{constructor(){this.strings=[]}get(P){return P>=0&&P<=390?V[P]:P-H<=this.strings.length?this.strings[P-H]:V[0]}getSID(P){let F=V.indexOf(P);return-1!==F?F:(F=this.strings.indexOf(P),-1!==F?F+H:-1)}add(P){this.strings.push(P)}get count(){return this.strings.length}}se.CFFStrings=c;class ${constructor(){this.objects=[],this.length=0}add(P){this.length+=P.length,this.objects.push(P)}set(P,F){this.length+=F.length-this.objects[P].length,this.objects[P]=F}get(P){return this.objects[P]}get count(){return this.objects.length}}se.CFFIndex=$;class ae{constructor(P,F){this.keyToNameMap=P.keyToNameMap,this.nameToKeyMap=P.nameToKeyMap,this.defaults=P.defaults,this.types=P.types,this.opcodes=P.opcodes,this.order=P.order,this.strings=F,this.values=Object.create(null)}setByKey(P,F){if(!(P in this.keyToNameMap))return!1;var I=F.length;if(0===I)return!0;for(var j=0;j<I;j++)if(isNaN(F[j]))return(0,k.warn)('Invalid CFFDict value: "'+F+'" for key "'+P+'".'),!0;var E=this.types[P];return("num"===E||"sid"===E||"offset"===E)&&(F=F[0]),this.values[P]=F,!0}setByName(P,F){if(!(P in this.nameToKeyMap))throw new k.FormatError(`Invalid dictionary name "${P}"`);this.values[this.nameToKeyMap[P]]=F}hasName(P){return this.nameToKeyMap[P]in this.values}getByName(P){if(!(P in this.nameToKeyMap))throw new k.FormatError(`Invalid dictionary name ${P}"`);var F=this.nameToKeyMap[P];return F in this.values?this.values[F]:this.defaults[F]}removeByName(P){delete this.values[this.nameToKeyMap[P]]}static createTables(P){for(var F={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]},I=0,j=P.length;I<j;++I){var E=P[I],x=Array.isArray(E[0])?(E[0][0]<<8)+E[0][1]:E[0];F.keyToNameMap[x]=E[1],F.nameToKeyMap[E[1]]=x,F.types[x]=E[2],F.defaults[x]=E[3],F.opcodes[x]=Array.isArray(E[0])?E[0]:[E[0]],F.order.push(x)}return F}}var oe=function(){var P=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]],F=null;return class I extends ae{constructor(E){null===F&&(F=ae.createTables(P)),super(F,E),this.privateDict=null}}}();se.CFFTopDict=oe;var W=function(){var P=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]],F=null;return class I extends ae{constructor(E){null===F&&(F=ae.createTables(P)),super(F,E),this.subrsIndex=null}}}();se.CFFPrivateDict=W;var N={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class O{constructor(P,F,I,j){this.predefined=P,this.format=F,this.charset=I,this.raw=j}}se.CFFCharset=O;class M{constructor(P,F,I,j){this.predefined=P,this.format=F,this.encoding=I,this.raw=j}}class A{constructor(P,F){this.format=P,this.fdSelect=F}getFDIndex(P){return P<0||P>=this.fdSelect.length?-1:this.fdSelect[P]}}se.CFFFDSelect=A;class b{constructor(){this.offsets=Object.create(null)}isTracking(P){return P in this.offsets}track(P,F){if(P in this.offsets)throw new k.FormatError(`Already tracking location of ${P}`);this.offsets[P]=F}offset(P){for(var F in this.offsets)this.offsets[F]+=P}setEntryLocation(P,F,I){if(!(P in this.offsets))throw new k.FormatError(`Not tracking location of ${P}`);for(var j=I.data,E=this.offsets[P],p=0,m=F.length;p<m;++p){var _=5*p+E,R=_+1,G=_+2,K=_+3,U=_+4;if(29!==j[_]||0!==j[R]||0!==j[G]||0!==j[K]||0!==j[U])throw new k.FormatError("writing to an offset that is not empty");var z=F[p];j[_]=29,j[R]=z>>24&255,j[G]=z>>16&255,j[K]=z>>8&255,j[U]=255&z}}}class q{constructor(P){this.cff=P}compile(){var P=this.cff,F={data:[],length:0,add:function(ce){this.data=this.data.concat(ce),this.length=this.data.length}},I=this.compileHeader(P.header);F.add(I);var j=this.compileNameIndex(P.names);if(F.add(j),P.isCIDFont&&P.topDict.hasName("FontMatrix")){var E=P.topDict.getByName("FontMatrix");P.topDict.removeByName("FontMatrix");for(var x=0,p=P.fdArray.length;x<p;x++){var m=P.fdArray[x],_=E.slice(0);m.hasName("FontMatrix")&&(_=k.Util.transform(_,m.getByName("FontMatrix"))),m.setByName("FontMatrix",_)}}P.topDict.setByName("charset",0);var R=this.compileTopDicts([P.topDict],F.length,P.isCIDFont);F.add(R.output);var G=R.trackers[0],K=this.compileStringIndex(P.strings.strings);F.add(K);var U=this.compileIndex(P.globalSubrIndex);if(F.add(U),P.encoding&&P.topDict.hasName("Encoding"))if(P.encoding.predefined)G.setEntryLocation("Encoding",[P.encoding.format],F);else{var z=this.compileEncoding(P.encoding);G.setEntryLocation("Encoding",[F.length],F),F.add(z)}var L=this.compileCharset(P.charset,P.charStrings.count,P.strings,P.isCIDFont);G.setEntryLocation("charset",[F.length],F),F.add(L);var S=this.compileCharStrings(P.charStrings);if(G.setEntryLocation("CharStrings",[F.length],F),F.add(S),P.isCIDFont){G.setEntryLocation("FDSelect",[F.length],F);var B=this.compileFDSelect(P.fdSelect);F.add(B),R=this.compileTopDicts(P.fdArray,F.length,!0),G.setEntryLocation("FDArray",[F.length],F),F.add(R.output),this.compilePrivateDicts(P.fdArray,R.trackers,F)}return this.compilePrivateDicts([P.topDict],[G],F),F.add([0]),F.data}encodeNumber(P){return Number.isInteger(P)?this.encodeInteger(P):this.encodeFloat(P)}static get EncodeFloatRegExp(){return(0,k.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(P){var F=P.toString(),I=q.EncodeFloatRegExp.exec(F);if(I){var j=parseFloat("1e"+((I[2]?+I[2]:0)+I[1].length));F=(Math.round(P*j)/j).toString()}var x,p,E="";for(x=0,p=F.length;x<p;++x){var m=F[x];E+="e"===m?"-"===F[++x]?"c":"b":"."===m?"a":"-"===m?"e":m}var _=[30];for(x=0,p=(E+=1&E.length?"f":"ff").length;x<p;x+=2)_.push(parseInt(E.substring(x,x+2),16));return _}encodeInteger(P){return P>=-107&&P<=107?[P+139]:P>=108&&P<=1131?[247+((P-=108)>>8),255&P]:P>=-1131&&P<=-108?[251+((P=-P-108)>>8),255&P]:P>=-32768&&P<=32767?[28,P>>8&255,255&P]:[29,P>>24&255,P>>16&255,P>>8&255,255&P]}compileHeader(P){return[P.major,P.minor,P.hdrSize,P.offSize]}compileNameIndex(P){for(var F=new $,I=0,j=P.length;I<j;++I){for(var E=P[I],x=Math.min(E.length,127),p=new Array(x),m=0;m<x;m++){var _=E[m];(_<"!"||_>"~"||"["===_||"]"===_||"("===_||")"===_||"{"===_||"}"===_||"<"===_||">"===_||"/"===_||"%"===_)&&(_="_"),p[m]=_}""===(p=p.join(""))&&(p="Bad_Font_Name"),F.add((0,k.stringToBytes)(p))}return this.compileIndex(F)}compileTopDicts(P,F,I){for(var j=[],E=new $,x=0,p=P.length;x<p;++x){var m=P[x];I&&(m.removeByName("CIDFontVersion"),m.removeByName("CIDFontRevision"),m.removeByName("CIDFontType"),m.removeByName("CIDCount"),m.removeByName("UIDBase"));var _=new b,R=this.compileDict(m,_);j.push(_),E.add(R),_.offset(F)}return{trackers:j,output:E=this.compileIndex(E,j)}}compilePrivateDicts(P,F,I){for(var j=0,E=P.length;j<E;++j){var x=P[j],p=x.privateDict;if(!p||!x.hasName("Private"))throw new k.FormatError("There must be a private dictionary.");var m=new b,_=this.compileDict(p,m),R=I.length;if(m.offset(R),_.length||(R=0),F[j].setEntryLocation("Private",[_.length,R],I),I.add(_),p.subrsIndex&&p.hasName("Subrs")){var G=this.compileIndex(p.subrsIndex);m.setEntryLocation("Subrs",[_.length],I),I.add(G)}}}compileDict(P,F){for(var I=[],j=P.order,E=0;E<j.length;++E){var x=j[E];if(x in P.values){var p=P.values[x],m=P.types[x];if(Array.isArray(m)||(m=[m]),Array.isArray(p)||(p=[p]),0!==p.length){for(var _=0,R=m.length;_<R;++_){var G=m[_],K=p[_];switch(G){case"num":case"sid":I=I.concat(this.encodeNumber(K));break;case"offset":var U=P.keyToNameMap[x];F.isTracking(U)||F.track(U,I.length),I=I.concat([29,0,0,0,0]);break;case"array":case"delta":I=I.concat(this.encodeNumber(K));for(var z=1,L=p.length;z<L;++z)I=I.concat(this.encodeNumber(p[z]));break;default:throw new k.FormatError(`Unknown data type of ${G}`)}}I=I.concat(P.opcodes[x])}}}return I}compileStringIndex(P){for(var F=new $,I=0,j=P.length;I<j;++I)F.add((0,k.stringToBytes)(P[I]));return this.compileIndex(F)}compileGlobalSubrIndex(){this.out.writeByteArray(this.compileIndex(this.cff.globalSubrIndex))}compileCharStrings(P){for(var F=new $,I=0;I<P.count;I++){var j=P.get(I);F.add(0!==j.length?j:new Uint8Array([139,14]))}return this.compileIndex(F)}compileCharset(P,F,I,j){let E;const x=F-1;if(j)E=new Uint8Array([2,0,0,x>>8&255,255&x]);else{E=new Uint8Array(1+2*x),E[0]=0;let m=0;const _=P.charset.length;let R=!1;for(let G=1;G<E.length;G+=2){let K=0;if(m<_){const U=P.charset[m++];K=I.getSID(U),-1===K&&(K=0,R||(R=!0,(0,k.warn)(`Couldn't find ${U} in CFF strings`)))}E[G]=K>>8&255,E[G+1]=255&K}}return this.compileTypedArray(E)}compileEncoding(P){return this.compileTypedArray(P.raw)}compileFDSelect(P){const F=P.format;let I,j;switch(F){case 0:for(I=new Uint8Array(1+P.fdSelect.length),I[0]=F,j=0;j<P.fdSelect.length;j++)I[j+1]=P.fdSelect[j];break;case 3:const E=0;let x=P.fdSelect[0];const p=[F,0,0,E>>8&255,255&E,x];for(j=1;j<P.fdSelect.length;j++){const _=P.fdSelect[j];_!==x&&(p.push(j>>8&255,255&j,_),x=_)}const m=(p.length-3)/3;p[1]=m>>8&255,p[2]=255&m,p.push(j>>8&255,255&j),I=new Uint8Array(p)}return this.compileTypedArray(I)}compileTypedArray(P){for(var F=[],I=0,j=P.length;I<j;++I)F[I]=P[I];return F}compileIndex(P,F=[]){var I=P.objects,j=I.length;if(0===j)return[0,0,0];var p,m,E=[j>>8&255,255&j],x=1;for(p=0;p<j;++p)x+=I[p].length;E.push(m=x<256?1:x<65536?2:x<16777216?3:4);var _=1;for(p=0;p<j+1;p++)1===m?E.push(255&_):2===m?E.push(_>>8&255,255&_):3===m?E.push(_>>16&255,_>>8&255,255&_):E.push(_>>>24&255,_>>16&255,_>>8&255,255&_),I[p]&&(_+=I[p].length);for(p=0;p<j;p++){F[p]&&F[p].offset(E.length);for(var R=0,G=I[p].length;R<G;R++)E.push(I[p][R])}return E}}se.CFFCompiler=q},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.ExpertSubsetCharset=se.ExpertCharset=se.ISOAdobeCharset=void 0,se.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],se.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],se.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getEncoding=function re(f){switch(f){case"WinAnsiEncoding":return V;case"StandardEncoding":return e;case"MacRomanEncoding":return ee;case"SymbolSetEncoding":return H;case"ZapfDingbatsEncoding":return te;case"ExpertEncoding":return k;case"MacExpertEncoding":return fe;default:return null}},se.ExpertEncoding=se.ZapfDingbatsEncoding=se.SymbolSetEncoding=se.MacRomanEncoding=se.StandardEncoding=se.WinAnsiEncoding=void 0;const k=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];se.ExpertEncoding=k;const fe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],ee=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];se.MacRomanEncoding=ee;const e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];se.StandardEncoding=e;const V=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];se.WinAnsiEncoding=V;const H=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];se.SymbolSetEncoding=H;const te=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];se.ZapfDingbatsEncoding=te},function(Ee,se,y){var k=y(8).getLookupTableFactory,fe=k(function(e){e.A=65,e.AE=198,e.AEacute=508,e.AEmacron=482,e.AEsmall=63462,e.Aacute=193,e.Aacutesmall=63457,e.Abreve=258,e.Abreveacute=7854,e.Abrevecyrillic=1232,e.Abrevedotbelow=7862,e.Abrevegrave=7856,e.Abrevehookabove=7858,e.Abrevetilde=7860,e.Acaron=461,e.Acircle=9398,e.Acircumflex=194,e.Acircumflexacute=7844,e.Acircumflexdotbelow=7852,e.Acircumflexgrave=7846,e.Acircumflexhookabove=7848,e.Acircumflexsmall=63458,e.Acircumflextilde=7850,e.Acute=63177,e.Acutesmall=63412,e.Acyrillic=1040,e.Adblgrave=512,e.Adieresis=196,e.Adieresiscyrillic=1234,e.Adieresismacron=478,e.Adieresissmall=63460,e.Adotbelow=7840,e.Adotmacron=480,e.Agrave=192,e.Agravesmall=63456,e.Ahookabove=7842,e.Aiecyrillic=1236,e.Ainvertedbreve=514,e.Alpha=913,e.Alphatonos=902,e.Amacron=256,e.Amonospace=65313,e.Aogonek=260,e.Aring=197,e.Aringacute=506,e.Aringbelow=7680,e.Aringsmall=63461,e.Asmall=63329,e.Atilde=195,e.Atildesmall=63459,e.Aybarmenian=1329,e.B=66,e.Bcircle=9399,e.Bdotaccent=7682,e.Bdotbelow=7684,e.Becyrillic=1041,e.Benarmenian=1330,e.Beta=914,e.Bhook=385,e.Blinebelow=7686,e.Bmonospace=65314,e.Brevesmall=63220,e.Bsmall=63330,e.Btopbar=386,e.C=67,e.Caarmenian=1342,e.Cacute=262,e.Caron=63178,e.Caronsmall=63221,e.Ccaron=268,e.Ccedilla=199,e.Ccedillaacute=7688,e.Ccedillasmall=63463,e.Ccircle=9400,e.Ccircumflex=264,e.Cdot=266,e.Cdotaccent=266,e.Cedillasmall=63416,e.Chaarmenian=1353,e.Cheabkhasiancyrillic=1212,e.Checyrillic=1063,e.Chedescenderabkhasiancyrillic=1214,e.Chedescendercyrillic=1206,e.Chedieresiscyrillic=1268,e.Cheharmenian=1347,e.Chekhakassiancyrillic=1227,e.Cheverticalstrokecyrillic=1208,e.Chi=935,e.Chook=391,e.Circumflexsmall=63222,e.Cmonospace=65315,e.Coarmenian=1361,e.Csmall=63331,e.D=68,e.DZ=497,e.DZcaron=452,e.Daarmenian=1332,e.Dafrican=393,e.Dcaron=270,e.Dcedilla=7696,e.Dcircle=9401,e.Dcircumflexbelow=7698,e.Dcroat=272,e.Ddotaccent=7690,e.Ddotbelow=7692,e.Decyrillic=1044,e.Deicoptic=1006,e.Delta=8710,e.Deltagreek=916,e.Dhook=394,e.Dieresis=63179,e.DieresisAcute=63180,e.DieresisGrave=63181,e.Dieresissmall=63400,e.Digammagreek=988,e.Djecyrillic=1026,e.Dlinebelow=7694,e.Dmonospace=65316,e.Dotaccentsmall=63223,e.Dslash=272,e.Dsmall=63332,e.Dtopbar=395,e.Dz=498,e.Dzcaron=453,e.Dzeabkhasiancyrillic=1248,e.Dzecyrillic=1029,e.Dzhecyrillic=1039,e.E=69,e.Eacute=201,e.Eacutesmall=63465,e.Ebreve=276,e.Ecaron=282,e.Ecedillabreve=7708,e.Echarmenian=1333,e.Ecircle=9402,e.Ecircumflex=202,e.Ecircumflexacute=7870,e.Ecircumflexbelow=7704,e.Ecircumflexdotbelow=7878,e.Ecircumflexgrave=7872,e.Ecircumflexhookabove=7874,e.Ecircumflexsmall=63466,e.Ecircumflextilde=7876,e.Ecyrillic=1028,e.Edblgrave=516,e.Edieresis=203,e.Edieresissmall=63467,e.Edot=278,e.Edotaccent=278,e.Edotbelow=7864,e.Efcyrillic=1060,e.Egrave=200,e.Egravesmall=63464,e.Eharmenian=1335,e.Ehookabove=7866,e.Eightroman=8551,e.Einvertedbreve=518,e.Eiotifiedcyrillic=1124,e.Elcyrillic=1051,e.Elevenroman=8554,e.Emacron=274,e.Emacronacute=7702,e.Emacrongrave=7700,e.Emcyrillic=1052,e.Emonospace=65317,e.Encyrillic=1053,e.Endescendercyrillic=1186,e.Eng=330,e.Enghecyrillic=1188,e.Enhookcyrillic=1223,e.Eogonek=280,e.Eopen=400,e.Epsilon=917,e.Epsilontonos=904,e.Ercyrillic=1056,e.Ereversed=398,e.Ereversedcyrillic=1069,e.Escyrillic=1057,e.Esdescendercyrillic=1194,e.Esh=425,e.Esmall=63333,e.Eta=919,e.Etarmenian=1336,e.Etatonos=905,e.Eth=208,e.Ethsmall=63472,e.Etilde=7868,e.Etildebelow=7706,e.Euro=8364,e.Ezh=439,e.Ezhcaron=494,e.Ezhreversed=440,e.F=70,e.Fcircle=9403,e.Fdotaccent=7710,e.Feharmenian=1366,e.Feicoptic=996,e.Fhook=401,e.Fitacyrillic=1138,e.Fiveroman=8548,e.Fmonospace=65318,e.Fourroman=8547,e.Fsmall=63334,e.G=71,e.GBsquare=13191,e.Gacute=500,e.Gamma=915,e.Gammaafrican=404,e.Gangiacoptic=1002,e.Gbreve=286,e.Gcaron=486,e.Gcedilla=290,e.Gcircle=9404,e.Gcircumflex=284,e.Gcommaaccent=290,e.Gdot=288,e.Gdotaccent=288,e.Gecyrillic=1043,e.Ghadarmenian=1346,e.Ghemiddlehookcyrillic=1172,e.Ghestrokecyrillic=1170,e.Gheupturncyrillic=1168,e.Ghook=403,e.Gimarmenian=1331,e.Gjecyrillic=1027,e.Gmacron=7712,e.Gmonospace=65319,e.Grave=63182,e.Gravesmall=63328,e.Gsmall=63335,e.Gsmallhook=667,e.Gstroke=484,e.H=72,e.H18533=9679,e.H18543=9642,e.H18551=9643,e.H22073=9633,e.HPsquare=13259,e.Haabkhasiancyrillic=1192,e.Hadescendercyrillic=1202,e.Hardsigncyrillic=1066,e.Hbar=294,e.Hbrevebelow=7722,e.Hcedilla=7720,e.Hcircle=9405,e.Hcircumflex=292,e.Hdieresis=7718,e.Hdotaccent=7714,e.Hdotbelow=7716,e.Hmonospace=65320,e.Hoarmenian=1344,e.Horicoptic=1e3,e.Hsmall=63336,e.Hungarumlaut=63183,e.Hungarumlautsmall=63224,e.Hzsquare=13200,e.I=73,e.IAcyrillic=1071,e.IJ=306,e.IUcyrillic=1070,e.Iacute=205,e.Iacutesmall=63469,e.Ibreve=300,e.Icaron=463,e.Icircle=9406,e.Icircumflex=206,e.Icircumflexsmall=63470,e.Icyrillic=1030,e.Idblgrave=520,e.Idieresis=207,e.Idieresisacute=7726,e.Idieresiscyrillic=1252,e.Idieresissmall=63471,e.Idot=304,e.Idotaccent=304,e.Idotbelow=7882,e.Iebrevecyrillic=1238,e.Iecyrillic=1045,e.Ifraktur=8465,e.Igrave=204,e.Igravesmall=63468,e.Ihookabove=7880,e.Iicyrillic=1048,e.Iinvertedbreve=522,e.Iishortcyrillic=1049,e.Imacron=298,e.Imacroncyrillic=1250,e.Imonospace=65321,e.Iniarmenian=1339,e.Iocyrillic=1025,e.Iogonek=302,e.Iota=921,e.Iotaafrican=406,e.Iotadieresis=938,e.Iotatonos=906,e.Ismall=63337,e.Istroke=407,e.Itilde=296,e.Itildebelow=7724,e.Izhitsacyrillic=1140,e.Izhitsadblgravecyrillic=1142,e.J=74,e.Jaarmenian=1345,e.Jcircle=9407,e.Jcircumflex=308,e.Jecyrillic=1032,e.Jheharmenian=1355,e.Jmonospace=65322,e.Jsmall=63338,e.K=75,e.KBsquare=13189,e.KKsquare=13261,e.Kabashkircyrillic=1184,e.Kacute=7728,e.Kacyrillic=1050,e.Kadescendercyrillic=1178,e.Kahookcyrillic=1219,e.Kappa=922,e.Kastrokecyrillic=1182,e.Kaverticalstrokecyrillic=1180,e.Kcaron=488,e.Kcedilla=310,e.Kcircle=9408,e.Kcommaaccent=310,e.Kdotbelow=7730,e.Keharmenian=1364,e.Kenarmenian=1343,e.Khacyrillic=1061,e.Kheicoptic=998,e.Khook=408,e.Kjecyrillic=1036,e.Klinebelow=7732,e.Kmonospace=65323,e.Koppacyrillic=1152,e.Koppagreek=990,e.Ksicyrillic=1134,e.Ksmall=63339,e.L=76,e.LJ=455,e.LL=63167,e.Lacute=313,e.Lambda=923,e.Lcaron=317,e.Lcedilla=315,e.Lcircle=9409,e.Lcircumflexbelow=7740,e.Lcommaaccent=315,e.Ldot=319,e.Ldotaccent=319,e.Ldotbelow=7734,e.Ldotbelowmacron=7736,e.Liwnarmenian=1340,e.Lj=456,e.Ljecyrillic=1033,e.Llinebelow=7738,e.Lmonospace=65324,e.Lslash=321,e.Lslashsmall=63225,e.Lsmall=63340,e.M=77,e.MBsquare=13190,e.Macron=63184,e.Macronsmall=63407,e.Macute=7742,e.Mcircle=9410,e.Mdotaccent=7744,e.Mdotbelow=7746,e.Menarmenian=1348,e.Mmonospace=65325,e.Msmall=63341,e.Mturned=412,e.Mu=924,e.N=78,e.NJ=458,e.Nacute=323,e.Ncaron=327,e.Ncedilla=325,e.Ncircle=9411,e.Ncircumflexbelow=7754,e.Ncommaaccent=325,e.Ndotaccent=7748,e.Ndotbelow=7750,e.Nhookleft=413,e.Nineroman=8552,e.Nj=459,e.Njecyrillic=1034,e.Nlinebelow=7752,e.Nmonospace=65326,e.Nowarmenian=1350,e.Nsmall=63342,e.Ntilde=209,e.Ntildesmall=63473,e.Nu=925,e.O=79,e.OE=338,e.OEsmall=63226,e.Oacute=211,e.Oacutesmall=63475,e.Obarredcyrillic=1256,e.Obarreddieresiscyrillic=1258,e.Obreve=334,e.Ocaron=465,e.Ocenteredtilde=415,e.Ocircle=9412,e.Ocircumflex=212,e.Ocircumflexacute=7888,e.Ocircumflexdotbelow=7896,e.Ocircumflexgrave=7890,e.Ocircumflexhookabove=7892,e.Ocircumflexsmall=63476,e.Ocircumflextilde=7894,e.Ocyrillic=1054,e.Odblacute=336,e.Odblgrave=524,e.Odieresis=214,e.Odieresiscyrillic=1254,e.Odieresissmall=63478,e.Odotbelow=7884,e.Ogoneksmall=63227,e.Ograve=210,e.Ogravesmall=63474,e.Oharmenian=1365,e.Ohm=8486,e.Ohookabove=7886,e.Ohorn=416,e.Ohornacute=7898,e.Ohorndotbelow=7906,e.Ohorngrave=7900,e.Ohornhookabove=7902,e.Ohorntilde=7904,e.Ohungarumlaut=336,e.Oi=418,e.Oinvertedbreve=526,e.Omacron=332,e.Omacronacute=7762,e.Omacrongrave=7760,e.Omega=8486,e.Omegacyrillic=1120,e.Omegagreek=937,e.Omegaroundcyrillic=1146,e.Omegatitlocyrillic=1148,e.Omegatonos=911,e.Omicron=927,e.Omicrontonos=908,e.Omonospace=65327,e.Oneroman=8544,e.Oogonek=490,e.Oogonekmacron=492,e.Oopen=390,e.Oslash=216,e.Oslashacute=510,e.Oslashsmall=63480,e.Osmall=63343,e.Ostrokeacute=510,e.Otcyrillic=1150,e.Otilde=213,e.Otildeacute=7756,e.Otildedieresis=7758,e.Otildesmall=63477,e.P=80,e.Pacute=7764,e.Pcircle=9413,e.Pdotaccent=7766,e.Pecyrillic=1055,e.Peharmenian=1354,e.Pemiddlehookcyrillic=1190,e.Phi=934,e.Phook=420,e.Pi=928,e.Piwrarmenian=1363,e.Pmonospace=65328,e.Psi=936,e.Psicyrillic=1136,e.Psmall=63344,e.Q=81,e.Qcircle=9414,e.Qmonospace=65329,e.Qsmall=63345,e.R=82,e.Raarmenian=1356,e.Racute=340,e.Rcaron=344,e.Rcedilla=342,e.Rcircle=9415,e.Rcommaaccent=342,e.Rdblgrave=528,e.Rdotaccent=7768,e.Rdotbelow=7770,e.Rdotbelowmacron=7772,e.Reharmenian=1360,e.Rfraktur=8476,e.Rho=929,e.Ringsmall=63228,e.Rinvertedbreve=530,e.Rlinebelow=7774,e.Rmonospace=65330,e.Rsmall=63346,e.Rsmallinverted=641,e.Rsmallinvertedsuperior=694,e.S=83,e.SF010000=9484,e.SF020000=9492,e.SF030000=9488,e.SF040000=9496,e.SF050000=9532,e.SF060000=9516,e.SF070000=9524,e.SF080000=9500,e.SF090000=9508,e.SF100000=9472,e.SF110000=9474,e.SF190000=9569,e.SF200000=9570,e.SF210000=9558,e.SF220000=9557,e.SF230000=9571,e.SF240000=9553,e.SF250000=9559,e.SF260000=9565,e.SF270000=9564,e.SF280000=9563,e.SF360000=9566,e.SF370000=9567,e.SF380000=9562,e.SF390000=9556,e.SF400000=9577,e.SF410000=9574,e.SF420000=9568,e.SF430000=9552,e.SF440000=9580,e.SF450000=9575,e.SF460000=9576,e.SF470000=9572,e.SF480000=9573,e.SF490000=9561,e.SF500000=9560,e.SF510000=9554,e.SF520000=9555,e.SF530000=9579,e.SF540000=9578,e.Sacute=346,e.Sacutedotaccent=7780,e.Sampigreek=992,e.Scaron=352,e.Scarondotaccent=7782,e.Scaronsmall=63229,e.Scedilla=350,e.Schwa=399,e.Schwacyrillic=1240,e.Schwadieresiscyrillic=1242,e.Scircle=9416,e.Scircumflex=348,e.Scommaaccent=536,e.Sdotaccent=7776,e.Sdotbelow=7778,e.Sdotbelowdotaccent=7784,e.Seharmenian=1357,e.Sevenroman=8550,e.Shaarmenian=1351,e.Shacyrillic=1064,e.Shchacyrillic=1065,e.Sheicoptic=994,e.Shhacyrillic=1210,e.Shimacoptic=1004,e.Sigma=931,e.Sixroman=8549,e.Smonospace=65331,e.Softsigncyrillic=1068,e.Ssmall=63347,e.Stigmagreek=986,e.T=84,e.Tau=932,e.Tbar=358,e.Tcaron=356,e.Tcedilla=354,e.Tcircle=9417,e.Tcircumflexbelow=7792,e.Tcommaaccent=354,e.Tdotaccent=7786,e.Tdotbelow=7788,e.Tecyrillic=1058,e.Tedescendercyrillic=1196,e.Tenroman=8553,e.Tetsecyrillic=1204,e.Theta=920,e.Thook=428,e.Thorn=222,e.Thornsmall=63486,e.Threeroman=8546,e.Tildesmall=63230,e.Tiwnarmenian=1359,e.Tlinebelow=7790,e.Tmonospace=65332,e.Toarmenian=1337,e.Tonefive=444,e.Tonesix=388,e.Tonetwo=423,e.Tretroflexhook=430,e.Tsecyrillic=1062,e.Tshecyrillic=1035,e.Tsmall=63348,e.Twelveroman=8555,e.Tworoman=8545,e.U=85,e.Uacute=218,e.Uacutesmall=63482,e.Ubreve=364,e.Ucaron=467,e.Ucircle=9418,e.Ucircumflex=219,e.Ucircumflexbelow=7798,e.Ucircumflexsmall=63483,e.Ucyrillic=1059,e.Udblacute=368,e.Udblgrave=532,e.Udieresis=220,e.Udieresisacute=471,e.Udieresisbelow=7794,e.Udieresiscaron=473,e.Udieresiscyrillic=1264,e.Udieresisgrave=475,e.Udieresismacron=469,e.Udieresissmall=63484,e.Udotbelow=7908,e.Ugrave=217,e.Ugravesmall=63481,e.Uhookabove=7910,e.Uhorn=431,e.Uhornacute=7912,e.Uhorndotbelow=7920,e.Uhorngrave=7914,e.Uhornhookabove=7916,e.Uhorntilde=7918,e.Uhungarumlaut=368,e.Uhungarumlautcyrillic=1266,e.Uinvertedbreve=534,e.Ukcyrillic=1144,e.Umacron=362,e.Umacroncyrillic=1262,e.Umacrondieresis=7802,e.Umonospace=65333,e.Uogonek=370,e.Upsilon=933,e.Upsilon1=978,e.Upsilonacutehooksymbolgreek=979,e.Upsilonafrican=433,e.Upsilondieresis=939,e.Upsilondieresishooksymbolgreek=980,e.Upsilonhooksymbol=978,e.Upsilontonos=910,e.Uring=366,e.Ushortcyrillic=1038,e.Usmall=63349,e.Ustraightcyrillic=1198,e.Ustraightstrokecyrillic=1200,e.Utilde=360,e.Utildeacute=7800,e.Utildebelow=7796,e.V=86,e.Vcircle=9419,e.Vdotbelow=7806,e.Vecyrillic=1042,e.Vewarmenian=1358,e.Vhook=434,e.Vmonospace=65334,e.Voarmenian=1352,e.Vsmall=63350,e.Vtilde=7804,e.W=87,e.Wacute=7810,e.Wcircle=9420,e.Wcircumflex=372,e.Wdieresis=7812,e.Wdotaccent=7814,e.Wdotbelow=7816,e.Wgrave=7808,e.Wmonospace=65335,e.Wsmall=63351,e.X=88,e.Xcircle=9421,e.Xdieresis=7820,e.Xdotaccent=7818,e.Xeharmenian=1341,e.Xi=926,e.Xmonospace=65336,e.Xsmall=63352,e.Y=89,e.Yacute=221,e.Yacutesmall=63485,e.Yatcyrillic=1122,e.Ycircle=9422,e.Ycircumflex=374,e.Ydieresis=376,e.Ydieresissmall=63487,e.Ydotaccent=7822,e.Ydotbelow=7924,e.Yericyrillic=1067,e.Yerudieresiscyrillic=1272,e.Ygrave=7922,e.Yhook=435,e.Yhookabove=7926,e.Yiarmenian=1349,e.Yicyrillic=1031,e.Yiwnarmenian=1362,e.Ymonospace=65337,e.Ysmall=63353,e.Ytilde=7928,e.Yusbigcyrillic=1130,e.Yusbigiotifiedcyrillic=1132,e.Yuslittlecyrillic=1126,e.Yuslittleiotifiedcyrillic=1128,e.Z=90,e.Zaarmenian=1334,e.Zacute=377,e.Zcaron=381,e.Zcaronsmall=63231,e.Zcircle=9423,e.Zcircumflex=7824,e.Zdot=379,e.Zdotaccent=379,e.Zdotbelow=7826,e.Zecyrillic=1047,e.Zedescendercyrillic=1176,e.Zedieresiscyrillic=1246,e.Zeta=918,e.Zhearmenian=1338,e.Zhebrevecyrillic=1217,e.Zhecyrillic=1046,e.Zhedescendercyrillic=1174,e.Zhedieresiscyrillic=1244,e.Zlinebelow=7828,e.Zmonospace=65338,e.Zsmall=63354,e.Zstroke=437,e.a=97,e.aabengali=2438,e.aacute=225,e.aadeva=2310,e.aagujarati=2694,e.aagurmukhi=2566,e.aamatragurmukhi=2622,e.aarusquare=13059,e.aavowelsignbengali=2494,e.aavowelsigndeva=2366,e.aavowelsigngujarati=2750,e.abbreviationmarkarmenian=1375,e.abbreviationsigndeva=2416,e.abengali=2437,e.abopomofo=12570,e.abreve=259,e.abreveacute=7855,e.abrevecyrillic=1233,e.abrevedotbelow=7863,e.abrevegrave=7857,e.abrevehookabove=7859,e.abrevetilde=7861,e.acaron=462,e.acircle=9424,e.acircumflex=226,e.acircumflexacute=7845,e.acircumflexdotbelow=7853,e.acircumflexgrave=7847,e.acircumflexhookabove=7849,e.acircumflextilde=7851,e.acute=180,e.acutebelowcmb=791,e.acutecmb=769,e.acutecomb=769,e.acutedeva=2388,e.acutelowmod=719,e.acutetonecmb=833,e.acyrillic=1072,e.adblgrave=513,e.addakgurmukhi=2673,e.adeva=2309,e.adieresis=228,e.adieresiscyrillic=1235,e.adieresismacron=479,e.adotbelow=7841,e.adotmacron=481,e.ae=230,e.aeacute=509,e.aekorean=12624,e.aemacron=483,e.afii00208=8213,e.afii08941=8356,e.afii10017=1040,e.afii10018=1041,e.afii10019=1042,e.afii10020=1043,e.afii10021=1044,e.afii10022=1045,e.afii10023=1025,e.afii10024=1046,e.afii10025=1047,e.afii10026=1048,e.afii10027=1049,e.afii10028=1050,e.afii10029=1051,e.afii10030=1052,e.afii10031=1053,e.afii10032=1054,e.afii10033=1055,e.afii10034=1056,e.afii10035=1057,e.afii10036=1058,e.afii10037=1059,e.afii10038=1060,e.afii10039=1061,e.afii10040=1062,e.afii10041=1063,e.afii10042=1064,e.afii10043=1065,e.afii10044=1066,e.afii10045=1067,e.afii10046=1068,e.afii10047=1069,e.afii10048=1070,e.afii10049=1071,e.afii10050=1168,e.afii10051=1026,e.afii10052=1027,e.afii10053=1028,e.afii10054=1029,e.afii10055=1030,e.afii10056=1031,e.afii10057=1032,e.afii10058=1033,e.afii10059=1034,e.afii10060=1035,e.afii10061=1036,e.afii10062=1038,e.afii10063=63172,e.afii10064=63173,e.afii10065=1072,e.afii10066=1073,e.afii10067=1074,e.afii10068=1075,e.afii10069=1076,e.afii10070=1077,e.afii10071=1105,e.afii10072=1078,e.afii10073=1079,e.afii10074=1080,e.afii10075=1081,e.afii10076=1082,e.afii10077=1083,e.afii10078=1084,e.afii10079=1085,e.afii10080=1086,e.afii10081=1087,e.afii10082=1088,e.afii10083=1089,e.afii10084=1090,e.afii10085=1091,e.afii10086=1092,e.afii10087=1093,e.afii10088=1094,e.afii10089=1095,e.afii10090=1096,e.afii10091=1097,e.afii10092=1098,e.afii10093=1099,e.afii10094=1100,e.afii10095=1101,e.afii10096=1102,e.afii10097=1103,e.afii10098=1169,e.afii10099=1106,e.afii10100=1107,e.afii10101=1108,e.afii10102=1109,e.afii10103=1110,e.afii10104=1111,e.afii10105=1112,e.afii10106=1113,e.afii10107=1114,e.afii10108=1115,e.afii10109=1116,e.afii10110=1118,e.afii10145=1039,e.afii10146=1122,e.afii10147=1138,e.afii10148=1140,e.afii10192=63174,e.afii10193=1119,e.afii10194=1123,e.afii10195=1139,e.afii10196=1141,e.afii10831=63175,e.afii10832=63176,e.afii10846=1241,e.afii299=8206,e.afii300=8207,e.afii301=8205,e.afii57381=1642,e.afii57388=1548,e.afii57392=1632,e.afii57393=1633,e.afii57394=1634,e.afii57395=1635,e.afii57396=1636,e.afii57397=1637,e.afii57398=1638,e.afii57399=1639,e.afii57400=1640,e.afii57401=1641,e.afii57403=1563,e.afii57407=1567,e.afii57409=1569,e.afii57410=1570,e.afii57411=1571,e.afii57412=1572,e.afii57413=1573,e.afii57414=1574,e.afii57415=1575,e.afii57416=1576,e.afii57417=1577,e.afii57418=1578,e.afii57419=1579,e.afii57420=1580,e.afii57421=1581,e.afii57422=1582,e.afii57423=1583,e.afii57424=1584,e.afii57425=1585,e.afii57426=1586,e.afii57427=1587,e.afii57428=1588,e.afii57429=1589,e.afii57430=1590,e.afii57431=1591,e.afii57432=1592,e.afii57433=1593,e.afii57434=1594,e.afii57440=1600,e.afii57441=1601,e.afii57442=1602,e.afii57443=1603,e.afii57444=1604,e.afii57445=1605,e.afii57446=1606,e.afii57448=1608,e.afii57449=1609,e.afii57450=1610,e.afii57451=1611,e.afii57452=1612,e.afii57453=1613,e.afii57454=1614,e.afii57455=1615,e.afii57456=1616,e.afii57457=1617,e.afii57458=1618,e.afii57470=1607,e.afii57505=1700,e.afii57506=1662,e.afii57507=1670,e.afii57508=1688,e.afii57509=1711,e.afii57511=1657,e.afii57512=1672,e.afii57513=1681,e.afii57514=1722,e.afii57519=1746,e.afii57534=1749,e.afii57636=8362,e.afii57645=1470,e.afii57658=1475,e.afii57664=1488,e.afii57665=1489,e.afii57666=1490,e.afii57667=1491,e.afii57668=1492,e.afii57669=1493,e.afii57670=1494,e.afii57671=1495,e.afii57672=1496,e.afii57673=1497,e.afii57674=1498,e.afii57675=1499,e.afii57676=1500,e.afii57677=1501,e.afii57678=1502,e.afii57679=1503,e.afii57680=1504,e.afii57681=1505,e.afii57682=1506,e.afii57683=1507,e.afii57684=1508,e.afii57685=1509,e.afii57686=1510,e.afii57687=1511,e.afii57688=1512,e.afii57689=1513,e.afii57690=1514,e.afii57694=64298,e.afii57695=64299,e.afii57700=64331,e.afii57705=64287,e.afii57716=1520,e.afii57717=1521,e.afii57718=1522,e.afii57723=64309,e.afii57793=1460,e.afii57794=1461,e.afii57795=1462,e.afii57796=1467,e.afii57797=1464,e.afii57798=1463,e.afii57799=1456,e.afii57800=1458,e.afii57801=1457,e.afii57802=1459,e.afii57803=1474,e.afii57804=1473,e.afii57806=1465,e.afii57807=1468,e.afii57839=1469,e.afii57841=1471,e.afii57842=1472,e.afii57929=700,e.afii61248=8453,e.afii61289=8467,e.afii61352=8470,e.afii61573=8236,e.afii61574=8237,e.afii61575=8238,e.afii61664=8204,e.afii63167=1645,e.afii64937=701,e.agrave=224,e.agujarati=2693,e.agurmukhi=2565,e.ahiragana=12354,e.ahookabove=7843,e.aibengali=2448,e.aibopomofo=12574,e.aideva=2320,e.aiecyrillic=1237,e.aigujarati=2704,e.aigurmukhi=2576,e.aimatragurmukhi=2632,e.ainarabic=1593,e.ainfinalarabic=65226,e.aininitialarabic=65227,e.ainmedialarabic=65228,e.ainvertedbreve=515,e.aivowelsignbengali=2504,e.aivowelsigndeva=2376,e.aivowelsigngujarati=2760,e.akatakana=12450,e.akatakanahalfwidth=65393,e.akorean=12623,e.alef=1488,e.alefarabic=1575,e.alefdageshhebrew=64304,e.aleffinalarabic=65166,e.alefhamzaabovearabic=1571,e.alefhamzaabovefinalarabic=65156,e.alefhamzabelowarabic=1573,e.alefhamzabelowfinalarabic=65160,e.alefhebrew=1488,e.aleflamedhebrew=64335,e.alefmaddaabovearabic=1570,e.alefmaddaabovefinalarabic=65154,e.alefmaksuraarabic=1609,e.alefmaksurafinalarabic=65264,e.alefmaksurainitialarabic=65267,e.alefmaksuramedialarabic=65268,e.alefpatahhebrew=64302,e.alefqamatshebrew=64303,e.aleph=8501,e.allequal=8780,e.alpha=945,e.alphatonos=940,e.amacron=257,e.amonospace=65345,e.ampersand=38,e.ampersandmonospace=65286,e.ampersandsmall=63270,e.amsquare=13250,e.anbopomofo=12578,e.angbopomofo=12580,e.angbracketleft=12296,e.angbracketright=12297,e.angkhankhuthai=3674,e.angle=8736,e.anglebracketleft=12296,e.anglebracketleftvertical=65087,e.anglebracketright=12297,e.anglebracketrightvertical=65088,e.angleleft=9001,e.angleright=9002,e.angstrom=8491,e.anoteleia=903,e.anudattadeva=2386,e.anusvarabengali=2434,e.anusvaradeva=2306,e.anusvaragujarati=2690,e.aogonek=261,e.apaatosquare=13056,e.aparen=9372,e.apostrophearmenian=1370,e.apostrophemod=700,e.apple=63743,e.approaches=8784,e.approxequal=8776,e.approxequalorimage=8786,e.approximatelyequal=8773,e.araeaekorean=12686,e.araeakorean=12685,e.arc=8978,e.arighthalfring=7834,e.aring=229,e.aringacute=507,e.aringbelow=7681,e.arrowboth=8596,e.arrowdashdown=8675,e.arrowdashleft=8672,e.arrowdashright=8674,e.arrowdashup=8673,e.arrowdblboth=8660,e.arrowdbldown=8659,e.arrowdblleft=8656,e.arrowdblright=8658,e.arrowdblup=8657,e.arrowdown=8595,e.arrowdownleft=8601,e.arrowdownright=8600,e.arrowdownwhite=8681,e.arrowheaddownmod=709,e.arrowheadleftmod=706,e.arrowheadrightmod=707,e.arrowheadupmod=708,e.arrowhorizex=63719,e.arrowleft=8592,e.arrowleftdbl=8656,e.arrowleftdblstroke=8653,e.arrowleftoverright=8646,e.arrowleftwhite=8678,e.arrowright=8594,e.arrowrightdblstroke=8655,e.arrowrightheavy=10142,e.arrowrightoverleft=8644,e.arrowrightwhite=8680,e.arrowtableft=8676,e.arrowtabright=8677,e.arrowup=8593,e.arrowupdn=8597,e.arrowupdnbse=8616,e.arrowupdownbase=8616,e.arrowupleft=8598,e.arrowupleftofdown=8645,e.arrowupright=8599,e.arrowupwhite=8679,e.arrowvertex=63718,e.asciicircum=94,e.asciicircummonospace=65342,e.asciitilde=126,e.asciitildemonospace=65374,e.ascript=593,e.ascriptturned=594,e.asmallhiragana=12353,e.asmallkatakana=12449,e.asmallkatakanahalfwidth=65383,e.asterisk=42,e.asteriskaltonearabic=1645,e.asteriskarabic=1645,e.asteriskmath=8727,e.asteriskmonospace=65290,e.asterisksmall=65121,e.asterism=8258,e.asuperior=63209,e.asymptoticallyequal=8771,e.at=64,e.atilde=227,e.atmonospace=65312,e.atsmall=65131,e.aturned=592,e.aubengali=2452,e.aubopomofo=12576,e.audeva=2324,e.augujarati=2708,e.augurmukhi=2580,e.aulengthmarkbengali=2519,e.aumatragurmukhi=2636,e.auvowelsignbengali=2508,e.auvowelsigndeva=2380,e.auvowelsigngujarati=2764,e.avagrahadeva=2365,e.aybarmenian=1377,e.ayin=1506,e.ayinaltonehebrew=64288,e.ayinhebrew=1506,e.b=98,e.babengali=2476,e.backslash=92,e.backslashmonospace=65340,e.badeva=2348,e.bagujarati=2732,e.bagurmukhi=2604,e.bahiragana=12400,e.bahtthai=3647,e.bakatakana=12496,e.bar=124,e.barmonospace=65372,e.bbopomofo=12549,e.bcircle=9425,e.bdotaccent=7683,e.bdotbelow=7685,e.beamedsixteenthnotes=9836,e.because=8757,e.becyrillic=1073,e.beharabic=1576,e.behfinalarabic=65168,e.behinitialarabic=65169,e.behiragana=12409,e.behmedialarabic=65170,e.behmeeminitialarabic=64671,e.behmeemisolatedarabic=64520,e.behnoonfinalarabic=64621,e.bekatakana=12505,e.benarmenian=1378,e.bet=1489,e.beta=946,e.betasymbolgreek=976,e.betdagesh=64305,e.betdageshhebrew=64305,e.bethebrew=1489,e.betrafehebrew=64332,e.bhabengali=2477,e.bhadeva=2349,e.bhagujarati=2733,e.bhagurmukhi=2605,e.bhook=595,e.bihiragana=12403,e.bikatakana=12499,e.bilabialclick=664,e.bindigurmukhi=2562,e.birusquare=13105,e.blackcircle=9679,e.blackdiamond=9670,e.blackdownpointingtriangle=9660,e.blackleftpointingpointer=9668,e.blackleftpointingtriangle=9664,e.blacklenticularbracketleft=12304,e.blacklenticularbracketleftvertical=65083,e.blacklenticularbracketright=12305,e.blacklenticularbracketrightvertical=65084,e.blacklowerlefttriangle=9699,e.blacklowerrighttriangle=9698,e.blackrectangle=9644,e.blackrightpointingpointer=9658,e.blackrightpointingtriangle=9654,e.blacksmallsquare=9642,e.blacksmilingface=9787,e.blacksquare=9632,e.blackstar=9733,e.blackupperlefttriangle=9700,e.blackupperrighttriangle=9701,e.blackuppointingsmalltriangle=9652,e.blackuppointingtriangle=9650,e.blank=9251,e.blinebelow=7687,e.block=9608,e.bmonospace=65346,e.bobaimaithai=3610,e.bohiragana=12412,e.bokatakana=12508,e.bparen=9373,e.bqsquare=13251,e.braceex=63732,e.braceleft=123,e.braceleftbt=63731,e.braceleftmid=63730,e.braceleftmonospace=65371,e.braceleftsmall=65115,e.bracelefttp=63729,e.braceleftvertical=65079,e.braceright=125,e.bracerightbt=63742,e.bracerightmid=63741,e.bracerightmonospace=65373,e.bracerightsmall=65116,e.bracerighttp=63740,e.bracerightvertical=65080,e.bracketleft=91,e.bracketleftbt=63728,e.bracketleftex=63727,e.bracketleftmonospace=65339,e.bracketlefttp=63726,e.bracketright=93,e.bracketrightbt=63739,e.bracketrightex=63738,e.bracketrightmonospace=65341,e.bracketrighttp=63737,e.breve=728,e.brevebelowcmb=814,e.brevecmb=774,e.breveinvertedbelowcmb=815,e.breveinvertedcmb=785,e.breveinverteddoublecmb=865,e.bridgebelowcmb=810,e.bridgeinvertedbelowcmb=826,e.brokenbar=166,e.bstroke=384,e.bsuperior=63210,e.btopbar=387,e.buhiragana=12406,e.bukatakana=12502,e.bullet=8226,e.bulletinverse=9688,e.bulletoperator=8729,e.bullseye=9678,e.c=99,e.caarmenian=1390,e.cabengali=2458,e.cacute=263,e.cadeva=2330,e.cagujarati=2714,e.cagurmukhi=2586,e.calsquare=13192,e.candrabindubengali=2433,e.candrabinducmb=784,e.candrabindudeva=2305,e.candrabindugujarati=2689,e.capslock=8682,e.careof=8453,e.caron=711,e.caronbelowcmb=812,e.caroncmb=780,e.carriagereturn=8629,e.cbopomofo=12568,e.ccaron=269,e.ccedilla=231,e.ccedillaacute=7689,e.ccircle=9426,e.ccircumflex=265,e.ccurl=597,e.cdot=267,e.cdotaccent=267,e.cdsquare=13253,e.cedilla=184,e.cedillacmb=807,e.cent=162,e.centigrade=8451,e.centinferior=63199,e.centmonospace=65504,e.centoldstyle=63394,e.centsuperior=63200,e.chaarmenian=1401,e.chabengali=2459,e.chadeva=2331,e.chagujarati=2715,e.chagurmukhi=2587,e.chbopomofo=12564,e.cheabkhasiancyrillic=1213,e.checkmark=10003,e.checyrillic=1095,e.chedescenderabkhasiancyrillic=1215,e.chedescendercyrillic=1207,e.chedieresiscyrillic=1269,e.cheharmenian=1395,e.chekhakassiancyrillic=1228,e.cheverticalstrokecyrillic=1209,e.chi=967,e.chieuchacirclekorean=12919,e.chieuchaparenkorean=12823,e.chieuchcirclekorean=12905,e.chieuchkorean=12618,e.chieuchparenkorean=12809,e.chochangthai=3594,e.chochanthai=3592,e.chochingthai=3593,e.chochoethai=3596,e.chook=392,e.cieucacirclekorean=12918,e.cieucaparenkorean=12822,e.cieuccirclekorean=12904,e.cieuckorean=12616,e.cieucparenkorean=12808,e.cieucuparenkorean=12828,e.circle=9675,e.circlecopyrt=169,e.circlemultiply=8855,e.circleot=8857,e.circleplus=8853,e.circlepostalmark=12342,e.circlewithlefthalfblack=9680,e.circlewithrighthalfblack=9681,e.circumflex=710,e.circumflexbelowcmb=813,e.circumflexcmb=770,e.clear=8999,e.clickalveolar=450,e.clickdental=448,e.clicklateral=449,e.clickretroflex=451,e.club=9827,e.clubsuitblack=9827,e.clubsuitwhite=9831,e.cmcubedsquare=13220,e.cmonospace=65347,e.cmsquaredsquare=13216,e.coarmenian=1409,e.colon=58,e.colonmonetary=8353,e.colonmonospace=65306,e.colonsign=8353,e.colonsmall=65109,e.colontriangularhalfmod=721,e.colontriangularmod=720,e.comma=44,e.commaabovecmb=787,e.commaaboverightcmb=789,e.commaaccent=63171,e.commaarabic=1548,e.commaarmenian=1373,e.commainferior=63201,e.commamonospace=65292,e.commareversedabovecmb=788,e.commareversedmod=701,e.commasmall=65104,e.commasuperior=63202,e.commaturnedabovecmb=786,e.commaturnedmod=699,e.compass=9788,e.congruent=8773,e.contourintegral=8750,e.control=8963,e.controlACK=6,e.controlBEL=7,e.controlBS=8,e.controlCAN=24,e.controlCR=13,e.controlDC1=17,e.controlDC2=18,e.controlDC3=19,e.controlDC4=20,e.controlDEL=127,e.controlDLE=16,e.controlEM=25,e.controlENQ=5,e.controlEOT=4,e.controlESC=27,e.controlETB=23,e.controlETX=3,e.controlFF=12,e.controlFS=28,e.controlGS=29,e.controlHT=9,e.controlLF=10,e.controlNAK=21,e.controlNULL=0,e.controlRS=30,e.controlSI=15,e.controlSO=14,e.controlSOT=2,e.controlSTX=1,e.controlSUB=26,e.controlSYN=22,e.controlUS=31,e.controlVT=11,e.copyright=169,e.copyrightsans=63721,e.copyrightserif=63193,e.cornerbracketleft=12300,e.cornerbracketlefthalfwidth=65378,e.cornerbracketleftvertical=65089,e.cornerbracketright=12301,e.cornerbracketrighthalfwidth=65379,e.cornerbracketrightvertical=65090,e.corporationsquare=13183,e.cosquare=13255,e.coverkgsquare=13254,e.cparen=9374,e.cruzeiro=8354,e.cstretched=663,e.curlyand=8911,e.curlyor=8910,e.currency=164,e.cyrBreve=63185,e.cyrFlex=63186,e.cyrbreve=63188,e.cyrflex=63189,e.d=100,e.daarmenian=1380,e.dabengali=2470,e.dadarabic=1590,e.dadeva=2342,e.dadfinalarabic=65214,e.dadinitialarabic=65215,e.dadmedialarabic=65216,e.dagesh=1468,e.dageshhebrew=1468,e.dagger=8224,e.daggerdbl=8225,e.dagujarati=2726,e.dagurmukhi=2598,e.dahiragana=12384,e.dakatakana=12480,e.dalarabic=1583,e.dalet=1491,e.daletdagesh=64307,e.daletdageshhebrew=64307,e.dalethebrew=1491,e.dalfinalarabic=65194,e.dammaarabic=1615,e.dammalowarabic=1615,e.dammatanaltonearabic=1612,e.dammatanarabic=1612,e.danda=2404,e.dargahebrew=1447,e.dargalefthebrew=1447,e.dasiapneumatacyrilliccmb=1157,e.dblGrave=63187,e.dblanglebracketleft=12298,e.dblanglebracketleftvertical=65085,e.dblanglebracketright=12299,e.dblanglebracketrightvertical=65086,e.dblarchinvertedbelowcmb=811,e.dblarrowleft=8660,e.dblarrowright=8658,e.dbldanda=2405,e.dblgrave=63190,e.dblgravecmb=783,e.dblintegral=8748,e.dbllowline=8215,e.dbllowlinecmb=819,e.dbloverlinecmb=831,e.dblprimemod=698,e.dblverticalbar=8214,e.dblverticallineabovecmb=782,e.dbopomofo=12553,e.dbsquare=13256,e.dcaron=271,e.dcedilla=7697,e.dcircle=9427,e.dcircumflexbelow=7699,e.dcroat=273,e.ddabengali=2465,e.ddadeva=2337,e.ddagujarati=2721,e.ddagurmukhi=2593,e.ddalarabic=1672,e.ddalfinalarabic=64393,e.dddhadeva=2396,e.ddhabengali=2466,e.ddhadeva=2338,e.ddhagujarati=2722,e.ddhagurmukhi=2594,e.ddotaccent=7691,e.ddotbelow=7693,e.decimalseparatorarabic=1643,e.decimalseparatorpersian=1643,e.decyrillic=1076,e.degree=176,e.dehihebrew=1453,e.dehiragana=12391,e.deicoptic=1007,e.dekatakana=12487,e.deleteleft=9003,e.deleteright=8998,e.delta=948,e.deltaturned=397,e.denominatorminusonenumeratorbengali=2552,e.dezh=676,e.dhabengali=2471,e.dhadeva=2343,e.dhagujarati=2727,e.dhagurmukhi=2599,e.dhook=599,e.dialytikatonos=901,e.dialytikatonoscmb=836,e.diamond=9830,e.diamondsuitwhite=9826,e.dieresis=168,e.dieresisacute=63191,e.dieresisbelowcmb=804,e.dieresiscmb=776,e.dieresisgrave=63192,e.dieresistonos=901,e.dihiragana=12386,e.dikatakana=12482,e.dittomark=12291,e.divide=247,e.divides=8739,e.divisionslash=8725,e.djecyrillic=1106,e.dkshade=9619,e.dlinebelow=7695,e.dlsquare=13207,e.dmacron=273,e.dmonospace=65348,e.dnblock=9604,e.dochadathai=3598,e.dodekthai=3604,e.dohiragana=12393,e.dokatakana=12489,e.dollar=36,e.dollarinferior=63203,e.dollarmonospace=65284,e.dollaroldstyle=63268,e.dollarsmall=65129,e.dollarsuperior=63204,e.dong=8363,e.dorusquare=13094,e.dotaccent=729,e.dotaccentcmb=775,e.dotbelowcmb=803,e.dotbelowcomb=803,e.dotkatakana=12539,e.dotlessi=305,e.dotlessj=63166,e.dotlessjstrokehook=644,e.dotmath=8901,e.dottedcircle=9676,e.doubleyodpatah=64287,e.doubleyodpatahhebrew=64287,e.downtackbelowcmb=798,e.downtackmod=725,e.dparen=9375,e.dsuperior=63211,e.dtail=598,e.dtopbar=396,e.duhiragana=12389,e.dukatakana=12485,e.dz=499,e.dzaltone=675,e.dzcaron=454,e.dzcurl=677,e.dzeabkhasiancyrillic=1249,e.dzecyrillic=1109,e.dzhecyrillic=1119,e.e=101,e.eacute=233,e.earth=9793,e.ebengali=2447,e.ebopomofo=12572,e.ebreve=277,e.ecandradeva=2317,e.ecandragujarati=2701,e.ecandravowelsigndeva=2373,e.ecandravowelsigngujarati=2757,e.ecaron=283,e.ecedillabreve=7709,e.echarmenian=1381,e.echyiwnarmenian=1415,e.ecircle=9428,e.ecircumflex=234,e.ecircumflexacute=7871,e.ecircumflexbelow=7705,e.ecircumflexdotbelow=7879,e.ecircumflexgrave=7873,e.ecircumflexhookabove=7875,e.ecircumflextilde=7877,e.ecyrillic=1108,e.edblgrave=517,e.edeva=2319,e.edieresis=235,e.edot=279,e.edotaccent=279,e.edotbelow=7865,e.eegurmukhi=2575,e.eematragurmukhi=2631,e.efcyrillic=1092,e.egrave=232,e.egujarati=2703,e.eharmenian=1383,e.ehbopomofo=12573,e.ehiragana=12360,e.ehookabove=7867,e.eibopomofo=12575,e.eight=56,e.eightarabic=1640,e.eightbengali=2542,e.eightcircle=9319,e.eightcircleinversesansserif=10129,e.eightdeva=2414,e.eighteencircle=9329,e.eighteenparen=9349,e.eighteenperiod=9369,e.eightgujarati=2798,e.eightgurmukhi=2670,e.eighthackarabic=1640,e.eighthangzhou=12328,e.eighthnotebeamed=9835,e.eightideographicparen=12839,e.eightinferior=8328,e.eightmonospace=65304,e.eightoldstyle=63288,e.eightparen=9339,e.eightperiod=9359,e.eightpersian=1784,e.eightroman=8567,e.eightsuperior=8312,e.eightthai=3672,e.einvertedbreve=519,e.eiotifiedcyrillic=1125,e.ekatakana=12456,e.ekatakanahalfwidth=65396,e.ekonkargurmukhi=2676,e.ekorean=12628,e.elcyrillic=1083,e.element=8712,e.elevencircle=9322,e.elevenparen=9342,e.elevenperiod=9362,e.elevenroman=8570,e.ellipsis=8230,e.ellipsisvertical=8942,e.emacron=275,e.emacronacute=7703,e.emacrongrave=7701,e.emcyrillic=1084,e.emdash=8212,e.emdashvertical=65073,e.emonospace=65349,e.emphasismarkarmenian=1371,e.emptyset=8709,e.enbopomofo=12579,e.encyrillic=1085,e.endash=8211,e.endashvertical=65074,e.endescendercyrillic=1187,e.eng=331,e.engbopomofo=12581,e.enghecyrillic=1189,e.enhookcyrillic=1224,e.enspace=8194,e.eogonek=281,e.eokorean=12627,e.eopen=603,e.eopenclosed=666,e.eopenreversed=604,e.eopenreversedclosed=606,e.eopenreversedhook=605,e.eparen=9376,e.epsilon=949,e.epsilontonos=941,e.equal=61,e.equalmonospace=65309,e.equalsmall=65126,e.equalsuperior=8316,e.equivalence=8801,e.erbopomofo=12582,e.ercyrillic=1088,e.ereversed=600,e.ereversedcyrillic=1101,e.escyrillic=1089,e.esdescendercyrillic=1195,e.esh=643,e.eshcurl=646,e.eshortdeva=2318,e.eshortvowelsigndeva=2374,e.eshreversedloop=426,e.eshsquatreversed=645,e.esmallhiragana=12359,e.esmallkatakana=12455,e.esmallkatakanahalfwidth=65386,e.estimated=8494,e.esuperior=63212,e.eta=951,e.etarmenian=1384,e.etatonos=942,e.eth=240,e.etilde=7869,e.etildebelow=7707,e.etnahtafoukhhebrew=1425,e.etnahtafoukhlefthebrew=1425,e.etnahtahebrew=1425,e.etnahtalefthebrew=1425,e.eturned=477,e.eukorean=12641,e.euro=8364,e.evowelsignbengali=2503,e.evowelsigndeva=2375,e.evowelsigngujarati=2759,e.exclam=33,e.exclamarmenian=1372,e.exclamdbl=8252,e.exclamdown=161,e.exclamdownsmall=63393,e.exclammonospace=65281,e.exclamsmall=63265,e.existential=8707,e.ezh=658,e.ezhcaron=495,e.ezhcurl=659,e.ezhreversed=441,e.ezhtail=442,e.f=102,e.fadeva=2398,e.fagurmukhi=2654,e.fahrenheit=8457,e.fathaarabic=1614,e.fathalowarabic=1614,e.fathatanarabic=1611,e.fbopomofo=12552,e.fcircle=9429,e.fdotaccent=7711,e.feharabic=1601,e.feharmenian=1414,e.fehfinalarabic=65234,e.fehinitialarabic=65235,e.fehmedialarabic=65236,e.feicoptic=997,e.female=9792,e.ff=64256,e.f_f=64256,e.ffi=64259,e.ffl=64260,e.fi=64257,e.fifteencircle=9326,e.fifteenparen=9346,e.fifteenperiod=9366,e.figuredash=8210,e.filledbox=9632,e.filledrect=9644,e.finalkaf=1498,e.finalkafdagesh=64314,e.finalkafdageshhebrew=64314,e.finalkafhebrew=1498,e.finalmem=1501,e.finalmemhebrew=1501,e.finalnun=1503,e.finalnunhebrew=1503,e.finalpe=1507,e.finalpehebrew=1507,e.finaltsadi=1509,e.finaltsadihebrew=1509,e.firsttonechinese=713,e.fisheye=9673,e.fitacyrillic=1139,e.five=53,e.fivearabic=1637,e.fivebengali=2539,e.fivecircle=9316,e.fivecircleinversesansserif=10126,e.fivedeva=2411,e.fiveeighths=8541,e.fivegujarati=2795,e.fivegurmukhi=2667,e.fivehackarabic=1637,e.fivehangzhou=12325,e.fiveideographicparen=12836,e.fiveinferior=8325,e.fivemonospace=65301,e.fiveoldstyle=63285,e.fiveparen=9336,e.fiveperiod=9356,e.fivepersian=1781,e.fiveroman=8564,e.fivesuperior=8309,e.fivethai=3669,e.fl=64258,e.florin=402,e.fmonospace=65350,e.fmsquare=13209,e.fofanthai=3615,e.fofathai=3613,e.fongmanthai=3663,e.forall=8704,e.four=52,e.fourarabic=1636,e.fourbengali=2538,e.fourcircle=9315,e.fourcircleinversesansserif=10125,e.fourdeva=2410,e.fourgujarati=2794,e.fourgurmukhi=2666,e.fourhackarabic=1636,e.fourhangzhou=12324,e.fourideographicparen=12835,e.fourinferior=8324,e.fourmonospace=65300,e.fournumeratorbengali=2551,e.fouroldstyle=63284,e.fourparen=9335,e.fourperiod=9355,e.fourpersian=1780,e.fourroman=8563,e.foursuperior=8308,e.fourteencircle=9325,e.fourteenparen=9345,e.fourteenperiod=9365,e.fourthai=3668,e.fourthtonechinese=715,e.fparen=9377,e.fraction=8260,e.franc=8355,e.g=103,e.gabengali=2455,e.gacute=501,e.gadeva=2327,e.gafarabic=1711,e.gaffinalarabic=64403,e.gafinitialarabic=64404,e.gafmedialarabic=64405,e.gagujarati=2711,e.gagurmukhi=2583,e.gahiragana=12364,e.gakatakana=12460,e.gamma=947,e.gammalatinsmall=611,e.gammasuperior=736,e.gangiacoptic=1003,e.gbopomofo=12557,e.gbreve=287,e.gcaron=487,e.gcedilla=291,e.gcircle=9430,e.gcircumflex=285,e.gcommaaccent=291,e.gdot=289,e.gdotaccent=289,e.gecyrillic=1075,e.gehiragana=12370,e.gekatakana=12466,e.geometricallyequal=8785,e.gereshaccenthebrew=1436,e.gereshhebrew=1523,e.gereshmuqdamhebrew=1437,e.germandbls=223,e.gershayimaccenthebrew=1438,e.gershayimhebrew=1524,e.getamark=12307,e.ghabengali=2456,e.ghadarmenian=1394,e.ghadeva=2328,e.ghagujarati=2712,e.ghagurmukhi=2584,e.ghainarabic=1594,e.ghainfinalarabic=65230,e.ghaininitialarabic=65231,e.ghainmedialarabic=65232,e.ghemiddlehookcyrillic=1173,e.ghestrokecyrillic=1171,e.gheupturncyrillic=1169,e.ghhadeva=2394,e.ghhagurmukhi=2650,e.ghook=608,e.ghzsquare=13203,e.gihiragana=12366,e.gikatakana=12462,e.gimarmenian=1379,e.gimel=1490,e.gimeldagesh=64306,e.gimeldageshhebrew=64306,e.gimelhebrew=1490,e.gjecyrillic=1107,e.glottalinvertedstroke=446,e.glottalstop=660,e.glottalstopinverted=662,e.glottalstopmod=704,e.glottalstopreversed=661,e.glottalstopreversedmod=705,e.glottalstopreversedsuperior=740,e.glottalstopstroke=673,e.glottalstopstrokereversed=674,e.gmacron=7713,e.gmonospace=65351,e.gohiragana=12372,e.gokatakana=12468,e.gparen=9378,e.gpasquare=13228,e.gradient=8711,e.grave=96,e.gravebelowcmb=790,e.gravecmb=768,e.gravecomb=768,e.gravedeva=2387,e.gravelowmod=718,e.gravemonospace=65344,e.gravetonecmb=832,e.greater=62,e.greaterequal=8805,e.greaterequalorless=8923,e.greatermonospace=65310,e.greaterorequivalent=8819,e.greaterorless=8823,e.greateroverequal=8807,e.greatersmall=65125,e.gscript=609,e.gstroke=485,e.guhiragana=12368,e.guillemotleft=171,e.guillemotright=187,e.guilsinglleft=8249,e.guilsinglright=8250,e.gukatakana=12464,e.guramusquare=13080,e.gysquare=13257,e.h=104,e.haabkhasiancyrillic=1193,e.haaltonearabic=1729,e.habengali=2489,e.hadescendercyrillic=1203,e.hadeva=2361,e.hagujarati=2745,e.hagurmukhi=2617,e.haharabic=1581,e.hahfinalarabic=65186,e.hahinitialarabic=65187,e.hahiragana=12399,e.hahmedialarabic=65188,e.haitusquare=13098,e.hakatakana=12495,e.hakatakanahalfwidth=65418,e.halantgurmukhi=2637,e.hamzaarabic=1569,e.hamzalowarabic=1569,e.hangulfiller=12644,e.hardsigncyrillic=1098,e.harpoonleftbarbup=8636,e.harpoonrightbarbup=8640,e.hasquare=13258,e.hatafpatah=1458,e.hatafpatah16=1458,e.hatafpatah23=1458,e.hatafpatah2f=1458,e.hatafpatahhebrew=1458,e.hatafpatahnarrowhebrew=1458,e.hatafpatahquarterhebrew=1458,e.hatafpatahwidehebrew=1458,e.hatafqamats=1459,e.hatafqamats1b=1459,e.hatafqamats28=1459,e.hatafqamats34=1459,e.hatafqamatshebrew=1459,e.hatafqamatsnarrowhebrew=1459,e.hatafqamatsquarterhebrew=1459,e.hatafqamatswidehebrew=1459,e.hatafsegol=1457,e.hatafsegol17=1457,e.hatafsegol24=1457,e.hatafsegol30=1457,e.hatafsegolhebrew=1457,e.hatafsegolnarrowhebrew=1457,e.hatafsegolquarterhebrew=1457,e.hatafsegolwidehebrew=1457,e.hbar=295,e.hbopomofo=12559,e.hbrevebelow=7723,e.hcedilla=7721,e.hcircle=9431,e.hcircumflex=293,e.hdieresis=7719,e.hdotaccent=7715,e.hdotbelow=7717,e.he=1492,e.heart=9829,e.heartsuitblack=9829,e.heartsuitwhite=9825,e.hedagesh=64308,e.hedageshhebrew=64308,e.hehaltonearabic=1729,e.heharabic=1607,e.hehebrew=1492,e.hehfinalaltonearabic=64423,e.hehfinalalttwoarabic=65258,e.hehfinalarabic=65258,e.hehhamzaabovefinalarabic=64421,e.hehhamzaaboveisolatedarabic=64420,e.hehinitialaltonearabic=64424,e.hehinitialarabic=65259,e.hehiragana=12408,e.hehmedialaltonearabic=64425,e.hehmedialarabic=65260,e.heiseierasquare=13179,e.hekatakana=12504,e.hekatakanahalfwidth=65421,e.hekutaarusquare=13110,e.henghook=615,e.herutusquare=13113,e.het=1495,e.hethebrew=1495,e.hhook=614,e.hhooksuperior=689,e.hieuhacirclekorean=12923,e.hieuhaparenkorean=12827,e.hieuhcirclekorean=12909,e.hieuhkorean=12622,e.hieuhparenkorean=12813,e.hihiragana=12402,e.hikatakana=12498,e.hikatakanahalfwidth=65419,e.hiriq=1460,e.hiriq14=1460,e.hiriq21=1460,e.hiriq2d=1460,e.hiriqhebrew=1460,e.hiriqnarrowhebrew=1460,e.hiriqquarterhebrew=1460,e.hiriqwidehebrew=1460,e.hlinebelow=7830,e.hmonospace=65352,e.hoarmenian=1392,e.hohipthai=3627,e.hohiragana=12411,e.hokatakana=12507,e.hokatakanahalfwidth=65422,e.holam=1465,e.holam19=1465,e.holam26=1465,e.holam32=1465,e.holamhebrew=1465,e.holamnarrowhebrew=1465,e.holamquarterhebrew=1465,e.holamwidehebrew=1465,e.honokhukthai=3630,e.hookabovecomb=777,e.hookcmb=777,e.hookpalatalizedbelowcmb=801,e.hookretroflexbelowcmb=802,e.hoonsquare=13122,e.horicoptic=1001,e.horizontalbar=8213,e.horncmb=795,e.hotsprings=9832,e.house=8962,e.hparen=9379,e.hsuperior=688,e.hturned=613,e.huhiragana=12405,e.huiitosquare=13107,e.hukatakana=12501,e.hukatakanahalfwidth=65420,e.hungarumlaut=733,e.hungarumlautcmb=779,e.hv=405,e.hyphen=45,e.hypheninferior=63205,e.hyphenmonospace=65293,e.hyphensmall=65123,e.hyphensuperior=63206,e.hyphentwo=8208,e.i=105,e.iacute=237,e.iacyrillic=1103,e.ibengali=2439,e.ibopomofo=12583,e.ibreve=301,e.icaron=464,e.icircle=9432,e.icircumflex=238,e.icyrillic=1110,e.idblgrave=521,e.ideographearthcircle=12943,e.ideographfirecircle=12939,e.ideographicallianceparen=12863,e.ideographiccallparen=12858,e.ideographiccentrecircle=12965,e.ideographicclose=12294,e.ideographiccomma=12289,e.ideographiccommaleft=65380,e.ideographiccongratulationparen=12855,e.ideographiccorrectcircle=12963,e.ideographicearthparen=12847,e.ideographicenterpriseparen=12861,e.ideographicexcellentcircle=12957,e.ideographicfestivalparen=12864,e.ideographicfinancialcircle=12950,e.ideographicfinancialparen=12854,e.ideographicfireparen=12843,e.ideographichaveparen=12850,e.ideographichighcircle=12964,e.ideographiciterationmark=12293,e.ideographiclaborcircle=12952,e.ideographiclaborparen=12856,e.ideographicleftcircle=12967,e.ideographiclowcircle=12966,e.ideographicmedicinecircle=12969,e.ideographicmetalparen=12846,e.ideographicmoonparen=12842,e.ideographicnameparen=12852,e.ideographicperiod=12290,e.ideographicprintcircle=12958,e.ideographicreachparen=12867,e.ideographicrepresentparen=12857,e.ideographicresourceparen=12862,e.ideographicrightcircle=12968,e.ideographicsecretcircle=12953,e.ideographicselfparen=12866,e.ideographicsocietyparen=12851,e.ideographicspace=12288,e.ideographicspecialparen=12853,e.ideographicstockparen=12849,e.ideographicstudyparen=12859,e.ideographicsunparen=12848,e.ideographicsuperviseparen=12860,e.ideographicwaterparen=12844,e.ideographicwoodparen=12845,e.ideographiczero=12295,e.ideographmetalcircle=12942,e.ideographmooncircle=12938,e.ideographnamecircle=12948,e.ideographsuncircle=12944,e.ideographwatercircle=12940,e.ideographwoodcircle=12941,e.ideva=2311,e.idieresis=239,e.idieresisacute=7727,e.idieresiscyrillic=1253,e.idotbelow=7883,e.iebrevecyrillic=1239,e.iecyrillic=1077,e.ieungacirclekorean=12917,e.ieungaparenkorean=12821,e.ieungcirclekorean=12903,e.ieungkorean=12615,e.ieungparenkorean=12807,e.igrave=236,e.igujarati=2695,e.igurmukhi=2567,e.ihiragana=12356,e.ihookabove=7881,e.iibengali=2440,e.iicyrillic=1080,e.iideva=2312,e.iigujarati=2696,e.iigurmukhi=2568,e.iimatragurmukhi=2624,e.iinvertedbreve=523,e.iishortcyrillic=1081,e.iivowelsignbengali=2496,e.iivowelsigndeva=2368,e.iivowelsigngujarati=2752,e.ij=307,e.ikatakana=12452,e.ikatakanahalfwidth=65394,e.ikorean=12643,e.ilde=732,e.iluyhebrew=1452,e.imacron=299,e.imacroncyrillic=1251,e.imageorapproximatelyequal=8787,e.imatragurmukhi=2623,e.imonospace=65353,e.increment=8710,e.infinity=8734,e.iniarmenian=1387,e.integral=8747,e.integralbottom=8993,e.integralbt=8993,e.integralex=63733,e.integraltop=8992,e.integraltp=8992,e.intersection=8745,e.intisquare=13061,e.invbullet=9688,e.invcircle=9689,e.invsmileface=9787,e.iocyrillic=1105,e.iogonek=303,e.iota=953,e.iotadieresis=970,e.iotadieresistonos=912,e.iotalatin=617,e.iotatonos=943,e.iparen=9380,e.irigurmukhi=2674,e.ismallhiragana=12355,e.ismallkatakana=12451,e.ismallkatakanahalfwidth=65384,e.issharbengali=2554,e.istroke=616,e.isuperior=63213,e.iterationhiragana=12445,e.iterationkatakana=12541,e.itilde=297,e.itildebelow=7725,e.iubopomofo=12585,e.iucyrillic=1102,e.ivowelsignbengali=2495,e.ivowelsigndeva=2367,e.ivowelsigngujarati=2751,e.izhitsacyrillic=1141,e.izhitsadblgravecyrillic=1143,e.j=106,e.jaarmenian=1393,e.jabengali=2460,e.jadeva=2332,e.jagujarati=2716,e.jagurmukhi=2588,e.jbopomofo=12560,e.jcaron=496,e.jcircle=9433,e.jcircumflex=309,e.jcrossedtail=669,e.jdotlessstroke=607,e.jecyrillic=1112,e.jeemarabic=1580,e.jeemfinalarabic=65182,e.jeeminitialarabic=65183,e.jeemmedialarabic=65184,e.jeharabic=1688,e.jehfinalarabic=64395,e.jhabengali=2461,e.jhadeva=2333,e.jhagujarati=2717,e.jhagurmukhi=2589,e.jheharmenian=1403,e.jis=12292,e.jmonospace=65354,e.jparen=9381,e.jsuperior=690,e.k=107,e.kabashkircyrillic=1185,e.kabengali=2453,e.kacute=7729,e.kacyrillic=1082,e.kadescendercyrillic=1179,e.kadeva=2325,e.kaf=1499,e.kafarabic=1603,e.kafdagesh=64315,e.kafdageshhebrew=64315,e.kaffinalarabic=65242,e.kafhebrew=1499,e.kafinitialarabic=65243,e.kafmedialarabic=65244,e.kafrafehebrew=64333,e.kagujarati=2709,e.kagurmukhi=2581,e.kahiragana=12363,e.kahookcyrillic=1220,e.kakatakana=12459,e.kakatakanahalfwidth=65398,e.kappa=954,e.kappasymbolgreek=1008,e.kapyeounmieumkorean=12657,e.kapyeounphieuphkorean=12676,e.kapyeounpieupkorean=12664,e.kapyeounssangpieupkorean=12665,e.karoriisquare=13069,e.kashidaautoarabic=1600,e.kashidaautonosidebearingarabic=1600,e.kasmallkatakana=12533,e.kasquare=13188,e.kasraarabic=1616,e.kasratanarabic=1613,e.kastrokecyrillic=1183,e.katahiraprolongmarkhalfwidth=65392,e.kaverticalstrokecyrillic=1181,e.kbopomofo=12558,e.kcalsquare=13193,e.kcaron=489,e.kcedilla=311,e.kcircle=9434,e.kcommaaccent=311,e.kdotbelow=7731,e.keharmenian=1412,e.kehiragana=12369,e.kekatakana=12465,e.kekatakanahalfwidth=65401,e.kenarmenian=1391,e.kesmallkatakana=12534,e.kgreenlandic=312,e.khabengali=2454,e.khacyrillic=1093,e.khadeva=2326,e.khagujarati=2710,e.khagurmukhi=2582,e.khaharabic=1582,e.khahfinalarabic=65190,e.khahinitialarabic=65191,e.khahmedialarabic=65192,e.kheicoptic=999,e.khhadeva=2393,e.khhagurmukhi=2649,e.khieukhacirclekorean=12920,e.khieukhaparenkorean=12824,e.khieukhcirclekorean=12906,e.khieukhkorean=12619,e.khieukhparenkorean=12810,e.khokhaithai=3586,e.khokhonthai=3589,e.khokhuatthai=3587,e.khokhwaithai=3588,e.khomutthai=3675,e.khook=409,e.khorakhangthai=3590,e.khzsquare=13201,e.kihiragana=12365,e.kikatakana=12461,e.kikatakanahalfwidth=65399,e.kiroguramusquare=13077,e.kiromeetorusquare=13078,e.kirosquare=13076,e.kiyeokacirclekorean=12910,e.kiyeokaparenkorean=12814,e.kiyeokcirclekorean=12896,e.kiyeokkorean=12593,e.kiyeokparenkorean=12800,e.kiyeoksioskorean=12595,e.kjecyrillic=1116,e.klinebelow=7733,e.klsquare=13208,e.kmcubedsquare=13222,e.kmonospace=65355,e.kmsquaredsquare=13218,e.kohiragana=12371,e.kohmsquare=13248,e.kokaithai=3585,e.kokatakana=12467,e.kokatakanahalfwidth=65402,e.kooposquare=13086,e.koppacyrillic=1153,e.koreanstandardsymbol=12927,e.koroniscmb=835,e.kparen=9382,e.kpasquare=13226,e.ksicyrillic=1135,e.ktsquare=13263,e.kturned=670,e.kuhiragana=12367,e.kukatakana=12463,e.kukatakanahalfwidth=65400,e.kvsquare=13240,e.kwsquare=13246,e.l=108,e.labengali=2482,e.lacute=314,e.ladeva=2354,e.lagujarati=2738,e.lagurmukhi=2610,e.lakkhangyaothai=3653,e.lamaleffinalarabic=65276,e.lamalefhamzaabovefinalarabic=65272,e.lamalefhamzaaboveisolatedarabic=65271,e.lamalefhamzabelowfinalarabic=65274,e.lamalefhamzabelowisolatedarabic=65273,e.lamalefisolatedarabic=65275,e.lamalefmaddaabovefinalarabic=65270,e.lamalefmaddaaboveisolatedarabic=65269,e.lamarabic=1604,e.lambda=955,e.lambdastroke=411,e.lamed=1500,e.lameddagesh=64316,e.lameddageshhebrew=64316,e.lamedhebrew=1500,e.lamfinalarabic=65246,e.lamhahinitialarabic=64714,e.laminitialarabic=65247,e.lamjeeminitialarabic=64713,e.lamkhahinitialarabic=64715,e.lamlamhehisolatedarabic=65010,e.lammedialarabic=65248,e.lammeemhahinitialarabic=64904,e.lammeeminitialarabic=64716,e.largecircle=9711,e.lbar=410,e.lbelt=620,e.lbopomofo=12556,e.lcaron=318,e.lcedilla=316,e.lcircle=9435,e.lcircumflexbelow=7741,e.lcommaaccent=316,e.ldot=320,e.ldotaccent=320,e.ldotbelow=7735,e.ldotbelowmacron=7737,e.leftangleabovecmb=794,e.lefttackbelowcmb=792,e.less=60,e.lessequal=8804,e.lessequalorgreater=8922,e.lessmonospace=65308,e.lessorequivalent=8818,e.lessorgreater=8822,e.lessoverequal=8806,e.lesssmall=65124,e.lezh=622,e.lfblock=9612,e.lhookretroflex=621,e.lira=8356,e.liwnarmenian=1388,e.lj=457,e.ljecyrillic=1113,e.ll=63168,e.lladeva=2355,e.llagujarati=2739,e.llinebelow=7739,e.llladeva=2356,e.llvocalicbengali=2529,e.llvocalicdeva=2401,e.llvocalicvowelsignbengali=2531,e.llvocalicvowelsigndeva=2403,e.lmiddletilde=619,e.lmonospace=65356,e.lmsquare=13264,e.lochulathai=3628,e.logicaland=8743,e.logicalnot=172,e.logicalnotreversed=8976,e.logicalor=8744,e.lolingthai=3621,e.longs=383,e.lowlinecenterline=65102,e.lowlinecmb=818,e.lowlinedashed=65101,e.lozenge=9674,e.lparen=9383,e.lslash=322,e.lsquare=8467,e.lsuperior=63214,e.ltshade=9617,e.luthai=3622,e.lvocalicbengali=2444,e.lvocalicdeva=2316,e.lvocalicvowelsignbengali=2530,e.lvocalicvowelsigndeva=2402,e.lxsquare=13267,e.m=109,e.mabengali=2478,e.macron=175,e.macronbelowcmb=817,e.macroncmb=772,e.macronlowmod=717,e.macronmonospace=65507,e.macute=7743,e.madeva=2350,e.magujarati=2734,e.magurmukhi=2606,e.mahapakhhebrew=1444,e.mahapakhlefthebrew=1444,e.mahiragana=12414,e.maichattawalowleftthai=63637,e.maichattawalowrightthai=63636,e.maichattawathai=3659,e.maichattawaupperleftthai=63635,e.maieklowleftthai=63628,e.maieklowrightthai=63627,e.maiekthai=3656,e.maiekupperleftthai=63626,e.maihanakatleftthai=63620,e.maihanakatthai=3633,e.maitaikhuleftthai=63625,e.maitaikhuthai=3655,e.maitholowleftthai=63631,e.maitholowrightthai=63630,e.maithothai=3657,e.maithoupperleftthai=63629,e.maitrilowleftthai=63634,e.maitrilowrightthai=63633,e.maitrithai=3658,e.maitriupperleftthai=63632,e.maiyamokthai=3654,e.makatakana=12510,e.makatakanahalfwidth=65423,e.male=9794,e.mansyonsquare=13127,e.maqafhebrew=1470,e.mars=9794,e.masoracirclehebrew=1455,e.masquare=13187,e.mbopomofo=12551,e.mbsquare=13268,e.mcircle=9436,e.mcubedsquare=13221,e.mdotaccent=7745,e.mdotbelow=7747,e.meemarabic=1605,e.meemfinalarabic=65250,e.meeminitialarabic=65251,e.meemmedialarabic=65252,e.meemmeeminitialarabic=64721,e.meemmeemisolatedarabic=64584,e.meetorusquare=13133,e.mehiragana=12417,e.meizierasquare=13182,e.mekatakana=12513,e.mekatakanahalfwidth=65426,e.mem=1502,e.memdagesh=64318,e.memdageshhebrew=64318,e.memhebrew=1502,e.menarmenian=1396,e.merkhahebrew=1445,e.merkhakefulahebrew=1446,e.merkhakefulalefthebrew=1446,e.merkhalefthebrew=1445,e.mhook=625,e.mhzsquare=13202,e.middledotkatakanahalfwidth=65381,e.middot=183,e.mieumacirclekorean=12914,e.mieumaparenkorean=12818,e.mieumcirclekorean=12900,e.mieumkorean=12609,e.mieumpansioskorean=12656,e.mieumparenkorean=12804,e.mieumpieupkorean=12654,e.mieumsioskorean=12655,e.mihiragana=12415,e.mikatakana=12511,e.mikatakanahalfwidth=65424,e.minus=8722,e.minusbelowcmb=800,e.minuscircle=8854,e.minusmod=727,e.minusplus=8723,e.minute=8242,e.miribaarusquare=13130,e.mirisquare=13129,e.mlonglegturned=624,e.mlsquare=13206,e.mmcubedsquare=13219,e.mmonospace=65357,e.mmsquaredsquare=13215,e.mohiragana=12418,e.mohmsquare=13249,e.mokatakana=12514,e.mokatakanahalfwidth=65427,e.molsquare=13270,e.momathai=3617,e.moverssquare=13223,e.moverssquaredsquare=13224,e.mparen=9384,e.mpasquare=13227,e.mssquare=13235,e.msuperior=63215,e.mturned=623,e.mu=181,e.mu1=181,e.muasquare=13186,e.muchgreater=8811,e.muchless=8810,e.mufsquare=13196,e.mugreek=956,e.mugsquare=13197,e.muhiragana=12416,e.mukatakana=12512,e.mukatakanahalfwidth=65425,e.mulsquare=13205,e.multiply=215,e.mumsquare=13211,e.munahhebrew=1443,e.munahlefthebrew=1443,e.musicalnote=9834,e.musicalnotedbl=9835,e.musicflatsign=9837,e.musicsharpsign=9839,e.mussquare=13234,e.muvsquare=13238,e.muwsquare=13244,e.mvmegasquare=13241,e.mvsquare=13239,e.mwmegasquare=13247,e.mwsquare=13245,e.n=110,e.nabengali=2472,e.nabla=8711,e.nacute=324,e.nadeva=2344,e.nagujarati=2728,e.nagurmukhi=2600,e.nahiragana=12394,e.nakatakana=12490,e.nakatakanahalfwidth=65413,e.napostrophe=329,e.nasquare=13185,e.nbopomofo=12555,e.nbspace=160,e.ncaron=328,e.ncedilla=326,e.ncircle=9437,e.ncircumflexbelow=7755,e.ncommaaccent=326,e.ndotaccent=7749,e.ndotbelow=7751,e.nehiragana=12397,e.nekatakana=12493,e.nekatakanahalfwidth=65416,e.newsheqelsign=8362,e.nfsquare=13195,e.ngabengali=2457,e.ngadeva=2329,e.ngagujarati=2713,e.ngagurmukhi=2585,e.ngonguthai=3591,e.nhiragana=12435,e.nhookleft=626,e.nhookretroflex=627,e.nieunacirclekorean=12911,e.nieunaparenkorean=12815,e.nieuncieuckorean=12597,e.nieuncirclekorean=12897,e.nieunhieuhkorean=12598,e.nieunkorean=12596,e.nieunpansioskorean=12648,e.nieunparenkorean=12801,e.nieunsioskorean=12647,e.nieuntikeutkorean=12646,e.nihiragana=12395,e.nikatakana=12491,e.nikatakanahalfwidth=65414,e.nikhahitleftthai=63641,e.nikhahitthai=3661,e.nine=57,e.ninearabic=1641,e.ninebengali=2543,e.ninecircle=9320,e.ninecircleinversesansserif=10130,e.ninedeva=2415,e.ninegujarati=2799,e.ninegurmukhi=2671,e.ninehackarabic=1641,e.ninehangzhou=12329,e.nineideographicparen=12840,e.nineinferior=8329,e.ninemonospace=65305,e.nineoldstyle=63289,e.nineparen=9340,e.nineperiod=9360,e.ninepersian=1785,e.nineroman=8568,e.ninesuperior=8313,e.nineteencircle=9330,e.nineteenparen=9350,e.nineteenperiod=9370,e.ninethai=3673,e.nj=460,e.njecyrillic=1114,e.nkatakana=12531,e.nkatakanahalfwidth=65437,e.nlegrightlong=414,e.nlinebelow=7753,e.nmonospace=65358,e.nmsquare=13210,e.nnabengali=2467,e.nnadeva=2339,e.nnagujarati=2723,e.nnagurmukhi=2595,e.nnnadeva=2345,e.nohiragana=12398,e.nokatakana=12494,e.nokatakanahalfwidth=65417,e.nonbreakingspace=160,e.nonenthai=3603,e.nonuthai=3609,e.noonarabic=1606,e.noonfinalarabic=65254,e.noonghunnaarabic=1722,e.noonghunnafinalarabic=64415,e.nooninitialarabic=65255,e.noonjeeminitialarabic=64722,e.noonjeemisolatedarabic=64587,e.noonmedialarabic=65256,e.noonmeeminitialarabic=64725,e.noonmeemisolatedarabic=64590,e.noonnoonfinalarabic=64653,e.notcontains=8716,e.notelement=8713,e.notelementof=8713,e.notequal=8800,e.notgreater=8815,e.notgreaternorequal=8817,e.notgreaternorless=8825,e.notidentical=8802,e.notless=8814,e.notlessnorequal=8816,e.notparallel=8742,e.notprecedes=8832,e.notsubset=8836,e.notsucceeds=8833,e.notsuperset=8837,e.nowarmenian=1398,e.nparen=9385,e.nssquare=13233,e.nsuperior=8319,e.ntilde=241,e.nu=957,e.nuhiragana=12396,e.nukatakana=12492,e.nukatakanahalfwidth=65415,e.nuktabengali=2492,e.nuktadeva=2364,e.nuktagujarati=2748,e.nuktagurmukhi=2620,e.numbersign=35,e.numbersignmonospace=65283,e.numbersignsmall=65119,e.numeralsigngreek=884,e.numeralsignlowergreek=885,e.numero=8470,e.nun=1504,e.nundagesh=64320,e.nundageshhebrew=64320,e.nunhebrew=1504,e.nvsquare=13237,e.nwsquare=13243,e.nyabengali=2462,e.nyadeva=2334,e.nyagujarati=2718,e.nyagurmukhi=2590,e.o=111,e.oacute=243,e.oangthai=3629,e.obarred=629,e.obarredcyrillic=1257,e.obarreddieresiscyrillic=1259,e.obengali=2451,e.obopomofo=12571,e.obreve=335,e.ocandradeva=2321,e.ocandragujarati=2705,e.ocandravowelsigndeva=2377,e.ocandravowelsigngujarati=2761,e.ocaron=466,e.ocircle=9438,e.ocircumflex=244,e.ocircumflexacute=7889,e.ocircumflexdotbelow=7897,e.ocircumflexgrave=7891,e.ocircumflexhookabove=7893,e.ocircumflextilde=7895,e.ocyrillic=1086,e.odblacute=337,e.odblgrave=525,e.odeva=2323,e.odieresis=246,e.odieresiscyrillic=1255,e.odotbelow=7885,e.oe=339,e.oekorean=12634,e.ogonek=731,e.ogonekcmb=808,e.ograve=242,e.ogujarati=2707,e.oharmenian=1413,e.ohiragana=12362,e.ohookabove=7887,e.ohorn=417,e.ohornacute=7899,e.ohorndotbelow=7907,e.ohorngrave=7901,e.ohornhookabove=7903,e.ohorntilde=7905,e.ohungarumlaut=337,e.oi=419,e.oinvertedbreve=527,e.okatakana=12458,e.okatakanahalfwidth=65397,e.okorean=12631,e.olehebrew=1451,e.omacron=333,e.omacronacute=7763,e.omacrongrave=7761,e.omdeva=2384,e.omega=969,e.omega1=982,e.omegacyrillic=1121,e.omegalatinclosed=631,e.omegaroundcyrillic=1147,e.omegatitlocyrillic=1149,e.omegatonos=974,e.omgujarati=2768,e.omicron=959,e.omicrontonos=972,e.omonospace=65359,e.one=49,e.onearabic=1633,e.onebengali=2535,e.onecircle=9312,e.onecircleinversesansserif=10122,e.onedeva=2407,e.onedotenleader=8228,e.oneeighth=8539,e.onefitted=63196,e.onegujarati=2791,e.onegurmukhi=2663,e.onehackarabic=1633,e.onehalf=189,e.onehangzhou=12321,e.oneideographicparen=12832,e.oneinferior=8321,e.onemonospace=65297,e.onenumeratorbengali=2548,e.oneoldstyle=63281,e.oneparen=9332,e.oneperiod=9352,e.onepersian=1777,e.onequarter=188,e.oneroman=8560,e.onesuperior=185,e.onethai=3665,e.onethird=8531,e.oogonek=491,e.oogonekmacron=493,e.oogurmukhi=2579,e.oomatragurmukhi=2635,e.oopen=596,e.oparen=9386,e.openbullet=9702,e.option=8997,e.ordfeminine=170,e.ordmasculine=186,e.orthogonal=8735,e.oshortdeva=2322,e.oshortvowelsigndeva=2378,e.oslash=248,e.oslashacute=511,e.osmallhiragana=12361,e.osmallkatakana=12457,e.osmallkatakanahalfwidth=65387,e.ostrokeacute=511,e.osuperior=63216,e.otcyrillic=1151,e.otilde=245,e.otildeacute=7757,e.otildedieresis=7759,e.oubopomofo=12577,e.overline=8254,e.overlinecenterline=65098,e.overlinecmb=773,e.overlinedashed=65097,e.overlinedblwavy=65100,e.overlinewavy=65099,e.overscore=175,e.ovowelsignbengali=2507,e.ovowelsigndeva=2379,e.ovowelsigngujarati=2763,e.p=112,e.paampssquare=13184,e.paasentosquare=13099,e.pabengali=2474,e.pacute=7765,e.padeva=2346,e.pagedown=8671,e.pageup=8670,e.pagujarati=2730,e.pagurmukhi=2602,e.pahiragana=12401,e.paiyannoithai=3631,e.pakatakana=12497,e.palatalizationcyrilliccmb=1156,e.palochkacyrillic=1216,e.pansioskorean=12671,e.paragraph=182,e.parallel=8741,e.parenleft=40,e.parenleftaltonearabic=64830,e.parenleftbt=63725,e.parenleftex=63724,e.parenleftinferior=8333,e.parenleftmonospace=65288,e.parenleftsmall=65113,e.parenleftsuperior=8317,e.parenlefttp=63723,e.parenleftvertical=65077,e.parenright=41,e.parenrightaltonearabic=64831,e.parenrightbt=63736,e.parenrightex=63735,e.parenrightinferior=8334,e.parenrightmonospace=65289,e.parenrightsmall=65114,e.parenrightsuperior=8318,e.parenrighttp=63734,e.parenrightvertical=65078,e.partialdiff=8706,e.paseqhebrew=1472,e.pashtahebrew=1433,e.pasquare=13225,e.patah=1463,e.patah11=1463,e.patah1d=1463,e.patah2a=1463,e.patahhebrew=1463,e.patahnarrowhebrew=1463,e.patahquarterhebrew=1463,e.patahwidehebrew=1463,e.pazerhebrew=1441,e.pbopomofo=12550,e.pcircle=9439,e.pdotaccent=7767,e.pe=1508,e.pecyrillic=1087,e.pedagesh=64324,e.pedageshhebrew=64324,e.peezisquare=13115,e.pefinaldageshhebrew=64323,e.peharabic=1662,e.peharmenian=1402,e.pehebrew=1508,e.pehfinalarabic=64343,e.pehinitialarabic=64344,e.pehiragana=12410,e.pehmedialarabic=64345,e.pekatakana=12506,e.pemiddlehookcyrillic=1191,e.perafehebrew=64334,e.percent=37,e.percentarabic=1642,e.percentmonospace=65285,e.percentsmall=65130,e.period=46,e.periodarmenian=1417,e.periodcentered=183,e.periodhalfwidth=65377,e.periodinferior=63207,e.periodmonospace=65294,e.periodsmall=65106,e.periodsuperior=63208,e.perispomenigreekcmb=834,e.perpendicular=8869,e.perthousand=8240,e.peseta=8359,e.pfsquare=13194,e.phabengali=2475,e.phadeva=2347,e.phagujarati=2731,e.phagurmukhi=2603,e.phi=966,e.phi1=981,e.phieuphacirclekorean=12922,e.phieuphaparenkorean=12826,e.phieuphcirclekorean=12908,e.phieuphkorean=12621,e.phieuphparenkorean=12812,e.philatin=632,e.phinthuthai=3642,e.phisymbolgreek=981,e.phook=421,e.phophanthai=3614,e.phophungthai=3612,e.phosamphaothai=3616,e.pi=960,e.pieupacirclekorean=12915,e.pieupaparenkorean=12819,e.pieupcieuckorean=12662,e.pieupcirclekorean=12901,e.pieupkiyeokkorean=12658,e.pieupkorean=12610,e.pieupparenkorean=12805,e.pieupsioskiyeokkorean=12660,e.pieupsioskorean=12612,e.pieupsiostikeutkorean=12661,e.pieupthieuthkorean=12663,e.pieuptikeutkorean=12659,e.pihiragana=12404,e.pikatakana=12500,e.pisymbolgreek=982,e.piwrarmenian=1411,e.plus=43,e.plusbelowcmb=799,e.pluscircle=8853,e.plusminus=177,e.plusmod=726,e.plusmonospace=65291,e.plussmall=65122,e.plussuperior=8314,e.pmonospace=65360,e.pmsquare=13272,e.pohiragana=12413,e.pointingindexdownwhite=9759,e.pointingindexleftwhite=9756,e.pointingindexrightwhite=9758,e.pointingindexupwhite=9757,e.pokatakana=12509,e.poplathai=3611,e.postalmark=12306,e.postalmarkface=12320,e.pparen=9387,e.precedes=8826,e.prescription=8478,e.primemod=697,e.primereversed=8245,e.product=8719,e.projective=8965,e.prolongedkana=12540,e.propellor=8984,e.propersubset=8834,e.propersuperset=8835,e.proportion=8759,e.proportional=8733,e.psi=968,e.psicyrillic=1137,e.psilipneumatacyrilliccmb=1158,e.pssquare=13232,e.puhiragana=12407,e.pukatakana=12503,e.pvsquare=13236,e.pwsquare=13242,e.q=113,e.qadeva=2392,e.qadmahebrew=1448,e.qafarabic=1602,e.qaffinalarabic=65238,e.qafinitialarabic=65239,e.qafmedialarabic=65240,e.qamats=1464,e.qamats10=1464,e.qamats1a=1464,e.qamats1c=1464,e.qamats27=1464,e.qamats29=1464,e.qamats33=1464,e.qamatsde=1464,e.qamatshebrew=1464,e.qamatsnarrowhebrew=1464,e.qamatsqatanhebrew=1464,e.qamatsqatannarrowhebrew=1464,e.qamatsqatanquarterhebrew=1464,e.qamatsqatanwidehebrew=1464,e.qamatsquarterhebrew=1464,e.qamatswidehebrew=1464,e.qarneyparahebrew=1439,e.qbopomofo=12561,e.qcircle=9440,e.qhook=672,e.qmonospace=65361,e.qof=1511,e.qofdagesh=64327,e.qofdageshhebrew=64327,e.qofhebrew=1511,e.qparen=9388,e.quarternote=9833,e.qubuts=1467,e.qubuts18=1467,e.qubuts25=1467,e.qubuts31=1467,e.qubutshebrew=1467,e.qubutsnarrowhebrew=1467,e.qubutsquarterhebrew=1467,e.qubutswidehebrew=1467,e.question=63,e.questionarabic=1567,e.questionarmenian=1374,e.questiondown=191,e.questiondownsmall=63423,e.questiongreek=894,e.questionmonospace=65311,e.questionsmall=63295,e.quotedbl=34,e.quotedblbase=8222,e.quotedblleft=8220,e.quotedblmonospace=65282,e.quotedblprime=12318,e.quotedblprimereversed=12317,e.quotedblright=8221,e.quoteleft=8216,e.quoteleftreversed=8219,e.quotereversed=8219,e.quoteright=8217,e.quoterightn=329,e.quotesinglbase=8218,e.quotesingle=39,e.quotesinglemonospace=65287,e.r=114,e.raarmenian=1404,e.rabengali=2480,e.racute=341,e.radeva=2352,e.radical=8730,e.radicalex=63717,e.radoverssquare=13230,e.radoverssquaredsquare=13231,e.radsquare=13229,e.rafe=1471,e.rafehebrew=1471,e.ragujarati=2736,e.ragurmukhi=2608,e.rahiragana=12425,e.rakatakana=12521,e.rakatakanahalfwidth=65431,e.ralowerdiagonalbengali=2545,e.ramiddlediagonalbengali=2544,e.ramshorn=612,e.ratio=8758,e.rbopomofo=12566,e.rcaron=345,e.rcedilla=343,e.rcircle=9441,e.rcommaaccent=343,e.rdblgrave=529,e.rdotaccent=7769,e.rdotbelow=7771,e.rdotbelowmacron=7773,e.referencemark=8251,e.reflexsubset=8838,e.reflexsuperset=8839,e.registered=174,e.registersans=63720,e.registerserif=63194,e.reharabic=1585,e.reharmenian=1408,e.rehfinalarabic=65198,e.rehiragana=12428,e.rekatakana=12524,e.rekatakanahalfwidth=65434,e.resh=1512,e.reshdageshhebrew=64328,e.reshhebrew=1512,e.reversedtilde=8765,e.reviahebrew=1431,e.reviamugrashhebrew=1431,e.revlogicalnot=8976,e.rfishhook=638,e.rfishhookreversed=639,e.rhabengali=2525,e.rhadeva=2397,e.rho=961,e.rhook=637,e.rhookturned=635,e.rhookturnedsuperior=693,e.rhosymbolgreek=1009,e.rhotichookmod=734,e.rieulacirclekorean=12913,e.rieulaparenkorean=12817,e.rieulcirclekorean=12899,e.rieulhieuhkorean=12608,e.rieulkiyeokkorean=12602,e.rieulkiyeoksioskorean=12649,e.rieulkorean=12601,e.rieulmieumkorean=12603,e.rieulpansioskorean=12652,e.rieulparenkorean=12803,e.rieulphieuphkorean=12607,e.rieulpieupkorean=12604,e.rieulpieupsioskorean=12651,e.rieulsioskorean=12605,e.rieulthieuthkorean=12606,e.rieultikeutkorean=12650,e.rieulyeorinhieuhkorean=12653,e.rightangle=8735,e.righttackbelowcmb=793,e.righttriangle=8895,e.rihiragana=12426,e.rikatakana=12522,e.rikatakanahalfwidth=65432,e.ring=730,e.ringbelowcmb=805,e.ringcmb=778,e.ringhalfleft=703,e.ringhalfleftarmenian=1369,e.ringhalfleftbelowcmb=796,e.ringhalfleftcentered=723,e.ringhalfright=702,e.ringhalfrightbelowcmb=825,e.ringhalfrightcentered=722,e.rinvertedbreve=531,e.rittorusquare=13137,e.rlinebelow=7775,e.rlongleg=636,e.rlonglegturned=634,e.rmonospace=65362,e.rohiragana=12429,e.rokatakana=12525,e.rokatakanahalfwidth=65435,e.roruathai=3619,e.rparen=9389,e.rrabengali=2524,e.rradeva=2353,e.rragurmukhi=2652,e.rreharabic=1681,e.rrehfinalarabic=64397,e.rrvocalicbengali=2528,e.rrvocalicdeva=2400,e.rrvocalicgujarati=2784,e.rrvocalicvowelsignbengali=2500,e.rrvocalicvowelsigndeva=2372,e.rrvocalicvowelsigngujarati=2756,e.rsuperior=63217,e.rtblock=9616,e.rturned=633,e.rturnedsuperior=692,e.ruhiragana=12427,e.rukatakana=12523,e.rukatakanahalfwidth=65433,e.rupeemarkbengali=2546,e.rupeesignbengali=2547,e.rupiah=63197,e.ruthai=3620,e.rvocalicbengali=2443,e.rvocalicdeva=2315,e.rvocalicgujarati=2699,e.rvocalicvowelsignbengali=2499,e.rvocalicvowelsigndeva=2371,e.rvocalicvowelsigngujarati=2755,e.s=115,e.sabengali=2488,e.sacute=347,e.sacutedotaccent=7781,e.sadarabic=1589,e.sadeva=2360,e.sadfinalarabic=65210,e.sadinitialarabic=65211,e.sadmedialarabic=65212,e.sagujarati=2744,e.sagurmukhi=2616,e.sahiragana=12373,e.sakatakana=12469,e.sakatakanahalfwidth=65403,e.sallallahoualayhewasallamarabic=65018,e.samekh=1505,e.samekhdagesh=64321,e.samekhdageshhebrew=64321,e.samekhhebrew=1505,e.saraaathai=3634,e.saraaethai=3649,e.saraaimaimalaithai=3652,e.saraaimaimuanthai=3651,e.saraamthai=3635,e.saraathai=3632,e.saraethai=3648,e.saraiileftthai=63622,e.saraiithai=3637,e.saraileftthai=63621,e.saraithai=3636,e.saraothai=3650,e.saraueeleftthai=63624,e.saraueethai=3639,e.saraueleftthai=63623,e.sarauethai=3638,e.sarauthai=3640,e.sarauuthai=3641,e.sbopomofo=12569,e.scaron=353,e.scarondotaccent=7783,e.scedilla=351,e.schwa=601,e.schwacyrillic=1241,e.schwadieresiscyrillic=1243,e.schwahook=602,e.scircle=9442,e.scircumflex=349,e.scommaaccent=537,e.sdotaccent=7777,e.sdotbelow=7779,e.sdotbelowdotaccent=7785,e.seagullbelowcmb=828,e.second=8243,e.secondtonechinese=714,e.section=167,e.seenarabic=1587,e.seenfinalarabic=65202,e.seeninitialarabic=65203,e.seenmedialarabic=65204,e.segol=1462,e.segol13=1462,e.segol1f=1462,e.segol2c=1462,e.segolhebrew=1462,e.segolnarrowhebrew=1462,e.segolquarterhebrew=1462,e.segoltahebrew=1426,e.segolwidehebrew=1462,e.seharmenian=1405,e.sehiragana=12379,e.sekatakana=12475,e.sekatakanahalfwidth=65406,e.semicolon=59,e.semicolonarabic=1563,e.semicolonmonospace=65307,e.semicolonsmall=65108,e.semivoicedmarkkana=12444,e.semivoicedmarkkanahalfwidth=65439,e.sentisquare=13090,e.sentosquare=13091,e.seven=55,e.sevenarabic=1639,e.sevenbengali=2541,e.sevencircle=9318,e.sevencircleinversesansserif=10128,e.sevendeva=2413,e.seveneighths=8542,e.sevengujarati=2797,e.sevengurmukhi=2669,e.sevenhackarabic=1639,e.sevenhangzhou=12327,e.sevenideographicparen=12838,e.seveninferior=8327,e.sevenmonospace=65303,e.sevenoldstyle=63287,e.sevenparen=9338,e.sevenperiod=9358,e.sevenpersian=1783,e.sevenroman=8566,e.sevensuperior=8311,e.seventeencircle=9328,e.seventeenparen=9348,e.seventeenperiod=9368,e.seventhai=3671,e.sfthyphen=173,e.shaarmenian=1399,e.shabengali=2486,e.shacyrillic=1096,e.shaddaarabic=1617,e.shaddadammaarabic=64609,e.shaddadammatanarabic=64606,e.shaddafathaarabic=64608,e.shaddakasraarabic=64610,e.shaddakasratanarabic=64607,e.shade=9618,e.shadedark=9619,e.shadelight=9617,e.shademedium=9618,e.shadeva=2358,e.shagujarati=2742,e.shagurmukhi=2614,e.shalshelethebrew=1427,e.shbopomofo=12565,e.shchacyrillic=1097,e.sheenarabic=1588,e.sheenfinalarabic=65206,e.sheeninitialarabic=65207,e.sheenmedialarabic=65208,e.sheicoptic=995,e.sheqel=8362,e.sheqelhebrew=8362,e.sheva=1456,e.sheva115=1456,e.sheva15=1456,e.sheva22=1456,e.sheva2e=1456,e.shevahebrew=1456,e.shevanarrowhebrew=1456,e.shevaquarterhebrew=1456,e.shevawidehebrew=1456,e.shhacyrillic=1211,e.shimacoptic=1005,e.shin=1513,e.shindagesh=64329,e.shindageshhebrew=64329,e.shindageshshindot=64300,e.shindageshshindothebrew=64300,e.shindageshsindot=64301,e.shindageshsindothebrew=64301,e.shindothebrew=1473,e.shinhebrew=1513,e.shinshindot=64298,e.shinshindothebrew=64298,e.shinsindot=64299,e.shinsindothebrew=64299,e.shook=642,e.sigma=963,e.sigma1=962,e.sigmafinal=962,e.sigmalunatesymbolgreek=1010,e.sihiragana=12375,e.sikatakana=12471,e.sikatakanahalfwidth=65404,e.siluqhebrew=1469,e.siluqlefthebrew=1469,e.similar=8764,e.sindothebrew=1474,e.siosacirclekorean=12916,e.siosaparenkorean=12820,e.sioscieuckorean=12670,e.sioscirclekorean=12902,e.sioskiyeokkorean=12666,e.sioskorean=12613,e.siosnieunkorean=12667,e.siosparenkorean=12806,e.siospieupkorean=12669,e.siostikeutkorean=12668,e.six=54,e.sixarabic=1638,e.sixbengali=2540,e.sixcircle=9317,e.sixcircleinversesansserif=10127,e.sixdeva=2412,e.sixgujarati=2796,e.sixgurmukhi=2668,e.sixhackarabic=1638,e.sixhangzhou=12326,e.sixideographicparen=12837,e.sixinferior=8326,e.sixmonospace=65302,e.sixoldstyle=63286,e.sixparen=9337,e.sixperiod=9357,e.sixpersian=1782,e.sixroman=8565,e.sixsuperior=8310,e.sixteencircle=9327,e.sixteencurrencydenominatorbengali=2553,e.sixteenparen=9347,e.sixteenperiod=9367,e.sixthai=3670,e.slash=47,e.slashmonospace=65295,e.slong=383,e.slongdotaccent=7835,e.smileface=9786,e.smonospace=65363,e.sofpasuqhebrew=1475,e.softhyphen=173,e.softsigncyrillic=1100,e.sohiragana=12381,e.sokatakana=12477,e.sokatakanahalfwidth=65407,e.soliduslongoverlaycmb=824,e.solidusshortoverlaycmb=823,e.sorusithai=3625,e.sosalathai=3624,e.sosothai=3595,e.sosuathai=3626,e.space=32,e.spacehackarabic=32,e.spade=9824,e.spadesuitblack=9824,e.spadesuitwhite=9828,e.sparen=9390,e.squarebelowcmb=827,e.squarecc=13252,e.squarecm=13213,e.squarediagonalcrosshatchfill=9641,e.squarehorizontalfill=9636,e.squarekg=13199,e.squarekm=13214,e.squarekmcapital=13262,e.squareln=13265,e.squarelog=13266,e.squaremg=13198,e.squaremil=13269,e.squaremm=13212,e.squaremsquared=13217,e.squareorthogonalcrosshatchfill=9638,e.squareupperlefttolowerrightfill=9639,e.squareupperrighttolowerleftfill=9640,e.squareverticalfill=9637,e.squarewhitewithsmallblack=9635,e.srsquare=13275,e.ssabengali=2487,e.ssadeva=2359,e.ssagujarati=2743,e.ssangcieuckorean=12617,e.ssanghieuhkorean=12677,e.ssangieungkorean=12672,e.ssangkiyeokkorean=12594,e.ssangnieunkorean=12645,e.ssangpieupkorean=12611,e.ssangsioskorean=12614,e.ssangtikeutkorean=12600,e.ssuperior=63218,e.sterling=163,e.sterlingmonospace=65505,e.strokelongoverlaycmb=822,e.strokeshortoverlaycmb=821,e.subset=8834,e.subsetnotequal=8842,e.subsetorequal=8838,e.succeeds=8827,e.suchthat=8715,e.suhiragana=12377,e.sukatakana=12473,e.sukatakanahalfwidth=65405,e.sukunarabic=1618,e.summation=8721,e.sun=9788,e.superset=8835,e.supersetnotequal=8843,e.supersetorequal=8839,e.svsquare=13276,e.syouwaerasquare=13180,e.t=116,e.tabengali=2468,e.tackdown=8868,e.tackleft=8867,e.tadeva=2340,e.tagujarati=2724,e.tagurmukhi=2596,e.taharabic=1591,e.tahfinalarabic=65218,e.tahinitialarabic=65219,e.tahiragana=12383,e.tahmedialarabic=65220,e.taisyouerasquare=13181,e.takatakana=12479,e.takatakanahalfwidth=65408,e.tatweelarabic=1600,e.tau=964,e.tav=1514,e.tavdages=64330,e.tavdagesh=64330,e.tavdageshhebrew=64330,e.tavhebrew=1514,e.tbar=359,e.tbopomofo=12554,e.tcaron=357,e.tccurl=680,e.tcedilla=355,e.tcheharabic=1670,e.tchehfinalarabic=64379,e.tchehinitialarabic=64380,e.tchehmedialarabic=64381,e.tcircle=9443,e.tcircumflexbelow=7793,e.tcommaaccent=355,e.tdieresis=7831,e.tdotaccent=7787,e.tdotbelow=7789,e.tecyrillic=1090,e.tedescendercyrillic=1197,e.teharabic=1578,e.tehfinalarabic=65174,e.tehhahinitialarabic=64674,e.tehhahisolatedarabic=64524,e.tehinitialarabic=65175,e.tehiragana=12390,e.tehjeeminitialarabic=64673,e.tehjeemisolatedarabic=64523,e.tehmarbutaarabic=1577,e.tehmarbutafinalarabic=65172,e.tehmedialarabic=65176,e.tehmeeminitialarabic=64676,e.tehmeemisolatedarabic=64526,e.tehnoonfinalarabic=64627,e.tekatakana=12486,e.tekatakanahalfwidth=65411,e.telephone=8481,e.telephoneblack=9742,e.telishagedolahebrew=1440,e.telishaqetanahebrew=1449,e.tencircle=9321,e.tenideographicparen=12841,e.tenparen=9341,e.tenperiod=9361,e.tenroman=8569,e.tesh=679,e.tet=1496,e.tetdagesh=64312,e.tetdageshhebrew=64312,e.tethebrew=1496,e.tetsecyrillic=1205,e.tevirhebrew=1435,e.tevirlefthebrew=1435,e.thabengali=2469,e.thadeva=2341,e.thagujarati=2725,e.thagurmukhi=2597,e.thalarabic=1584,e.thalfinalarabic=65196,e.thanthakhatlowleftthai=63640,e.thanthakhatlowrightthai=63639,e.thanthakhatthai=3660,e.thanthakhatupperleftthai=63638,e.theharabic=1579,e.thehfinalarabic=65178,e.thehinitialarabic=65179,e.thehmedialarabic=65180,e.thereexists=8707,e.therefore=8756,e.theta=952,e.theta1=977,e.thetasymbolgreek=977,e.thieuthacirclekorean=12921,e.thieuthaparenkorean=12825,e.thieuthcirclekorean=12907,e.thieuthkorean=12620,e.thieuthparenkorean=12811,e.thirteencircle=9324,e.thirteenparen=9344,e.thirteenperiod=9364,e.thonangmonthothai=3601,e.thook=429,e.thophuthaothai=3602,e.thorn=254,e.thothahanthai=3607,e.thothanthai=3600,e.thothongthai=3608,e.thothungthai=3606,e.thousandcyrillic=1154,e.thousandsseparatorarabic=1644,e.thousandsseparatorpersian=1644,e.three=51,e.threearabic=1635,e.threebengali=2537,e.threecircle=9314,e.threecircleinversesansserif=10124,e.threedeva=2409,e.threeeighths=8540,e.threegujarati=2793,e.threegurmukhi=2665,e.threehackarabic=1635,e.threehangzhou=12323,e.threeideographicparen=12834,e.threeinferior=8323,e.threemonospace=65299,e.threenumeratorbengali=2550,e.threeoldstyle=63283,e.threeparen=9334,e.threeperiod=9354,e.threepersian=1779,e.threequarters=190,e.threequartersemdash=63198,e.threeroman=8562,e.threesuperior=179,e.threethai=3667,e.thzsquare=13204,e.tihiragana=12385,e.tikatakana=12481,e.tikatakanahalfwidth=65409,e.tikeutacirclekorean=12912,e.tikeutaparenkorean=12816,e.tikeutcirclekorean=12898,e.tikeutkorean=12599,e.tikeutparenkorean=12802,e.tilde=732,e.tildebelowcmb=816,e.tildecmb=771,e.tildecomb=771,e.tildedoublecmb=864,e.tildeoperator=8764,e.tildeoverlaycmb=820,e.tildeverticalcmb=830,e.timescircle=8855,e.tipehahebrew=1430,e.tipehalefthebrew=1430,e.tippigurmukhi=2672,e.titlocyrilliccmb=1155,e.tiwnarmenian=1407,e.tlinebelow=7791,e.tmonospace=65364,e.toarmenian=1385,e.tohiragana=12392,e.tokatakana=12488,e.tokatakanahalfwidth=65412,e.tonebarextrahighmod=741,e.tonebarextralowmod=745,e.tonebarhighmod=742,e.tonebarlowmod=744,e.tonebarmidmod=743,e.tonefive=445,e.tonesix=389,e.tonetwo=424,e.tonos=900,e.tonsquare=13095,e.topatakthai=3599,e.tortoiseshellbracketleft=12308,e.tortoiseshellbracketleftsmall=65117,e.tortoiseshellbracketleftvertical=65081,e.tortoiseshellbracketright=12309,e.tortoiseshellbracketrightsmall=65118,e.tortoiseshellbracketrightvertical=65082,e.totaothai=3605,e.tpalatalhook=427,e.tparen=9391,e.trademark=8482,e.trademarksans=63722,e.trademarkserif=63195,e.tretroflexhook=648,e.triagdn=9660,e.triaglf=9668,e.triagrt=9658,e.triagup=9650,e.ts=678,e.tsadi=1510,e.tsadidagesh=64326,e.tsadidageshhebrew=64326,e.tsadihebrew=1510,e.tsecyrillic=1094,e.tsere=1461,e.tsere12=1461,e.tsere1e=1461,e.tsere2b=1461,e.tserehebrew=1461,e.tserenarrowhebrew=1461,e.tserequarterhebrew=1461,e.tserewidehebrew=1461,e.tshecyrillic=1115,e.tsuperior=63219,e.ttabengali=2463,e.ttadeva=2335,e.ttagujarati=2719,e.ttagurmukhi=2591,e.tteharabic=1657,e.ttehfinalarabic=64359,e.ttehinitialarabic=64360,e.ttehmedialarabic=64361,e.tthabengali=2464,e.tthadeva=2336,e.tthagujarati=2720,e.tthagurmukhi=2592,e.tturned=647,e.tuhiragana=12388,e.tukatakana=12484,e.tukatakanahalfwidth=65410,e.tusmallhiragana=12387,e.tusmallkatakana=12483,e.tusmallkatakanahalfwidth=65391,e.twelvecircle=9323,e.twelveparen=9343,e.twelveperiod=9363,e.twelveroman=8571,e.twentycircle=9331,e.twentyhangzhou=21316,e.twentyparen=9351,e.twentyperiod=9371,e.two=50,e.twoarabic=1634,e.twobengali=2536,e.twocircle=9313,e.twocircleinversesansserif=10123,e.twodeva=2408,e.twodotenleader=8229,e.twodotleader=8229,e.twodotleadervertical=65072,e.twogujarati=2792,e.twogurmukhi=2664,e.twohackarabic=1634,e.twohangzhou=12322,e.twoideographicparen=12833,e.twoinferior=8322,e.twomonospace=65298,e.twonumeratorbengali=2549,e.twooldstyle=63282,e.twoparen=9333,e.twoperiod=9353,e.twopersian=1778,e.tworoman=8561,e.twostroke=443,e.twosuperior=178,e.twothai=3666,e.twothirds=8532,e.u=117,e.uacute=250,e.ubar=649,e.ubengali=2441,e.ubopomofo=12584,e.ubreve=365,e.ucaron=468,e.ucircle=9444,e.ucircumflex=251,e.ucircumflexbelow=7799,e.ucyrillic=1091,e.udattadeva=2385,e.udblacute=369,e.udblgrave=533,e.udeva=2313,e.udieresis=252,e.udieresisacute=472,e.udieresisbelow=7795,e.udieresiscaron=474,e.udieresiscyrillic=1265,e.udieresisgrave=476,e.udieresismacron=470,e.udotbelow=7909,e.ugrave=249,e.ugujarati=2697,e.ugurmukhi=2569,e.uhiragana=12358,e.uhookabove=7911,e.uhorn=432,e.uhornacute=7913,e.uhorndotbelow=7921,e.uhorngrave=7915,e.uhornhookabove=7917,e.uhorntilde=7919,e.uhungarumlaut=369,e.uhungarumlautcyrillic=1267,e.uinvertedbreve=535,e.ukatakana=12454,e.ukatakanahalfwidth=65395,e.ukcyrillic=1145,e.ukorean=12636,e.umacron=363,e.umacroncyrillic=1263,e.umacrondieresis=7803,e.umatragurmukhi=2625,e.umonospace=65365,e.underscore=95,e.underscoredbl=8215,e.underscoremonospace=65343,e.underscorevertical=65075,e.underscorewavy=65103,e.union=8746,e.universal=8704,e.uogonek=371,e.uparen=9392,e.upblock=9600,e.upperdothebrew=1476,e.upsilon=965,e.upsilondieresis=971,e.upsilondieresistonos=944,e.upsilonlatin=650,e.upsilontonos=973,e.uptackbelowcmb=797,e.uptackmod=724,e.uragurmukhi=2675,e.uring=367,e.ushortcyrillic=1118,e.usmallhiragana=12357,e.usmallkatakana=12453,e.usmallkatakanahalfwidth=65385,e.ustraightcyrillic=1199,e.ustraightstrokecyrillic=1201,e.utilde=361,e.utildeacute=7801,e.utildebelow=7797,e.uubengali=2442,e.uudeva=2314,e.uugujarati=2698,e.uugurmukhi=2570,e.uumatragurmukhi=2626,e.uuvowelsignbengali=2498,e.uuvowelsigndeva=2370,e.uuvowelsigngujarati=2754,e.uvowelsignbengali=2497,e.uvowelsigndeva=2369,e.uvowelsigngujarati=2753,e.v=118,e.vadeva=2357,e.vagujarati=2741,e.vagurmukhi=2613,e.vakatakana=12535,e.vav=1493,e.vavdagesh=64309,e.vavdagesh65=64309,e.vavdageshhebrew=64309,e.vavhebrew=1493,e.vavholam=64331,e.vavholamhebrew=64331,e.vavvavhebrew=1520,e.vavyodhebrew=1521,e.vcircle=9445,e.vdotbelow=7807,e.vecyrillic=1074,e.veharabic=1700,e.vehfinalarabic=64363,e.vehinitialarabic=64364,e.vehmedialarabic=64365,e.vekatakana=12537,e.venus=9792,e.verticalbar=124,e.verticallineabovecmb=781,e.verticallinebelowcmb=809,e.verticallinelowmod=716,e.verticallinemod=712,e.vewarmenian=1406,e.vhook=651,e.vikatakana=12536,e.viramabengali=2509,e.viramadeva=2381,e.viramagujarati=2765,e.visargabengali=2435,e.visargadeva=2307,e.visargagujarati=2691,e.vmonospace=65366,e.voarmenian=1400,e.voicediterationhiragana=12446,e.voicediterationkatakana=12542,e.voicedmarkkana=12443,e.voicedmarkkanahalfwidth=65438,e.vokatakana=12538,e.vparen=9393,e.vtilde=7805,e.vturned=652,e.vuhiragana=12436,e.vukatakana=12532,e.w=119,e.wacute=7811,e.waekorean=12633,e.wahiragana=12431,e.wakatakana=12527,e.wakatakanahalfwidth=65436,e.wakorean=12632,e.wasmallhiragana=12430,e.wasmallkatakana=12526,e.wattosquare=13143,e.wavedash=12316,e.wavyunderscorevertical=65076,e.wawarabic=1608,e.wawfinalarabic=65262,e.wawhamzaabovearabic=1572,e.wawhamzaabovefinalarabic=65158,e.wbsquare=13277,e.wcircle=9446,e.wcircumflex=373,e.wdieresis=7813,e.wdotaccent=7815,e.wdotbelow=7817,e.wehiragana=12433,e.weierstrass=8472,e.wekatakana=12529,e.wekorean=12638,e.weokorean=12637,e.wgrave=7809,e.whitebullet=9702,e.whitecircle=9675,e.whitecircleinverse=9689,e.whitecornerbracketleft=12302,e.whitecornerbracketleftvertical=65091,e.whitecornerbracketright=12303,e.whitecornerbracketrightvertical=65092,e.whitediamond=9671,e.whitediamondcontainingblacksmalldiamond=9672,e.whitedownpointingsmalltriangle=9663,e.whitedownpointingtriangle=9661,e.whiteleftpointingsmalltriangle=9667,e.whiteleftpointingtriangle=9665,e.whitelenticularbracketleft=12310,e.whitelenticularbracketright=12311,e.whiterightpointingsmalltriangle=9657,e.whiterightpointingtriangle=9655,e.whitesmallsquare=9643,e.whitesmilingface=9786,e.whitesquare=9633,e.whitestar=9734,e.whitetelephone=9743,e.whitetortoiseshellbracketleft=12312,e.whitetortoiseshellbracketright=12313,e.whiteuppointingsmalltriangle=9653,e.whiteuppointingtriangle=9651,e.wihiragana=12432,e.wikatakana=12528,e.wikorean=12639,e.wmonospace=65367,e.wohiragana=12434,e.wokatakana=12530,e.wokatakanahalfwidth=65382,e.won=8361,e.wonmonospace=65510,e.wowaenthai=3623,e.wparen=9394,e.wring=7832,e.wsuperior=695,e.wturned=653,e.wynn=447,e.x=120,e.xabovecmb=829,e.xbopomofo=12562,e.xcircle=9447,e.xdieresis=7821,e.xdotaccent=7819,e.xeharmenian=1389,e.xi=958,e.xmonospace=65368,e.xparen=9395,e.xsuperior=739,e.y=121,e.yaadosquare=13134,e.yabengali=2479,e.yacute=253,e.yadeva=2351,e.yaekorean=12626,e.yagujarati=2735,e.yagurmukhi=2607,e.yahiragana=12420,e.yakatakana=12516,e.yakatakanahalfwidth=65428,e.yakorean=12625,e.yamakkanthai=3662,e.yasmallhiragana=12419,e.yasmallkatakana=12515,e.yasmallkatakanahalfwidth=65388,e.yatcyrillic=1123,e.ycircle=9448,e.ycircumflex=375,e.ydieresis=255,e.ydotaccent=7823,e.ydotbelow=7925,e.yeharabic=1610,e.yehbarreearabic=1746,e.yehbarreefinalarabic=64431,e.yehfinalarabic=65266,e.yehhamzaabovearabic=1574,e.yehhamzaabovefinalarabic=65162,e.yehhamzaaboveinitialarabic=65163,e.yehhamzaabovemedialarabic=65164,e.yehinitialarabic=65267,e.yehmedialarabic=65268,e.yehmeeminitialarabic=64733,e.yehmeemisolatedarabic=64600,e.yehnoonfinalarabic=64660,e.yehthreedotsbelowarabic=1745,e.yekorean=12630,e.yen=165,e.yenmonospace=65509,e.yeokorean=12629,e.yeorinhieuhkorean=12678,e.yerahbenyomohebrew=1450,e.yerahbenyomolefthebrew=1450,e.yericyrillic=1099,e.yerudieresiscyrillic=1273,e.yesieungkorean=12673,e.yesieungpansioskorean=12675,e.yesieungsioskorean=12674,e.yetivhebrew=1434,e.ygrave=7923,e.yhook=436,e.yhookabove=7927,e.yiarmenian=1397,e.yicyrillic=1111,e.yikorean=12642,e.yinyang=9775,e.yiwnarmenian=1410,e.ymonospace=65369,e.yod=1497,e.yoddagesh=64313,e.yoddageshhebrew=64313,e.yodhebrew=1497,e.yodyodhebrew=1522,e.yodyodpatahhebrew=64287,e.yohiragana=12424,e.yoikorean=12681,e.yokatakana=12520,e.yokatakanahalfwidth=65430,e.yokorean=12635,e.yosmallhiragana=12423,e.yosmallkatakana=12519,e.yosmallkatakanahalfwidth=65390,e.yotgreek=1011,e.yoyaekorean=12680,e.yoyakorean=12679,e.yoyakthai=3618,e.yoyingthai=3597,e.yparen=9396,e.ypogegrammeni=890,e.ypogegrammenigreekcmb=837,e.yr=422,e.yring=7833,e.ysuperior=696,e.ytilde=7929,e.yturned=654,e.yuhiragana=12422,e.yuikorean=12684,e.yukatakana=12518,e.yukatakanahalfwidth=65429,e.yukorean=12640,e.yusbigcyrillic=1131,e.yusbigiotifiedcyrillic=1133,e.yuslittlecyrillic=1127,e.yuslittleiotifiedcyrillic=1129,e.yusmallhiragana=12421,e.yusmallkatakana=12517,e.yusmallkatakanahalfwidth=65389,e.yuyekorean=12683,e.yuyeokorean=12682,e.yyabengali=2527,e.yyadeva=2399,e.z=122,e.zaarmenian=1382,e.zacute=378,e.zadeva=2395,e.zagurmukhi=2651,e.zaharabic=1592,e.zahfinalarabic=65222,e.zahinitialarabic=65223,e.zahiragana=12374,e.zahmedialarabic=65224,e.zainarabic=1586,e.zainfinalarabic=65200,e.zakatakana=12470,e.zaqefgadolhebrew=1429,e.zaqefqatanhebrew=1428,e.zarqahebrew=1432,e.zayin=1494,e.zayindagesh=64310,e.zayindageshhebrew=64310,e.zayinhebrew=1494,e.zbopomofo=12567,e.zcaron=382,e.zcircle=9449,e.zcircumflex=7825,e.zcurl=657,e.zdot=380,e.zdotaccent=380,e.zdotbelow=7827,e.zecyrillic=1079,e.zedescendercyrillic=1177,e.zedieresiscyrillic=1247,e.zehiragana=12380,e.zekatakana=12476,e.zero=48,e.zeroarabic=1632,e.zerobengali=2534,e.zerodeva=2406,e.zerogujarati=2790,e.zerogurmukhi=2662,e.zerohackarabic=1632,e.zeroinferior=8320,e.zeromonospace=65296,e.zerooldstyle=63280,e.zeropersian=1776,e.zerosuperior=8304,e.zerothai=3664,e.zerowidthjoiner=65279,e.zerowidthnonjoiner=8204,e.zerowidthspace=8203,e.zeta=950,e.zhbopomofo=12563,e.zhearmenian=1386,e.zhebrevecyrillic=1218,e.zhecyrillic=1078,e.zhedescendercyrillic=1175,e.zhedieresiscyrillic=1245,e.zihiragana=12376,e.zikatakana=12472,e.zinorhebrew=1454,e.zlinebelow=7829,e.zmonospace=65370,e.zohiragana=12382,e.zokatakana=12478,e.zparen=9397,e.zretroflexhook=656,e.zstroke=438,e.zuhiragana=12378,e.zukatakana=12474,e[".notdef"]=0,e.angbracketleftbig=9001,e.angbracketleftBig=9001,e.angbracketleftbigg=9001,e.angbracketleftBigg=9001,e.angbracketrightBig=9002,e.angbracketrightbig=9002,e.angbracketrightBigg=9002,e.angbracketrightbigg=9002,e.arrowhookleft=8618,e.arrowhookright=8617,e.arrowlefttophalf=8636,e.arrowleftbothalf=8637,e.arrownortheast=8599,e.arrownorthwest=8598,e.arrowrighttophalf=8640,e.arrowrightbothalf=8641,e.arrowsoutheast=8600,e.arrowsouthwest=8601,e.backslashbig=8726,e.backslashBig=8726,e.backslashBigg=8726,e.backslashbigg=8726,e.bardbl=8214,e.bracehtipdownleft=65079,e.bracehtipdownright=65079,e.bracehtipupleft=65080,e.bracehtipupright=65080,e.braceleftBig=123,e.braceleftbig=123,e.braceleftbigg=123,e.braceleftBigg=123,e.bracerightBig=125,e.bracerightbig=125,e.bracerightbigg=125,e.bracerightBigg=125,e.bracketleftbig=91,e.bracketleftBig=91,e.bracketleftbigg=91,e.bracketleftBigg=91,e.bracketrightBig=93,e.bracketrightbig=93,e.bracketrightbigg=93,e.bracketrightBigg=93,e.ceilingleftbig=8968,e.ceilingleftBig=8968,e.ceilingleftBigg=8968,e.ceilingleftbigg=8968,e.ceilingrightbig=8969,e.ceilingrightBig=8969,e.ceilingrightbigg=8969,e.ceilingrightBigg=8969,e.circledotdisplay=8857,e.circledottext=8857,e.circlemultiplydisplay=8855,e.circlemultiplytext=8855,e.circleplusdisplay=8853,e.circleplustext=8853,e.contintegraldisplay=8750,e.contintegraltext=8750,e.coproductdisplay=8720,e.coproducttext=8720,e.floorleftBig=8970,e.floorleftbig=8970,e.floorleftbigg=8970,e.floorleftBigg=8970,e.floorrightbig=8971,e.floorrightBig=8971,e.floorrightBigg=8971,e.floorrightbigg=8971,e.hatwide=770,e.hatwider=770,e.hatwidest=770,e.intercal=7488,e.integraldisplay=8747,e.integraltext=8747,e.intersectiondisplay=8898,e.intersectiontext=8898,e.logicalanddisplay=8743,e.logicalandtext=8743,e.logicalordisplay=8744,e.logicalortext=8744,e.parenleftBig=40,e.parenleftbig=40,e.parenleftBigg=40,e.parenleftbigg=40,e.parenrightBig=41,e.parenrightbig=41,e.parenrightBigg=41,e.parenrightbigg=41,e.prime=8242,e.productdisplay=8719,e.producttext=8719,e.radicalbig=8730,e.radicalBig=8730,e.radicalBigg=8730,e.radicalbigg=8730,e.radicalbt=8730,e.radicaltp=8730,e.radicalvertex=8730,e.slashbig=47,e.slashBig=47,e.slashBigg=47,e.slashbigg=47,e.summationdisplay=8721,e.summationtext=8721,e.tildewide=732,e.tildewider=732,e.tildewidest=732,e.uniondisplay=8899,e.unionmultidisplay=8846,e.unionmultitext=8846,e.unionsqdisplay=8852,e.unionsqtext=8852,e.uniontext=8899,e.vextenddouble=8741,e.vextendsingle=8739}),ee=k(function(e){e.space=32,e.a1=9985,e.a2=9986,e.a202=9987,e.a3=9988,e.a4=9742,e.a5=9990,e.a119=9991,e.a118=9992,e.a117=9993,e.a11=9755,e.a12=9758,e.a13=9996,e.a14=9997,e.a15=9998,e.a16=9999,e.a105=1e4,e.a17=10001,e.a18=10002,e.a19=10003,e.a20=10004,e.a21=10005,e.a22=10006,e.a23=10007,e.a24=10008,e.a25=10009,e.a26=10010,e.a27=10011,e.a28=10012,e.a6=10013,e.a7=10014,e.a8=10015,e.a9=10016,e.a10=10017,e.a29=10018,e.a30=10019,e.a31=10020,e.a32=10021,e.a33=10022,e.a34=10023,e.a35=9733,e.a36=10025,e.a37=10026,e.a38=10027,e.a39=10028,e.a40=10029,e.a41=10030,e.a42=10031,e.a43=10032,e.a44=10033,e.a45=10034,e.a46=10035,e.a47=10036,e.a48=10037,e.a49=10038,e.a50=10039,e.a51=10040,e.a52=10041,e.a53=10042,e.a54=10043,e.a55=10044,e.a56=10045,e.a57=10046,e.a58=10047,e.a59=10048,e.a60=10049,e.a61=10050,e.a62=10051,e.a63=10052,e.a64=10053,e.a65=10054,e.a66=10055,e.a67=10056,e.a68=10057,e.a69=10058,e.a70=10059,e.a71=9679,e.a72=10061,e.a73=9632,e.a74=10063,e.a203=10064,e.a75=10065,e.a204=10066,e.a76=9650,e.a77=9660,e.a78=9670,e.a79=10070,e.a81=9687,e.a82=10072,e.a83=10073,e.a84=10074,e.a97=10075,e.a98=10076,e.a99=10077,e.a100=10078,e.a101=10081,e.a102=10082,e.a103=10083,e.a104=10084,e.a106=10085,e.a107=10086,e.a108=10087,e.a112=9827,e.a111=9830,e.a110=9829,e.a109=9824,e.a120=9312,e.a121=9313,e.a122=9314,e.a123=9315,e.a124=9316,e.a125=9317,e.a126=9318,e.a127=9319,e.a128=9320,e.a129=9321,e.a130=10102,e.a131=10103,e.a132=10104,e.a133=10105,e.a134=10106,e.a135=10107,e.a136=10108,e.a137=10109,e.a138=10110,e.a139=10111,e.a140=10112,e.a141=10113,e.a142=10114,e.a143=10115,e.a144=10116,e.a145=10117,e.a146=10118,e.a147=10119,e.a148=10120,e.a149=10121,e.a150=10122,e.a151=10123,e.a152=10124,e.a153=10125,e.a154=10126,e.a155=10127,e.a156=10128,e.a157=10129,e.a158=10130,e.a159=10131,e.a160=10132,e.a161=8594,e.a163=8596,e.a164=8597,e.a196=10136,e.a165=10137,e.a192=10138,e.a166=10139,e.a167=10140,e.a168=10141,e.a169=10142,e.a170=10143,e.a171=10144,e.a172=10145,e.a173=10146,e.a162=10147,e.a174=10148,e.a175=10149,e.a176=10150,e.a177=10151,e.a178=10152,e.a179=10153,e.a193=10154,e.a180=10155,e.a199=10156,e.a181=10157,e.a200=10158,e.a182=10159,e.a201=10161,e.a183=10162,e.a184=10163,e.a197=10164,e.a185=10165,e.a194=10166,e.a198=10167,e.a186=10168,e.a195=10169,e.a187=10170,e.a188=10171,e.a189=10172,e.a190=10173,e.a191=10174,e.a89=10088,e.a90=10089,e.a93=10090,e.a94=10091,e.a91=10092,e.a92=10093,e.a205=10094,e.a85=10095,e.a206=10096,e.a86=10097,e.a87=10098,e.a88=10099,e.a95=10100,e.a96=10101,e[".notdef"]=0});se.getGlyphsUnicode=fe,se.getDingbatsGlyphsUnicode=ee},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getSupplementalGlyphMapForCalibri=se.getSupplementalGlyphMapForArialBlack=se.getGlyphMapForStandardFonts=se.getSymbolsFonts=se.getSerifFonts=se.getNonStdFontMap=se.getStdFontMap=void 0;var k=y(8);const fe=(0,k.getLookupTableFactory)(function(f){f.ArialNarrow="Helvetica",f["ArialNarrow-Bold"]="Helvetica-Bold",f["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",f["ArialNarrow-Italic"]="Helvetica-Oblique",f.ArialBlack="Helvetica",f["ArialBlack-Bold"]="Helvetica-Bold",f["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",f["ArialBlack-Italic"]="Helvetica-Oblique",f["Arial-Black"]="Helvetica",f["Arial-Black-Bold"]="Helvetica-Bold",f["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",f["Arial-Black-Italic"]="Helvetica-Oblique",f.Arial="Helvetica",f["Arial-Bold"]="Helvetica-Bold",f["Arial-BoldItalic"]="Helvetica-BoldOblique",f["Arial-Italic"]="Helvetica-Oblique",f["Arial-BoldItalicMT"]="Helvetica-BoldOblique",f["Arial-BoldMT"]="Helvetica-Bold",f["Arial-ItalicMT"]="Helvetica-Oblique",f.ArialMT="Helvetica",f["Courier-Bold"]="Courier-Bold",f["Courier-BoldItalic"]="Courier-BoldOblique",f["Courier-Italic"]="Courier-Oblique",f.CourierNew="Courier",f["CourierNew-Bold"]="Courier-Bold",f["CourierNew-BoldItalic"]="Courier-BoldOblique",f["CourierNew-Italic"]="Courier-Oblique",f["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",f["CourierNewPS-BoldMT"]="Courier-Bold",f["CourierNewPS-ItalicMT"]="Courier-Oblique",f.CourierNewPSMT="Courier",f.Helvetica="Helvetica",f["Helvetica-Bold"]="Helvetica-Bold",f["Helvetica-BoldItalic"]="Helvetica-BoldOblique",f["Helvetica-BoldOblique"]="Helvetica-BoldOblique",f["Helvetica-Italic"]="Helvetica-Oblique",f["Helvetica-Oblique"]="Helvetica-Oblique",f["Symbol-Bold"]="Symbol",f["Symbol-BoldItalic"]="Symbol",f["Symbol-Italic"]="Symbol",f.TimesNewRoman="Times-Roman",f["TimesNewRoman-Bold"]="Times-Bold",f["TimesNewRoman-BoldItalic"]="Times-BoldItalic",f["TimesNewRoman-Italic"]="Times-Italic",f.TimesNewRomanPS="Times-Roman",f["TimesNewRomanPS-Bold"]="Times-Bold",f["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",f["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",f["TimesNewRomanPS-BoldMT"]="Times-Bold",f["TimesNewRomanPS-Italic"]="Times-Italic",f["TimesNewRomanPS-ItalicMT"]="Times-Italic",f.TimesNewRomanPSMT="Times-Roman",f["TimesNewRomanPSMT-Bold"]="Times-Bold",f["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",f["TimesNewRomanPSMT-Italic"]="Times-Italic"});se.getStdFontMap=fe;const ee=(0,k.getLookupTableFactory)(function(f){f.Calibri="Helvetica",f["Calibri-Bold"]="Helvetica-Bold",f["Calibri-BoldItalic"]="Helvetica-BoldOblique",f["Calibri-Italic"]="Helvetica-Oblique",f.CenturyGothic="Helvetica",f["CenturyGothic-Bold"]="Helvetica-Bold",f["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",f["CenturyGothic-Italic"]="Helvetica-Oblique",f.ComicSansMS="Comic Sans MS",f["ComicSansMS-Bold"]="Comic Sans MS-Bold",f["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",f["ComicSansMS-Italic"]="Comic Sans MS-Italic",f.LucidaConsole="Courier",f["LucidaConsole-Bold"]="Courier-Bold",f["LucidaConsole-BoldItalic"]="Courier-BoldOblique",f["LucidaConsole-Italic"]="Courier-Oblique",f["LucidaSans-Demi"]="Helvetica-Bold",f["MS-Gothic"]="MS Gothic",f["MS-Gothic-Bold"]="MS Gothic-Bold",f["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",f["MS-Gothic-Italic"]="MS Gothic-Italic",f["MS-Mincho"]="MS Mincho",f["MS-Mincho-Bold"]="MS Mincho-Bold",f["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",f["MS-Mincho-Italic"]="MS Mincho-Italic",f["MS-PGothic"]="MS PGothic",f["MS-PGothic-Bold"]="MS PGothic-Bold",f["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",f["MS-PGothic-Italic"]="MS PGothic-Italic",f["MS-PMincho"]="MS PMincho",f["MS-PMincho-Bold"]="MS PMincho-Bold",f["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",f["MS-PMincho-Italic"]="MS PMincho-Italic",f.NuptialScript="Times-Italic",f.SegoeUISymbol="Helvetica",f.Wingdings="ZapfDingbats",f["Wingdings-Regular"]="ZapfDingbats"});se.getNonStdFontMap=ee;const e=(0,k.getLookupTableFactory)(function(f){f["Adobe Jenson"]=!0,f["Adobe Text"]=!0,f.Albertus=!0,f.Aldus=!0,f.Alexandria=!0,f.Algerian=!0,f["American Typewriter"]=!0,f.Antiqua=!0,f.Apex=!0,f.Arno=!0,f.Aster=!0,f.Aurora=!0,f.Baskerville=!0,f.Bell=!0,f.Bembo=!0,f["Bembo Schoolbook"]=!0,f.Benguiat=!0,f["Berkeley Old Style"]=!0,f["Bernhard Modern"]=!0,f["Berthold City"]=!0,f.Bodoni=!0,f["Bauer Bodoni"]=!0,f["Book Antiqua"]=!0,f.Bookman=!0,f["Bordeaux Roman"]=!0,f["Californian FB"]=!0,f.Calisto=!0,f.Calvert=!0,f.Capitals=!0,f.Cambria=!0,f.Cartier=!0,f.Caslon=!0,f.Catull=!0,f.Centaur=!0,f["Century Old Style"]=!0,f["Century Schoolbook"]=!0,f.Chaparral=!0,f["Charis SIL"]=!0,f.Cheltenham=!0,f["Cholla Slab"]=!0,f.Clarendon=!0,f.Clearface=!0,f.Cochin=!0,f.Colonna=!0,f["Computer Modern"]=!0,f["Concrete Roman"]=!0,f.Constantia=!0,f["Cooper Black"]=!0,f.Corona=!0,f.Ecotype=!0,f.Egyptienne=!0,f.Elephant=!0,f.Excelsior=!0,f.Fairfield=!0,f["FF Scala"]=!0,f.Folkard=!0,f.Footlight=!0,f.FreeSerif=!0,f["Friz Quadrata"]=!0,f.Garamond=!0,f.Gentium=!0,f.Georgia=!0,f.Gloucester=!0,f["Goudy Old Style"]=!0,f["Goudy Schoolbook"]=!0,f["Goudy Pro Font"]=!0,f.Granjon=!0,f["Guardian Egyptian"]=!0,f.Heather=!0,f.Hercules=!0,f["High Tower Text"]=!0,f.Hiroshige=!0,f["Hoefler Text"]=!0,f["Humana Serif"]=!0,f.Imprint=!0,f["Ionic No. 5"]=!0,f.Janson=!0,f.Joanna=!0,f.Korinna=!0,f.Lexicon=!0,f["Liberation Serif"]=!0,f["Linux Libertine"]=!0,f.Literaturnaya=!0,f.Lucida=!0,f["Lucida Bright"]=!0,f.Melior=!0,f.Memphis=!0,f.Miller=!0,f.Minion=!0,f.Modern=!0,f["Mona Lisa"]=!0,f["Mrs Eaves"]=!0,f["MS Serif"]=!0,f["Museo Slab"]=!0,f["New York"]=!0,f["Nimbus Roman"]=!0,f["NPS Rawlinson Roadway"]=!0,f.NuptialScript=!0,f.Palatino=!0,f.Perpetua=!0,f.Plantin=!0,f["Plantin Schoolbook"]=!0,f.Playbill=!0,f["Poor Richard"]=!0,f["Rawlinson Roadway"]=!0,f.Renault=!0,f.Requiem=!0,f.Rockwell=!0,f.Roman=!0,f["Rotis Serif"]=!0,f.Sabon=!0,f.Scala=!0,f.Seagull=!0,f.Sistina=!0,f.Souvenir=!0,f.STIX=!0,f["Stone Informal"]=!0,f["Stone Serif"]=!0,f.Sylfaen=!0,f.Times=!0,f.Trajan=!0,f.Trinit\u00e9=!0,f["Trump Mediaeval"]=!0,f.Utopia=!0,f["Vale Type"]=!0,f["Bitstream Vera"]=!0,f["Vera Serif"]=!0,f.Versailles=!0,f.Wanted=!0,f.Weiss=!0,f["Wide Latin"]=!0,f.Windsor=!0,f.XITS=!0});se.getSerifFonts=e;const V=(0,k.getLookupTableFactory)(function(f){f.Dingbats=!0,f.Symbol=!0,f.ZapfDingbats=!0});se.getSymbolsFonts=V;const H=(0,k.getLookupTableFactory)(function(f){f[2]=10,f[3]=32,f[4]=33,f[5]=34,f[6]=35,f[7]=36,f[8]=37,f[9]=38,f[10]=39,f[11]=40,f[12]=41,f[13]=42,f[14]=43,f[15]=44,f[16]=45,f[17]=46,f[18]=47,f[19]=48,f[20]=49,f[21]=50,f[22]=51,f[23]=52,f[24]=53,f[25]=54,f[26]=55,f[27]=56,f[28]=57,f[29]=58,f[30]=894,f[31]=60,f[32]=61,f[33]=62,f[34]=63,f[35]=64,f[36]=65,f[37]=66,f[38]=67,f[39]=68,f[40]=69,f[41]=70,f[42]=71,f[43]=72,f[44]=73,f[45]=74,f[46]=75,f[47]=76,f[48]=77,f[49]=78,f[50]=79,f[51]=80,f[52]=81,f[53]=82,f[54]=83,f[55]=84,f[56]=85,f[57]=86,f[58]=87,f[59]=88,f[60]=89,f[61]=90,f[62]=91,f[63]=92,f[64]=93,f[65]=94,f[66]=95,f[67]=96,f[68]=97,f[69]=98,f[70]=99,f[71]=100,f[72]=101,f[73]=102,f[74]=103,f[75]=104,f[76]=105,f[77]=106,f[78]=107,f[79]=108,f[80]=109,f[81]=110,f[82]=111,f[83]=112,f[84]=113,f[85]=114,f[86]=115,f[87]=116,f[88]=117,f[89]=118,f[90]=119,f[91]=120,f[92]=121,f[93]=122,f[94]=123,f[95]=124,f[96]=125,f[97]=126,f[98]=196,f[99]=197,f[100]=199,f[101]=201,f[102]=209,f[103]=214,f[104]=220,f[105]=225,f[106]=224,f[107]=226,f[108]=228,f[109]=227,f[110]=229,f[111]=231,f[112]=233,f[113]=232,f[114]=234,f[115]=235,f[116]=237,f[117]=236,f[118]=238,f[119]=239,f[120]=241,f[121]=243,f[122]=242,f[123]=244,f[124]=246,f[125]=245,f[126]=250,f[127]=249,f[128]=251,f[129]=252,f[130]=8224,f[131]=176,f[132]=162,f[133]=163,f[134]=167,f[135]=8226,f[136]=182,f[137]=223,f[138]=174,f[139]=169,f[140]=8482,f[141]=180,f[142]=168,f[143]=8800,f[144]=198,f[145]=216,f[146]=8734,f[147]=177,f[148]=8804,f[149]=8805,f[150]=165,f[151]=181,f[152]=8706,f[153]=8721,f[154]=8719,f[156]=8747,f[157]=170,f[158]=186,f[159]=8486,f[160]=230,f[161]=248,f[162]=191,f[163]=161,f[164]=172,f[165]=8730,f[166]=402,f[167]=8776,f[168]=8710,f[169]=171,f[170]=187,f[171]=8230,f[210]=218,f[223]=711,f[224]=321,f[225]=322,f[227]=353,f[229]=382,f[234]=253,f[252]=263,f[253]=268,f[254]=269,f[258]=258,f[260]=260,f[261]=261,f[265]=280,f[266]=281,f[268]=283,f[269]=313,f[275]=323,f[276]=324,f[278]=328,f[284]=345,f[285]=346,f[286]=347,f[292]=367,f[295]=377,f[296]=378,f[298]=380,f[305]=963,f[306]=964,f[307]=966,f[308]=8215,f[309]=8252,f[310]=8319,f[311]=8359,f[312]=8592,f[313]=8593,f[337]=9552,f[493]=1039,f[494]=1040,f[705]=1524,f[706]=8362,f[710]=64288,f[711]=64298,f[759]=1617,f[761]=1776,f[763]=1778,f[775]=1652,f[777]=1764,f[778]=1780,f[779]=1781,f[780]=1782,f[782]=771,f[783]=64726,f[786]=8363,f[788]=8532,f[790]=768,f[791]=769,f[792]=768,f[795]=803,f[797]=64336,f[798]=64337,f[799]=64342,f[800]=64343,f[801]=64344,f[802]=64345,f[803]=64362,f[804]=64363,f[805]=64364,f[2424]=7821,f[2425]=7822,f[2426]=7823,f[2427]=7824,f[2428]=7825,f[2429]=7826,f[2430]=7827,f[2433]=7682,f[2678]=8045,f[2679]=8046,f[2830]=1552,f[2838]=686,f[2840]=751,f[2842]=753,f[2843]=754,f[2844]=755,f[2846]=757,f[2856]=767,f[2857]=848,f[2858]=849,f[2862]=853,f[2863]=854,f[2864]=855,f[2865]=861,f[2866]=862,f[2906]=7460,f[2908]=7462,f[2909]=7463,f[2910]=7464,f[2912]=7466,f[2913]=7467,f[2914]=7468,f[2916]=7470,f[2917]=7471,f[2918]=7472,f[2920]=7474,f[2921]=7475,f[2922]=7476,f[2924]=7478,f[2925]=7479,f[2926]=7480,f[2928]=7482,f[2929]=7483,f[2930]=7484,f[2932]=7486,f[2933]=7487,f[2934]=7488,f[2936]=7490,f[2937]=7491,f[2938]=7492,f[2940]=7494,f[2941]=7495,f[2942]=7496,f[2944]=7498,f[2946]=7500,f[2948]=7502,f[2950]=7504,f[2951]=7505,f[2952]=7506,f[2954]=7508,f[2955]=7509,f[2956]=7510,f[2958]=7512,f[2959]=7513,f[2960]=7514,f[2962]=7516,f[2963]=7517,f[2964]=7518,f[2966]=7520,f[2967]=7521,f[2968]=7522,f[2970]=7524,f[2971]=7525,f[2972]=7526,f[2974]=7528,f[2975]=7529,f[2976]=7530,f[2978]=1537,f[2979]=1538,f[2980]=1539,f[2982]=1549,f[2983]=1551,f[2984]=1552,f[2986]=1554,f[2987]=1555,f[2988]=1556,f[2990]=1623,f[2991]=1624,f[2995]=1775,f[2999]=1791,f[3002]=64290,f[3003]=64291,f[3004]=64292,f[3006]=64294,f[3007]=64295,f[3008]=64296,f[3011]=1900,f[3014]=8223,f[3015]=8244,f[3017]=7532,f[3018]=7533,f[3019]=7534,f[3075]=7590,f[3076]=7591,f[3079]=7594,f[3080]=7595,f[3083]=7598,f[3084]=7599,f[3087]=7602,f[3088]=7603,f[3091]=7606,f[3092]=7607,f[3095]=7610,f[3096]=7611,f[3099]=7614,f[3100]=7615,f[3103]=7618,f[3104]=7619,f[3107]=8337,f[3108]=8338,f[3116]=1884,f[3119]=1885,f[3120]=1885,f[3123]=1886,f[3124]=1886,f[3127]=1887,f[3128]=1887,f[3131]=1888,f[3132]=1888,f[3135]=1889,f[3136]=1889,f[3139]=1890,f[3140]=1890,f[3143]=1891,f[3144]=1891,f[3147]=1892,f[3148]=1892,f[3153]=580,f[3154]=581,f[3157]=584,f[3158]=585,f[3161]=588,f[3162]=589,f[3165]=891,f[3166]=892,f[3169]=1274,f[3170]=1275,f[3173]=1278,f[3174]=1279,f[3181]=7622,f[3182]=7623,f[3282]=11799,f[3316]=578,f[3379]=42785,f[3393]=1159,f[3416]=8377});se.getGlyphMapForStandardFonts=H;const te=(0,k.getLookupTableFactory)(function(f){f[227]=322,f[264]=261,f[291]=346});se.getSupplementalGlyphMapForArialBlack=te;const re=(0,k.getLookupTableFactory)(function(f){f[1]=32,f[4]=65,f[17]=66,f[18]=67,f[24]=68,f[28]=69,f[38]=70,f[39]=71,f[44]=72,f[47]=73,f[58]=74,f[60]=75,f[62]=76,f[68]=77,f[69]=78,f[75]=79,f[87]=80,f[89]=81,f[90]=82,f[94]=83,f[100]=84,f[104]=85,f[115]=86,f[116]=87,f[121]=88,f[122]=89,f[127]=90,f[258]=97,f[268]=261,f[271]=98,f[272]=99,f[273]=263,f[282]=100,f[286]=101,f[295]=281,f[296]=102,f[336]=103,f[346]=104,f[349]=105,f[361]=106,f[364]=107,f[367]=108,f[371]=322,f[373]=109,f[374]=110,f[381]=111,f[383]=243,f[393]=112,f[395]=113,f[396]=114,f[400]=115,f[401]=347,f[410]=116,f[437]=117,f[448]=118,f[449]=119,f[454]=120,f[455]=121,f[460]=122,f[463]=380,f[853]=44,f[855]=58,f[856]=46,f[876]=47,f[878]=45,f[882]=45,f[894]=40,f[895]=41,f[896]=91,f[897]=93,f[923]=64,f[1004]=48,f[1005]=49,f[1006]=50,f[1007]=51,f[1008]=52,f[1009]=53,f[1010]=54,f[1011]=55,f[1012]=56,f[1013]=57,f[1081]=37,f[1085]=43,f[1086]=45});se.getSupplementalGlyphMapForCalibri=re},function(Ee,se,y){var k=y(8).getLookupTableFactory,fe=k(function(c){c[63721]=169,c[63193]=169,c[63720]=174,c[63194]=174,c[63722]=8482,c[63195]=8482,c[63729]=9127,c[63730]=9128,c[63731]=9129,c[63740]=9131,c[63741]=9132,c[63742]=9133,c[63726]=9121,c[63727]=9122,c[63728]=9123,c[63737]=9124,c[63738]=9125,c[63739]=9126,c[63723]=9115,c[63724]=9116,c[63725]=9117,c[63734]=9118,c[63735]=9119,c[63736]=9120});var V=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var re=k(function(c){c["\xa8"]=" \u0308",c["\xaf"]=" \u0304",c["\xb4"]=" \u0301",c.\u00b5="\u03bc",c["\xb8"]=" \u0327",c.\u0132="IJ",c.\u0133="ij",c.\u013f="L\xb7",c.\u0140="l\xb7",c.\u0149="\u02bcn",c.\u017f="s",c.\u01c4="D\u017d",c.\u01c5="D\u017e",c.\u01c6="d\u017e",c.\u01c7="LJ",c.\u01c8="Lj",c.\u01c9="lj",c.\u01ca="NJ",c.\u01cb="Nj",c.\u01cc="nj",c.\u01f1="DZ",c.\u01f2="Dz",c.\u01f3="dz",c["\u02d8"]=" \u0306",c["\u02d9"]=" \u0307",c["\u02da"]=" \u030a",c["\u02db"]=" \u0328",c["\u02dc"]=" \u0303",c["\u02dd"]=" \u030b",c.\u037a=" \u0345",c["\u0384"]=" \u0301",c.\u03d0="\u03b2",c.\u03d1="\u03b8",c.\u03d2="\u03a5",c.\u03d5="\u03c6",c.\u03d6="\u03c0",c.\u03f0="\u03ba",c.\u03f1="\u03c1",c.\u03f2="\u03c2",c["\u03f4"]="\u0398",c["\u03f5"]="\u03b5",c["\u03f9"]="\u03a3",c.\u0587="\u0565\u0582",c.\u0675="\u0627\u0674",c.\u0676="\u0648\u0674",c.\u0677="\u06c7\u0674",c.\u0678="\u064a\u0674",c.\u0e33="\u0e4d\u0e32",c.\u0eb3="\u0ecd\u0eb2",c.\u0edc="\u0eab\u0e99",c.\u0edd="\u0eab\u0ea1",c["\u0f77"]="\u0fb2\u0f81",c["\u0f79"]="\u0fb3\u0f81",c.\u1e9a="a\u02be",c["\u1fbd"]=" \u0313",c["\u1fbf"]=" \u0313",c["\u1fc0"]=" \u0342",c["\u1ffe"]=" \u0314",c["\u2002"]=" ",c["\u2003"]=" ",c["\u2004"]=" ",c["\u2005"]=" ",c["\u2006"]=" ",c["\u2008"]=" ",c["\u2009"]=" ",c["\u200a"]=" ",c["\u2017"]=" \u0333",c["\u2024"]=".",c["\u2025"]="..",c["\u2026"]="...",c["\u2033"]="\u2032\u2032",c["\u2034"]="\u2032\u2032\u2032",c["\u2036"]="\u2035\u2035",c["\u2037"]="\u2035\u2035\u2035",c["\u203c"]="!!",c["\u203e"]=" \u0305",c["\u2047"]="??",c["\u2048"]="?!",c["\u2049"]="!?",c["\u2057"]="\u2032\u2032\u2032\u2032",c["\u205f"]=" ",c["\u20a8"]="Rs",c["\u2100"]="a/c",c["\u2101"]="a/s",c["\u2103"]="\xb0C",c["\u2105"]="c/o",c["\u2106"]="c/u",c.\u2107="\u0190",c["\u2109"]="\xb0F",c["\u2116"]="No",c["\u2121"]="TEL",c.\u2135="\u05d0",c.\u2136="\u05d1",c.\u2137="\u05d2",c.\u2138="\u05d3",c["\u213b"]="FAX",c["\u2160"]="I",c["\u2161"]="II",c["\u2162"]="III",c["\u2163"]="IV",c["\u2164"]="V",c["\u2165"]="VI",c["\u2166"]="VII",c["\u2167"]="VIII",c["\u2168"]="IX",c["\u2169"]="X",c["\u216a"]="XI",c["\u216b"]="XII",c["\u216c"]="L",c["\u216d"]="C",c["\u216e"]="D",c["\u216f"]="M",c["\u2170"]="i",c["\u2171"]="ii",c["\u2172"]="iii",c["\u2173"]="iv",c["\u2174"]="v",c["\u2175"]="vi",c["\u2176"]="vii",c["\u2177"]="viii",c["\u2178"]="ix",c["\u2179"]="x",c["\u217a"]="xi",c["\u217b"]="xii",c["\u217c"]="l",c["\u217d"]="c",c["\u217e"]="d",c["\u217f"]="m",c["\u222c"]="\u222b\u222b",c["\u222d"]="\u222b\u222b\u222b",c["\u222f"]="\u222e\u222e",c["\u2230"]="\u222e\u222e\u222e",c["\u2474"]="(1)",c["\u2475"]="(2)",c["\u2476"]="(3)",c["\u2477"]="(4)",c["\u2478"]="(5)",c["\u2479"]="(6)",c["\u247a"]="(7)",c["\u247b"]="(8)",c["\u247c"]="(9)",c["\u247d"]="(10)",c["\u247e"]="(11)",c["\u247f"]="(12)",c["\u2480"]="(13)",c["\u2481"]="(14)",c["\u2482"]="(15)",c["\u2483"]="(16)",c["\u2484"]="(17)",c["\u2485"]="(18)",c["\u2486"]="(19)",c["\u2487"]="(20)",c["\u2488"]="1.",c["\u2489"]="2.",c["\u248a"]="3.",c["\u248b"]="4.",c["\u248c"]="5.",c["\u248d"]="6.",c["\u248e"]="7.",c["\u248f"]="8.",c["\u2490"]="9.",c["\u2491"]="10.",c["\u2492"]="11.",c["\u2493"]="12.",c["\u2494"]="13.",c["\u2495"]="14.",c["\u2496"]="15.",c["\u2497"]="16.",c["\u2498"]="17.",c["\u2499"]="18.",c["\u249a"]="19.",c["\u249b"]="20.",c["\u249c"]="(a)",c["\u249d"]="(b)",c["\u249e"]="(c)",c["\u249f"]="(d)",c["\u24a0"]="(e)",c["\u24a1"]="(f)",c["\u24a2"]="(g)",c["\u24a3"]="(h)",c["\u24a4"]="(i)",c["\u24a5"]="(j)",c["\u24a6"]="(k)",c["\u24a7"]="(l)",c["\u24a8"]="(m)",c["\u24a9"]="(n)",c["\u24aa"]="(o)",c["\u24ab"]="(p)",c["\u24ac"]="(q)",c["\u24ad"]="(r)",c["\u24ae"]="(s)",c["\u24af"]="(t)",c["\u24b0"]="(u)",c["\u24b1"]="(v)",c["\u24b2"]="(w)",c["\u24b3"]="(x)",c["\u24b4"]="(y)",c["\u24b5"]="(z)",c["\u2a0c"]="\u222b\u222b\u222b\u222b",c["\u2a74"]="::=",c["\u2a75"]="==",c["\u2a76"]="===",c["\u2e9f"]="\u6bcd",c["\u2ef3"]="\u9f9f",c["\u2f00"]="\u4e00",c["\u2f01"]="\u4e28",c["\u2f02"]="\u4e36",c["\u2f03"]="\u4e3f",c["\u2f04"]="\u4e59",c["\u2f05"]="\u4e85",c["\u2f06"]="\u4e8c",c["\u2f07"]="\u4ea0",c["\u2f08"]="\u4eba",c["\u2f09"]="\u513f",c["\u2f0a"]="\u5165",c["\u2f0b"]="\u516b",c["\u2f0c"]="\u5182",c["\u2f0d"]="\u5196",c["\u2f0e"]="\u51ab",c["\u2f0f"]="\u51e0",c["\u2f10"]="\u51f5",c["\u2f11"]="\u5200",c["\u2f12"]="\u529b",c["\u2f13"]="\u52f9",c["\u2f14"]="\u5315",c["\u2f15"]="\u531a",c["\u2f16"]="\u5338",c["\u2f17"]="\u5341",c["\u2f18"]="\u535c",c["\u2f19"]="\u5369",c["\u2f1a"]="\u5382",c["\u2f1b"]="\u53b6",c["\u2f1c"]="\u53c8",c["\u2f1d"]="\u53e3",c["\u2f1e"]="\u56d7",c["\u2f1f"]="\u571f",c["\u2f20"]="\u58eb",c["\u2f21"]="\u5902",c["\u2f22"]="\u590a",c["\u2f23"]="\u5915",c["\u2f24"]="\u5927",c["\u2f25"]="\u5973",c["\u2f26"]="\u5b50",c["\u2f27"]="\u5b80",c["\u2f28"]="\u5bf8",c["\u2f29"]="\u5c0f",c["\u2f2a"]="\u5c22",c["\u2f2b"]="\u5c38",c["\u2f2c"]="\u5c6e",c["\u2f2d"]="\u5c71",c["\u2f2e"]="\u5ddb",c["\u2f2f"]="\u5de5",c["\u2f30"]="\u5df1",c["\u2f31"]="\u5dfe",c["\u2f32"]="\u5e72",c["\u2f33"]="\u5e7a",c["\u2f34"]="\u5e7f",c["\u2f35"]="\u5ef4",c["\u2f36"]="\u5efe",c["\u2f37"]="\u5f0b",c["\u2f38"]="\u5f13",c["\u2f39"]="\u5f50",c["\u2f3a"]="\u5f61",c["\u2f3b"]="\u5f73",c["\u2f3c"]="\u5fc3",c["\u2f3d"]="\u6208",c["\u2f3e"]="\u6236",c["\u2f3f"]="\u624b",c["\u2f40"]="\u652f",c["\u2f41"]="\u6534",c["\u2f42"]="\u6587",c["\u2f43"]="\u6597",c["\u2f44"]="\u65a4",c["\u2f45"]="\u65b9",c["\u2f46"]="\u65e0",c["\u2f47"]="\u65e5",c["\u2f48"]="\u66f0",c["\u2f49"]="\u6708",c["\u2f4a"]="\u6728",c["\u2f4b"]="\u6b20",c["\u2f4c"]="\u6b62",c["\u2f4d"]="\u6b79",c["\u2f4e"]="\u6bb3",c["\u2f4f"]="\u6bcb",c["\u2f50"]="\u6bd4",c["\u2f51"]="\u6bdb",c["\u2f52"]="\u6c0f",c["\u2f53"]="\u6c14",c["\u2f54"]="\u6c34",c["\u2f55"]="\u706b",c["\u2f56"]="\u722a",c["\u2f57"]="\u7236",c["\u2f58"]="\u723b",c["\u2f59"]="\u723f",c["\u2f5a"]="\u7247",c["\u2f5b"]="\u7259",c["\u2f5c"]="\u725b",c["\u2f5d"]="\u72ac",c["\u2f5e"]="\u7384",c["\u2f5f"]="\u7389",c["\u2f60"]="\u74dc",c["\u2f61"]="\u74e6",c["\u2f62"]="\u7518",c["\u2f63"]="\u751f",c["\u2f64"]="\u7528",c["\u2f65"]="\u7530",c["\u2f66"]="\u758b",c["\u2f67"]="\u7592",c["\u2f68"]="\u7676",c["\u2f69"]="\u767d",c["\u2f6a"]="\u76ae",c["\u2f6b"]="\u76bf",c["\u2f6c"]="\u76ee",c["\u2f6d"]="\u77db",c["\u2f6e"]="\u77e2",c["\u2f6f"]="\u77f3",c["\u2f70"]="\u793a",c["\u2f71"]="\u79b8",c["\u2f72"]="\u79be",c["\u2f73"]="\u7a74",c["\u2f74"]="\u7acb",c["\u2f75"]="\u7af9",c["\u2f76"]="\u7c73",c["\u2f77"]="\u7cf8",c["\u2f78"]="\u7f36",c["\u2f79"]="\u7f51",c["\u2f7a"]="\u7f8a",c["\u2f7b"]="\u7fbd",c["\u2f7c"]="\u8001",c["\u2f7d"]="\u800c",c["\u2f7e"]="\u8012",c["\u2f7f"]="\u8033",c["\u2f80"]="\u807f",c["\u2f81"]="\u8089",c["\u2f82"]="\u81e3",c["\u2f83"]="\u81ea",c["\u2f84"]="\u81f3",c["\u2f85"]="\u81fc",c["\u2f86"]="\u820c",c["\u2f87"]="\u821b",c["\u2f88"]="\u821f",c["\u2f89"]="\u826e",c["\u2f8a"]="\u8272",c["\u2f8b"]="\u8278",c["\u2f8c"]="\u864d",c["\u2f8d"]="\u866b",c["\u2f8e"]="\u8840",c["\u2f8f"]="\u884c",c["\u2f90"]="\u8863",c["\u2f91"]="\u897e",c["\u2f92"]="\u898b",c["\u2f93"]="\u89d2",c["\u2f94"]="\u8a00",c["\u2f95"]="\u8c37",c["\u2f96"]="\u8c46",c["\u2f97"]="\u8c55",c["\u2f98"]="\u8c78",c["\u2f99"]="\u8c9d",c["\u2f9a"]="\u8d64",c["\u2f9b"]="\u8d70",c["\u2f9c"]="\u8db3",c["\u2f9d"]="\u8eab",c["\u2f9e"]="\u8eca",c["\u2f9f"]="\u8f9b",c["\u2fa0"]="\u8fb0",c["\u2fa1"]="\u8fb5",c["\u2fa2"]="\u9091",c["\u2fa3"]="\u9149",c["\u2fa4"]="\u91c6",c["\u2fa5"]="\u91cc",c["\u2fa6"]="\u91d1",c["\u2fa7"]="\u9577",c["\u2fa8"]="\u9580",c["\u2fa9"]="\u961c",c["\u2faa"]="\u96b6",c["\u2fab"]="\u96b9",c["\u2fac"]="\u96e8",c["\u2fad"]="\u9751",c["\u2fae"]="\u975e",c["\u2faf"]="\u9762",c["\u2fb0"]="\u9769",c["\u2fb1"]="\u97cb",c["\u2fb2"]="\u97ed",c["\u2fb3"]="\u97f3",c["\u2fb4"]="\u9801",c["\u2fb5"]="\u98a8",c["\u2fb6"]="\u98db",c["\u2fb7"]="\u98df",c["\u2fb8"]="\u9996",c["\u2fb9"]="\u9999",c["\u2fba"]="\u99ac",c["\u2fbb"]="\u9aa8",c["\u2fbc"]="\u9ad8",c["\u2fbd"]="\u9adf",c["\u2fbe"]="\u9b25",c["\u2fbf"]="\u9b2f",c["\u2fc0"]="\u9b32",c["\u2fc1"]="\u9b3c",c["\u2fc2"]="\u9b5a",c["\u2fc3"]="\u9ce5",c["\u2fc4"]="\u9e75",c["\u2fc5"]="\u9e7f",c["\u2fc6"]="\u9ea5",c["\u2fc7"]="\u9ebb",c["\u2fc8"]="\u9ec3",c["\u2fc9"]="\u9ecd",c["\u2fca"]="\u9ed1",c["\u2fcb"]="\u9ef9",c["\u2fcc"]="\u9efd",c["\u2fcd"]="\u9f0e",c["\u2fce"]="\u9f13",c["\u2fcf"]="\u9f20",c["\u2fd0"]="\u9f3b",c["\u2fd1"]="\u9f4a",c["\u2fd2"]="\u9f52",c["\u2fd3"]="\u9f8d",c["\u2fd4"]="\u9f9c",c["\u2fd5"]="\u9fa0",c["\u3036"]="\u3012",c["\u3038"]="\u5341",c["\u3039"]="\u5344",c["\u303a"]="\u5345",c["\u309b"]=" \u3099",c["\u309c"]=" \u309a",c.\u3131="\u1100",c.\u3132="\u1101",c.\u3133="\u11aa",c.\u3134="\u1102",c.\u3135="\u11ac",c.\u3136="\u11ad",c.\u3137="\u1103",c.\u3138="\u1104",c.\u3139="\u1105",c.\u313a="\u11b0",c.\u313b="\u11b1",c.\u313c="\u11b2",c.\u313d="\u11b3",c.\u313e="\u11b4",c.\u313f="\u11b5",c.\u3140="\u111a",c.\u3141="\u1106",c.\u3142="\u1107",c.\u3143="\u1108",c.\u3144="\u1121",c.\u3145="\u1109",c.\u3146="\u110a",c.\u3147="\u110b",c.\u3148="\u110c",c.\u3149="\u110d",c.\u314a="\u110e",c.\u314b="\u110f",c.\u314c="\u1110",c.\u314d="\u1111",c.\u314e="\u1112",c.\u314f="\u1161",c.\u3150="\u1162",c.\u3151="\u1163",c.\u3152="\u1164",c.\u3153="\u1165",c.\u3154="\u1166",c.\u3155="\u1167",c.\u3156="\u1168",c.\u3157="\u1169",c.\u3158="\u116a",c.\u3159="\u116b",c.\u315a="\u116c",c.\u315b="\u116d",c.\u315c="\u116e",c.\u315d="\u116f",c.\u315e="\u1170",c.\u315f="\u1171",c.\u3160="\u1172",c.\u3161="\u1173",c.\u3162="\u1174",c.\u3163="\u1175",c.\u3164="\u1160",c.\u3165="\u1114",c.\u3166="\u1115",c.\u3167="\u11c7",c.\u3168="\u11c8",c.\u3169="\u11cc",c.\u316a="\u11ce",c.\u316b="\u11d3",c.\u316c="\u11d7",c.\u316d="\u11d9",c.\u316e="\u111c",c.\u316f="\u11dd",c.\u3170="\u11df",c.\u3171="\u111d",c.\u3172="\u111e",c.\u3173="\u1120",c.\u3174="\u1122",c.\u3175="\u1123",c.\u3176="\u1127",c.\u3177="\u1129",c.\u3178="\u112b",c.\u3179="\u112c",c.\u317a="\u112d",c.\u317b="\u112e",c.\u317c="\u112f",c.\u317d="\u1132",c.\u317e="\u1136",c.\u317f="\u1140",c.\u3180="\u1147",c.\u3181="\u114c",c.\u3182="\u11f1",c.\u3183="\u11f2",c.\u3184="\u1157",c.\u3185="\u1158",c.\u3186="\u1159",c.\u3187="\u1184",c.\u3188="\u1185",c.\u3189="\u1188",c.\u318a="\u1191",c.\u318b="\u1192",c.\u318c="\u1194",c.\u318d="\u119e",c.\u318e="\u11a1",c["\u3200"]="(\u1100)",c["\u3201"]="(\u1102)",c["\u3202"]="(\u1103)",c["\u3203"]="(\u1105)",c["\u3204"]="(\u1106)",c["\u3205"]="(\u1107)",c["\u3206"]="(\u1109)",c["\u3207"]="(\u110b)",c["\u3208"]="(\u110c)",c["\u3209"]="(\u110e)",c["\u320a"]="(\u110f)",c["\u320b"]="(\u1110)",c["\u320c"]="(\u1111)",c["\u320d"]="(\u1112)",c["\u320e"]="(\u1100\u1161)",c["\u320f"]="(\u1102\u1161)",c["\u3210"]="(\u1103\u1161)",c["\u3211"]="(\u1105\u1161)",c["\u3212"]="(\u1106\u1161)",c["\u3213"]="(\u1107\u1161)",c["\u3214"]="(\u1109\u1161)",c["\u3215"]="(\u110b\u1161)",c["\u3216"]="(\u110c\u1161)",c["\u3217"]="(\u110e\u1161)",c["\u3218"]="(\u110f\u1161)",c["\u3219"]="(\u1110\u1161)",c["\u321a"]="(\u1111\u1161)",c["\u321b"]="(\u1112\u1161)",c["\u321c"]="(\u110c\u116e)",c["\u321d"]="(\u110b\u1169\u110c\u1165\u11ab)",c["\u321e"]="(\u110b\u1169\u1112\u116e)",c["\u3220"]="(\u4e00)",c["\u3221"]="(\u4e8c)",c["\u3222"]="(\u4e09)",c["\u3223"]="(\u56db)",c["\u3224"]="(\u4e94)",c["\u3225"]="(\u516d)",c["\u3226"]="(\u4e03)",c["\u3227"]="(\u516b)",c["\u3228"]="(\u4e5d)",c["\u3229"]="(\u5341)",c["\u322a"]="(\u6708)",c["\u322b"]="(\u706b)",c["\u322c"]="(\u6c34)",c["\u322d"]="(\u6728)",c["\u322e"]="(\u91d1)",c["\u322f"]="(\u571f)",c["\u3230"]="(\u65e5)",c["\u3231"]="(\u682a)",c["\u3232"]="(\u6709)",c["\u3233"]="(\u793e)",c["\u3234"]="(\u540d)",c["\u3235"]="(\u7279)",c["\u3236"]="(\u8ca1)",c["\u3237"]="(\u795d)",c["\u3238"]="(\u52b4)",c["\u3239"]="(\u4ee3)",c["\u323a"]="(\u547c)",c["\u323b"]="(\u5b66)",c["\u323c"]="(\u76e3)",c["\u323d"]="(\u4f01)",c["\u323e"]="(\u8cc7)",c["\u323f"]="(\u5354)",c["\u3240"]="(\u796d)",c["\u3241"]="(\u4f11)",c["\u3242"]="(\u81ea)",c["\u3243"]="(\u81f3)",c["\u32c0"]="1\u6708",c["\u32c1"]="2\u6708",c["\u32c2"]="3\u6708",c["\u32c3"]="4\u6708",c["\u32c4"]="5\u6708",c["\u32c5"]="6\u6708",c["\u32c6"]="7\u6708",c["\u32c7"]="8\u6708",c["\u32c8"]="9\u6708",c["\u32c9"]="10\u6708",c["\u32ca"]="11\u6708",c["\u32cb"]="12\u6708",c["\u3358"]="0\u70b9",c["\u3359"]="1\u70b9",c["\u335a"]="2\u70b9",c["\u335b"]="3\u70b9",c["\u335c"]="4\u70b9",c["\u335d"]="5\u70b9",c["\u335e"]="6\u70b9",c["\u335f"]="7\u70b9",c["\u3360"]="8\u70b9",c["\u3361"]="9\u70b9",c["\u3362"]="10\u70b9",c["\u3363"]="11\u70b9",c["\u3364"]="12\u70b9",c["\u3365"]="13\u70b9",c["\u3366"]="14\u70b9",c["\u3367"]="15\u70b9",c["\u3368"]="16\u70b9",c["\u3369"]="17\u70b9",c["\u336a"]="18\u70b9",c["\u336b"]="19\u70b9",c["\u336c"]="20\u70b9",c["\u336d"]="21\u70b9",c["\u336e"]="22\u70b9",c["\u336f"]="23\u70b9",c["\u3370"]="24\u70b9",c["\u33e0"]="1\u65e5",c["\u33e1"]="2\u65e5",c["\u33e2"]="3\u65e5",c["\u33e3"]="4\u65e5",c["\u33e4"]="5\u65e5",c["\u33e5"]="6\u65e5",c["\u33e6"]="7\u65e5",c["\u33e7"]="8\u65e5",c["\u33e8"]="9\u65e5",c["\u33e9"]="10\u65e5",c["\u33ea"]="11\u65e5",c["\u33eb"]="12\u65e5",c["\u33ec"]="13\u65e5",c["\u33ed"]="14\u65e5",c["\u33ee"]="15\u65e5",c["\u33ef"]="16\u65e5",c["\u33f0"]="17\u65e5",c["\u33f1"]="18\u65e5",c["\u33f2"]="19\u65e5",c["\u33f3"]="20\u65e5",c["\u33f4"]="21\u65e5",c["\u33f5"]="22\u65e5",c["\u33f6"]="23\u65e5",c["\u33f7"]="24\u65e5",c["\u33f8"]="25\u65e5",c["\u33f9"]="26\u65e5",c["\u33fa"]="27\u65e5",c["\u33fb"]="28\u65e5",c["\u33fc"]="29\u65e5",c["\u33fd"]="30\u65e5",c["\u33fe"]="31\u65e5",c.\ufb00="ff",c.\ufb01="fi",c.\ufb02="fl",c.\ufb03="ffi",c.\ufb04="ffl",c.\ufb05="\u017ft",c.\ufb06="st",c.\ufb13="\u0574\u0576",c.\ufb14="\u0574\u0565",c.\ufb15="\u0574\u056b",c.\ufb16="\u057e\u0576",c.\ufb17="\u0574\u056d",c.\ufb4f="\u05d0\u05dc",c.\ufb50="\u0671",c.\ufb51="\u0671",c.\ufb52="\u067b",c.\ufb53="\u067b",c.\ufb54="\u067b",c.\ufb55="\u067b",c.\ufb56="\u067e",c.\ufb57="\u067e",c.\ufb58="\u067e",c.\ufb59="\u067e",c.\ufb5a="\u0680",c.\ufb5b="\u0680",c.\ufb5c="\u0680",c.\ufb5d="\u0680",c.\ufb5e="\u067a",c.\ufb5f="\u067a",c.\ufb60="\u067a",c.\ufb61="\u067a",c.\ufb62="\u067f",c.\ufb63="\u067f",c.\ufb64="\u067f",c.\ufb65="\u067f",c.\ufb66="\u0679",c.\ufb67="\u0679",c.\ufb68="\u0679",c.\ufb69="\u0679",c.\ufb6a="\u06a4",c.\ufb6b="\u06a4",c.\ufb6c="\u06a4",c.\ufb6d="\u06a4",c.\ufb6e="\u06a6",c.\ufb6f="\u06a6",c.\ufb70="\u06a6",c.\ufb71="\u06a6",c.\ufb72="\u0684",c.\ufb73="\u0684",c.\ufb74="\u0684",c.\ufb75="\u0684",c.\ufb76="\u0683",c.\ufb77="\u0683",c.\ufb78="\u0683",c.\ufb79="\u0683",c.\ufb7a="\u0686",c.\ufb7b="\u0686",c.\ufb7c="\u0686",c.\ufb7d="\u0686",c.\ufb7e="\u0687",c.\ufb7f="\u0687",c.\ufb80="\u0687",c.\ufb81="\u0687",c.\ufb82="\u068d",c.\ufb83="\u068d",c.\ufb84="\u068c",c.\ufb85="\u068c",c.\ufb86="\u068e",c.\ufb87="\u068e",c.\ufb88="\u0688",c.\ufb89="\u0688",c.\ufb8a="\u0698",c.\ufb8b="\u0698",c.\ufb8c="\u0691",c.\ufb8d="\u0691",c.\ufb8e="\u06a9",c.\ufb8f="\u06a9",c.\ufb90="\u06a9",c.\ufb91="\u06a9",c.\ufb92="\u06af",c.\ufb93="\u06af",c.\ufb94="\u06af",c.\ufb95="\u06af",c.\ufb96="\u06b3",c.\ufb97="\u06b3",c.\ufb98="\u06b3",c.\ufb99="\u06b3",c.\ufb9a="\u06b1",c.\ufb9b="\u06b1",c.\ufb9c="\u06b1",c.\ufb9d="\u06b1",c.\ufb9e="\u06ba",c.\ufb9f="\u06ba",c.\ufba0="\u06bb",c.\ufba1="\u06bb",c.\ufba2="\u06bb",c.\ufba3="\u06bb",c.\ufba4="\u06c0",c.\ufba5="\u06c0",c.\ufba6="\u06c1",c.\ufba7="\u06c1",c.\ufba8="\u06c1",c.\ufba9="\u06c1",c.\ufbaa="\u06be",c.\ufbab="\u06be",c.\ufbac="\u06be",c.\ufbad="\u06be",c.\ufbae="\u06d2",c.\ufbaf="\u06d2",c.\ufbb0="\u06d3",c.\ufbb1="\u06d3",c.\ufbd3="\u06ad",c.\ufbd4="\u06ad",c.\ufbd5="\u06ad",c.\ufbd6="\u06ad",c.\ufbd7="\u06c7",c.\ufbd8="\u06c7",c.\ufbd9="\u06c6",c.\ufbda="\u06c6",c.\ufbdb="\u06c8",c.\ufbdc="\u06c8",c.\ufbdd="\u0677",c.\ufbde="\u06cb",c.\ufbdf="\u06cb",c.\ufbe0="\u06c5",c.\ufbe1="\u06c5",c.\ufbe2="\u06c9",c.\ufbe3="\u06c9",c.\ufbe4="\u06d0",c.\ufbe5="\u06d0",c.\ufbe6="\u06d0",c.\ufbe7="\u06d0",c.\ufbe8="\u0649",c.\ufbe9="\u0649",c.\ufbea="\u0626\u0627",c.\ufbeb="\u0626\u0627",c.\ufbec="\u0626\u06d5",c.\ufbed="\u0626\u06d5",c.\ufbee="\u0626\u0648",c.\ufbef="\u0626\u0648",c.\ufbf0="\u0626\u06c7",c.\ufbf1="\u0626\u06c7",c.\ufbf2="\u0626\u06c6",c.\ufbf3="\u0626\u06c6",c.\ufbf4="\u0626\u06c8",c.\ufbf5="\u0626\u06c8",c.\ufbf6="\u0626\u06d0",c.\ufbf7="\u0626\u06d0",c.\ufbf8="\u0626\u06d0",c.\ufbf9="\u0626\u0649",c.\ufbfa="\u0626\u0649",c.\ufbfb="\u0626\u0649",c.\ufbfc="\u06cc",c.\ufbfd="\u06cc",c.\ufbfe="\u06cc",c.\ufbff="\u06cc",c.\ufc00="\u0626\u062c",c.\ufc01="\u0626\u062d",c.\ufc02="\u0626\u0645",c.\ufc03="\u0626\u0649",c.\ufc04="\u0626\u064a",c.\ufc05="\u0628\u062c",c.\ufc06="\u0628\u062d",c.\ufc07="\u0628\u062e",c.\ufc08="\u0628\u0645",c.\ufc09="\u0628\u0649",c.\ufc0a="\u0628\u064a",c.\ufc0b="\u062a\u062c",c.\ufc0c="\u062a\u062d",c.\ufc0d="\u062a\u062e",c.\ufc0e="\u062a\u0645",c.\ufc0f="\u062a\u0649",c.\ufc10="\u062a\u064a",c.\ufc11="\u062b\u062c",c.\ufc12="\u062b\u0645",c.\ufc13="\u062b\u0649",c.\ufc14="\u062b\u064a",c.\ufc15="\u062c\u062d",c.\ufc16="\u062c\u0645",c.\ufc17="\u062d\u062c",c.\ufc18="\u062d\u0645",c.\ufc19="\u062e\u062c",c.\ufc1a="\u062e\u062d",c.\ufc1b="\u062e\u0645",c.\ufc1c="\u0633\u062c",c.\ufc1d="\u0633\u062d",c.\ufc1e="\u0633\u062e",c.\ufc1f="\u0633\u0645",c.\ufc20="\u0635\u062d",c.\ufc21="\u0635\u0645",c.\ufc22="\u0636\u062c",c.\ufc23="\u0636\u062d",c.\ufc24="\u0636\u062e",c.\ufc25="\u0636\u0645",c.\ufc26="\u0637\u062d",c.\ufc27="\u0637\u0645",c.\ufc28="\u0638\u0645",c.\ufc29="\u0639\u062c",c.\ufc2a="\u0639\u0645",c.\ufc2b="\u063a\u062c",c.\ufc2c="\u063a\u0645",c.\ufc2d="\u0641\u062c",c.\ufc2e="\u0641\u062d",c.\ufc2f="\u0641\u062e",c.\ufc30="\u0641\u0645",c.\ufc31="\u0641\u0649",c.\ufc32="\u0641\u064a",c.\ufc33="\u0642\u062d",c.\ufc34="\u0642\u0645",c.\ufc35="\u0642\u0649",c.\ufc36="\u0642\u064a",c.\ufc37="\u0643\u0627",c.\ufc38="\u0643\u062c",c.\ufc39="\u0643\u062d",c.\ufc3a="\u0643\u062e",c.\ufc3b="\u0643\u0644",c.\ufc3c="\u0643\u0645",c.\ufc3d="\u0643\u0649",c.\ufc3e="\u0643\u064a",c.\ufc3f="\u0644\u062c",c.\ufc40="\u0644\u062d",c.\ufc41="\u0644\u062e",c.\ufc42="\u0644\u0645",c.\ufc43="\u0644\u0649",c.\ufc44="\u0644\u064a",c.\ufc45="\u0645\u062c",c.\ufc46="\u0645\u062d",c.\ufc47="\u0645\u062e",c.\ufc48="\u0645\u0645",c.\ufc49="\u0645\u0649",c.\ufc4a="\u0645\u064a",c.\ufc4b="\u0646\u062c",c.\ufc4c="\u0646\u062d",c.\ufc4d="\u0646\u062e",c.\ufc4e="\u0646\u0645",c.\ufc4f="\u0646\u0649",c.\ufc50="\u0646\u064a",c.\ufc51="\u0647\u062c",c.\ufc52="\u0647\u0645",c.\ufc53="\u0647\u0649",c.\ufc54="\u0647\u064a",c.\ufc55="\u064a\u062c",c.\ufc56="\u064a\u062d",c.\ufc57="\u064a\u062e",c.\ufc58="\u064a\u0645",c.\ufc59="\u064a\u0649",c.\ufc5a="\u064a\u064a",c.\ufc5b="\u0630\u0670",c.\ufc5c="\u0631\u0670",c.\ufc5d="\u0649\u0670",c.\ufc5e=" \u064c\u0651",c.\ufc5f=" \u064d\u0651",c.\ufc60=" \u064e\u0651",c.\ufc61=" \u064f\u0651",c.\ufc62=" \u0650\u0651",c.\ufc63=" \u0651\u0670",c.\ufc64="\u0626\u0631",c.\ufc65="\u0626\u0632",c.\ufc66="\u0626\u0645",c.\ufc67="\u0626\u0646",c.\ufc68="\u0626\u0649",c.\ufc69="\u0626\u064a",c.\ufc6a="\u0628\u0631",c.\ufc6b="\u0628\u0632",c.\ufc6c="\u0628\u0645",c.\ufc6d="\u0628\u0646",c.\ufc6e="\u0628\u0649",c.\ufc6f="\u0628\u064a",c.\ufc70="\u062a\u0631",c.\ufc71="\u062a\u0632",c.\ufc72="\u062a\u0645",c.\ufc73="\u062a\u0646",c.\ufc74="\u062a\u0649",c.\ufc75="\u062a\u064a",c.\ufc76="\u062b\u0631",c.\ufc77="\u062b\u0632",c.\ufc78="\u062b\u0645",c.\ufc79="\u062b\u0646",c.\ufc7a="\u062b\u0649",c.\ufc7b="\u062b\u064a",c.\ufc7c="\u0641\u0649",c.\ufc7d="\u0641\u064a",c.\ufc7e="\u0642\u0649",c.\ufc7f="\u0642\u064a",c.\ufc80="\u0643\u0627",c.\ufc81="\u0643\u0644",c.\ufc82="\u0643\u0645",c.\ufc83="\u0643\u0649",c.\ufc84="\u0643\u064a",c.\ufc85="\u0644\u0645",c.\ufc86="\u0644\u0649",c.\ufc87="\u0644\u064a",c.\ufc88="\u0645\u0627",c.\ufc89="\u0645\u0645",c.\ufc8a="\u0646\u0631",c.\ufc8b="\u0646\u0632",c.\ufc8c="\u0646\u0645",c.\ufc8d="\u0646\u0646",c.\ufc8e="\u0646\u0649",c.\ufc8f="\u0646\u064a",c.\ufc90="\u0649\u0670",c.\ufc91="\u064a\u0631",c.\ufc92="\u064a\u0632",c.\ufc93="\u064a\u0645",c.\ufc94="\u064a\u0646",c.\ufc95="\u064a\u0649",c.\ufc96="\u064a\u064a",c.\ufc97="\u0626\u062c",c.\ufc98="\u0626\u062d",c.\ufc99="\u0626\u062e",c.\ufc9a="\u0626\u0645",c.\ufc9b="\u0626\u0647",c.\ufc9c="\u0628\u062c",c.\ufc9d="\u0628\u062d",c.\ufc9e="\u0628\u062e",c.\ufc9f="\u0628\u0645",c.\ufca0="\u0628\u0647",c.\ufca1="\u062a\u062c",c.\ufca2="\u062a\u062d",c.\ufca3="\u062a\u062e",c.\ufca4="\u062a\u0645",c.\ufca5="\u062a\u0647",c.\ufca6="\u062b\u0645",c.\ufca7="\u062c\u062d",c.\ufca8="\u062c\u0645",c.\ufca9="\u062d\u062c",c.\ufcaa="\u062d\u0645",c.\ufcab="\u062e\u062c",c.\ufcac="\u062e\u0645",c.\ufcad="\u0633\u062c",c.\ufcae="\u0633\u062d",c.\ufcaf="\u0633\u062e",c.\ufcb0="\u0633\u0645",c.\ufcb1="\u0635\u062d",c.\ufcb2="\u0635\u062e",c.\ufcb3="\u0635\u0645",c.\ufcb4="\u0636\u062c",c.\ufcb5="\u0636\u062d",c.\ufcb6="\u0636\u062e",c.\ufcb7="\u0636\u0645",c.\ufcb8="\u0637\u062d",c.\ufcb9="\u0638\u0645",c.\ufcba="\u0639\u062c",c.\ufcbb="\u0639\u0645",c.\ufcbc="\u063a\u062c",c.\ufcbd="\u063a\u0645",c.\ufcbe="\u0641\u062c",c.\ufcbf="\u0641\u062d",c.\ufcc0="\u0641\u062e",c.\ufcc1="\u0641\u0645",c.\ufcc2="\u0642\u062d",c.\ufcc3="\u0642\u0645",c.\ufcc4="\u0643\u062c",c.\ufcc5="\u0643\u062d",c.\ufcc6="\u0643\u062e",c.\ufcc7="\u0643\u0644",c.\ufcc8="\u0643\u0645",c.\ufcc9="\u0644\u062c",c.\ufcca="\u0644\u062d",c.\ufccb="\u0644\u062e",c.\ufccc="\u0644\u0645",c.\ufccd="\u0644\u0647",c.\ufcce="\u0645\u062c",c.\ufccf="\u0645\u062d",c.\ufcd0="\u0645\u062e",c.\ufcd1="\u0645\u0645",c.\ufcd2="\u0646\u062c",c.\ufcd3="\u0646\u062d",c.\ufcd4="\u0646\u062e",c.\ufcd5="\u0646\u0645",c.\ufcd6="\u0646\u0647",c.\ufcd7="\u0647\u062c",c.\ufcd8="\u0647\u0645",c.\ufcd9="\u0647\u0670",c.\ufcda="\u064a\u062c",c.\ufcdb="\u064a\u062d",c.\ufcdc="\u064a\u062e",c.\ufcdd="\u064a\u0645",c.\ufcde="\u064a\u0647",c.\ufcdf="\u0626\u0645",c.\ufce0="\u0626\u0647",c.\ufce1="\u0628\u0645",c.\ufce2="\u0628\u0647",c.\ufce3="\u062a\u0645",c.\ufce4="\u062a\u0647",c.\ufce5="\u062b\u0645",c.\ufce6="\u062b\u0647",c.\ufce7="\u0633\u0645",c.\ufce8="\u0633\u0647",c.\ufce9="\u0634\u0645",c.\ufcea="\u0634\u0647",c.\ufceb="\u0643\u0644",c.\ufcec="\u0643\u0645",c.\ufced="\u0644\u0645",c.\ufcee="\u0646\u0645",c.\ufcef="\u0646\u0647",c.\ufcf0="\u064a\u0645",c.\ufcf1="\u064a\u0647",c.\ufcf2="\u0640\u064e\u0651",c.\ufcf3="\u0640\u064f\u0651",c.\ufcf4="\u0640\u0650\u0651",c.\ufcf5="\u0637\u0649",c.\ufcf6="\u0637\u064a",c.\ufcf7="\u0639\u0649",c.\ufcf8="\u0639\u064a",c.\ufcf9="\u063a\u0649",c.\ufcfa="\u063a\u064a",c.\ufcfb="\u0633\u0649",c.\ufcfc="\u0633\u064a",c.\ufcfd="\u0634\u0649",c.\ufcfe="\u0634\u064a",c.\ufcff="\u062d\u0649",c.\ufd00="\u062d\u064a",c.\ufd01="\u062c\u0649",c.\ufd02="\u062c\u064a",c.\ufd03="\u062e\u0649",c.\ufd04="\u062e\u064a",c.\ufd05="\u0635\u0649",c.\ufd06="\u0635\u064a",c.\ufd07="\u0636\u0649",c.\ufd08="\u0636\u064a",c.\ufd09="\u0634\u062c",c.\ufd0a="\u0634\u062d",c.\ufd0b="\u0634\u062e",c.\ufd0c="\u0634\u0645",c.\ufd0d="\u0634\u0631",c.\ufd0e="\u0633\u0631",c.\ufd0f="\u0635\u0631",c.\ufd10="\u0636\u0631",c.\ufd11="\u0637\u0649",c.\ufd12="\u0637\u064a",c.\ufd13="\u0639\u0649",c.\ufd14="\u0639\u064a",c.\ufd15="\u063a\u0649",c.\ufd16="\u063a\u064a",c.\ufd17="\u0633\u0649",c.\ufd18="\u0633\u064a",c.\ufd19="\u0634\u0649",c.\ufd1a="\u0634\u064a",c.\ufd1b="\u062d\u0649",c.\ufd1c="\u062d\u064a",c.\ufd1d="\u062c\u0649",c.\ufd1e="\u062c\u064a",c.\ufd1f="\u062e\u0649",c.\ufd20="\u062e\u064a",c.\ufd21="\u0635\u0649",c.\ufd22="\u0635\u064a",c.\ufd23="\u0636\u0649",c.\ufd24="\u0636\u064a",c.\ufd25="\u0634\u062c",c.\ufd26="\u0634\u062d",c.\ufd27="\u0634\u062e",c.\ufd28="\u0634\u0645",c.\ufd29="\u0634\u0631",c.\ufd2a="\u0633\u0631",c.\ufd2b="\u0635\u0631",c.\ufd2c="\u0636\u0631",c.\ufd2d="\u0634\u062c",c.\ufd2e="\u0634\u062d",c.\ufd2f="\u0634\u062e",c.\ufd30="\u0634\u0645",c.\ufd31="\u0633\u0647",c.\ufd32="\u0634\u0647",c.\ufd33="\u0637\u0645",c.\ufd34="\u0633\u062c",c.\ufd35="\u0633\u062d",c.\ufd36="\u0633\u062e",c.\ufd37="\u0634\u062c",c.\ufd38="\u0634\u062d",c.\ufd39="\u0634\u062e",c.\ufd3a="\u0637\u0645",c.\ufd3b="\u0638\u0645",c.\ufd3c="\u0627\u064b",c.\ufd3d="\u0627\u064b",c.\ufd50="\u062a\u062c\u0645",c.\ufd51="\u062a\u062d\u062c",c.\ufd52="\u062a\u062d\u062c",c.\ufd53="\u062a\u062d\u0645",c.\ufd54="\u062a\u062e\u0645",c.\ufd55="\u062a\u0645\u062c",c.\ufd56="\u062a\u0645\u062d",c.\ufd57="\u062a\u0645\u062e",c.\ufd58="\u062c\u0645\u062d",c.\ufd59="\u062c\u0645\u062d",c.\ufd5a="\u062d\u0645\u064a",c.\ufd5b="\u062d\u0645\u0649",c.\ufd5c="\u0633\u062d\u062c",c.\ufd5d="\u0633\u062c\u062d",c.\ufd5e="\u0633\u062c\u0649",c.\ufd5f="\u0633\u0645\u062d",c.\ufd60="\u0633\u0645\u062d",c.\ufd61="\u0633\u0645\u062c",c.\ufd62="\u0633\u0645\u0645",c.\ufd63="\u0633\u0645\u0645",c.\ufd64="\u0635\u062d\u062d",c.\ufd65="\u0635\u062d\u062d",c.\ufd66="\u0635\u0645\u0645",c.\ufd67="\u0634\u062d\u0645",c.\ufd68="\u0634\u062d\u0645",c.\ufd69="\u0634\u062c\u064a",c.\ufd6a="\u0634\u0645\u062e",c.\ufd6b="\u0634\u0645\u062e",c.\ufd6c="\u0634\u0645\u0645",c.\ufd6d="\u0634\u0645\u0645",c.\ufd6e="\u0636\u062d\u0649",c.\ufd6f="\u0636\u062e\u0645",c.\ufd70="\u0636\u062e\u0645",c.\ufd71="\u0637\u0645\u062d",c.\ufd72="\u0637\u0645\u062d",c.\ufd73="\u0637\u0645\u0645",c.\ufd74="\u0637\u0645\u064a",c.\ufd75="\u0639\u062c\u0645",c.\ufd76="\u0639\u0645\u0645",c.\ufd77="\u0639\u0645\u0645",c.\ufd78="\u0639\u0645\u0649",c.\ufd79="\u063a\u0645\u0645",c.\ufd7a="\u063a\u0645\u064a",c.\ufd7b="\u063a\u0645\u0649",c.\ufd7c="\u0641\u062e\u0645",c.\ufd7d="\u0641\u062e\u0645",c.\ufd7e="\u0642\u0645\u062d",c.\ufd7f="\u0642\u0645\u0645",c.\ufd80="\u0644\u062d\u0645",c.\ufd81="\u0644\u062d\u064a",c.\ufd82="\u0644\u062d\u0649",c.\ufd83="\u0644\u062c\u062c",c.\ufd84="\u0644\u062c\u062c",c.\ufd85="\u0644\u062e\u0645",c.\ufd86="\u0644\u062e\u0645",c.\ufd87="\u0644\u0645\u062d",c.\ufd88="\u0644\u0645\u062d",c.\ufd89="\u0645\u062d\u062c",c.\ufd8a="\u0645\u062d\u0645",c.\ufd8b="\u0645\u062d\u064a",c.\ufd8c="\u0645\u062c\u062d",c.\ufd8d="\u0645\u062c\u0645",c.\ufd8e="\u0645\u062e\u062c",c.\ufd8f="\u0645\u062e\u0645",c.\ufd92="\u0645\u062c\u062e",c.\ufd93="\u0647\u0645\u062c",c.\ufd94="\u0647\u0645\u0645",c.\ufd95="\u0646\u062d\u0645",c.\ufd96="\u0646\u062d\u0649",c.\ufd97="\u0646\u062c\u0645",c.\ufd98="\u0646\u062c\u0645",c.\ufd99="\u0646\u062c\u0649",c.\ufd9a="\u0646\u0645\u064a",c.\ufd9b="\u0646\u0645\u0649",c.\ufd9c="\u064a\u0645\u0645",c.\ufd9d="\u064a\u0645\u0645",c.\ufd9e="\u0628\u062e\u064a",c.\ufd9f="\u062a\u062c\u064a",c.\ufda0="\u062a\u062c\u0649",c.\ufda1="\u062a\u062e\u064a",c.\ufda2="\u062a\u062e\u0649",c.\ufda3="\u062a\u0645\u064a",c.\ufda4="\u062a\u0645\u0649",c.\ufda5="\u062c\u0645\u064a",c.\ufda6="\u062c\u062d\u0649",c.\ufda7="\u062c\u0645\u0649",c.\ufda8="\u0633\u062e\u0649",c.\ufda9="\u0635\u062d\u064a",c.\ufdaa="\u0634\u062d\u064a",c.\ufdab="\u0636\u062d\u064a",c.\ufdac="\u0644\u062c\u064a",c.\ufdad="\u0644\u0645\u064a",c.\ufdae="\u064a\u062d\u064a",c.\ufdaf="\u064a\u062c\u064a",c.\ufdb0="\u064a\u0645\u064a",c.\ufdb1="\u0645\u0645\u064a",c.\ufdb2="\u0642\u0645\u064a",c.\ufdb3="\u0646\u062d\u064a",c.\ufdb4="\u0642\u0645\u062d",c.\ufdb5="\u0644\u062d\u0645",c.\ufdb6="\u0639\u0645\u064a",c.\ufdb7="\u0643\u0645\u064a",c.\ufdb8="\u0646\u062c\u062d",c.\ufdb9="\u0645\u062e\u064a",c.\ufdba="\u0644\u062c\u0645",c.\ufdbb="\u0643\u0645\u0645",c.\ufdbc="\u0644\u062c\u0645",c.\ufdbd="\u0646\u062c\u062d",c.\ufdbe="\u062c\u062d\u064a",c.\ufdbf="\u062d\u062c\u064a",c.\ufdc0="\u0645\u062c\u064a",c.\ufdc1="\u0641\u0645\u064a",c.\ufdc2="\u0628\u062d\u064a",c.\ufdc3="\u0643\u0645\u0645",c.\ufdc4="\u0639\u062c\u0645",c.\ufdc5="\u0635\u0645\u0645",c.\ufdc6="\u0633\u062e\u064a",c.\ufdc7="\u0646\u062c\u064a",c["\ufe49"]="\u203e",c["\ufe4a"]="\u203e",c["\ufe4b"]="\u203e",c["\ufe4c"]="\u203e",c["\ufe4d"]="_",c["\ufe4e"]="_",c["\ufe4f"]="_",c.\ufe80="\u0621",c.\ufe81="\u0622",c.\ufe82="\u0622",c.\ufe83="\u0623",c.\ufe84="\u0623",c.\ufe85="\u0624",c.\ufe86="\u0624",c.\ufe87="\u0625",c.\ufe88="\u0625",c.\ufe89="\u0626",c.\ufe8a="\u0626",c.\ufe8b="\u0626",c.\ufe8c="\u0626",c.\ufe8d="\u0627",c.\ufe8e="\u0627",c.\ufe8f="\u0628",c.\ufe90="\u0628",c.\ufe91="\u0628",c.\ufe92="\u0628",c.\ufe93="\u0629",c.\ufe94="\u0629",c.\ufe95="\u062a",c.\ufe96="\u062a",c.\ufe97="\u062a",c.\ufe98="\u062a",c.\ufe99="\u062b",c.\ufe9a="\u062b",c.\ufe9b="\u062b",c.\ufe9c="\u062b",c.\ufe9d="\u062c",c.\ufe9e="\u062c",c.\ufe9f="\u062c",c.\ufea0="\u062c",c.\ufea1="\u062d",c.\ufea2="\u062d",c.\ufea3="\u062d",c.\ufea4="\u062d",c.\ufea5="\u062e",c.\ufea6="\u062e",c.\ufea7="\u062e",c.\ufea8="\u062e",c.\ufea9="\u062f",c.\ufeaa="\u062f",c.\ufeab="\u0630",c.\ufeac="\u0630",c.\ufead="\u0631",c.\ufeae="\u0631",c.\ufeaf="\u0632",c.\ufeb0="\u0632",c.\ufeb1="\u0633",c.\ufeb2="\u0633",c.\ufeb3="\u0633",c.\ufeb4="\u0633",c.\ufeb5="\u0634",c.\ufeb6="\u0634",c.\ufeb7="\u0634",c.\ufeb8="\u0634",c.\ufeb9="\u0635",c.\ufeba="\u0635",c.\ufebb="\u0635",c.\ufebc="\u0635",c.\ufebd="\u0636",c.\ufebe="\u0636",c.\ufebf="\u0636",c.\ufec0="\u0636",c.\ufec1="\u0637",c.\ufec2="\u0637",c.\ufec3="\u0637",c.\ufec4="\u0637",c.\ufec5="\u0638",c.\ufec6="\u0638",c.\ufec7="\u0638",c.\ufec8="\u0638",c.\ufec9="\u0639",c.\ufeca="\u0639",c.\ufecb="\u0639",c.\ufecc="\u0639",c.\ufecd="\u063a",c.\ufece="\u063a",c.\ufecf="\u063a",c.\ufed0="\u063a",c.\ufed1="\u0641",c.\ufed2="\u0641",c.\ufed3="\u0641",c.\ufed4="\u0641",c.\ufed5="\u0642",c.\ufed6="\u0642",c.\ufed7="\u0642",c.\ufed8="\u0642",c.\ufed9="\u0643",c.\ufeda="\u0643",c.\ufedb="\u0643",c.\ufedc="\u0643",c.\ufedd="\u0644",c.\ufede="\u0644",c.\ufedf="\u0644",c.\ufee0="\u0644",c.\ufee1="\u0645",c.\ufee2="\u0645",c.\ufee3="\u0645",c.\ufee4="\u0645",c.\ufee5="\u0646",c.\ufee6="\u0646",c.\ufee7="\u0646",c.\ufee8="\u0646",c.\ufee9="\u0647",c.\ufeea="\u0647",c.\ufeeb="\u0647",c.\ufeec="\u0647",c.\ufeed="\u0648",c.\ufeee="\u0648",c.\ufeef="\u0649",c.\ufef0="\u0649",c.\ufef1="\u064a",c.\ufef2="\u064a",c.\ufef3="\u064a",c.\ufef4="\u064a",c.\ufef5="\u0644\u0622",c.\ufef6="\u0644\u0622",c.\ufef7="\u0644\u0623",c.\ufef8="\u0644\u0623",c.\ufef9="\u0644\u0625",c.\ufefa="\u0644\u0625",c.\ufefb="\u0644\u0627",c.\ufefc="\u0644\u0627"});se.mapSpecialUnicodeValues=function ee(c){return c>=65520&&c<=65535?0:c>=62976&&c<=63743?fe()[c]||c:173===c?45:c},se.reverseIfRtl=function f(c){var $=c.length;if($<=1||!function te(c){var $=V[13];return c>=$.begin&&c<$.end||c>=($=V[11]).begin&&c<$.end}(c.charCodeAt(0)))return c;for(var ae="",oe=$-1;oe>=0;oe--)ae+=c[oe];return ae},se.getUnicodeRangeFor=function H(c){for(var $=0,ae=V.length;$<ae;$++){var oe=V[$];if(c>=oe.begin&&c<oe.end)return $}return-1},se.getNormalizedUnicodes=re,se.getUnicodeForGlyph=function e(c,$){var ae=$[c];if(void 0!==ae)return ae;if(!c)return-1;if("u"===c[0]){var W,oe=c.length;if(7===oe&&"n"===c[1]&&"i"===c[2])W=c.substring(3);else{if(!(oe>=5&&oe<=7))return-1;W=c.substring(1)}if(W===W.toUpperCase()&&(ae=parseInt(W,16))>=0)return ae}return-1}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.FontRendererFactory=void 0;var k=y(2),fe=y(31),ee=y(34),e=y(33),V=y(12),H=function(){function re(C,P){return C[P]<<24|C[P+1]<<16|C[P+2]<<8|C[P+3]}function f(C,P){return C[P]<<8|C[P+1]}function c(C){const P=C.length;let F=32768;return P<1240?F=107:P<33900&&(F=1131),F}function $(C,P,F){var E,x,p,I=1===f(C,P+2)?re(C,P+8):re(C,P+16),j=f(C,P+I);if(4===j){f(C,P+I+2);var m=f(C,P+I+6)>>1;for(x=P+I+14,E=[],p=0;p<m;p++,x+=2)E[p]={end:f(C,x)};for(x+=2,p=0;p<m;p++,x+=2)E[p].start=f(C,x);for(p=0;p<m;p++,x+=2)E[p].idDelta=f(C,x);for(p=0;p<m;p++,x+=2){var _=f(C,x);if(0!==_){E[p].ids=[];for(var R=0,G=E[p].end-E[p].start+1;R<G;R++)E[p].ids[R]=f(C,x+_),_+=2}}return E}if(12===j){re(C,P+I+4);var K=re(C,P+I+12);for(x=P+I+16,E=[],p=0;p<K;p++)E.push({start:re(C,x),end:re(C,x+4),idDelta:re(C,x+8)-re(C,x)}),x+=12;return E}throw new k.FormatError(`unsupported cmap: ${j}`)}function ae(C,P,F,I){var x=new fe.CFFParser(new V.Stream(C,P,F-P),{},I).parse();return{glyphs:x.charStrings.objects,subrs:x.topDict.privateDict&&x.topDict.privateDict.subrsIndex&&x.topDict.privateDict.subrsIndex.objects,gsubrs:x.globalSubrIndex&&x.globalSubrIndex.objects,isCFFCIDFont:x.isCIDFont,fdSelect:x.fdSelect,fdArray:x.fdArray}}function W(C,P){for(var F=P.codePointAt(0),I=0,j=0,E=C.length-1;j<E;){var x=j+E+1>>1;F<C[x].start?E=x-1:j=x}return C[j].start<=F&&F<=C[j].end&&(I=C[j].idDelta+(C[j].ids?C[j].ids[F-C[j].start]:F)&65535),{charCode:F,glyphId:I}}function N(C,P,F){function j(Ne,We){P.push({cmd:"lineTo",args:[Ne,We]})}function E(Ne,We,Xe,Qe){P.push({cmd:"quadraticCurveTo",args:[Ne,We,Xe,Qe]})}var m,x=0,p=(C[x]<<24|C[x+1]<<16)>>16,_=0,R=0;if(x+=10,p<0)do{m=C[x]<<8|C[x+1];var K,U,G=C[x+2]<<8|C[x+3];x+=4,1&m?(K=(C[x]<<24|C[x+1]<<16)>>16,U=(C[x+2]<<24|C[x+3]<<16)>>16,x+=4):(K=C[x++],U=C[x++]),2&m?(_=K,R=U):(_=0,R=0);var z=1,L=1,S=0,B=0;8&m?(z=L=(C[x]<<24|C[x+1]<<16)/1073741824,x+=2):64&m?(z=(C[x]<<24|C[x+1]<<16)/1073741824,L=(C[x+2]<<24|C[x+3]<<16)/1073741824,x+=4):128&m&&(z=(C[x]<<24|C[x+1]<<16)/1073741824,S=(C[x+2]<<24|C[x+3]<<16)/1073741824,B=(C[x+4]<<24|C[x+5]<<16)/1073741824,L=(C[x+6]<<24|C[x+7]<<16)/1073741824,x+=8);var J=F.glyphs[G];J&&(P.push({cmd:"save"}),P.push({cmd:"transform",args:[z,S,B,L,_,R]}),N(J,P,F),P.push({cmd:"restore"}))}while(32&m);else{var ce,pe,ie=[];for(ce=0;ce<p;ce++)ie.push(C[x]<<8|C[x+1]),x+=2;x+=2+(C[x]<<8|C[x+1]);for(var Te=ie[ie.length-1]+1,_e=[];_e.length<Te;){var we=1;for(8&(m=C[x++])&&(we+=C[x++]);we-- >0;)_e.push({flags:m})}for(ce=0;ce<Te;ce++){switch(18&_e[ce].flags){case 0:_+=(C[x]<<24|C[x+1]<<16)>>16,x+=2;break;case 2:_-=C[x++];break;case 18:_+=C[x++]}_e[ce].x=_}for(ce=0;ce<Te;ce++){switch(36&_e[ce].flags){case 0:R+=(C[x]<<24|C[x+1]<<16)>>16,x+=2;break;case 4:R-=C[x++];break;case 36:R+=C[x++]}_e[ce].y=R}var De=0;for(x=0;x<p;x++){var xe=ie[x],Ce=_e.slice(De,xe+1);if(1&Ce[0].flags)Ce.push(Ce[0]);else if(1&Ce[Ce.length-1].flags)Ce.unshift(Ce[Ce.length-1]);else{var Me={flags:1,x:(Ce[0].x+Ce[Ce.length-1].x)/2,y:(Ce[0].y+Ce[Ce.length-1].y)/2};Ce.unshift(Me),Ce.push(Me)}for(P.push({cmd:"moveTo",args:[Ce[0].x,Ce[0].y]}),ce=1,pe=Ce.length;ce<pe;ce++)1&Ce[ce].flags?j(Ce[ce].x,Ce[ce].y):1&Ce[ce+1].flags?(E(Ce[ce].x,Ce[ce].y,Ce[ce+1].x,Ce[ce+1].y),ce++):E(Ce[ce].x,Ce[ce].y,(Ce[ce].x+Ce[ce+1].x)/2,(Ce[ce].y+Ce[ce+1].y)/2);De=xe+1}}}function O(C,P,F,I){function j(K,U){P.push({cmd:"moveTo",args:[K,U]})}function E(K,U){P.push({cmd:"lineTo",args:[K,U]})}function x(K,U,z,L,S,B){P.push({cmd:"bezierCurveTo",args:[K,U,z,L,S,B]})}var p=[],m=0,_=0,R=0;!function G(K){for(var U=0;U<K.length;){var S,B,J,ie,ce,pe,Te,_e,z=!1,L=K[U++];switch(L){case 1:case 3:case 18:case 23:R+=p.length>>1,z=!0;break;case 4:_+=p.pop(),j(m,_),z=!0;break;case 5:for(;p.length>0;)m+=p.shift(),_+=p.shift(),E(m,_);break;case 6:for(;p.length>0&&(E(m+=p.shift(),_),0!==p.length);)_+=p.shift(),E(m,_);break;case 7:for(;p.length>0&&(_+=p.shift(),E(m,_),0!==p.length);)E(m+=p.shift(),_);break;case 8:for(;p.length>0;)S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m,_);break;case 10:if(Te=p.pop(),_e=null,F.isCFFCIDFont){const Ne=F.fdSelect.getFDIndex(I);if(Ne>=0&&Ne<F.fdArray.length){const We=F.fdArray[Ne];let Xe;We.privateDict&&We.privateDict.subrsIndex&&(Xe=We.privateDict.subrsIndex.objects),Xe&&(_e=Xe[Te+=c(Xe)])}else(0,k.warn)("Invalid fd index for glyph index.")}else _e=F.subrs[Te+F.subrsBias];_e&&G(_e);break;case 11:return;case 12:switch(L=K[U++]){case 34:B=(S=m+p.shift())+p.shift(),ce=_+p.shift(),m=B+p.shift(),x(S,_,B,ce,m,ce),B=(S=m+p.shift())+p.shift(),m=B+p.shift(),x(S,ce,B,_,m,_);break;case 35:S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m,_),S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m,_),p.pop();break;case 36:x(S=m+p.shift(),ce=_+p.shift(),B=S+p.shift(),pe=ce+p.shift(),m=B+p.shift(),pe),x(S=m+p.shift(),pe,B=S+p.shift(),pe+p.shift(),m=B+p.shift(),_);break;case 37:var we=m,De=_;S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m,_),S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B,_=ie,Math.abs(m-we)>Math.abs(_-De)?m+=p.shift():_+=p.shift(),x(S,J,B,ie,m,_);break;default:throw new k.FormatError(`unknown operator: 12 ${L}`)}break;case 14:if(p.length>=4){var xe=p.pop(),Ce=p.pop();_=p.pop(),m=p.pop(),P.push({cmd:"save"}),P.push({cmd:"translate",args:[m,_]});var Me=W(F.cmap,String.fromCharCode(F.glyphNameMap[e.StandardEncoding[xe]]));O(F.glyphs[Me.glyphId],P,F,Me.glyphId),P.push({cmd:"restore"}),Me=W(F.cmap,String.fromCharCode(F.glyphNameMap[e.StandardEncoding[Ce]])),O(F.glyphs[Me.glyphId],P,F,Me.glyphId)}return;case 19:case 20:U+=(R+=p.length>>1)+7>>3,z=!0;break;case 21:_+=p.pop(),j(m+=p.pop(),_),z=!0;break;case 22:j(m+=p.pop(),_),z=!0;break;case 24:for(;p.length>2;)S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m,_);m+=p.shift(),_+=p.shift(),E(m,_);break;case 25:for(;p.length>6;)m+=p.shift(),_+=p.shift(),E(m,_);S=m+p.shift(),J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m,_);break;case 26:for(p.length%2&&(m+=p.shift());p.length>0;)S=m,J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B,_=ie+p.shift(),x(S,J,B,ie,m,_);break;case 27:for(p.length%2&&(_+=p.shift());p.length>0;)x(S=m+p.shift(),J=_,B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie);break;case 28:p.push((K[U]<<24|K[U+1]<<16)>>16),U+=2;break;case 29:Te=p.pop()+F.gsubrsBias,(_e=F.gsubrs[Te])&&G(_e);break;case 30:for(;p.length>0&&(S=m,J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+(1===p.length?p.shift():0),x(S,J,B,ie,m,_),0!==p.length);)S=m+p.shift(),J=_,B=S+p.shift(),ie=J+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m=B+(1===p.length?p.shift():0),_);break;case 31:for(;p.length>0&&(S=m+p.shift(),J=_,B=S+p.shift(),ie=J+p.shift(),_=ie+p.shift(),x(S,J,B,ie,m=B+(1===p.length?p.shift():0),_),0!==p.length);)S=m,J=_+p.shift(),B=S+p.shift(),ie=J+p.shift(),m=B+p.shift(),_=ie+(1===p.length?p.shift():0),x(S,J,B,ie,m,_);break;default:if(L<32)throw new k.FormatError(`unknown operator: ${L}`);L<247?p.push(L-139):L<251?p.push(256*(L-247)+K[U++]+108):L<255?p.push(256*-(L-251)-K[U++]-108):(p.push((K[U]<<24|K[U+1]<<16|K[U+2]<<8|K[U+3])/65536),U+=4)}z&&(p.length=0)}}(C)}const M=[];class A{constructor(P){this.constructor===A&&(0,k.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=P,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(P){const F=W(this.cmap,P);let I=this.compiledGlyphs[F.glyphId];return I||(I=this.compileGlyph(this.glyphs[F.glyphId],F.glyphId),this.compiledGlyphs[F.glyphId]=I),void 0===this.compiledCharCodeToGlyphId[F.charCode]&&(this.compiledCharCodeToGlyphId[F.charCode]=F.glyphId),I}compileGlyph(P,F){if(!P||0===P.length||14===P[0])return M;let I=this.fontMatrix;if(this.isCFFCIDFont){const E=this.fdSelect.getFDIndex(F);E>=0&&E<this.fdArray.length?I=this.fdArray[E].getByName("FontMatrix")||k.FONT_IDENTITY_MATRIX:(0,k.warn)("Invalid fd index for glyph index.")}const j=[];return j.push({cmd:"save"}),j.push({cmd:"transform",args:I.slice()}),j.push({cmd:"scale",args:["size","-size"]}),this.compileGlyphImpl(P,j,F),j.push({cmd:"restore"}),j}compileGlyphImpl(){(0,k.unreachable)("Children classes should implement this.")}hasBuiltPath(P){const F=W(this.cmap,P);return void 0!==this.compiledGlyphs[F.glyphId]&&void 0!==this.compiledCharCodeToGlyphId[F.charCode]}}class b extends A{constructor(P,F,I){super(I||[488e-6,0,0,488e-6,0,0]),this.glyphs=P,this.cmap=F}compileGlyphImpl(P,F){N(P,F,this)}}class q extends A{constructor(P,F,I,j){super(I||[.001,0,0,.001,0,0]),this.glyphs=P.glyphs,this.gsubrs=P.gsubrs||[],this.subrs=P.subrs||[],this.cmap=F,this.glyphNameMap=j||(0,ee.getGlyphsUnicode)(),this.gsubrsBias=c(this.gsubrs),this.subrsBias=c(this.subrs),this.isCFFCIDFont=P.isCFFCIDFont,this.fdSelect=P.fdSelect,this.fdArray=P.fdArray}compileGlyphImpl(P,F,I){O(P,F,this,I)}}return{create:function(P,F){for(var j,E,x,p,m,_,I=new Uint8Array(P.data),R=f(I,4),G=0,K=12;G<R;G++,K+=16){var U=(0,k.bytesToString)(I.subarray(K,K+4)),z=re(I,K+8),L=re(I,K+12);switch(U){case"cmap":j=$(I,z);break;case"glyf":E=I.subarray(z,z+L);break;case"loca":x=I.subarray(z,z+L);break;case"head":_=f(I,z+18),m=f(I,z+50);break;case"CFF ":p=ae(I,z,z+L,F)}}if(E){var S=_?[1/_,0,0,1/_,0,0]:P.fontMatrix;return new b(function oe(C,P,F){var I,j;F?(I=4,j=function(R,G){return R[G]<<24|R[G+1]<<16|R[G+2]<<8|R[G+3]}):(I=2,j=function(R,G){return R[G]<<9|R[G+1]<<1});for(var E=[],x=j(P,0),p=I;p<P.length;p+=I){var m=j(P,p);E.push(C.subarray(x,m)),x=m}return E}(E,x,m),j,S)}return new q(p,j,P.fontMatrix,P.glyphNameMap)}}}();se.FontRendererFactory=H},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.Type1Parser=void 0;var k=y(33),fe=y(8),ee=y(12),e=y(2),H=function(){var f_vmoveto=[4],f_rlineto=[5],f_hlineto=[6],f_vlineto=[7],f_rrcurveto=[8],f_flex=[12,35],f_endchar=[14],f_rmoveto=[21],f_hmoveto=[22],f_vhcurveto=[30],f_hvcurveto=[31];function c(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}return c.prototype={convert:function(ae,oe,W){for(var M,A,b,N=ae.length,O=!1,q=0;q<N;q++){var C=ae[q];if(C<32){switch(12===C&&(C=(C<<8)+ae[++q]),C){case 1:case 3074:case 3:case 3073:case 9:case 3072:case 3105:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){O=!0;break}var P=this.stack.pop();this.stack.push(0,P);break}O=this.executeCommand(1,f_vmoveto);break;case 5:O=this.executeCommand(2,f_rlineto);break;case 6:O=this.executeCommand(1,f_hlineto);break;case 7:O=this.executeCommand(1,f_vlineto);break;case 8:O=this.executeCommand(6,f_rrcurveto);break;case 10:if(this.stack.length<1){O=!0;break}if(!oe[b=this.stack.pop()]){O=!0;break}O=this.convert(oe[b],oe,W);break;case 11:return O;case 13:if(this.stack.length<2){O=!0;break}M=this.stack.pop(),A=this.stack.pop(),this.lsb=A,this.width=M,this.stack.push(M,A),O=this.executeCommand(2,f_hmoveto);break;case 14:this.output.push(f_endchar[0]);break;case 21:if(this.flexing)break;O=this.executeCommand(2,f_rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break}O=this.executeCommand(1,f_hmoveto);break;case 30:O=this.executeCommand(4,f_vhcurveto);break;case 31:O=this.executeCommand(4,f_hvcurveto);break;case 3078:if(W){const p=this.stack[this.stack.length-5];this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-p,O=this.executeCommand(0,f_endchar)}else O=this.executeCommand(4,f_endchar);break;case 3079:if(this.stack.length<4){O=!0;break}this.stack.pop(),M=this.stack.pop();var F=this.stack.pop();A=this.stack.pop(),this.lsb=A,this.width=M,this.stack.push(M,A,F),O=this.executeCommand(3,f_rmoveto);break;case 3084:if(this.stack.length<2){O=!0;break}var I=this.stack.pop(),j=this.stack.pop();this.stack.push(j/I);break;case 3088:if(this.stack.length<2){O=!0;break}b=this.stack.pop();var E=this.stack.pop();if(0===b&&3===E){var x=this.stack.splice(this.stack.length-17,17);this.stack.push(x[2]+x[0],x[3]+x[1],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14]),O=this.executeCommand(13,f_flex,!0),this.flexing=!1,this.stack.push(x[15],x[16])}else 1===b&&0===E&&(this.flexing=!0);break;case 3089:break;default:(0,e.warn)('Unknown type 1 charstring command of "'+C+'"')}if(O)break}else C<=246?C-=139:C=C<=250?256*(C-247)+ae[++q]+108:C<=254?-256*(C-251)-ae[++q]-108:(255&ae[++q])<<24|(255&ae[++q])<<16|(255&ae[++q])<<8|(255&ae[++q])<<0,this.stack.push(C)}return O},executeCommand($,ae,oe){var W=this.stack.length;if($>W)return!0;for(var N=W-$,O=N;O<W;O++){var M=this.stack[O];Number.isInteger(M)?this.output.push(28,M>>8&255,255&M):this.output.push(255,(M=65536*M|0)>>24&255,M>>16&255,M>>8&255,255&M)}return this.output.push.apply(this.output,ae),oe?this.stack.splice(N,$):this.stack.length=0,!1}},c}(),te=function(){function $(O){return O>=48&&O<=57||O>=65&&O<=70||O>=97&&O<=102}function ae(O,M,A){if(A>=O.length)return new Uint8Array(0);var P,F,b=0|M;for(P=0;P<A;P++)b=52845*(O[P]+b)+22719&65535;var I=O.length-A,j=new Uint8Array(I);for(P=A,F=0;F<I;P++,F++){var E=O[P];j[F]=E^b>>8,b=52845*(E+b)+22719&65535}return j}function W(O){return 47===O||91===O||93===O||123===O||125===O||40===O||41===O}function N(O,M,A){if(M){var b=O.getBytes(),q=!(($(b[0])||(0,fe.isWhiteSpace)(b[0]))&&$(b[1])&&$(b[2])&&$(b[3])&&$(b[4])&&$(b[5])&&$(b[6])&&$(b[7]));O=new ee.Stream(q?ae(b,55665,4):function oe(O,M,A){var j,E,b=0|M,P=O.length,I=new Uint8Array(P>>>1);for(j=0,E=0;j<P;j++){var x=O[j];if($(x)){j++;for(var p;j<P&&!$(p=O[j]);)j++;if(j<P){var m=parseInt(String.fromCharCode(x,p),16);I[E++]=m^b>>8,b=52845*(m+b)+22719&65535}}}return I.slice(A,E)}(b,55665,4))}this.seacAnalysisEnabled=!!A,this.stream=O,this.nextChar()}return N.prototype={readNumberArray:function(){this.getToken();for(var M=[];;){var A=this.getToken();if(null===A||"]"===A||"}"===A)break;M.push(parseFloat(A||0))}return M},readNumber:function(){var M=this.getToken();return parseFloat(M||0)},readInt:function(){var M=this.getToken();return 0|parseInt(M||0,10)},readBoolean:function(){return"true"===this.getToken()?1:0},nextChar:function(){return this.currentChar=this.stream.getByte()},getToken:function(){for(var M=!1,A=this.currentChar;;){if(-1===A)return null;if(M)(10===A||13===A)&&(M=!1);else if(37===A)M=!0;else if(!(0,fe.isWhiteSpace)(A))break;A=this.nextChar()}if(W(A))return this.nextChar(),String.fromCharCode(A);var b="";do{b+=String.fromCharCode(A),A=this.nextChar()}while(A>=0&&!(0,fe.isWhiteSpace)(A)&&!W(A));return b},readCharStrings:function(M,A){return-1===A?M:ae(M,4330,A)},extractFontProgram:function(M){var A=this.stream,b=[],q=[],C=Object.create(null);C.lenIV=4;for(var F,I,j,x,P={subrs:[],charstrings:[],properties:{privateData:C}};null!==(F=this.getToken());)if("/"===F)switch(F=this.getToken(),F){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();null!==(F=this.getToken())&&"end"!==F;)if("/"===F){var p=this.getToken();I=this.readInt(),this.getToken(),j=I>0?A.getBytes(I):new Uint8Array(0),x=this.readCharStrings(j,P.properties.privateData.lenIV),this.nextChar(),"noaccess"===(F=this.getToken())&&this.getToken(),q.push({glyph:p,encoded:x})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){const U=this.readInt();I=this.readInt(),this.getToken(),j=I>0?A.getBytes(I):new Uint8Array(0),x=this.readCharStrings(j,P.properties.privateData.lenIV),this.nextChar(),"noaccess"===(F=this.getToken())&&this.getToken(),b[U]=x}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":this.readNumberArray();break;case"StemSnapH":case"StemSnapV":P.properties.privateData[F]=this.readNumberArray();break;case"StdHW":case"StdVW":P.properties.privateData[F]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":P.properties.privateData[F]=this.readNumber();break;case"ForceBold":P.properties.privateData[F]=this.readBoolean()}for(var _=0;_<q.length;_++){p=q[_].glyph,x=q[_].encoded;var R=new H,G=R.convert(x,b,this.seacAnalysisEnabled),K=R.output;G&&(K=[14]);const U={glyphName:p,charstring:K,width:R.width,lsb:R.lsb,seac:R.seac};if(".notdef"===p?P.charstrings.unshift(U):P.charstrings.push(U),M.builtInEncoding){const z=M.builtInEncoding.indexOf(p);z>-1&&void 0===M.widths[z]&&z>=M.firstChar&&z<=M.lastChar&&(M.widths[z]=R.width)}}return P},extractFontHeader:function(M){for(var A;null!==(A=this.getToken());)if("/"===A)switch(A=this.getToken(),A){case"FontMatrix":var b=this.readNumberArray();M.fontMatrix=b;break;case"Encoding":var C,q=this.getToken();if(/^\d+$/.test(q)){C=[];var P=0|parseInt(q,10);this.getToken();for(var F=0;F<P;F++){for(A=this.getToken();"dup"!==A&&"def"!==A;)if(null===(A=this.getToken()))return;if("def"===A)break;var I=this.readInt();this.getToken();var j=this.getToken();C[I]=j,this.getToken()}}else C=(0,k.getEncoding)(q);M.builtInEncoding=C;break;case"FontBBox":var E=this.readNumberArray();M.ascent=Math.max(E[3],E[1]),M.descent=Math.min(E[1],E[3]),M.ascentScaled=!0}}},N}();se.Type1Parser=te},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getTilingPatternIR=function re(f,c,$){const ae=c.getArray("Matrix"),oe=k.Util.normalizeRect(c.getArray("BBox")),W=c.get("XStep"),N=c.get("YStep"),O=c.get("PaintType"),M=c.get("TilingType");if(oe[2]-oe[0]==0||oe[3]-oe[1]==0)throw new k.FormatError(`Invalid getTilingPatternIR /BBox array: [${oe}].`);return["TilingPattern",$,f,ae,oe,W,N,O,M]},se.Pattern=void 0;var k=y(2),fe=y(23),ee=y(5),e=y(8),V_AXIAL=2,V_RADIAL=3,V_FREE_FORM_MESH=4,V_LATTICE_FORM_MESH=5,V_COONS_PATCH_MESH=6,V_TENSOR_PATCH_MESH=7,H=function(){function c(){(0,k.unreachable)("should not call Pattern constructor")}return c.prototype={getPattern:function(ae){(0,k.unreachable)(`Should not call Pattern.getStyle: ${ae}`)}},c.parseShading=function($,ae,oe,W,N,O,M){var A=(0,ee.isStream)($)?$.dict:$,b=A.get("ShadingType");try{switch(b){case V_AXIAL:case V_RADIAL:return new te.RadialAxial(A,ae,oe,W,O,M);case V_FREE_FORM_MESH:case V_LATTICE_FORM_MESH:case V_COONS_PATCH_MESH:case V_TENSOR_PATCH_MESH:return new te.Mesh($,ae,oe,W,O,M);default:throw new k.FormatError("Unsupported ShadingType: "+b)}}catch(q){if(q instanceof e.MissingDataException)throw q;return N.send("UnsupportedFeature",{featureId:k.UNSUPPORTED_FEATURES.shadingPattern}),(0,k.warn)(q),new te.Dummy}},c}();se.Pattern=H;var te={};te.SMALL_NUMBER=1e-6,te.RadialAxial=function(){function c($,ae,oe,W,N,O){this.matrix=ae,this.coordsArr=$.getArray("Coords"),this.shadingType=$.get("ShadingType"),this.type="Pattern";const M=fe.ColorSpace.parse({cs:$.getRaw("ColorSpace")||$.getRaw("CS"),xref:oe,resources:W,pdfFunctionFactory:N,localColorSpaceCache:O});this.cs=M;const A=$.getArray("BBox");this.bbox=Array.isArray(A)&&4===A.length?k.Util.normalizeRect(A):null;var b=0,q=1;if($.has("Domain")){var C=$.getArray("Domain");b=C[0],q=C[1]}var P=!1,F=!1;if($.has("Extend")){var I=$.getArray("Extend");P=I[0],F=I[1]}if(!(this.shadingType!==V_RADIAL||P&&F)){var j=this.coordsArr[0],E=this.coordsArr[1],x=this.coordsArr[2],p=this.coordsArr[3],m=this.coordsArr[4],_=this.coordsArr[5],R=Math.sqrt((j-p)*(j-p)+(E-m)*(E-m));x<=_+R&&_<=x+R&&(0,k.warn)("Unsupported radial gradient.")}this.extendStart=P,this.extendEnd=F;var G=$.getRaw("Function"),K=N.createFromArray(G);const z=(q-b)/10;var L=this.colorStops=[];if(b>=q||z<=0)(0,k.info)("Bad shading domain.");else{var J,S=new Float32Array(M.numComps),B=new Float32Array(1);for(let pe=0;pe<=10;pe++){B[0]=b+pe*z,K(B,0,S,0),J=M.getRgb(S,0);var ie=k.Util.makeCssRgb(J[0],J[1],J[2]);L.push([pe/10,ie])}var ce="transparent";$.has("Background")&&(J=M.getRgb($.get("Background"),0),ce=k.Util.makeCssRgb(J[0],J[1],J[2])),P||(L.unshift([0,ce]),L[1][0]+=te.SMALL_NUMBER),F||(L[L.length-1][0]-=te.SMALL_NUMBER,L.push([1,ce])),this.colorStops=L}}return c.prototype={getIR:function(){var W,N,O,M,A,ae=this.coordsArr,oe=this.shadingType;oe===V_AXIAL?(N=[ae[0],ae[1]],O=[ae[2],ae[3]],M=null,A=null,W="axial"):oe===V_RADIAL?(N=[ae[0],ae[1]],O=[ae[3],ae[4]],M=ae[2],A=ae[5],W="radial"):(0,k.unreachable)(`getPattern type unknown: ${oe}`);var b=this.matrix;if(b&&(N=k.Util.applyTransform(N,b),O=k.Util.applyTransform(O,b),oe===V_RADIAL)){var q=k.Util.singularValueDecompose2dScale(b);M*=q[0],A*=q[1]}return["RadialAxial",W,this.bbox,this.colorStops,N,O,M,A]}},c}(),te.Mesh=function(){function c(F,I){this.stream=F,this.context=I,this.buffer=0,this.bufferLength=0,this.tmpCompsBuf=new Float32Array(I.numComps),this.tmpCsCompsBuf=I.colorFn?new Float32Array(I.colorSpace.numComps):this.tmpCompsBuf}c.prototype={get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;var F=this.stream.getByte();return!(F<0||(this.buffer=F,this.bufferLength=8,0))},readBits:function(I){var j=this.buffer,E=this.bufferLength;if(32===I){if(0===E)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;j=j<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();var x=this.stream.getByte();return this.buffer=x&(1<<E)-1,(j<<8-E|(255&x)>>E)>>>0}if(8===I&&0===E)return this.stream.getByte();for(;E<I;)j=j<<8|this.stream.getByte(),E+=8;return this.bufferLength=E-=I,this.buffer=j&(1<<E)-1,j>>E},align:function(){this.buffer=0,this.bufferLength=0},readFlag:function(){return this.readBits(this.context.bitsPerFlag)},readCoordinate:function(){var I=this.context.bitsPerCoordinate,j=this.readBits(I),E=this.readBits(I),x=this.context.decode,p=I<32?1/((1<<I)-1):2.3283064365386963e-10;return[j*p*(x[1]-x[0])+x[0],E*p*(x[3]-x[2])+x[2]]},readComponents:function(){for(var I=this.context.numComps,j=this.context.bitsPerComponent,E=j<32?1/((1<<j)-1):2.3283064365386963e-10,x=this.context.decode,p=this.tmpCompsBuf,m=0,_=4;m<I;m++,_+=2){var R=this.readBits(j);p[m]=R*E*(x[_+1]-x[_])+x[_]}var G=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(p,0,G,0),this.context.colorSpace.getRgb(G,0)}};var j,oe=3,W=20,N=20,O=(j=[],function(x){return j[x]||(j[x]=function I(E){for(var x=[],p=0;p<=E;p++){var m=p/E,_=1-m;x.push(new Float32Array([_*_*_,3*m*_*_,3*m*m*_,m*m*m]))}return x}(x)),j[x]});function M(F,I){var j=F.figures[I];(0,k.assert)("patch"===j.type,"Unexpected patch mesh figure");var E=F.coords,x=F.colors,p=j.coords,m=j.colors,_=Math.min(E[p[0]][0],E[p[3]][0],E[p[12]][0],E[p[15]][0]),R=Math.min(E[p[0]][1],E[p[3]][1],E[p[12]][1],E[p[15]][1]),G=Math.max(E[p[0]][0],E[p[3]][0],E[p[12]][0],E[p[15]][0]),K=Math.max(E[p[0]][1],E[p[3]][1],E[p[12]][1],E[p[15]][1]),U=Math.ceil((G-_)*N/(F.bounds[2]-F.bounds[0]));U=Math.max(oe,Math.min(W,U));var z=Math.ceil((K-R)*N/(F.bounds[3]-F.bounds[1]));z=Math.max(oe,Math.min(W,z));for(var L=U+1,S=new Int32Array((z+1)*L),B=new Int32Array((z+1)*L),J=0,ie=new Uint8Array(3),ce=new Uint8Array(3),pe=x[m[0]],ye=x[m[1]],Te=x[m[2]],_e=x[m[3]],we=O(z),De=O(U),xe=0;xe<=z;xe++){ie[0]=(pe[0]*(z-xe)+Te[0]*xe)/z|0,ie[1]=(pe[1]*(z-xe)+Te[1]*xe)/z|0,ie[2]=(pe[2]*(z-xe)+Te[2]*xe)/z|0,ce[0]=(ye[0]*(z-xe)+_e[0]*xe)/z|0,ce[1]=(ye[1]*(z-xe)+_e[1]*xe)/z|0,ce[2]=(ye[2]*(z-xe)+_e[2]*xe)/z|0;for(var Ce=0;Ce<=U;Ce++,J++)if(0!==xe&&xe!==z||0!==Ce&&Ce!==U){for(var Me=0,Ne=0,We=0,Xe=0;Xe<=3;Xe++)for(var Qe=0;Qe<=3;Qe++,We++){var Ye=we[xe][Xe]*De[Ce][Qe];Me+=E[p[We]][0]*Ye,Ne+=E[p[We]][1]*Ye}S[J]=E.length,E.push([Me,Ne]),B[J]=x.length;var Je=new Uint8Array(3);Je[0]=(ie[0]*(U-Ce)+ce[0]*Ce)/U|0,Je[1]=(ie[1]*(U-Ce)+ce[1]*Ce)/U|0,Je[2]=(ie[2]*(U-Ce)+ce[2]*Ce)/U|0,x.push(Je)}}S[0]=p[0],B[0]=m[0],S[U]=p[3],B[U]=m[1],S[L*z]=p[12],B[L*z]=m[2],S[L*z+U]=p[15],B[L*z+U]=m[3],F.figures[I]={type:"lattice",coords:S,colors:B,verticesPerRow:L}}function q(F){for(var I=F.coords[0][0],j=F.coords[0][1],E=I,x=j,p=1,m=F.coords.length;p<m;p++){var _=F.coords[p][0],R=F.coords[p][1];I=I>_?_:I,j=j>R?R:j,E=E<_?_:E,x=x<R?R:x}F.bounds=[I,j,E,x]}function P(F,I,j,E,x,p){if(!(0,ee.isStream)(F))throw new k.FormatError("Mesh data is not a stream");var m=F.dict;this.matrix=I,this.shadingType=m.get("ShadingType"),this.type="Pattern";const _=m.getArray("BBox");this.bbox=Array.isArray(_)&&4===_.length?k.Util.normalizeRect(_):null;const R=fe.ColorSpace.parse({cs:m.getRaw("ColorSpace")||m.getRaw("CS"),xref:j,resources:E,pdfFunctionFactory:x,localColorSpaceCache:p});this.cs=R,this.background=m.has("Background")?R.getRgb(m.get("Background"),0):null;var G=m.getRaw("Function"),K=G?x.createFromArray(G):null;this.coords=[],this.colors=[],this.figures=[];var z=new c(F,{bitsPerCoordinate:m.get("BitsPerCoordinate"),bitsPerComponent:m.get("BitsPerComponent"),bitsPerFlag:m.get("BitsPerFlag"),decode:m.getArray("Decode"),colorFn:K,colorSpace:R,numComps:K?1:R.numComps}),L=!1;switch(this.shadingType){case V_FREE_FORM_MESH:!function $(F,I){for(var j=F.coords,E=F.colors,x=[],p=[],m=0;I.hasData;){var _=I.readFlag(),R=I.readCoordinate(),G=I.readComponents();if(0===m){if(!(0<=_&&_<=2))throw new k.FormatError("Unknown type4 flag");switch(_){case 0:m=3;break;case 1:p.push(p[p.length-2],p[p.length-1]),m=1;break;case 2:p.push(p[p.length-3],p[p.length-1]),m=1}x.push(_)}p.push(j.length),j.push(R),E.push(G),m--,I.align()}F.figures.push({type:"triangles",coords:new Int32Array(p),colors:new Int32Array(p)})}(this,z);break;case V_LATTICE_FORM_MESH:var S=0|m.get("VerticesPerRow");if(S<2)throw new k.FormatError("Invalid VerticesPerRow");!function ae(F,I,j){for(var E=F.coords,x=F.colors,p=[];I.hasData;){var m=I.readCoordinate(),_=I.readComponents();p.push(E.length),E.push(m),x.push(_)}F.figures.push({type:"lattice",coords:new Int32Array(p),colors:new Int32Array(p),verticesPerRow:j})}(this,z,S);break;case V_COONS_PATCH_MESH:(function A(F,I){for(var j=F.coords,E=F.colors,x=new Int32Array(16),p=new Int32Array(4);I.hasData;){var m=I.readFlag();if(!(0<=m&&m<=3))throw new k.FormatError("Unknown type6 flag");var _,R,G=j.length;for(_=0,R=0!==m?8:12;_<R;_++)j.push(I.readCoordinate());var U,z,L,K=E.length;for(_=0,R=0!==m?2:4;_<R;_++)E.push(I.readComponents());switch(m){case 0:x[12]=G+3,x[13]=G+4,x[14]=G+5,x[15]=G+6,x[8]=G+2,x[11]=G+7,x[4]=G+1,x[7]=G+8,x[0]=G,x[1]=G+11,x[2]=G+10,x[3]=G+9,p[2]=K+1,p[3]=K+2,p[0]=K,p[1]=K+3;break;case 1:U=x[12],z=x[13],L=x[14],x[12]=x[15],x[13]=G+0,x[14]=G+1,x[15]=G+2,x[8]=L,x[11]=G+3,x[4]=z,x[7]=G+4,x[0]=U,x[1]=G+7,x[2]=G+6,x[3]=G+5,U=p[2],p[2]=z=p[3],p[3]=K,p[0]=U,p[1]=K+1;break;case 2:U=x[15],z=x[11],x[12]=x[3],x[13]=G+0,x[14]=G+1,x[15]=G+2,x[8]=x[7],x[11]=G+3,x[4]=z,x[7]=G+4,x[0]=U,x[1]=G+7,x[2]=G+6,x[3]=G+5,U=p[3],p[2]=p[1],p[3]=K,p[0]=U,p[1]=K+1;break;case 3:x[12]=x[0],x[13]=G+0,x[14]=G+1,x[15]=G+2,x[8]=x[1],x[11]=G+3,x[4]=x[2],x[7]=G+4,x[0]=x[3],x[1]=G+7,x[2]=G+6,x[3]=G+5,p[2]=p[0],p[3]=K,p[0]=p[1],p[1]=K+1}x[5]=j.length,j.push([(-4*j[x[0]][0]-j[x[15]][0]+6*(j[x[4]][0]+j[x[1]][0])-2*(j[x[12]][0]+j[x[3]][0])+3*(j[x[13]][0]+j[x[7]][0]))/9,(-4*j[x[0]][1]-j[x[15]][1]+6*(j[x[4]][1]+j[x[1]][1])-2*(j[x[12]][1]+j[x[3]][1])+3*(j[x[13]][1]+j[x[7]][1]))/9]),x[6]=j.length,j.push([(-4*j[x[3]][0]-j[x[12]][0]+6*(j[x[2]][0]+j[x[7]][0])-2*(j[x[0]][0]+j[x[15]][0])+3*(j[x[4]][0]+j[x[14]][0]))/9,(-4*j[x[3]][1]-j[x[12]][1]+6*(j[x[2]][1]+j[x[7]][1])-2*(j[x[0]][1]+j[x[15]][1])+3*(j[x[4]][1]+j[x[14]][1]))/9]),x[9]=j.length,j.push([(-4*j[x[12]][0]-j[x[3]][0]+6*(j[x[8]][0]+j[x[13]][0])-2*(j[x[0]][0]+j[x[15]][0])+3*(j[x[11]][0]+j[x[1]][0]))/9,(-4*j[x[12]][1]-j[x[3]][1]+6*(j[x[8]][1]+j[x[13]][1])-2*(j[x[0]][1]+j[x[15]][1])+3*(j[x[11]][1]+j[x[1]][1]))/9]),x[10]=j.length,j.push([(-4*j[x[15]][0]-j[x[0]][0]+6*(j[x[11]][0]+j[x[14]][0])-2*(j[x[12]][0]+j[x[3]][0])+3*(j[x[2]][0]+j[x[8]][0]))/9,(-4*j[x[15]][1]-j[x[0]][1]+6*(j[x[11]][1]+j[x[14]][1])-2*(j[x[12]][1]+j[x[3]][1])+3*(j[x[2]][1]+j[x[8]][1]))/9]),F.figures.push({type:"patch",coords:new Int32Array(x),colors:new Int32Array(p)})}})(this,z),L=!0;break;case V_TENSOR_PATCH_MESH:(function b(F,I){for(var j=F.coords,E=F.colors,x=new Int32Array(16),p=new Int32Array(4);I.hasData;){var m=I.readFlag();if(!(0<=m&&m<=3))throw new k.FormatError("Unknown type7 flag");var _,R,G=j.length;for(_=0,R=0!==m?12:16;_<R;_++)j.push(I.readCoordinate());var U,z,L,K=E.length;for(_=0,R=0!==m?2:4;_<R;_++)E.push(I.readComponents());switch(m){case 0:x[12]=G+3,x[13]=G+4,x[14]=G+5,x[15]=G+6,x[8]=G+2,x[9]=G+13,x[10]=G+14,x[11]=G+7,x[4]=G+1,x[5]=G+12,x[6]=G+15,x[7]=G+8,x[0]=G,x[1]=G+11,x[2]=G+10,x[3]=G+9,p[2]=K+1,p[3]=K+2,p[0]=K,p[1]=K+3;break;case 1:U=x[12],z=x[13],L=x[14],x[12]=x[15],x[13]=G+0,x[14]=G+1,x[15]=G+2,x[8]=L,x[9]=G+9,x[10]=G+10,x[11]=G+3,x[4]=z,x[5]=G+8,x[6]=G+11,x[7]=G+4,x[0]=U,x[1]=G+7,x[2]=G+6,x[3]=G+5,U=p[2],p[2]=z=p[3],p[3]=K,p[0]=U,p[1]=K+1;break;case 2:U=x[15],z=x[11],x[12]=x[3],x[13]=G+0,x[14]=G+1,x[15]=G+2,x[8]=x[7],x[9]=G+9,x[10]=G+10,x[11]=G+3,x[4]=z,x[5]=G+8,x[6]=G+11,x[7]=G+4,x[0]=U,x[1]=G+7,x[2]=G+6,x[3]=G+5,U=p[3],p[2]=p[1],p[3]=K,p[0]=U,p[1]=K+1;break;case 3:x[12]=x[0],x[13]=G+0,x[14]=G+1,x[15]=G+2,x[8]=x[1],x[9]=G+9,x[10]=G+10,x[11]=G+3,x[4]=x[2],x[5]=G+8,x[6]=G+11,x[7]=G+4,x[0]=x[3],x[1]=G+7,x[2]=G+6,x[3]=G+5,p[2]=p[0],p[3]=K,p[0]=p[1],p[1]=K+1}F.figures.push({type:"patch",coords:new Int32Array(x),colors:new Int32Array(p)})}})(this,z),L=!0;break;default:(0,k.unreachable)("Unsupported mesh type.")}if(L){q(this);for(var B=0,J=this.figures.length;B<J;B++)M(this,B)}q(this),function C(F){var I,j,E,x,p=F.coords,m=new Float32Array(2*p.length);for(I=0,E=0,j=p.length;I<j;I++){var _=p[I];m[E++]=_[0],m[E++]=_[1]}F.coords=m;var R=F.colors,G=new Uint8Array(3*R.length);for(I=0,E=0,j=R.length;I<j;I++){var K=R[I];G[E++]=K[0],G[E++]=K[1],G[E++]=K[2]}F.colors=G;var U=F.figures;for(I=0,j=U.length;I<j;I++){var z=U[I],L=z.coords,S=z.colors;for(E=0,x=L.length;E<x;E++)L[E]*=2,S[E]*=3}}(this)}return P.prototype={getIR:function(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.matrix,this.bbox,this.background]}},P}(),te.Dummy=function(){function c(){this.type="Pattern"}return c.prototype={getIR:function(){return["Dummy"]}},c}()},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.isPDFFunction=function re(ae){var oe;if("object"!=typeof ae)return!1;if((0,k.isDict)(ae))oe=ae;else{if(!(0,k.isStream)(ae))return!1;oe=ae.dict}return oe.has("FunctionType")},se.PostScriptCompiler=se.PostScriptEvaluator=se.PDFFunctionFactory=void 0;var k=y(5),fe=y(2),ee=y(41),e=y(24);function H(ae){if(!Array.isArray(ae))return null;const oe=ae.length;for(let W=0;W<oe;W++)if("number"!=typeof ae[W]){const N=new Array(oe);for(let O=0;O<oe;O++)N[O]=+ae[O];return N}return ae}se.PDFFunctionFactory=class V{constructor({xref:oe,isEvalSupported:W=!0}){this.xref=oe,this.isEvalSupported=!1!==W,this._localFunctionCache=null}create(oe){const W=this.getCached(oe);if(W)return W;const N=te.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:oe instanceof k.Ref?this.xref.fetch(oe):oe});return this._cache(oe,N),N}createFromArray(oe){const W=this.getCached(oe);if(W)return W;const N=te.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:oe instanceof k.Ref?this.xref.fetch(oe):oe});return this._cache(oe,N),N}getCached(oe){let W;if(oe instanceof k.Ref?W=oe:oe instanceof k.Dict?W=oe.objId:(0,k.isStream)(oe)&&(W=oe.dict&&oe.dict.objId),W){this._localFunctionCache||(this._localFunctionCache=new e.LocalFunctionCache);const N=this._localFunctionCache.getByRef(W);if(N)return N}return null}_cache(oe,W){if(!W)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let N;oe instanceof k.Ref?N=oe:oe instanceof k.Dict?N=oe.objId:(0,k.isStream)(oe)&&(N=oe.dict&&oe.dict.objId),N&&(this._localFunctionCache||(this._localFunctionCache=new e.LocalFunctionCache),this._localFunctionCache.set(null,N,W))}};var te={getSampleArray(M,A,b,q){var C,P,F=1;for(C=0,P=M.length;C<P;C++)F*=M[C];F*=A;var I=new Array(F),j=0,E=0,x=1/(2**b-1),p=q.getBytes((F*b+7)/8),m=0;for(C=0;C<F;C++){for(;j<b;)E<<=8,E|=p[m++],j+=8;I[C]=(E>>(j-=b))*x,E&=(1<<j)-1}return I},getIR({xref:M,isEvalSupported:A,fn:b}){var q=b.dict;q||(q=b);var F=[this.constructSampled,null,this.constructInterpolated,this.constructStiched,this.constructPostScript][q.get("FunctionType")];if(!F)throw new fe.FormatError("Unknown type of function");return F.call(this,{xref:M,isEvalSupported:A,fn:b,dict:q})},fromIR({xref:M,isEvalSupported:A,IR:b}){switch(b[0]){case 0:return this.constructSampledFromIR({xref:M,isEvalSupported:A,IR:b});case 2:return this.constructInterpolatedFromIR({xref:M,isEvalSupported:A,IR:b});case 3:return this.constructStichedFromIR({xref:M,isEvalSupported:A,IR:b});default:return this.constructPostScriptFromIR({xref:M,isEvalSupported:A,IR:b})}},parse({xref:M,isEvalSupported:A,fn:b}){const q=this.getIR({xref:M,isEvalSupported:A,fn:b});return this.fromIR({xref:M,isEvalSupported:A,IR:q})},parseArray({xref:M,isEvalSupported:A,fnObj:b}){if(!Array.isArray(b))return this.parse({xref:M,isEvalSupported:A,fn:b});for(var q=[],C=0,P=b.length;C<P;C++)q.push(this.parse({xref:M,isEvalSupported:A,fn:M.fetchIfRef(b[C])}));return function(F,I,j,E){for(var x=0,p=q.length;x<p;x++)q[x](F,I,j,E+x)}},constructSampled({fn:b,dict:q}){function C(K){for(var U=K.length,z=[],L=0,S=0;S<U;S+=2)z[L]=[K[S],K[S+1]],++L;return z}var P=H(q.getArray("Domain")),F=H(q.getArray("Range"));if(!P||!F)throw new fe.FormatError("No domain or range");var I=P.length/2,j=F.length/2;P=C(P),F=C(F);var E=H(q.getArray("Size")),x=q.get("BitsPerSample"),p=q.get("Order")||1;1!==p&&(0,fe.info)("No support for cubic spline interpolation: "+p);var m=H(q.getArray("Encode"));if(m)m=C(m);else{m=[];for(var _=0;_<I;++_)m.push([0,E[_]-1])}var R=H(q.getArray("Decode"));return[0,I,P,m,R=R?C(R):F,this.getSampleArray(E,j,x,b),E,j,2**x-1,F]},constructSampledFromIR({IR:b}){function q(C,P,F,I,j){return I+(j-I)/(F-P)*(C-P)}return function(P,F,I,j){var S,B,E=b[1],x=b[2],p=b[3],m=b[4],_=b[5],R=b[6],G=b[7],K=b[9],U=1<<E,z=new Float64Array(U),L=new Uint32Array(U);for(B=0;B<U;B++)z[B]=1;var J=G,ie=1;for(S=0;S<E;++S){var ce=x[S][0],pe=x[S][1],Te=q(Math.min(Math.max(P[F+S],ce),pe),ce,pe,p[S][0],p[S][1]),_e=R[S],we=(Te=Math.min(Math.max(Te,0),_e-1))<_e-1?Math.floor(Te):Te-1,De=we+1-Te,xe=Te-we,Ce=we*J,Me=Ce+J;for(B=0;B<U;B++)B&ie?(z[B]*=xe,L[B]+=Me):(z[B]*=De,L[B]+=Ce);J*=_e,ie<<=1}for(B=0;B<G;++B){var Ne=0;for(S=0;S<U;S++)Ne+=_[L[S]+B]*z[S];Ne=q(Ne,0,1,m[B][0],m[B][1]),I[j+B]=Math.min(Math.max(Ne,K[B][0]),K[B][1])}}},constructInterpolated({dict:q}){for(var C=H(q.getArray("C0"))||[0],P=H(q.getArray("C1"))||[1],F=q.get("N"),I=C.length,j=[],E=0;E<I;++E)j.push(P[E]-C[E]);return[2,C,j,F]},constructInterpolatedFromIR({IR:b}){var q=b[1],C=b[2],P=b[3],F=C.length;return function(j,E,x,p){for(var m=1===P?j[E]:j[E]**P,_=0;_<F;++_)x[p+_]=q[_]+m*C[_]}},constructStiched({xref:M,isEvalSupported:A,dict:q}){var C=H(q.getArray("Domain"));if(!C)throw new fe.FormatError("No domain");if(1!=C.length/2)throw new fe.FormatError("Bad domain for stiched function");for(var F=q.get("Functions"),I=[],j=0,E=F.length;j<E;++j)I.push(this.parse({xref:M,isEvalSupported:A,fn:M.fetchIfRef(F[j])}));return[3,C,H(q.getArray("Bounds")),H(q.getArray("Encode")),I]},constructStichedFromIR({IR:b}){var q=b[1],C=b[2],P=b[3],F=b[4],I=new Float32Array(1);return function(E,x,p,m){for(var R=(ie=q[0],(J=E[x])>(ce=q[1])?J=ce:J<ie&&(J=ie),J),G=0,K=C.length;G<K&&!(R<C[G]);++G);var J,ie,ce,U=q[0];G>0&&(U=C[G-1]);var z=q[1];G<C.length&&(z=C[G]);var L=P[2*G];I[0]=U===z?L:L+(R-U)*(P[2*G+1]-L)/(z-U),F[G](I,0,p,m)}},constructPostScript({fn:b,dict:q}){var C=H(q.getArray("Domain")),P=H(q.getArray("Range"));if(!C)throw new fe.FormatError("No domain.");if(!P)throw new fe.FormatError("No range.");var F=new ee.PostScriptLexer(b);return[4,C,P,new ee.PostScriptParser(F).parse()]},constructPostScriptFromIR({isEvalSupported:A,IR:b}){var q=b[1],C=b[2],P=b[3];if(A&&fe.IsEvalSupportedCached.value){const _=(new $).compile(P,q,C);if(_)return new Function("src","srcOffset","dest","destOffset",_)}(0,fe.info)("Unable to compile PS function");var F=C.length>>1,I=q.length>>1,j=new c(P),E=Object.create(null),p=8192,m=new Float32Array(I);return function(R,G,K,U){var z,L,S="",B=m;for(z=0;z<I;z++)B[z]=L=R[G+z],S+=L+"_";var J=E[S];if(void 0===J){var ie=new Float32Array(F),ce=j.execute(B),pe=ce.length-F;for(z=0;z<F;z++){var ye=C[2*z];((L=ce[pe+z])<ye||L>(ye=C[2*z+1]))&&(L=ye),ie[z]=L}p>0&&(p--,E[S]=ie),K.set(ie,U)}else K.set(J,U)}}};var f=function(){function W(N){this.stack=N?Array.prototype.slice.call(N,0):[]}return W.prototype={push:function(O){if(this.stack.length>=100)throw new Error("PostScript function stack overflow.");this.stack.push(O)},pop:function(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()},copy:function(O){if(this.stack.length+O>=100)throw new Error("PostScript function stack overflow.");for(var M=this.stack,A=M.length-O,b=O-1;b>=0;b--,A++)M.push(M[A])},index:function(O){this.push(this.stack[this.stack.length-O-1])},roll:function(O,M){var P,F,I,A=this.stack,b=A.length-O,q=A.length-1,C=b+(M-Math.floor(M/O)*O);for(P=b,F=q;P<F;P++,F--)I=A[P],A[P]=A[F],A[F]=I;for(P=b,F=C-1;P<F;P++,F--)I=A[P],A[P]=A[F],A[F]=I;for(P=C,F=q;P<F;P++,F--)I=A[P],A[P]=A[F],A[F]=I}},W}(),c=function(){function oe(W){this.operators=W}return oe.prototype={execute:function(N){for(var q,C,P,O=new f(N),M=0,A=this.operators,b=A.length;M<b;)if("number"!=typeof(q=A[M++]))switch(q){case"jz":P=O.pop(),(C=O.pop())||(M=P);break;case"j":M=C=O.pop();break;case"abs":C=O.pop(),O.push(Math.abs(C));break;case"add":P=O.pop(),C=O.pop(),O.push(C+P);break;case"and":P=O.pop(),C=O.pop(),(0,fe.isBool)(C)&&(0,fe.isBool)(P)?O.push(C&&P):O.push(C&P);break;case"atan":C=O.pop(),O.push(Math.atan(C));break;case"bitshift":P=O.pop(),C=O.pop(),O.push(C>0?C<<P:C>>P);break;case"ceiling":C=O.pop(),O.push(Math.ceil(C));break;case"copy":C=O.pop(),O.copy(C);break;case"cos":C=O.pop(),O.push(Math.cos(C));break;case"cvi":C=0|O.pop(),O.push(C);break;case"cvr":break;case"div":P=O.pop(),C=O.pop(),O.push(C/P);break;case"dup":O.copy(1);break;case"eq":P=O.pop(),C=O.pop(),O.push(C===P);break;case"exch":O.roll(2,1);break;case"exp":P=O.pop(),C=O.pop(),O.push(C**P);break;case"false":O.push(!1);break;case"floor":C=O.pop(),O.push(Math.floor(C));break;case"ge":P=O.pop(),C=O.pop(),O.push(C>=P);break;case"gt":P=O.pop(),C=O.pop(),O.push(C>P);break;case"idiv":P=O.pop(),C=O.pop(),O.push(C/P|0);break;case"index":C=O.pop(),O.index(C);break;case"le":P=O.pop(),C=O.pop(),O.push(C<=P);break;case"ln":C=O.pop(),O.push(Math.log(C));break;case"log":C=O.pop(),O.push(Math.log(C)/Math.LN10);break;case"lt":P=O.pop(),C=O.pop(),O.push(C<P);break;case"mod":P=O.pop(),C=O.pop(),O.push(C%P);break;case"mul":P=O.pop(),C=O.pop(),O.push(C*P);break;case"ne":P=O.pop(),C=O.pop(),O.push(C!==P);break;case"neg":C=O.pop(),O.push(-C);break;case"not":C=O.pop(),(0,fe.isBool)(C)?O.push(!C):O.push(~C);break;case"or":P=O.pop(),C=O.pop(),(0,fe.isBool)(C)&&(0,fe.isBool)(P)?O.push(C||P):O.push(C|P);break;case"pop":O.pop();break;case"roll":P=O.pop(),C=O.pop(),O.roll(C,P);break;case"round":C=O.pop(),O.push(Math.round(C));break;case"sin":C=O.pop(),O.push(Math.sin(C));break;case"sqrt":C=O.pop(),O.push(Math.sqrt(C));break;case"sub":P=O.pop(),C=O.pop(),O.push(C-P);break;case"true":O.push(!0);break;case"truncate":C=(C=O.pop())<0?Math.ceil(C):Math.floor(C),O.push(C);break;case"xor":P=O.pop(),C=O.pop(),(0,fe.isBool)(C)&&(0,fe.isBool)(P)?O.push(C!==P):O.push(C^P);break;default:throw new fe.FormatError(`Unknown operator ${q}`)}else O.push(q);return O.stack}},oe}();se.PostScriptEvaluator=c;var $=function(){function oe(E){this.type=E}function W(E,x,p){oe.call(this,"args"),this.index=E,this.min=x,this.max=p}function N(E){oe.call(this,"literal"),this.number=E,this.min=E,this.max=E}function O(E,x,p,m,_){oe.call(this,"binary"),this.op=E,this.arg1=x,this.arg2=p,this.min=m,this.max=_}function M(E,x){oe.call(this,"max"),this.arg=E,this.min=E.min,this.max=x}function A(E,x,p){oe.call(this,"var"),this.index=E,this.min=x,this.max=p}function b(E,x){oe.call(this,"definition"),this.variable=E,this.arg=x}function q(){this.parts=[]}function C(E,x){return"literal"===x.type&&0===x.number?E:"literal"===E.type&&0===E.number?x:"literal"===x.type&&"literal"===E.type?new N(E.number+x.number):new O("+",E,x,E.min+x.min,E.max+x.max)}function P(E,x){if("literal"===x.type){if(0===x.number)return new N(0);if(1===x.number)return E;if("literal"===E.type)return new N(E.number*x.number)}if("literal"===E.type){if(0===E.number)return new N(0);if(1===E.number)return x}return new O("*",E,x,Math.min(E.min*x.min,E.min*x.max,E.max*x.min,E.max*x.max),Math.max(E.min*x.min,E.min*x.max,E.max*x.min,E.max*x.max))}function F(E,x){if("literal"===x.type){if(0===x.number)return E;if("literal"===E.type)return new N(E.number-x.number)}return"binary"===x.type&&"-"===x.op&&"literal"===E.type&&1===E.number&&"literal"===x.arg1.type&&1===x.arg1.number?x.arg2:new O("-",E,x,E.min-x.max,E.max-x.min)}function I(E,x){return E.min>=x?new N(x):E.max<=x?E:new M(E,x)}function j(){}return oe.prototype.visit=function(E){(0,fe.unreachable)("abstract method")},(W.prototype=Object.create(oe.prototype)).visit=function(E){E.visitArgument(this)},(N.prototype=Object.create(oe.prototype)).visit=function(E){E.visitLiteral(this)},(O.prototype=Object.create(oe.prototype)).visit=function(E){E.visitBinaryOperation(this)},(M.prototype=Object.create(oe.prototype)).visit=function(E){E.visitMin(this)},(A.prototype=Object.create(oe.prototype)).visit=function(E){E.visitVariable(this)},(b.prototype=Object.create(oe.prototype)).visit=function(E){E.visitVariableDefinition(this)},q.prototype={visitArgument(E){this.parts.push("Math.max(",E.min,", Math.min(",E.max,", src[srcOffset + ",E.index,"]))")},visitVariable(E){this.parts.push("v",E.index)},visitLiteral(E){this.parts.push(E.number)},visitBinaryOperation(E){this.parts.push("("),E.arg1.visit(this),this.parts.push(" ",E.op," "),E.arg2.visit(this),this.parts.push(")")},visitVariableDefinition(E){this.parts.push("var "),E.variable.visit(this),this.parts.push(" = "),E.arg.visit(this),this.parts.push(";")},visitMin(E){this.parts.push("Math.min("),E.arg.visit(this),this.parts.push(", ",E.max,")")},toString(){return this.parts.join("")}},j.prototype={compile:function(x,p,m){var z,L,S,B,J,ie,ce,pe,_=[],R=[],G=p.length>>1,K=m.length>>1,U=0;for(let Te=0;Te<G;Te++)_.push(new W(Te,p[2*Te],p[2*Te+1]));for(let Te=0,_e=x.length;Te<_e;Te++)if("number"!=typeof(pe=x[Te]))switch(pe){case"add":if(_.length<2)return null;B=_.pop(),S=_.pop(),_.push(C(S,B));break;case"cvr":if(_.length<1)return null;break;case"mul":if(_.length<2)return null;B=_.pop(),S=_.pop(),_.push(P(S,B));break;case"sub":if(_.length<2)return null;B=_.pop(),S=_.pop(),_.push(F(S,B));break;case"exch":if(_.length<2)return null;J=_.pop(),ie=_.pop(),_.push(J,ie);break;case"pop":if(_.length<1)return null;_.pop();break;case"index":if(_.length<1||"literal"!==(S=_.pop()).type||(z=S.number)<0||!Number.isInteger(z)||_.length<z)return null;if("literal"===(J=_[_.length-z-1]).type||"var"===J.type){_.push(J);break}ce=new A(U++,J.min,J.max),_[_.length-z-1]=ce,_.push(ce),R.push(new b(ce,J));break;case"dup":if(_.length<1)return null;if("number"==typeof x[Te+1]&&"gt"===x[Te+2]&&x[Te+3]===Te+7&&"jz"===x[Te+4]&&"pop"===x[Te+5]&&x[Te+6]===x[Te+1]){S=_.pop(),_.push(I(S,x[Te+1])),Te+=6;break}if("literal"===(J=_[_.length-1]).type||"var"===J.type){_.push(J);break}ce=new A(U++,J.min,J.max),_[_.length-1]=ce,_.push(ce),R.push(new b(ce,J));break;case"roll":if(_.length<2||(B=_.pop(),S=_.pop(),"literal"!==B.type||"literal"!==S.type)||(L=B.number,(z=S.number)<=0||!Number.isInteger(z)||!Number.isInteger(L)||_.length<z))return null;if(0==(L=(L%z+z)%z))break;Array.prototype.push.apply(_,_.splice(_.length-z,z-L));break;default:return null}else _.push(new N(pe));if(_.length!==K)return null;var ye=[];return R.forEach(function(Te){var _e=new q;Te.visit(_e),ye.push(_e.toString())}),_.forEach(function(Te,_e){var we=new q;Te.visit(we);var De=m[2*_e],xe=m[2*_e+1],Ce=[we.toString()];De>Te.min&&(Ce.unshift("Math.max(",De,", "),Ce.push(")")),xe<Te.max&&(Ce.unshift("Math.min(",xe,", "),Ce.push(")")),Ce.unshift("dest[destOffset + ",_e,"] = "),Ce.push(";"),ye.push(Ce.join(""))}),ye.join("\n")}},j}();se.PostScriptCompiler=$},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.PostScriptParser=se.PostScriptLexer=void 0;var k=y(2),fe=y(5),ee=y(8);se.PostScriptParser=class e{constructor(f){this.lexer=f,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(f){return this.token.type===f&&(this.nextToken(),!0)}expect(f){if(this.accept(f))return!0;throw new k.FormatError(`Unexpected symbol: found ${this.token.type} expected ${f}.`)}parse(){return this.nextToken(),this.expect(V.LBRACE),this.parseBlock(),this.expect(V.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(V.NUMBER))this.operators.push(this.prev.value);else if(this.accept(V.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(V.LBRACE))return;this.parseCondition()}}parseCondition(){const f=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(V.RBRACE),this.accept(V.IF))this.operators[f]=this.operators.length,this.operators[f+1]="jz";else{if(!this.accept(V.LBRACE))throw new k.FormatError("PS Function: error parsing conditional.");{const c=this.operators.length;this.operators.push(null,null);const $=this.operators.length;this.parseBlock(),this.expect(V.RBRACE),this.expect(V.IFELSE),this.operators[c]=this.operators.length,this.operators[c+1]="j",this.operators[f]=$,this.operators[f+1]="jz"}}}};const V={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5},H=function(){const f=Object.create(null);class c{constructor(ae,oe){this.type=ae,this.value=oe}static getOperator(ae){return f[ae]||(f[ae]=new c(V.OPERATOR,ae))}static get LBRACE(){return(0,k.shadow)(this,"LBRACE",new c(V.LBRACE,"{"))}static get RBRACE(){return(0,k.shadow)(this,"RBRACE",new c(V.RBRACE,"}"))}static get IF(){return(0,k.shadow)(this,"IF",new c(V.IF,"IF"))}static get IFELSE(){return(0,k.shadow)(this,"IFELSE",new c(V.IFELSE,"IFELSE"))}}return c}();se.PostScriptLexer=class te{constructor(f){this.stream=f,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let f=!1,c=this.currentChar;for(;;){if(c<0)return fe.EOF;if(f)(10===c||13===c)&&(f=!1);else if(37===c)f=!0;else if(!(0,ee.isWhiteSpace)(c))break;c=this.nextChar()}switch(0|c){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new H(V.NUMBER,this.getNumber());case 123:return this.nextChar(),H.LBRACE;case 125:return this.nextChar(),H.RBRACE}const $=this.strBuf;for($.length=0,$[0]=String.fromCharCode(c);(c=this.nextChar())>=0&&(c>=65&&c<=90||c>=97&&c<=122);)$.push(String.fromCharCode(c));const ae=$.join("");switch(ae.toLowerCase()){case"if":return H.IF;case"ifelse":return H.IFELSE;default:return H.getOperator(ae)}}getNumber(){let f=this.currentChar;const c=this.strBuf;for(c.length=0,c[0]=String.fromCharCode(f);(f=this.nextChar())>=0&&(f>=48&&f<=57||45===f||46===f);)c.push(String.fromCharCode(f));const $=parseFloat(c.join(""));if(isNaN($))throw new k.FormatError(`Invalid floating point number: ${$}`);return $}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.bidi=function ae(oe,W,N){var O=!0,M=oe.length;if(0===M||N)return f(oe,O,N);c.length=M,$.length=M;var b,q,A=0;for(b=0;b<M;++b){c[b]=oe.charAt(b);var C=oe.charCodeAt(b),P="L";C<=255?P=fe[C]:1424<=C&&C<=1524?P="R":1536<=C&&C<=1791?(P=ee[255&C])||(0,k.warn)("Bidi: invalid Unicode character "+C.toString(16)):1792<=C&&C<=2220&&(P="AL"),("R"===P||"AL"===P||"AN"===P)&&A++,$[b]=P}if(0===A)return f(oe,O=!0);-1===W&&(A/M<.3?(O=!0,W=0):(O=!1,W=1));var F=[];for(b=0;b<M;++b)F[b]=W;var p,I=e(W)?"R":"L",j=I,E=j,x=j;for(b=0;b<M;++b)"NSM"===$[b]?$[b]=x:x=$[b];for(x=j,b=0;b<M;++b)"EN"===(p=$[b])?$[b]="AL"===x?"AN":"EN":("R"===p||"L"===p||"AL"===p)&&(x=p);for(b=0;b<M;++b)"AL"===(p=$[b])&&($[b]="R");for(b=1;b<M-1;++b)"ES"===$[b]&&"EN"===$[b-1]&&"EN"===$[b+1]&&($[b]="EN"),"CS"===$[b]&&("EN"===$[b-1]||"AN"===$[b-1])&&$[b+1]===$[b-1]&&($[b]=$[b-1]);for(b=0;b<M;++b)if("EN"===$[b]){var m;for(m=b-1;m>=0&&"ET"===$[m];--m)$[m]="EN";for(m=b+1;m<M&&"ET"===$[m];++m)$[m]="EN"}for(b=0;b<M;++b)("WS"===(p=$[b])||"ES"===p||"ET"===p||"CS"===p)&&($[b]="ON");for(x=j,b=0;b<M;++b)"EN"===(p=$[b])?$[b]="L"===x?"L":"EN":("R"===p||"L"===p)&&(x=p);for(b=0;b<M;++b)if("ON"===$[b]){var _=H($,b+1,"ON"),R=j;b>0&&(R=$[b-1]);var G=E;_+1<M&&(G=$[_+1]),"L"!==R&&(R="R"),"L"!==G&&(G="R"),R===G&&te($,b,_,R),b=_-1}for(b=0;b<M;++b)"ON"===$[b]&&($[b]=I);for(b=0;b<M;++b)p=$[b],V(F[b])?"R"===p?F[b]+=1:("AN"===p||"EN"===p)&&(F[b]+=2):("L"===p||"AN"===p||"EN"===p)&&(F[b]+=1);var z,K=-1,U=99;for(b=0,q=F.length;b<q;++b)K<(z=F[b])&&(K=z),U>z&&e(z)&&(U=z);for(z=K;z>=U;--z){var L=-1;for(b=0,q=F.length;b<q;++b)F[b]<z?L>=0&&(re(c,L,b),L=-1):L<0&&(L=b);L>=0&&re(c,L,F.length)}for(b=0,q=c.length;b<q;++b){var S=c[b];("<"===S||">"===S)&&(c[b]="")}return f(c.join(""),O)};var k=y(2),fe=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],ee=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function e(oe){return 0!=(1&oe)}function V(oe){return 0==(1&oe)}function H(oe,W,N){for(var O=W,M=oe.length;O<M;++O)if(oe[O]!==N)return O;return O}function te(oe,W,N,O){for(var M=W;M<N;++M)oe[M]=O}function re(oe,W,N){for(var O=W,M=N-1;O<M;++O,--M){var A=oe[O];oe[O]=oe[M],oe[M]=A}}function f(oe,W,N=!1){let O="ltr";return N?O="ttb":W||(O="rtl"),{str:oe,dir:O}}var c=[],$=[]},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.getMetrics=void 0;var k=y(8),fe=(0,k.getLookupTableFactory)(function(ee){ee.Courier=600,ee["Courier-Bold"]=600,ee["Courier-BoldOblique"]=600,ee["Courier-Oblique"]=600,ee.Helvetica=(0,k.getLookupTableFactory)(function(e){e.space=278,e.exclam=278,e.quotedbl=355,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=667,e.quoteright=222,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=278,e.semicolon=278,e.less=584,e.equal=584,e.greater=584,e.question=556,e.at=1015,e.A=667,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=500,e.K=667,e.L=556,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=278,e.backslash=278,e.bracketright=278,e.asciicircum=469,e.underscore=556,e.quoteleft=222,e.a=556,e.b=556,e.c=500,e.d=556,e.e=556,e.f=278,e.g=556,e.h=556,e.i=222,e.j=222,e.k=500,e.l=222,e.m=833,e.n=556,e.o=556,e.p=556,e.q=556,e.r=333,e.s=500,e.t=278,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=500,e.braceleft=334,e.bar=260,e.braceright=334,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=191,e.quotedblleft=333,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=537,e.bullet=350,e.quotesinglbase=222,e.quotedblbase=333,e.quotedblright=333,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=556,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=222,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=556,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=667,e.aacute=556,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=500,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=500,e.aring=556,e.Ncommaaccent=722,e.lacute=222,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=500,e.scedilla=500,e.iacute=278,e.lozenge=471,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=556,e.Amacron=667,e.rcaron=333,e.ccedilla=500,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=643,e.Umacron=722,e.uring=556,e.threesuperior=333,e.Ograve=778,e.Agrave=667,e.Abreve=667,e.multiply=584,e.uacute=556,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=500,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=260,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=333,e.omacron=556,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=222,e.tcaron=317,e.eogonek=556,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=556,e.zacute=500,e.iogonek=222,e.Oacute=778,e.oacute=556,e.amacron=556,e.sacute=500,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=333,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=556,e.Eogonek=667,e.dcroat=556,e.threequarters=834,e.Scedilla=667,e.lcaron=299,e.Kcommaaccent=667,e.Lacute=556,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=556,e.onehalf=834,e.lessequal=549,e.ocircumflex=556,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=556,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=556,e.Ccaron=722,e.ugrave=556,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=556,e.Rcommaaccent=722,e.Lcommaaccent=556,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=500,e.minus=584,e.Icircumflex=278,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=584,e.odieresis=556,e.udieresis=556,e.notequal=549,e.gcommaaccent=556,e.eth=556,e.zcaron=500,e.ncommaaccent=556,e.onesuperior=333,e.imacron=278,e.Euro=556}),ee["Helvetica-Bold"]=(0,k.getLookupTableFactory)(function(e){e.space=278,e.exclam=333,e.quotedbl=474,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=722,e.quoteright=278,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=333,e.semicolon=333,e.less=584,e.equal=584,e.greater=584,e.question=611,e.at=975,e.A=722,e.B=722,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=556,e.K=722,e.L=611,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=584,e.underscore=556,e.quoteleft=278,e.a=556,e.b=611,e.c=556,e.d=611,e.e=556,e.f=333,e.g=611,e.h=611,e.i=278,e.j=278,e.k=556,e.l=278,e.m=889,e.n=611,e.o=611,e.p=611,e.q=611,e.r=389,e.s=556,e.t=333,e.u=611,e.v=556,e.w=778,e.x=556,e.y=556,e.z=500,e.braceleft=389,e.bar=280,e.braceright=389,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=238,e.quotedblleft=500,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=611,e.fl=611,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=556,e.bullet=350,e.quotesinglbase=278,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=611,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=278,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=611,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=722,e.aacute=556,e.Ucircumflex=722,e.yacute=556,e.scommaaccent=556,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=611,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=556,e.aring=556,e.Ncommaaccent=722,e.lacute=278,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=556,e.scedilla=556,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=611,e.acircumflex=556,e.Amacron=722,e.rcaron=389,e.ccedilla=556,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=743,e.Umacron=722,e.uring=611,e.threesuperior=333,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=584,e.uacute=611,e.Tcaron=611,e.partialdiff=494,e.ydieresis=556,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=556,e.nacute=611,e.umacron=611,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=280,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=611,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=389,e.eogonek=556,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=556,e.zacute=500,e.iogonek=278,e.Oacute=778,e.oacute=611,e.amacron=556,e.sacute=556,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=611,e.twosuperior=333,e.Odieresis=778,e.mu=611,e.igrave=278,e.ohungarumlaut=611,e.Eogonek=667,e.dcroat=611,e.threequarters=834,e.Scedilla=667,e.lcaron=400,e.Kcommaaccent=722,e.Lacute=611,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=611,e.onehalf=834,e.lessequal=549,e.ocircumflex=611,e.ntilde=611,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=611,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=611,e.Ccaron=722,e.ugrave=611,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=611,e.Rcommaaccent=722,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=556,e.minus=584,e.Icircumflex=278,e.ncaron=611,e.tcommaaccent=333,e.logicalnot=584,e.odieresis=611,e.udieresis=611,e.notequal=549,e.gcommaaccent=611,e.eth=611,e.zcaron=500,e.ncommaaccent=611,e.onesuperior=333,e.imacron=278,e.Euro=556}),ee["Helvetica-BoldOblique"]=(0,k.getLookupTableFactory)(function(e){e.space=278,e.exclam=333,e.quotedbl=474,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=722,e.quoteright=278,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=333,e.semicolon=333,e.less=584,e.equal=584,e.greater=584,e.question=611,e.at=975,e.A=722,e.B=722,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=556,e.K=722,e.L=611,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=584,e.underscore=556,e.quoteleft=278,e.a=556,e.b=611,e.c=556,e.d=611,e.e=556,e.f=333,e.g=611,e.h=611,e.i=278,e.j=278,e.k=556,e.l=278,e.m=889,e.n=611,e.o=611,e.p=611,e.q=611,e.r=389,e.s=556,e.t=333,e.u=611,e.v=556,e.w=778,e.x=556,e.y=556,e.z=500,e.braceleft=389,e.bar=280,e.braceright=389,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=238,e.quotedblleft=500,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=611,e.fl=611,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=556,e.bullet=350,e.quotesinglbase=278,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=611,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=278,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=611,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=722,e.aacute=556,e.Ucircumflex=722,e.yacute=556,e.scommaaccent=556,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=611,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=556,e.aring=556,e.Ncommaaccent=722,e.lacute=278,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=556,e.scedilla=556,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=611,e.acircumflex=556,e.Amacron=722,e.rcaron=389,e.ccedilla=556,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=743,e.Umacron=722,e.uring=611,e.threesuperior=333,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=584,e.uacute=611,e.Tcaron=611,e.partialdiff=494,e.ydieresis=556,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=556,e.nacute=611,e.umacron=611,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=280,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=611,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=389,e.eogonek=556,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=556,e.zacute=500,e.iogonek=278,e.Oacute=778,e.oacute=611,e.amacron=556,e.sacute=556,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=611,e.twosuperior=333,e.Odieresis=778,e.mu=611,e.igrave=278,e.ohungarumlaut=611,e.Eogonek=667,e.dcroat=611,e.threequarters=834,e.Scedilla=667,e.lcaron=400,e.Kcommaaccent=722,e.Lacute=611,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=611,e.onehalf=834,e.lessequal=549,e.ocircumflex=611,e.ntilde=611,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=611,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=611,e.Ccaron=722,e.ugrave=611,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=611,e.Rcommaaccent=722,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=556,e.minus=584,e.Icircumflex=278,e.ncaron=611,e.tcommaaccent=333,e.logicalnot=584,e.odieresis=611,e.udieresis=611,e.notequal=549,e.gcommaaccent=611,e.eth=611,e.zcaron=500,e.ncommaaccent=611,e.onesuperior=333,e.imacron=278,e.Euro=556}),ee["Helvetica-Oblique"]=(0,k.getLookupTableFactory)(function(e){e.space=278,e.exclam=278,e.quotedbl=355,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=667,e.quoteright=222,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=278,e.semicolon=278,e.less=584,e.equal=584,e.greater=584,e.question=556,e.at=1015,e.A=667,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=500,e.K=667,e.L=556,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=278,e.backslash=278,e.bracketright=278,e.asciicircum=469,e.underscore=556,e.quoteleft=222,e.a=556,e.b=556,e.c=500,e.d=556,e.e=556,e.f=278,e.g=556,e.h=556,e.i=222,e.j=222,e.k=500,e.l=222,e.m=833,e.n=556,e.o=556,e.p=556,e.q=556,e.r=333,e.s=500,e.t=278,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=500,e.braceleft=334,e.bar=260,e.braceright=334,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=191,e.quotedblleft=333,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=537,e.bullet=350,e.quotesinglbase=222,e.quotedblbase=333,e.quotedblright=333,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=556,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=222,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=556,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=667,e.aacute=556,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=500,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=500,e.aring=556,e.Ncommaaccent=722,e.lacute=222,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=500,e.scedilla=500,e.iacute=278,e.lozenge=471,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=556,e.Amacron=667,e.rcaron=333,e.ccedilla=500,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=643,e.Umacron=722,e.uring=556,e.threesuperior=333,e.Ograve=778,e.Agrave=667,e.Abreve=667,e.multiply=584,e.uacute=556,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=500,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=260,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=333,e.omacron=556,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=222,e.tcaron=317,e.eogonek=556,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=556,e.zacute=500,e.iogonek=222,e.Oacute=778,e.oacute=556,e.amacron=556,e.sacute=500,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=333,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=556,e.Eogonek=667,e.dcroat=556,e.threequarters=834,e.Scedilla=667,e.lcaron=299,e.Kcommaaccent=667,e.Lacute=556,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=556,e.onehalf=834,e.lessequal=549,e.ocircumflex=556,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=556,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=556,e.Ccaron=722,e.ugrave=556,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=556,e.Rcommaaccent=722,e.Lcommaaccent=556,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=500,e.minus=584,e.Icircumflex=278,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=584,e.odieresis=556,e.udieresis=556,e.notequal=549,e.gcommaaccent=556,e.eth=556,e.zcaron=500,e.ncommaaccent=556,e.onesuperior=333,e.imacron=278,e.Euro=556}),ee.Symbol=(0,k.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.universal=713,e.numbersign=500,e.existential=549,e.percent=833,e.ampersand=778,e.suchthat=439,e.parenleft=333,e.parenright=333,e.asteriskmath=500,e.plus=549,e.comma=250,e.minus=549,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=278,e.semicolon=278,e.less=549,e.equal=549,e.greater=549,e.question=444,e.congruent=549,e.Alpha=722,e.Beta=667,e.Chi=722,e.Delta=612,e.Epsilon=611,e.Phi=763,e.Gamma=603,e.Eta=722,e.Iota=333,e.theta1=631,e.Kappa=722,e.Lambda=686,e.Mu=889,e.Nu=722,e.Omicron=722,e.Pi=768,e.Theta=741,e.Rho=556,e.Sigma=592,e.Tau=611,e.Upsilon=690,e.sigma1=439,e.Omega=768,e.Xi=645,e.Psi=795,e.Zeta=611,e.bracketleft=333,e.therefore=863,e.bracketright=333,e.perpendicular=658,e.underscore=500,e.radicalex=500,e.alpha=631,e.beta=549,e.chi=549,e.delta=494,e.epsilon=439,e.phi=521,e.gamma=411,e.eta=603,e.iota=329,e.phi1=603,e.kappa=549,e.lambda=549,e.mu=576,e.nu=521,e.omicron=549,e.pi=549,e.theta=521,e.rho=549,e.sigma=603,e.tau=439,e.upsilon=576,e.omega1=713,e.omega=686,e.xi=493,e.psi=686,e.zeta=494,e.braceleft=480,e.bar=200,e.braceright=480,e.similar=549,e.Euro=750,e.Upsilon1=620,e.minute=247,e.lessequal=549,e.fraction=167,e.infinity=713,e.florin=500,e.club=753,e.diamond=753,e.heart=753,e.spade=753,e.arrowboth=1042,e.arrowleft=987,e.arrowup=603,e.arrowright=987,e.arrowdown=603,e.degree=400,e.plusminus=549,e.second=411,e.greaterequal=549,e.multiply=549,e.proportional=713,e.partialdiff=494,e.bullet=460,e.divide=549,e.notequal=549,e.equivalence=549,e.approxequal=549,e.ellipsis=1e3,e.arrowvertex=603,e.arrowhorizex=1e3,e.carriagereturn=658,e.aleph=823,e.Ifraktur=686,e.Rfraktur=795,e.weierstrass=987,e.circlemultiply=768,e.circleplus=768,e.emptyset=823,e.intersection=768,e.union=768,e.propersuperset=713,e.reflexsuperset=713,e.notsubset=713,e.propersubset=713,e.reflexsubset=713,e.element=713,e.notelement=713,e.angle=768,e.gradient=713,e.registerserif=790,e.copyrightserif=790,e.trademarkserif=890,e.product=823,e.radical=549,e.dotmath=250,e.logicalnot=713,e.logicaland=603,e.logicalor=603,e.arrowdblboth=1042,e.arrowdblleft=987,e.arrowdblup=603,e.arrowdblright=987,e.arrowdbldown=603,e.lozenge=494,e.angleleft=329,e.registersans=790,e.copyrightsans=790,e.trademarksans=786,e.summation=713,e.parenlefttp=384,e.parenleftex=384,e.parenleftbt=384,e.bracketlefttp=384,e.bracketleftex=384,e.bracketleftbt=384,e.bracelefttp=494,e.braceleftmid=494,e.braceleftbt=494,e.braceex=494,e.angleright=329,e.integral=274,e.integraltp=686,e.integralex=686,e.integralbt=686,e.parenrighttp=384,e.parenrightex=384,e.parenrightbt=384,e.bracketrighttp=384,e.bracketrightex=384,e.bracketrightbt=384,e.bracerighttp=494,e.bracerightmid=494,e.bracerightbt=494,e.apple=790}),ee["Times-Roman"]=(0,k.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.quotedbl=408,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=564,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=278,e.semicolon=278,e.less=564,e.equal=564,e.greater=564,e.question=444,e.at=921,e.A=722,e.B=667,e.C=667,e.D=722,e.E=611,e.F=556,e.G=722,e.H=722,e.I=333,e.J=389,e.K=722,e.L=611,e.M=889,e.N=722,e.O=722,e.P=556,e.Q=722,e.R=667,e.S=556,e.T=611,e.U=722,e.V=722,e.W=944,e.X=722,e.Y=722,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=469,e.underscore=500,e.quoteleft=333,e.a=444,e.b=500,e.c=444,e.d=500,e.e=444,e.f=333,e.g=500,e.h=500,e.i=278,e.j=278,e.k=500,e.l=278,e.m=778,e.n=500,e.o=500,e.p=500,e.q=500,e.r=333,e.s=389,e.t=278,e.u=500,e.v=500,e.w=722,e.x=500,e.y=500,e.z=444,e.braceleft=480,e.bar=200,e.braceright=480,e.asciitilde=541,e.exclamdown=333,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=180,e.quotedblleft=444,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=453,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=444,e.quotedblright=444,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=444,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=889,e.ordfeminine=276,e.Lslash=611,e.Oslash=722,e.OE=889,e.ordmasculine=310,e.ae=667,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=500,e.Idieresis=333,e.eacute=444,e.abreve=444,e.uhungarumlaut=500,e.ecaron=444,e.Ydieresis=722,e.divide=564,e.Yacute=722,e.Acircumflex=722,e.aacute=444,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=444,e.Uacute=722,e.uogonek=500,e.Edieresis=611,e.Dcroat=722,e.commaaccent=250,e.copyright=760,e.Emacron=611,e.ccaron=444,e.aring=444,e.Ncommaaccent=722,e.lacute=278,e.agrave=444,e.Tcommaaccent=611,e.Cacute=667,e.atilde=444,e.Edotaccent=611,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=471,e.Rcaron=667,e.Gcommaaccent=722,e.ucircumflex=500,e.acircumflex=444,e.Amacron=722,e.rcaron=333,e.ccedilla=444,e.Zdotaccent=611,e.Thorn=556,e.Omacron=722,e.Racute=667,e.Sacute=556,e.dcaron=588,e.Umacron=722,e.uring=500,e.threesuperior=300,e.Ograve=722,e.Agrave=722,e.Abreve=722,e.multiply=564,e.uacute=500,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=611,e.adieresis=444,e.edieresis=444,e.cacute=444,e.nacute=500,e.umacron=500,e.Ncaron=722,e.Iacute=333,e.plusminus=564,e.brokenbar=200,e.registered=760,e.Gbreve=722,e.Idotaccent=333,e.summation=600,e.Egrave=611,e.racute=333,e.omacron=500,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=326,e.eogonek=444,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=444,e.zacute=444,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=444,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=500,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=611,e.dcroat=500,e.threequarters=750,e.Scedilla=556,e.lcaron=344,e.Kcommaaccent=722,e.Lacute=611,e.trademark=980,e.edotaccent=444,e.Igrave=333,e.Imacron=333,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=500,e.Uhungarumlaut=722,e.Eacute=611,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=500,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=667,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=722,e.zdotaccent=444,e.Ecaron=611,e.Iogonek=333,e.kcommaaccent=500,e.minus=564,e.Icircumflex=333,e.ncaron=500,e.tcommaaccent=278,e.logicalnot=564,e.odieresis=500,e.udieresis=500,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=444,e.ncommaaccent=500,e.onesuperior=300,e.imacron=278,e.Euro=500}),ee["Times-Bold"]=(0,k.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.quotedbl=555,e.numbersign=500,e.dollar=500,e.percent=1e3,e.ampersand=833,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=570,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=570,e.equal=570,e.greater=570,e.question=500,e.at=930,e.A=722,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=778,e.I=389,e.J=500,e.K=778,e.L=667,e.M=944,e.N=722,e.O=778,e.P=611,e.Q=778,e.R=722,e.S=556,e.T=667,e.U=722,e.V=722,e.W=1e3,e.X=722,e.Y=722,e.Z=667,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=581,e.underscore=500,e.quoteleft=333,e.a=500,e.b=556,e.c=444,e.d=556,e.e=444,e.f=333,e.g=500,e.h=556,e.i=278,e.j=333,e.k=556,e.l=278,e.m=833,e.n=556,e.o=500,e.p=556,e.q=556,e.r=444,e.s=389,e.t=333,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=444,e.braceleft=394,e.bar=220,e.braceright=394,e.asciitilde=520,e.exclamdown=333,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=278,e.quotedblleft=500,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=540,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=300,e.Lslash=667,e.Oslash=778,e.OE=1e3,e.ordmasculine=330,e.ae=722,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=556,e.Idieresis=389,e.eacute=444,e.abreve=500,e.uhungarumlaut=556,e.ecaron=444,e.Ydieresis=722,e.divide=570,e.Yacute=722,e.Acircumflex=722,e.aacute=500,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=747,e.Emacron=667,e.ccaron=444,e.aring=500,e.Ncommaaccent=722,e.lacute=278,e.agrave=500,e.Tcommaaccent=667,e.Cacute=722,e.atilde=500,e.Edotaccent=667,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=500,e.Amacron=722,e.rcaron=444,e.ccedilla=444,e.Zdotaccent=667,e.Thorn=611,e.Omacron=778,e.Racute=722,e.Sacute=556,e.dcaron=672,e.Umacron=722,e.uring=556,e.threesuperior=300,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=570,e.uacute=556,e.Tcaron=667,e.partialdiff=494,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=389,e.plusminus=570,e.brokenbar=220,e.registered=747,e.Gbreve=778,e.Idotaccent=389,e.summation=600,e.Egrave=667,e.racute=444,e.omacron=500,e.Zacute=667,e.Zcaron=667,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=416,e.eogonek=444,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=444,e.zacute=444,e.iogonek=278,e.Oacute=778,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=300,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=667,e.dcroat=556,e.threequarters=750,e.Scedilla=556,e.lcaron=394,e.Kcommaaccent=778,e.Lacute=667,e.trademark=1e3,e.edotaccent=444,e.Igrave=389,e.Imacron=389,e.Lcaron=667,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=778,e.degree=400,e.ograve=500,e.Ccaron=722,e.ugrave=556,e.radical=549,e.Dcaron=722,e.rcommaaccent=444,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=722,e.Lcommaaccent=667,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=444,e.Ecaron=667,e.Iogonek=389,e.kcommaaccent=556,e.minus=570,e.Icircumflex=389,e.ncaron=556,e.tcommaaccent=333,e.logicalnot=570,e.odieresis=500,e.udieresis=556,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=444,e.ncommaaccent=556,e.onesuperior=300,e.imacron=278,e.Euro=500}),ee["Times-BoldItalic"]=(0,k.getLookupTableFactory)(function(e){e.space=250,e.exclam=389,e.quotedbl=555,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=570,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=570,e.equal=570,e.greater=570,e.question=500,e.at=832,e.A=667,e.B=667,e.C=667,e.D=722,e.E=667,e.F=667,e.G=722,e.H=778,e.I=389,e.J=500,e.K=667,e.L=611,e.M=889,e.N=722,e.O=722,e.P=611,e.Q=722,e.R=667,e.S=556,e.T=611,e.U=722,e.V=667,e.W=889,e.X=667,e.Y=611,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=570,e.underscore=500,e.quoteleft=333,e.a=500,e.b=500,e.c=444,e.d=500,e.e=444,e.f=333,e.g=500,e.h=556,e.i=278,e.j=278,e.k=500,e.l=278,e.m=778,e.n=556,e.o=500,e.p=500,e.q=500,e.r=389,e.s=389,e.t=278,e.u=556,e.v=444,e.w=667,e.x=500,e.y=444,e.z=389,e.braceleft=348,e.bar=220,e.braceright=348,e.asciitilde=570,e.exclamdown=389,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=278,e.quotedblleft=500,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=500,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=944,e.ordfeminine=266,e.Lslash=611,e.Oslash=722,e.OE=944,e.ordmasculine=300,e.ae=722,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=500,e.Idieresis=389,e.eacute=444,e.abreve=500,e.uhungarumlaut=556,e.ecaron=444,e.Ydieresis=611,e.divide=570,e.Yacute=611,e.Acircumflex=667,e.aacute=500,e.Ucircumflex=722,e.yacute=444,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=747,e.Emacron=667,e.ccaron=444,e.aring=500,e.Ncommaaccent=722,e.lacute=278,e.agrave=500,e.Tcommaaccent=611,e.Cacute=667,e.atilde=500,e.Edotaccent=667,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=494,e.Rcaron=667,e.Gcommaaccent=722,e.ucircumflex=556,e.acircumflex=500,e.Amacron=667,e.rcaron=389,e.ccedilla=444,e.Zdotaccent=611,e.Thorn=611,e.Omacron=722,e.Racute=667,e.Sacute=556,e.dcaron=608,e.Umacron=722,e.uring=556,e.threesuperior=300,e.Ograve=722,e.Agrave=667,e.Abreve=667,e.multiply=570,e.uacute=556,e.Tcaron=611,e.partialdiff=494,e.ydieresis=444,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=389,e.plusminus=570,e.brokenbar=220,e.registered=747,e.Gbreve=722,e.Idotaccent=389,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=500,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=366,e.eogonek=444,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=444,e.zacute=389,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=576,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=667,e.dcroat=500,e.threequarters=750,e.Scedilla=556,e.lcaron=382,e.Kcommaaccent=667,e.Lacute=611,e.trademark=1e3,e.edotaccent=444,e.Igrave=389,e.Imacron=389,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=556,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=667,e.Lcommaaccent=611,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=722,e.zdotaccent=389,e.Ecaron=667,e.Iogonek=389,e.kcommaaccent=500,e.minus=606,e.Icircumflex=389,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=606,e.odieresis=500,e.udieresis=556,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=389,e.ncommaaccent=556,e.onesuperior=300,e.imacron=278,e.Euro=500}),ee["Times-Italic"]=(0,k.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.quotedbl=420,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=675,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=675,e.equal=675,e.greater=675,e.question=500,e.at=920,e.A=611,e.B=611,e.C=667,e.D=722,e.E=611,e.F=611,e.G=722,e.H=722,e.I=333,e.J=444,e.K=667,e.L=556,e.M=833,e.N=667,e.O=722,e.P=611,e.Q=722,e.R=611,e.S=500,e.T=556,e.U=722,e.V=611,e.W=833,e.X=611,e.Y=556,e.Z=556,e.bracketleft=389,e.backslash=278,e.bracketright=389,e.asciicircum=422,e.underscore=500,e.quoteleft=333,e.a=500,e.b=500,e.c=444,e.d=500,e.e=444,e.f=278,e.g=500,e.h=500,e.i=278,e.j=278,e.k=444,e.l=278,e.m=722,e.n=500,e.o=500,e.p=500,e.q=500,e.r=389,e.s=389,e.t=278,e.u=500,e.v=444,e.w=667,e.x=444,e.y=444,e.z=389,e.braceleft=400,e.bar=275,e.braceright=400,e.asciitilde=541,e.exclamdown=389,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=214,e.quotedblleft=556,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=523,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=556,e.quotedblright=556,e.guillemotright=500,e.ellipsis=889,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=889,e.AE=889,e.ordfeminine=276,e.Lslash=556,e.Oslash=722,e.OE=944,e.ordmasculine=310,e.ae=667,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=667,e.germandbls=500,e.Idieresis=333,e.eacute=444,e.abreve=500,e.uhungarumlaut=500,e.ecaron=444,e.Ydieresis=556,e.divide=675,e.Yacute=556,e.Acircumflex=611,e.aacute=500,e.Ucircumflex=722,e.yacute=444,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=500,e.Edieresis=611,e.Dcroat=722,e.commaaccent=250,e.copyright=760,e.Emacron=611,e.ccaron=444,e.aring=500,e.Ncommaaccent=667,e.lacute=278,e.agrave=500,e.Tcommaaccent=556,e.Cacute=667,e.atilde=500,e.Edotaccent=611,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=471,e.Rcaron=611,e.Gcommaaccent=722,e.ucircumflex=500,e.acircumflex=500,e.Amacron=611,e.rcaron=389,e.ccedilla=444,e.Zdotaccent=556,e.Thorn=611,e.Omacron=722,e.Racute=611,e.Sacute=500,e.dcaron=544,e.Umacron=722,e.uring=500,e.threesuperior=300,e.Ograve=722,e.Agrave=611,e.Abreve=611,e.multiply=675,e.uacute=500,e.Tcaron=556,e.partialdiff=476,e.ydieresis=444,e.Nacute=667,e.icircumflex=278,e.Ecircumflex=611,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=500,e.umacron=500,e.Ncaron=667,e.Iacute=333,e.plusminus=675,e.brokenbar=275,e.registered=760,e.Gbreve=722,e.Idotaccent=333,e.summation=600,e.Egrave=611,e.racute=389,e.omacron=500,e.Zacute=556,e.Zcaron=556,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=300,e.eogonek=444,e.Uogonek=722,e.Aacute=611,e.Adieresis=611,e.egrave=444,e.zacute=389,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=500,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=611,e.dcroat=500,e.threequarters=750,e.Scedilla=500,e.lcaron=300,e.Kcommaaccent=667,e.Lacute=556,e.trademark=980,e.edotaccent=444,e.Igrave=333,e.Imacron=333,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=500,e.Uhungarumlaut=722,e.Eacute=611,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=500,e.Scommaaccent=500,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=500,e.radical=453,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=667,e.otilde=500,e.Rcommaaccent=611,e.Lcommaaccent=556,e.Atilde=611,e.Aogonek=611,e.Aring=611,e.Otilde=722,e.zdotaccent=389,e.Ecaron=611,e.Iogonek=333,e.kcommaaccent=444,e.minus=675,e.Icircumflex=333,e.ncaron=500,e.tcommaaccent=278,e.logicalnot=675,e.odieresis=500,e.udieresis=500,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=389,e.ncommaaccent=500,e.onesuperior=300,e.imacron=278,e.Euro=500}),ee.ZapfDingbats=(0,k.getLookupTableFactory)(function(e){e.space=278,e.a1=974,e.a2=961,e.a202=974,e.a3=980,e.a4=719,e.a5=789,e.a119=790,e.a118=791,e.a117=690,e.a11=960,e.a12=939,e.a13=549,e.a14=855,e.a15=911,e.a16=933,e.a105=911,e.a17=945,e.a18=974,e.a19=755,e.a20=846,e.a21=762,e.a22=761,e.a23=571,e.a24=677,e.a25=763,e.a26=760,e.a27=759,e.a28=754,e.a6=494,e.a7=552,e.a8=537,e.a9=577,e.a10=692,e.a29=786,e.a30=788,e.a31=788,e.a32=790,e.a33=793,e.a34=794,e.a35=816,e.a36=823,e.a37=789,e.a38=841,e.a39=823,e.a40=833,e.a41=816,e.a42=831,e.a43=923,e.a44=744,e.a45=723,e.a46=749,e.a47=790,e.a48=792,e.a49=695,e.a50=776,e.a51=768,e.a52=792,e.a53=759,e.a54=707,e.a55=708,e.a56=682,e.a57=701,e.a58=826,e.a59=815,e.a60=789,e.a61=789,e.a62=707,e.a63=687,e.a64=696,e.a65=689,e.a66=786,e.a67=787,e.a68=713,e.a69=791,e.a70=785,e.a71=791,e.a72=873,e.a73=761,e.a74=762,e.a203=762,e.a75=759,e.a204=759,e.a76=892,e.a77=892,e.a78=788,e.a79=784,e.a81=438,e.a82=138,e.a83=277,e.a84=415,e.a97=392,e.a98=392,e.a99=668,e.a100=668,e.a89=390,e.a90=390,e.a93=317,e.a94=317,e.a91=276,e.a92=276,e.a205=509,e.a85=509,e.a206=410,e.a86=410,e.a87=234,e.a88=234,e.a95=334,e.a96=334,e.a101=732,e.a102=544,e.a103=544,e.a104=910,e.a106=667,e.a107=760,e.a108=760,e.a112=776,e.a111=595,e.a110=694,e.a109=626,e.a120=788,e.a121=788,e.a122=788,e.a123=788,e.a124=788,e.a125=788,e.a126=788,e.a127=788,e.a128=788,e.a129=788,e.a130=788,e.a131=788,e.a132=788,e.a133=788,e.a134=788,e.a135=788,e.a136=788,e.a137=788,e.a138=788,e.a139=788,e.a140=788,e.a141=788,e.a142=788,e.a143=788,e.a144=788,e.a145=788,e.a146=788,e.a147=788,e.a148=788,e.a149=788,e.a150=788,e.a151=788,e.a152=788,e.a153=788,e.a154=788,e.a155=788,e.a156=788,e.a157=788,e.a158=788,e.a159=788,e.a160=894,e.a161=838,e.a163=1016,e.a164=458,e.a196=748,e.a165=924,e.a192=748,e.a166=918,e.a167=927,e.a168=928,e.a169=928,e.a170=834,e.a171=873,e.a172=828,e.a173=924,e.a162=924,e.a174=917,e.a175=930,e.a176=931,e.a177=463,e.a178=883,e.a179=836,e.a193=836,e.a180=867,e.a199=867,e.a181=696,e.a200=696,e.a182=874,e.a201=874,e.a183=760,e.a184=946,e.a197=771,e.a185=865,e.a194=771,e.a198=888,e.a186=967,e.a195=888,e.a187=831,e.a188=873,e.a189=927,e.a190=970,e.a191=918})});se.getMetrics=fe},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.MurmurHash3_64=void 0;var k=y(2);const fe=3285377520,ee=4294901760,e=65535;se.MurmurHash3_64=class V{constructor(te){this.h1=te?4294967295&te:fe,this.h2=te?4294967295&te:fe}update(te){let re,f;if((0,k.isString)(te)){re=new Uint8Array(2*te.length),f=0;for(let C=0,P=te.length;C<P;C++){const F=te.charCodeAt(C);F<=255?re[f++]=F:(re[f++]=F>>>8,re[f++]=255&F)}}else{if(!(0,k.isArrayBuffer)(te))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");re=te,f=re.byteLength}const c=f>>2,$=f-4*c,ae=new Uint32Array(re.buffer,0,c);let oe=0,W=0,N=this.h1,O=this.h2;const M=3432918353,A=461845907,b=M&e,q=A&e;for(let C=0;C<c;C++)1&C?(oe=ae[C],oe=oe*M&ee|oe*b&e,oe=oe<<15|oe>>>17,oe=oe*A&ee|oe*q&e,N^=oe,N=N<<13|N>>>19,N=5*N+3864292196):(W=ae[C],W=W*M&ee|W*b&e,W=W<<15|W>>>17,W=W*A&ee|W*q&e,O^=W,O=O<<13|O>>>19,O=5*O+3864292196);switch(oe=0,$){case 3:oe^=re[4*c+2]<<16;case 2:oe^=re[4*c+1]<<8;case 1:oe^=re[4*c],oe=oe*M&ee|oe*b&e,oe=oe<<15|oe>>>17,oe=oe*A&ee|oe*q&e,1&c?N^=oe:O^=oe}this.h1=N,this.h2=O}hexdigest(){let te=this.h1,re=this.h2;te^=re>>>1,te=3981806797*te&ee|36045*te&e,re=4283543511*re&ee|(2950163797*(re<<16|te>>>16)&ee)>>>16,te^=re>>>1,te=444984403*te&ee|60499*te&e,re=3301882366*re&ee|(3120437893*(re<<16|te>>>16)&ee)>>>16,te^=re>>>1;const f=(te>>>0).toString(16),c=(re>>>0).toString(16);return f.padStart(8,"0")+c.padStart(8,"0")}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.PDFImage=void 0;var k=y(2),fe=y(5),ee=y(23),e=y(12),V=y(18),H=y(21);function te(c,$,ae,oe){return(c=$+c*ae)<0?c=0:c>oe&&(c=oe),c}function re(c,$,ae,oe,W,N){var O=W*N;let M;M=$<=8?new Uint8Array(O):$<=16?new Uint16Array(O):new Uint32Array(O);var q,C,P,A=ae/W,b=oe/N,F=0,j=new Uint16Array(W),E=ae;for(q=0;q<W;q++)j[q]=Math.floor(q*A);for(q=0;q<N;q++)for(P=Math.floor(q*b)*E,C=0;C<W;C++)M[F++]=c[P+j[C]];return M}class f{constructor({xref:$,res:ae,image:oe,isInline:W=!1,smask:N=null,mask:O=null,isMask:M=!1,pdfFunctionFactory:A,localColorSpaceCache:b}){this.image=oe;var q=oe.dict;const C=q.get("Filter");if((0,fe.isName)(C))switch(C.name){case"JPXDecode":var P=new H.JpxImage;P.parseImageProperties(oe.stream),oe.stream.reset(),oe.width=P.width,oe.height=P.height,oe.bitsPerComponent=P.bitsPerComponent,oe.numComps=P.componentsCount;break;case"JBIG2Decode":oe.bitsPerComponent=1,oe.numComps=1}let F=q.get("Width","W"),I=q.get("Height","H");if(Number.isInteger(oe.width)&&oe.width>0&&Number.isInteger(oe.height)&&oe.height>0&&(oe.width!==F||oe.height!==I)&&((0,k.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),F=oe.width,I=oe.height),F<1||I<1)throw new k.FormatError(`Invalid image width: ${F} or height: ${I}`);this.width=F,this.height=I,this.interpolate=q.get("Interpolate","I")||!1,this.imageMask=q.get("ImageMask","IM")||!1,this.matte=q.get("Matte")||!1;var j=oe.bitsPerComponent;if(!j&&!(j=q.get("BitsPerComponent","BPC"))){if(!this.imageMask)throw new k.FormatError(`Bits per component missing in image: ${this.imageMask}`);j=1}if(this.bpc=j,!this.imageMask){let K=q.getRaw("ColorSpace")||q.getRaw("CS");if(!K)switch((0,k.info)("JPX images (which do not require color spaces)"),oe.numComps){case 1:K=fe.Name.get("DeviceGray");break;case 3:K=fe.Name.get("DeviceRGB");break;case 4:K=fe.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${oe.numComps} color components not supported.`)}this.colorSpace=ee.ColorSpace.parse({cs:K,xref:$,resources:W?ae:null,pdfFunctionFactory:A,localColorSpaceCache:b}),this.numComps=this.colorSpace.numComps}if(this.decode=q.getArray("Decode","D"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,j)||M&&!ee.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;var E=(1<<j)-1;this.decodeCoefficients=[],this.decodeAddends=[];const K=this.colorSpace&&"Indexed"===this.colorSpace.name;for(var x=0,p=0;x<this.decode.length;x+=2,++p){var m=this.decode[x],_=this.decode[x+1];this.decodeCoefficients[p]=K?(_-m)/E:_-m,this.decodeAddends[p]=K?m:E*m}}N?this.smask=new f({xref:$,res:ae,image:N,isInline:W,pdfFunctionFactory:A,localColorSpaceCache:b}):O&&((0,fe.isStream)(O)?O.dict.get("ImageMask","IM")?this.mask=new f({xref:$,res:ae,image:O,isInline:W,isMask:!0,pdfFunctionFactory:A,localColorSpaceCache:b}):(0,k.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=O)}static buildImage({xref:$,res:ae,image:oe,isInline:W=!1,pdfFunctionFactory:N,localColorSpaceCache:O}){return le(function*(){const M=oe;let A=null,b=null;const q=oe.dict.get("SMask"),C=oe.dict.get("Mask");return q?A=q:C&&((0,fe.isStream)(C)||Array.isArray(C)?b=C:(0,k.warn)("Unsupported mask format.")),new f({xref:$,res:ae,image:M,isInline:W,smask:A,mask:b,pdfFunctionFactory:N,localColorSpaceCache:O})})()}static createMask({imgArray:$,width:ae,height:oe,imageIsFromDecodeStream:W,inverseDecode:N}){var b,q,O=(ae+7>>3)*oe,M=$.byteLength;if(!W||N&&O!==M)if(N)for((b=new Uint8ClampedArray(O)).set($),q=M;q<O;q++)b[q]=255;else(b=new Uint8ClampedArray(M)).set($);else b=$;if(N)for(q=0;q<M;q++)b[q]^=255;return{data:b,width:ae,height:oe}}get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}decodeBuffer($){var M,A,ae=this.bpc,oe=this.numComps,W=this.decodeAddends,N=this.decodeCoefficients,O=(1<<ae)-1;if(1!==ae){var b=0;for(M=0,A=this.width*this.height;M<A;M++)for(var q=0;q<oe;q++)$[b]=te($[b],W[q],N[q],O),b++}else for(M=0,A=$.length;M<A;M++)$[M]=+!$[M]}getComponents($){var ae=this.bpc;if(8===ae)return $;var oe=this.width,W=this.height,N=this.numComps,O=oe*W*N,M=0;let A;A=ae<=8?new Uint8Array(O):ae<=16?new Uint16Array(O):new Uint32Array(O);var P,F,b=oe*N,q=(1<<ae)-1,C=0;if(1===ae)for(var I,j,E,x=0;x<W;x++){for(j=C+(-8&b),E=C+b;C<j;)F=$[M++],A[C]=F>>7&1,A[C+1]=F>>6&1,A[C+2]=F>>5&1,A[C+3]=F>>4&1,A[C+4]=F>>3&1,A[C+5]=F>>2&1,A[C+6]=F>>1&1,A[C+7]=1&F,C+=8;if(C<E)for(F=$[M++],I=128;C<E;)A[C++]=+!!(F&I),I>>=1}else{var p=0;for(F=0,C=0,P=O;C<P;++C){for(C%b==0&&(F=0,p=0);p<ae;)F=F<<8|$[M++],p+=8;var m=p-ae;let _=F>>m;_<0?_=0:_>q&&(_=q),A[C]=_,F&=(1<<m)-1,p=m}}return A}fillOpacity($,ae,oe,W,N){var A,b,q,C,P,F,O=this.smask,M=this.mask;if(O)b=O.width,q=O.height,A=new Uint8ClampedArray(b*q),O.fillGrayBuffer(A),(b!==ae||q!==oe)&&(A=re(A,O.bpc,b,q,ae,oe));else if(M)if(M instanceof f){for(b=M.width,q=M.height,A=new Uint8ClampedArray(b*q),M.numComps=1,M.fillGrayBuffer(A),C=0,P=b*q;C<P;++C)A[C]=255-A[C];(b!==ae||q!==oe)&&(A=re(A,M.bpc,b,q,ae,oe))}else{if(!Array.isArray(M))throw new k.FormatError("Unknown mask format.");A=new Uint8ClampedArray(ae*oe);var I=this.numComps;for(C=0,P=ae*oe;C<P;++C){var j=0,E=C*I;for(F=0;F<I;++F){var x=N[E+F],p=2*F;if(x<M[p]||x>M[p+1]){j=255;break}}A[C]=j}}if(A)for(C=0,F=3,P=ae*W;C<P;++C,F+=4)$[F]=A[C];else for(C=0,F=3,P=ae*W;C<P;++C,F+=4)$[F]=255}undoPreblend($,ae,oe){var W=this.smask&&this.smask.matte;if(W)for(var N=this.colorSpace.getRgb(W,0),O=N[0],M=N[1],A=N[2],b=ae*oe*4,q=0;q<b;q+=4){var C=$[q+3];if(0!==C){var P=255/C;$[q]=($[q]-O)*P+O,$[q+1]=($[q+1]-M)*P+M,$[q+2]=($[q+2]-A)*P+A}else $[q]=255,$[q+1]=255,$[q+2]=255}}createImageData($=!1){var q,ae=this.drawWidth,oe=this.drawHeight,W={width:ae,height:oe,kind:0,data:null},O=this.width,M=this.height,A=this.bpc,b=O*this.numComps*A+7>>3;if(!$){var C;if("DeviceGray"===this.colorSpace.name&&1===A?C=k.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"===this.colorSpace.name&&8===A&&!this.needsDecode&&(C=k.ImageKind.RGB_24BPP),C&&!this.smask&&!this.mask&&ae===O&&oe===M){if(W.kind=C,q=this.getImageBytes(M*b),this.image instanceof e.DecodeStream)W.data=q;else{var P=new Uint8ClampedArray(q.length);P.set(q),W.data=P}if(this.needsDecode){(0,k.assert)(C===k.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");for(var F=W.data,I=0,j=F.length;I<j;I++)F[I]^=255}return W}if(this.image instanceof V.JpegStream&&!this.smask&&!this.mask){let _=M*b;switch(this.colorSpace.name){case"DeviceGray":_*=3;case"DeviceRGB":case"DeviceCMYK":return W.kind=k.ImageKind.RGB_24BPP,W.data=this.getImageBytes(_,ae,oe,!0),W}}}var p,m,E=0|(q=this.getImageBytes(M*b)).length/b*oe/M,x=this.getComponents(q);return $||this.smask||this.mask?(W.kind=k.ImageKind.RGBA_32BPP,W.data=new Uint8ClampedArray(ae*oe*4),p=1,m=!0,this.fillOpacity(W.data,ae,oe,E,x)):(W.kind=k.ImageKind.RGB_24BPP,W.data=new Uint8ClampedArray(ae*oe*3),p=0,m=!1),this.needsDecode&&this.decodeBuffer(x),this.colorSpace.fillRgb(W.data,O,M,ae,oe,E,A,x,p),m&&this.undoPreblend(W.data,ae,E),W}fillGrayBuffer($){var ae=this.numComps;if(1!==ae)throw new k.FormatError(`Reading gray scale from a color image: ${ae}`);var b,q,oe=this.width,W=this.height,N=this.bpc,M=this.getImageBytes(W*(oe*ae*N+7>>3)),A=this.getComponents(M);if(1!==N){this.needsDecode&&this.decodeBuffer(A),q=oe*W;var C=255/((1<<N)-1);for(b=0;b<q;++b)$[b]=C*A[b]}else if(q=oe*W,this.needsDecode)for(b=0;b<q;++b)$[b]=A[b]-1&255;else for(b=0;b<q;++b)$[b]=255&-A[b]}getImageBytes($,ae,oe,W=!1){return this.image.reset(),this.image.drawWidth=ae||this.width,this.image.drawHeight=oe||this.height,this.image.forceRGB=!!W,this.image.getBytes($,!0)}}se.PDFImage=f},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.MessageHandler=void 0;var k=y(2);const fe_DATA=1,fe_ERROR=2,ee_CANCEL=1,ee_CANCEL_COMPLETE=2,ee_CLOSE=3,ee_ENQUEUE=4,ee_ERROR=5,ee_PULL=6,ee_PULL_COMPLETE=7,ee_START_COMPLETE=8;function e(H){if("object"!=typeof H||null===H)return H;switch(H.name){case"AbortException":return new k.AbortException(H.message);case"MissingPDFException":return new k.MissingPDFException(H.message);case"UnexpectedResponseException":return new k.UnexpectedResponseException(H.message,H.status);case"UnknownErrorException":return new k.UnknownErrorException(H.message,H.details);default:return new k.UnknownErrorException(H.message,H.toString())}}se.MessageHandler=class V{constructor(te,re,f){this.sourceName=te,this.targetName=re,this.comObj=f,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=c=>{const $=c.data;if($.targetName!==this.sourceName)return;if($.stream)return void this._processStreamMessage($);if($.callback){const oe=$.callbackId,W=this.callbackCapabilities[oe];if(!W)throw new Error(`Cannot resolve callback ${oe}`);if(delete this.callbackCapabilities[oe],$.callback===fe_DATA)W.resolve($.data);else{if($.callback!==fe_ERROR)throw new Error("Unexpected callback case");W.reject(e($.reason))}return}const ae=this.actionHandler[$.action];if(!ae)throw new Error(`Unknown action from worker: ${$.action}`);if($.callbackId){const oe=this.sourceName,W=$.sourceName;new Promise(function(N){N(ae($.data))}).then(function(N){f.postMessage({sourceName:oe,targetName:W,callback:fe_DATA,callbackId:$.callbackId,data:N})},function(N){f.postMessage({sourceName:oe,targetName:W,callback:fe_ERROR,callbackId:$.callbackId,reason:e(N)})})}else $.streamId?this._createStreamSink($):ae($.data)},f.addEventListener("message",this._onComObjOnMessage)}on(te,re){const f=this.actionHandler;if(f[te])throw new Error(`There is already an actionName called "${te}"`);f[te]=re}send(te,re,f){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:te,data:re},f)}sendWithPromise(te,re,f){const c=this.callbackId++,$=(0,k.createPromiseCapability)();this.callbackCapabilities[c]=$;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:te,callbackId:c,data:re},f)}catch(ae){$.reject(ae)}return $.promise}sendWithStream(te,re,f,c){const $=this.streamId++,ae=this.sourceName,oe=this.targetName,W=this.comObj;return new ReadableStream({start:N=>{const O=(0,k.createPromiseCapability)();return this.streamControllers[$]={controller:N,startCall:O,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:ae,targetName:oe,action:te,streamId:$,data:re,desiredSize:N.desiredSize},c),O.promise},pull:N=>{const O=(0,k.createPromiseCapability)();return this.streamControllers[$].pullCall=O,W.postMessage({sourceName:ae,targetName:oe,stream:ee_PULL,streamId:$,desiredSize:N.desiredSize}),O.promise},cancel:N=>{(0,k.assert)(N instanceof Error,"cancel must have a valid reason");const O=(0,k.createPromiseCapability)();return this.streamControllers[$].cancelCall=O,this.streamControllers[$].isClosed=!0,W.postMessage({sourceName:ae,targetName:oe,stream:ee_CANCEL,streamId:$,reason:e(N)}),O.promise}},f)}_createStreamSink(te){const re=this,f=this.actionHandler[te.action],c=te.streamId,$=this.sourceName,ae=te.sourceName,oe=this.comObj,W={enqueue(N,O=1,M){if(this.isCancelled)return;const A=this.desiredSize;this.desiredSize-=O,A>0&&this.desiredSize<=0&&(this.sinkCapability=(0,k.createPromiseCapability)(),this.ready=this.sinkCapability.promise),re._postMessage({sourceName:$,targetName:ae,stream:ee_ENQUEUE,streamId:c,chunk:N},M)},close(){this.isCancelled||(this.isCancelled=!0,oe.postMessage({sourceName:$,targetName:ae,stream:ee_CLOSE,streamId:c}),delete re.streamSinks[c])},error(N){(0,k.assert)(N instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,oe.postMessage({sourceName:$,targetName:ae,stream:ee_ERROR,streamId:c,reason:e(N)}))},sinkCapability:(0,k.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:te.desiredSize,ready:null};W.sinkCapability.resolve(),W.ready=W.sinkCapability.promise,this.streamSinks[c]=W,new Promise(function(N){N(f(te.data,W))}).then(function(){oe.postMessage({sourceName:$,targetName:ae,stream:ee_START_COMPLETE,streamId:c,success:!0})},function(N){oe.postMessage({sourceName:$,targetName:ae,stream:ee_START_COMPLETE,streamId:c,reason:e(N)})})}_processStreamMessage(te){const re=te.streamId,f=this.sourceName,c=te.sourceName,$=this.comObj;switch(te.stream){case ee_START_COMPLETE:te.success?this.streamControllers[re].startCall.resolve():this.streamControllers[re].startCall.reject(e(te.reason));break;case ee_PULL_COMPLETE:te.success?this.streamControllers[re].pullCall.resolve():this.streamControllers[re].pullCall.reject(e(te.reason));break;case ee_PULL:if(!this.streamSinks[re]){$.postMessage({sourceName:f,targetName:c,stream:ee_PULL_COMPLETE,streamId:re,success:!0});break}this.streamSinks[re].desiredSize<=0&&te.desiredSize>0&&this.streamSinks[re].sinkCapability.resolve(),this.streamSinks[re].desiredSize=te.desiredSize;const{onPull:ae}=this.streamSinks[te.streamId];new Promise(function(W){W(ae&&ae())}).then(function(){$.postMessage({sourceName:f,targetName:c,stream:ee_PULL_COMPLETE,streamId:re,success:!0})},function(W){$.postMessage({sourceName:f,targetName:c,stream:ee_PULL_COMPLETE,streamId:re,reason:e(W)})});break;case ee_ENQUEUE:if((0,k.assert)(this.streamControllers[re],"enqueue should have stream controller"),this.streamControllers[re].isClosed)break;this.streamControllers[re].controller.enqueue(te.chunk);break;case ee_CLOSE:if((0,k.assert)(this.streamControllers[re],"close should have stream controller"),this.streamControllers[re].isClosed)break;this.streamControllers[re].isClosed=!0,this.streamControllers[re].controller.close(),this._deleteStreamController(re);break;case ee_ERROR:(0,k.assert)(this.streamControllers[re],"error should have stream controller"),this.streamControllers[re].controller.error(e(te.reason)),this._deleteStreamController(re);break;case ee_CANCEL_COMPLETE:te.success?this.streamControllers[re].cancelCall.resolve():this.streamControllers[re].cancelCall.reject(e(te.reason)),this._deleteStreamController(re);break;case ee_CANCEL:if(!this.streamSinks[re])break;const{onCancel:oe}=this.streamSinks[te.streamId];new Promise(function(W){W(oe&&oe(e(te.reason)))}).then(function(){$.postMessage({sourceName:f,targetName:c,stream:ee_CANCEL_COMPLETE,streamId:re,success:!0})},function(W){$.postMessage({sourceName:f,targetName:c,stream:ee_CANCEL_COMPLETE,streamId:re,reason:e(W)})}),this.streamSinks[re].sinkCapability.reject(e(te.reason)),this.streamSinks[re].isCancelled=!0,delete this.streamSinks[re];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(te){var re=this;return le(function*(){yield Promise.allSettled([re.streamControllers[te].startCall,re.streamControllers[te].pullCall,re.streamControllers[te].cancelCall].map(function(f){return f&&f.promise})),delete re.streamControllers[te]})()}_postMessage(te,re){re&&this.postMessageTransfers?this.comObj.postMessage(te,re):this.comObj.postMessage(te)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(Ee,se,y){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.PDFWorkerStream=void 0;var k=y(2);se.PDFWorkerStream=class fe{constructor(H){this._msgHandler=H,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,k.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new ee(this._msgHandler),this._fullRequestReader}getRangeReader(H,te){const re=new e(H,te,this._msgHandler);return this._rangeRequestReaders.push(re),re}cancelAllRequests(H){this._fullRequestReader&&this._fullRequestReader.cancel(H),this._rangeRequestReaders.slice(0).forEach(function(re){re.cancel(H)})}};class ee{constructor(H){this._msgHandler=H,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const te=this._msgHandler.sendWithStream("GetReader");this._reader=te.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(re=>{this._isStreamingSupported=re.isStreamingSupported,this._isRangeSupported=re.isRangeSupported,this._contentLength=re.contentLength})}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}read(){var H=this;return le(function*(){const{value:te,done:re}=yield H._reader.read();return re?{value:void 0,done:!0}:{value:te.buffer,done:!1}})()}cancel(H){this._reader.cancel(H)}}class e{constructor(H,te,re){this._msgHandler=re,this.onProgress=null;const f=this._msgHandler.sendWithStream("GetRangeReader",{begin:H,end:te});this._reader=f.getReader()}get isStreamingSupported(){return!1}read(){var H=this;return le(function*(){const{value:te,done:re}=yield H._reader.read();return re?{value:void 0,done:!0}:{value:te.buffer,done:!1}})()}cancel(H){this._reader.cancel(H)}}}])},69:()=>{},339:()=>{},828:()=>{},915:()=>{},598:()=>{},372:()=>{},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{},624:function(yt){yt.exports=function(){"use strict";var he={},Oe={};function le(se,y,k){if(Oe[se]=k,"index"===se){var fe="var sharedModule = {}; ("+Oe.shared+")(sharedModule); ("+Oe.worker+")(sharedModule);",ee={};return Oe.shared(ee),Oe.index(he,ee),typeof window<"u"&&he.setWorkerUrl(window.URL.createObjectURL(new Blob([fe],{type:"text/javascript"}))),he}}return le("shared",0,function(se){function y(l,s,u,g){return new(u||(u=Promise))(function(D,X){function ne(Ae){try{me(g.next(Ae))}catch(Ie){X(Ie)}}function de(Ae){try{me(g.throw(Ae))}catch(Ie){X(Ie)}}function me(Ae){var Ie;Ae.done?D(Ae.value):(Ie=Ae.value,Ie instanceof u?Ie:new u(function(Le){Le(Ie)})).then(ne,de)}me((g=g.apply(l,s||[])).next())})}function k(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}"function"==typeof SuppressedError&&SuppressedError;var fe=ee;function ee(l,s){this.x=l,this.y=s}ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,s){return this.clone()._rotateAround(l,s)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var s=l.x-this.x,u=l.y-this.y;return s*s+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,s){return Math.atan2(this.x*s-this.y*l,this.x*l+this.y*s)},_matMult:function(l){var s=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=s,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var s=Math.cos(l),u=Math.sin(l),g=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=g,this},_rotateAround:function(l,s){var u=Math.cos(l),g=Math.sin(l),D=s.y+g*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-g*(this.y-s.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ee.convert=function(l){return l instanceof ee?l:Array.isArray(l)?new ee(l[0],l[1]):l};var e=k(fe),V=H;function H(l,s,u,g){this.cx=3*l,this.bx=3*(u-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=u,this.p2y=g}H.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(void 0===s&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var u=l,g=0;g<8;g++){var D=this.sampleCurveX(u)-l;if(Math.abs(D)<s)return u;var X=this.sampleCurveDerivativeX(u);if(Math.abs(X)<1e-6)break;u-=D/X}var ne=0,de=1;for(u=l,g=0;g<20&&(D=this.sampleCurveX(u),!(Math.abs(D-l)<s));g++)l>D?ne=u:de=u,u=.5*(de-ne)+ne;return u},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};var te=k(V);let re,f;function c(){return null==re&&(re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),re}function $(){if(null==f&&(f=!1,c())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let g=0;g<25;g++){const D=4*g;s.fillStyle=`rgb(${D},${D+1},${D+2})`,s.fillRect(g%5,Math.floor(g/5),1,1)}const u=s.getImageData(0,0,5,5).data;for(let g=0;g<100;g++)if(g%4!=3&&u[g]!==g){f=!0;break}}}return f||!1}function ae(l,s,u,g){const D=new te(l,s,u,g);return X=>D.solve(X)}const oe=ae(.25,.1,.25,1);function W(l,s,u){return Math.min(u,Math.max(s,l))}function N(l,s,u){const g=u-s,D=((l-s)%g+g)%g+s;return D===s?u:D}function O(l,...s){for(const u of s)for(const g in u)l[g]=u[g];return l}let M=1;function A(l,s,u){const g={};for(const D in l)g[D]=s.call(this,l[D],D,l);return g}function b(l,s,u){const g={};for(const D in l)s.call(this,l[D],D,l)&&(g[D]=l[D]);return g}function q(l){return Array.isArray(l)?l.map(q):"object"==typeof l&&l?A(l,q):l}const C={};function P(l){C[l]||(typeof console<"u"&&console.warn(l),C[l]=!0)}function F(l,s,u){return(u.y-l.y)*(s.x-l.x)>(s.y-l.y)*(u.x-l.x)}function I(l){return typeof WorkerGlobalScope<"u"&&void 0!==l&&l instanceof WorkerGlobalScope}let j=null;function E(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function p(l,s,u,g,D){return y(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const X=new VideoFrame(l,{timestamp:0});try{const ne=X?.format;if(!ne||!ne.startsWith("BGR")&&!ne.startsWith("RGB"))throw new Error(`Unrecognized format ${ne}`);const de=ne.startsWith("BGR"),me=new Uint8ClampedArray(g*D*4);if(yield X.copyTo(me,function(Ae,Ie,Le,Ve,Ke){const nt=4*Math.max(-Ie,0),ut=(Math.max(0,Le)-Le)*Ve*4+nt,xt=4*Ve,At=Math.max(0,Ie),Rt=Math.max(0,Le);return{rect:{x:At,y:Rt,width:Math.min(Ae.width,Ie+Ve)-At,height:Math.min(Ae.height,Le+Ke)-Rt},layout:[{offset:ut,stride:xt}]}}(l,s,u,g,D)),de)for(let Ae=0;Ae<me.length;Ae+=4){const Ie=me[Ae];me[Ae]=me[Ae+2],me[Ae+2]=Ie}return me}finally{X.close()}})}let m,_;const R="AbortError";function G(){return new Error(R)}const K={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function U(l){return K.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const z="global-dispatcher";class L extends Error{constructor(s,u,g,D){super(`AJAXError: ${u} (${s}): ${g}`),this.status=s,this.statusText=u,this.url=g,this.body=D}}const S=()=>I(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,B=function(l,s){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const g=U(l.url);if(g)return g(l,s);if(I(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:z},s)}if(!(/^file:/.test(u=l.url)||/^file:/.test(S())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(g,D){return y(this,void 0,void 0,function*(){const X=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:S(),signal:D.signal});"json"!==g.type||X.headers.has("Accept")||X.headers.set("Accept","application/json");const ne=yield fetch(X);if(!ne.ok){const Ae=yield ne.blob();throw new L(ne.status,ne.statusText,g.url,Ae)}let de;de="arrayBuffer"===g.type||"image"===g.type?ne.arrayBuffer():"json"===g.type?ne.json():ne.text();const me=yield de;if(D.signal.aborted)throw G();return{data:me,cacheControl:ne.headers.get("Cache-Control"),expires:ne.headers.get("Expires")}})}(l,s);if(I(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:z},s)}var u,g,D;return g=l,D=s,new Promise((X,ne)=>{var de;const me=new XMLHttpRequest;me.open(g.method||"GET",g.url,!0),"arrayBuffer"!==g.type&&"image"!==g.type||(me.responseType="arraybuffer");for(const Ae in g.headers)me.setRequestHeader(Ae,g.headers[Ae]);"json"===g.type&&(me.responseType="text",!(null===(de=g.headers)||void 0===de)&&de.Accept||me.setRequestHeader("Accept","application/json")),me.withCredentials="include"===g.credentials,me.onerror=()=>{ne(new Error(me.statusText))},me.onload=()=>{if(!D.signal.aborted)if((me.status>=200&&me.status<300||0===me.status)&&null!==me.response){let Ae=me.response;if("json"===g.type)try{Ae=JSON.parse(me.response)}catch(Ie){return void ne(Ie)}X({data:Ae,cacheControl:me.getResponseHeader("Cache-Control"),expires:me.getResponseHeader("Expires")})}else{const Ae=new Blob([me.response],{type:me.getResponseHeader("Content-Type")});ne(new L(me.status,me.statusText,g.url,Ae))}},D.signal.addEventListener("abort",()=>{me.abort(),ne(G())}),me.send(g.body)})};function J(l){if(!l||l.indexOf("://")<=0||0===l.indexOf("data:image/")||0===l.indexOf("blob:"))return!0;const s=new URL(l),u=window.location;return s.protocol===u.protocol&&s.host===u.host}function ie(l,s,u){u[l]&&-1!==u[l].indexOf(s)||(u[l]=u[l]||[],u[l].push(s))}function ce(l,s,u){if(u&&u[l]){const g=u[l].indexOf(s);-1!==g&&u[l].splice(g,1)}}class pe{constructor(s,u={}){O(this,u),this.type=s}}class ye extends pe{constructor(s,u={}){super("error",O({error:s},u))}}class Te{on(s,u){return this._listeners=this._listeners||{},ie(s,u,this._listeners),this}off(s,u){return ce(s,u,this._listeners),ce(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},ie(s,u,this._oneTimeListeners),this):new Promise(g=>this.once(s,g))}fire(s,u){"string"==typeof s&&(s=new pe(s,u||{}));const g=s.type;if(this.listens(g)){s.target=this;const D=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const de of D)de.call(this,s);const X=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const de of X)ce(g,de,this._oneTimeListeners),de.call(this,s);const ne=this._eventedParent;ne&&(O(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ne.fire(s))}else s instanceof ye&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}var _e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const we=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function De(l,s){const u={};for(const g in l)"ref"!==g&&(u[g]=l[g]);return we.forEach(g=>{g in s&&(u[g]=s[g])}),u}function xe(l,s){if(Array.isArray(l)){if(!Array.isArray(s)||l.length!==s.length)return!1;for(let u=0;u<l.length;u++)if(!xe(l[u],s[u]))return!1;return!0}if("object"==typeof l&&null!==l&&null!==s){if("object"!=typeof s||Object.keys(l).length!==Object.keys(s).length)return!1;for(const u in l)if(!xe(l[u],s[u]))return!1;return!0}return l===s}function Ce(l,s){l.push(s)}function Me(l,s,u){Ce(u,{command:"addSource",args:[l,s[l]]})}function Ne(l,s,u){Ce(s,{command:"removeSource",args:[l]}),u[l]=!0}function We(l,s,u,g){Ne(l,u,g),Me(l,s,u)}function Xe(l,s,u){let g;for(g in l[u])if(Object.prototype.hasOwnProperty.call(l[u],g)&&"data"!==g&&!xe(l[u][g],s[u][g]))return!1;for(g in s[u])if(Object.prototype.hasOwnProperty.call(s[u],g)&&"data"!==g&&!xe(l[u][g],s[u][g]))return!1;return!0}function Qe(l,s,u,g,D,X){l=l||{},s=s||{};for(const ne in l)Object.prototype.hasOwnProperty.call(l,ne)&&(xe(l[ne],s[ne])||u.push({command:X,args:[g,ne,s[ne],D]}));for(const ne in s)Object.prototype.hasOwnProperty.call(s,ne)&&!Object.prototype.hasOwnProperty.call(l,ne)&&(xe(l[ne],s[ne])||u.push({command:X,args:[g,ne,s[ne],D]}))}function Ye(l){return l.id}function Je(l,s){return l[s.id]=s,l}class He{constructor(s,u,g,D){this.message=(s?`${s}: `:"")+g,D&&(this.identifier=D),null!=u&&u.__line__&&(this.line=u.__line__)}}function it(l,...s){for(const u of s)for(const g in u)l[g]=u[g];return l}class dt extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class pt{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[g,D]of u)this.bindings[g]=D}concat(s){return new pt(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Dt={kind:"null"},et={kind:"number"},st={kind:"string"},Ge={kind:"boolean"},Ze={kind:"color"},je={kind:"object"},Ue={kind:"value"},ct={kind:"collator"},_t={kind:"formatted"},Ut={kind:"padding"},jt={kind:"resolvedImage"},rt={kind:"variableAnchorOffsetCollection"};function Pe(l,s){return{kind:"array",itemType:l,N:s}}function Fe(l){if("array"===l.kind){const s=Fe(l.itemType);return"number"==typeof l.N?`array<${s}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${s}>`}return l.kind}const $e=[Dt,et,st,Ge,Ze,_t,je,Pe(Ue),Ut,jt,rt];function at(l,s){if("error"===s.kind)return null;if("array"===l.kind){if("array"===s.kind&&(0===s.N&&"value"===s.itemType.kind||!at(l.itemType,s.itemType))&&("number"!=typeof l.N||l.N===s.N))return null}else{if(l.kind===s.kind)return null;if("value"===l.kind)for(const u of $e)if(!at(u,s))return null}return`Expected ${Fe(l)} but found ${Fe(s)} instead.`}function lt(l,s){return s.some(u=>u.kind===l.kind)}function bt(l,s){return s.some(u=>"null"===u?null===l:"array"===u?Array.isArray(l):"object"===u?l&&!Array.isArray(l)&&"object"==typeof l:u===typeof l)}function Et(l,s){return"array"===l.kind&&"array"===s.kind?l.itemType.kind===s.itemType.kind&&"number"==typeof l.N:l.kind===s.kind}const Lt=4/29,It=6/29,Gt=3*It*It,rn=It*It*It,un=Math.PI/180,zn=180/Math.PI;function Pn(l){return(l%=360)<0&&(l+=360),l}function En([l,s,u,g]){let D,X;const ne=Ti((.2225045*(l=fi(l))+.7168786*(s=fi(s))+.0606169*(u=fi(u)))/1);l===s&&s===u?D=X=ne:(D=Ti((.4360747*l+.3850649*s+.1430804*u)/.96422),X=Ti((.0139322*l+.0971045*s+.7141733*u)/.82521));const de=116*ne-16;return[de<0?0:de,500*(D-ne),200*(ne-X),g]}function fi(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Ti(l){return l>rn?Math.pow(l,1/3):l/Gt+Lt}function Li([l,s,u,g]){let D=(l+16)/116,X=isNaN(s)?D:D+s/500,ne=isNaN(u)?D:D-u/200;return D=1*pi(D),X=.96422*pi(X),ne=.82521*pi(ne),[Qn(3.1338561*X-1.6168667*D-.4906146*ne),Qn(-.9787684*X+1.9161415*D+.033454*ne),Qn(.0719453*X-.2289914*D+1.4052427*ne),g]}function Qn(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function pi(l){return l>It?l*l*l:Gt*(l-Lt)}function ji(l){return parseInt(l.padEnd(2,l),16)/255}function _i(l,s){return lr(s?l/100:l,0,1)}function lr(l,s,u){return Math.min(Math.max(s,l),u)}function Bi(l){return!l.some(Number.isNaN)}const Za={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class bi{constructor(s,u,g,D=1,X=!0){this.r=s,this.g=u,this.b=g,this.a=D,X||(this.r*=D,this.g*=D,this.b*=D,D||this.overwriteGetter("rgb",[s,u,g,D]))}static parse(s){if(s instanceof bi)return s;if("string"!=typeof s)return;const u=function(g){if("transparent"===(g=g.toLowerCase().trim()))return[0,0,0,0];const D=Za[g];if(D){const[ne,de,me]=D;return[ne/255,de/255,me/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const ne=g.length<6?1:2;let de=1;return[ji(g.slice(de,de+=ne)),ji(g.slice(de,de+=ne)),ji(g.slice(de,de+=ne)),ji(g.slice(de,de+ne)||"ff")]}if(g.startsWith("rgb")){const ne=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ne){const[de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At,Rt]=ne,Tt=[Ie||" ",Ke||" ",xt].join("");if("  "===Tt||"  /"===Tt||",,"===Tt||",,,"===Tt){const Ft=[Ae,Ve,ut].join(""),Ht="%%%"===Ft?100:""===Ft?255:0;if(Ht){const Qt=[lr(+me/Ht,0,1),lr(+Le/Ht,0,1),lr(+nt/Ht,0,1),At?_i(+At,Rt):1];if(Bi(Qt))return Qt}}return}}const X=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(X){const[ne,de,me,Ae,Ie,Le,Ve,Ke,nt]=X,ut=[me||" ",Ie||" ",Ve].join("");if("  "===ut||"  /"===ut||",,"===ut||",,,"===ut){const xt=[+de,lr(+Ae,0,100),lr(+Le,0,100),Ke?_i(+Ke,nt):1];if(Bi(xt))return function([At,Rt,Tt,Ft]){function Ht(Qt){const mn=(Qt+At/30)%12,Gn=Rt*Math.min(Tt,1-Tt);return Tt-Gn*Math.max(-1,Math.min(mn-3,9-mn,1))}return At=Pn(At),Rt/=100,Tt/=100,[Ht(0),Ht(8),Ht(4),Ft]}(xt)}}}(s);return u?new bi(...u,!1):void 0}get rgb(){const{r:s,g:u,b:g,a:D}=this,X=D||1/0;return this.overwriteGetter("rgb",[s/X,u/X,g/X,D])}get hcl(){return this.overwriteGetter("hcl",function(s){const[u,g,D,X]=En(s),ne=Math.sqrt(g*g+D*D);return[Math.round(1e4*ne)?Pn(Math.atan2(D,g)*zn):NaN,ne,u,X]}(this.rgb))}get lab(){return this.overwriteGetter("lab",En(this.rgb))}overwriteGetter(s,u){return Object.defineProperty(this,s,{value:u}),u}toString(){const[s,u,g,D]=this.rgb;return`rgba(${[s,u,g].map(X=>Math.round(255*X)).join(",")},${D})`}}bi.black=new bi(0,0,0,1),bi.white=new bi(1,1,1,1),bi.transparent=new bi(0,0,0,0),bi.red=new bi(1,0,0,1);class ko{constructor(s,u,g){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class uo{constructor(s,u,g,D,X){this.text=s,this.image=u,this.scale=g,this.fontStack=D,this.textColor=X}}class br{constructor(s){this.sections=s}static fromString(s){return new br([new uo(s,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(s=>0!==s.text.length||s.image&&0!==s.image.name.length)}static factory(s){return s instanceof br?s:br.fromString(s)}toString(){return 0===this.sections.length?"":this.sections.map(s=>s.text).join("")}}class kr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof kr)return s;if("number"==typeof s)return new kr([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const u of s)if("number"!=typeof u)return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new kr(s)}}toString(){return JSON.stringify(this.values)}}const Zl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ts{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof ts)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let u=0;u<s.length;u+=2){const g=s[u],D=s[u+1];if("string"!=typeof g||!Zl.has(g)||!Array.isArray(D)||2!==D.length||"number"!=typeof D[0]||"number"!=typeof D[1])return}return new ts(s)}}toString(){return JSON.stringify(this.values)}}class Ir{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Ir({name:s,available:!1}):null}}function cl(l,s,u,g){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof s&&s>=0&&s<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===g||"number"==typeof g&&g>=0&&g<=1?null:`Invalid rgba value [${[l,s,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof g?[l,s,u,g]:[l,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Io(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof bi||l instanceof ko||l instanceof br||l instanceof kr||l instanceof ts||l instanceof Ir)return!0;if(Array.isArray(l)){for(const s of l)if(!Io(s))return!1;return!0}if("object"==typeof l){for(const s in l)if(!Io(l[s]))return!1;return!0}return!1}function wr(l){if(null===l)return Dt;if("string"==typeof l)return st;if("boolean"==typeof l)return Ge;if("number"==typeof l)return et;if(l instanceof bi)return Ze;if(l instanceof ko)return ct;if(l instanceof br)return _t;if(l instanceof kr)return Ut;if(l instanceof ts)return rt;if(l instanceof Ir)return jt;if(Array.isArray(l)){const s=l.length;let u;for(const g of l){const D=wr(g);if(u){if(u===D)continue;u=Ue;break}u=D}return Pe(u||Ue,s)}return je}function sa(l){const s=typeof l;return null===l?"":"string"===s||"number"===s||"boolean"===s?String(l):l instanceof bi||l instanceof br||l instanceof kr||l instanceof ts||l instanceof Ir?l.toString():JSON.stringify(l)}class ba{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(2!==s.length)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Io(s[1]))return u.error("invalid value");const g=s[1];let D=wr(g);const X=u.expectedType;return"array"!==D.kind||0!==D.N||!X||"array"!==X.kind||"number"==typeof X.N&&0!==X.N||(D=X),new ba(D,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Zt{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Jt={string:st,number:et,boolean:Ge,object:je};class $t{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let g,D=1;const X=s[0];if("array"===X){let de,me;if(s.length>2){const Ae=s[1];if("string"!=typeof Ae||!(Ae in Jt)||"object"===Ae)return u.error('The item type argument of "array" must be one of string, number, boolean',1);de=Jt[Ae],D++}else de=Ue;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);me=s[2],D++}g=Pe(de,me)}else{if(!Jt[X])throw new Error(`Types doesn't contain name = ${X}`);g=Jt[X]}const ne=[];for(;D<s.length;D++){const de=u.parse(s[D],D,Ue);if(!de)return null;ne.push(de)}return new $t(g,ne)}evaluate(s){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(s);if(!at(this.type,wr(g)))return g;if(u===this.args.length-1)throw new Zt(`Expected value to be of type ${Fe(this.type)}, but found ${Fe(wr(g))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const pn={"to-boolean":Ge,"to-color":Ze,"to-number":et,"to-string":st};class sn{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const g=s[0];if(!pn[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if(("to-boolean"===g||"to-string"===g)&&2!==s.length)return u.error("Expected one argument.");const D=pn[g],X=[];for(let ne=1;ne<s.length;ne++){const de=u.parse(s[ne],ne,Ue);if(!de)return null;X.push(de)}return new sn(D,X)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let u,g;for(const D of this.args){if(u=D.evaluate(s),g=null,u instanceof bi)return u;if("string"==typeof u){const X=s.parseColor(u);if(X)return X}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:cl(u[0],u[1],u[2],u[3]),!g))return new bi(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Zt(g||`Could not parse color from value '${"string"==typeof u?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(s);const D=kr.parse(u);if(D)return D}throw new Zt(`Could not parse padding from value '${"string"==typeof u?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(s);const D=ts.parse(u);if(D)return D}throw new Zt(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof u?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(s),null===u)return 0;const D=Number(u);if(!isNaN(D))return D}throw new Zt(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return br.fromString(sa(this.args[0].evaluate(s)));case"resolvedImage":return Ir.fromString(sa(this.args[0].evaluate(s)));default:return sa(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const tn=["Unknown","Point","LineString","Polygon"];class Wn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?tn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let u=this._parseColorCache[s];return u||(u=this._parseColorCache[s]=bi.parse(s)),u}}class vn{constructor(s,u,g=[],D,X=new pt,ne=[]){this.registry=s,this.path=g,this.key=g.map(de=>`[${de}]`).join(""),this.scope=X,this.errors=ne,this.expectedType=D,this._isConstant=u}parse(s,u,g,D,X={}){return u?this.concat(u,g,D)._parse(s,X):this._parse(s,X)}_parse(s,u){function g(D,X,ne){return"assert"===ne?new $t(X,[D]):"coerce"===ne?new sn(X,[D]):D}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const D=s[0];if("string"!=typeof D)return this.error(`Expression name must be a string, but found ${typeof D} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const X=this.registry[D];if(X){let ne=X.parse(s,this);if(!ne)return null;if(this.expectedType){const de=this.expectedType,me=ne.type;if("string"!==de.kind&&"number"!==de.kind&&"boolean"!==de.kind&&"object"!==de.kind&&"array"!==de.kind||"value"!==me.kind)if("color"!==de.kind&&"formatted"!==de.kind&&"resolvedImage"!==de.kind||"value"!==me.kind&&"string"!==me.kind)if("padding"!==de.kind||"value"!==me.kind&&"number"!==me.kind&&"array"!==me.kind)if("variableAnchorOffsetCollection"!==de.kind||"value"!==me.kind&&"array"!==me.kind){if(this.checkSubtype(de,me))return null}else ne=g(ne,de,u.typeAnnotation||"coerce");else ne=g(ne,de,u.typeAnnotation||"coerce");else ne=g(ne,de,u.typeAnnotation||"coerce");else ne=g(ne,de,u.typeAnnotation||"assert")}if(!(ne instanceof ba)&&"resolvedImage"!==ne.type.kind&&this._isConstant(ne)){const de=new Wn;try{ne=new ba(ne.type,ne.evaluate(de))}catch(me){return this.error(me.message),null}}return ne}return this.error(`Unknown expression "${D}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,g){const D="number"==typeof s?this.path.concat(s):this.path,X=g?this.scope.concat(g):this.scope;return new vn(this.registry,this._isConstant,D,u||null,X,this.errors)}error(s,...u){const g=`${this.key}${u.map(D=>`[${D}]`).join("")}`;this.errors.push(new dt(g,s))}checkSubtype(s,u){const g=at(s,u);return g&&this.error(g),g}}class fn{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const g=[];for(let X=1;X<s.length-1;X+=2){const ne=s[X];if("string"!=typeof ne)return u.error(`Expected string, but found ${typeof ne} instead.`,X);if(/[^a-zA-Z0-9_]/.test(ne))return u.error("Variable names must contain only alphanumeric characters or '_'.",X);const de=u.parse(s[X+1],X+1);if(!de)return null;g.push([ne,de])}const D=u.parse(s[s.length-1],s.length-1,u.expectedType,g);return D?new fn(g,D):null}outputDefined(){return this.result.outputDefined()}}class ai{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(2!==s.length||"string"!=typeof s[1])return u.error("'var' expression requires exactly one string literal argument.");const g=s[1];return u.scope.has(g)?new ai(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class mi{constructor(s,u,g){this.type=s,this.index=u,this.input=g}static parse(s,u){if(3!==s.length)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const g=u.parse(s[1],1,et),D=u.parse(s[2],2,Pe(u.expectedType||Ue));return g&&D?new mi(D.type.itemType,g,D):null}evaluate(s){const u=this.index.evaluate(s),g=this.input.evaluate(s);if(u<0)throw new Zt(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Zt(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Zt(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Dn{constructor(s,u){this.type=Ge,this.needle=s,this.haystack=u}static parse(s,u){if(3!==s.length)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const g=u.parse(s[1],1,Ue),D=u.parse(s[2],2,Ue);return g&&D?lt(g.type,[Ge,st,et,Dt,Ue])?new Dn(g,D):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(g.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),g=this.haystack.evaluate(s);if(!g)return!1;if(!bt(u,["boolean","string","number","null"]))throw new Zt(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(wr(u))} instead.`);if(!bt(g,["string","array"]))throw new Zt(`Expected second argument to be of type array or string, but found ${Fe(wr(g))} instead.`);return g.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class zi{constructor(s,u,g){this.type=et,this.needle=s,this.haystack=u,this.fromIndex=g}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const g=u.parse(s[1],1,Ue),D=u.parse(s[2],2,Ue);if(!g||!D)return null;if(!lt(g.type,[Ge,st,et,Dt,Ue]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(g.type)} instead`);if(4===s.length){const X=u.parse(s[3],3,et);return X?new zi(g,D,X):null}return new zi(g,D)}evaluate(s){const u=this.needle.evaluate(s),g=this.haystack.evaluate(s);if(!bt(u,["boolean","string","number","null"]))throw new Zt(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(wr(u))} instead.`);if(!bt(g,["string","array"]))throw new Zt(`Expected second argument to be of type array or string, but found ${Fe(wr(g))} instead.`);if(this.fromIndex){const D=this.fromIndex.evaluate(s);return g.indexOf(u,D)}return g.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class oi{constructor(s,u,g,D,X,ne){this.inputType=s,this.type=u,this.input=g,this.cases=D,this.outputs=X,this.otherwise=ne}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let g,D;u.expectedType&&"value"!==u.expectedType.kind&&(D=u.expectedType);const X={},ne=[];for(let Ae=2;Ae<s.length-1;Ae+=2){let Ie=s[Ae];const Le=s[Ae+1];Array.isArray(Ie)||(Ie=[Ie]);const Ve=u.concat(Ae);if(0===Ie.length)return Ve.error("Expected at least one branch label.");for(const nt of Ie){if("number"!=typeof nt&&"string"!=typeof nt)return Ve.error("Branch labels must be numbers or strings.");if("number"==typeof nt&&Math.abs(nt)>Number.MAX_SAFE_INTEGER)return Ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof nt&&Math.floor(nt)!==nt)return Ve.error("Numeric branch labels must be integer values.");if(g){if(Ve.checkSubtype(g,wr(nt)))return null}else g=wr(nt);if(void 0!==X[String(nt)])return Ve.error("Branch labels must be unique.");X[String(nt)]=ne.length}const Ke=u.parse(Le,Ae,D);if(!Ke)return null;D=D||Ke.type,ne.push(Ke)}const de=u.parse(s[1],1,Ue);if(!de)return null;const me=u.parse(s[s.length-1],s.length-1,D);return me?"value"!==de.type.kind&&u.concat(1).checkSubtype(g,de.type)?null:new oi(g,D,de,X,ne,me):null}evaluate(s){const u=this.input.evaluate(s);return(wr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class wi{constructor(s,u,g){this.type=s,this.branches=u,this.otherwise=g}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&"value"!==u.expectedType.kind&&(g=u.expectedType);const D=[];for(let ne=1;ne<s.length-1;ne+=2){const de=u.parse(s[ne],ne,Ge);if(!de)return null;const me=u.parse(s[ne+1],ne+1,g);if(!me)return null;D.push([de,me]),g=g||me.type}const X=u.parse(s[s.length-1],s.length-1,g);if(!X)return null;if(!g)throw new Error("Can't infer output type");return new wi(g,D,X)}evaluate(s){for(const[u,g]of this.branches)if(u.evaluate(s))return g.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,g]of this.branches)s(u),s(g);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Mi{constructor(s,u,g,D){this.type=s,this.input=u,this.beginIndex=g,this.endIndex=D}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const g=u.parse(s[1],1,Ue),D=u.parse(s[2],2,et);if(!g||!D)return null;if(!lt(g.type,[Pe(Ue),st,Ue]))return u.error(`Expected first argument to be of type array or string, but found ${Fe(g.type)} instead`);if(4===s.length){const X=u.parse(s[3],3,et);return X?new Mi(g.type,g,D,X):null}return new Mi(g.type,g,D)}evaluate(s){const u=this.input.evaluate(s),g=this.beginIndex.evaluate(s);if(!bt(u,["string","array"]))throw new Zt(`Expected first argument to be of type array or string, but found ${Fe(wr(u))} instead.`);if(this.endIndex){const D=this.endIndex.evaluate(s);return u.slice(g,D)}return u.slice(g)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Mn(l,s){const u=l.length-1;let g,D,X=0,ne=u,de=0;for(;X<=ne;)if(de=Math.floor((X+ne)/2),g=l[de],D=l[de+1],g<=s){if(de===u||s<D)return de;X=de+1}else{if(!(g>s))throw new Zt("Input is not a number.");ne=de-1}return 0}class an{constructor(s,u,g){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[D,X]of g)this.labels.push(D),this.outputs.push(X)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(s[1],1,et);if(!g)return null;const D=[];let X=null;u.expectedType&&"value"!==u.expectedType.kind&&(X=u.expectedType);for(let ne=1;ne<s.length;ne+=2){const de=1===ne?-1/0:s[ne],me=s[ne+1],Ae=ne,Ie=ne+1;if("number"!=typeof de)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ae);if(D.length&&D[D.length-1][0]>=de)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ae);const Le=u.parse(me,Ie,X);if(!Le)return null;X=X||Le.type,D.push([de,Le])}return new an(X,g,D)}evaluate(s){const u=this.labels,g=this.outputs;if(1===u.length)return g[0].evaluate(s);const D=this.input.evaluate(s);if(D<=u[0])return g[0].evaluate(s);const X=u.length;return D>=u[X-1]?g[X-1].evaluate(s):g[Mn(u,D)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}var li=qi;function qi(l,s,u,g){this.cx=3*l,this.bx=3*(u-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=u,this.p2y=g}qi.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(void 0===s&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var u=l,g=0;g<8;g++){var D=this.sampleCurveX(u)-l;if(Math.abs(D)<s)return u;var X=this.sampleCurveDerivativeX(u);if(Math.abs(X)<1e-6)break;u-=D/X}var ne=0,de=1;for(u=l,g=0;g<20&&(D=this.sampleCurveX(u),!(Math.abs(D-l)<s));g++)l>D?ne=u:de=u,u=.5*(de-ne)+ne;return u},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};var ki=function sr(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}(li);function qt(l,s,u){return l+u*(s-l)}function ws(l,s,u){return l.map((g,D)=>qt(g,s[D],u))}const jn={number:qt,color:function(l,s,u,g="rgb"){switch(g){case"rgb":{const[D,X,ne,de]=ws(l.rgb,s.rgb,u);return new bi(D,X,ne,de,!1)}case"hcl":{const[D,X,ne,de]=l.hcl,[me,Ae,Ie,Le]=s.hcl;let Ve,Ke;if(isNaN(D)||isNaN(me))isNaN(D)?isNaN(me)?Ve=NaN:(Ve=me,1!==ne&&0!==ne||(Ke=Ae)):(Ve=D,1!==Ie&&0!==Ie||(Ke=X));else{let Rt=me-D;me>D&&Rt>180?Rt-=360:me<D&&D-me>180&&(Rt+=360),Ve=D+u*Rt}const[nt,ut,xt,At]=function([Rt,Tt,Ft,Ht]){return Rt=isNaN(Rt)?0:Rt*un,Li([Ft,Math.cos(Rt)*Tt,Math.sin(Rt)*Tt,Ht])}([Ve,Ke??qt(X,Ae,u),qt(ne,Ie,u),qt(de,Le,u)]);return new bi(nt,ut,xt,At,!1)}case"lab":{const[D,X,ne,de]=Li(ws(l.lab,s.lab,u));return new bi(D,X,ne,de,!1)}}},array:ws,padding:function(l,s,u){return new kr(ws(l.values,s.values,u))},variableAnchorOffsetCollection:function(l,s,u){const g=l.values,D=s.values;if(g.length!==D.length)throw new Zt(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${s.toString()}`);const X=[];for(let ne=0;ne<g.length;ne+=2){if(g[ne]!==D[ne])throw new Zt(`Cannot interpolate values containing mismatched anchors. from[${ne}]: ${g[ne]}, to[${ne}]: ${D[ne]}`);X.push(g[ne]);const[de,me]=g[ne+1],[Ae,Ie]=D[ne+1];X.push([qt(de,Ae,u),qt(me,Ie,u)])}return new ts(X)}};class Xn{constructor(s,u,g,D,X){this.type=s,this.operator=u,this.interpolation=g,this.input=D,this.labels=[],this.outputs=[];for(const[ne,de]of X)this.labels.push(ne),this.outputs.push(de)}static interpolationFactor(s,u,g,D){let X=0;if("exponential"===s.name)X=Wi(u,s.base,g,D);else if("linear"===s.name)X=Wi(u,1,g,D);else if("cubic-bezier"===s.name){const ne=s.controlPoints;X=new ki(ne[0],ne[1],ne[2],ne[3]).solve(Wi(u,1,g,D))}return X}static parse(s,u){let[g,D,X,...ne]=s;if(!Array.isArray(D)||0===D.length)return u.error("Expected an interpolation type expression.",1);if("linear"===D[0])D={name:"linear"};else if("exponential"===D[0]){const Ae=D[1];if("number"!=typeof Ae)return u.error("Exponential interpolation requires a numeric base.",1,1);D={name:"exponential",base:Ae}}else{if("cubic-bezier"!==D[0])return u.error(`Unknown interpolation type ${String(D[0])}`,1,0);{const Ae=D.slice(1);if(4!==Ae.length||Ae.some(Ie=>"number"!=typeof Ie||Ie<0||Ie>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);D={name:"cubic-bezier",controlPoints:Ae}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(X=u.parse(X,2,et),!X)return null;const de=[];let me=null;"interpolate-hcl"===g||"interpolate-lab"===g?me=Ze:u.expectedType&&"value"!==u.expectedType.kind&&(me=u.expectedType);for(let Ae=0;Ae<ne.length;Ae+=2){const Ie=ne[Ae],Le=ne[Ae+1],Ve=Ae+3,Ke=Ae+4;if("number"!=typeof Ie)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ve);if(de.length&&de[de.length-1][0]>=Ie)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ve);const nt=u.parse(Le,Ke,me);if(!nt)return null;me=me||nt.type,de.push([Ie,nt])}return Et(me,et)||Et(me,Ze)||Et(me,Ut)||Et(me,rt)||Et(me,Pe(et))?new Xn(me,g,D,X,de):u.error(`Type ${Fe(me)} is not interpolatable.`)}evaluate(s){const u=this.labels,g=this.outputs;if(1===u.length)return g[0].evaluate(s);const D=this.input.evaluate(s);if(D<=u[0])return g[0].evaluate(s);const X=u.length;if(D>=u[X-1])return g[X-1].evaluate(s);const ne=Mn(u,D),de=Xn.interpolationFactor(this.interpolation,D,u[ne],u[ne+1]),me=g[ne].evaluate(s),Ae=g[ne+1].evaluate(s);switch(this.operator){case"interpolate":return jn[this.type.kind](me,Ae,de);case"interpolate-hcl":return jn.color(me,Ae,de,"hcl");case"interpolate-lab":return jn.color(me,Ae,de,"lab")}}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Wi(l,s,u,g){const D=g-u,X=l-u;return 0===D?0:1===s?X/D:(Math.pow(s,X)-1)/(Math.pow(s,D)-1)}class Pr{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let g=null;const D=u.expectedType;D&&"value"!==D.kind&&(g=D);const X=[];for(const de of s.slice(1)){const me=u.parse(de,1+X.length,g,void 0,{typeAnnotation:"omit"});if(!me)return null;g=g||me.type,X.push(me)}if(!g)throw new Error("No output type");const ne=D&&X.some(de=>at(D,de.type));return new Pr(ne?Ue:g,X)}evaluate(s){let u,g=null,D=0;for(const X of this.args)if(D++,g=X.evaluate(s),g&&g instanceof Ir&&!g.available&&(u||(u=g.name),g=null,D===this.args.length&&(g=u)),null!==g)break;return g}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function aa(l,s){return"=="===l||"!="===l?"boolean"===s.kind||"string"===s.kind||"number"===s.kind||"null"===s.kind||"value"===s.kind:"string"===s.kind||"number"===s.kind||"value"===s.kind}function ul(l,s,u,g){return 0===g.compare(s,u)}function Fr(l,s,u){const g="=="!==l&&"!="!==l;return class yT{constructor(X,ne,de){this.type=Ge,this.lhs=X,this.rhs=ne,this.collator=de,this.hasUntypedArgument="value"===X.type.kind||"value"===ne.type.kind}static parse(X,ne){if(3!==X.length&&4!==X.length)return ne.error("Expected two or three arguments.");const de=X[0];let me=ne.parse(X[1],1,Ue);if(!me)return null;if(!aa(de,me.type))return ne.concat(1).error(`"${de}" comparisons are not supported for type '${Fe(me.type)}'.`);let Ae=ne.parse(X[2],2,Ue);if(!Ae)return null;if(!aa(de,Ae.type))return ne.concat(2).error(`"${de}" comparisons are not supported for type '${Fe(Ae.type)}'.`);if(me.type.kind!==Ae.type.kind&&"value"!==me.type.kind&&"value"!==Ae.type.kind)return ne.error(`Cannot compare types '${Fe(me.type)}' and '${Fe(Ae.type)}'.`);g&&("value"===me.type.kind&&"value"!==Ae.type.kind?me=new $t(Ae.type,[me]):"value"!==me.type.kind&&"value"===Ae.type.kind&&(Ae=new $t(me.type,[Ae])));let Ie=null;if(4===X.length){if("string"!==me.type.kind&&"string"!==Ae.type.kind&&"value"!==me.type.kind&&"value"!==Ae.type.kind)return ne.error("Cannot use collator to compare non-string types.");if(Ie=ne.parse(X[3],3,ct),!Ie)return null}return new yT(me,Ae,Ie)}evaluate(X){const ne=this.lhs.evaluate(X),de=this.rhs.evaluate(X);if(g&&this.hasUntypedArgument){const me=wr(ne),Ae=wr(de);if(me.kind!==Ae.kind||"string"!==me.kind&&"number"!==me.kind)throw new Zt(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${me.kind}, ${Ae.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const me=wr(ne),Ae=wr(de);if("string"!==me.kind||"string"!==Ae.kind)return s(X,ne,de)}return this.collator?u(X,ne,de,this.collator.evaluate(X)):s(X,ne,de)}eachChild(X){X(this.lhs),X(this.rhs),this.collator&&X(this.collator)}outputDefined(){return!0}}}const ju=Fr("==",function(l,s,u){return s===u},ul),Hu=Fr("!=",function(l,s,u){return s!==u},function(l,s,u,g){return!ul(0,s,u,g)}),hd=Fr("<",function(l,s,u){return s<u},function(l,s,u,g){return g.compare(s,u)<0}),ho=Fr(">",function(l,s,u){return s>u},function(l,s,u,g){return g.compare(s,u)>0}),np=Fr("<=",function(l,s,u){return s<=u},function(l,s,u,g){return g.compare(s,u)<=0}),Y0=Fr(">=",function(l,s,u){return s>=u},function(l,s,u,g){return g.compare(s,u)>=0});class Gu{constructor(s,u,g){this.type=ct,this.locale=g,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(2!==s.length)return u.error("Expected one argument.");const g=s[1];if("object"!=typeof g||Array.isArray(g))return u.error("Collator options argument must be an object.");const D=u.parse(void 0!==g["case-sensitive"]&&g["case-sensitive"],1,Ge);if(!D)return null;const X=u.parse(void 0!==g["diacritic-sensitive"]&&g["diacritic-sensitive"],1,Ge);if(!X)return null;let ne=null;return g.locale&&(ne=u.parse(g.locale,1,st),!ne)?null:new Gu(D,X,ne)}evaluate(s){return new ko(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class dd{constructor(s,u,g,D,X){this.type=st,this.number=s,this.locale=u,this.currency=g,this.minFractionDigits=D,this.maxFractionDigits=X}static parse(s,u){if(3!==s.length)return u.error("Expected two arguments.");const g=u.parse(s[1],1,et);if(!g)return null;const D=s[2];if("object"!=typeof D||Array.isArray(D))return u.error("NumberFormat options argument must be an object.");let X=null;if(D.locale&&(X=u.parse(D.locale,1,st),!X))return null;let ne=null;if(D.currency&&(ne=u.parse(D.currency,1,st),!ne))return null;let de=null;if(D["min-fraction-digits"]&&(de=u.parse(D["min-fraction-digits"],1,et),!de))return null;let me=null;return D["max-fraction-digits"]&&(me=u.parse(D["max-fraction-digits"],1,et),!me)?null:new dd(g,X,ne,de,me)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Oc{constructor(s){this.type=_t,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const g=s[1];if(!Array.isArray(g)&&"object"==typeof g)return u.error("First argument must be an image or text section.");const D=[];let X=!1;for(let ne=1;ne<=s.length-1;++ne){const de=s[ne];if(X&&"object"==typeof de&&!Array.isArray(de)){X=!1;let me=null;if(de["font-scale"]&&(me=u.parse(de["font-scale"],1,et),!me))return null;let Ae=null;if(de["text-font"]&&(Ae=u.parse(de["text-font"],1,Pe(st)),!Ae))return null;let Ie=null;if(de["text-color"]&&(Ie=u.parse(de["text-color"],1,Ze),!Ie))return null;const Le=D[D.length-1];Le.scale=me,Le.font=Ae,Le.textColor=Ie}else{const me=u.parse(s[ne],1,Ue);if(!me)return null;const Ae=me.type.kind;if("string"!==Ae&&"value"!==Ae&&"null"!==Ae&&"resolvedImage"!==Ae)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");X=!0,D.push({content:me,scale:null,font:null,textColor:null})}}return new Oc(D)}evaluate(s){return new br(this.sections.map(u=>{const g=u.content.evaluate(s);return wr(g)===jt?new uo("",g,null,null,null):new uo(sa(g),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}}class fd{constructor(s){this.type=jt,this.input=s}static parse(s,u){if(2!==s.length)return u.error("Expected two arguments.");const g=u.parse(s[1],1,st);return g?new fd(g):u.error("No image name provided.")}evaluate(s){const u=this.input.evaluate(s),g=Ir.fromString(u);return g&&s.availableImages&&(g.available=s.availableImages.indexOf(u)>-1),g}eachChild(s){s(this.input)}outputDefined(){return!1}}class $u{constructor(s){this.type=et,this.input=s}static parse(s,u){if(2!==s.length)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const g=u.parse(s[1],1);return g?"array"!==g.type.kind&&"string"!==g.type.kind&&"value"!==g.type.kind?u.error(`Expected argument of type string or array, but found ${Fe(g.type)} instead.`):new $u(g):null}evaluate(s){const u=this.input.evaluate(s);if("string"==typeof u||Array.isArray(u))return u.length;throw new Zt(`Expected value to be of type string or array, but found ${Fe(wr(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const Ya=8192;function Fs(l,s){const u=(180+l[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,D=Math.pow(2,s.z);return[Math.round(u*D*Ya),Math.round(g*D*Ya)]}function ni(l,s){const u=Math.pow(2,s.z);return[(D=(l[0]/Ya+s.x)/u,360*D-180),(g=(l[1]/Ya+s.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,D}function Ii(l,s){l[0]=Math.min(l[0],s[0]),l[1]=Math.min(l[1],s[1]),l[2]=Math.max(l[2],s[0]),l[3]=Math.max(l[3],s[1])}function Lc(l,s){return!(l[0]<=s[0]||l[2]>=s[2]||l[1]<=s[1]||l[3]>=s[3])}function K0(l,s,u){const g=l[0]-s[0],D=l[1]-s[1],X=l[0]-u[0],ne=l[1]-u[1];return g*ne-X*D==0&&g*X<=0&&D*ne<=0}function Bn(l,s,u,g){return(D=[g[0]-u[0],g[1]-u[1]])[0]*(X=[s[0]-l[0],s[1]-l[1]])[1]-D[1]*X[0]!=0&&!(!md(l,s,u,g)||!md(u,g,l,s));var D,X}function J0(l,s,u){for(const g of u)for(let D=0;D<g.length-1;++D)if(Bn(l,s,g[D],g[D+1]))return!0;return!1}function Cr(l,s,u=!1){let g=!1;for(const de of s)for(let me=0;me<de.length-1;me++){if(K0(l,de[me],de[me+1]))return u;(X=de[me])[1]>(D=l)[1]!=(ne=de[me+1])[1]>D[1]&&D[0]<(ne[0]-X[0])*(D[1]-X[1])/(ne[1]-X[1])+X[0]&&(g=!g)}var D,X,ne;return g}function Nc(l,s){for(const u of s)if(Cr(l,u))return!0;return!1}function pd(l,s){for(const u of l)if(!Cr(u,s))return!1;for(let u=0;u<l.length-1;++u)if(J0(l[u],l[u+1],s))return!1;return!0}function gd(l,s){for(const u of s)if(pd(l,u))return!0;return!1}function md(l,s,u,g){const D=g[0]-u[0],X=g[1]-u[1],ne=(l[0]-u[0])*X-D*(l[1]-u[1]),de=(s[0]-u[0])*X-D*(s[1]-u[1]);return ne>0&&de<0||ne<0&&de>0}function hl(l,s,u){const g=[];for(let D=0;D<l.length;D++){const X=[];for(let ne=0;ne<l[D].length;ne++){const de=Fs(l[D][ne],u);Ii(s,de),X.push(de)}g.push(X)}return g}function Yl(l,s,u){const g=[];for(let D=0;D<l.length;D++){const X=hl(l[D],s,u);g.push(X)}return g}function Bc(l,s,u,g){if(l[0]<u[0]||l[0]>u[2]){const D=.5*g;let X=l[0]-u[0]>D?-g:u[0]-l[0]>D?g:0;0===X&&(X=l[0]-u[2]>D?-g:u[2]-l[0]>D?g:0),l[0]+=X}Ii(s,l)}function qu(l,s,u,g){const D=Math.pow(2,g.z)*Ya,X=[g.x*Ya,g.y*Ya],ne=[];for(const de of l)for(const me of de){const Ae=[me.x+X[0],me.y+X[1]];Bc(Ae,s,u,D),ne.push(Ae)}return ne}function yd(l,s,u,g){const D=Math.pow(2,g.z)*Ya,X=[g.x*Ya,g.y*Ya],ne=[];for(const me of l){const Ae=[];for(const Ie of me){const Le=[Ie.x+X[0],Ie.y+X[1]];Ii(s,Le),Ae.push(Le)}ne.push(Ae)}if(s[2]-s[0]<=D/2){(de=s)[0]=de[1]=1/0,de[2]=de[3]=-1/0;for(const me of ne)for(const Ae of me)Bc(Ae,s,u,D)}var de;return ne}class hi{constructor(s,u){this.type=Ge,this.geojson=s,this.geometries=u}static parse(s,u){if(2!==s.length)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Io(s[1])){const g=s[1];if("FeatureCollection"===g.type){const D=[];for(const X of g.features){const{type:ne,coordinates:de}=X.geometry;"Polygon"===ne&&D.push(de),"MultiPolygon"===ne&&D.push(...de)}if(D.length)return new hi(g,{type:"MultiPolygon",coordinates:D})}else if("Feature"===g.type){const D=g.geometry.type;if("Polygon"===D||"MultiPolygon"===D)return new hi(g,g.geometry)}else if("Polygon"===g.type||"MultiPolygon"===g.type)return new hi(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(u,g){const D=[1/0,1/0,-1/0,-1/0],X=[1/0,1/0,-1/0,-1/0],ne=u.canonicalID();if("Polygon"===g.type){const de=hl(g.coordinates,X,ne),me=qu(u.geometry(),D,X,ne);if(!Lc(D,X))return!1;for(const Ae of me)if(!Cr(Ae,de))return!1}if("MultiPolygon"===g.type){const de=Yl(g.coordinates,X,ne),me=qu(u.geometry(),D,X,ne);if(!Lc(D,X))return!1;for(const Ae of me)if(!Nc(Ae,de))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(u,g){const D=[1/0,1/0,-1/0,-1/0],X=[1/0,1/0,-1/0,-1/0],ne=u.canonicalID();if("Polygon"===g.type){const de=hl(g.coordinates,X,ne),me=yd(u.geometry(),D,X,ne);if(!Lc(D,X))return!1;for(const Ae of me)if(!pd(Ae,de))return!1}if("MultiPolygon"===g.type){const de=Yl(g.coordinates,X,ne),me=yd(u.geometry(),D,X,ne);if(!Lc(D,X))return!1;for(const Ae of me)if(!gd(Ae,de))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zc=class{constructor(l=[],s=vd){if(this.data=l,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const l=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:s,compare:u}=this,g=s[l];for(;l>0;){const D=l-1>>1,X=s[D];if(u(g,X)>=0)break;s[l]=X,l=D}s[l]=g}_down(l){const{data:s,compare:u}=this,g=this.length>>1,D=s[l];for(;l<g;){let X=1+(l<<1),ne=s[X];const de=X+1;if(de<this.length&&u(s[de],ne)<0&&(X=de,ne=s[de]),u(ne,D)>=0)break;s[l]=ne,l=X}s[l]=D}};function vd(l,s){return l<s?-1:l>s?1:0}function Rs(l,s,u,g,D){Wu(l,s,u,g||l.length-1,D||ar)}function Wu(l,s,u,g,D){for(;g>u;){if(g-u>600){var X=g-u+1,ne=s-u+1,de=Math.log(X),me=.5*Math.exp(2*de/3),Ae=.5*Math.sqrt(de*me*(X-me)/X)*(ne-X/2<0?-1:1);Wu(l,s,Math.max(u,Math.floor(s-ne*me/X+Ae)),Math.min(g,Math.floor(s+(X-ne)*me/X+Ae)),D)}var Ie=l[s],Le=u,Ve=g;for(Uc(l,u,s),D(l[g],Ie)>0&&Uc(l,u,g);Le<Ve;){for(Uc(l,Le,Ve),Le++,Ve--;D(l[Le],Ie)<0;)Le++;for(;D(l[Ve],Ie)>0;)Ve--}0===D(l[u],Ie)?Uc(l,u,Ve):Uc(l,++Ve,g),Ve<=s&&(u=Ve+1),s<=Ve&&(g=Ve-1)}}function Uc(l,s,u){var g=l[s];l[s]=l[u],l[u]=g}function ar(l,s){return l<s?-1:l>s?1:0}function Xu(l,s){if(l.length<=1)return[l];const u=[];let g,D;for(const X of l){const ne=Rn(X);0!==ne&&(X.area=Math.abs(ne),void 0===D&&(D=ne<0),D===ne<0?(g&&u.push(g),g=[X]):g.push(X))}if(g&&u.push(g),s>1)for(let X=0;X<u.length;X++)u[X].length<=s||(Rs(u[X],s,1,u[X].length-1,Q0),u[X]=u[X].slice(0,s));return u}function Q0(l,s){return s.area-l.area}function Rn(l){let s=0;for(let u,g,D=0,X=l.length,ne=X-1;D<X;ne=D++)u=l[D],g=l[ne],s+=(g.x-u.x)*(u.y+g.y);return s}const Vc=1/298.257223563,jc=Vc*(2-Vc),Zu=Math.PI/180;class Kl{constructor(s){const u=6378.137*Zu*1e3,g=Math.cos(s*Zu),D=1/(1-jc*(1-g*g)),X=Math.sqrt(D);this.kx=u*X*g,this.ky=u*X*D*(1-jc)}distance(s,u){const g=this.wrap(s[0]-u[0])*this.kx,D=(s[1]-u[1])*this.ky;return Math.sqrt(g*g+D*D)}pointOnLine(s,u){let g,D,X,ne,de=1/0;for(let me=0;me<s.length-1;me++){let Ae=s[me][0],Ie=s[me][1],Le=this.wrap(s[me+1][0]-Ae)*this.kx,Ve=(s[me+1][1]-Ie)*this.ky,Ke=0;0===Le&&0===Ve||(Ke=(this.wrap(u[0]-Ae)*this.kx*Le+(u[1]-Ie)*this.ky*Ve)/(Le*Le+Ve*Ve),Ke>1?(Ae=s[me+1][0],Ie=s[me+1][1]):Ke>0&&(Ae+=Le/this.kx*Ke,Ie+=Ve/this.ky*Ke)),Le=this.wrap(u[0]-Ae)*this.kx,Ve=(u[1]-Ie)*this.ky;const nt=Le*Le+Ve*Ve;nt<de&&(de=nt,g=Ae,D=Ie,X=me,ne=Ke)}return{point:[g,D],index:X,t:Math.max(0,Math.min(1,ne))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function xd(l,s){return s[0]-l[0]}function dl(l){return l[1]-l[0]+1}function fo(l,s){return l[1]>=l[0]&&l[1]<s}function Hc(l,s){if(l[0]>l[1])return[null,null];const u=dl(l);if(s){if(2===u)return[l,null];const D=Math.floor(u/2);return[[l[0],l[0]+D],[l[0]+D,l[1]]]}if(1===u)return[l,null];const g=Math.floor(u/2)-1;return[[l[0],l[0]+g],[l[0]+g+1,l[1]]]}function _d(l,s){if(!fo(s,l.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let g=s[0];g<=s[1];++g)Ii(u,l[g]);return u}function bd(l){const s=[1/0,1/0,-1/0,-1/0];for(const u of l)for(const g of u)Ii(s,g);return s}function ip(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Po(l,s,u){if(!ip(l)||!ip(s))return NaN;let g=0,D=0;return l[2]<s[0]&&(g=s[0]-l[2]),l[0]>s[2]&&(g=l[0]-s[2]),l[1]>s[3]&&(D=l[1]-s[3]),l[3]<s[1]&&(D=s[1]-l[3]),u.distance([0,0],[g,D])}function Hi(l,s,u){const g=u.pointOnLine(s,l);return u.distance(l,g.point)}function fl(l,s,u,g,D){const X=Math.min(Hi(l,[u,g],D),Hi(s,[u,g],D)),ne=Math.min(Hi(u,[l,s],D),Hi(g,[l,s],D));return Math.min(X,ne)}function vi(l,s,u,g,D){if(!fo(s,l.length)||!fo(g,u.length))return 1/0;let X=1/0;for(let ne=s[0];ne<s[1];++ne){const de=l[ne],me=l[ne+1];for(let Ae=g[0];Ae<g[1];++Ae){const Ie=u[Ae],Le=u[Ae+1];if(Bn(de,me,Ie,Le))return 0;X=Math.min(X,fl(de,me,Ie,Le,D))}}return X}function Yu(l,s,u,g,D){if(!fo(s,l.length)||!fo(g,u.length))return NaN;let X=1/0;for(let ne=s[0];ne<=s[1];++ne)for(let de=g[0];de<=g[1];++de)if(X=Math.min(X,D.distance(l[ne],u[de])),0===X)return X;return X}function cr(l,s,u){if(Cr(l,s,!0))return 0;let g=1/0;for(const D of s){const X=D[0],ne=D[D.length-1];if(X!==ne&&(g=Math.min(g,Hi(l,[ne,X],u)),0===g))return g;const de=u.pointOnLine(D,l);if(g=Math.min(g,u.distance(l,de.point)),0===g)return g}return g}function Ki(l,s,u,g){if(!fo(s,l.length))return NaN;for(let X=s[0];X<=s[1];++X)if(Cr(l[X],u,!0))return 0;let D=1/0;for(let X=s[0];X<s[1];++X){const ne=l[X],de=l[X+1];for(const me of u)for(let Ae=0,Ie=me.length,Le=Ie-1;Ae<Ie;Le=Ae++){const Ve=me[Le],Ke=me[Ae];if(Bn(ne,de,Ve,Ke))return 0;D=Math.min(D,fl(ne,de,Ve,Ke,g))}}return D}function La(l,s){for(const u of l)for(const g of u)if(Cr(g,s,!0))return!0;return!1}function wd(l,s,u,g=1/0){const D=bd(l),X=bd(s);if(g!==1/0&&Po(D,X,u)>=g)return g;if(Lc(D,X)){if(La(l,s))return 0}else if(La(s,l))return 0;let ne=1/0;for(const de of l)for(let me=0,Ae=de.length,Ie=Ae-1;me<Ae;Ie=me++){const Le=de[Ie],Ve=de[me];for(const Ke of s)for(let nt=0,ut=Ke.length,xt=ut-1;nt<ut;xt=nt++){const At=Ke[xt],Rt=Ke[nt];if(Bn(Le,Ve,At,Rt))return 0;ne=Math.min(ne,fl(Le,Ve,At,Rt,u))}}return ne}function Na(l,s,u,g,D,X){if(!X)return;const ne=Po(_d(g,X),D,u);ne<s&&l.push([ne,X,[0,0]])}function Gc(l,s,u,g,D,X,ne){if(!X||!ne)return;const de=Po(_d(g,X),_d(D,ne),u);de<s&&l.push([de,X,ne])}function On(l,s,u,g,D=1/0){let X=Math.min(g.distance(l[0],u[0][0]),D);if(0===X)return X;const ne=new zc([[0,[0,l.length-1],[0,0]]],xd),de=bd(u);for(;ne.length>0;){const me=ne.pop();if(me[0]>=X)continue;const Ae=me[1],Ie=s?50:100;if(dl(Ae)<=Ie){if(!fo(Ae,l.length))return NaN;if(s){const Le=Ki(l,Ae,u,g);if(isNaN(Le)||0===Le)return Le;X=Math.min(X,Le)}else for(let Le=Ae[0];Le<=Ae[1];++Le){const Ve=cr(l[Le],u,g);if(X=Math.min(X,Ve),0===X)return 0}}else{const Le=Hc(Ae,s);Na(ne,X,g,l,de,Le[0]),Na(ne,X,g,l,de,Le[1])}}return X}function Jl(l,s,u,g,D,X=1/0){let ne=Math.min(X,D.distance(l[0],u[0]));if(0===ne)return ne;const de=new zc([[0,[0,l.length-1],[0,u.length-1]]],xd);for(;de.length>0;){const me=de.pop();if(me[0]>=ne)continue;const Ae=me[1],Ie=me[2],Le=s?50:100,Ve=g?50:100;if(dl(Ae)<=Le&&dl(Ie)<=Ve){if(!fo(Ae,l.length)&&fo(Ie,u.length))return NaN;let Ke;if(s&&g)Ke=vi(l,Ae,u,Ie,D),ne=Math.min(ne,Ke);else if(s&&!g){const nt=l.slice(Ae[0],Ae[1]+1);for(let ut=Ie[0];ut<=Ie[1];++ut)if(Ke=Hi(u[ut],nt,D),ne=Math.min(ne,Ke),0===ne)return ne}else if(!s&&g){const nt=u.slice(Ie[0],Ie[1]+1);for(let ut=Ae[0];ut<=Ae[1];++ut)if(Ke=Hi(l[ut],nt,D),ne=Math.min(ne,Ke),0===ne)return ne}else Ke=Yu(l,Ae,u,Ie,D),ne=Math.min(ne,Ke)}else{const Ke=Hc(Ae,s),nt=Hc(Ie,g);Gc(de,ne,D,l,u,Ke[0],nt[0]),Gc(de,ne,D,l,u,Ke[0],nt[1]),Gc(de,ne,D,l,u,Ke[1],nt[0]),Gc(de,ne,D,l,u,Ke[1],nt[1])}}return ne}function dn(l){return"MultiPolygon"===l.type?l.coordinates.map(s=>({type:"Polygon",coordinates:s})):"MultiLineString"===l.type?l.coordinates.map(s=>({type:"LineString",coordinates:s})):"MultiPoint"===l.type?l.coordinates.map(s=>({type:"Point",coordinates:s})):[l]}class wa{constructor(s,u){this.type=et,this.geojson=s,this.geometries=u}static parse(s,u){if(2!==s.length)return u.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Io(s[1])){const g=s[1];if("FeatureCollection"===g.type)return new wa(g,g.features.map(D=>dn(D.geometry)).flat());if("Feature"===g.type)return new wa(g,dn(g.geometry));if("type"in g&&"coordinates"in g)return new wa(g,dn(g))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(u,g){const D=u.geometry(),X=D.flat().map(me=>ni([me.x,me.y],u.canonical));if(0===D.length)return NaN;const ne=new Kl(X[0][1]);let de=1/0;for(const me of g){switch(me.type){case"Point":de=Math.min(de,Jl(X,!1,[me.coordinates],!1,ne,de));break;case"LineString":de=Math.min(de,Jl(X,!1,me.coordinates,!0,ne,de));break;case"Polygon":de=Math.min(de,On(X,!1,me.coordinates,ne,de))}if(0===de)return de}return de}(s,this.geometries);if("LineString"===s.geometryType())return function(u,g){const D=u.geometry(),X=D.flat().map(me=>ni([me.x,me.y],u.canonical));if(0===D.length)return NaN;const ne=new Kl(X[0][1]);let de=1/0;for(const me of g){switch(me.type){case"Point":de=Math.min(de,Jl(X,!0,[me.coordinates],!1,ne,de));break;case"LineString":de=Math.min(de,Jl(X,!0,me.coordinates,!0,ne,de));break;case"Polygon":de=Math.min(de,On(X,!0,me.coordinates,ne,de))}if(0===de)return de}return de}(s,this.geometries);if("Polygon"===s.geometryType())return function(u,g){const D=u.geometry();if(0===D.length||0===D[0].length)return NaN;const X=Xu(D,0).map(me=>me.map(Ae=>Ae.map(Ie=>ni([Ie.x,Ie.y],u.canonical)))),ne=new Kl(X[0][0][0][1]);let de=1/0;for(const me of g)for(const Ae of X){switch(me.type){case"Point":de=Math.min(de,On([me.coordinates],!1,Ae,ne,de));break;case"LineString":de=Math.min(de,On(me.coordinates,!0,Ae,ne,de));break;case"Polygon":de=Math.min(de,wd(Ae,me.coordinates,ne,de))}if(0===de)return de}return de}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ka={"==":ju,"!=":Hu,">":ho,"<":hd,">=":Y0,"<=":np,array:$t,at:mi,boolean:$t,case:wi,coalesce:Pr,collator:Gu,format:Oc,image:fd,in:Dn,"index-of":zi,interpolate:Xn,"interpolate-hcl":Xn,"interpolate-lab":Xn,length:$u,let:fn,literal:ba,match:oi,number:$t,"number-format":dd,object:$t,slice:Mi,step:an,string:$t,"to-boolean":sn,"to-color":sn,"to-number":sn,"to-string":sn,var:ai,within:hi,distance:wa};class ns{constructor(s,u,g,D){this.name=s,this.type=u,this._evaluate=g,this.args=D}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,u){const g=s[0],D=ns.definitions[g];if(!D)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const X=Array.isArray(D)?D[0]:D.type,ne=Array.isArray(D)?[[D[1],D[2]]]:D.overloads,de=ne.filter(([Ae])=>!Array.isArray(Ae)||Ae.length===s.length-1);let me=null;for(const[Ae,Ie]of de){me=new vn(u.registry,Fo,u.path,null,u.scope);const Le=[];let Ve=!1;for(let Ke=1;Ke<s.length;Ke++){const nt=s[Ke],ut=Array.isArray(Ae)?Ae[Ke-1]:Ae.type,xt=me.parse(nt,1+Le.length,ut);if(!xt){Ve=!0;break}Le.push(xt)}if(!Ve)if(Array.isArray(Ae)&&Ae.length!==Le.length)me.error(`Expected ${Ae.length} arguments, but found ${Le.length} instead.`);else{for(let Ke=0;Ke<Le.length;Ke++){const nt=Array.isArray(Ae)?Ae[Ke]:Ae.type,ut=Le[Ke];me.concat(Ke+1).checkSubtype(nt,ut.type)}if(0===me.errors.length)return new ns(g,X,Ie,Le)}}if(1===de.length)u.errors.push(...me.errors);else{const Ae=(de.length?de:ne).map(([Le])=>{return Ve=Le,Array.isArray(Ve)?`(${Ve.map(Fe).join(", ")})`:`(${Fe(Ve.type)}...)`;var Ve}).join(" | "),Ie=[];for(let Le=1;Le<s.length;Le++){const Ve=u.parse(s[Le],1+Ie.length);if(!Ve)return null;Ie.push(Fe(Ve.type))}u.error(`Expected arguments of type ${Ae}, but found (${Ie.join(", ")}) instead.`)}return null}static register(s,u){ns.definitions=u;for(const g in u)s[g]=ns}}function Ku(l,[s,u,g,D]){s=s.evaluate(l),u=u.evaluate(l),g=g.evaluate(l);const X=D?D.evaluate(l):1,ne=cl(s,u,g,X);if(ne)throw new Zt(ne);return new bi(s/255,u/255,g/255,X,!1)}function $c(l,s){return l in s}function Ju(l,s){const u=s[l];return void 0===u?null:u}function Cs(l){return{type:l}}function Fo(l){if(l instanceof ai)return Fo(l.boundExpression);if(l instanceof ns&&"error"===l.name||l instanceof Gu||l instanceof hi||l instanceof wa)return!1;const s=l instanceof sn||l instanceof $t;let u=!0;return l.eachChild(g=>{u=s?u&&Fo(g):u&&g instanceof ba}),!!u&&Os(l)&&Pi(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Os(l){if(l instanceof ns&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof hi||l instanceof wa)return!1;let s=!0;return l.eachChild(u=>{s&&!Os(u)&&(s=!1)}),s}function Ls(l){if(l instanceof ns&&"feature-state"===l.name)return!1;let s=!0;return l.eachChild(u=>{s&&!Ls(u)&&(s=!1)}),s}function Pi(l,s){if(l instanceof ns&&s.indexOf(l.name)>=0)return!1;let u=!0;return l.eachChild(g=>{u&&!Pi(g,s)&&(u=!1)}),u}function Ql(l){return{result:"success",value:l}}function po(l){return{result:"error",value:l}}function Ja(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function qc(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Ns(l){return!!l.expression&&l.expression.interpolated}function Ci(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function pl(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function Qu(l){return l}function Wc(l,s){const u="color"===s.type,g=l.stops&&"object"==typeof l.stops[0][0],D=g||!(g||void 0!==l.property),X=l.type||(Ns(s)?"exponential":"interval");if(u||"padding"===s.type){const Ie=u?bi.parse:kr.parse;(l=it({},l)).stops&&(l.stops=l.stops.map(Le=>[Le[0],Ie(Le[1])])),l.default=Ie(l.default?l.default:s.default)}if(l.colorSpace&&"rgb"!==(ne=l.colorSpace)&&"hcl"!==ne&&"lab"!==ne)throw new Error(`Unknown color space: "${l.colorSpace}"`);var ne;let de,me,Ae;if("exponential"===X)de=Xc;else if("interval"===X)de=mo;else if("categorical"===X){de=ec,me=Object.create(null);for(const Ie of l.stops)me[Ie[0]]=Ie[1];Ae=typeof l.stops[0][0]}else{if("identity"!==X)throw new Error(`Unknown function type "${X}"`);de=Zc}if(g){const Ie={},Le=[];for(let nt=0;nt<l.stops.length;nt++){const ut=l.stops[nt],xt=ut[0].zoom;void 0===Ie[xt]&&(Ie[xt]={zoom:xt,type:l.type,property:l.property,default:l.default,stops:[]},Le.push(xt)),Ie[xt].stops.push([ut[0].value,ut[1]])}const Ve=[];for(const nt of Le)Ve.push([Ie[nt].zoom,Wc(Ie[nt],s)]);const Ke={name:"linear"};return{kind:"composite",interpolationType:Ke,interpolationFactor:Xn.interpolationFactor.bind(void 0,Ke),zoomStops:Ve.map(nt=>nt[0]),evaluate:({zoom:nt},ut)=>Xc({stops:Ve,base:l.base},s,nt).evaluate(nt,ut)}}if(D){const Ie="exponential"===X?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:Ie,interpolationFactor:Xn.interpolationFactor.bind(void 0,Ie),zoomStops:l.stops.map(Le=>Le[0]),evaluate:({zoom:Le})=>de(l,s,Le,me,Ae)}}return{kind:"source",evaluate(Ie,Le){const Ve=Le&&Le.properties?Le.properties[l.property]:void 0;return void 0===Ve?go(l.default,s.default):de(l,s,Ve,me,Ae)}}}function go(l,s,u){return void 0!==l?l:void 0!==s?s:void 0!==u?u:void 0}function ec(l,s,u,g,D){return go(typeof u===D?g[u]:void 0,l.default,s.default)}function mo(l,s,u){if("number"!==Ci(u))return go(l.default,s.default);const g=l.stops.length;if(1===g||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[g-1][0])return l.stops[g-1][1];const D=Mn(l.stops.map(X=>X[0]),u);return l.stops[D][1]}function Xc(l,s,u){const g=void 0!==l.base?l.base:1;if("number"!==Ci(u))return go(l.default,s.default);const D=l.stops.length;if(1===D||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[D-1][0])return l.stops[D-1][1];const X=Mn(l.stops.map(Ie=>Ie[0]),u),ne=function(Ie,Le,Ve,Ke){const nt=Ke-Ve,ut=Ie-Ve;return 0===nt?0:1===Le?ut/nt:(Math.pow(Le,ut)-1)/(Math.pow(Le,nt)-1)}(u,g,l.stops[X][0],l.stops[X+1][0]),de=l.stops[X][1],me=l.stops[X+1][1],Ae=jn[s.type]||Qu;return"function"==typeof de.evaluate?{evaluate(...Ie){const Le=de.evaluate.apply(void 0,Ie),Ve=me.evaluate.apply(void 0,Ie);if(void 0!==Le&&void 0!==Ve)return Ae(Le,Ve,ne,l.colorSpace)}}:Ae(de,me,ne,l.colorSpace)}function Zc(l,s,u){switch(s.type){case"color":u=bi.parse(u);break;case"formatted":u=br.fromString(u.toString());break;case"resolvedImage":u=Ir.fromString(u.toString());break;case"padding":u=kr.parse(u);break;default:Ci(u)===s.type||"enum"===s.type&&s.values[u]||(u=void 0)}return go(u,l.default,s.default)}ns.register(Ka,{error:[{kind:"error"},[st],(l,[s])=>{throw new Zt(s.evaluate(l))}],typeof:[st,[Ue],(l,[s])=>Fe(wr(s.evaluate(l)))],"to-rgba":[Pe(et,4),[Ze],(l,[s])=>{const[u,g,D,X]=s.evaluate(l).rgb;return[255*u,255*g,255*D,X]}],rgb:[Ze,[et,et,et],Ku],rgba:[Ze,[et,et,et,et],Ku],has:{type:Ge,overloads:[[[st],(l,[s])=>$c(s.evaluate(l),l.properties())],[[st,je],(l,[s,u])=>$c(s.evaluate(l),u.evaluate(l))]]},get:{type:Ue,overloads:[[[st],(l,[s])=>Ju(s.evaluate(l),l.properties())],[[st,je],(l,[s,u])=>Ju(s.evaluate(l),u.evaluate(l))]]},"feature-state":[Ue,[st],(l,[s])=>Ju(s.evaluate(l),l.featureState||{})],properties:[je,[],l=>l.properties()],"geometry-type":[st,[],l=>l.geometryType()],id:[Ue,[],l=>l.id()],zoom:[et,[],l=>l.globals.zoom],"heatmap-density":[et,[],l=>l.globals.heatmapDensity||0],"line-progress":[et,[],l=>l.globals.lineProgress||0],accumulated:[Ue,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[et,Cs(et),(l,s)=>{let u=0;for(const g of s)u+=g.evaluate(l);return u}],"*":[et,Cs(et),(l,s)=>{let u=1;for(const g of s)u*=g.evaluate(l);return u}],"-":{type:et,overloads:[[[et,et],(l,[s,u])=>s.evaluate(l)-u.evaluate(l)],[[et],(l,[s])=>-s.evaluate(l)]]},"/":[et,[et,et],(l,[s,u])=>s.evaluate(l)/u.evaluate(l)],"%":[et,[et,et],(l,[s,u])=>s.evaluate(l)%u.evaluate(l)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(l,[s,u])=>Math.pow(s.evaluate(l),u.evaluate(l))],sqrt:[et,[et],(l,[s])=>Math.sqrt(s.evaluate(l))],log10:[et,[et],(l,[s])=>Math.log(s.evaluate(l))/Math.LN10],ln:[et,[et],(l,[s])=>Math.log(s.evaluate(l))],log2:[et,[et],(l,[s])=>Math.log(s.evaluate(l))/Math.LN2],sin:[et,[et],(l,[s])=>Math.sin(s.evaluate(l))],cos:[et,[et],(l,[s])=>Math.cos(s.evaluate(l))],tan:[et,[et],(l,[s])=>Math.tan(s.evaluate(l))],asin:[et,[et],(l,[s])=>Math.asin(s.evaluate(l))],acos:[et,[et],(l,[s])=>Math.acos(s.evaluate(l))],atan:[et,[et],(l,[s])=>Math.atan(s.evaluate(l))],min:[et,Cs(et),(l,s)=>Math.min(...s.map(u=>u.evaluate(l)))],max:[et,Cs(et),(l,s)=>Math.max(...s.map(u=>u.evaluate(l)))],abs:[et,[et],(l,[s])=>Math.abs(s.evaluate(l))],round:[et,[et],(l,[s])=>{const u=s.evaluate(l);return u<0?-Math.round(-u):Math.round(u)}],floor:[et,[et],(l,[s])=>Math.floor(s.evaluate(l))],ceil:[et,[et],(l,[s])=>Math.ceil(s.evaluate(l))],"filter-==":[Ge,[st,Ue],(l,[s,u])=>l.properties()[s.value]===u.value],"filter-id-==":[Ge,[Ue],(l,[s])=>l.id()===s.value],"filter-type-==":[Ge,[st],(l,[s])=>l.geometryType()===s.value],"filter-<":[Ge,[st,Ue],(l,[s,u])=>{const g=l.properties()[s.value],D=u.value;return typeof g==typeof D&&g<D}],"filter-id-<":[Ge,[Ue],(l,[s])=>{const u=l.id(),g=s.value;return typeof u==typeof g&&u<g}],"filter->":[Ge,[st,Ue],(l,[s,u])=>{const g=l.properties()[s.value],D=u.value;return typeof g==typeof D&&g>D}],"filter-id->":[Ge,[Ue],(l,[s])=>{const u=l.id(),g=s.value;return typeof u==typeof g&&u>g}],"filter-<=":[Ge,[st,Ue],(l,[s,u])=>{const g=l.properties()[s.value],D=u.value;return typeof g==typeof D&&g<=D}],"filter-id-<=":[Ge,[Ue],(l,[s])=>{const u=l.id(),g=s.value;return typeof u==typeof g&&u<=g}],"filter->=":[Ge,[st,Ue],(l,[s,u])=>{const g=l.properties()[s.value],D=u.value;return typeof g==typeof D&&g>=D}],"filter-id->=":[Ge,[Ue],(l,[s])=>{const u=l.id(),g=s.value;return typeof u==typeof g&&u>=g}],"filter-has":[Ge,[Ue],(l,[s])=>s.value in l.properties()],"filter-has-id":[Ge,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[Ge,[Pe(st)],(l,[s])=>s.value.indexOf(l.geometryType())>=0],"filter-id-in":[Ge,[Pe(Ue)],(l,[s])=>s.value.indexOf(l.id())>=0],"filter-in-small":[Ge,[st,Pe(Ue)],(l,[s,u])=>u.value.indexOf(l.properties()[s.value])>=0],"filter-in-large":[Ge,[st,Pe(Ue)],(l,[s,u])=>function(g,D,X,ne){for(;X<=ne;){const de=X+ne>>1;if(D[de]===g)return!0;D[de]>g?ne=de-1:X=de+1}return!1}(l.properties()[s.value],u.value,0,u.value.length-1)],all:{type:Ge,overloads:[[[Ge,Ge],(l,[s,u])=>s.evaluate(l)&&u.evaluate(l)],[Cs(Ge),(l,s)=>{for(const u of s)if(!u.evaluate(l))return!1;return!0}]]},any:{type:Ge,overloads:[[[Ge,Ge],(l,[s,u])=>s.evaluate(l)||u.evaluate(l)],[Cs(Ge),(l,s)=>{for(const u of s)if(u.evaluate(l))return!0;return!1}]]},"!":[Ge,[Ge],(l,[s])=>!s.evaluate(l)],"is-supported-script":[Ge,[st],(l,[s])=>{const u=l.globals&&l.globals.isSupportedScript;return!u||u(s.evaluate(l))}],upcase:[st,[st],(l,[s])=>s.evaluate(l).toUpperCase()],downcase:[st,[st],(l,[s])=>s.evaluate(l).toLowerCase()],concat:[st,Cs(Ue),(l,s)=>s.map(u=>sa(u.evaluate(l))).join("")],"resolved-locale":[st,[ct],(l,[s])=>s.evaluate(l).resolvedLocale()]});class Yc{constructor(s,u){var g;this.expression=s,this._warningHistory={},this._evaluator=new Wn,this._defaultValue=u?"color"===(g=u).type&&pl(g.default)?new bi(0,0,0,0):"color"===g.type?bi.parse(g.default)||null:"padding"===g.type?kr.parse(g.default)||null:"variableAnchorOffsetCollection"===g.type?ts.parse(g.default)||null:void 0===g.default?null:g.default:null,this._enumValues=u&&"enum"===u.type?u.values:null}evaluateWithoutErrorHandling(s,u,g,D,X,ne){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=D,this._evaluator.availableImages=X||null,this._evaluator.formattedSection=ne,this.expression.evaluate(this._evaluator)}evaluate(s,u,g,D,X,ne){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=D,this._evaluator.availableImages=X||null,this._evaluator.formattedSection=ne||null;try{const de=this.expression.evaluate(this._evaluator);if(null==de||"number"==typeof de&&de!=de)return this._defaultValue;if(this._enumValues&&!(de in this._enumValues))throw new Zt(`Expected value to be one of ${Object.keys(this._enumValues).map(me=>JSON.stringify(me)).join(", ")}, but found ${JSON.stringify(de)} instead.`);return de}catch(de){return this._warningHistory[de.message]||(this._warningHistory[de.message]=!0,typeof console<"u"&&console.warn(de.message)),this._defaultValue}}}function gl(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in Ka}function Ro(l,s){const u=new vn(Ka,Fo,[],s?function(D){const X={color:Ze,string:st,number:et,enum:st,boolean:Ge,formatted:_t,padding:Ut,resolvedImage:jt,variableAnchorOffsetCollection:rt};return"array"===D.type?Pe(X[D.value]||Ue,D.length):X[D.type]}(s):void 0),g=u.parse(l,void 0,void 0,void 0,s&&"string"===s.type?{typeAnnotation:"coerce"}:void 0);return g?Ql(new Yc(g,s)):po(u.errors)}class eh{constructor(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent="constant"!==s&&!Ls(u.expression)}evaluateWithoutErrorHandling(s,u,g,D,X,ne){return this._styleExpression.evaluateWithoutErrorHandling(s,u,g,D,X,ne)}evaluate(s,u,g,D,X,ne){return this._styleExpression.evaluate(s,u,g,D,X,ne)}}class Ws{constructor(s,u,g,D){this.kind=s,this.zoomStops=g,this._styleExpression=u,this.isStateDependent="camera"!==s&&!Ls(u.expression),this.interpolationType=D}evaluateWithoutErrorHandling(s,u,g,D,X,ne){return this._styleExpression.evaluateWithoutErrorHandling(s,u,g,D,X,ne)}evaluate(s,u,g,D,X,ne){return this._styleExpression.evaluate(s,u,g,D,X,ne)}interpolationFactor(s,u,g){return this.interpolationType?Xn.interpolationFactor(this.interpolationType,s,u,g):0}}function Cd(l,s){const u=Ro(l,s);if("error"===u.result)return u;const g=u.value.expression,D=Os(g);if(!D&&!Ja(s))return po([new dt("","data expressions not supported")]);const X=Pi(g,["zoom"]);if(!X&&!qc(s))return po([new dt("","zoom expressions not supported")]);const ne=Kc(g);return ne||X?ne instanceof dt?po([ne]):ne instanceof Xn&&!Ns(s)?po([new dt("",'"interpolate" expressions cannot be used with this property')]):Ql(ne?new Ws(D?"camera":"composite",u.value,ne.labels,ne instanceof Xn?ne.interpolation:void 0):new eh(D?"constant":"source",u.value)):po([new dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class tc{constructor(s,u){this._parameters=s,this._specification=u,it(this,Wc(this._parameters,this._specification))}static deserialize(s){return new tc(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Kc(l){let s=null;if(l instanceof fn)s=Kc(l.result);else if(l instanceof Pr){for(const u of l.args)if(s=Kc(u),s)break}else(l instanceof an||l instanceof Xn)&&l.input instanceof ns&&"zoom"===l.input.name&&(s=l);return s instanceof dt||l.eachChild(u=>{const g=Kc(u);g instanceof dt?s=g:!s&&g?s=new dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&g&&s!==g&&(s=new dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function ml(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const s of l.slice(1))if(!ml(s)&&"boolean"!=typeof s)return!1;return!0;default:return!0}}const Jc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ss(l){if(null==l)return{filter:()=>!0,needGeometry:!1};ml(l)||(l=Qc(l));const s=Ro(l,Jc);if("error"===s.result)throw new Error(s.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,D)=>s.value.evaluate(u,g,{},D),needGeometry:th(l)}}function yl(l,s){return l<s?-1:l>s?1:0}function th(l){if(!Array.isArray(l))return!1;if("within"===l[0]||"distance"===l[0])return!0;for(let s=1;s<l.length;s++)if(th(l[s]))return!0;return!1}function Qc(l){if(!l)return!0;const s=l[0];return l.length<=1?"any"!==s:"=="===s?nh(l[1],l[2],"=="):"!="===s?vl(nh(l[1],l[2],"==")):"<"===s||">"===s||"<="===s||">="===s?nh(l[1],l[2],s):"any"===s?(u=l.slice(1),["any"].concat(u.map(Qc))):"all"===s?["all"].concat(l.slice(1).map(Qc)):"none"===s?["all"].concat(l.slice(1).map(Qc).map(vl)):"in"===s?Ni(l[1],l.slice(2)):"!in"===s?vl(Ni(l[1],l.slice(2))):"has"===s?ih(l[1]):"!has"!==s||vl(ih(l[1]));var u}function nh(l,s,u){switch(l){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,l,s]}}function Ni(l,s){if(0===s.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",l,["literal",s.sort(yl)]]:["filter-in-small",l,["literal",s]]}}function ih(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function vl(l){return["!",l]}function rh(l){const s=typeof l;if("number"===s||"boolean"===s||"string"===s||null==l)return JSON.stringify(l);if(Array.isArray(l)){let D="[";for(const X of l)D+=`${rh(X)},`;return`${D}]`}const u=Object.keys(l).sort();let g="{";for(let D=0;D<u.length;D++)g+=`${JSON.stringify(u[D])}:${rh(l[u[D]])},`;return`${g}}`}function jr(l){let s="";for(const u of we)s+=`/${rh(l[u])}`;return s}function Sd(l){const s=l.value;return s?[new He(l.key,s,"constants have been deprecated as of v8")]:[]}function Ji(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function kn(l){if(Array.isArray(l))return l.map(kn);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const s={};for(const u in l)s[u]=kn(l[u]);return s}return Ji(l)}function Qi(l){const s=l.key,u=l.value,g=l.valueSpec||{},D=l.objectElementValidators||{},X=l.style,ne=l.styleSpec,de=l.validateSpec;let me=[];const Ae=Ci(u);if("object"!==Ae)return[new He(s,u,`object expected, ${Ae} found`)];for(const Ie in u){const Le=Ie.split(".")[0],Ve=g[Le]||g["*"];let Ke;if(D[Le])Ke=D[Le];else if(g[Le])Ke=de;else if(D["*"])Ke=D["*"];else{if(!g["*"]){me.push(new He(s,u[Ie],`unknown property "${Ie}"`));continue}Ke=de}me=me.concat(Ke({key:(s&&`${s}.`)+Ie,value:u[Ie],valueSpec:Ve,style:X,styleSpec:ne,object:u,objectKey:Ie,validateSpec:de},u))}for(const Ie in g)D[Ie]||g[Ie].required&&void 0===g[Ie].default&&void 0===u[Ie]&&me.push(new He(s,u,`missing required property "${Ie}"`));return me}function Ei(l){const s=l.value,u=l.valueSpec,g=l.style,D=l.styleSpec,X=l.key,ne=l.arrayElementValidator||l.validateSpec;if("array"!==Ci(s))return[new He(X,s,`array expected, ${Ci(s)} found`)];if(u.length&&s.length!==u.length)return[new He(X,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new He(X,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let de={type:u.value,values:u.values};D.$version<7&&(de.function=u.function),"object"===Ci(u.value)&&(de=u.value);let me=[];for(let Ae=0;Ae<s.length;Ae++)me=me.concat(ne({array:s,arrayIndex:Ae,value:s[Ae],valueSpec:de,validateSpec:l.validateSpec,style:g,styleSpec:D,key:`${X}[${Ae}]`}));return me}function Rr(l){const s=l.key,u=l.value,g=l.valueSpec;let D=Ci(u);return"number"===D&&u!=u&&(D="NaN"),"number"!==D?[new He(s,u,`number expected, ${D} found`)]:"minimum"in g&&u<g.minimum?[new He(s,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new He(s,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function is(l){const s=l.valueSpec,u=Ji(l.value.type);let g,D,X,ne={};const de="categorical"!==u&&void 0===l.value.property,me=!de,Ae="array"===Ci(l.value.stops)&&"array"===Ci(l.value.stops[0])&&"object"===Ci(l.value.stops[0][0]),Ie=Qi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(Ke){if("identity"===u)return[new He(Ke.key,Ke.value,'identity function may not have a "stops" property')];let nt=[];const ut=Ke.value;return nt=nt.concat(Ei({key:Ke.key,value:ut,valueSpec:Ke.valueSpec,validateSpec:Ke.validateSpec,style:Ke.style,styleSpec:Ke.styleSpec,arrayElementValidator:Le})),"array"===Ci(ut)&&0===ut.length&&nt.push(new He(Ke.key,ut,"array must have at least one stop")),nt},default:function(Ke){return Ke.validateSpec({key:Ke.key,value:Ke.value,valueSpec:s,validateSpec:Ke.validateSpec,style:Ke.style,styleSpec:Ke.styleSpec})}}});return"identity"===u&&de&&Ie.push(new He(l.key,l.value,'missing required property "property"')),"identity"===u||l.value.stops||Ie.push(new He(l.key,l.value,'missing required property "stops"')),"exponential"===u&&l.valueSpec.expression&&!Ns(l.valueSpec)&&Ie.push(new He(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(me&&!Ja(l.valueSpec)?Ie.push(new He(l.key,l.value,"property functions not supported")):de&&!qc(l.valueSpec)&&Ie.push(new He(l.key,l.value,"zoom functions not supported"))),"categorical"!==u&&!Ae||void 0!==l.value.property||Ie.push(new He(l.key,l.value,'"property" property is required')),Ie;function Le(Ke){let nt=[];const ut=Ke.value,xt=Ke.key;if("array"!==Ci(ut))return[new He(xt,ut,`array expected, ${Ci(ut)} found`)];if(2!==ut.length)return[new He(xt,ut,`array length 2 expected, length ${ut.length} found`)];if(Ae){if("object"!==Ci(ut[0]))return[new He(xt,ut,`object expected, ${Ci(ut[0])} found`)];if(void 0===ut[0].zoom)return[new He(xt,ut,"object stop key must have zoom")];if(void 0===ut[0].value)return[new He(xt,ut,"object stop key must have value")];if(X&&X>Ji(ut[0].zoom))return[new He(xt,ut[0].zoom,"stop zoom values must appear in ascending order")];Ji(ut[0].zoom)!==X&&(X=Ji(ut[0].zoom),D=void 0,ne={}),nt=nt.concat(Qi({key:`${xt}[0]`,value:ut[0],valueSpec:{zoom:{}},validateSpec:Ke.validateSpec,style:Ke.style,styleSpec:Ke.styleSpec,objectElementValidators:{zoom:Rr,value:Ve}}))}else nt=nt.concat(Ve({key:`${xt}[0]`,value:ut[0],valueSpec:{},validateSpec:Ke.validateSpec,style:Ke.style,styleSpec:Ke.styleSpec},ut));return gl(kn(ut[1]))?nt.concat([new He(`${xt}[1]`,ut[1],"expressions are not allowed in function stops.")]):nt.concat(Ke.validateSpec({key:`${xt}[1]`,value:ut[1],valueSpec:s,validateSpec:Ke.validateSpec,style:Ke.style,styleSpec:Ke.styleSpec}))}function Ve(Ke,nt){const ut=Ci(Ke.value),xt=Ji(Ke.value),At=null!==Ke.value?Ke.value:nt;if(g){if(ut!==g)return[new He(Ke.key,At,`${ut} stop domain type must match previous stop domain type ${g}`)]}else g=ut;if("number"!==ut&&"string"!==ut&&"boolean"!==ut)return[new He(Ke.key,At,"stop domain value must be a number, string, or boolean")];if("number"!==ut&&"categorical"!==u){let Rt=`number expected, ${ut} found`;return Ja(s)&&void 0===u&&(Rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(Ke.key,At,Rt)]}return"categorical"!==u||"number"!==ut||isFinite(xt)&&Math.floor(xt)===xt?"categorical"!==u&&"number"===ut&&void 0!==D&&xt<D?[new He(Ke.key,At,"stop domain values must appear in ascending order")]:(D=xt,"categorical"===u&&xt in ne?[new He(Ke.key,At,"stop domain values must be unique")]:(ne[xt]=!0,[])):[new He(Ke.key,At,`integer expected, found ${xt}`)]}}function oa(l){const s=("property"===l.expressionContext?Cd:Ro)(kn(l.value),l.valueSpec);if("error"===s.result)return s.value.map(g=>new He(`${l.key}${g.key}`,l.value,g.message));const u=s.value.expression||s.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!u.outputDefined())return[new He(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Ls(u))return[new He(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext&&!Ls(u))return[new He(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!Pi(u,["zoom","feature-state"]))return[new He(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!Os(u))return[new He(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rs(l){const s=l.key,u=l.value,g=l.valueSpec,D=[];return Array.isArray(g.values)?-1===g.values.indexOf(Ji(u))&&D.push(new He(s,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):-1===Object.keys(g.values).indexOf(Ji(u))&&D.push(new He(s,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),D}function xl(l){return ml(kn(l.value))?oa(it({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_l(l)}function _l(l){const s=l.value,u=l.key;if("array"!==Ci(s))return[new He(u,s,`array expected, ${Ci(s)} found`)];const g=l.styleSpec;let D,X=[];if(s.length<1)return[new He(u,s,"filter array must have at least 1 element")];switch(X=X.concat(rs({key:`${u}[0]`,value:s[0],valueSpec:g.filter_operator,style:l.style,styleSpec:l.styleSpec})),Ji(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===Ji(s[1])&&X.push(new He(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":3!==s.length&&X.push(new He(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(D=Ci(s[1]),"string"!==D&&X.push(new He(`${u}[1]`,s[1],`string expected, ${D} found`)));for(let ne=2;ne<s.length;ne++)D=Ci(s[ne]),"$type"===Ji(s[1])?X=X.concat(rs({key:`${u}[${ne}]`,value:s[ne],valueSpec:g.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==D&&"number"!==D&&"boolean"!==D&&X.push(new He(`${u}[${ne}]`,s[ne],`string, number, or boolean expected, ${D} found`));break;case"any":case"all":case"none":for(let ne=1;ne<s.length;ne++)X=X.concat(_l({key:`${u}[${ne}]`,value:s[ne],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":D=Ci(s[1]),2!==s.length?X.push(new He(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):"string"!==D&&X.push(new He(`${u}[1]`,s[1],`string expected, ${D} found`))}return X}function bl(l,s){const u=l.key,g=l.validateSpec,D=l.style,X=l.styleSpec,ne=l.value,de=l.objectKey,me=X[`${s}_${l.layerType}`];if(!me)return[];const Ae=de.match(/^(.*)-transition$/);if("paint"===s&&Ae&&me[Ae[1]]&&me[Ae[1]].transition)return g({key:u,value:ne,valueSpec:X.transition,style:D,styleSpec:X});const Ie=l.valueSpec||me[de];if(!Ie)return[new He(u,ne,`unknown property "${de}"`)];let Le;if("string"===Ci(ne)&&Ja(Ie)&&!Ie.tokens&&(Le=/^{([^}]+)}$/.exec(ne)))return[new He(u,ne,`"${de}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Le[1])} }\`.`)];const Ve=[];return"symbol"===l.layerType&&("text-field"===de&&D&&!D.glyphs&&Ve.push(new He(u,ne,'use of "text-field" requires a style "glyphs" property')),"text-font"===de&&pl(kn(ne))&&"identity"===Ji(ne.type)&&Ve.push(new He(u,ne,'"text-font" does not support identity functions'))),Ve.concat(g({key:l.key,value:ne,valueSpec:Ie,style:D,styleSpec:X,expressionContext:"property",propertyType:s,propertyKey:de}))}function sh(l){return bl(l,"paint")}function ah(l){return bl(l,"layout")}function gr(l){let s=[];const u=l.value,g=l.key,D=l.style,X=l.styleSpec;u.type||u.ref||s.push(new He(g,u,'either "type" or "ref" is required'));let ne=Ji(u.type);const de=Ji(u.ref);if(u.id){const me=Ji(u.id);for(let Ae=0;Ae<l.arrayIndex;Ae++){const Ie=D.layers[Ae];Ji(Ie.id)===me&&s.push(new He(g,u.id,`duplicate layer id "${u.id}", previously used at line ${Ie.id.__line__}`))}}if("ref"in u){let me;["type","source","source-layer","filter","layout"].forEach(Ae=>{Ae in u&&s.push(new He(g,u[Ae],`"${Ae}" is prohibited for ref layers`))}),D.layers.forEach(Ae=>{Ji(Ae.id)===de&&(me=Ae)}),me?me.ref?s.push(new He(g,u.ref,"ref cannot reference another ref layer")):ne=Ji(me.type):s.push(new He(g,u.ref,`ref layer "${de}" not found`))}else if("background"!==ne)if(u.source){const me=D.sources&&D.sources[u.source],Ae=me&&Ji(me.type);me?"vector"===Ae&&"raster"===ne?s.push(new He(g,u.source,`layer "${u.id}" requires a raster source`)):"raster-dem"!==Ae&&"hillshade"===ne?s.push(new He(g,u.source,`layer "${u.id}" requires a raster-dem source`)):"raster"===Ae&&"raster"!==ne?s.push(new He(g,u.source,`layer "${u.id}" requires a vector source`)):"vector"!==Ae||u["source-layer"]?"raster-dem"===Ae&&"hillshade"!==ne?s.push(new He(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==ne||!u.paint||!u.paint["line-gradient"]||"geojson"===Ae&&me.lineMetrics||s.push(new He(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new He(g,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new He(g,u.source,`source "${u.source}" not found`))}else s.push(new He(g,u,'missing required property "source"'));return s=s.concat(Qi({key:g,value:u,valueSpec:X.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${g}.type`,value:u.type,valueSpec:X.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:u,objectKey:"type"}),filter:xl,layout:me=>Qi({layer:u,key:me.key,value:me.value,style:me.style,styleSpec:me.styleSpec,validateSpec:me.validateSpec,objectElementValidators:{"*":Ae=>ah(it({layerType:ne},Ae))}}),paint:me=>Qi({layer:u,key:me.key,value:me.value,style:me.style,styleSpec:me.styleSpec,validateSpec:me.validateSpec,objectElementValidators:{"*":Ae=>sh(it({layerType:ne},Ae))}})}})),s}function Cn(l){const s=l.value,u=l.key,g=Ci(s);return"string"!==g?[new He(u,s,`string expected, ${g} found`)]:[]}const ui={promoteId:function({key:l,value:s}){if("string"===Ci(s))return Cn({key:l,value:s});{const u=[];for(const g in s)u.push(...Cn({key:`${l}.${g}`,value:s[g]}));return u}}};function ur(l){const s=l.value,u=l.key,g=l.styleSpec,D=l.style,X=l.validateSpec;if(!s.type)return[new He(u,s,'"type" is required')];const ne=Ji(s.type);let de;switch(ne){case"vector":case"raster":return de=Qi({key:u,value:s,valueSpec:g[`source_${ne.replace("-","_")}`],style:l.style,styleSpec:g,objectElementValidators:ui,validateSpec:X}),de;case"raster-dem":return de=function(me){var Ae;const Ie=null!==(Ae=me.sourceName)&&void 0!==Ae?Ae:"",Le=me.value,Ve=me.styleSpec,Ke=Ve.source_raster_dem,nt=me.style;let ut=[];const xt=Ci(Le);if(void 0===Le)return ut;if("object"!==xt)return ut.push(new He("source_raster_dem",Le,`object expected, ${xt} found`)),ut;const At="custom"===Ji(Le.encoding),Rt=["redFactor","greenFactor","blueFactor","baseShift"],Tt=me.value.encoding?`"${me.value.encoding}"`:"Default";for(const Ft in Le)!At&&Rt.includes(Ft)?ut.push(new He(Ft,Le[Ft],`In "${Ie}": "${Ft}" is only valid when "encoding" is set to "custom". ${Tt} encoding found`)):Ke[Ft]?ut=ut.concat(me.validateSpec({key:Ft,value:Le[Ft],valueSpec:Ke[Ft],validateSpec:me.validateSpec,style:nt,styleSpec:Ve})):ut.push(new He(Ft,Le[Ft],`unknown property "${Ft}"`));return ut}({sourceName:u,value:s,style:l.style,styleSpec:g,validateSpec:X}),de;case"geojson":if(de=Qi({key:u,value:s,valueSpec:g.source_geojson,style:D,styleSpec:g,validateSpec:X,objectElementValidators:ui}),s.cluster)for(const me in s.clusterProperties){const[Ae,Ie]=s.clusterProperties[me],Le="string"==typeof Ae?[Ae,["accumulated"],["get",me]]:Ae;de.push(...oa({key:`${u}.${me}.map`,value:Ie,validateSpec:X,expressionContext:"cluster-map"})),de.push(...oa({key:`${u}.${me}.reduce`,value:Le,validateSpec:X,expressionContext:"cluster-reduce"}))}return de;case"video":return Qi({key:u,value:s,valueSpec:g.source_video,style:D,validateSpec:X,styleSpec:g});case"image":return Qi({key:u,value:s,valueSpec:g.source_image,style:D,validateSpec:X,styleSpec:g});case"canvas":return[new He(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rs({key:`${u}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:D,validateSpec:X,styleSpec:g})}}function Xs(l){const s=l.value,u=l.styleSpec,g=u.light,D=l.style;let X=[];const ne=Ci(s);if(void 0===s)return X;if("object"!==ne)return X=X.concat([new He("light",s,`object expected, ${ne} found`)]),X;for(const de in s){const me=de.match(/^(.*)-transition$/);X=X.concat(me&&g[me[1]]&&g[me[1]].transition?l.validateSpec({key:de,value:s[de],valueSpec:u.transition,validateSpec:l.validateSpec,style:D,styleSpec:u}):g[de]?l.validateSpec({key:de,value:s[de],valueSpec:g[de],validateSpec:l.validateSpec,style:D,styleSpec:u}):[new He(de,s[de],`unknown property "${de}"`)])}return X}function wl(l){const s=l.value,u=l.styleSpec,g=u.sky,D=l.style,X=Ci(s);if(void 0===s)return[];if("object"!==X)return[new He("sky",s,`object expected, ${X} found`)];let ne=[];for(const de in s)ne=ne.concat(g[de]?l.validateSpec({key:de,value:s[de],valueSpec:g[de],style:D,styleSpec:u}):[new He(de,s[de],`unknown property "${de}"`)]);return ne}function Hr(l){const s=l.value,u=l.styleSpec,g=u.terrain,D=l.style;let X=[];const ne=Ci(s);if(void 0===s)return X;if("object"!==ne)return X=X.concat([new He("terrain",s,`object expected, ${ne} found`)]),X;for(const de in s)X=X.concat(g[de]?l.validateSpec({key:de,value:s[de],valueSpec:g[de],validateSpec:l.validateSpec,style:D,styleSpec:u}):[new He(de,s[de],`unknown property "${de}"`)]);return X}function yo(l){let s=[];const u=l.value,g=l.key;if(Array.isArray(u)){const D=[],X=[];for(const ne in u)u[ne].id&&D.includes(u[ne].id)&&s.push(new He(g,u,`all the sprites' ids must be unique, but ${u[ne].id} is duplicated`)),D.push(u[ne].id),u[ne].url&&X.includes(u[ne].url)&&s.push(new He(g,u,`all the sprites' URLs must be unique, but ${u[ne].url} is duplicated`)),X.push(u[ne].url),s=s.concat(Qi({key:`${g}[${ne}]`,value:u[ne],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return s}return Cn({key:g,value:u})}const yr={"*":()=>[],array:Ei,boolean:function(l){const s=l.value,u=l.key,g=Ci(s);return"boolean"!==g?[new He(u,s,`boolean expected, ${g} found`)]:[]},number:Rr,color:function(l){const s=l.key,u=l.value,g=Ci(u);return"string"!==g?[new He(s,u,`color expected, ${g} found`)]:bi.parse(String(u))?[]:[new He(s,u,`color expected, "${u}" found`)]},constants:Sd,enum:rs,filter:xl,function:is,layer:gr,object:Qi,source:ur,light:Xs,sky:wl,terrain:Hr,projection:function(l){const s=l.value,u=l.styleSpec,g=u.projection,D=l.style,X=Ci(s);if(void 0===s)return[];if("object"!==X)return[new He("projection",s,`object expected, ${X} found`)];let ne=[];for(const de in s)ne=ne.concat(g[de]?l.validateSpec({key:de,value:s[de],valueSpec:g[de],style:D,styleSpec:u}):[new He(de,s[de],`unknown property "${de}"`)]);return ne},string:Cn,formatted:function(l){return 0===Cn(l).length?[]:oa(l)},resolvedImage:function(l){return 0===Cn(l).length?[]:oa(l)},padding:function(l){const s=l.key,u=l.value;if("array"===Ci(u)){if(u.length<1||u.length>4)return[new He(s,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let D=[];for(let X=0;X<u.length;X++)D=D.concat(l.validateSpec({key:`${s}[${X}]`,value:u[X],validateSpec:l.validateSpec,valueSpec:g}));return D}return Rr({key:s,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(l){const s=l.key,u=l.value,g=Ci(u),D=l.styleSpec;if("array"!==g||u.length<1||u.length%2!=0)return[new He(s,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let X=[];for(let ne=0;ne<u.length;ne+=2)X=X.concat(rs({key:`${s}[${ne}]`,value:u[ne],valueSpec:D.layout_symbol["text-anchor"]})),X=X.concat(Ei({key:`${s}[${ne+1}]`,value:u[ne+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:D}));return X},sprite:yo};function la(l){const s=l.value,u=l.valueSpec,g=l.styleSpec;return l.validateSpec=la,u.expression&&pl(Ji(s))?is(l):u.expression&&gl(kn(s))?oa(l):u.type&&yr[u.type]?yr[u.type](l):Qi(it({},l,{valueSpec:u.type?g[u.type]:u}))}function Oo(l){const s=l.value,u=l.key,g=Cn(l);return g.length||(-1===s.indexOf("{fontstack}")&&g.push(new He(u,s,'"glyphs" url must include a "{fontstack}" token')),-1===s.indexOf("{range}")&&g.push(new He(u,s,'"glyphs" url must include a "{range}" token'))),g}function Kn(l,s=_e){let u=[];return u=u.concat(la({key:"",value:l,valueSpec:s.$root,styleSpec:s,style:l,validateSpec:la,objectElementValidators:{glyphs:Oo,"*":()=>[]}})),l.constants&&(u=u.concat(Sd({key:"constants",value:l.constants,style:l,styleSpec:s,validateSpec:la}))),eu(u)}function As(l){return function(s){return l({...s,validateSpec:la})}}function eu(l){return[].concat(l).sort((s,u)=>s.line-u.line)}function hs(l){return function(...s){return eu(l.apply(this,s))}}Kn.source=hs(As(ur)),Kn.sprite=hs(As(yo)),Kn.glyphs=hs(As(Oo)),Kn.light=hs(As(Xs)),Kn.sky=hs(As(wl)),Kn.terrain=hs(As(Hr)),Kn.layer=hs(As(gr)),Kn.filter=hs(As(xl)),Kn.paintProperty=hs(As(sh)),Kn.layoutProperty=hs(As(ah));const Gi=Kn,nc=Gi.light,vo=Gi.sky,Ba=Gi.paintProperty,ic=Gi.layoutProperty;function tu(l,s){let u=!1;if(s&&s.length)for(const g of s)l.fire(new ye(new Error(g.message))),u=!0;return u}class Zs{constructor(s,u,g){const D=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const ne=new Int32Array(this.arrayBuffer);s=ne[0],this.d=(u=ne[1])+2*(g=ne[2]);for(let me=0;me<this.d*this.d;me++){const Ae=ne[3+me],Ie=ne[3+me+1];D.push(Ae===Ie?null:ne.subarray(Ae,Ie))}const de=ne[3+D.length+1];this.keys=ne.subarray(ne[3+D.length],de),this.bboxes=ne.subarray(de),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let ne=0;ne<this.d*this.d;ne++)D.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=g,this.scale=u/s,this.uid=0;const X=g/u*s;this.min=-X,this.max=s+X}insert(s,u,g,D,X){this._forEachCell(u,g,D,X,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(D),this.bboxes.push(X)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,u,g,D,X,ne){this.cells[X].push(ne)}query(s,u,g,D,X){const ne=this.min,de=this.max;if(s<=ne&&u<=ne&&de<=g&&de<=D&&!X)return Array.prototype.slice.call(this.keys);{const me=[];return this._forEachCell(s,u,g,D,this._queryCell,me,{},X),me}}_queryCell(s,u,g,D,X,ne,de,me){const Ae=this.cells[X];if(null!==Ae){const Ie=this.keys,Le=this.bboxes;for(let Ve=0;Ve<Ae.length;Ve++){const Ke=Ae[Ve];if(void 0===de[Ke]){const nt=4*Ke;(me?me(Le[nt+0],Le[nt+1],Le[nt+2],Le[nt+3]):s<=Le[nt+2]&&u<=Le[nt+3]&&g>=Le[nt+0]&&D>=Le[nt+1])?(de[Ke]=!0,ne.push(Ie[Ke])):de[Ke]=!1}}}}_forEachCell(s,u,g,D,X,ne,de,me){const Ae=this._convertToCellCoord(s),Ie=this._convertToCellCoord(u),Le=this._convertToCellCoord(g),Ve=this._convertToCellCoord(D);for(let Ke=Ae;Ke<=Le;Ke++)for(let nt=Ie;nt<=Ve;nt++){const ut=this.d*nt+Ke;if((!me||me(this._convertFromCellCoord(Ke),this._convertFromCellCoord(nt),this._convertFromCellCoord(Ke+1),this._convertFromCellCoord(nt+1)))&&X.call(this,s,u,g,D,ut,ne,de,me))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,u=3+this.cells.length+1+1;let g=0;for(let ne=0;ne<this.cells.length;ne++)g+=this.cells[ne].length;const D=new Int32Array(u+g+this.keys.length+this.bboxes.length);D[0]=this.extent,D[1]=this.n,D[2]=this.padding;let X=u;for(let ne=0;ne<s.length;ne++){const de=s[ne];D[3+ne]=X,D.set(de,X),X+=de.length}return D[3+s.length]=X,D.set(this.keys,X),X+=this.keys.length,D[3+s.length+1]=X,D.set(this.bboxes,X),X+=this.bboxes.length,D.buffer}static serialize(s,u){const g=s.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(s){return new Zs(s.buffer)}}const Gr={};function Tn(l,s,u={}){if(Gr[l])throw new Error(`${l} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:l,writeable:!1}),Gr[l]={klass:s,omit:u.omit||[],shallow:u.shallow||[]}}Tn("Object",Object),Tn("TransferableGridIndex",Zs),Tn("Color",bi),Tn("Error",Error),Tn("AJAXError",L),Tn("ResolvedImage",Ir),Tn("StylePropertyFunction",tc),Tn("StyleExpression",Yc,{omit:["_evaluator"]}),Tn("ZoomDependentExpression",Ws),Tn("ZoomConstantExpression",eh),Tn("CompoundExpression",ns,{omit:["_evaluate"]});for(const l in Ka)Ka[l]._classRegistryKey||Tn(`Expression_${l}`,Ka[l]);function Cl(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function xi(l){return l.$name||l.constructor._classRegistryKey}function rp(l){return!function(s){if(null===s||"object"!=typeof s)return!1;const u=xi(s);return!(!u||"Object"===u)}(l)&&(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Cl(l)||E(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Lo(l,s){if(rp(l))return(Cl(l)||E(l))&&s&&s.push(l),ArrayBuffer.isView(l)&&s&&s.push(l.buffer),l instanceof ImageData&&s&&s.push(l.data.buffer),l;if(Array.isArray(l)){const X=[];for(const ne of l)X.push(Lo(ne,s));return X}if("object"!=typeof l)throw new Error("can't serialize object of type "+typeof l);const u=xi(l);if(!u)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Gr[u])throw new Error(`${u} is not registered.`);const{klass:g}=Gr[u],D=g.serialize?g.serialize(l,s):{};if(g.serialize){if(s&&D===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const X in l){if(!l.hasOwnProperty(X)||Gr[u].omit.indexOf(X)>=0)continue;const ne=l[X];D[X]=Gr[u].shallow.indexOf(X)>=0?ne:Lo(ne,s)}l instanceof Error&&(D.message=l.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(D.$name=u),D}function Ca(l){if(rp(l))return l;if(Array.isArray(l))return l.map(Ca);if("object"!=typeof l)throw new Error("can't deserialize object of type "+typeof l);const s=xi(l)||"Object";if(!Gr[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:u}=Gr[s];if(!u)throw new Error(`can't deserialize unregistered class ${s}`);if(u.deserialize)return u.deserialize(l);const g=Object.create(u.prototype);for(const D of Object.keys(l)){if("$name"===D)continue;const X=l[D];g[D]=Gr[s].shallow.indexOf(D)>=0?X:Ca(X)}return g}class Sa{constructor(){this.first=!0}update(s,u){const g=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=g,!0))}}const _n={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function xo(l){for(const s of l)if(Ad(s.charCodeAt(0)))return!0;return!1}function rc(l){for(const s of l)if(!$r(s.charCodeAt(0)))return!1;return!0}function $r(l){return!(_n.Arabic(l)||_n["Arabic Supplement"](l)||_n["Arabic Extended-A"](l)||_n["Arabic Presentation Forms-A"](l)||_n["Arabic Presentation Forms-B"](l))}function Ad(l){return!(746!==l&&747!==l&&(l<4352||!(_n["Bopomofo Extended"](l)||_n.Bopomofo(l)||_n["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||_n["CJK Compatibility Ideographs"](l)||_n["CJK Compatibility"](l)||_n["CJK Radicals Supplement"](l)||_n["CJK Strokes"](l)||!(!_n["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||_n["CJK Unified Ideographs Extension A"](l)||_n["CJK Unified Ideographs"](l)||_n["Enclosed CJK Letters and Months"](l)||_n["Hangul Compatibility Jamo"](l)||_n["Hangul Jamo Extended-A"](l)||_n["Hangul Jamo Extended-B"](l)||_n["Hangul Jamo"](l)||_n["Hangul Syllables"](l)||_n.Hiragana(l)||_n["Ideographic Description Characters"](l)||_n.Kanbun(l)||_n["Kangxi Radicals"](l)||_n["Katakana Phonetic Extensions"](l)||_n.Katakana(l)&&12540!==l||!(!_n["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!_n["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||_n["Unified Canadian Aboriginal Syllabics"](l)||_n["Unified Canadian Aboriginal Syllabics Extended"](l)||_n["Vertical Forms"](l)||_n["Yijing Hexagram Symbols"](l)||_n["Yi Syllables"](l)||_n["Yi Radicals"](l))))}function Es(l){return!(Ad(l)||(s=l,_n["Latin-1 Supplement"](s)&&(167===s||169===s||174===s||177===s||188===s||189===s||190===s||215===s||247===s)||_n["General Punctuation"](s)&&(8214===s||8224===s||8225===s||8240===s||8241===s||8251===s||8252===s||8258===s||8263===s||8264===s||8265===s||8273===s)||_n["Letterlike Symbols"](s)||_n["Number Forms"](s)||_n["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||9003===s||s>=9085&&s<=9114||s>=9150&&s<=9165||9167===s||s>=9169&&s<=9179||s>=9186&&s<=9215)||_n["Control Pictures"](s)&&9251!==s||_n["Optical Character Recognition"](s)||_n["Enclosed Alphanumerics"](s)||_n["Geometric Shapes"](s)||_n["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||_n["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||_n["CJK Symbols and Punctuation"](s)||_n.Katakana(s)||_n["Private Use Area"](s)||_n["CJK Compatibility Forms"](s)||_n["Small Form Variants"](s)||_n["Halfwidth and Fullwidth Forms"](s)||8734===s||8756===s||8757===s||s>=9984&&s<=10087||s>=10102&&s<=10131||65532===s||65533===s));var s}function Sr(l){return l>=1424&&l<=2303||_n["Arabic Presentation Forms-A"](l)||_n["Arabic Presentation Forms-B"](l)}function nu(l,s){return!(!s&&Sr(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||_n.Khmer(l))}function Qa(l){for(const s of l)if(Sr(s.charCodeAt(0)))return!0;return!1}const Aa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Di{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sa,this.transition={})}isSupportedScript(s){return function(u,g){for(const D of u)if(!nu(D.charCodeAt(0),g))return!1;return!0}(s,"loaded"===Aa.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,u=s-Math.floor(s),g=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Sl{constructor(s,u){this.property=s,this.value=u,this.expression=function(g,D){if(pl(g))return new tc(g,D);if(gl(g)){const X=Cd(g,D);if("error"===X.result)throw new Error(X.value.map(ne=>`${ne.key}: ${ne.message}`).join(", "));return X.value}{let X=g;return"color"===D.type&&"string"==typeof g?X=bi.parse(g):"padding"!==D.type||"number"!=typeof g&&!Array.isArray(g)?"variableAnchorOffsetCollection"===D.type&&Array.isArray(g)&&(X=ts.parse(g)):X=kr.parse(g),{kind:"constant",evaluate:()=>X}}}(void 0===u?s.specification.default:u,s.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(s,u,g){return this.property.possiblyEvaluate(this,s,u,g)}}class Al{constructor(s){this.property=s,this.value=new Sl(s,void 0)}transitioned(s,u){return new sp(this.property,this.value,u,O({},s.transition,this.transition),s.now)}untransitioned(){return new sp(this.property,this.value,null,{},0)}}class El{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return q(this._values[s].value.value)}setValue(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Al(this._values[s].property)),this._values[s].value=new Sl(this._values[s].property,null===u?void 0:q(u))}getTransition(s){return q(this._values[s].transition)}setTransition(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Al(this._values[s].property)),this._values[s].transition=q(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const g=this.getValue(u);void 0!==g&&(s[u]=g);const D=this.getTransition(u);void 0!==D&&(s[`${u}-transition`]=D)}return s}transitioned(s,u){const g=new oh(this._properties);for(const D of Object.keys(this._values))g._values[D]=this._values[D].transitioned(s,u._values[D]);return g}untransitioned(){const s=new oh(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class sp{constructor(s,u,g,D,X){this.property=s,this.value=u,this.begin=X+D.delay||0,this.end=this.begin+D.duration||0,s.specification.transition&&(D.delay||D.duration)&&(this.prior=g)}possiblyEvaluate(s,u,g){const D=s.now||0,X=this.value.possiblyEvaluate(s,u,g),ne=this.prior;if(ne){if(D>this.end)return this.prior=null,X;if(this.value.isDataDriven())return this.prior=null,X;if(D<this.begin)return ne.possiblyEvaluate(s,u,g);{const de=(D-this.begin)/(this.end-this.begin);return this.property.interpolate(ne.possiblyEvaluate(s,u,g),X,function(me){if(me<=0)return 0;if(me>=1)return 1;const Ae=me*me,Ie=Ae*me;return 4*(me<.5?Ie:3*(me-Ae)+Ie-.75)}(de))}}return X}}class oh{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,g){const D=new lh(this._properties);for(const X of Object.keys(this._values))D._values[X]=this._values[X].possiblyEvaluate(s,u,g);return D}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class sc{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return void 0!==this._values[s].value}getValue(s){return q(this._values[s].value)}setValue(s,u){this._values[s]=new Sl(this._values[s].property,null===u?void 0:q(u))}serialize(){const s={};for(const u of Object.keys(this._values)){const g=this.getValue(u);void 0!==g&&(s[u]=g)}return s}possiblyEvaluate(s,u,g){const D=new lh(this._properties);for(const X of Object.keys(this._values))D._values[X]=this._values[X].possiblyEvaluate(s,u,g);return D}}class eo{constructor(s,u,g){this.property=s,this.value=u,this.parameters=g}isConstant(){return"constant"===this.value.kind}constantOr(s){return"constant"===this.value.kind?this.value.value:s}evaluate(s,u,g,D){return this.property.evaluate(this.value,this.parameters,s,u,g,D)}}class lh{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Hn{constructor(s){this.specification=s}possiblyEvaluate(s,u){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(u)}interpolate(s,u,g){const D=jn[this.specification.type];return D?D(s,u,g):s}}class Jn{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,g,D){return new eo(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(u,null,{},g,D)}:s.expression,u)}interpolate(s,u,g){if("constant"!==s.value.kind||"constant"!==u.value.kind)return s;if(void 0===s.value.value||void 0===u.value.value)return new eo(this,{kind:"constant",value:void 0},s.parameters);const D=jn[this.specification.type];if(D){const X=D(s.value.value,u.value.value,g);return new eo(this,{kind:"constant",value:X},s.parameters)}return s}evaluate(s,u,g,D,X,ne){return"constant"===s.kind?s.value:s.evaluate(u,g,D,X,ne)}}class Z extends Jn{possiblyEvaluate(s,u,g,D){if(void 0===s.value)return new eo(this,{kind:"constant",value:void 0},u);if("constant"===s.expression.kind){const X=s.expression.evaluate(u,null,{},g,D),ne="resolvedImage"===s.property.specification.type&&"string"!=typeof X?X.name:X,de=this._calculate(ne,ne,ne,u);return new eo(this,{kind:"constant",value:de},u)}if("camera"===s.expression.kind){const X=this._calculate(s.expression.evaluate({zoom:u.zoom-1}),s.expression.evaluate({zoom:u.zoom}),s.expression.evaluate({zoom:u.zoom+1}),u);return new eo(this,{kind:"constant",value:X},u)}return new eo(this,s.expression,u)}evaluate(s,u,g,D,X,ne){if("source"===s.kind){const de=s.evaluate(u,g,D,X,ne);return this._calculate(de,de,de,u)}return"composite"===s.kind?this._calculate(s.evaluate({zoom:Math.floor(u.zoom)-1},g,D),s.evaluate({zoom:Math.floor(u.zoom)},g,D),s.evaluate({zoom:Math.floor(u.zoom)+1},g,D),u):s.value}_calculate(s,u,g,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:g,to:u}}interpolate(s){return s}}class a{constructor(s){this.specification=s}possiblyEvaluate(s,u,g,D){if(void 0!==s.value){if("constant"===s.expression.kind){const X=s.expression.evaluate(u,null,{},g,D);return this._calculate(X,X,X,u)}return this._calculate(s.expression.evaluate(new Di(Math.floor(u.zoom-1),u)),s.expression.evaluate(new Di(Math.floor(u.zoom),u)),s.expression.evaluate(new Di(Math.floor(u.zoom+1),u)),u)}}_calculate(s,u,g,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:g,to:u}}interpolate(s){return s}}class d{constructor(s){this.specification=s}possiblyEvaluate(s,u,g,D){return!!s.expression.evaluate(u,null,{},g,D)}interpolate(){return!1}}class w{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in s){const g=s[u];g.specification.overridable&&this.overridableProperties.push(u);const D=this.defaultPropertyValues[u]=new Sl(g,void 0),X=this.defaultTransitionablePropertyValues[u]=new Al(g);this.defaultTransitioningPropertyValues[u]=X.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=D.possiblyEvaluate({})}}}Tn("DataDrivenProperty",Jn),Tn("DataConstantProperty",Hn),Tn("CrossFadedDataDrivenProperty",Z),Tn("CrossFadedProperty",a),Tn("ColorRampProperty",d);const T="-transition";class Y extends Te{constructor(s,u){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==s.type&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,"background"!==s.type&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),u.layout&&(this._unevaluatedLayout=new sc(u.layout)),u.paint)){this._transitionablePaint=new El(u.paint);for(const g in s.paint)this.setPaintProperty(g,s.paint[g],{validate:!1});for(const g in s.layout)this.setLayoutProperty(g,s.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new lh(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return"visibility"===s?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u,g={}){null!=u&&this._validate(ic,`layers.${this.id}.layout.${s}`,s,u,g)||("visibility"!==s?this._unevaluatedLayout.setValue(s,u):this.visibility=u)}getPaintProperty(s){return s.endsWith(T)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u,g={}){if(null!=u&&this._validate(Ba,`layers.${this.id}.paint.${s}`,s,u,g))return!1;if(s.endsWith(T))return this._transitionablePaint.setTransition(s.slice(0,-11),u||void 0),!1;{const D=this._transitionablePaint._values[s],X="cross-faded-data-driven"===D.property.specification["property-type"],ne=D.value.isDataDriven(),de=D.value;this._transitionablePaint.setValue(s,u),this._handleSpecialPaintPropertyUpdate(s);const me=this._transitionablePaint._values[s].value;return me.isDataDriven()||ne||X||this._handleOverridablePaintPropertyUpdate(s,de,me)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,u,g){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||"none"===this.visibility}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),b(s,(u,g)=>!(void 0===u||"layout"===g&&!Object.keys(u).length||"paint"===g&&!Object.keys(u).length))}_validate(s,u,g,D,X={}){return(!X||!1!==X.validate)&&tu(this,s.call(Gi,{key:u,layerType:this.type,objectKey:g,value:D,styleSpec:_e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof eo&&Ja(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}}const ge={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ve{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Se{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ke(l,s=1){let u=0,g=0;return{members:l.map(D=>{const X=ge[D.type].BYTES_PER_ELEMENT,ne=u=ze(u,Math.max(s,X)),de=D.components||1;return g=Math.max(g,X),u+=X*de,{name:D.name,type:D.type,components:de,offset:ne}}),size:ze(u,Math.max(g,s)),alignment:s}}function ze(l,s){return Math.ceil(l/s)*s}class Be extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const g=this.length;return this.resize(g+1),this.emplace(g,s,u)}emplace(s,u,g){const D=2*s;return this.int16[D+0]=u,this.int16[D+1]=g,s}}Be.prototype.bytesPerElement=4,Tn("StructArrayLayout2i4",Be);class tt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g){const D=this.length;return this.resize(D+1),this.emplace(D,s,u,g)}emplace(s,u,g,D){const X=3*s;return this.int16[X+0]=u,this.int16[X+1]=g,this.int16[X+2]=D,s}}tt.prototype.bytesPerElement=6,Tn("StructArrayLayout3i6",tt);class ot extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g,D){const X=this.length;return this.resize(X+1),this.emplace(X,s,u,g,D)}emplace(s,u,g,D,X){const ne=4*s;return this.int16[ne+0]=u,this.int16[ne+1]=g,this.int16[ne+2]=D,this.int16[ne+3]=X,s}}ot.prototype.bytesPerElement=8,Tn("StructArrayLayout4i8",ot);class ht extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne){const de=this.length;return this.resize(de+1),this.emplace(de,s,u,g,D,X,ne)}emplace(s,u,g,D,X,ne,de){const me=6*s;return this.int16[me+0]=u,this.int16[me+1]=g,this.int16[me+2]=D,this.int16[me+3]=X,this.int16[me+4]=ne,this.int16[me+5]=de,s}}ht.prototype.bytesPerElement=12,Tn("StructArrayLayout2i4i12",ht);class wt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne){const de=this.length;return this.resize(de+1),this.emplace(de,s,u,g,D,X,ne)}emplace(s,u,g,D,X,ne,de){const me=4*s,Ae=8*s;return this.int16[me+0]=u,this.int16[me+1]=g,this.uint8[Ae+4]=D,this.uint8[Ae+5]=X,this.uint8[Ae+6]=ne,this.uint8[Ae+7]=de,s}}wt.prototype.bytesPerElement=8,Tn("StructArrayLayout2i4ub8",wt);class gt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const g=this.length;return this.resize(g+1),this.emplace(g,s,u)}emplace(s,u,g){const D=2*s;return this.float32[D+0]=u,this.float32[D+1]=g,s}}gt.prototype.bytesPerElement=8,Tn("StructArrayLayout2f8",gt);class Ct extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne,de,me,Ae,Ie){const Le=this.length;return this.resize(Le+1),this.emplace(Le,s,u,g,D,X,ne,de,me,Ae,Ie)}emplace(s,u,g,D,X,ne,de,me,Ae,Ie,Le){const Ve=10*s;return this.uint16[Ve+0]=u,this.uint16[Ve+1]=g,this.uint16[Ve+2]=D,this.uint16[Ve+3]=X,this.uint16[Ve+4]=ne,this.uint16[Ve+5]=de,this.uint16[Ve+6]=me,this.uint16[Ve+7]=Ae,this.uint16[Ve+8]=Ie,this.uint16[Ve+9]=Le,s}}Ct.prototype.bytesPerElement=20,Tn("StructArrayLayout10ui20",Ct);class Mt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve)}emplace(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke){const nt=12*s;return this.int16[nt+0]=u,this.int16[nt+1]=g,this.int16[nt+2]=D,this.int16[nt+3]=X,this.uint16[nt+4]=ne,this.uint16[nt+5]=de,this.uint16[nt+6]=me,this.uint16[nt+7]=Ae,this.int16[nt+8]=Ie,this.int16[nt+9]=Le,this.int16[nt+10]=Ve,this.int16[nt+11]=Ke,s}}Mt.prototype.bytesPerElement=24,Tn("StructArrayLayout4i4ui4i24",Mt);class vt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,g){const D=this.length;return this.resize(D+1),this.emplace(D,s,u,g)}emplace(s,u,g,D){const X=3*s;return this.float32[X+0]=u,this.float32[X+1]=g,this.float32[X+2]=D,s}}vt.prototype.bytesPerElement=12,Tn("StructArrayLayout3f12",vt);class Pt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}Pt.prototype.bytesPerElement=4,Tn("StructArrayLayout1ul4",Pt);class Nt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne,de,me,Ae){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,s,u,g,D,X,ne,de,me,Ae)}emplace(s,u,g,D,X,ne,de,me,Ae,Ie){const Le=10*s,Ve=5*s;return this.int16[Le+0]=u,this.int16[Le+1]=g,this.int16[Le+2]=D,this.int16[Le+3]=X,this.int16[Le+4]=ne,this.int16[Le+5]=de,this.uint32[Ve+3]=me,this.uint16[Le+8]=Ae,this.uint16[Le+9]=Ie,s}}Nt.prototype.bytesPerElement=20,Tn("StructArrayLayout6i1ul2ui20",Nt);class Vt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne){const de=this.length;return this.resize(de+1),this.emplace(de,s,u,g,D,X,ne)}emplace(s,u,g,D,X,ne,de){const me=6*s;return this.int16[me+0]=u,this.int16[me+1]=g,this.int16[me+2]=D,this.int16[me+3]=X,this.int16[me+4]=ne,this.int16[me+5]=de,s}}Vt.prototype.bytesPerElement=12,Tn("StructArrayLayout2i2i2i12",Vt);class Kt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X){const ne=this.length;return this.resize(ne+1),this.emplace(ne,s,u,g,D,X)}emplace(s,u,g,D,X,ne){const de=4*s,me=8*s;return this.float32[de+0]=u,this.float32[de+1]=g,this.float32[de+2]=D,this.int16[me+6]=X,this.int16[me+7]=ne,s}}Kt.prototype.bytesPerElement=16,Tn("StructArrayLayout2f1f2i16",Kt);class nn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne){const de=this.length;return this.resize(de+1),this.emplace(de,s,u,g,D,X,ne)}emplace(s,u,g,D,X,ne,de){const me=16*s,Ae=4*s,Ie=8*s;return this.uint8[me+0]=u,this.uint8[me+1]=g,this.float32[Ae+1]=D,this.float32[Ae+2]=X,this.int16[Ie+6]=ne,this.int16[Ie+7]=de,s}}nn.prototype.bytesPerElement=16,Tn("StructArrayLayout2ub2f2i16",nn);class Sn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,g){const D=this.length;return this.resize(D+1),this.emplace(D,s,u,g)}emplace(s,u,g,D){const X=3*s;return this.uint16[X+0]=u,this.uint16[X+1]=g,this.uint16[X+2]=D,s}}Sn.prototype.bytesPerElement=6,Tn("StructArrayLayout3ui6",Sn);class An extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At)}emplace(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At,Rt){const Tt=24*s,Ft=12*s,Ht=48*s;return this.int16[Tt+0]=u,this.int16[Tt+1]=g,this.uint16[Tt+2]=D,this.uint16[Tt+3]=X,this.uint32[Ft+2]=ne,this.uint32[Ft+3]=de,this.uint32[Ft+4]=me,this.uint16[Tt+10]=Ae,this.uint16[Tt+11]=Ie,this.uint16[Tt+12]=Le,this.float32[Ft+7]=Ve,this.float32[Ft+8]=Ke,this.uint8[Ht+36]=nt,this.uint8[Ht+37]=ut,this.uint8[Ht+38]=xt,this.uint32[Ft+10]=At,this.int16[Tt+22]=Rt,s}}An.prototype.bytesPerElement=48,Tn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",An);class ln extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At,Rt,Tt,Ft,Ht,Qt,mn,Gn,bn,yn,Un,Fn){const wn=this.length;return this.resize(wn+1),this.emplace(wn,s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At,Rt,Tt,Ft,Ht,Qt,mn,Gn,bn,yn,Un,Fn)}emplace(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut,xt,At,Rt,Tt,Ft,Ht,Qt,mn,Gn,bn,yn,Un,Fn,wn){const Yt=32*s,$n=16*s;return this.int16[Yt+0]=u,this.int16[Yt+1]=g,this.int16[Yt+2]=D,this.int16[Yt+3]=X,this.int16[Yt+4]=ne,this.int16[Yt+5]=de,this.int16[Yt+6]=me,this.int16[Yt+7]=Ae,this.uint16[Yt+8]=Ie,this.uint16[Yt+9]=Le,this.uint16[Yt+10]=Ve,this.uint16[Yt+11]=Ke,this.uint16[Yt+12]=nt,this.uint16[Yt+13]=ut,this.uint16[Yt+14]=xt,this.uint16[Yt+15]=At,this.uint16[Yt+16]=Rt,this.uint16[Yt+17]=Tt,this.uint16[Yt+18]=Ft,this.uint16[Yt+19]=Ht,this.uint16[Yt+20]=Qt,this.uint16[Yt+21]=mn,this.uint16[Yt+22]=Gn,this.uint32[$n+12]=bn,this.float32[$n+13]=yn,this.float32[$n+14]=Un,this.uint16[Yt+30]=Fn,this.uint16[Yt+31]=wn,s}}ln.prototype.bytesPerElement=64,Tn("StructArrayLayout8i15ui1ul2f2ui64",ln);class hn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}hn.prototype.bytesPerElement=4,Tn("StructArrayLayout1f4",hn);class Ln extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,g){const D=this.length;return this.resize(D+1),this.emplace(D,s,u,g)}emplace(s,u,g,D){const X=3*s;return this.uint16[6*s+0]=u,this.float32[X+1]=g,this.float32[X+2]=D,s}}Ln.prototype.bytesPerElement=12,Tn("StructArrayLayout1ui2f12",Ln);class ii extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,g){const D=this.length;return this.resize(D+1),this.emplace(D,s,u,g)}emplace(s,u,g,D){const X=4*s;return this.uint32[2*s+0]=u,this.uint16[X+2]=g,this.uint16[X+3]=D,s}}ii.prototype.bytesPerElement=8,Tn("StructArrayLayout1ul2ui8",ii);class gn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const g=this.length;return this.resize(g+1),this.emplace(g,s,u)}emplace(s,u,g){const D=2*s;return this.uint16[D+0]=u,this.uint16[D+1]=g,s}}gn.prototype.bytesPerElement=4,Tn("StructArrayLayout2ui4",gn);class xn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}xn.prototype.bytesPerElement=2,Tn("StructArrayLayout1ui2",xn);class Yn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,g,D){const X=this.length;return this.resize(X+1),this.emplace(X,s,u,g,D)}emplace(s,u,g,D,X){const ne=4*s;return this.float32[ne+0]=u,this.float32[ne+1]=g,this.float32[ne+2]=D,this.float32[ne+3]=X,s}}Yn.prototype.bytesPerElement=16,Tn("StructArrayLayout4f16",Yn);class er extends ve{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new e(this.anchorPointX,this.anchorPointY)}}er.prototype.size=20;class di extends Nt{get(s){return new er(this,s)}}Tn("CollisionBoxArray",di);class Si extends ve{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Si.prototype.size=48;class hr extends An{get(s){return new Si(this,s)}}Tn("PlacedSymbolArray",hr);class ds extends ve{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ds.prototype.size=64;class Ea extends ln{get(s){return new ds(this,s)}}Tn("SymbolInstanceArray",Ea);class or extends hn{getoffsetX(s){return this.float32[1*s+0]}}Tn("GlyphOffsetArray",or);class Ds extends tt{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Tn("SymbolLineVertexArray",Ds);class ss extends ve{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ss.prototype.size=12;class fs extends Ln{get(s){return new ss(this,s)}}Tn("TextAnchorOffsetArray",fs);class qr extends ve{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qr.prototype.size=8;class Bs extends ii{get(s){return new qr(this,s)}}Tn("FeatureIndexArray",Bs);class Dl extends Be{}class iu extends Be{}class No extends Be{}class _o extends ht{}class ru extends wt{}class ch extends gt{}class as extends Ct{}class ca extends Mt{}class bo extends vt{}class Bo extends Pt{}class ps extends Vt{}class Ts extends nn{}class Wr extends Sn{}class ei extends gn{}const zo=ke([{name:"a_pos",components:2,type:"Int16"}],4),{members:uh}=zo;class Nr{constructor(s=[]){this.segments=s}prepareSegment(s,u,g,D){let X=this.segments[this.segments.length-1];return s>Nr.MAX_VERTEX_ARRAY_LENGTH&&P(`Max vertices per segment is ${Nr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!X||X.vertexLength+s>Nr.MAX_VERTEX_ARRAY_LENGTH||X.sortKey!==D)&&(X={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},void 0!==D&&(X.sortKey=D),this.segments.push(X)),X}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,g,D){return new Nr([{vertexOffset:s,primitiveOffset:u,vertexLength:g,primitiveLength:D,vaos:{},sortKey:0}])}}function hh(l,s){return 256*(l=W(Math.floor(l),0,255))+W(Math.floor(s),0,255)}Nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tn("SegmentVector",Nr);const ac=ke([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var su={exports:{}},au=function(l,s){var u,g,D,X,ne,de,me,Ae;for(g=l.length-(u=3&l.length),D=s,ne=3432918353,de=461845907,Ae=0;Ae<g;)me=255&l.charCodeAt(Ae)|(255&l.charCodeAt(++Ae))<<8|(255&l.charCodeAt(++Ae))<<16|(255&l.charCodeAt(++Ae))<<24,++Ae,D=27492+(65535&(X=5*(65535&(D=(D^=me=(65535&(me=(me=(65535&me)*ne+(((me>>>16)*ne&65535)<<16)&4294967295)<<15|me>>>17))*de+(((me>>>16)*de&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(X>>>16)&65535)<<16);switch(me=0,u){case 3:me^=(255&l.charCodeAt(Ae+2))<<16;case 2:me^=(255&l.charCodeAt(Ae+1))<<8;case 1:D^=me=(65535&(me=(me=(65535&(me^=255&l.charCodeAt(Ae)))*ne+(((me>>>16)*ne&65535)<<16)&4294967295)<<15|me>>>17))*de+(((me>>>16)*de&65535)<<16)&4294967295}return D^=l.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0},ou=function(l,s){for(var u,g=l.length,D=s^g,X=0;g>=4;)u=1540483477*(65535&(u=255&l.charCodeAt(X)|(255&l.charCodeAt(++X))<<8|(255&l.charCodeAt(++X))<<16|(255&l.charCodeAt(++X))<<24))+((1540483477*(u>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++X;switch(g){case 3:D^=(255&l.charCodeAt(X+2))<<16;case 2:D^=(255&l.charCodeAt(X+1))<<8;case 1:D=1540483477*(65535&(D^=255&l.charCodeAt(X)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0};su.exports=au,su.exports.murmur3=au,su.exports.murmur2=ou;var $i=k(su.exports);class wo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,u,g,D){this.ids.push(dh(s)),this.positions.push(u,g,D)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=dh(s);let g=0,D=this.ids.length-1;for(;g<D;){const ne=g+D>>1;this.ids[ne]>=u?D=ne:g=ne+1}const X=[];for(;this.ids[g]===u;)X.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return X}static serialize(s,u){const g=new Float64Array(s.ids),D=new Uint32Array(s.positions);return zs(g,D,0,g.length-1),u&&u.push(g.buffer,D.buffer),{ids:g,positions:D}}static deserialize(s){const u=new wo;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u}}function dh(l){const s=+l;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:$i(String(l))}function zs(l,s,u,g){for(;u<g;){const D=l[u+g>>1];let X=u-1,ne=g+1;for(;;){do{X++}while(l[X]<D);do{ne--}while(l[ne]>D);if(X>=ne)break;Dd(l,X,ne),Dd(s,3*X,3*ne),Dd(s,3*X+1,3*ne+1),Dd(s,3*X+2,3*ne+2)}ne-u<g-ne?(zs(l,s,u,ne),u=ne+1):(zs(l,s,ne+1,g),g=ne)}}function Dd(l,s,u){const g=l[s];l[s]=l[u],l[u]=g}Tn("FeaturePositionMap",wo);class Tl{constructor(s,u){this.gl=s.gl,this.location=u}}class Uo extends Tl{constructor(s,u){super(s,u),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class ha extends Tl{constructor(s,u){super(s,u),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class eg extends Tl{constructor(s,u){super(s,u),this.current=bi.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const Wy=new Float32Array(16);function ap(l){return[hh(255*l.r,255*l.g),hh(255*l.b,255*l.a)]}class Ua{constructor(s,u,g){this.value=s,this.uniformNames=u.map(D=>`u_${D}`),this.type=g}setUniform(s,u,g){s.set(g.constantOr(this.value))}getBinding(s,u,g){return"color"===this.type?new eg(s,u):new Uo(s,u)}}class oc{constructor(s,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=s.tlbr}setUniform(s,u,g,D){const X="u_pattern_to"===D?this.patternTo:"u_pattern_from"===D?this.patternFrom:"u_pixel_ratio_to"===D?this.pixelRatioTo:"u_pixel_ratio_from"===D?this.pixelRatioFrom:null;X&&s.set(X)}getBinding(s,u,g){return"u_pattern"===g.substr(0,9)?new ha(s,u):new Uo(s,u)}}class Vo{constructor(s,u,g,D){this.expression=s,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(X=>({name:`a_${X}`,type:"Float32",components:"color"===g?2:1,offset:0})),this.paintVertexArray=new D}populatePaintArray(s,u,g,D,X){const ne=this.paintVertexArray.length,de=this.expression.evaluate(new Di(0),u,{},D,[],X);this.paintVertexArray.resize(s),this._setPaintValue(ne,s,de)}updatePaintArray(s,u,g,D){const X=this.expression.evaluate({zoom:0},g,D);this._setPaintValue(s,u,X)}_setPaintValue(s,u,g){if("color"===this.type){const D=ap(g);for(let X=s;X<u;X++)this.paintVertexArray.emplace(X,D[0],D[1])}else{for(let D=s;D<u;D++)this.paintVertexArray.emplace(D,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Va{constructor(s,u,g,D,X,ne){this.expression=s,this.uniformNames=u.map(de=>`u_${de}_t`),this.type=g,this.useIntegerZoom=D,this.zoom=X,this.maxValue=0,this.paintVertexAttributes=u.map(de=>({name:`a_${de}`,type:"Float32",components:"color"===g?4:2,offset:0})),this.paintVertexArray=new ne}populatePaintArray(s,u,g,D,X){const ne=this.expression.evaluate(new Di(this.zoom),u,{},D,[],X),de=this.expression.evaluate(new Di(this.zoom+1),u,{},D,[],X),me=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(me,s,ne,de)}updatePaintArray(s,u,g,D){const X=this.expression.evaluate({zoom:this.zoom},g,D),ne=this.expression.evaluate({zoom:this.zoom+1},g,D);this._setPaintValue(s,u,X,ne)}_setPaintValue(s,u,g,D){if("color"===this.type){const X=ap(g),ne=ap(D);for(let de=s;de<u;de++)this.paintVertexArray.emplace(de,X[0],X[1],ne[0],ne[1])}else{for(let X=s;X<u;X++)this.paintVertexArray.emplace(X,g,D);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(D))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,D=W(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);s.set(D)}getBinding(s,u,g){return new Uo(s,u)}}class jo{constructor(s,u,g,D,X,ne){this.expression=s,this.type=u,this.useIntegerZoom=g,this.zoom=D,this.layerId=ne,this.zoomInPaintVertexArray=new X,this.zoomOutPaintVertexArray=new X}populatePaintArray(s,u,g){const D=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(D,s,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(s,u,g,D,X){this._setPaintValues(s,u,g.patterns&&g.patterns[this.layerId],X)}_setPaintValues(s,u,g,D){if(!D||!g)return;const{min:X,mid:ne,max:de}=g,me=D[X],Ae=D[ne],Ie=D[de];if(me&&Ae&&Ie)for(let Le=s;Le<u;Le++)this.zoomInPaintVertexArray.emplace(Le,Ae.tl[0],Ae.tl[1],Ae.br[0],Ae.br[1],me.tl[0],me.tl[1],me.br[0],me.br[1],Ae.pixelRatio,me.pixelRatio),this.zoomOutPaintVertexArray.emplace(Le,Ae.tl[0],Ae.tl[1],Ae.br[0],Ae.br[1],Ie.tl[0],Ie.tl[1],Ie.br[0],Ie.br[1],Ae.pixelRatio,Ie.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,ac.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,ac.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class op{constructor(s,u,g){this.binders={},this._buffers=[];const D=[];for(const X in s.paint._values){if(!g(X))continue;const ne=s.paint.get(X);if(!(ne instanceof eo&&Ja(ne.property.specification)))continue;const de=ci(X,s.type),me=ne.value,Ae=ne.property.specification.type,Ie=ne.property.useIntegerZoom,Le=ne.property.specification["property-type"],Ve="cross-faded"===Le||"cross-faded-data-driven"===Le;if("constant"===me.kind)this.binders[X]=Ve?new oc(me.value,de):new Ua(me.value,de,Ae),D.push(`/u_${X}`);else if("source"===me.kind||Ve){const Ke=lp(X,Ae,"source");this.binders[X]=Ve?new jo(me,Ae,Ie,u,Ke,s.id):new Vo(me,de,Ae,Ke),D.push(`/a_${X}`)}else{const Ke=lp(X,Ae,"composite");this.binders[X]=new Va(me,de,Ae,Ie,u,Ke),D.push(`/z_${X}`)}}this.cacheKey=D.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof Vo||u instanceof Va?u.maxValue:0}populatePaintArrays(s,u,g,D,X){for(const ne in this.binders){const de=this.binders[ne];(de instanceof Vo||de instanceof Va||de instanceof jo)&&de.populatePaintArray(s,u,g,D,X)}}setConstantPatternPositions(s,u){for(const g in this.binders){const D=this.binders[g];D instanceof oc&&D.setConstantPatternPositions(s,u)}}updatePaintArrays(s,u,g,D,X){let ne=!1;for(const de in s){const me=u.getPositions(de);for(const Ae of me){const Ie=g.feature(Ae.index);for(const Le in this.binders){const Ve=this.binders[Le];if((Ve instanceof Vo||Ve instanceof Va||Ve instanceof jo)&&!0===Ve.expression.isStateDependent){const Ke=D.paint.get(Le);Ve.expression=Ke.value,Ve.updatePaintArray(Ae.start,Ae.end,Ie,s[de],X),ne=!0}}}}return ne}defines(){const s=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Ua||g instanceof oc)&&s.push(...g.uniformNames.map(D=>`#define HAS_UNIFORM_${D}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Vo||g instanceof Va)for(let D=0;D<g.paintVertexAttributes.length;D++)s.push(g.paintVertexAttributes[D].name);else if(g instanceof jo)for(let D=0;D<ac.members.length;D++)s.push(ac.members[D].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Ua||g instanceof oc||g instanceof Va)for(const D of g.uniformNames)s.push(D)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,u){const g=[];for(const D in this.binders){const X=this.binders[D];if(X instanceof Ua||X instanceof oc||X instanceof Va)for(const ne of X.uniformNames)if(u[ne]){const de=X.getBinding(s,u[ne],ne);g.push({name:ne,property:D,binding:de})}}return g}setUniforms(s,u,g,D){for(const{name:X,property:ne,binding:de}of u)this.binders[ne].setUniform(de,D,g.get(ne),X)}updatePaintBuffers(s){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(s&&g instanceof jo){const D=2===s.fromScale?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;D&&this._buffers.push(D)}else(g instanceof Vo||g instanceof Va)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(s){for(const u in this.binders){const g=this.binders[u];(g instanceof Vo||g instanceof Va||g instanceof jo)&&g.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof Vo||u instanceof Va||u instanceof jo)&&u.destroy()}}}class lc{constructor(s,u,g=(()=>!0)){this.programConfigurations={};for(const D of s)this.programConfigurations[D.id]=new op(D,u,g);this.needsUpload=!1,this._featureMap=new wo,this._bufferOffset=0}populatePaintArrays(s,u,g,D,X,ne){for(const de in this.programConfigurations)this.programConfigurations[de].populatePaintArrays(s,u,D,X,ne);void 0!==u.id&&this._featureMap.add(u.id,g,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,g,D){for(const X of g)this.needsUpload=this.programConfigurations[X.id].updatePaintArrays(s,this._featureMap,u,X,D)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function ci(l,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${s}-`,"").replace(/-/g,"_")]}function lp(l,s,u){const D={"line-pattern":{source:as,composite:as},"fill-pattern":{source:as,composite:as},"fill-extrusion-pattern":{source:as,composite:as}}[l];return D&&D[u]||{color:{source:gt,composite:Yn},number:{source:hn,composite:gt}}[s][u]}Tn("ConstantBinder",Ua),Tn("CrossFadedConstantBinder",oc),Tn("SourceExpressionBinder",Vo),Tn("CrossFadedCompositeBinder",jo),Tn("CompositeExpressionBinder",Va),Tn("ProgramConfiguration",op,{omit:["_buffers"]}),Tn("ProgramConfigurationSet",lc);const Br=8192,cp=Math.pow(2,14)-1,tg=-cp-1;function cc(l){const s=Br/l.extent,u=l.loadGeometry();for(let g=0;g<u.length;g++){const D=u[g];for(let X=0;X<D.length;X++){const ne=D[X],de=Math.round(ne.x*s),me=Math.round(ne.y*s);ne.x=W(de,tg,cp),ne.y=W(me,tg,cp),(de<ne.x||de>ne.x+1||me<ne.y||me>ne.y+1)&&P("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Ml(l,s){return{type:l.type,id:l.id,properties:l.properties,geometry:s?cc(l):[]}}function Ho(l,s,u,g,D){l.emplaceBack(2*s+(g+1)/2,2*u+(D+1)/2)}class up{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new iu,this.indexArray=new Wr,this.segments=new Nr,this.programConfigurations=new lc(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,g){const D=this.layers[0],X=[];let ne=null,de=!1;"circle"===D.type&&(ne=D.layout.get("circle-sort-key"),de=!ne.isConstant());for(const{feature:me,id:Ae,index:Ie,sourceLayerIndex:Le}of s){const Ve=this.layers[0]._featureFilter.needGeometry,Ke=Ml(me,Ve);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),Ke,g))continue;const nt=de?ne.evaluate(Ke,{},g):void 0,ut={id:Ae,properties:me.properties,type:me.type,sourceLayerIndex:Le,index:Ie,geometry:Ve?Ke.geometry:cc(me),patterns:{},sortKey:nt};X.push(ut)}de&&X.sort((me,Ae)=>me.sortKey-Ae.sortKey);for(const me of X){const{geometry:Ae,index:Ie,sourceLayerIndex:Le}=me,Ve=s[Ie].feature;this.addFeature(me,Ae,Ie,g),u.featureIndex.insert(Ve,Ae,Ie,Le,this.index)}}update(s,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,uh),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,g,D){for(const X of u)for(const ne of X){const de=ne.x,me=ne.y;if(de<0||de>=Br||me<0||me>=Br)continue;const Ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),Ie=Ae.vertexLength;Ho(this.layoutVertexArray,de,me,-1,-1),Ho(this.layoutVertexArray,de,me,1,-1),Ho(this.layoutVertexArray,de,me,1,1),Ho(this.layoutVertexArray,de,me,-1,1),this.indexArray.emplaceBack(Ie,Ie+1,Ie+2),this.indexArray.emplaceBack(Ie,Ie+3,Ie+2),Ae.vertexLength+=4,Ae.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,{},D)}}function ng(l,s){for(let u=0;u<l.length;u++)if(uc(s,l[u]))return!0;for(let u=0;u<s.length;u++)if(uc(l,s[u]))return!0;return!!en(l,s)}function Xy(l,s,u){return!!uc(l,s)||!!fh(s,l,u)}function ig(l,s){if(1===l.length)return gs(s,l[0]);for(let u=0;u<s.length;u++){const g=s[u];for(let D=0;D<g.length;D++)if(uc(l,g[D]))return!0}for(let u=0;u<l.length;u++)if(gs(s,l[u]))return!0;for(let u=0;u<s.length;u++)if(en(l,s[u]))return!0;return!1}function Zy(l,s,u){if(l.length>1){if(en(l,s))return!0;for(let g=0;g<s.length;g++)if(fh(s[g],l,u))return!0}for(let g=0;g<l.length;g++)if(fh(l[g],s,u))return!0;return!1}function en(l,s){if(0===l.length||0===s.length)return!1;for(let u=0;u<l.length-1;u++){const g=l[u],D=l[u+1];for(let X=0;X<s.length-1;X++)if(Ui(g,D,s[X],s[X+1]))return!0}return!1}function Ui(l,s,u,g){return F(l,u,g)!==F(s,u,g)&&F(l,s,u)!==F(l,s,g)}function fh(l,s,u){const g=u*u;if(1===s.length)return l.distSqr(s[0])<g;for(let D=1;D<s.length;D++)if(Td(l,s[D-1],s[D])<g)return!0;return!1}function Td(l,s,u){const g=s.distSqr(u);if(0===g)return l.distSqr(s);const D=((l.x-s.x)*(u.x-s.x)+(l.y-s.y)*(u.y-s.y))/g;return l.distSqr(D<0?s:D>1?u:u.sub(s)._mult(D)._add(s))}function gs(l,s){let u,g,D,X=!1;for(let ne=0;ne<l.length;ne++){u=l[ne];for(let de=0,me=u.length-1;de<u.length;me=de++)g=u[de],D=u[me],g.y>s.y!=D.y>s.y&&s.x<(D.x-g.x)*(s.y-g.y)/(D.y-g.y)+g.x&&(X=!X)}return X}function uc(l,s){let u=!1;for(let g=0,D=l.length-1;g<l.length;D=g++){const X=l[g],ne=l[D];X.y>s.y!=ne.y>s.y&&s.x<(ne.x-X.x)*(s.y-X.y)/(ne.y-X.y)+X.x&&(u=!u)}return u}function ph(l,s,u){const g=u[0],D=u[2];if(l.x<g.x&&s.x<g.x||l.x>D.x&&s.x>D.x||l.y<g.y&&s.y<g.y||l.y>D.y&&s.y>D.y)return!1;const X=F(l,s,u[0]);return X!==F(l,s,u[1])||X!==F(l,s,u[2])||X!==F(l,s,u[3])}function da(l,s,u){const g=s.paint.get(l).value;return"constant"===g.kind?g.value:u.programConfigurations.get(s.id).getMaxValue(l)}function lu(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function cu(l,s,u,g,D){if(!s[0]&&!s[1])return l;const X=e.convert(s)._mult(D);"viewport"===u&&X._rotate(-g);const ne=[];for(let de=0;de<l.length;de++)ne.push(l[de].sub(X));return ne}let rg,Yy;Tn("CircleBucket",up,{omit:["layers"]});var sg={get paint(){return Yy=Yy||new w({"circle-radius":new Jn(_e.paint_circle["circle-radius"]),"circle-color":new Jn(_e.paint_circle["circle-color"]),"circle-blur":new Jn(_e.paint_circle["circle-blur"]),"circle-opacity":new Jn(_e.paint_circle["circle-opacity"]),"circle-translate":new Hn(_e.paint_circle["circle-translate"]),"circle-translate-anchor":new Hn(_e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Hn(_e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Hn(_e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jn(_e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jn(_e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jn(_e.paint_circle["circle-stroke-opacity"])})},get layout(){return rg=rg||new w({"circle-sort-key":new Jn(_e.layout_circle["circle-sort-key"])})}},Xi=1e-6,fa=typeof Float32Array<"u"?Float32Array:Array;function Md(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function hc(l,s,u){var g=s[0],D=s[1],X=s[2],ne=s[3],de=s[4],me=s[5],Ae=s[6],Ie=s[7],Le=s[8],Ve=s[9],Ke=s[10],nt=s[11],ut=s[12],xt=s[13],At=s[14],Rt=s[15],Tt=u[0],Ft=u[1],Ht=u[2],Qt=u[3];return l[0]=Tt*g+Ft*de+Ht*Le+Qt*ut,l[1]=Tt*D+Ft*me+Ht*Ve+Qt*xt,l[2]=Tt*X+Ft*Ae+Ht*Ke+Qt*At,l[3]=Tt*ne+Ft*Ie+Ht*nt+Qt*Rt,l[4]=(Tt=u[4])*g+(Ft=u[5])*de+(Ht=u[6])*Le+(Qt=u[7])*ut,l[5]=Tt*D+Ft*me+Ht*Ve+Qt*xt,l[6]=Tt*X+Ft*Ae+Ht*Ke+Qt*At,l[7]=Tt*ne+Ft*Ie+Ht*nt+Qt*Rt,l[8]=(Tt=u[8])*g+(Ft=u[9])*de+(Ht=u[10])*Le+(Qt=u[11])*ut,l[9]=Tt*D+Ft*me+Ht*Ve+Qt*xt,l[10]=Tt*X+Ft*Ae+Ht*Ke+Qt*At,l[11]=Tt*ne+Ft*Ie+Ht*nt+Qt*Rt,l[12]=(Tt=u[12])*g+(Ft=u[13])*de+(Ht=u[14])*Le+(Qt=u[15])*ut,l[13]=Tt*D+Ft*me+Ht*Ve+Qt*xt,l[14]=Tt*X+Ft*Ae+Ht*Ke+Qt*At,l[15]=Tt*ne+Ft*Ie+Ht*nt+Qt*Rt,l}Math.hypot||(Math.hypot=function(){for(var l=0,s=arguments.length;s--;)l+=arguments[s]*arguments[s];return Math.sqrt(l)});var Da,Ky=hc;function gh(l,s,u){var g=s[0],D=s[1],X=s[2],ne=s[3];return l[0]=u[0]*g+u[4]*D+u[8]*X+u[12]*ne,l[1]=u[1]*g+u[5]*D+u[9]*X+u[13]*ne,l[2]=u[2]*g+u[6]*D+u[10]*X+u[14]*ne,l[3]=u[3]*g+u[7]*D+u[11]*X+u[15]*ne,l}Da=new fa(4),fa!=Float32Array&&(Da[0]=0,Da[1]=0,Da[2]=0,Da[3]=0);class Jy extends Y{constructor(s){super(s,sg)}createBucket(s){return new up(s)}queryRadius(s){const u=s;return da("circle-radius",this,u)+da("circle-stroke-width",this,u)+lu(this.paint.get("circle-translate"))}queryIntersectsFeature(s,u,g,D,X,ne,de,me){const Ae=cu(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ne.angle,de),Ie=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),Le="map"===this.paint.get("circle-pitch-alignment"),Ve=Le?Ae:(ut=me,Ae.map(xt=>ag(xt,ut))),Ke=Le?Ie*de:Ie;var ut;for(const nt of D)for(const ut of nt){const xt=Le?ut:ag(ut,me);let At=Ke;const Rt=gh([],[ut.x,ut.y,0,1],me);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?At*=Rt[3]/ne.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(At*=ne.cameraToCenterDistance/Rt[3]),Xy(Ve,xt,At))return!0}return!1}}function ag(l,s){const u=gh([],[l.x,l.y,0,1],s);return new e(u[0]/u[3],u[1]/u[3])}class kd extends up{}let Id;Tn("HeatmapBucket",kd,{omit:["layers"]});var og={get paint(){return Id=Id||new w({"heatmap-radius":new Jn(_e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jn(_e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Hn(_e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new d(_e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Hn(_e.paint_heatmap["heatmap-opacity"])})}};function mh(l,{width:s,height:u},g,D){if(D){if(D instanceof Uint8ClampedArray)D=new Uint8Array(D.buffer);else if(D.length!==s*u*g)throw new RangeError(`mismatched image size. expected: ${D.length} but got: ${s*u*g}`)}else D=new Uint8Array(s*u*g);return l.width=s,l.height=u,l.data=D,l}function lg(l,{width:s,height:u},g){if(s===l.width&&u===l.height)return;const D=mh({},{width:s,height:u},g);Pd(l,D,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,s),height:Math.min(l.height,u)},g),l.width=s,l.height=u,l.data=D.data}function Pd(l,s,u,g,D,X){if(0===D.width||0===D.height)return s;if(D.width>l.width||D.height>l.height||u.x>l.width-D.width||u.y>l.height-D.height)throw new RangeError("out of range source coordinates for image copy");if(D.width>s.width||D.height>s.height||g.x>s.width-D.width||g.y>s.height-D.height)throw new RangeError("out of range destination coordinates for image copy");const ne=l.data,de=s.data;if(ne===de)throw new Error("srcData equals dstData, so image is already copied");for(let me=0;me<D.height;me++){const Ae=((u.y+me)*l.width+u.x)*X,Ie=((g.y+me)*s.width+g.x)*X;for(let Le=0;Le<D.width*X;Le++)de[Ie+Le]=ne[Ae+Le]}return s}class dc{constructor(s,u){mh(this,s,1,u)}resize(s){lg(this,s,1)}clone(){return new dc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,g,D,X){Pd(s,u,g,D,X,1)}}class pa{constructor(s,u){mh(this,s,4,u)}resize(s){lg(this,s,4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,g,D,X){Pd(s,u,g,D,X,4)}}function hp(l){const s={},u=l.resolution||256,g=l.clips?l.clips.length:1,D=l.image||new pa({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const X=(ne,de,me)=>{s[l.evaluationKey]=me;const Ae=l.expression.evaluate(s);D.data[ne+de+0]=Math.floor(255*Ae.r/Ae.a),D.data[ne+de+1]=Math.floor(255*Ae.g/Ae.a),D.data[ne+de+2]=Math.floor(255*Ae.b/Ae.a),D.data[ne+de+3]=Math.floor(255*Ae.a)};if(l.clips)for(let ne=0,de=0;ne<g;++ne,de+=4*u)for(let me=0,Ae=0;me<u;me++,Ae+=4){const Ie=me/(u-1),{start:Le,end:Ve}=l.clips[ne];X(de,Ae,Le*(1-Ie)+Ve*Ie)}else for(let ne=0,de=0;ne<u;ne++,de+=4)X(0,de,ne/(u-1));return D}Tn("AlphaImage",dc),Tn("RGBAImage",pa);class cg extends Y{createBucket(s){return new kd(s)}constructor(s){super(s,og),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){"heatmap-color"===s&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let dp;var fp={get paint(){return dp=dp||new w({"hillshade-illumination-direction":new Hn(_e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Hn(_e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Hn(_e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Hn(_e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Hn(_e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Hn(_e.paint_hillshade["hillshade-accent-color"])})}};class Qy extends Y{constructor(s){super(s,fp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const ev=ke([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ys}=ev;var Go={exports:{}};function mr(l,s,u){u=u||2;var g,D,X,ne,de,me,Ae,Ie=s&&s.length,Le=Ie?s[0]*u:l.length,Ve=ug(l,0,Le,u,!0),Ke=[];if(!Ve||Ve.next===Ve.prev)return Ke;if(Ie&&(Ve=function(ut,xt,At,Rt){var Tt,Ft,Ht,Qt=[];for(Tt=0,Ft=xt.length;Tt<Ft;Tt++)(Ht=ug(ut,xt[Tt]*Rt,Tt<Ft-1?xt[Tt+1]*Rt:ut.length,Rt,!1))===Ht.next&&(Ht.steiner=!0),Qt.push(Od(Ht));for(Qt.sort(kl),Tt=0;Tt<Qt.length;Tt++)At=nv(Qt[Tt],At);return At}(l,s,Ve,u)),l.length>80*u){g=X=l[0],D=ne=l[1];for(var nt=u;nt<Le;nt+=u)(de=l[nt])<g&&(g=de),(me=l[nt+1])<D&&(D=me),de>X&&(X=de),me>ne&&(ne=me);Ae=0!==(Ae=Math.max(X-g,ne-D))?32767/Ae:0}return yh(Ve,Ke,u,g,D,Ae,0),Ke}function ug(l,s,u,g,D){var X,ne;if(D===pg(l,s,u,g)>0)for(X=s;X<u;X+=g)ne=iv(X,l[X],l[X+1],ne);else for(X=u-g;X>=s;X-=g)ne=iv(X,l[X],l[X+1],ne);return ne&&Ld(ne,ne.next)&&(vh(ne),ne=ne.next),ne}function fc(l,s){if(!l)return l;s||(s=l);var u,g=l;do{if(u=!1,g.steiner||!Ld(g,g.next)&&0!==Ar(g.prev,g,g.next))g=g.next;else{if(vh(g),(g=s=g.prev)===g.next)break;u=!0}}while(u||g!==s);return s}function yh(l,s,u,g,D,X,ne){if(l){!ne&&X&&function(Ie,Le,Ve,Ke){var nt=Ie;do{0===nt.z&&(nt.z=uu(nt.x,nt.y,Le,Ve,Ke)),nt.prevZ=nt.prev,nt.nextZ=nt.next,nt=nt.next}while(nt!==Ie);nt.prevZ.nextZ=null,nt.prevZ=null,function(ut){var xt,At,Rt,Tt,Ft,Ht,Qt,mn,Gn=1;do{for(At=ut,ut=null,Ft=null,Ht=0;At;){for(Ht++,Rt=At,Qt=0,xt=0;xt<Gn&&(Qt++,Rt=Rt.nextZ);xt++);for(mn=Gn;Qt>0||mn>0&&Rt;)0!==Qt&&(0===mn||!Rt||At.z<=Rt.z)?(Tt=At,At=At.nextZ,Qt--):(Tt=Rt,Rt=Rt.nextZ,mn--),Ft?Ft.nextZ=Tt:ut=Tt,Tt.prevZ=Ft,Ft=Tt;At=Rt}Ft.nextZ=null,Gn*=2}while(Ht>1)}(nt)}(l,g,D,X);for(var de,me,Ae=l;l.prev!==l.next;)if(de=l.prev,me=l.next,X?hg(l,g,D,X):tv(l))s.push(de.i/u|0),s.push(l.i/u|0),s.push(me.i/u|0),vh(l),l=me.next,Ae=me.next;else if((l=me)===Ae){ne?1===ne?yh(l=dg(fc(l),s,u),s,u,g,D,X,2):2===ne&&Fd(l,s,u,g,D,X):yh(fc(l),s,u,g,D,X,1);break}}}function tv(l){var s=l.prev,u=l,g=l.next;if(Ar(s,u,g)>=0)return!1;for(var D=s.x,X=u.x,ne=g.x,de=s.y,me=u.y,Ae=g.y,Ie=D<X?D<ne?D:ne:X<ne?X:ne,Le=de<me?de<Ae?de:Ae:me<Ae?me:Ae,Ve=D>X?D>ne?D:ne:X>ne?X:ne,Ke=de>me?de>Ae?de:Ae:me>Ae?me:Ae,nt=g.next;nt!==s;){if(nt.x>=Ie&&nt.x<=Ve&&nt.y>=Le&&nt.y<=Ke&&Il(D,de,X,me,ne,Ae,nt.x,nt.y)&&Ar(nt.prev,nt,nt.next)>=0)return!1;nt=nt.next}return!0}function hg(l,s,u,g){var D=l.prev,X=l,ne=l.next;if(Ar(D,X,ne)>=0)return!1;for(var de=D.x,me=X.x,Ae=ne.x,Ie=D.y,Le=X.y,Ve=ne.y,Ke=de<me?de<Ae?de:Ae:me<Ae?me:Ae,nt=Ie<Le?Ie<Ve?Ie:Ve:Le<Ve?Le:Ve,ut=de>me?de>Ae?de:Ae:me>Ae?me:Ae,xt=Ie>Le?Ie>Ve?Ie:Ve:Le>Ve?Le:Ve,At=uu(Ke,nt,s,u,g),Rt=uu(ut,xt,s,u,g),Tt=l.prevZ,Ft=l.nextZ;Tt&&Tt.z>=At&&Ft&&Ft.z<=Rt;){if(Tt.x>=Ke&&Tt.x<=ut&&Tt.y>=nt&&Tt.y<=xt&&Tt!==D&&Tt!==ne&&Il(de,Ie,me,Le,Ae,Ve,Tt.x,Tt.y)&&Ar(Tt.prev,Tt,Tt.next)>=0||(Tt=Tt.prevZ,Ft.x>=Ke&&Ft.x<=ut&&Ft.y>=nt&&Ft.y<=xt&&Ft!==D&&Ft!==ne&&Il(de,Ie,me,Le,Ae,Ve,Ft.x,Ft.y)&&Ar(Ft.prev,Ft,Ft.next)>=0))return!1;Ft=Ft.nextZ}for(;Tt&&Tt.z>=At;){if(Tt.x>=Ke&&Tt.x<=ut&&Tt.y>=nt&&Tt.y<=xt&&Tt!==D&&Tt!==ne&&Il(de,Ie,me,Le,Ae,Ve,Tt.x,Tt.y)&&Ar(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.prevZ}for(;Ft&&Ft.z<=Rt;){if(Ft.x>=Ke&&Ft.x<=ut&&Ft.y>=nt&&Ft.y<=xt&&Ft!==D&&Ft!==ne&&Il(de,Ie,me,Le,Ae,Ve,Ft.x,Ft.y)&&Ar(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.nextZ}return!0}function dg(l,s,u){var g=l;do{var D=g.prev,X=g.next.next;!Ld(D,X)&&pc(D,g,g.next,X)&&Bd(D,X)&&Bd(X,D)&&(s.push(D.i/u|0),s.push(g.i/u|0),s.push(X.i/u|0),vh(g),vh(g.next),g=l=X),g=g.next}while(g!==l);return fc(g)}function Fd(l,s,u,g,D,X){var ne=l;do{for(var de=ne.next.next;de!==ne.prev;){if(ne.i!==de.i&&fg(ne,de)){var me=zd(ne,de);return ne=fc(ne,ne.next),me=fc(me,me.next),yh(ne,s,u,g,D,X,0),void yh(me,s,u,g,D,X,0)}de=de.next}ne=ne.next}while(ne!==l)}function kl(l,s){return l.x-s.x}function nv(l,s){var u=function(D,X){var ne,de=X,me=D.x,Ae=D.y,Ie=-1/0;do{if(Ae<=de.y&&Ae>=de.next.y&&de.next.y!==de.y){var Le=de.x+(Ae-de.y)*(de.next.x-de.x)/(de.next.y-de.y);if(Le<=me&&Le>Ie&&(Ie=Le,ne=de.x<de.next.x?de:de.next,Le===me))return ne}de=de.next}while(de!==X);if(!ne)return null;var Ve,Ke=ne,nt=ne.x,ut=ne.y,xt=1/0;de=ne;do{me>=de.x&&de.x>=nt&&me!==de.x&&Il(Ae<ut?me:Ie,Ae,nt,ut,Ae<ut?Ie:me,Ae,de.x,de.y)&&(Ve=Math.abs(Ae-de.y)/(me-de.x),Bd(de,D)&&(Ve<xt||Ve===xt&&(de.x>ne.x||de.x===ne.x&&Rd(ne,de)))&&(ne=de,xt=Ve)),de=de.next}while(de!==Ke);return ne}(l,s);if(!u)return s;var g=zd(u,l);return fc(g,g.next),fc(u,u.next)}function Rd(l,s){return Ar(l.prev,l,s.prev)<0&&Ar(s.next,l,l.next)<0}function uu(l,s,u,g,D){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-u)*D|0)|l<<8))|l<<4))|l<<2))|l<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-g)*D|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Od(l){var s=l,u=l;do{(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next}while(s!==l);return u}function Il(l,s,u,g,D,X,ne,de){return(D-ne)*(s-de)>=(l-ne)*(X-de)&&(l-ne)*(g-de)>=(u-ne)*(s-de)&&(u-ne)*(X-de)>=(D-ne)*(g-de)}function fg(l,s){return l.next.i!==s.i&&l.prev.i!==s.i&&!function(u,g){var D=u;do{if(D.i!==u.i&&D.next.i!==u.i&&D.i!==g.i&&D.next.i!==g.i&&pc(D,D.next,u,g))return!0;D=D.next}while(D!==u);return!1}(l,s)&&(Bd(l,s)&&Bd(s,l)&&function(u,g){var D=u,X=!1,ne=(u.x+g.x)/2,de=(u.y+g.y)/2;do{D.y>de!=D.next.y>de&&D.next.y!==D.y&&ne<(D.next.x-D.x)*(de-D.y)/(D.next.y-D.y)+D.x&&(X=!X),D=D.next}while(D!==u);return X}(l,s)&&(Ar(l.prev,l,s.prev)||Ar(l,s.prev,s))||Ld(l,s)&&Ar(l.prev,l,l.next)>0&&Ar(s.prev,s,s.next)>0)}function Ar(l,s,u){return(s.y-l.y)*(u.x-s.x)-(s.x-l.x)*(u.y-s.y)}function Ld(l,s){return l.x===s.x&&l.y===s.y}function pc(l,s,u,g){var D=Nd(Ar(l,s,u)),X=Nd(Ar(l,s,g)),ne=Nd(Ar(u,g,l)),de=Nd(Ar(u,g,s));return D!==X&&ne!==de||!(0!==D||!Pl(l,u,s))||!(0!==X||!Pl(l,g,s))||!(0!==ne||!Pl(u,l,g))||!(0!==de||!Pl(u,s,g))}function Pl(l,s,u){return s.x<=Math.max(l.x,u.x)&&s.x>=Math.min(l.x,u.x)&&s.y<=Math.max(l.y,u.y)&&s.y>=Math.min(l.y,u.y)}function Nd(l){return l>0?1:l<0?-1:0}function Bd(l,s){return Ar(l.prev,l,l.next)<0?Ar(l,s,l.next)>=0&&Ar(l,l.prev,s)>=0:Ar(l,s,l.prev)<0||Ar(l,l.next,s)<0}function zd(l,s){var u=new pp(l.i,l.x,l.y),g=new pp(s.i,s.x,s.y),D=l.next,X=s.prev;return l.next=s,s.prev=l,u.next=D,D.prev=u,g.next=u,u.prev=g,X.next=g,g.prev=X,g}function iv(l,s,u,g){var D=new pp(l,s,u);return g?(D.next=g.next,D.prev=g,g.next.prev=D,g.next=D):(D.prev=D,D.next=D),D}function vh(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function pp(l,s,u){this.i=l,this.x=s,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pg(l,s,u,g){for(var D=0,X=s,ne=u-g;X<u;X+=g)D+=(l[ne]-l[X])*(l[X+1]+l[ne+1]),ne=X;return D}Go.exports=mr,Go.exports.default=mr,mr.deviation=function(l,s,u,g){var D=s&&s.length,X=Math.abs(pg(l,0,D?s[0]*u:l.length,u));if(D)for(var ne=0,de=s.length;ne<de;ne++)X-=Math.abs(pg(l,s[ne]*u,ne<de-1?s[ne+1]*u:l.length,u));var me=0;for(ne=0;ne<g.length;ne+=3){var Ae=g[ne]*u,Ie=g[ne+1]*u,Le=g[ne+2]*u;me+=Math.abs((l[Ae]-l[Le])*(l[Ie+1]-l[Ae+1])-(l[Ae]-l[Ie])*(l[Le+1]-l[Ae+1]))}return 0===X&&0===me?0:Math.abs((me-X)/X)},mr.flatten=function(l){for(var s=l[0][0].length,u={vertices:[],holes:[],dimensions:s},g=0,D=0;D<l.length;D++){for(var X=0;X<l[D].length;X++)for(var ne=0;ne<s;ne++)u.vertices.push(l[D][X][ne]);D>0&&u.holes.push(g+=l[D-1].length)}return u};var rv=k(Go.exports);function xh(l,s,u){const g=u.patternDependencies;let D=!1;for(const X of s){const ne=X.paint.get(`${l}-pattern`);ne.isConstant()||(D=!0);const de=ne.constantOr(null);de&&(D=!0,g[de.to]=!0,g[de.from]=!0)}return D}function gc(l,s,u,g,D){const X=D.patternDependencies;for(const ne of s){const de=ne.paint.get(`${l}-pattern`).value;if("constant"!==de.kind){let me=de.evaluate({zoom:g-1},u,{},D.availableImages),Ae=de.evaluate({zoom:g},u,{},D.availableImages),Ie=de.evaluate({zoom:g+1},u,{},D.availableImages);me=me&&me.name?me.name:me,Ae=Ae&&Ae.name?Ae.name:Ae,Ie=Ie&&Ie.name?Ie.name:Ie,X[me]=!0,X[Ae]=!0,X[Ie]=!0,u.patterns[ne.id]={min:me,mid:Ae,max:Ie}}}return u}class gp{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new No,this.indexArray=new Wr,this.indexArray2=new ei,this.programConfigurations=new lc(s.layers,s.zoom),this.segments=new Nr,this.segments2=new Nr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,g){this.hasPattern=xh("fill",this.layers,u);const D=this.layers[0].layout.get("fill-sort-key"),X=!D.isConstant(),ne=[];for(const{feature:de,id:me,index:Ae,sourceLayerIndex:Ie}of s){const Le=this.layers[0]._featureFilter.needGeometry,Ve=Ml(de,Le);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),Ve,g))continue;const Ke=X?D.evaluate(Ve,{},g,u.availableImages):void 0,nt={id:me,properties:de.properties,type:de.type,sourceLayerIndex:Ie,index:Ae,geometry:Le?Ve.geometry:cc(de),patterns:{},sortKey:Ke};ne.push(nt)}X&&ne.sort((de,me)=>de.sortKey-me.sortKey);for(const de of ne){const{geometry:me,index:Ae,sourceLayerIndex:Ie}=de;if(this.hasPattern){const Le=gc("fill",this.layers,de,this.zoom,u);this.patternFeatures.push(Le)}else this.addFeature(de,me,Ae,g,{});u.featureIndex.insert(s[Ae].feature,me,Ae,Ie,this.index)}}update(s,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,g)}addFeatures(s,u,g){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,u,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ys),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,u,g,D,X){for(const ne of Xu(u,500)){let de=0;for(const Ke of ne)de+=Ke.length;const me=this.segments.prepareSegment(de,this.layoutVertexArray,this.indexArray),Ae=me.vertexLength,Ie=[],Le=[];for(const Ke of ne){if(0===Ke.length)continue;Ke!==ne[0]&&Le.push(Ie.length/2);const nt=this.segments2.prepareSegment(Ke.length,this.layoutVertexArray,this.indexArray2),ut=nt.vertexLength;this.layoutVertexArray.emplaceBack(Ke[0].x,Ke[0].y),this.indexArray2.emplaceBack(ut+Ke.length-1,ut),Ie.push(Ke[0].x),Ie.push(Ke[0].y);for(let xt=1;xt<Ke.length;xt++)this.layoutVertexArray.emplaceBack(Ke[xt].x,Ke[xt].y),this.indexArray2.emplaceBack(ut+xt-1,ut+xt),Ie.push(Ke[xt].x),Ie.push(Ke[xt].y);nt.vertexLength+=Ke.length,nt.primitiveLength+=Ke.length}const Ve=rv(Ie,Le);for(let Ke=0;Ke<Ve.length;Ke+=3)this.indexArray.emplaceBack(Ae+Ve[Ke],Ae+Ve[Ke+1],Ae+Ve[Ke+2]);me.vertexLength+=de,me.primitiveLength+=Ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,X,D)}}let hu,Ud;Tn("FillBucket",gp,{omit:["layers","patternFeatures"]});var Vd={get paint(){return Ud=Ud||new w({"fill-antialias":new Hn(_e.paint_fill["fill-antialias"]),"fill-opacity":new Jn(_e.paint_fill["fill-opacity"]),"fill-color":new Jn(_e.paint_fill["fill-color"]),"fill-outline-color":new Jn(_e.paint_fill["fill-outline-color"]),"fill-translate":new Hn(_e.paint_fill["fill-translate"]),"fill-translate-anchor":new Hn(_e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Z(_e.paint_fill["fill-pattern"])})},get layout(){return hu=hu||new w({"fill-sort-key":new Jn(_e.layout_fill["fill-sort-key"])})}};class Gb extends Y{constructor(s){super(s,Vd)}recalculate(s,u){super.recalculate(s,u);const g=this.paint._values["fill-outline-color"];"constant"===g.value.kind&&void 0===g.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new gp(s)}queryRadius(){return lu(this.paint.get("fill-translate"))}queryIntersectsFeature(s,u,g,D,X,ne,de){return ig(cu(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ne.angle,de),D)}isTileClipped(){return!0}}const gg=ke([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mg=ke([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sv}=gg;var Ms={},av=fe,_h=Fl;function Fl(l,s,u,g,D){this.properties={},this.extent=u,this.type=0,this._pbf=l,this._geometry=-1,this._keys=g,this._values=D,l.readFields(yg,this,s)}function yg(l,s,u){1==l?s.id=u.readVarint():2==l?function(g,D){for(var X=g.readVarint()+g.pos;g.pos<X;){var ne=D._keys[g.readVarint()],de=D._values[g.readVarint()];D.properties[ne]=de}}(u,s):3==l?s.type=u.readVarint():4==l&&(s._geometry=u.pos)}function jd(l){for(var s,u,g=0,D=0,X=l.length,ne=X-1;D<X;ne=D++)g+=((u=l[ne]).x-(s=l[D]).x)*(s.y+u.y);return g}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var s,u=l.readVarint()+l.pos,g=1,D=0,X=0,ne=0,de=[];l.pos<u;){if(D<=0){var me=l.readVarint();g=7&me,D=me>>3}if(D--,1===g||2===g)X+=l.readSVarint(),ne+=l.readSVarint(),1===g&&(s&&de.push(s),s=[]),s.push(new av(X,ne));else{if(7!==g)throw new Error("unknown command "+g);s&&s.push(s[0].clone())}}return s&&de.push(s),de},Fl.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var s=l.readVarint()+l.pos,u=1,g=0,D=0,X=0,ne=1/0,de=-1/0,me=1/0,Ae=-1/0;l.pos<s;){if(g<=0){var Ie=l.readVarint();u=7&Ie,g=Ie>>3}if(g--,1===u||2===u)(D+=l.readSVarint())<ne&&(ne=D),D>de&&(de=D),(X+=l.readSVarint())<me&&(me=X),X>Ae&&(Ae=X);else if(7!==u)throw new Error("unknown command "+u)}return[ne,me,de,Ae]},Fl.prototype.toGeoJSON=function(l,s,u){var g,D,X=this.extent*Math.pow(2,u),ne=this.extent*l,de=this.extent*s,me=this.loadGeometry(),Ae=Fl.types[this.type];function Ie(Ke){for(var nt=0;nt<Ke.length;nt++){var ut=Ke[nt];Ke[nt]=[360*(ut.x+ne)/X-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+de)/X)*Math.PI/180))-90]}}switch(this.type){case 1:var Le=[];for(g=0;g<me.length;g++)Le[g]=me[g][0];Ie(me=Le);break;case 2:for(g=0;g<me.length;g++)Ie(me[g]);break;case 3:for(me=function(Ke){var nt=Ke.length;if(nt<=1)return[Ke];for(var ut,xt,At=[],Rt=0;Rt<nt;Rt++){var Tt=jd(Ke[Rt]);0!==Tt&&(void 0===xt&&(xt=Tt<0),xt===Tt<0?(ut&&At.push(ut),ut=[Ke[Rt]]):ut.push(Ke[Rt]))}return ut&&At.push(ut),At}(me),g=0;g<me.length;g++)for(D=0;D<me[g].length;D++)Ie(me[g][D])}1===me.length?me=me[0]:Ae="Multi"+Ae;var Ve={type:"Feature",geometry:{type:Ae,coordinates:me},properties:this.properties};return"id"in this&&(Ve.id=this.id),Ve};var mp=_h,vg=yp;function yp(l,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(xg,this,s),this.length=this._features.length}function xg(l,s,u){15===l?s.version=u.readVarint():1===l?s.name=u.readString():5===l?s.extent=u.readVarint():2===l?s._features.push(u.pos):3===l?s._keys.push(u.readString()):4===l&&s._values.push(function(g){for(var D=null,X=g.readVarint()+g.pos;g.pos<X;){var ne=g.readVarint()>>3;D=1===ne?g.readString():2===ne?g.readFloat():3===ne?g.readDouble():4===ne?g.readVarint64():5===ne?g.readVarint():6===ne?g.readSVarint():7===ne?g.readBoolean():null}return D}(u))}yp.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var s=this._pbf.readVarint()+this._pbf.pos;return new mp(this._pbf,s,this.extent,this._keys,this._values)};var _g=vg;function bg(l,s,u){if(3===l){var g=new _g(u,u.readVarint()+u.pos);g.length&&(s[g.name]=g)}}Ms.VectorTile=function(l,s){this.layers=l.readFields(bg,{},s)},Ms.VectorTileFeature=_h,Ms.VectorTileLayer=vg;const ov=Ms.VectorTileFeature.types,du=Math.pow(2,13);function to(l,s,u,g,D,X,ne,de){l.emplaceBack(s,u,2*Math.floor(g*du)+ne,D*du*2,X*du*2,Math.round(de))}class vp{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new _o,this.centroidVertexArray=new Dl,this.indexArray=new Wr,this.programConfigurations=new lc(s.layers,s.zoom),this.segments=new Nr,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,g){this.features=[],this.hasPattern=xh("fill-extrusion",this.layers,u);for(const{feature:D,id:X,index:ne,sourceLayerIndex:de}of s){const me=this.layers[0]._featureFilter.needGeometry,Ae=Ml(D,me);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),Ae,g))continue;const Ie={id:X,sourceLayerIndex:de,index:ne,geometry:me?Ae.geometry:cc(D),properties:D.properties,type:D.type,patterns:{}};this.hasPattern?this.features.push(gc("fill-extrusion",this.layers,Ie,this.zoom,u)):this.addFeature(Ie,Ie.geometry,ne,g,{}),u.featureIndex.insert(D,Ie.geometry,ne,de,this.index,!0)}}addFeatures(s,u,g){for(const D of this.features){const{geometry:X}=D;this.addFeature(D,X,D.index,u,g)}}update(s,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,g)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,sv),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,mg.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,u,g,D,X){for(const ne of Xu(u,500)){const de={x:0,y:0,vertexCount:0};let me=0;for(const nt of ne)me+=nt.length;let Ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const nt of ne){if(0===nt.length||((l=nt).every(s=>s.x<0)||l.every(s=>s.x>Br)||l.every(s=>s.y<0)||l.every(s=>s.y>Br)))continue;let ut=0;for(let xt=0;xt<nt.length;xt++){const At=nt[xt];if(xt>=1){const Rt=nt[xt-1];if(!wg(At,Rt)){Ae.vertexLength+4>Nr.MAX_VERTEX_ARRAY_LENGTH&&(Ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Tt=At.sub(Rt)._perp()._unit(),Ft=Rt.dist(At);ut+Ft>32768&&(ut=0),to(this.layoutVertexArray,At.x,At.y,Tt.x,Tt.y,0,0,ut),to(this.layoutVertexArray,At.x,At.y,Tt.x,Tt.y,0,1,ut),de.x+=2*At.x,de.y+=2*At.y,de.vertexCount+=2,ut+=Ft,to(this.layoutVertexArray,Rt.x,Rt.y,Tt.x,Tt.y,0,0,ut),to(this.layoutVertexArray,Rt.x,Rt.y,Tt.x,Tt.y,0,1,ut),de.x+=2*Rt.x,de.y+=2*Rt.y,de.vertexCount+=2;const Ht=Ae.vertexLength;this.indexArray.emplaceBack(Ht,Ht+2,Ht+1),this.indexArray.emplaceBack(Ht+1,Ht+2,Ht+3),Ae.vertexLength+=4,Ae.primitiveLength+=2}}}}if(Ae.vertexLength+me>Nr.MAX_VERTEX_ARRAY_LENGTH&&(Ae=this.segments.prepareSegment(me,this.layoutVertexArray,this.indexArray)),"Polygon"!==ov[s.type])continue;const Ie=[],Le=[],Ve=Ae.vertexLength;for(const nt of ne)if(0!==nt.length){nt!==ne[0]&&Le.push(Ie.length/2);for(let ut=0;ut<nt.length;ut++){const xt=nt[ut];to(this.layoutVertexArray,xt.x,xt.y,0,0,1,1,0),de.x+=xt.x,de.y+=xt.y,de.vertexCount+=1,Ie.push(xt.x),Ie.push(xt.y)}}const Ke=rv(Ie,Le);for(let nt=0;nt<Ke.length;nt+=3)this.indexArray.emplaceBack(Ve+Ke[nt],Ve+Ke[nt+2],Ve+Ke[nt+1]);Ae.primitiveLength+=Ke.length/3,Ae.vertexLength+=me;for(let nt=0;nt<de.vertexCount;nt++){const ut=Math.floor(de.x/de.vertexCount),xt=Math.floor(de.y/de.vertexCount);this.centroidVertexArray.emplaceBack(ut,xt)}}var l;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,X,D)}}function wg(l,s){return l.x===s.x&&(l.x<0||l.x>Br)||l.y===s.y&&(l.y<0||l.y>Br)}let fu;Tn("FillExtrusionBucket",vp,{omit:["layers","features"]});var lv={get paint(){return fu=fu||new w({"fill-extrusion-opacity":new Hn(_e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jn(_e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Hn(_e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Hn(_e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Z(_e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jn(_e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jn(_e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Hn(_e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ks extends Y{constructor(s){super(s,lv)}createBucket(s){return new vp(s)}queryRadius(){return lu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,u,g,D,X,ne,de,me){const Ae=cu(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ne.angle,de),Ie=this.paint.get("fill-extrusion-height").evaluate(u,g),Le=this.paint.get("fill-extrusion-base").evaluate(u,g),Ve=function(nt,ut,xt,At){const Rt=[];for(const Tt of nt){const Ft=[Tt.x,Tt.y,0,1];gh(Ft,Ft,ut),Rt.push(new e(Ft[0]/Ft[3],Ft[1]/Ft[3]))}return Rt}(Ae,me),Ke=function(nt,ut,xt,At){const Rt=[],Tt=[],Ft=At[8]*ut,Ht=At[9]*ut,Qt=At[10]*ut,mn=At[11]*ut,Gn=At[8]*xt,bn=At[9]*xt,yn=At[10]*xt,Un=At[11]*xt;for(const Fn of nt){const wn=[],Yt=[];for(const $n of Fn){const Vn=$n.x,ri=$n.y,Zi=At[0]*Vn+At[4]*ri+At[12],gi=At[1]*Vn+At[5]*ri+At[13],tr=At[2]*Vn+At[6]*ri+At[14],ja=At[3]*Vn+At[7]*ri+At[15],vs=tr+Qt,Er=ja+mn,Vs=Zi+Gn,js=gi+bn,Hs=tr+yn,vr=ja+Un,Zr=new e((Zi+Ft)/Er,(gi+Ht)/Er);Zr.z=vs/Er,wn.push(Zr);const ks=new e(Vs/vr,js/vr);ks.z=Hs/vr,Yt.push(ks)}Rt.push(wn),Tt.push(Yt)}return[Rt,Tt]}(D,Le,Ie,me);return function(nt,ut,xt){let At=1/0;ig(xt,ut)&&(At=ms(xt,ut[0]));for(let Rt=0;Rt<ut.length;Rt++){const Tt=ut[Rt],Ft=nt[Rt];for(let Ht=0;Ht<Tt.length-1;Ht++){const Qt=Tt[Ht],mn=[Qt,Tt[Ht+1],Ft[Ht+1],Ft[Ht],Qt];ng(xt,mn)&&(At=Math.min(At,ms(xt,mn)))}}return At!==1/0&&At}(Ke[0],Ke[1],Ve)}}function bh(l,s){return l.x*s.x+l.y*s.y}function ms(l,s){if(1===l.length){let u=0;const g=s[u++];let D;for(;!D||g.equals(D);)if(D=s[u++],!D)return 1/0;for(;u<s.length;u++){const X=s[u],ne=l[0],de=D.sub(g),me=X.sub(g),Ae=ne.sub(g),Ie=bh(de,de),Le=bh(de,me),Ve=bh(me,me),Ke=bh(Ae,de),nt=bh(Ae,me),ut=Ie*Ve-Le*Le,xt=(Ve*Ke-Le*nt)/ut,At=(Ie*nt-Le*Ke)/ut,Rt=g.z*(1-xt-At)+D.z*xt+X.z*At;if(isFinite(Rt))return Rt}return 1/0}{let u=1/0;for(const g of s)u=Math.min(u,g.z);return u}}const xp=ke([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:cv}=xp,Sg=ke([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Hd}=Sg,pu=Ms.VectorTileFeature.types,gu=Math.cos(Math.PI/180*37.5),mc=Math.pow(2,14)/.5;class Gd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new ru,this.layoutVertexArray2=new ch,this.indexArray=new Wr,this.programConfigurations=new lc(s.layers,s.zoom),this.segments=new Nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,g){this.hasPattern=xh("line",this.layers,u);const D=this.layers[0].layout.get("line-sort-key"),X=!D.isConstant(),ne=[];for(const{feature:de,id:me,index:Ae,sourceLayerIndex:Ie}of s){const Le=this.layers[0]._featureFilter.needGeometry,Ve=Ml(de,Le);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),Ve,g))continue;const Ke=X?D.evaluate(Ve,{},g):void 0,nt={id:me,properties:de.properties,type:de.type,sourceLayerIndex:Ie,index:Ae,geometry:Le?Ve.geometry:cc(de),patterns:{},sortKey:Ke};ne.push(nt)}X&&ne.sort((de,me)=>de.sortKey-me.sortKey);for(const de of ne){const{geometry:me,index:Ae,sourceLayerIndex:Ie}=de;if(this.hasPattern){const Le=gc("line",this.layers,de,this.zoom,u);this.patternFeatures.push(Le)}else this.addFeature(de,me,Ae,g,{});u.featureIndex.insert(s[Ae].feature,me,Ae,Ie,this.index)}}update(s,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,g)}addFeatures(s,u,g){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,u,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Hd)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,cv),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,g,D,X){const ne=this.layers[0].layout,de=ne.get("line-join").evaluate(s,{}),me=ne.get("line-cap"),Ae=ne.get("line-miter-limit"),Ie=ne.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const Le of u)this.addLine(Le,s,de,me,Ae,Ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,X,D)}addLine(s,u,g,D,X,ne){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let At=0;At<s.length-1;At++)this.totalDistance+=s[At].dist(s[At+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const de="Polygon"===pu[u.type];let me=s.length;for(;me>=2&&s[me-1].equals(s[me-2]);)me--;let Ae=0;for(;Ae<me-1&&s[Ae].equals(s[Ae+1]);)Ae++;if(me<(de?3:2))return;"bevel"===g&&(X=1.05);const Ie=this.overscaling<=16?15*Br/(512*this.overscaling):0,Le=this.segments.prepareSegment(10*me,this.layoutVertexArray,this.indexArray);let Ve,Ke,nt,ut,xt;this.e1=this.e2=-1,de&&(Ve=s[me-2],xt=s[Ae].sub(Ve)._unit()._perp());for(let At=Ae;At<me;At++){if(nt=At===me-1?de?s[Ae+1]:void 0:s[At+1],nt&&s[At].equals(nt))continue;xt&&(ut=xt),Ve&&(Ke=Ve),Ve=s[At],xt=nt?nt.sub(Ve)._unit()._perp():ut,ut=ut||xt;let Rt=ut.add(xt);0===Rt.x&&0===Rt.y||Rt._unit();const Tt=ut.x*xt.x+ut.y*xt.y,Ft=Rt.x*xt.x+Rt.y*xt.y,Ht=0!==Ft?1/Ft:1/0,Qt=2*Math.sqrt(2-2*Ft),mn=Ft<gu&&Ke&&nt,Gn=ut.x*xt.y-ut.y*xt.x>0;if(mn&&At>Ae){const Un=Ve.dist(Ke);if(Un>2*Ie){const Fn=Ve.sub(Ve.sub(Ke)._mult(Ie/Un)._round());this.updateDistance(Ke,Fn),this.addCurrentVertex(Fn,ut,0,0,Le),Ke=Fn}}const bn=Ke&&nt;let yn=bn?g:de?"butt":D;if(bn&&"round"===yn&&(Ht<ne?yn="miter":Ht<=2&&(yn="fakeround")),"miter"===yn&&Ht>X&&(yn="bevel"),"bevel"===yn&&(Ht>2&&(yn="flipbevel"),Ht<X&&(yn="miter")),Ke&&this.updateDistance(Ke,Ve),"miter"===yn)Rt._mult(Ht),this.addCurrentVertex(Ve,Rt,0,0,Le);else if("flipbevel"===yn){if(Ht>100)Rt=xt.mult(-1);else{const Un=Ht*ut.add(xt).mag()/ut.sub(xt).mag();Rt._perp()._mult(Un*(Gn?-1:1))}this.addCurrentVertex(Ve,Rt,0,0,Le),this.addCurrentVertex(Ve,Rt.mult(-1),0,0,Le)}else if("bevel"===yn||"fakeround"===yn){const Un=-Math.sqrt(Ht*Ht-1),Fn=Gn?Un:0,wn=Gn?0:Un;if(Ke&&this.addCurrentVertex(Ve,ut,Fn,wn,Le),"fakeround"===yn){const Yt=Math.round(180*Qt/Math.PI/20);for(let $n=1;$n<Yt;$n++){let Vn=$n/Yt;if(.5!==Vn){const Zi=Vn-.5;Vn+=Vn*Zi*(Vn-1)*((1.0904+Tt*(Tt*(3.55645-1.43519*Tt)-3.2452))*Zi*Zi+(.848013+Tt*(.215638*Tt-1.06021)))}const ri=xt.sub(ut)._mult(Vn)._add(ut)._unit()._mult(Gn?-1:1);this.addHalfVertex(Ve,ri.x,ri.y,!1,Gn,0,Le)}}nt&&this.addCurrentVertex(Ve,xt,-Fn,-wn,Le)}else if("butt"===yn)this.addCurrentVertex(Ve,Rt,0,0,Le);else if("square"===yn){const Un=Ke?1:-1;this.addCurrentVertex(Ve,Rt,Un,Un,Le)}else"round"===yn&&(Ke&&(this.addCurrentVertex(Ve,ut,0,0,Le),this.addCurrentVertex(Ve,ut,1,1,Le,!0)),nt&&(this.addCurrentVertex(Ve,xt,-1,-1,Le,!0),this.addCurrentVertex(Ve,xt,0,0,Le)));if(mn&&At<me-1){const Un=Ve.dist(nt);if(Un>2*Ie){const Fn=Ve.add(nt.sub(Ve)._mult(Ie/Un)._round());this.updateDistance(Ve,Fn),this.addCurrentVertex(Fn,xt,0,0,Le),Ve=Fn}}}}addCurrentVertex(s,u,g,D,X,ne=!1){const de=u.y*D-u.x,me=-u.y-u.x*D;this.addHalfVertex(s,u.x+u.y*g,u.y-u.x*g,ne,!1,g,X),this.addHalfVertex(s,de,me,ne,!0,-D,X),this.distance>mc/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,u,g,D,X,ne))}addHalfVertex({x:s,y:u},g,D,X,ne,de,me){const Ae=.5*(this.lineClips?this.scaledDistance*(mc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(X?1:0),(u<<1)+(ne?1:0),Math.round(63*g)+128,Math.round(63*D)+128,1+(0===de?0:de<0?-1:1)|(63&Ae)<<2,Ae>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ie=me.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ie),me.primitiveLength++),ne?this.e2=Ie:this.e1=Ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,u){this.distance+=s.dist(u),this.updateScaledDistance()}}let $d,yc;Tn("LineBucket",Gd,{omit:["layers","patternFeatures"]});var uv={get paint(){return yc=yc||new w({"line-opacity":new Jn(_e.paint_line["line-opacity"]),"line-color":new Jn(_e.paint_line["line-color"]),"line-translate":new Hn(_e.paint_line["line-translate"]),"line-translate-anchor":new Hn(_e.paint_line["line-translate-anchor"]),"line-width":new Jn(_e.paint_line["line-width"]),"line-gap-width":new Jn(_e.paint_line["line-gap-width"]),"line-offset":new Jn(_e.paint_line["line-offset"]),"line-blur":new Jn(_e.paint_line["line-blur"]),"line-dasharray":new a(_e.paint_line["line-dasharray"]),"line-pattern":new Z(_e.paint_line["line-pattern"]),"line-gradient":new d(_e.paint_line["line-gradient"])})},get layout(){return $d=$d||new w({"line-cap":new Hn(_e.layout_line["line-cap"]),"line-join":new Jn(_e.layout_line["line-join"]),"line-miter-limit":new Hn(_e.layout_line["line-miter-limit"]),"line-round-limit":new Hn(_e.layout_line["line-round-limit"]),"line-sort-key":new Jn(_e.layout_line["line-sort-key"])})}};class hv extends Jn{possiblyEvaluate(s,u){return u=new Di(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,g,D){return u=O({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,g,D)}}let _p;class $b extends Y{constructor(s){super(s,uv),this.gradientVersion=0,_p||(_p=new hv(uv.paint.properties["line-width"].specification),_p.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if("line-gradient"===s){const u=this.gradientExpression();this.stepInterpolant=!(void 0===u._styleExpression)&&u._styleExpression.expression instanceof an,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,u){super.recalculate(s,u),this.paint._values["line-floorwidth"]=_p.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Gd(s)}queryRadius(s){const u=s,g=dv(da("line-width",this,u),da("line-gap-width",this,u)),D=da("line-offset",this,u);return g/2+Math.abs(D)+lu(this.paint.get("line-translate"))}queryIntersectsFeature(s,u,g,D,X,ne,de){const me=cu(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ne.angle,de),Ae=de/2*dv(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),Ie=this.paint.get("line-offset").evaluate(u,g);return Ie&&(D=function(Le,Ve){const Ke=[];for(let nt=0;nt<Le.length;nt++){const ut=Le[nt],xt=[];for(let At=0;At<ut.length;At++){const Rt=ut[At-1],Tt=ut[At],Ft=ut[At+1],Ht=0===At?new e(0,0):Tt.sub(Rt)._unit()._perp(),Qt=At===ut.length-1?new e(0,0):Ft.sub(Tt)._unit()._perp(),mn=Ht._add(Qt)._unit(),Gn=mn.x*Qt.x+mn.y*Qt.y;0!==Gn&&mn._mult(1/Gn),xt.push(mn._mult(Ve)._add(Tt))}Ke.push(xt)}return Ke}(D,Ie*de)),function(Le,Ve,Ke){for(let nt=0;nt<Ve.length;nt++){const ut=Ve[nt];if(Le.length>=3)for(let xt=0;xt<ut.length;xt++)if(uc(Le,ut[xt]))return!0;if(Zy(Le,ut,Ke))return!0}return!1}(me,D,Ae)}isTileClipped(){return!0}}function dv(l,s){return s>0?s+2*l:l}const qb=ke([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wb=ke([{name:"a_projected_pos",components:3,type:"Float32"}],4);ke([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Xb=ke([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ke([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const vc=ke([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fv=ke([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pv(l,s,u){return l.sections.forEach(g=>{g.text=function(D,X,ne){const de=X.layout.get("text-transform").evaluate(ne,{});return"uppercase"===de?D=D.toLocaleUpperCase():"lowercase"===de&&(D=D.toLocaleLowerCase()),Aa.applyArabicShaping&&(D=Aa.applyArabicShaping(D)),D}(g.text,s,u)}),l}ke([{name:"triangle",components:3,type:"Uint16"}]),ke([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ke([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ke([{type:"Float32",name:"offsetX"}]),ke([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ke([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Or={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var zr=24,mu=Oi,Ag=function(l,s,u,g,D){var X,ne,de=8*D-g-1,me=(1<<de)-1,Ae=me>>1,Ie=-7,Le=u?D-1:0,Ve=u?-1:1,Ke=l[s+Le];for(Le+=Ve,X=Ke&(1<<-Ie)-1,Ke>>=-Ie,Ie+=de;Ie>0;X=256*X+l[s+Le],Le+=Ve,Ie-=8);for(ne=X&(1<<-Ie)-1,X>>=-Ie,Ie+=g;Ie>0;ne=256*ne+l[s+Le],Le+=Ve,Ie-=8);if(0===X)X=1-Ae;else{if(X===me)return ne?NaN:1/0*(Ke?-1:1);ne+=Math.pow(2,g),X-=Ae}return(Ke?-1:1)*ne*Math.pow(2,X-g)},Ta=function(l,s,u,g,D,X){var ne,de,me,Ae=8*X-D-1,Ie=(1<<Ae)-1,Le=Ie>>1,Ve=23===D?Math.pow(2,-24)-Math.pow(2,-77):0,Ke=g?0:X-1,nt=g?1:-1,ut=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(de=isNaN(s)?1:0,ne=Ie):(ne=Math.floor(Math.log(s)/Math.LN2),s*(me=Math.pow(2,-ne))<1&&(ne--,me*=2),(s+=ne+Le>=1?Ve/me:Ve*Math.pow(2,1-Le))*me>=2&&(ne++,me/=2),ne+Le>=Ie?(de=0,ne=Ie):ne+Le>=1?(de=(s*me-1)*Math.pow(2,D),ne+=Le):(de=s*Math.pow(2,Le-1)*Math.pow(2,D),ne=0));D>=8;l[u+Ke]=255&de,Ke+=nt,de/=256,D-=8);for(ne=ne<<D|de,Ae+=D;Ae>0;l[u+Ke]=255&ne,Ke+=nt,ne/=256,Ae-=8);l[u+Ke-nt]|=128*ut};function Oi(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}Oi.Varint=0,Oi.Fixed64=1,Oi.Bytes=2,Oi.Fixed32=5;var qd=4294967296,wh=1/qd,yu=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $o(l){return l.type===Oi.Bytes?l.readVarint()+l.pos:l.pos+1}function Eg(l,s,u){var g=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));u.realloc(g);for(var D=u.pos-1;D>=l;D--)u.buf[D+g]=u.buf[D]}function Zb(l,s){for(var u=0;u<l.length;u++)s.writeVarint(l[u])}function Ma(l,s){for(var u=0;u<l.length;u++)s.writeSVarint(l[u])}function bp(l,s){for(var u=0;u<l.length;u++)s.writeFloat(l[u])}function vu(l,s){for(var u=0;u<l.length;u++)s.writeDouble(l[u])}function Yb(l,s){for(var u=0;u<l.length;u++)s.writeBoolean(l[u])}function Dg(l,s){for(var u=0;u<l.length;u++)s.writeFixed32(l[u])}function gv(l,s){for(var u=0;u<l.length;u++)s.writeSFixed32(l[u])}function mv(l,s){for(var u=0;u<l.length;u++)s.writeFixed64(l[u])}function yv(l,s){for(var u=0;u<l.length;u++)s.writeSFixed64(l[u])}function Wd(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+16777216*l[s+3]}function xu(l,s,u){l[u]=s,l[u+1]=s>>>8,l[u+2]=s>>>16,l[u+3]=s>>>24}function Tg(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+(l[s+3]<<24)}Oi.prototype={destroy:function(){this.buf=null},readFields:function(l,s,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),D=g>>3,X=this.pos;this.type=7&g,l(D,s,this),this.pos===X&&this.skip(g)}return s},readMessage:function(l,s){return this.readFields(l,s,this.readVarint()+this.pos)},readFixed32:function(){var l=Wd(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Tg(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=Wd(this.buf,this.pos)+Wd(this.buf,this.pos+4)*qd;return this.pos+=8,l},readSFixed64:function(){var l=Wd(this.buf,this.pos)+Tg(this.buf,this.pos+4)*qd;return this.pos+=8,l},readFloat:function(){var l=Ag(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=Ag(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var s,u,g=this.buf;return s=127&(u=g[this.pos++]),u<128?s:(s|=(127&(u=g[this.pos++]))<<7,u<128?s:(s|=(127&(u=g[this.pos++]))<<14,u<128?s:(s|=(127&(u=g[this.pos++]))<<21,u<128?s:function(D,X,ne){var de,me,Ae=ne.buf;if(de=(112&(me=Ae[ne.pos++]))>>4,me<128||(de|=(127&(me=Ae[ne.pos++]))<<3,me<128)||(de|=(127&(me=Ae[ne.pos++]))<<10,me<128)||(de|=(127&(me=Ae[ne.pos++]))<<17,me<128)||(de|=(127&(me=Ae[ne.pos++]))<<24,me<128)||(de|=(1&(me=Ae[ne.pos++]))<<31,me<128))return function Ch(l,s,u){return u?4294967296*s+(l>>>0):4294967296*(s>>>0)+(l>>>0)}(D,de,X);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(u=g[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,s=this.pos;return this.pos=l,l-s>=12&&yu?yu.decode(this.buf.subarray(s,l)):function(u,g,D){for(var X="",ne=g;ne<D;){var de,me,Ae,Ie=u[ne],Le=null,Ve=Ie>239?4:Ie>223?3:Ie>191?2:1;if(ne+Ve>D)break;1===Ve?Ie<128&&(Le=Ie):2===Ve?128==(192&(de=u[ne+1]))&&(Le=(31&Ie)<<6|63&de)<=127&&(Le=null):3===Ve?(me=u[ne+2],128==(192&(de=u[ne+1]))&&128==(192&me)&&((Le=(15&Ie)<<12|(63&de)<<6|63&me)<=2047||Le>=55296&&Le<=57343)&&(Le=null)):4===Ve&&(me=u[ne+2],Ae=u[ne+3],128==(192&(de=u[ne+1]))&&128==(192&me)&&128==(192&Ae)&&((Le=(15&Ie)<<18|(63&de)<<12|(63&me)<<6|63&Ae)<=65535||Le>=1114112)&&(Le=null)),null===Le?(Le=65533,Ve=1):Le>65535&&(Le-=65536,X+=String.fromCharCode(Le>>>10&1023|55296),Le=56320|1023&Le),X+=String.fromCharCode(Le),ne+=Ve}return X}(this.buf,s,l)},readBytes:function(){var l=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,l);return this.pos=l,s},readPackedVarint:function(l,s){if(this.type!==Oi.Bytes)return l.push(this.readVarint(s));var u=$o(this);for(l=l||[];this.pos<u;)l.push(this.readVarint(s));return l},readPackedSVarint:function(l){if(this.type!==Oi.Bytes)return l.push(this.readSVarint());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==Oi.Bytes)return l.push(this.readBoolean());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==Oi.Bytes)return l.push(this.readFloat());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==Oi.Bytes)return l.push(this.readDouble());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==Oi.Bytes)return l.push(this.readFixed32());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==Oi.Bytes)return l.push(this.readSFixed32());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==Oi.Bytes)return l.push(this.readFixed64());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==Oi.Bytes)return l.push(this.readSFixed64());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed64());return l},skip:function(l){var s=7&l;if(s===Oi.Varint)for(;this.buf[this.pos++]>127;);else if(s===Oi.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Oi.Fixed32)this.pos+=4;else{if(s!==Oi.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(l,s){this.writeVarint(l<<3|s)},realloc:function(l){for(var s=this.length||16;s<this.pos+l;)s*=2;if(s!==this.length){var u=new Uint8Array(s);u.set(this.buf),this.buf=u,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),xu(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),xu(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),xu(this.buf,-1&l,this.pos),xu(this.buf,Math.floor(l*wh),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),xu(this.buf,-1&l,this.pos),xu(this.buf,Math.floor(l*wh),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(s,u){var g,D,X,de;if(s>=0?(g=s%4294967296|0,D=s/4294967296|0):(D=~(-s/4294967296),4294967295^(g=~(-s%4294967296))?g=g+1|0:(g=0,D=D+1|0)),s>=0x10000000000000000||s<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),X=g,(de=u).buf[de.pos++]=127&X|128,X>>>=7,de.buf[de.pos++]=127&X|128,X>>>=7,de.buf[de.pos++]=127&X|128,X>>>=7,de.buf[de.pos++]=127&X|128,de.buf[de.pos]=127&(X>>>=7),function(X,ne){var de=(7&X)<<4;ne.buf[ne.pos++]|=de|((X>>>=3)?128:0),X&&(ne.buf[ne.pos++]=127&X|((X>>>=7)?128:0),X&&(ne.buf[ne.pos++]=127&X|((X>>>=7)?128:0),X&&(ne.buf[ne.pos++]=127&X|((X>>>=7)?128:0),X&&(ne.buf[ne.pos++]=127&X|((X>>>=7)?128:0),X&&(ne.buf[ne.pos++]=127&X)))))}(D,u)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var s=this.pos;this.pos=function(g,D,X){for(var ne,de,me=0;me<D.length;me++){if((ne=D.charCodeAt(me))>55295&&ne<57344){if(!de){ne>56319||me+1===D.length?(g[X++]=239,g[X++]=191,g[X++]=189):de=ne;continue}if(ne<56320){g[X++]=239,g[X++]=191,g[X++]=189,de=ne;continue}ne=de-55296<<10|ne-56320|65536,de=null}else de&&(g[X++]=239,g[X++]=191,g[X++]=189,de=null);ne<128?g[X++]=ne:(ne<2048?g[X++]=ne>>6|192:(ne<65536?g[X++]=ne>>12|224:(g[X++]=ne>>18|240,g[X++]=ne>>12&63|128),g[X++]=ne>>6&63|128),g[X++]=63&ne|128)}return X}(this.buf,l,this.pos);var u=this.pos-s;u>=128&&Eg(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeFloat:function(l){this.realloc(4),Ta(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),Ta(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var s=l.length;this.writeVarint(s),this.realloc(s);for(var u=0;u<s;u++)this.buf[this.pos++]=l[u]},writeRawMessage:function(l,s){this.pos++;var u=this.pos;l(s,this);var g=this.pos-u;g>=128&&Eg(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(l,s,u){this.writeTag(l,Oi.Bytes),this.writeRawMessage(s,u)},writePackedVarint:function(l,s){s.length&&this.writeMessage(l,Zb,s)},writePackedSVarint:function(l,s){s.length&&this.writeMessage(l,Ma,s)},writePackedBoolean:function(l,s){s.length&&this.writeMessage(l,Yb,s)},writePackedFloat:function(l,s){s.length&&this.writeMessage(l,bp,s)},writePackedDouble:function(l,s){s.length&&this.writeMessage(l,vu,s)},writePackedFixed32:function(l,s){s.length&&this.writeMessage(l,Dg,s)},writePackedSFixed32:function(l,s){s.length&&this.writeMessage(l,gv,s)},writePackedFixed64:function(l,s){s.length&&this.writeMessage(l,mv,s)},writePackedSFixed64:function(l,s){s.length&&this.writeMessage(l,yv,s)},writeBytesField:function(l,s){this.writeTag(l,Oi.Bytes),this.writeBytes(s)},writeFixed32Field:function(l,s){this.writeTag(l,Oi.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(l,s){this.writeTag(l,Oi.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(l,s){this.writeTag(l,Oi.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(l,s){this.writeTag(l,Oi.Fixed64),this.writeSFixed64(s)},writeVarintField:function(l,s){this.writeTag(l,Oi.Varint),this.writeVarint(s)},writeSVarintField:function(l,s){this.writeTag(l,Oi.Varint),this.writeSVarint(s)},writeStringField:function(l,s){this.writeTag(l,Oi.Bytes),this.writeString(s)},writeFloatField:function(l,s){this.writeTag(l,Oi.Fixed32),this.writeFloat(s)},writeDoubleField:function(l,s){this.writeTag(l,Oi.Fixed64),this.writeDouble(s)},writeBooleanField:function(l,s){this.writeVarintField(l,!!s)}};var Sh=k(mu);const _u=3;function vv(l,s,u){1===l&&u.readMessage(Xd,s)}function Xd(l,s,u){if(3===l){const{id:g,bitmap:D,width:X,height:ne,left:de,top:me,advance:Ae}=u.readMessage(xv,{});s.push({id:g,bitmap:new dc({width:X+2*_u,height:ne+2*_u},D),metrics:{width:X,height:ne,left:de,top:me,advance:Ae}})}}function xv(l,s,u){1===l?s.id=u.readVarint():2===l?s.bitmap=u.readBytes():3===l?s.width=u.readVarint():4===l?s.height=u.readVarint():5===l?s.left=u.readSVarint():6===l?s.top=u.readSVarint():7===l&&(s.advance=u.readVarint())}const Ah=_u;function Mg(l){let s=0,u=0;for(const ne of l)s+=ne.w*ne.h,u=Math.max(u,ne.w);l.sort((ne,de)=>de.h-ne.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let D=0,X=0;for(const ne of l)for(let de=g.length-1;de>=0;de--){const me=g[de];if(!(ne.w>me.w||ne.h>me.h)){if(ne.x=me.x,ne.y=me.y,X=Math.max(X,ne.y+ne.h),D=Math.max(D,ne.x+ne.w),ne.w===me.w&&ne.h===me.h){const Ae=g.pop();de<g.length&&(g[de]=Ae)}else ne.h===me.h?(me.x+=ne.w,me.w-=ne.w):ne.w===me.w?(me.y+=ne.h,me.h-=ne.h):(g.push({x:me.x+ne.w,y:me.y,w:me.w-ne.w,h:ne.h}),me.y+=ne.h,me.h-=ne.h);break}}return{w:D,h:X,fill:s/(D*X)||0}}const Us=1;class Eh{constructor(s,{pixelRatio:u,version:g,stretchX:D,stretchY:X,content:ne,textFitWidth:de,textFitHeight:me}){this.paddedRect=s,this.pixelRatio=u,this.stretchX=D,this.stretchY=X,this.content=ne,this.version=g,this.textFitWidth=de,this.textFitHeight=me}get tl(){return[this.paddedRect.x+Us,this.paddedRect.y+Us]}get br(){return[this.paddedRect.x+this.paddedRect.w-Us,this.paddedRect.y+this.paddedRect.h-Us]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Us)/this.pixelRatio,(this.paddedRect.h-2*Us)/this.pixelRatio]}}class Dh{constructor(s,u){const g={},D={};this.haveRenderCallbacks=[];const X=[];this.addImages(s,g,X),this.addImages(u,D,X);const{w:ne,h:de}=Mg(X),me=new pa({width:ne||1,height:de||1});for(const Ae in s){const Ie=s[Ae],Le=g[Ae].paddedRect;pa.copy(Ie.data,me,{x:0,y:0},{x:Le.x+Us,y:Le.y+Us},Ie.data)}for(const Ae in u){const Ie=u[Ae],Le=D[Ae].paddedRect,Ve=Le.x+Us,Ke=Le.y+Us,nt=Ie.data.width,ut=Ie.data.height;pa.copy(Ie.data,me,{x:0,y:0},{x:Ve,y:Ke},Ie.data),pa.copy(Ie.data,me,{x:0,y:ut-1},{x:Ve,y:Ke-1},{width:nt,height:1}),pa.copy(Ie.data,me,{x:0,y:0},{x:Ve,y:Ke+ut},{width:nt,height:1}),pa.copy(Ie.data,me,{x:nt-1,y:0},{x:Ve-1,y:Ke},{width:1,height:ut}),pa.copy(Ie.data,me,{x:0,y:0},{x:Ve+nt,y:Ke},{width:1,height:ut})}this.image=me,this.iconPositions=g,this.patternPositions=D}addImages(s,u,g){for(const D in s){const X=s[D],ne={x:0,y:0,w:X.data.width+2*Us,h:X.data.height+2*Us};g.push(ne),u[D]=new Eh(ne,X),X.hasRenderCallback&&this.haveRenderCallbacks.push(D)}}patchUpdatedImages(s,u){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in s.updatedImages)this.patchUpdatedImage(this.iconPositions[g],s.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],s.getImage(g),u)}patchUpdatedImage(s,u,g){if(!s||!u||s.version===u.version)return;s.version=u.version;const[D,X]=s.tl;g.update(u.data,void 0,{x:D,y:X})}}var qo;Tn("ImagePosition",Eh),Tn("ImageAtlas",Dh),se.ai=void 0,(qo=se.ai||(se.ai={}))[qo.none=0]="none",qo[qo.horizontal=1]="horizontal",qo[qo.vertical=2]="vertical",qo[qo.horizontalOnly=3]="horizontalOnly";const Th=-17;class Mh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,u){const g=new Mh;return g.scale=s||1,g.fontStack=u,g}static forImage(s){const u=new Mh;return u.imageName=s,u}}class no{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u){const g=new no;for(let D=0;D<s.sections.length;D++){const X=s.sections[D];X.image?g.addImageSection(X):g.addTextSection(X,u)}return g}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let u="";for(let g=0;g<s.length;g++){const D=s.charCodeAt(g+1)||null,X=s.charCodeAt(g-1)||null;u+=D&&Es(D)&&!Or[s[g+1]]||X&&Es(X)&&!Or[s[g-1]]||!Or[s[g]]?s[g]:Or[s[g]]}return u}(this.text)}trim(){let s=0;for(let g=0;g<this.text.length&&Zd[this.text.charCodeAt(g)];g++)s++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=s&&Zd[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const g=new no;return g.text=this.text.substring(s,u),g.sectionIndex=this.sectionIndex.slice(s,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(Mh.forText(s.scale,s.fontStack||u));const g=this.sections.length-1;for(let D=0;D<s.text.length;++D)this.sectionIndex.push(g)}addImageSection(s){const u=s.image?s.image.name:"";if(0===u.length)return void P("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Mh.forImage(u)),this.sectionIndex.push(this.sections.length-1)):P("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rl(l,s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt){const ut=no.fromFeature(l,D);let xt;Le===se.ai.vertical&&ut.verticalizePunctuation();const{processBidirectionalText:At,processStyledBidirectionalText:Rt}=Aa;if(At&&1===ut.sections.length){xt=[];const Ht=At(ut.toString(),bu(ut,Ae,X,s,g,Ke));for(const Qt of Ht){const mn=new no;mn.text=Qt,mn.sections=ut.sections;for(let Gn=0;Gn<Qt.length;Gn++)mn.sectionIndex.push(0);xt.push(mn)}}else if(Rt){xt=[];const Ht=Rt(ut.text,ut.sectionIndex,bu(ut,Ae,X,s,g,Ke));for(const Qt of Ht){const mn=new no;mn.text=Qt[0],mn.sectionIndex=Qt[1],mn.sections=ut.sections,xt.push(mn)}}else xt=function(Ht,Qt){const mn=[],Gn=Ht.text;let bn=0;for(const yn of Qt)mn.push(Ht.substring(bn,yn)),bn=yn;return bn<Gn.length&&mn.push(Ht.substring(bn,Gn.length)),mn}(ut,bu(ut,Ae,X,s,g,Ke));const Tt=[],Ft={positionedLines:Tt,text:ut.toString(),top:Ie[1],bottom:Ie[1],left:Ie[0],right:Ie[0],writingMode:Le,iconsInText:!1,verticalizable:!1};return function(Ht,Qt,mn,Gn,bn,yn,Un,Fn,wn,Yt,$n,Vn){let ri=0,Zi=Th,gi=0,tr=0;const ja="right"===Fn?1:"left"===Fn?0:.5;let vs=0;for(const vr of bn){vr.trim();const Zr=vr.getMaxScale(),ks=(Zr-1)*zr,xs={positionedGlyphs:[],lineOffset:0};Ht.positionedLines[vs]=xs;const Gs=xs.positionedGlyphs;let Ur=0;if(!vr.length()){Zi+=yn,++vs;continue}for(let os=0;os<vr.length();os++){const Fi=vr.getSection(os),Yi=vr.getSectionIndex(os),nr=vr.getCharCode(os);let ka=0,Dr=null,Gh=null,Ha=null,Ga=zr;const io=!(wn===se.ai.horizontal||!$n&&!Ad(nr)||$n&&(Zd[nr]||(Er=nr,_n.Arabic(Er)||_n["Arabic Supplement"](Er)||_n["Arabic Extended-A"](Er)||_n["Arabic Presentation Forms-A"](Er)||_n["Arabic Presentation Forms-B"](Er))));if(Fi.imageName){const $a=Gn[Fi.imageName];if(!$a)continue;Ha=Fi.imageName,Ht.iconsInText=Ht.iconsInText||!0,Gh=$a.paddedRect;const Yr=$a.displaySize;Fi.scale=Fi.scale*zr/Vn,Dr={width:Yr[0],height:Yr[1],left:Us,top:-Ah,advance:io?Yr[1]:Yr[0]},ka=ks+(zr-Yr[1]*Fi.scale),Ga=Dr.advance;const Ko=io?Yr[0]*Fi.scale-zr*Zr:Yr[1]*Fi.scale-zr*Zr;Ko>0&&Ko>Ur&&(Ur=Ko)}else{const $a=mn[Fi.fontStack],Yr=$a&&$a[nr];if(Yr&&Yr.rect)Gh=Yr.rect,Dr=Yr.metrics;else{const Ko=Qt[Fi.fontStack],$h=Ko&&Ko[nr];if(!$h)continue;Dr=$h.metrics}ka=(Zr-Fi.scale)*zr}io?(Ht.verticalizable=!0,Gs.push({glyph:nr,imageName:Ha,x:ri,y:Zi+ka,vertical:io,scale:Fi.scale,fontStack:Fi.fontStack,sectionIndex:Yi,metrics:Dr,rect:Gh}),ri+=Ga*Fi.scale+Yt):(Gs.push({glyph:nr,imageName:Ha,x:ri,y:Zi+ka,vertical:io,scale:Fi.scale,fontStack:Fi.fontStack,sectionIndex:Yi,metrics:Dr,rect:Gh}),ri+=Dr.advance*Fi.scale+Yt)}0!==Gs.length&&(gi=Math.max(ri-Yt,gi),wv(Gs,0,Gs.length-1,ja,Ur)),ri=0;const Vr=yn*Zr+Ur;xs.lineOffset=Math.max(Ur,ks),Zi+=Vr,tr=Math.max(Vr,tr),++vs}var Er;const Vs=Zi-Th,{horizontalAlign:js,verticalAlign:Hs}=Yd(Un);(function(vr,Zr,ks,xs,Gs,Ur,Vr,os,Fi){const Yi=(Zr-ks)*Gs;let nr=0;nr=Ur!==Vr?-os*xs-Th:(-xs*Fi+.5)*Vr;for(const ka of vr)for(const Dr of ka.positionedGlyphs)Dr.x+=Yi,Dr.y+=nr})(Ht.positionedLines,ja,js,Hs,gi,tr,yn,Vs,bn.length),Ht.top+=-Hs*Vs,Ht.bottom=Ht.top+Vs,Ht.left+=-js*gi,Ht.right=Ht.left+gi}(Ft,s,u,g,xt,ne,de,me,Le,Ae,Ve,nt),!function(Ht){for(const Qt of Ht)if(0!==Qt.positionedGlyphs.length)return!1;return!0}(Tt)&&Ft}const Zd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kb={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},kg={40:!0};function Ig(l,s,u,g,D,X){if(s.imageName){const ne=g[s.imageName];return ne?ne.displaySize[0]*s.scale*zr/X+D:0}{const ne=u[s.fontStack],de=ne&&ne[l];return de?de.metrics.advance*s.scale+D:0}}function _v(l,s,u,g){const D=Math.pow(l-s,2);return g?l<s?D/2:2*D:D+Math.abs(u)*u}function bv(l,s,u){let g=0;return 10===l&&(g-=1e4),u&&(g+=150),40!==l&&65288!==l||(g+=50),41!==s&&65289!==s||(g+=50),g}function Pg(l,s,u,g,D,X){let ne=null,de=_v(s,u,D,X);for(const me of g){const Ae=_v(s-me.x,u,D,X)+me.badness;Ae<=de&&(ne=me,de=Ae)}return{index:l,x:s,priorBreak:ne,badness:de}}function Fg(l){return l?Fg(l.priorBreak).concat(l.index):[]}function bu(l,s,u,g,D,X){if(!l)return[];const ne=[],de=function(Le,Ve,Ke,nt,ut,xt){let At=0;for(let Rt=0;Rt<Le.length();Rt++){const Tt=Le.getSection(Rt);At+=Ig(Le.getCharCode(Rt),Tt,nt,ut,Ve,xt)}return At/Math.max(1,Math.ceil(At/Ke))}(l,s,u,g,D,X),me=l.text.indexOf("\u200b")>=0;let Ae=0;for(let Le=0;Le<l.length();Le++){const Ve=l.getSection(Le),Ke=l.getCharCode(Le);if(Zd[Ke]||(Ae+=Ig(Ke,Ve,g,D,s,X)),Le<l.length()-1){const nt=!((Ie=Ke)<11904||!(_n["Bopomofo Extended"](Ie)||_n.Bopomofo(Ie)||_n["CJK Compatibility Forms"](Ie)||_n["CJK Compatibility Ideographs"](Ie)||_n["CJK Compatibility"](Ie)||_n["CJK Radicals Supplement"](Ie)||_n["CJK Strokes"](Ie)||_n["CJK Symbols and Punctuation"](Ie)||_n["CJK Unified Ideographs Extension A"](Ie)||_n["CJK Unified Ideographs"](Ie)||_n["Enclosed CJK Letters and Months"](Ie)||_n["Halfwidth and Fullwidth Forms"](Ie)||_n.Hiragana(Ie)||_n["Ideographic Description Characters"](Ie)||_n["Kangxi Radicals"](Ie)||_n["Katakana Phonetic Extensions"](Ie)||_n.Katakana(Ie)||_n["Vertical Forms"](Ie)||_n["Yi Radicals"](Ie)||_n["Yi Syllables"](Ie)));(Kb[Ke]||nt||Ve.imageName||Le!==l.length()-2&&kg[l.getCharCode(Le+1)])&&ne.push(Pg(Le+1,Ae,de,ne,bv(Ke,l.getCharCode(Le+1),nt&&me),!1))}}var Ie;return Fg(Pg(l.length(),Ae,de,ne,0,!0))}function Yd(l){let s=.5,u=.5;switch(l){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function wv(l,s,u,g,D){if(!g&&!D)return;const X=l[u],ne=(l[u].x+X.metrics.advance*X.scale)*g;for(let de=s;de<=u;de++)l[de].x-=ne,l[de].y+=D}function Rg(l,s,u){const{horizontalAlign:g,verticalAlign:D}=Yd(u),X=s[0]-l.displaySize[0]*g,ne=s[1]-l.displaySize[1]*D;return{image:l,top:ne,bottom:ne+l.displaySize[1],left:X,right:X+l.displaySize[0]}}function Cv(l){var s,u;let g=l.left,D=l.top,X=l.right-g,ne=l.bottom-D;const de=null!==(s=l.image.textFitWidth)&&void 0!==s?s:"stretchOrShrink",me=null!==(u=l.image.textFitHeight)&&void 0!==u?u:"stretchOrShrink",Ae=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if("proportional"===me){if("stretchOnly"===de&&X/ne<Ae||"proportional"===de){const Ie=Math.ceil(ne*Ae);g*=Ie/X,X=Ie}}else if("proportional"===de&&"stretchOnly"===me&&0!==Ae&&X/ne>Ae){const Ie=Math.ceil(X/Ae);D*=Ie/ne,ne=Ie}return{x1:g,y1:D,x2:g+X,y2:D+ne}}function wp(l,s,u,g,D,X){const ne=l.image;let de;if(ne.content){const xt=ne.content,At=ne.pixelRatio||1;de=[xt[0]/At,xt[1]/At,ne.displaySize[0]-xt[2]/At,ne.displaySize[1]-xt[3]/At]}const me=s.left*X,Ae=s.right*X;let Ie,Le,Ve,Ke;"width"===u||"both"===u?(Ke=D[0]+me-g[3],Le=D[0]+Ae+g[1]):(Ke=D[0]+(me+Ae-ne.displaySize[0])/2,Le=Ke+ne.displaySize[0]);const nt=s.top*X,ut=s.bottom*X;return"height"===u||"both"===u?(Ie=D[1]+nt-g[0],Ve=D[1]+ut+g[2]):(Ie=D[1]+(nt+ut-ne.displaySize[1])/2,Ve=Ie+ne.displaySize[1]),{image:ne,top:Ie,right:Le,bottom:Ve,left:Ke,collisionPadding:de}}const Kd=255,Co=128,Ol=Kd*Co;function Jd(l,s){const{expression:u}=s;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new Di(l+1))};if("source"===u.kind)return{kind:"source"};{const{zoomStops:g,interpolationType:D}=u;let X=0;for(;X<g.length&&g[X]<=l;)X++;X=Math.max(0,X-1);let ne=X;for(;ne<g.length&&g[ne]<l+1;)ne++;ne=Math.min(g.length-1,ne);const de=g[X],me=g[ne];return"composite"===u.kind?{kind:"composite",minZoom:de,maxZoom:me,interpolationType:D}:{kind:"camera",minZoom:de,maxZoom:me,minSize:u.evaluate(new Di(de)),maxSize:u.evaluate(new Di(me)),interpolationType:D}}}function Og(l,s,u){let g="never";const D=l.get(s);return D?g=D:l.get(u)&&(g="always"),g}const Jb=Ms.VectorTileFeature.types,Cp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sp(l,s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve){const Ke=de?Math.min(Ol,Math.round(de[0])):0,nt=de?Math.min(Ol,Math.round(de[1])):0;l.emplaceBack(s,u,Math.round(32*g),Math.round(32*D),X,ne,(Ke<<1)+(me?1:0),nt,16*Ae,16*Ie,256*Le,256*Ve)}function Lg(l,s,u){l.emplaceBack(s.x,s.y,u),l.emplaceBack(s.x,s.y,u),l.emplaceBack(s.x,s.y,u),l.emplaceBack(s.x,s.y,u)}function Qb(l){for(const s of l.sections)if(Qa(s.text))return!0;return!1}class Ng{constructor(s){this.layoutVertexArray=new ca,this.indexArray=new Wr,this.programConfigurations=s,this.segments=new Nr,this.dynamicLayoutVertexArray=new bo,this.opacityVertexArray=new Bo,this.hasVisibleVertices=!1,this.placedSymbolArray=new hr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(s,u,g,D){this.isEmpty()||(g&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,qb.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Wb.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Cp,!0),this.opacityVertexBuffer.itemSize=1),(g||D)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tn("SymbolBuffers",Ng);class Bg{constructor(s,u,g){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new g,this.segments=new Nr,this.collisionVertexArray=new Ts}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Xb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tn("CollisionBuffers",Bg);class wu{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(ne=>ne.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Md([]),this.placementViewportMatrix=Md([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Jd(this.zoom,u["text-size"]),this.iconSizeData=Jd(this.zoom,u["icon-size"]);const g=this.layers[0].layout,D=g.get("symbol-sort-key"),X=g.get("symbol-z-order");this.canOverlap="never"!==Og(g,"text-overlap","text-allow-overlap")||"never"!==Og(g,"icon-overlap","icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==X&&!D.isConstant(),this.sortFeaturesByY=("viewport-y"===X||"auto"===X&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===g.get("symbol-placement")&&(this.writingModes=g.get("text-writing-mode").map(ne=>se.ai[ne])),this.stateDependentLayerIds=this.layers.filter(ne=>ne.isStateDependent()).map(ne=>ne.id),this.sourceID=s.sourceID}createArrays(){this.text=new Ng(new lc(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new Ng(new lc(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new or,this.lineVertexArray=new Ds,this.symbolInstances=new Ea,this.textAnchorOffsets=new fs}calculateGlyphDependencies(s,u,g,D,X){for(let ne=0;ne<s.length;ne++)if(u[s.charCodeAt(ne)]=!0,(g||D)&&X){const de=Or[s.charAt(ne)];de&&(u[de.charCodeAt(0)]=!0)}}populate(s,u,g){const D=this.layers[0],X=D.layout,ne=X.get("text-font"),de=X.get("text-field"),me=X.get("icon-image"),Ae=("constant"!==de.value.kind||de.value.value instanceof br&&!de.value.value.isEmpty()||de.value.value.toString().length>0)&&("constant"!==ne.value.kind||ne.value.value.length>0),Ie="constant"!==me.value.kind||!!me.value.value||Object.keys(me.parameters).length>0,Le=X.get("symbol-sort-key");if(this.features=[],!Ae&&!Ie)return;const Ve=u.iconDependencies,Ke=u.glyphDependencies,nt=u.availableImages,ut=new Di(this.zoom);for(const{feature:xt,id:At,index:Rt,sourceLayerIndex:Tt}of s){const Ft=D._featureFilter.needGeometry,Ht=Ml(xt,Ft);if(!D._featureFilter.filter(ut,Ht,g))continue;let Qt,mn;if(Ft||(Ht.geometry=cc(xt)),Ae){const bn=D.getValueAndResolveTokens("text-field",Ht,g,nt),yn=br.factory(bn),Un=this.hasRTLText=this.hasRTLText||Qb(yn);(!Un||"unavailable"===Aa.getRTLTextPluginStatus()||Un&&Aa.isParsed())&&(Qt=pv(yn,D,Ht))}if(Ie){const bn=D.getValueAndResolveTokens("icon-image",Ht,g,nt);mn=bn instanceof Ir?bn:Ir.fromString(bn)}if(!Qt&&!mn)continue;const Gn=this.sortFeaturesByKey?Le.evaluate(Ht,{},g):void 0;if(this.features.push({id:At,text:Qt,icon:mn,index:Rt,sourceLayerIndex:Tt,geometry:Ht.geometry,properties:xt.properties,type:Jb[xt.type],sortKey:Gn}),mn&&(Ve[mn.name]=!0),Qt){const bn=ne.evaluate(Ht,{},g).join(","),yn="viewport"!==X.get("text-rotation-alignment")&&"point"!==X.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(se.ai.vertical)>=0;for(const Un of Qt.sections)if(Un.image)Ve[Un.image.name]=!0;else{const Fn=xo(Qt.toString()),wn=Un.fontStack||bn,Yt=Ke[wn]=Ke[wn]||{};this.calculateGlyphDependencies(Un.text,Yt,yn,this.allowVerticalPlacement,Fn)}}}"line"===X.get("symbol-placement")&&(this.features=function(xt){const At={},Rt={},Tt=[];let Ft=0;function Ht(bn){Tt.push(xt[bn]),Ft++}function Qt(bn,yn,Un){const Fn=Rt[bn];return delete Rt[bn],Rt[yn]=Fn,Tt[Fn].geometry[0].pop(),Tt[Fn].geometry[0]=Tt[Fn].geometry[0].concat(Un[0]),Fn}function mn(bn,yn,Un){const Fn=At[yn];return delete At[yn],At[bn]=Fn,Tt[Fn].geometry[0].shift(),Tt[Fn].geometry[0]=Un[0].concat(Tt[Fn].geometry[0]),Fn}function Gn(bn,yn,Un){const Fn=Un?yn[0][yn[0].length-1]:yn[0][0];return`${bn}:${Fn.x}:${Fn.y}`}for(let bn=0;bn<xt.length;bn++){const yn=xt[bn],Un=yn.geometry,Fn=yn.text?yn.text.toString():null;if(!Fn){Ht(bn);continue}const wn=Gn(Fn,Un),Yt=Gn(Fn,Un,!0);if(wn in Rt&&Yt in At&&Rt[wn]!==At[Yt]){const $n=mn(wn,Yt,Un),Vn=Qt(wn,Yt,Tt[$n].geometry);delete At[wn],delete Rt[Yt],Rt[Gn(Fn,Tt[Vn].geometry,!0)]=Vn,Tt[$n].geometry=null}else wn in Rt?Qt(wn,Yt,Un):Yt in At?mn(wn,Yt,Un):(Ht(bn),At[wn]=Ft-1,Rt[Yt]=Ft-1)}return Tt.filter(bn=>bn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((xt,At)=>xt.sortKey-At.sortKey)}update(s,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,g))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const g=this.lineVertexArray.length;if(void 0!==s.segment){let D=s.dist(u[s.segment+1]),X=s.dist(u[s.segment]);const ne={};for(let de=s.segment+1;de<u.length;de++)ne[de]={x:u[de].x,y:u[de].y,tileUnitDistanceFromAnchor:D},de<u.length-1&&(D+=u[de+1].dist(u[de]));for(let de=s.segment||0;de>=0;de--)ne[de]={x:u[de].x,y:u[de].y,tileUnitDistanceFromAnchor:X},de>0&&(X+=u[de-1].dist(u[de]));for(let de=0;de<u.length;de++){const me=ne[de];this.lineVertexArray.emplaceBack(me.x,me.y,me.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve){const Ke=s.indexArray,nt=s.layoutVertexArray,ut=s.segments.prepareSegment(4*u.length,nt,Ke,this.canOverlap?ne.sortKey:void 0),xt=this.glyphOffsetArray.length,At=ut.vertexLength,Rt=this.allowVerticalPlacement&&de===se.ai.vertical?Math.PI/2:0,Tt=ne.text&&ne.text.sections;for(let Ft=0;Ft<u.length;Ft++){const{tl:Ht,tr:Qt,bl:mn,br:Gn,tex:bn,pixelOffsetTL:yn,pixelOffsetBR:Un,minFontScaleX:Fn,minFontScaleY:wn,glyphOffset:Yt,isSDF:$n,sectionIndex:Vn}=u[Ft],ri=ut.vertexLength,Zi=Yt[1];Sp(nt,me.x,me.y,Ht.x,Zi+Ht.y,bn.x,bn.y,g,$n,yn.x,yn.y,Fn,wn),Sp(nt,me.x,me.y,Qt.x,Zi+Qt.y,bn.x+bn.w,bn.y,g,$n,Un.x,yn.y,Fn,wn),Sp(nt,me.x,me.y,mn.x,Zi+mn.y,bn.x,bn.y+bn.h,g,$n,yn.x,Un.y,Fn,wn),Sp(nt,me.x,me.y,Gn.x,Zi+Gn.y,bn.x+bn.w,bn.y+bn.h,g,$n,Un.x,Un.y,Fn,wn),Lg(s.dynamicLayoutVertexArray,me,Rt),Ke.emplaceBack(ri,ri+1,ri+2),Ke.emplaceBack(ri+1,ri+2,ri+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yt[0]),Ft!==u.length-1&&Vn===u[Ft+1].sectionIndex||s.programConfigurations.populatePaintArrays(nt.length,ne,ne.index,{},Ve,Tt&&Tt[Vn])}s.placedSymbolArray.emplaceBack(me.x,me.y,xt,this.glyphOffsetArray.length-xt,At,Ae,Ie,me.segment,g?g[0]:0,g?g[1]:0,D[0],D[1],de,0,!1,0,Le)}_addCollisionDebugVertex(s,u,g,D,X,ne){return u.emplaceBack(0,0),s.emplaceBack(g.x,g.y,D,X,Math.round(ne.x),Math.round(ne.y))}addCollisionDebugVertices(s,u,g,D,X,ne,de){const me=X.segments.prepareSegment(4,X.layoutVertexArray,X.indexArray),Ae=me.vertexLength,Ie=X.layoutVertexArray,Le=X.collisionVertexArray,Ve=de.anchorX,Ke=de.anchorY;this._addCollisionDebugVertex(Ie,Le,ne,Ve,Ke,new e(s,u)),this._addCollisionDebugVertex(Ie,Le,ne,Ve,Ke,new e(g,u)),this._addCollisionDebugVertex(Ie,Le,ne,Ve,Ke,new e(g,D)),this._addCollisionDebugVertex(Ie,Le,ne,Ve,Ke,new e(s,D)),me.vertexLength+=4;const nt=X.indexArray;nt.emplaceBack(Ae,Ae+1),nt.emplaceBack(Ae+1,Ae+2),nt.emplaceBack(Ae+2,Ae+3),nt.emplaceBack(Ae+3,Ae),me.primitiveLength+=4}addDebugCollisionBoxes(s,u,g,D){for(let X=s;X<u;X++){const ne=this.collisionBoxArray.get(X);this.addCollisionDebugVertices(ne.x1,ne.y1,ne.x2,ne.y2,D?this.textCollisionBox:this.iconCollisionBox,ne.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bg(ps,vc.members,ei),this.iconCollisionBox=new Bg(ps,vc.members,ei);for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(s,u,g,D,X,ne,de,me,Ae){const Ie={};for(let Le=u;Le<g;Le++){const Ve=s.get(Le);Ie.textBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ie.textFeatureIndex=Ve.featureIndex;break}for(let Le=D;Le<X;Le++){const Ve=s.get(Le);Ie.verticalTextBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ie.verticalTextFeatureIndex=Ve.featureIndex;break}for(let Le=ne;Le<de;Le++){const Ve=s.get(Le);Ie.iconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ie.iconFeatureIndex=Ve.featureIndex;break}for(let Le=me;Le<Ae;Le++){const Ve=s.get(Le);Ie.verticalIconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ie.verticalIconFeatureIndex=Ve.featureIndex;break}return Ie}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,u){const g=s.placedSymbolArray.get(u),D=g.vertexStartIndex+4*g.numGlyphs;for(let X=g.vertexStartIndex;X<D;X+=4)s.indexArray.emplaceBack(X,X+1,X+2),s.indexArray.emplaceBack(X+1,X+2,X+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const u=Math.sin(s),g=Math.cos(s),D=[],X=[],ne=[];for(let de=0;de<this.symbolInstances.length;++de){ne.push(de);const me=this.symbolInstances.get(de);D.push(0|Math.round(u*me.anchorX+g*me.anchorY)),X.push(me.featureIndex)}return ne.sort((de,me)=>D[de]-D[me]||X[me]-X[de]),ne}addToSortKeyRanges(s,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((D,X,ne)=>{D>=0&&ne.indexOf(D)===X&&this.addIndicesForPlacedSymbol(this.text,D)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let kh,Ih;Tn("SymbolBucket",wu,{omit:["layers","collisionBoxArray","features","compareText"]}),wu.MAX_GLYPHS=65535,wu.addDynamicAttributes=Lg;var Qd={get paint(){return Ih=Ih||new w({"icon-opacity":new Jn(_e.paint_symbol["icon-opacity"]),"icon-color":new Jn(_e.paint_symbol["icon-color"]),"icon-halo-color":new Jn(_e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jn(_e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jn(_e.paint_symbol["icon-halo-blur"]),"icon-translate":new Hn(_e.paint_symbol["icon-translate"]),"icon-translate-anchor":new Hn(_e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jn(_e.paint_symbol["text-opacity"]),"text-color":new Jn(_e.paint_symbol["text-color"],{runtimeType:Ze,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Jn(_e.paint_symbol["text-halo-color"]),"text-halo-width":new Jn(_e.paint_symbol["text-halo-width"]),"text-halo-blur":new Jn(_e.paint_symbol["text-halo-blur"]),"text-translate":new Hn(_e.paint_symbol["text-translate"]),"text-translate-anchor":new Hn(_e.paint_symbol["text-translate-anchor"])})},get layout(){return kh=kh||new w({"symbol-placement":new Hn(_e.layout_symbol["symbol-placement"]),"symbol-spacing":new Hn(_e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Hn(_e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jn(_e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Hn(_e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Hn(_e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Hn(_e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Hn(_e.layout_symbol["icon-ignore-placement"]),"icon-optional":new Hn(_e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Hn(_e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jn(_e.layout_symbol["icon-size"]),"icon-text-fit":new Hn(_e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Hn(_e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jn(_e.layout_symbol["icon-image"]),"icon-rotate":new Jn(_e.layout_symbol["icon-rotate"]),"icon-padding":new Jn(_e.layout_symbol["icon-padding"]),"icon-keep-upright":new Hn(_e.layout_symbol["icon-keep-upright"]),"icon-offset":new Jn(_e.layout_symbol["icon-offset"]),"icon-anchor":new Jn(_e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Hn(_e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Hn(_e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Hn(_e.layout_symbol["text-rotation-alignment"]),"text-field":new Jn(_e.layout_symbol["text-field"]),"text-font":new Jn(_e.layout_symbol["text-font"]),"text-size":new Jn(_e.layout_symbol["text-size"]),"text-max-width":new Jn(_e.layout_symbol["text-max-width"]),"text-line-height":new Hn(_e.layout_symbol["text-line-height"]),"text-letter-spacing":new Jn(_e.layout_symbol["text-letter-spacing"]),"text-justify":new Jn(_e.layout_symbol["text-justify"]),"text-radial-offset":new Jn(_e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Hn(_e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Jn(_e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Jn(_e.layout_symbol["text-anchor"]),"text-max-angle":new Hn(_e.layout_symbol["text-max-angle"]),"text-writing-mode":new Hn(_e.layout_symbol["text-writing-mode"]),"text-rotate":new Jn(_e.layout_symbol["text-rotate"]),"text-padding":new Hn(_e.layout_symbol["text-padding"]),"text-keep-upright":new Hn(_e.layout_symbol["text-keep-upright"]),"text-transform":new Jn(_e.layout_symbol["text-transform"]),"text-offset":new Jn(_e.layout_symbol["text-offset"]),"text-allow-overlap":new Hn(_e.layout_symbol["text-allow-overlap"]),"text-overlap":new Hn(_e.layout_symbol["text-overlap"]),"text-ignore-placement":new Hn(_e.layout_symbol["text-ignore-placement"]),"text-optional":new Hn(_e.layout_symbol["text-optional"])})}};class Ap{constructor(s){if(void 0===s.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Dt,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tn("FormatSectionOverride",Ap,{omit:["defaultValue"]});class Ph extends Y{constructor(s){super(s,Qd)}recalculate(s,u){if(super.recalculate(s,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const g=this.layout.get("text-writing-mode");if(g){const D=[];for(const X of g)D.indexOf(X)<0&&D.push(X);this.layout._values["text-writing-mode"]=D}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,u,g,D){const X=this.layout.get(s).evaluate(u,{},g,D),ne=this._unevaluatedLayout._values[s];return ne.isDataDriven()||gl(ne.value)||!X?X:(de=u.properties,X.replace(/{([^{}]+)}/g,(Ae,Ie)=>de&&Ie in de?String(de[Ie]):""));var de}createBucket(s){return new wu(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of Qd.paint.overridableProperties){if(!Ph.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),g=new Ap(u),D=new Yc(g,u.property.specification);let X=null;X="constant"===u.value.kind||"source"===u.value.kind?new eh("source",D):new Ws("composite",D,u.value.zoomStops),this.paint._values[s]=new eo(u.property,X,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&Ph.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const g=s.get("text-field"),D=Qd.paint.properties[u];let X=!1;const ne=de=>{for(const me of de)if(D.overrides&&D.overrides.hasOverride(me))return void(X=!0)};if("constant"===g.value.kind&&g.value.value instanceof br)ne(g.value.value.sections);else if("source"===g.value.kind){const de=Ae=>{X||(Ae instanceof ba&&wr(Ae.value)===_t?ne(Ae.value.sections):Ae instanceof Oc?ne(Ae.sections):Ae.eachChild(de))},me=g.value;me._styleExpression&&de(me._styleExpression.expression)}return X}}let xc;var zg={get paint(){return xc=xc||new w({"background-color":new Hn(_e.paint_background["background-color"]),"background-pattern":new a(_e.paint_background["background-pattern"]),"background-opacity":new Hn(_e.paint_background["background-opacity"])})}};class Ug extends Y{constructor(s){super(s,zg)}}let Fh;var ef={get paint(){return Fh=Fh||new w({"raster-opacity":new Hn(_e.paint_raster["raster-opacity"]),"raster-hue-rotate":new Hn(_e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Hn(_e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Hn(_e.paint_raster["raster-brightness-max"]),"raster-saturation":new Hn(_e.paint_raster["raster-saturation"]),"raster-contrast":new Hn(_e.paint_raster["raster-contrast"]),"raster-resampling":new Hn(_e.paint_raster["raster-resampling"]),"raster-fade-duration":new Hn(_e.paint_raster["raster-fade-duration"])})}};class Ll extends Y{constructor(s){super(s,ef)}}class Sv extends Y{constructor(s){super(s,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=s}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Av{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ep=6371008.8;class Wo{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wo(N(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,g=this.lat*u,D=s.lat*u,X=Math.sin(g)*Math.sin(D)+Math.cos(g)*Math.cos(D)*Math.cos((s.lng-this.lng)*u);return Ep*Math.acos(Math.min(X,1))}static convert(s){if(s instanceof Wo)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new Wo(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new Wo(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const tf=2*Math.PI*Ep;function Vg(l){return tf*Math.cos(l*Math.PI/180)}function jg(l){return(180+l)/360}function Hg(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Dp(l,s){return l/Vg(s)}function Tp(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class nf{constructor(s,u,g=0){this.x=+s,this.y=+u,this.z=+g}static fromLngLat(s,u=0){const g=Wo.convert(s);return new nf(jg(g.lng),Hg(g.lat),Dp(u,g.lat))}toLngLat(){return new Wo(360*this.x-180,Tp(this.y))}toAltitude(){return this.z*Vg(Tp(this.y))}meterInMercatorCoordinateUnits(){return 1/tf*(s=Tp(this.y),1/Math.cos(s*Math.PI/180));var s}}function Js(l,s,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[l*g-2*Math.PI*6378137/2,s*g-2*Math.PI*6378137/2]}class Rh{constructor(s,u,g){if(s<0||s>25||g<0||g>=Math.pow(2,s)||u<0||u>=Math.pow(2,s))throw new Error(`x=${u}, y=${g}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=u,this.y=g,this.key=Xr(0,s,s,u,g)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u,g){const D=(ne=this.y,de=this.z,me=Js(256*(X=this.x),256*(ne=Math.pow(2,de)-ne-1),de),Ae=Js(256*(X+1),256*(ne+1),de),me[0]+","+me[1]+","+Ae[0]+","+Ae[1]);var X,ne,de,me,Ae;const Ie=function(Le,Ve,Ke){let nt,ut="";for(let xt=Le;xt>0;xt--)nt=1<<xt-1,ut+=(Ve&nt?1:0)+(Ke&nt?2:0);return ut}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===g?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,Ie).replace(/{bbox-epsg-3857}/g,D)}isChildOf(s){const u=this.z-s.z;return u>0&&s.x===this.x>>u&&s.y===this.y>>u}getTilePoint(s){const u=Math.pow(2,this.z);return new e((s.x*u-this.x)*Br,(s.y*u-this.y)*Br)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mp{constructor(s,u){this.wrap=s,this.canonical=u,this.key=Xr(s,u.z,u.z,u.x,u.y)}}class Qs{constructor(s,u,g,D,X){if(s<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${g}`);this.overscaledZ=s,this.wrap=u,this.canonical=new Rh(g,+D,+X),this.key=Xr(u,s,g,D,X)}clone(){return new Qs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-s;return s>this.canonical.z?new Qs(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qs(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-s;return s>this.canonical.z?Xr(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y):Xr(this.wrap*+u,s,s,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new Qs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,D=2*this.canonical.y;return[new Qs(u,this.wrap,u,g,D),new Qs(u,this.wrap,u,g+1,D),new Qs(u,this.wrap,u,g,D+1),new Qs(u,this.wrap,u,g+1,D+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new Qs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new Qs(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new nf(s.x-this.wrap,s.y))}}function Xr(l,s,u,g,D){(l*=2)<0&&(l=-1*l-1);const X=1<<u;return(X*X*l+X*D+g).toString(36)+u.toString(36)+s.toString(36)}Tn("CanonicalTileID",Rh),Tn("OverscaledTileID",Qs,{omit:["posMatrix"]});class Cu{constructor(s,u,g,D=1,X=1,ne=1,de=0){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void P(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const me=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=D,this.greenFactor=X,this.blueFactor=ne,this.baseShift=de;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Ae=0;Ae<me;Ae++)this.data[this._idx(-1,Ae)]=this.data[this._idx(0,Ae)],this.data[this._idx(me,Ae)]=this.data[this._idx(me-1,Ae)],this.data[this._idx(Ae,-1)]=this.data[this._idx(Ae,0)],this.data[this._idx(Ae,me)]=this.data[this._idx(Ae,me-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(me,-1)]=this.data[this._idx(me-1,0)],this.data[this._idx(-1,me)]=this.data[this._idx(0,me-1)],this.data[this._idx(me,me)]=this.data[this._idx(me-1,me-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Ae=0;Ae<me;Ae++)for(let Ie=0;Ie<me;Ie++){const Le=this.get(Ae,Ie);Le>this.max&&(this.max=Le),Le<this.min&&(this.min=Le)}}get(s,u){const g=new Uint8Array(this.data.buffer),D=4*this._idx(s,u);return this.unpack(g[D],g[D+1],g[D+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}unpack(s,u,g){return s*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,u,g){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let D=u*this.dim,X=u*this.dim+this.dim,ne=g*this.dim,de=g*this.dim+this.dim;switch(u){case-1:D=X-1;break;case 1:X=D+1}switch(g){case-1:ne=de-1;break;case 1:de=ne+1}const me=-u*this.dim,Ae=-g*this.dim;for(let Ie=ne;Ie<de;Ie++)for(let Le=D;Le<X;Le++)this.data[this._idx(Le,Ie)]=s.data[this._idx(Le+me,Ie+Ae)]}}Tn("DEMData",Cu);class kp{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const g=s[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class Ip{constructor(s,u,g,D,X){this.type="Feature",this._vectorTileFeature=s,s._z=u,s._x=g,s._y=D,this.properties=s.properties,this.id=X}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const u in this)"_geometry"!==u&&"_vectorTileFeature"!==u&&(s[u]=this[u]);return s}}class Gg{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Zs(Br,16,0),this.grid3D=new Zs(Br,16,0),this.featureIndexArray=new Bs,this.promoteId=u}insert(s,u,g,D,X,ne){const de=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,D,X);const me=ne?this.grid3D:this.grid;for(let Ae=0;Ae<u.length;Ae++){const Ie=u[Ae],Le=[1/0,1/0,-1/0,-1/0];for(let Ve=0;Ve<Ie.length;Ve++){const Ke=Ie[Ve];Le[0]=Math.min(Le[0],Ke.x),Le[1]=Math.min(Le[1],Ke.y),Le[2]=Math.max(Le[2],Ke.x),Le[3]=Math.max(Le[3],Ke.y)}Le[0]<Br&&Le[1]<Br&&Le[2]>=0&&Le[3]>=0&&me.insert(de,Le[0],Le[1],Le[2],Le[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ms.VectorTile(new Sh(this.rawTileData)).layers,this.sourceLayerCoder=new kp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,u,g,D){this.loadVTLayers();const X=s.params||{},ne=Br/s.tileSize/s.scale,de=Ss(X.filter),me=s.queryGeometry,Ae=s.queryPadding*ne,Ie=$g(me),Le=this.grid.query(Ie.minX-Ae,Ie.minY-Ae,Ie.maxX+Ae,Ie.maxY+Ae),Ve=$g(s.cameraQueryGeometry),Ke=this.grid3D.query(Ve.minX-Ae,Ve.minY-Ae,Ve.maxX+Ae,Ve.maxY+Ae,(xt,At,Rt,Tt)=>function(Ft,Ht,Qt,mn,Gn){for(const yn of Ft)if(Ht<=yn.x&&Qt<=yn.y&&mn>=yn.x&&Gn>=yn.y)return!0;const bn=[new e(Ht,Qt),new e(Ht,Gn),new e(mn,Gn),new e(mn,Qt)];if(Ft.length>2)for(const yn of bn)if(uc(Ft,yn))return!0;for(let yn=0;yn<Ft.length-1;yn++)if(ph(Ft[yn],Ft[yn+1],bn))return!0;return!1}(s.cameraQueryGeometry,xt-Ae,At-Ae,Rt+Ae,Tt+Ae));for(const xt of Ke)Le.push(xt);Le.sort(qg);const nt={};let ut;for(let xt=0;xt<Le.length;xt++){const At=Le[xt];if(At===ut)continue;ut=At;const Rt=this.featureIndexArray.get(At);let Tt=null;this.loadMatchingFeature(nt,Rt.bucketIndex,Rt.sourceLayerIndex,Rt.featureIndex,de,X.layers,X.availableImages,u,g,D,(Ft,Ht,Qt)=>(Tt||(Tt=cc(Ft)),Ht.queryIntersectsFeature(me,Ft,Qt,Tt,this.z,s.transform,ne,s.pixelPosMatrix)))}return nt}loadMatchingFeature(s,u,g,D,X,ne,de,me,Ae,Ie,Le){const Ve=this.bucketLayerIDs[u];if(ne&&!function(xt,At){for(let Rt=0;Rt<xt.length;Rt++)if(At.indexOf(xt[Rt])>=0)return!0;return!1}(ne,Ve))return;const Ke=this.sourceLayerCoder.decode(g),nt=this.vtLayers[Ke].feature(D);if(X.needGeometry){const xt=Ml(nt,!0);if(!X.filter(new Di(this.tileID.overscaledZ),xt,this.tileID.canonical))return}else if(!X.filter(new Di(this.tileID.overscaledZ),nt))return;const ut=this.getId(nt,Ke);for(let xt=0;xt<Ve.length;xt++){const At=Ve[xt];if(ne&&ne.indexOf(At)<0)continue;const Rt=me[At];if(!Rt)continue;let Tt={};ut&&Ie&&(Tt=Ie.getState(Rt.sourceLayer||"_geojsonTileLayer",ut));const Ft=O({},Ae[At]);Ft.paint=Pp(Ft.paint,Rt.paint,nt,Tt,de),Ft.layout=Pp(Ft.layout,Rt.layout,nt,Tt,de);const Ht=!Le||Le(nt,Rt,Tt);if(!Ht)continue;const Qt=new Ip(nt,this.z,this.x,this.y,ut);Qt.layer=Ft;let mn=s[At];void 0===mn&&(mn=s[At]=[]),mn.push({featureIndex:D,feature:Qt,intersectionZ:Ht})}}lookupSymbolFeatures(s,u,g,D,X,ne,de,me){const Ae={};this.loadVTLayers();const Ie=Ss(X);for(const Le of s)this.loadMatchingFeature(Ae,g,D,Le,Ie,ne,de,me,u);return Ae}hasLayer(s){for(const u of this.bucketLayerIDs)for(const g of u)if(s===g)return!0;return!1}getId(s,u){let g=s.id;return this.promoteId&&(g=s.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[u]],"boolean"==typeof g&&(g=Number(g))),g}}function Pp(l,s,u,g,D){return A(l,(X,ne)=>{const de=s instanceof lh?s.get(ne):null;return de&&de.evaluate?de.evaluate(u,g,D):de})}function $g(l){let s=1/0,u=1/0,g=-1/0,D=-1/0;for(const X of l)s=Math.min(s,X.x),u=Math.min(u,X.y),g=Math.max(g,X.x),D=Math.max(D,X.y);return{minX:s,minY:u,maxX:g,maxY:D}}function qg(l,s){return s-l}function Wg(l,s,u,g,D){const X=[];for(let ne=0;ne<l.length;ne++){const de=l[ne];let me;for(let Ae=0;Ae<de.length-1;Ae++){let Ie=de[Ae],Le=de[Ae+1];Ie.x<s&&Le.x<s||(Ie.x<s?Ie=new e(s,Ie.y+(s-Ie.x)/(Le.x-Ie.x)*(Le.y-Ie.y))._round():Le.x<s&&(Le=new e(s,Ie.y+(s-Ie.x)/(Le.x-Ie.x)*(Le.y-Ie.y))._round()),Ie.y<u&&Le.y<u||(Ie.y<u?Ie=new e(Ie.x+(u-Ie.y)/(Le.y-Ie.y)*(Le.x-Ie.x),u)._round():Le.y<u&&(Le=new e(Ie.x+(u-Ie.y)/(Le.y-Ie.y)*(Le.x-Ie.x),u)._round()),Ie.x>=g&&Le.x>=g||(Ie.x>=g?Ie=new e(g,Ie.y+(g-Ie.x)/(Le.x-Ie.x)*(Le.y-Ie.y))._round():Le.x>=g&&(Le=new e(g,Ie.y+(g-Ie.x)/(Le.x-Ie.x)*(Le.y-Ie.y))._round()),Ie.y>=D&&Le.y>=D||(Ie.y>=D?Ie=new e(Ie.x+(D-Ie.y)/(Le.y-Ie.y)*(Le.x-Ie.x),D)._round():Le.y>=D&&(Le=new e(Ie.x+(D-Ie.y)/(Le.y-Ie.y)*(Le.x-Ie.x),D)._round()),me&&Ie.equals(me[me.length-1])||(me=[Ie],X.push(me)),me.push(Le)))))}}return X}Tn("FeatureIndex",Gg,{omit:["rawTileData","sourceLayerCoder"]});class Xo extends e{constructor(s,u,g,D){super(s,u),this.angle=g,void 0!==D&&(this.segment=D)}clone(){return new Xo(this.x,this.y,this.angle,this.segment)}}function Xg(l,s,u,g,D){if(void 0===s.segment||0===u)return!0;let X=s,ne=s.segment+1,de=0;for(;de>-u/2;){if(ne--,ne<0)return!1;de-=l[ne].dist(X),X=l[ne]}de+=l[ne].dist(l[ne+1]),ne++;const me=[];let Ae=0;for(;de<u/2;){const Ie=l[ne],Le=l[ne+1];if(!Le)return!1;let Ve=l[ne-1].angleTo(Ie)-Ie.angleTo(Le);for(Ve=Math.abs((Ve+3*Math.PI)%(2*Math.PI)-Math.PI),me.push({distance:de,angleDelta:Ve}),Ae+=Ve;de-me[0].distance>g;)Ae-=me.shift().angleDelta;if(Ae>D)return!1;ne++,de+=Ie.dist(Le)}return!0}function Zg(l){let s=0;for(let u=0;u<l.length-1;u++)s+=l[u].dist(l[u+1]);return s}function rf(l,s,u){return l?.6*s*u:0}function sf(l,s){return Math.max(l?l.right-l.left:0,s?s.right-s.left:0)}function Ev(l,s,u,g,D,X){const ne=rf(u,D,X),de=sf(u,g)*X;let me=0;const Ae=Zg(l)/2;for(let Ie=0;Ie<l.length-1;Ie++){const Le=l[Ie],Ve=l[Ie+1],Ke=Le.dist(Ve);if(me+Ke>Ae){const nt=(Ae-me)/Ke,ut=jn.number(Le.x,Ve.x,nt),xt=jn.number(Le.y,Ve.y,nt),At=new Xo(ut,xt,Ve.angleTo(Le),Ie);return At._round(),!ne||Xg(l,At,de,ne,s)?At:void 0}me+=Ke}}function Oh(l,s,u,g,D,X,ne,de,me){const Ae=rf(g,X,ne),Ie=sf(g,D),Le=Ie*ne,Ve=0===l[0].x||l[0].x===me||0===l[0].y||l[0].y===me;return s-Le<s/4&&(s=Le+s/4),Yg(l,Ve?s/2*de%s:(Ie/2+2*X)*ne*de%s,s,Ae,u,Le,Ve,!1,me)}function Yg(l,s,u,g,D,X,ne,de,me){const Ae=X/2,Ie=Zg(l);let Le=0,Ve=s-u,Ke=[];for(let nt=0;nt<l.length-1;nt++){const ut=l[nt],xt=l[nt+1],At=ut.dist(xt),Rt=xt.angleTo(ut);for(;Ve+u<Le+At;){Ve+=u;const Tt=(Ve-Le)/At,Ft=jn.number(ut.x,xt.x,Tt),Ht=jn.number(ut.y,xt.y,Tt);if(Ft>=0&&Ft<me&&Ht>=0&&Ht<me&&Ve-Ae>=0&&Ve+Ae<=Ie){const Qt=new Xo(Ft,Ht,Rt,nt);Qt._round(),g&&!Xg(l,Qt,X,g,D)||Ke.push(Qt)}}Le+=At}return de||Ke.length||ne||(Ke=Yg(l,Le/2,u,g,D,X,ne,!0,me)),Ke}Tn("Anchor",Xo);const Su=Us;function Fp(l,s,u,g){const D=[],X=l.image,ne=X.pixelRatio,de=X.paddedRect.w-2*Su,me=X.paddedRect.h-2*Su;let Ae={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const Ie=X.stretchX||[[0,de]],Le=X.stretchY||[[0,me]],Ve=(Yt,$n)=>Yt+$n[1]-$n[0],Ke=Ie.reduce(Ve,0),nt=Le.reduce(Ve,0),ut=de-Ke,xt=me-nt;let At=0,Rt=Ke,Tt=0,Ft=nt,Ht=0,Qt=ut,mn=0,Gn=xt;if(X.content&&g){const Yt=X.content,$n=Yt[2]-Yt[0],Vn=Yt[3]-Yt[1];(X.textFitWidth||X.textFitHeight)&&(Ae=Cv(l)),At=Lh(Ie,0,Yt[0]),Tt=Lh(Le,0,Yt[1]),Rt=Lh(Ie,Yt[0],Yt[2]),Ft=Lh(Le,Yt[1],Yt[3]),Ht=Yt[0]-At,mn=Yt[1]-Tt,Qt=$n-Rt,Gn=Vn-Ft}const bn=Ae.x1,yn=Ae.y1,Un=Ae.x2-bn,Fn=Ae.y2-yn,wn=(Yt,$n,Vn,ri)=>{const Zi=Zo(Yt.stretch-At,Rt,Un,bn),gi=_c(Yt.fixed-Ht,Qt,Yt.stretch,Ke),tr=Zo($n.stretch-Tt,Ft,Fn,yn),ja=_c($n.fixed-mn,Gn,$n.stretch,nt),vs=Zo(Vn.stretch-At,Rt,Un,bn),Er=_c(Vn.fixed-Ht,Qt,Vn.stretch,Ke),Vs=Zo(ri.stretch-Tt,Ft,Fn,yn),js=_c(ri.fixed-mn,Gn,ri.stretch,nt),Hs=new e(Zi,tr),vr=new e(vs,tr),Zr=new e(vs,Vs),ks=new e(Zi,Vs),xs=new e(gi/ne,ja/ne),Gs=new e(Er/ne,js/ne),Ur=s*Math.PI/180;if(Ur){const Fi=Math.sin(Ur),Yi=Math.cos(Ur),nr=[Yi,-Fi,Fi,Yi];Hs._matMult(nr),vr._matMult(nr),ks._matMult(nr),Zr._matMult(nr)}const Vr=Yt.stretch+Yt.fixed,os=$n.stretch+$n.fixed;return{tl:Hs,tr:vr,bl:ks,br:Zr,tex:{x:X.paddedRect.x+Su+Vr,y:X.paddedRect.y+Su+os,w:Vn.stretch+Vn.fixed-Vr,h:ri.stretch+ri.fixed-os},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xs,pixelOffsetBR:Gs,minFontScaleX:Qt/ne/Un,minFontScaleY:Gn/ne/Fn,isSDF:u}};if(g&&(X.stretchX||X.stretchY)){const Yt=Rp(Ie,ut,Ke),$n=Rp(Le,xt,nt);for(let Vn=0;Vn<Yt.length-1;Vn++){const ri=Yt[Vn],Zi=Yt[Vn+1];for(let gi=0;gi<$n.length-1;gi++)D.push(wn(ri,$n[gi],Zi,$n[gi+1]))}}else D.push(wn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:de+1},{fixed:0,stretch:me+1}));return D}function Lh(l,s,u){let g=0;for(const D of l)g+=Math.max(s,Math.min(u,D[1]))-Math.max(s,Math.min(u,D[0]));return g}function Rp(l,s,u){const g=[{fixed:-Su,stretch:0}];for(const[D,X]of l){const ne=g[g.length-1];g.push({fixed:D-ne.stretch,stretch:ne.stretch}),g.push({fixed:D-ne.stretch,stretch:ne.stretch+(X-D)})}return g.push({fixed:s+Su,stretch:u}),g}function Zo(l,s,u,g){return l/s*u+g}function _c(l,s,u,g){return l-s*u/g}class Nh{constructor(s,u,g,D,X,ne,de,me,Ae,Ie){var Le;if(this.boxStartIndex=s.length,Ae){let Ve=ne.top,Ke=ne.bottom;const nt=ne.collisionPadding;nt&&(Ve-=nt[1],Ke+=nt[3]);let ut=Ke-Ve;ut>0&&(ut=Math.max(10,ut),this.circleDiameter=ut)}else{const Ve=null!==(Le=ne.image)&&void 0!==Le&&Le.content&&(ne.image.textFitWidth||ne.image.textFitHeight)?Cv(ne):{x1:ne.left,y1:ne.top,x2:ne.right,y2:ne.bottom};Ve.y1=Ve.y1*de-me[0],Ve.y2=Ve.y2*de+me[2],Ve.x1=Ve.x1*de-me[3],Ve.x2=Ve.x2*de+me[1];const Ke=ne.collisionPadding;if(Ke&&(Ve.x1-=Ke[0]*de,Ve.y1-=Ke[1]*de,Ve.x2+=Ke[2]*de,Ve.y2+=Ke[3]*de),Ie){const nt=new e(Ve.x1,Ve.y1),ut=new e(Ve.x2,Ve.y1),xt=new e(Ve.x1,Ve.y2),At=new e(Ve.x2,Ve.y2),Rt=Ie*Math.PI/180;nt._rotate(Rt),ut._rotate(Rt),xt._rotate(Rt),At._rotate(Rt),Ve.x1=Math.min(nt.x,ut.x,xt.x,At.x),Ve.x2=Math.max(nt.x,ut.x,xt.x,At.x),Ve.y1=Math.min(nt.y,ut.y,xt.y,At.y),Ve.y2=Math.max(nt.y,ut.y,xt.y,At.y)}s.emplaceBack(u.x,u.y,Ve.x1,Ve.y1,Ve.x2,Ve.y2,g,D,X)}this.boxEndIndex=s.length}}class Op{constructor(s=[],u=af){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const s=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:g}=this,D=u[s];for(;s>0;){const X=s-1>>1,ne=u[X];if(g(D,ne)>=0)break;u[s]=ne,s=X}u[s]=D}_down(s){const{data:u,compare:g}=this,D=this.length>>1,X=u[s];for(;s<D;){let ne=1+(s<<1),de=u[ne];const me=ne+1;if(me<this.length&&g(u[me],de)<0&&(ne=me,de=u[me]),g(de,X)>=0)break;u[s]=de,s=ne}u[s]=X}}function af(l,s){return l<s?-1:l>s?1:0}function Dv(l,s=1,u=!1){let g=1/0,D=1/0,X=-1/0,ne=-1/0;const de=l[0];for(let Ke=0;Ke<de.length;Ke++){const nt=de[Ke];(!Ke||nt.x<g)&&(g=nt.x),(!Ke||nt.y<D)&&(D=nt.y),(!Ke||nt.x>X)&&(X=nt.x),(!Ke||nt.y>ne)&&(ne=nt.y)}const me=Math.min(X-g,ne-D);let Ae=me/2;const Ie=new Op([],Tv);if(0===me)return new e(g,D);for(let Ke=g;Ke<X;Ke+=me)for(let nt=D;nt<ne;nt+=me)Ie.push(new Au(Ke+Ae,nt+Ae,Ae,l));let Le=function(Ke){let nt=0,ut=0,xt=0;const At=Ke[0];for(let Rt=0,Tt=At.length,Ft=Tt-1;Rt<Tt;Ft=Rt++){const Ht=At[Rt],Qt=At[Ft],mn=Ht.x*Qt.y-Qt.x*Ht.y;ut+=(Ht.x+Qt.x)*mn,xt+=(Ht.y+Qt.y)*mn,nt+=3*mn}return new Au(ut/nt,xt/nt,0,Ke)}(l),Ve=Ie.length;for(;Ie.length;){const Ke=Ie.pop();(Ke.d>Le.d||!Le.d)&&(Le=Ke,u&&console.log("found best %d after %d probes",Math.round(1e4*Ke.d)/1e4,Ve)),Ke.max-Le.d<=s||(Ae=Ke.h/2,Ie.push(new Au(Ke.p.x-Ae,Ke.p.y-Ae,Ae,l)),Ie.push(new Au(Ke.p.x+Ae,Ke.p.y-Ae,Ae,l)),Ie.push(new Au(Ke.p.x-Ae,Ke.p.y+Ae,Ae,l)),Ie.push(new Au(Ke.p.x+Ae,Ke.p.y+Ae,Ae,l)),Ve+=4)}return u&&(console.log(`num probes: ${Ve}`),console.log(`best distance: ${Le.d}`)),Le.p}function Tv(l,s){return s.max-l.max}function Au(l,s,u,g){this.p=new e(l,s),this.h=u,this.d=function(D,X){let ne=!1,de=1/0;for(let me=0;me<X.length;me++){const Ae=X[me];for(let Ie=0,Le=Ae.length,Ve=Le-1;Ie<Le;Ve=Ie++){const Ke=Ae[Ie],nt=Ae[Ve];Ke.y>D.y!=nt.y>D.y&&D.x<(nt.x-Ke.x)*(D.y-Ke.y)/(nt.y-Ke.y)+Ke.x&&(ne=!ne),de=Math.min(de,Td(D,Ke,nt))}}return(ne?1:-1)*Math.sqrt(de)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var ys;se.ar=void 0,(ys=se.ar||(se.ar={}))[ys.center=1]="center",ys[ys.left=2]="left",ys[ys.right=3]="right",ys[ys.top=4]="top",ys[ys.bottom=5]="bottom",ys[ys["top-left"]=6]="top-left",ys[ys["top-right"]=7]="top-right",ys[ys["bottom-left"]=8]="bottom-left",ys[ys["bottom-right"]=9]="bottom-right";const Nl=7,Lp=Number.POSITIVE_INFINITY;function Np(l,s){return s[1]!==Lp?function(u,g,D){let X=0,ne=0;switch(g=Math.abs(g),D=Math.abs(D),u){case"top-right":case"top-left":case"top":ne=D-Nl;break;case"bottom-right":case"bottom-left":case"bottom":ne=-D+Nl}switch(u){case"top-right":case"bottom-right":case"right":X=-g;break;case"top-left":case"bottom-left":case"left":X=g}return[X,ne]}(l,s[0],s[1]):function(u,g){let D=0,X=0;g<0&&(g=0);const ne=g/Math.SQRT2;switch(u){case"top-right":case"top-left":X=ne-Nl;break;case"bottom-right":case"bottom-left":X=-ne+Nl;break;case"bottom":X=-g+Nl;break;case"top":X=g-Nl}switch(u){case"top-right":case"bottom-right":D=-ne;break;case"top-left":case"bottom-left":D=ne;break;case"left":D=g;break;case"right":D=-g}return[D,X]}(l,s[0])}function Bh(l,s,u){var g;const D=l.layout,X=null===(g=D.get("text-variable-anchor-offset"))||void 0===g?void 0:g.evaluate(s,{},u);if(X){const de=X.values,me=[];for(let Ae=0;Ae<de.length;Ae+=2){const Ie=me[Ae]=de[Ae],Le=de[Ae+1].map(Ve=>Ve*zr);Ie.startsWith("top")?Le[1]-=Nl:Ie.startsWith("bottom")&&(Le[1]+=Nl),me[Ae+1]=Le}return new ts(me)}const ne=D.get("text-variable-anchor");if(ne){let de;de=void 0!==l._unevaluatedLayout.getValue("text-radial-offset")?[D.get("text-radial-offset").evaluate(s,{},u)*zr,Lp]:D.get("text-offset").evaluate(s,{},u).map(Ae=>Ae*zr);const me=[];for(const Ae of ne)me.push(Ae,Np(Ae,de));return new ts(me)}return null}function zh(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Bp(l,s,u,g,D,X,ne,de,me,Ae,Ie){let Le=X.textMaxSize.evaluate(s,{});void 0===Le&&(Le=ne);const Ve=l.layers[0].layout,Ke=Ve.get("icon-offset").evaluate(s,{},Ie),nt=Jg(u.horizontal),ut=ne/24,xt=l.tilePixelRatio*ut,At=l.tilePixelRatio*Le/24,Rt=l.tilePixelRatio*de,Tt=l.tilePixelRatio*Ve.get("symbol-spacing"),Ft=Ve.get("text-padding")*l.tilePixelRatio,Ht=function(Yt,$n,Vn,ri=1){const Zi=Yt.get("icon-padding").evaluate($n,{},Vn),gi=Zi&&Zi.values;return[gi[0]*ri,gi[1]*ri,gi[2]*ri,gi[3]*ri]}(Ve,s,Ie,l.tilePixelRatio),Qt=Ve.get("text-max-angle")/180*Math.PI,mn="viewport"!==Ve.get("text-rotation-alignment")&&"point"!==Ve.get("symbol-placement"),Gn="map"===Ve.get("icon-rotation-alignment")&&"point"!==Ve.get("symbol-placement"),bn=Ve.get("symbol-placement"),yn=Tt/2,Un=Ve.get("icon-text-fit");let Fn;g&&"none"!==Un&&(l.allowVerticalPlacement&&u.vertical&&(Fn=wp(g,u.vertical,Un,Ve.get("icon-text-fit-padding"),Ke,ut)),nt&&(g=wp(g,nt,Un,Ve.get("icon-text-fit-padding"),Ke,ut)));const wn=(Yt,$n)=>{$n.x<0||$n.x>=Br||$n.y<0||$n.y>=Br||function(Vn,ri,Zi,gi,tr,ja,vs,Er,Vs,js,Hs,vr,Zr,ks,xs,Gs,Ur,Vr,os,Fi,Yi,nr,ka,Dr,Gh){const Ha=Vn.addToLineVertexArray(ri,Zi);let Ga,io,$a,Yr,Ko=0,$h=0,em=0,tm=0,df=-1,Du=-1;const So={};let ff=$i("");if(Vn.allowVerticalPlacement&&gi.vertical){const _s=Er.layout.get("text-rotate").evaluate(Yi,{},Dr)+90;$a=new Nh(Vs,ri,js,Hs,vr,gi.vertical,Zr,ks,xs,_s),vs&&(Yr=new Nh(Vs,ri,js,Hs,vr,vs,Ur,Vr,xs,_s))}if(tr){const _s=Er.layout.get("icon-rotate").evaluate(Yi,{}),ga="none"!==Er.layout.get("icon-text-fit"),Jo=Fp(tr,_s,ka,ga),ma=vs?Fp(vs,_s,ka,ga):void 0;io=new Nh(Vs,ri,js,Hs,vr,tr,Ur,Vr,!1,_s),Ko=4*Jo.length;const bc=Vn.iconSizeData;let so=null;"source"===bc.kind?(so=[Co*Er.layout.get("icon-size").evaluate(Yi,{})],so[0]>Ol&&P(`${Vn.layerIds[0]}: Value for "icon-size" is >= ${Kd}. Reduce your "icon-size".`)):"composite"===bc.kind&&(so=[Co*nr.compositeIconSizes[0].evaluate(Yi,{},Dr),Co*nr.compositeIconSizes[1].evaluate(Yi,{},Dr)],(so[0]>Ol||so[1]>Ol)&&P(`${Vn.layerIds[0]}: Value for "icon-size" is >= ${Kd}. Reduce your "icon-size".`)),Vn.addSymbols(Vn.icon,Jo,so,Fi,os,Yi,se.ai.none,ri,Ha.lineStartIndex,Ha.lineLength,-1,Dr),df=Vn.icon.placedSymbolArray.length-1,ma&&($h=4*ma.length,Vn.addSymbols(Vn.icon,ma,so,Fi,os,Yi,se.ai.vertical,ri,Ha.lineStartIndex,Ha.lineLength,-1,Dr),Du=Vn.icon.placedSymbolArray.length-1)}const nm=Object.keys(gi.horizontal);for(const _s of nm){const ga=gi.horizontal[_s];if(!Ga){ff=$i(ga.text);const ma=Er.layout.get("text-rotate").evaluate(Yi,{},Dr);Ga=new Nh(Vs,ri,js,Hs,vr,ga,Zr,ks,xs,ma)}const Jo=1===ga.positionedLines.length;if(em+=Kg(Vn,ri,ga,ja,Er,xs,Yi,Gs,Ha,gi.vertical?se.ai.horizontal:se.ai.horizontalOnly,Jo?nm:[_s],So,df,nr,Dr),Jo)break}gi.vertical&&(tm+=Kg(Vn,ri,gi.vertical,ja,Er,xs,Yi,Gs,Ha,se.ai.vertical,["vertical"],So,Du,nr,Dr));const Ia=Ga?Ga.boxStartIndex:Vn.collisionBoxArray.length,Hp=Ga?Ga.boxEndIndex:Vn.collisionBoxArray.length,Mv=$a?$a.boxStartIndex:Vn.collisionBoxArray.length,im=$a?$a.boxEndIndex:Vn.collisionBoxArray.length,rm=io?io.boxStartIndex:Vn.collisionBoxArray.length,kv=io?io.boxEndIndex:Vn.collisionBoxArray.length,Iv=Yr?Yr.boxStartIndex:Vn.collisionBoxArray.length,Pv=Yr?Yr.boxEndIndex:Vn.collisionBoxArray.length;let ro=-1;const qh=(_s,ga)=>_s&&_s.circleDiameter?Math.max(_s.circleDiameter,ga):ga;ro=qh(Ga,ro),ro=qh($a,ro),ro=qh(io,ro),ro=qh(Yr,ro);const Fv=ro>-1?1:0;Fv&&(ro*=Gh/zr),Vn.glyphOffsetArray.length>=wu.MAX_GLYPHS&&P("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Yi.sortKey&&Vn.addToSortKeyRanges(Vn.symbolInstances.length,Yi.sortKey);const e1=Bh(Er,Yi,Dr),[Wh,Xh]=function(_s,ga){const Jo=_s.length,ma=ga?.values;if(ma?.length>0)for(let bc=0;bc<ma.length;bc+=2){const so=ma[bc+1];_s.emplaceBack(se.ar[ma[bc]],so[0],so[1])}return[Jo,_s.length]}(Vn.textAnchorOffsets,e1);Vn.symbolInstances.emplaceBack(ri.x,ri.y,So.right>=0?So.right:-1,So.center>=0?So.center:-1,So.left>=0?So.left:-1,So.vertical||-1,df,Du,ff,Ia,Hp,Mv,im,rm,kv,Iv,Pv,js,em,tm,Ko,$h,Fv,0,Zr,ro,Wh,Xh)}(l,$n,Yt,u,g,D,Fn,l.layers[0],l.collisionBoxArray,s.index,s.sourceLayerIndex,l.index,xt,[Ft,Ft,Ft,Ft],mn,me,Rt,Ht,Gn,Ke,s,X,Ae,Ie,ne)};if("line"===bn)for(const Yt of Wg(s.geometry,0,0,Br,Br)){const $n=Oh(Yt,Tt,Qt,u.vertical||nt,g,24,At,l.overscaling,Br);for(const Vn of $n)nt&&zp(l,nt.text,yn,Vn)||wn(Yt,Vn)}else if("line-center"===bn){for(const Yt of s.geometry)if(Yt.length>1){const $n=Ev(Yt,Qt,u.vertical||nt,g,24,At);$n&&wn(Yt,$n)}}else if("Polygon"===s.type)for(const Yt of Xu(s.geometry,0)){const $n=Dv(Yt,16);wn(Yt[0],new Xo($n.x,$n.y,0))}else if("LineString"===s.type)for(const Yt of s.geometry)wn(Yt,new Xo(Yt[0].x,Yt[0].y,0));else if("Point"===s.type)for(const Yt of s.geometry)for(const $n of Yt)wn([$n],new Xo($n.x,$n.y,0))}function Kg(l,s,u,g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt){const ut=function(Rt,Tt,Ft,Ht,Qt,mn,Gn,bn){const yn=Ht.layout.get("text-rotate").evaluate(mn,{})*Math.PI/180,Un=[];for(const Fn of Tt.positionedLines)for(const wn of Fn.positionedGlyphs){if(!wn.rect)continue;const Yt=wn.rect||{};let $n=Ah+1,Vn=!0,ri=1,Zi=0;const gi=(Qt||bn)&&wn.vertical,tr=wn.metrics.advance*wn.scale/2;if(bn&&Tt.verticalizable&&(Zi=Fn.lineOffset/2-(wn.imageName?-(zr-wn.metrics.width*wn.scale)/2:(wn.scale-1)*zr)),wn.imageName){const Fi=Gn[wn.imageName];Vn=Fi.sdf,ri=Fi.pixelRatio,$n=Us/ri}const ja=Qt?[wn.x+tr,wn.y]:[0,0];let vs=Qt?[0,0]:[wn.x+tr+Ft[0],wn.y+Ft[1]-Zi],Er=[0,0];gi&&(Er=vs,vs=[0,0]);const Vs=wn.metrics.isDoubleResolution?2:1,js=(wn.metrics.left-$n)*wn.scale-tr+vs[0],Hs=(-wn.metrics.top-$n)*wn.scale+vs[1],vr=js+Yt.w/Vs*wn.scale/ri,Zr=Hs+Yt.h/Vs*wn.scale/ri,ks=new e(js,Hs),xs=new e(vr,Hs),Gs=new e(js,Zr),Ur=new e(vr,Zr);if(gi){const Fi=new e(-tr,tr-Th),Yi=-Math.PI/2,nr=zr/2-tr,ka=new e(5-Th-nr,-(wn.imageName?nr:0)),Dr=new e(...Er);ks._rotateAround(Yi,Fi)._add(ka)._add(Dr),xs._rotateAround(Yi,Fi)._add(ka)._add(Dr),Gs._rotateAround(Yi,Fi)._add(ka)._add(Dr),Ur._rotateAround(Yi,Fi)._add(ka)._add(Dr)}if(yn){const Fi=Math.sin(yn),Yi=Math.cos(yn),nr=[Yi,-Fi,Fi,Yi];ks._matMult(nr),xs._matMult(nr),Gs._matMult(nr),Ur._matMult(nr)}const Vr=new e(0,0),os=new e(0,0);Un.push({tl:ks,tr:xs,bl:Gs,br:Ur,tex:Yt,writingMode:Tt.writingMode,glyphOffset:ja,sectionIndex:wn.sectionIndex,isSDF:Vn,pixelOffsetTL:Vr,pixelOffsetBR:os,minFontScaleX:0,minFontScaleY:0})}return Un}(0,u,de,D,X,ne,g,l.allowVerticalPlacement),xt=l.textSizeData;let At=null;"source"===xt.kind?(At=[Co*D.layout.get("text-size").evaluate(ne,{})],At[0]>Ol&&P(`${l.layerIds[0]}: Value for "text-size" is >= ${Kd}. Reduce your "text-size".`)):"composite"===xt.kind&&(At=[Co*Ke.compositeTextSizes[0].evaluate(ne,{},nt),Co*Ke.compositeTextSizes[1].evaluate(ne,{},nt)],(At[0]>Ol||At[1]>Ol)&&P(`${l.layerIds[0]}: Value for "text-size" is >= ${Kd}. Reduce your "text-size".`)),l.addSymbols(l.text,ut,At,de,X,ne,Ae,s,me.lineStartIndex,me.lineLength,Ve,nt);for(const Rt of Ie)Le[Rt]=l.text.placedSymbolArray.length-1;return 4*ut.length}function Jg(l){for(const s in l)return l[s];return null}function zp(l,s,u,g){const D=l.compareText;if(s in D){const X=D[s];for(let ne=X.length-1;ne>=0;ne--)if(g.dist(X[ne])<u)return!0}else D[s]=[];return D[s].push(g),!1}const Up=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Yo{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(s,0,2);if(219!==u)throw new Error("Data does not appear to be in a KDBush format.");const D=g>>4;if(1!==D)throw new Error(`Got v${D} data when expected v1.`);const X=Up[15&g];if(!X)throw new Error("Unrecognized array type.");const[ne]=new Uint16Array(s,2,1),[de]=new Uint32Array(s,4,1);return new Yo(de,ne,X,s)}constructor(s,u=64,g=Float64Array,D){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const X=Up.indexOf(this.ArrayType),ne=2*s*this.ArrayType.BYTES_PER_ELEMENT,de=s*this.IndexArrayType.BYTES_PER_ELEMENT,me=(8-de%8)%8;if(X<0)throw new Error(`Unexpected typed array class: ${g}.`);D&&D instanceof ArrayBuffer?(this.data=D,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+de+me,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+ne+de+me),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+de+me,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+X]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=s,this.coords[this._pos++]=u,g}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return lf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,g,D){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:X,coords:ne,nodeSize:de}=this,me=[0,X.length-1,0],Ae=[];for(;me.length;){const Ie=me.pop()||0,Le=me.pop()||0,Ve=me.pop()||0;if(Le-Ve<=de){for(let xt=Ve;xt<=Le;xt++){const At=ne[2*xt],Rt=ne[2*xt+1];At>=s&&At<=g&&Rt>=u&&Rt<=D&&Ae.push(X[xt])}continue}const Ke=Ve+Le>>1,nt=ne[2*Ke],ut=ne[2*Ke+1];nt>=s&&nt<=g&&ut>=u&&ut<=D&&Ae.push(X[Ke]),(0===Ie?s<=nt:u<=ut)&&(me.push(Ve),me.push(Ke-1),me.push(1-Ie)),(0===Ie?g>=nt:D>=ut)&&(me.push(Ke+1),me.push(Le),me.push(1-Ie))}return Ae}within(s,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:D,coords:X,nodeSize:ne}=this,de=[0,D.length-1,0],me=[],Ae=g*g;for(;de.length;){const Ie=de.pop()||0,Le=de.pop()||0,Ve=de.pop()||0;if(Le-Ve<=ne){for(let xt=Ve;xt<=Le;xt++)Vh(X[2*xt],X[2*xt+1],s,u)<=Ae&&me.push(D[xt]);continue}const Ke=Ve+Le>>1,nt=X[2*Ke],ut=X[2*Ke+1];Vh(nt,ut,s,u)<=Ae&&me.push(D[Ke]),(0===Ie?s-g<=nt:u-g<=ut)&&(de.push(Ve),de.push(Ke-1),de.push(1-Ie)),(0===Ie?s+g>=nt:u+g>=ut)&&(de.push(Ke+1),de.push(Le),de.push(1-Ie))}return me}}function lf(l,s,u,g,D,X){if(D-g<=u)return;const ne=g+D>>1;Vp(l,s,ne,g,D,X),lf(l,s,u,g,ne-1,1-X),lf(l,s,u,ne+1,D,1-X)}function Vp(l,s,u,g,D,X){for(;D>g;){if(D-g>600){const Ae=D-g+1,Ie=u-g+1,Le=Math.log(Ae),Ve=.5*Math.exp(2*Le/3),Ke=.5*Math.sqrt(Le*Ve*(Ae-Ve)/Ae)*(Ie-Ae/2<0?-1:1);Vp(l,s,u,Math.max(g,Math.floor(u-Ie*Ve/Ae+Ke)),Math.min(D,Math.floor(u+(Ae-Ie)*Ve/Ae+Ke)),X)}const ne=s[2*u+X];let de=g,me=D;for(Uh(l,s,g,u),s[2*D+X]>ne&&Uh(l,s,g,D);de<me;){for(Uh(l,s,de,me),de++,me--;s[2*de+X]<ne;)de++;for(;s[2*me+X]>ne;)me--}s[2*g+X]===ne?Uh(l,s,g,me):(me++,Uh(l,s,me,D)),me<=u&&(g=me+1),u<=me&&(D=me-1)}}function Uh(l,s,u,g){Qg(l,u,g),Qg(s,2*u,2*g),Qg(s,2*u+1,2*g+1)}function Qg(l,s,u){const g=l[s];l[s]=l[u],l[u]=g}function Vh(l,s,u,g){const D=l-u,X=s-g;return D*D+X*X}var jp;se.bf=void 0,(jp=se.bf||(se.bf={})).create="create",jp.load="load",jp.fullLoad="fullLoad";let jh=null,Eu=[];const cf=1e3/60,Hh="loadTime",uf="fullLoadTime",hf={mark(l){performance.mark(l)},frame(l){const s=l;null!=jh&&Eu.push(s-jh),jh=s},clearMetrics(){jh=null,Eu=[],performance.clearMeasures(Hh),performance.clearMeasures(uf);for(const l in se.bf)performance.clearMarks(se.bf[l])},getPerformanceMetrics(){performance.measure(Hh,se.bf.create,se.bf.load),performance.measure(uf,se.bf.create,se.bf.fullLoad);const l=performance.getEntriesByName(Hh)[0].duration,s=performance.getEntriesByName(uf)[0].duration,u=Eu.length,g=1/(Eu.reduce((X,ne)=>X+ne,0)/u/1e3),D=Eu.filter(X=>X>cf).reduce((X,ne)=>X+(ne-cf)/cf,0);return{loadTime:l,fullLoadTime:s,fps:g,percentDroppedFrames:D/(u+D)*100,totalFrames:u}}};se.$=class extends ot{},se.A=fa,se.B=vo,se.C=function(l){if(null==j){const s=l.navigator?l.navigator.userAgent:null;j=!!l.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return j},se.D=Hn,se.E=Te,se.F=class{constructor(l,s){var u,D;this.target=l,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Av(()=>this.process()),this.subscription=(D=u=>this.receive(u),(u=this.target).addEventListener("message",D,!1),{unsubscribe:()=>{u.removeEventListener("message",D,!1)}}),this.globalScope=I(self)?l:window}registerMessageHandler(l,s){this.messageHandlers[l]=s}sendAsync(l,s){return new Promise((u,g)=>{const D=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[D]={resolve:u,reject:g},s&&s.signal.addEventListener("abort",()=>{delete this.resolveRejects[D];const de={id:D,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(de)},{once:!0});const X=[],ne=Object.assign(Object.assign({},l),{id:D,sourceMapId:this.mapId,origin:location.origin,data:Lo(l.data,X)});this.target.postMessage(ne,{transfer:X})})}receive(l){const s=l.data,u=s.id;if(!("file://"!==s.origin&&"file://"!==location.origin&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if("<cancel>"===s.type){delete this.tasks[u];const g=this.abortControllers[u];return delete this.abortControllers[u],void(g&&g.abort())}if(I(self)||s.mustQueue)return this.tasks[u]=s,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,s)}}process(){if(0===this.taskQueue.length)return;const l=this.taskQueue.shift(),s=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(l,s)}processTask(l,s){return y(this,void 0,void 0,function*(){if("<response>"===s.type){const D=this.resolveRejects[l];return delete this.resolveRejects[l],D?void(s.error?D.reject(Ca(s.error)):D.resolve(Ca(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=Ca(s.data),g=new AbortController;this.abortControllers[l]=g;try{const D=yield this.messageHandlers[s.type](s.sourceMapId,u,g);this.completeTask(l,null,D)}catch(D){this.completeTask(l,D)}})}completeTask(l,s,u){const g=[];delete this.abortControllers[l];const D={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Lo(s):null,data:Lo(u,g)};this.target.postMessage(D,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},se.G=z,se.H=function(){var l=new fa(16);return fa!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},se.I=Eh,se.J=function(l,s,u){var g,D,X,ne,de,me,Ae,Ie,Le,Ve,Ke,nt,ut=u[0],xt=u[1],At=u[2];return s===l?(l[12]=s[0]*ut+s[4]*xt+s[8]*At+s[12],l[13]=s[1]*ut+s[5]*xt+s[9]*At+s[13],l[14]=s[2]*ut+s[6]*xt+s[10]*At+s[14],l[15]=s[3]*ut+s[7]*xt+s[11]*At+s[15]):(D=s[1],X=s[2],ne=s[3],de=s[4],me=s[5],Ae=s[6],Ie=s[7],Le=s[8],Ve=s[9],Ke=s[10],nt=s[11],l[0]=g=s[0],l[1]=D,l[2]=X,l[3]=ne,l[4]=de,l[5]=me,l[6]=Ae,l[7]=Ie,l[8]=Le,l[9]=Ve,l[10]=Ke,l[11]=nt,l[12]=g*ut+de*xt+Le*At+s[12],l[13]=D*ut+me*xt+Ve*At+s[13],l[14]=X*ut+Ae*xt+Ke*At+s[14],l[15]=ne*ut+Ie*xt+nt*At+s[15]),l},se.K=function(l,s,u){var g=u[0],D=u[1],X=u[2];return l[0]=s[0]*g,l[1]=s[1]*g,l[2]=s[2]*g,l[3]=s[3]*g,l[4]=s[4]*D,l[5]=s[5]*D,l[6]=s[6]*D,l[7]=s[7]*D,l[8]=s[8]*X,l[9]=s[9]*X,l[10]=s[10]*X,l[11]=s[11]*X,l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},se.L=hc,se.M=function(l,s){const u={};for(let g=0;g<s.length;g++){const D=s[g];D in l&&(u[D]=l[D])}return u},se.N=Wo,se.O=jg,se.P=e,se.Q=Hg,se.R=pa,se.S=Qs,se.T=El,se.U=c,se.V=$,se.W=p,se.X=Br,se.Y=ke,se.Z=nf,se._=y,se.a=K,se.a$=function(l,s){var u=l[0],g=l[1],D=l[2],X=l[3],ne=l[4],de=l[5],me=l[6],Ae=l[7],Ie=l[8],Le=l[9],Ve=l[10],Ke=l[11],nt=l[12],ut=l[13],xt=l[14],At=l[15],Rt=s[0],Tt=s[1],Ft=s[2],Ht=s[3],Qt=s[4],mn=s[5],Gn=s[6],bn=s[7],yn=s[8],Un=s[9],Fn=s[10],wn=s[11],Yt=s[12],$n=s[13],Vn=s[14],ri=s[15];return Math.abs(u-Rt)<=Xi*Math.max(1,Math.abs(u),Math.abs(Rt))&&Math.abs(g-Tt)<=Xi*Math.max(1,Math.abs(g),Math.abs(Tt))&&Math.abs(D-Ft)<=Xi*Math.max(1,Math.abs(D),Math.abs(Ft))&&Math.abs(X-Ht)<=Xi*Math.max(1,Math.abs(X),Math.abs(Ht))&&Math.abs(ne-Qt)<=Xi*Math.max(1,Math.abs(ne),Math.abs(Qt))&&Math.abs(de-mn)<=Xi*Math.max(1,Math.abs(de),Math.abs(mn))&&Math.abs(me-Gn)<=Xi*Math.max(1,Math.abs(me),Math.abs(Gn))&&Math.abs(Ae-bn)<=Xi*Math.max(1,Math.abs(Ae),Math.abs(bn))&&Math.abs(Ie-yn)<=Xi*Math.max(1,Math.abs(Ie),Math.abs(yn))&&Math.abs(Le-Un)<=Xi*Math.max(1,Math.abs(Le),Math.abs(Un))&&Math.abs(Ve-Fn)<=Xi*Math.max(1,Math.abs(Ve),Math.abs(Fn))&&Math.abs(Ke-wn)<=Xi*Math.max(1,Math.abs(Ke),Math.abs(wn))&&Math.abs(nt-Yt)<=Xi*Math.max(1,Math.abs(nt),Math.abs(Yt))&&Math.abs(ut-$n)<=Xi*Math.max(1,Math.abs(ut),Math.abs($n))&&Math.abs(xt-Vn)<=Xi*Math.max(1,Math.abs(xt),Math.abs(Vn))&&Math.abs(At-ri)<=Xi*Math.max(1,Math.abs(At),Math.abs(ri))},se.a0=Nr,se.a1=Rh,se.a2=He,se.a3=l=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(u=>{s.onloadstart=()=>{u(s)};for(const g of l){const D=window.document.createElement("source");J(g)||(s.crossOrigin="Anonymous"),D.src=g,s.appendChild(D)}})},se.a4=function(){return M++},se.a5=di,se.a6=wu,se.a7=Ss,se.a8=Ml,se.a9=Di,se.aA=function(l){l=l.slice();const s=Object.create(null);for(let u=0;u<l.length;u++)s[l[u].id]=l[u];for(let u=0;u<l.length;u++)"ref"in l[u]&&(l[u]=De(l[u],s[l[u].ref]));return l},se.aB=function(l){if("custom"===l.type)return new Sv(l);switch(l.type){case"background":return new Ug(l);case"circle":return new Jy(l);case"fill":return new Gb(l);case"fill-extrusion":return new Ks(l);case"heatmap":return new cg(l);case"hillshade":return new Qy(l);case"line":return new $b(l);case"raster":return new Ll(l);case"symbol":return new Ph(l)}},se.aC=q,se.aD=function(l,s){if(!l)return[{command:"setStyle",args:[s]}];let u=[];try{if(!xe(l.version,s.version))return[{command:"setStyle",args:[s]}];xe(l.center,s.center)||u.push({command:"setCenter",args:[s.center]}),xe(l.zoom,s.zoom)||u.push({command:"setZoom",args:[s.zoom]}),xe(l.bearing,s.bearing)||u.push({command:"setBearing",args:[s.bearing]}),xe(l.pitch,s.pitch)||u.push({command:"setPitch",args:[s.pitch]}),xe(l.sprite,s.sprite)||u.push({command:"setSprite",args:[s.sprite]}),xe(l.glyphs,s.glyphs)||u.push({command:"setGlyphs",args:[s.glyphs]}),xe(l.transition,s.transition)||u.push({command:"setTransition",args:[s.transition]}),xe(l.light,s.light)||u.push({command:"setLight",args:[s.light]}),xe(l.terrain,s.terrain)||u.push({command:"setTerrain",args:[s.terrain]}),xe(l.sky,s.sky)||u.push({command:"setSky",args:[s.sky]}),xe(l.projection,s.projection)||u.push({command:"setProjection",args:[s.projection]});const g={},D=[];!function(ne,de,me,Ae){let Ie;for(Ie in de=de||{},ne=ne||{})Object.prototype.hasOwnProperty.call(ne,Ie)&&(Object.prototype.hasOwnProperty.call(de,Ie)||Ne(Ie,me,Ae));for(Ie in de)Object.prototype.hasOwnProperty.call(de,Ie)&&(Object.prototype.hasOwnProperty.call(ne,Ie)?xe(ne[Ie],de[Ie])||("geojson"===ne[Ie].type&&"geojson"===de[Ie].type&&Xe(ne,de,Ie)?Ce(me,{command:"setGeoJSONSourceData",args:[Ie,de[Ie].data]}):We(Ie,de,me,Ae)):Me(Ie,de,me))}(l.sources,s.sources,D,g);const X=[];l.layers&&l.layers.forEach(ne=>{"source"in ne&&g[ne.source]?u.push({command:"removeLayer",args:[ne.id]}):X.push(ne)}),u=u.concat(D),function(ne,de,me){de=de||[];const Ae=(ne=ne||[]).map(Ye),Ie=de.map(Ye),Le=ne.reduce(Je,{}),Ve=de.reduce(Je,{}),Ke=Ae.slice(),nt=Object.create(null);let ut,xt,At,Rt,Tt;for(let Ft=0,Ht=0;Ft<Ae.length;Ft++)ut=Ae[Ft],Object.prototype.hasOwnProperty.call(Ve,ut)?Ht++:(Ce(me,{command:"removeLayer",args:[ut]}),Ke.splice(Ke.indexOf(ut,Ht),1));for(let Ft=0,Ht=0;Ft<Ie.length;Ft++)ut=Ie[Ie.length-1-Ft],Ke[Ke.length-1-Ft]!==ut&&(Object.prototype.hasOwnProperty.call(Le,ut)?(Ce(me,{command:"removeLayer",args:[ut]}),Ke.splice(Ke.lastIndexOf(ut,Ke.length-Ht),1)):Ht++,Rt=Ke[Ke.length-Ft],Ce(me,{command:"addLayer",args:[Ve[ut],Rt]}),Ke.splice(Ke.length-Ft,0,ut),nt[ut]=!0);for(let Ft=0;Ft<Ie.length;Ft++)if(ut=Ie[Ft],xt=Le[ut],At=Ve[ut],!nt[ut]&&!xe(xt,At))if(xe(xt.source,At.source)&&xe(xt["source-layer"],At["source-layer"])&&xe(xt.type,At.type)){for(Tt in Qe(xt.layout,At.layout,me,ut,null,"setLayoutProperty"),Qe(xt.paint,At.paint,me,ut,null,"setPaintProperty"),xe(xt.filter,At.filter)||Ce(me,{command:"setFilter",args:[ut,At.filter]}),xe(xt.minzoom,At.minzoom)&&xe(xt.maxzoom,At.maxzoom)||Ce(me,{command:"setLayerZoomRange",args:[ut,At.minzoom,At.maxzoom]}),xt)Object.prototype.hasOwnProperty.call(xt,Tt)&&"layout"!==Tt&&"paint"!==Tt&&"filter"!==Tt&&"metadata"!==Tt&&"minzoom"!==Tt&&"maxzoom"!==Tt&&(0===Tt.indexOf("paint.")?Qe(xt[Tt],At[Tt],me,ut,Tt.slice(6),"setPaintProperty"):xe(xt[Tt],At[Tt])||Ce(me,{command:"setLayerProperty",args:[ut,Tt,At[Tt]]}));for(Tt in At)Object.prototype.hasOwnProperty.call(At,Tt)&&!Object.prototype.hasOwnProperty.call(xt,Tt)&&"layout"!==Tt&&"paint"!==Tt&&"filter"!==Tt&&"metadata"!==Tt&&"minzoom"!==Tt&&"maxzoom"!==Tt&&(0===Tt.indexOf("paint.")?Qe(xt[Tt],At[Tt],me,ut,Tt.slice(6),"setPaintProperty"):xe(xt[Tt],At[Tt])||Ce(me,{command:"setLayerProperty",args:[ut,Tt,At[Tt]]}))}else Ce(me,{command:"removeLayer",args:[ut]}),Rt=Ke[Ke.lastIndexOf(ut)+1],Ce(me,{command:"addLayer",args:[At,Rt]})}(X,s.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:"setStyle",args:[s]}]}return u},se.aE=function(l){const s=[],u=l.id;return void 0===u&&s.push({message:`layers.${u}: missing required property "id"`}),void 0===l.render&&s.push({message:`layers.${u}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},se.aF=function l(s,u){if(Array.isArray(s)){if(!Array.isArray(u)||s.length!==u.length)return!1;for(let g=0;g<s.length;g++)if(!l(s[g],u[g]))return!1;return!0}if("object"==typeof s&&null!==s&&null!==u){if("object"!=typeof u||Object.keys(s).length!==Object.keys(u).length)return!1;for(const g in s)if(!l(s[g],u[g]))return!1;return!0}return s===u},se.aG=A,se.aH=b,se.aI=class extends Tl{constructor(l,s){super(l,s),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},se.aJ=Uo,se.aK=class extends Tl{constructor(l,s){super(l,s),this.current=Wy}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let s=1;s<16;s++)if(l[s]!==this.current[s]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},se.aL=ha,se.aM=eg,se.aN=bi,se.aO=class extends Tl{constructor(l,s){super(l,s),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},se.aP=class extends Tl{constructor(l,s){super(l,s),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},se.aQ=function(l,s,u,g,D,X,ne){var de=1/(s-u),me=1/(g-D),Ae=1/(X-ne);return l[0]=-2*de,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*me,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*Ae,l[11]=0,l[12]=(s+u)*de,l[13]=(D+g)*me,l[14]=(ne+X)*Ae,l[15]=1,l},se.aR=Ky,se.aS=class extends Kt{},se.aT=fv,se.aU=class extends Sn{},se.aV=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},se.aW=hp,se.aX=Dl,se.aY=Wr,se.aZ=class extends xn{},se.a_=function(l,s){return l[0]===s[0]&&l[1]===s[1]&&l[2]===s[2]&&l[3]===s[3]&&l[4]===s[4]&&l[5]===s[5]&&l[6]===s[6]&&l[7]===s[7]&&l[8]===s[8]&&l[9]===s[9]&&l[10]===s[10]&&l[11]===s[11]&&l[12]===s[12]&&l[13]===s[13]&&l[14]===s[14]&&l[15]===s[15]},se.aa=Ip,se.ab=function(l){const s={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,D,X)=>{const ne=D||X;return s[g]=!ne||ne.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s},se.ac=function(l,s){const u=[];for(const g in l)g in s||u.push(g);return u},se.ad=W,se.ae=function(l,s,u){var g=Math.sin(u),D=Math.cos(u),X=s[0],ne=s[1],de=s[2],me=s[3],Ae=s[4],Ie=s[5],Le=s[6],Ve=s[7];return s!==l&&(l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=X*D+Ae*g,l[1]=ne*D+Ie*g,l[2]=de*D+Le*g,l[3]=me*D+Ve*g,l[4]=Ae*D-X*g,l[5]=Ie*D-ne*g,l[6]=Le*D-de*g,l[7]=Ve*D-me*g,l},se.af=function(l){var s=new fa(16);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],s},se.ag=gh,se.ah=function(l,s){let u=0,g=0;if("constant"===l.kind)g=l.layoutSize;else if("source"!==l.kind){const{interpolationType:D,minZoom:X,maxZoom:ne}=l,de=D?W(Xn.interpolationFactor(D,s,X,ne),0,1):0;"camera"===l.kind?g=jn.number(l.minSize,l.maxSize,de):u=de}return{uSizeT:u,uSize:g}},se.aj=function(l,{uSize:s,uSizeT:u},{lowerSize:g,upperSize:D}){return"source"===l.kind?g/Co:"composite"===l.kind?jn.number(g/Co,D/Co,u):s},se.ak=Lg,se.al=function(l,s,u,g){const D=s.y-l.y,X=s.x-l.x,ne=g.y-u.y,de=g.x-u.x,me=ne*X-de*D;if(0===me)return null;const Ae=(de*(l.y-u.y)-ne*(l.x-u.x))/me;return new e(l.x+Ae*X,l.y+Ae*D)},se.am=Wg,se.an=ng,se.ao=Md,se.ap=function(l){let s=1/0,u=1/0,g=-1/0,D=-1/0;for(const X of l)s=Math.min(s,X.x),u=Math.min(u,X.y),g=Math.max(g,X.x),D=Math.max(D,X.y);return[s,u,g,D]},se.aq=zr,se.as=Og,se.at=function(l,s){var u=s[0],g=s[1],D=s[2],X=s[3],ne=s[4],de=s[5],me=s[6],Ae=s[7],Ie=s[8],Le=s[9],Ve=s[10],Ke=s[11],nt=s[12],ut=s[13],xt=s[14],At=s[15],Rt=u*de-g*ne,Tt=u*me-D*ne,Ft=u*Ae-X*ne,Ht=g*me-D*de,Qt=g*Ae-X*de,mn=D*Ae-X*me,Gn=Ie*ut-Le*nt,bn=Ie*xt-Ve*nt,yn=Ie*At-Ke*nt,Un=Le*xt-Ve*ut,Fn=Le*At-Ke*ut,wn=Ve*At-Ke*xt,Yt=Rt*wn-Tt*Fn+Ft*Un+Ht*yn-Qt*bn+mn*Gn;return Yt?(l[0]=(de*wn-me*Fn+Ae*Un)*(Yt=1/Yt),l[1]=(D*Fn-g*wn-X*Un)*Yt,l[2]=(ut*mn-xt*Qt+At*Ht)*Yt,l[3]=(Ve*Qt-Le*mn-Ke*Ht)*Yt,l[4]=(me*yn-ne*wn-Ae*bn)*Yt,l[5]=(u*wn-D*yn+X*bn)*Yt,l[6]=(xt*Ft-nt*mn-At*Tt)*Yt,l[7]=(Ie*mn-Ve*Ft+Ke*Tt)*Yt,l[8]=(ne*Fn-de*yn+Ae*Gn)*Yt,l[9]=(g*yn-u*Fn-X*Gn)*Yt,l[10]=(nt*Qt-ut*Ft+At*Rt)*Yt,l[11]=(Le*Ft-Ie*Qt-Ke*Rt)*Yt,l[12]=(de*bn-ne*Un-me*Gn)*Yt,l[13]=(u*Un-g*bn+D*Gn)*Yt,l[14]=(ut*Tt-nt*Ht-xt*Rt)*Yt,l[15]=(Ie*Ht-Le*Tt+Ve*Rt)*Yt,l):null},se.au=zh,se.av=Yd,se.aw=Yo,se.ax=function(){const l={},s=_e.$version;for(const u in _e.$root){const g=_e.$root[u];if(g.required){let D=null;D="version"===u?s:"array"===g.type?[]:{},null!=D&&(l[u]=D)}}return l},se.ay=Sa,se.az=S,se.b=E,se.b0=function(l,s){return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[4]=s[4],l[5]=s[5],l[6]=s[6],l[7]=s[7],l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},se.b1=function(l,s,u){return l[0]=s[0]*u[0],l[1]=s[1]*u[1],l[2]=s[2]*u[2],l[3]=s[3]*u[3],l},se.b2=function(l,s){return l[0]*s[0]+l[1]*s[1]+l[2]*s[2]+l[3]*s[3]},se.b3=N,se.b4=Mp,se.b5=Dp,se.b6=function(l,s,u,g,D){var X,ne=1/Math.tan(s/2);return l[0]=ne/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=ne,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=D&&D!==1/0?(l[10]=(D+g)*(X=1/(g-D)),l[14]=2*D*g*X):(l[10]=-1,l[14]=-2*g),l},se.b7=function(l,s,u){var g=Math.sin(u),D=Math.cos(u),X=s[4],ne=s[5],de=s[6],me=s[7],Ae=s[8],Ie=s[9],Le=s[10],Ve=s[11];return s!==l&&(l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[4]=X*D+Ae*g,l[5]=ne*D+Ie*g,l[6]=de*D+Le*g,l[7]=me*D+Ve*g,l[8]=Ae*D-X*g,l[9]=Ie*D-ne*g,l[10]=Le*D-de*g,l[11]=Ve*D-me*g,l},se.b8=ae,se.b9=oe,se.bA=function(l){return l.message===R},se.bB=Ro,se.bC=Aa,se.ba=function(l){return l*Math.PI/180},se.bb=function(l,s){return l[0]=s[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=s[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},se.bc=class extends tt{},se.bd=Ep,se.be=hf,se.bg=L,se.bh=function(l,s){K.REGISTERED_PROTOCOLS[l]=s},se.bi=function(l){delete K.REGISTERED_PROTOCOLS[l]},se.bj=function(l,s){const u={};for(let D=0;D<l.length;D++){const X=s&&s[l[D].id]||jr(l[D]);s&&(s[l[D].id]=X);let ne=u[X];ne||(ne=u[X]=[]),ne.push(l[D])}const g=[];for(const D in u)g.push(u[D]);return g},se.bk=Tn,se.bl=kp,se.bm=Gg,se.bn=Dh,se.bo=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Br/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const s=l.bucket.layers[0],u=s.layout,g=s._unevaluatedLayout._values,D={layoutIconSize:g["icon-size"].possiblyEvaluate(new Di(l.bucket.zoom+1),l.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Di(l.bucket.zoom+1),l.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Di(18))};if("composite"===l.bucket.textSizeData.kind){const{minZoom:Ae,maxZoom:Ie}=l.bucket.textSizeData;D.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Di(Ae),l.canonical),g["text-size"].possiblyEvaluate(new Di(Ie),l.canonical)]}if("composite"===l.bucket.iconSizeData.kind){const{minZoom:Ae,maxZoom:Ie}=l.bucket.iconSizeData;D.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Di(Ae),l.canonical),g["icon-size"].possiblyEvaluate(new Di(Ie),l.canonical)]}const X=u.get("text-line-height")*zr,ne="viewport"!==u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),de=u.get("text-keep-upright"),me=u.get("text-size");for(const Ae of l.bucket.features){const Ie=u.get("text-font").evaluate(Ae,{},l.canonical).join(","),Le=me.evaluate(Ae,{},l.canonical),Ve=D.layoutTextSize.evaluate(Ae,{},l.canonical),Ke=D.layoutIconSize.evaluate(Ae,{},l.canonical),nt={horizontal:{},vertical:void 0},ut=Ae.text;let xt,At=[0,0];if(ut){const Ft=ut.toString(),Ht=u.get("text-letter-spacing").evaluate(Ae,{},l.canonical)*zr,Qt=rc(Ft)?Ht:0,mn=u.get("text-anchor").evaluate(Ae,{},l.canonical),Gn=Bh(s,Ae,l.canonical);if(!Gn){const Fn=u.get("text-radial-offset").evaluate(Ae,{},l.canonical);At=Fn?Np(mn,[Fn*zr,Lp]):u.get("text-offset").evaluate(Ae,{},l.canonical).map(wn=>wn*zr)}let bn=ne?"center":u.get("text-justify").evaluate(Ae,{},l.canonical);const yn="point"===u.get("symbol-placement")?u.get("text-max-width").evaluate(Ae,{},l.canonical)*zr:1/0,Un=()=>{l.bucket.allowVerticalPlacement&&xo(Ft)&&(nt.vertical=Rl(ut,l.glyphMap,l.glyphPositions,l.imagePositions,Ie,yn,X,mn,"left",Qt,At,se.ai.vertical,!0,Ve,Le))};if(!ne&&Gn){const Fn=new Set;if("auto"===bn)for(let Yt=0;Yt<Gn.values.length;Yt+=2)Fn.add(zh(Gn.values[Yt]));else Fn.add(bn);let wn=!1;for(const Yt of Fn)if(!nt.horizontal[Yt])if(wn)nt.horizontal[Yt]=nt.horizontal[0];else{const $n=Rl(ut,l.glyphMap,l.glyphPositions,l.imagePositions,Ie,yn,X,"center",Yt,Qt,At,se.ai.horizontal,!1,Ve,Le);$n&&(nt.horizontal[Yt]=$n,wn=1===$n.positionedLines.length)}Un()}else{"auto"===bn&&(bn=zh(mn));const Fn=Rl(ut,l.glyphMap,l.glyphPositions,l.imagePositions,Ie,yn,X,mn,bn,Qt,At,se.ai.horizontal,!1,Ve,Le);Fn&&(nt.horizontal[bn]=Fn),Un(),xo(Ft)&&ne&&de&&(nt.vertical=Rl(ut,l.glyphMap,l.glyphPositions,l.imagePositions,Ie,yn,X,mn,bn,Qt,At,se.ai.vertical,!1,Ve,Le))}}let Rt=!1;if(Ae.icon&&Ae.icon.name){const Ft=l.imageMap[Ae.icon.name];Ft&&(xt=Rg(l.imagePositions[Ae.icon.name],u.get("icon-offset").evaluate(Ae,{},l.canonical),u.get("icon-anchor").evaluate(Ae,{},l.canonical)),Rt=!!Ft.sdf,void 0===l.bucket.sdfIcons?l.bucket.sdfIcons=Rt:l.bucket.sdfIcons!==Rt&&P("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ft.pixelRatio!==l.bucket.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(l.bucket.iconsNeedLinear=!0))}const Tt=Jg(nt.horizontal)||nt.vertical;l.bucket.iconsInText=!!Tt&&Tt.iconsInText,(Tt||xt)&&Bp(l.bucket,Ae,nt,xt,l.imageMap,D,Ve,Ke,At,Rt,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},se.bp=Gd,se.bq=gp,se.br=vp,se.bs=Ms,se.bt=Sh,se.bu=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return 0===l.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},se.bv=function(l,s,u,g,D){return y(this,void 0,void 0,function*(){if($())try{return yield p(l,s,u,g,D)}catch{}return function(X,ne,de,me,Ae){const Ie=X.width,Le=X.height;m&&_||(m=new OffscreenCanvas(Ie,Le),_=m.getContext("2d",{willReadFrequently:!0})),m.width=Ie,m.height=Le,_.drawImage(X,0,0,Ie,Le);const Ve=_.getImageData(ne,de,me,Ae);return _.clearRect(0,0,Ie,Le),Ve.data}(l,s,u,g,D)})},se.bw=Cu,se.bx=k,se.by=fe,se.bz=mu,se.c=G,se.d=l=>y(void 0,void 0,void 0,function*(){if(0===l.byteLength)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(s)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),se.e=O,se.f=l=>new Promise((s,u)=>{const g=new Image;g.onload=()=>{s(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame(()=>{g.src=x})},g.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const D=new Blob([new Uint8Array(l)],{type:"image/png"});g.src=l.byteLength?URL.createObjectURL(D):x}),se.g=U,se.h=(l,s)=>B(O(l,{type:"json"}),s),se.i=I,se.j=ye,se.k=pe,se.l=(l,s)=>B(O(l,{type:"arrayBuffer"}),s),se.m=B,se.n=function(l){return new Sh(l).readFields(vv,[])},se.o=dc,se.p=Mg,se.q=w,se.r=nc,se.s=J,se.t=tu,se.u=_n,se.v=_e,se.w=P,se.x=Gi,se.y=function([l,s,u]){return s+=90,s*=Math.PI/180,u*=Math.PI/180,{x:l*Math.cos(s)*Math.sin(u),y:l*Math.sin(s)*Math.sin(u),z:l*Math.cos(u)}},se.z=jn}),le("worker",0,function(se){class y{constructor(Pe){this.keyCache={},Pe&&this.replace(Pe)}replace(Pe){this._layerConfigs={},this._layers={},this.update(Pe,[])}update(Pe,Fe){for(const at of Pe){this._layerConfigs[at.id]=at;const lt=this._layers[at.id]=se.aB(at);lt._featureFilter=se.a7(lt.filter),this.keyCache[at.id]&&delete this.keyCache[at.id]}for(const at of Fe)delete this.keyCache[at],delete this._layerConfigs[at],delete this._layers[at];this.familiesBySource={};const $e=se.bj(Object.values(this._layerConfigs),this.keyCache);for(const at of $e){const lt=at.map(It=>this._layers[It.id]),bt=lt[0];if("none"===bt.visibility)continue;const Et=bt.source||"";let mt=this.familiesBySource[Et];mt||(mt=this.familiesBySource[Et]={});const kt=bt.sourceLayer||"_geojsonTileLayer";let Lt=mt[kt];Lt||(Lt=mt[kt]=[]),Lt.push(lt)}}}class k{constructor(Pe){const Fe={},$e=[];for(const Et in Pe){const mt=Pe[Et],kt=Fe[Et]={};for(const Lt in mt){const It=mt[+Lt];if(!It||0===It.bitmap.width||0===It.bitmap.height)continue;const Gt={x:0,y:0,w:It.bitmap.width+2,h:It.bitmap.height+2};$e.push(Gt),kt[Lt]={rect:Gt,metrics:It.metrics}}}const{w:at,h:lt}=se.p($e),bt=new se.o({width:at||1,height:lt||1});for(const Et in Pe){const mt=Pe[Et];for(const kt in mt){const Lt=mt[+kt];if(!Lt||0===Lt.bitmap.width||0===Lt.bitmap.height)continue;const It=Fe[Et][kt].rect;se.o.copy(Lt.bitmap,bt,{x:0,y:0},{x:It.x+1,y:It.y+1},Lt.bitmap)}}this.image=bt,this.positions=Fe}}se.bk("GlyphAtlas",k);class fe{constructor(Pe){this.tileID=new se.S(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),this.uid=Pe.uid,this.zoom=Pe.zoom,this.pixelRatio=Pe.pixelRatio,this.tileSize=Pe.tileSize,this.source=Pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pe.showCollisionBoxes,this.collectResourceTiming=!!Pe.collectResourceTiming,this.returnDependencies=!!Pe.returnDependencies,this.promoteId=Pe.promoteId,this.inFlightDependencies=[]}parse(Pe,Fe,$e,at){return se._(this,void 0,void 0,function*(){this.status="parsing",this.data=Pe,this.collisionBoxArray=new se.a5;const lt=new se.bl(Object.keys(Pe.layers).sort()),bt=new se.bm(this.tileID,this.promoteId);bt.bucketLayerIDs=[];const Et={},mt={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:$e},kt=Fe.familiesBySource[this.source];for(const Qn in kt){const pi=Pe.layers[Qn];if(!pi)continue;1===pi.version&&se.w(`Vector tile source "${this.source}" layer "${Qn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ji=lt.encode(Qn),_i=[];for(let lr=0;lr<pi.length;lr++){const Bi=pi.feature(lr),Za=bt.getId(Bi,Qn);_i.push({feature:Bi,id:Za,index:lr,sourceLayerIndex:ji})}for(const lr of kt[Qn]){const Bi=lr[0];Bi.source!==this.source&&se.w(`layer.source = ${Bi.source} does not equal this.source = ${this.source}`),Bi.minzoom&&this.zoom<Math.floor(Bi.minzoom)||Bi.maxzoom&&this.zoom>=Bi.maxzoom||"none"!==Bi.visibility&&(ee(lr,this.zoom,$e),(Et[Bi.id]=Bi.createBucket({index:bt.bucketLayerIDs.length,layers:lr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ji,sourceID:this.source})).populate(_i,mt,this.tileID.canonical),bt.bucketLayerIDs.push(lr.map(Za=>Za.id)))}}const Lt=se.aG(mt.glyphDependencies,Qn=>Object.keys(Qn).map(Number));this.inFlightDependencies.forEach(Qn=>Qn?.abort()),this.inFlightDependencies=[];let It=Promise.resolve({});if(Object.keys(Lt).length){const Qn=new AbortController;this.inFlightDependencies.push(Qn),It=at.sendAsync({type:"GG",data:{stacks:Lt,source:this.source,tileID:this.tileID,type:"glyphs"}},Qn)}const Gt=Object.keys(mt.iconDependencies);let rn=Promise.resolve({});if(Gt.length){const Qn=new AbortController;this.inFlightDependencies.push(Qn),rn=at.sendAsync({type:"GI",data:{icons:Gt,source:this.source,tileID:this.tileID,type:"icons"}},Qn)}const un=Object.keys(mt.patternDependencies);let zn=Promise.resolve({});if(un.length){const Qn=new AbortController;this.inFlightDependencies.push(Qn),zn=at.sendAsync({type:"GI",data:{icons:un,source:this.source,tileID:this.tileID,type:"patterns"}},Qn)}const[Pn,En,fi]=yield Promise.all([It,rn,zn]),Ti=new k(Pn),Li=new se.bn(En,fi);for(const Qn in Et){const pi=Et[Qn];pi instanceof se.a6?(ee(pi.layers,this.zoom,$e),se.bo({bucket:pi,glyphMap:Pn,glyphPositions:Ti.positions,imageMap:En,imagePositions:Li.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):pi.hasPattern&&(pi instanceof se.bp||pi instanceof se.bq||pi instanceof se.br)&&(ee(pi.layers,this.zoom,$e),pi.addFeatures(mt,this.tileID.canonical,Li.patternPositions))}return this.status="done",{buckets:Object.values(Et).filter(Qn=>!Qn.isEmpty()),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ti.image,imageAtlas:Li,glyphMap:this.returnDependencies?Pn:null,iconMap:this.returnDependencies?En:null,glyphPositions:this.returnDependencies?Ti.positions:null}})}}function ee(rt,Pe,Fe){const $e=new se.a9(Pe);for(const at of rt)at.recalculate($e,Fe)}class e{constructor(Pe,Fe,$e){this.actor=Pe,this.layerIndex=Fe,this.availableImages=$e,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Pe,Fe){return se._(this,void 0,void 0,function*(){const $e=yield se.l(Pe.request,Fe);try{return{vectorTile:new se.bs.VectorTile(new se.bt($e.data)),rawData:$e.data,cacheControl:$e.cacheControl,expires:$e.expires}}catch(at){const lt=new Uint8Array($e.data);let bt=`Unable to parse the tile at ${Pe.request.url}, `;throw bt+=31===lt[0]&&139===lt[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${at.message}`,new Error(bt)}})}loadTile(Pe){return se._(this,void 0,void 0,function*(){const Fe=Pe.uid,$e=!!(Pe&&Pe.request&&Pe.request.collectResourceTiming)&&new se.bu(Pe.request),at=new fe(Pe);this.loading[Fe]=at;const lt=new AbortController;at.abort=lt;try{const bt=yield this.loadVectorTile(Pe,lt);if(delete this.loading[Fe],!bt)return null;const Et=bt.rawData,mt={};bt.expires&&(mt.expires=bt.expires),bt.cacheControl&&(mt.cacheControl=bt.cacheControl);const kt={};if($e){const It=$e.finish();It&&(kt.resourceTiming=JSON.parse(JSON.stringify(It)))}at.vectorTile=bt.vectorTile;const Lt=at.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[Fe]=at,this.fetching[Fe]={rawTileData:Et,cacheControl:mt,resourceTiming:kt};try{const It=yield Lt;return se.e({rawTileData:Et.slice(0)},It,mt,kt)}finally{delete this.fetching[Fe]}}catch(bt){throw delete this.loading[Fe],at.status="done",this.loaded[Fe]=at,bt}})}reloadTile(Pe){return se._(this,void 0,void 0,function*(){const Fe=Pe.uid;if(!this.loaded||!this.loaded[Fe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const $e=this.loaded[Fe];if($e.showCollisionBoxes=Pe.showCollisionBoxes,"parsing"===$e.status){const at=yield $e.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor);let lt;if(this.fetching[Fe]){const{rawTileData:bt,cacheControl:Et,resourceTiming:mt}=this.fetching[Fe];delete this.fetching[Fe],lt=se.e({rawTileData:bt.slice(0)},at,Et,mt)}else lt=at;return lt}if("done"===$e.status&&$e.vectorTile)return $e.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(Pe){return se._(this,void 0,void 0,function*(){const Fe=this.loading,$e=Pe.uid;Fe&&Fe[$e]&&Fe[$e].abort&&(Fe[$e].abort.abort(),delete Fe[$e])})}removeTile(Pe){return se._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Pe.uid]&&delete this.loaded[Pe.uid]})}}class V{constructor(){this.loaded={}}loadTile(Pe){return se._(this,void 0,void 0,function*(){const{uid:Fe,encoding:$e,rawImageData:at,redFactor:lt,greenFactor:bt,blueFactor:Et,baseShift:mt}=Pe,kt=at.width+2,Lt=at.height+2,It=se.b(at)?new se.R({width:kt,height:Lt},yield se.bv(at,-1,-1,kt,Lt)):at,Gt=new se.bw(Fe,It,$e,lt,bt,Et,mt);return this.loaded=this.loaded||{},this.loaded[Fe]=Gt,Gt})}removeTile(Pe){const Fe=this.loaded,$e=Pe.uid;Fe&&Fe[$e]&&delete Fe[$e]}}function H(rt,Pe){if(0!==rt.length){te(rt[0],Pe);for(var Fe=1;Fe<rt.length;Fe++)te(rt[Fe],!Pe)}}function te(rt,Pe){for(var Fe=0,$e=0,at=0,lt=rt.length,bt=lt-1;at<lt;bt=at++){var Et=(rt[at][0]-rt[bt][0])*(rt[bt][1]+rt[at][1]),mt=Fe+Et;$e+=Math.abs(Fe)>=Math.abs(Et)?Fe-mt+Et:Et-mt+Fe,Fe=mt}Fe+$e>=0!=!!Pe&&rt.reverse()}var re=se.bx(function rt(Pe,Fe){var $e,at=Pe&&Pe.type;if("FeatureCollection"===at)for($e=0;$e<Pe.features.length;$e++)rt(Pe.features[$e],Fe);else if("GeometryCollection"===at)for($e=0;$e<Pe.geometries.length;$e++)rt(Pe.geometries[$e],Fe);else if("Feature"===at)rt(Pe.geometry,Fe);else if("Polygon"===at)H(Pe.coordinates,Fe);else if("MultiPolygon"===at)for($e=0;$e<Pe.coordinates.length;$e++)H(Pe.coordinates[$e],Fe);return Pe});const f=se.bs.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},$=se.by,ae=se.bs.VectorTileFeature,oe=W;function W(rt,Pe){this.options=Pe||{},this.features=rt,this.length=rt.length}function N(rt,Pe){this.id="number"==typeof rt.id?rt.id:void 0,this.type=rt.type,this.rawGeometry=1===rt.type?[rt.geometry]:rt.geometry,this.properties=rt.tags,this.extent=Pe||4096}W.prototype.feature=function(rt){return new N(this.features[rt],this.options.extent)},N.prototype.loadGeometry=function(){var rt=this.rawGeometry;this.geometry=[];for(var Pe=0;Pe<rt.length;Pe++){for(var Fe=rt[Pe],$e=[],at=0;at<Fe.length;at++)$e.push(new $(Fe[at][0],Fe[at][1]));this.geometry.push($e)}return this.geometry},N.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var rt=this.geometry,Pe=1/0,Fe=-1/0,$e=1/0,at=-1/0,lt=0;lt<rt.length;lt++)for(var bt=rt[lt],Et=0;Et<bt.length;Et++){var mt=bt[Et];Pe=Math.min(Pe,mt.x),Fe=Math.max(Fe,mt.x),$e=Math.min($e,mt.y),at=Math.max(at,mt.y)}return[Pe,$e,Fe,at]},N.prototype.toGeoJSON=ae.prototype.toGeoJSON;var O=se.bz,M=oe;function A(rt){var Pe=new O;return function(Fe,$e){for(var at in Fe.layers)$e.writeMessage(3,b,Fe.layers[at])}(rt,Pe),Pe.finish()}function b(rt,Pe){var Fe;Pe.writeVarintField(15,rt.version||1),Pe.writeStringField(1,rt.name||""),Pe.writeVarintField(5,rt.extent||4096);var $e={keys:[],values:[],keycache:{},valuecache:{}};for(Fe=0;Fe<rt.length;Fe++)$e.feature=rt.feature(Fe),Pe.writeMessage(2,q,$e);var at=$e.keys;for(Fe=0;Fe<at.length;Fe++)Pe.writeStringField(3,at[Fe]);var lt=$e.values;for(Fe=0;Fe<lt.length;Fe++)Pe.writeMessage(4,j,lt[Fe])}function q(rt,Pe){var Fe=rt.feature;void 0!==Fe.id&&Pe.writeVarintField(1,Fe.id),Pe.writeMessage(2,C,rt),Pe.writeVarintField(3,Fe.type),Pe.writeMessage(4,I,Fe)}function C(rt,Pe){var Fe=rt.feature,$e=rt.keys,at=rt.values,lt=rt.keycache,bt=rt.valuecache;for(var Et in Fe.properties){var mt=Fe.properties[Et],kt=lt[Et];if(null!==mt){void 0===kt&&($e.push(Et),lt[Et]=kt=$e.length-1),Pe.writeVarint(kt);var Lt=typeof mt;"string"!==Lt&&"boolean"!==Lt&&"number"!==Lt&&(mt=JSON.stringify(mt));var It=Lt+":"+mt,Gt=bt[It];void 0===Gt&&(at.push(mt),bt[It]=Gt=at.length-1),Pe.writeVarint(Gt)}}}function P(rt,Pe){return(Pe<<3)+(7&rt)}function F(rt){return rt<<1^rt>>31}function I(rt,Pe){for(var Fe=rt.loadGeometry(),$e=rt.type,at=0,lt=0,bt=Fe.length,Et=0;Et<bt;Et++){var mt=Fe[Et],kt=1;1===$e&&(kt=mt.length),Pe.writeVarint(P(1,kt));for(var Lt=3===$e?mt.length-1:mt.length,It=0;It<Lt;It++){1===It&&1!==$e&&Pe.writeVarint(P(2,Lt-1));var Gt=mt[It].x-at,rn=mt[It].y-lt;Pe.writeVarint(F(Gt)),Pe.writeVarint(F(rn)),at+=Gt,lt+=rn}3===$e&&Pe.writeVarint(P(7,1))}}function j(rt,Pe){var Fe=typeof rt;"string"===Fe?Pe.writeStringField(1,rt):"boolean"===Fe?Pe.writeBooleanField(7,rt):"number"===Fe&&(rt%1!=0?Pe.writeDoubleField(3,rt):rt<0?Pe.writeSVarintField(6,rt):Pe.writeVarintField(5,rt))}c.exports=A,c.exports.fromVectorTileJs=A,c.exports.fromGeojsonVt=function(rt,Pe){Pe=Pe||{};var Fe={};for(var $e in rt)Fe[$e]=new M(rt[$e].features,Pe),Fe[$e].name=$e,Fe[$e].version=Pe.version,Fe[$e].extent=Pe.extent;return A({layers:Fe})},c.exports.GeoJSONWrapper=M;var E=se.bx(c.exports);const x={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:rt=>rt},p=Math.fround||(m=new Float32Array(1),rt=>(m[0]=+rt,m[0]));var m;const _=3,R=5,G=6;class K{constructor(Pe){this.options=Object.assign(Object.create(x),Pe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Pe){const{log:Fe,minZoom:$e,maxZoom:at}=this.options;Fe&&console.time("total time");const lt=`prepare ${Pe.length} points`;Fe&&console.time(lt),this.points=Pe;const bt=[];for(let mt=0;mt<Pe.length;mt++){const kt=Pe[mt];if(!kt.geometry)continue;const[Lt,It]=kt.geometry.coordinates,Gt=p(L(Lt)),rn=p(S(It));bt.push(Gt,rn,1/0,mt,-1,1),this.options.reduce&&bt.push(0)}let Et=this.trees[at+1]=this._createTree(bt);Fe&&console.timeEnd(lt);for(let mt=at;mt>=$e;mt--){const kt=+Date.now();Et=this.trees[mt]=this._createTree(this._cluster(Et,mt)),Fe&&console.log("z%d: %d clusters in %dms",mt,Et.numItems,+Date.now()-kt)}return Fe&&console.timeEnd("total time"),this}getClusters(Pe,Fe){let $e=((Pe[0]+180)%360+360)%360-180;const at=Math.max(-90,Math.min(90,Pe[1]));let lt=180===Pe[2]?180:((Pe[2]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,Pe[3]));if(Pe[2]-Pe[0]>=360)$e=-180,lt=180;else if($e>lt){const It=this.getClusters([$e,at,180,bt],Fe),Gt=this.getClusters([-180,at,lt,bt],Fe);return It.concat(Gt)}const Et=this.trees[this._limitZoom(Fe)],mt=Et.range(L($e),S(bt),L(lt),S(at)),kt=Et.data,Lt=[];for(const It of mt){const Gt=this.stride*It;Lt.push(kt[Gt+R]>1?U(kt,Gt,this.clusterProps):this.points[kt[Gt+_]])}return Lt}getChildren(Pe){const Fe=this._getOriginId(Pe),$e=this._getOriginZoom(Pe),at="No cluster with the specified id.",lt=this.trees[$e];if(!lt)throw new Error(at);const bt=lt.data;if(Fe*this.stride>=bt.length)throw new Error(at);const Et=this.options.radius/(this.options.extent*Math.pow(2,$e-1)),mt=lt.within(bt[Fe*this.stride],bt[Fe*this.stride+1],Et),kt=[];for(const Lt of mt){const It=Lt*this.stride;bt[It+4]===Pe&&kt.push(bt[It+R]>1?U(bt,It,this.clusterProps):this.points[bt[It+_]])}if(0===kt.length)throw new Error(at);return kt}getLeaves(Pe,Fe,$e){const at=[];return this._appendLeaves(at,Pe,Fe=Fe||10,$e=$e||0,0),at}getTile(Pe,Fe,$e){const at=this.trees[this._limitZoom(Pe)],lt=Math.pow(2,Pe),{extent:bt,radius:Et}=this.options,mt=Et/bt,kt=($e-mt)/lt,Lt=($e+1+mt)/lt,It={features:[]};return this._addTileFeatures(at.range((Fe-mt)/lt,kt,(Fe+1+mt)/lt,Lt),at.data,Fe,$e,lt,It),0===Fe&&this._addTileFeatures(at.range(1-mt/lt,kt,1,Lt),at.data,lt,$e,lt,It),Fe===lt-1&&this._addTileFeatures(at.range(0,kt,mt/lt,Lt),at.data,-1,$e,lt,It),It.features.length?It:null}getClusterExpansionZoom(Pe){let Fe=this._getOriginZoom(Pe)-1;for(;Fe<=this.options.maxZoom;){const $e=this.getChildren(Pe);if(Fe++,1!==$e.length)break;Pe=$e[0].properties.cluster_id}return Fe}_appendLeaves(Pe,Fe,$e,at,lt){const bt=this.getChildren(Fe);for(const Et of bt){const mt=Et.properties;if(mt&&mt.cluster?lt+mt.point_count<=at?lt+=mt.point_count:lt=this._appendLeaves(Pe,mt.cluster_id,$e,at,lt):lt<at?lt++:Pe.push(Et),Pe.length===$e)break}return lt}_createTree(Pe){const Fe=new se.aw(Pe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let $e=0;$e<Pe.length;$e+=this.stride)Fe.add(Pe[$e],Pe[$e+1]);return Fe.finish(),Fe.data=Pe,Fe}_addTileFeatures(Pe,Fe,$e,at,lt,bt){for(const Et of Pe){const mt=Et*this.stride,kt=Fe[mt+R]>1;let Lt,It,Gt;if(kt)Lt=z(Fe,mt,this.clusterProps),It=Fe[mt],Gt=Fe[mt+1];else{const zn=this.points[Fe[mt+_]];Lt=zn.properties;const[Pn,En]=zn.geometry.coordinates;It=L(Pn),Gt=S(En)}const rn={type:1,geometry:[[Math.round(this.options.extent*(It*lt-$e)),Math.round(this.options.extent*(Gt*lt-at))]],tags:Lt};let un;un=kt||this.options.generateId?Fe[mt+_]:this.points[Fe[mt+_]].id,void 0!==un&&(rn.id=un),bt.features.push(rn)}}_limitZoom(Pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+Pe),this.options.maxZoom+1))}_cluster(Pe,Fe){const{radius:$e,extent:at,reduce:lt,minPoints:bt}=this.options,Et=$e/(at*Math.pow(2,Fe)),mt=Pe.data,kt=[],Lt=this.stride;for(let It=0;It<mt.length;It+=Lt){if(mt[It+2]<=Fe)continue;mt[It+2]=Fe;const Gt=mt[It],rn=mt[It+1],un=Pe.within(mt[It],mt[It+1],Et),zn=mt[It+R];let Pn=zn;for(const En of un){const fi=En*Lt;mt[fi+2]>Fe&&(Pn+=mt[fi+R])}if(Pn>zn&&Pn>=bt){let En,fi=Gt*zn,Ti=rn*zn,Li=-1;const Qn=((It/Lt|0)<<5)+(Fe+1)+this.points.length;for(const pi of un){const ji=pi*Lt;if(mt[ji+2]<=Fe)continue;mt[ji+2]=Fe;const _i=mt[ji+R];fi+=mt[ji]*_i,Ti+=mt[ji+1]*_i,mt[ji+4]=Qn,lt&&(En||(En=this._map(mt,It,!0),Li=this.clusterProps.length,this.clusterProps.push(En)),lt(En,this._map(mt,ji)))}mt[It+4]=Qn,kt.push(fi/Pn,Ti/Pn,1/0,Qn,-1,Pn),lt&&kt.push(Li)}else{for(let En=0;En<Lt;En++)kt.push(mt[It+En]);if(Pn>1)for(const En of un){const fi=En*Lt;if(!(mt[fi+2]<=Fe)){mt[fi+2]=Fe;for(let Ti=0;Ti<Lt;Ti++)kt.push(mt[fi+Ti])}}}}return kt}_getOriginId(Pe){return Pe-this.points.length>>5}_getOriginZoom(Pe){return(Pe-this.points.length)%32}_map(Pe,Fe,$e){if(Pe[Fe+R]>1){const bt=this.clusterProps[Pe[Fe+G]];return $e?Object.assign({},bt):bt}const at=this.points[Pe[Fe+_]].properties,lt=this.options.map(at);return $e&&lt===at?Object.assign({},lt):lt}}function U(rt,Pe,Fe){return{type:"Feature",id:rt[Pe+_],properties:z(rt,Pe,Fe),geometry:{type:"Point",coordinates:[($e=rt[Pe],360*($e-.5)),B(rt[Pe+1])]}};var $e}function z(rt,Pe,Fe){const $e=rt[Pe+R],at=$e>=1e4?`${Math.round($e/1e3)}k`:$e>=1e3?Math.round($e/100)/10+"k":$e,lt=rt[Pe+G],bt=-1===lt?{}:Object.assign({},Fe[lt]);return Object.assign(bt,{cluster:!0,cluster_id:rt[Pe+_],point_count:$e,point_count_abbreviated:at})}function L(rt){return rt/360+.5}function S(rt){const Pe=Math.sin(rt*Math.PI/180),Fe=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function B(rt){const Pe=(180-360*rt)*Math.PI/180;return 360*Math.atan(Math.exp(Pe))/Math.PI-90}function J(rt,Pe,Fe,$e){let at=$e;const lt=Pe+(Fe-Pe>>1);let bt,Et=Fe-Pe;const mt=rt[Pe],kt=rt[Pe+1],Lt=rt[Fe],It=rt[Fe+1];for(let Gt=Pe+3;Gt<Fe;Gt+=3){const rn=ie(rt[Gt],rt[Gt+1],mt,kt,Lt,It);if(rn>at)bt=Gt,at=rn;else if(rn===at){const un=Math.abs(Gt-lt);un<Et&&(bt=Gt,Et=un)}}at>$e&&(bt-Pe>3&&J(rt,Pe,bt,$e),rt[bt+2]=at,Fe-bt>3&&J(rt,bt,Fe,$e))}function ie(rt,Pe,Fe,$e,at,lt){let bt=at-Fe,Et=lt-$e;if(0!==bt||0!==Et){const mt=((rt-Fe)*bt+(Pe-$e)*Et)/(bt*bt+Et*Et);mt>1?(Fe=at,$e=lt):mt>0&&(Fe+=bt*mt,$e+=Et*mt)}return bt=rt-Fe,Et=Pe-$e,bt*bt+Et*Et}function ce(rt,Pe,Fe,$e){const at={id:rt??null,type:Pe,geometry:Fe,tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===Pe||"MultiPoint"===Pe||"LineString"===Pe)pe(at,Fe);else if("Polygon"===Pe)pe(at,Fe[0]);else if("MultiLineString"===Pe)for(const lt of Fe)pe(at,lt);else if("MultiPolygon"===Pe)for(const lt of Fe)pe(at,lt[0]);return at}function pe(rt,Pe){for(let Fe=0;Fe<Pe.length;Fe+=3)rt.minX=Math.min(rt.minX,Pe[Fe]),rt.minY=Math.min(rt.minY,Pe[Fe+1]),rt.maxX=Math.max(rt.maxX,Pe[Fe]),rt.maxY=Math.max(rt.maxY,Pe[Fe+1])}function ye(rt,Pe,Fe,$e){if(!Pe.geometry)return;const at=Pe.geometry.coordinates;if(at&&0===at.length)return;const lt=Pe.geometry.type,bt=Math.pow(Fe.tolerance/((1<<Fe.maxZoom)*Fe.extent),2);let Et=[],mt=Pe.id;if(Fe.promoteId?mt=Pe.properties[Fe.promoteId]:Fe.generateId&&(mt=$e||0),"Point"===lt)Te(at,Et);else if("MultiPoint"===lt)for(const kt of at)Te(kt,Et);else if("LineString"===lt)_e(at,Et,bt,!1);else if("MultiLineString"===lt){if(Fe.lineMetrics){for(const kt of at)Et=[],_e(kt,Et,bt,!1),rt.push(ce(mt,"LineString",Et,Pe.properties));return}we(at,Et,bt,!1)}else if("Polygon"===lt)we(at,Et,bt,!0);else{if("MultiPolygon"!==lt){if("GeometryCollection"===lt){for(const kt of Pe.geometry.geometries)ye(rt,{id:mt,geometry:kt,properties:Pe.properties},Fe,$e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const kt of at){const Lt=[];we(kt,Lt,bt,!0),Et.push(Lt)}}rt.push(ce(mt,lt,Et,Pe.properties))}function Te(rt,Pe){Pe.push(De(rt[0]),xe(rt[1]),0)}function _e(rt,Pe,Fe,$e){let at,lt,bt=0;for(let mt=0;mt<rt.length;mt++){const kt=De(rt[mt][0]),Lt=xe(rt[mt][1]);Pe.push(kt,Lt,0),mt>0&&(bt+=$e?(at*Lt-kt*lt)/2:Math.sqrt(Math.pow(kt-at,2)+Math.pow(Lt-lt,2))),at=kt,lt=Lt}const Et=Pe.length-3;Pe[2]=1,J(Pe,0,Et,Fe),Pe[Et+2]=1,Pe.size=Math.abs(bt),Pe.start=0,Pe.end=Pe.size}function we(rt,Pe,Fe,$e){for(let at=0;at<rt.length;at++){const lt=[];_e(rt[at],lt,Fe,$e),Pe.push(lt)}}function De(rt){return rt/360+.5}function xe(rt){const Pe=Math.sin(rt*Math.PI/180),Fe=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function Ce(rt,Pe,Fe,$e,at,lt,bt,Et){if($e/=Pe,lt>=(Fe/=Pe)&&bt<$e)return rt;if(bt<Fe||lt>=$e)return null;const mt=[];for(const kt of rt){const Lt=kt.geometry;let It=kt.type;const Gt=0===at?kt.minX:kt.minY,rn=0===at?kt.maxX:kt.maxY;if(Gt>=Fe&&rn<$e){mt.push(kt);continue}if(rn<Fe||Gt>=$e)continue;let un=[];if("Point"===It||"MultiPoint"===It)Me(Lt,un,Fe,$e,at);else if("LineString"===It)Ne(Lt,un,Fe,$e,at,!1,Et.lineMetrics);else if("MultiLineString"===It)Xe(Lt,un,Fe,$e,at,!1);else if("Polygon"===It)Xe(Lt,un,Fe,$e,at,!0);else if("MultiPolygon"===It)for(const zn of Lt){const Pn=[];Xe(zn,Pn,Fe,$e,at,!0),Pn.length&&un.push(Pn)}if(un.length){if(Et.lineMetrics&&"LineString"===It){for(const zn of un)mt.push(ce(kt.id,It,zn,kt.tags));continue}"LineString"!==It&&"MultiLineString"!==It||(1===un.length?(It="LineString",un=un[0]):It="MultiLineString"),"Point"!==It&&"MultiPoint"!==It||(It=3===un.length?"Point":"MultiPoint"),mt.push(ce(kt.id,It,un,kt.tags))}}return mt.length?mt:null}function Me(rt,Pe,Fe,$e,at){for(let lt=0;lt<rt.length;lt+=3){const bt=rt[lt+at];bt>=Fe&&bt<=$e&&Qe(Pe,rt[lt],rt[lt+1],rt[lt+2])}}function Ne(rt,Pe,Fe,$e,at,lt,bt){let Et=We(rt);const mt=0===at?Ye:Je;let kt,Lt,It=rt.start;for(let Pn=0;Pn<rt.length-3;Pn+=3){const En=rt[Pn],fi=rt[Pn+1],Ti=rt[Pn+2],Li=rt[Pn+3],Qn=rt[Pn+4],pi=0===at?En:fi,ji=0===at?Li:Qn;let _i=!1;bt&&(kt=Math.sqrt(Math.pow(En-Li,2)+Math.pow(fi-Qn,2))),pi<Fe?ji>Fe&&(Lt=mt(Et,En,fi,Li,Qn,Fe),bt&&(Et.start=It+kt*Lt)):pi>$e?ji<$e&&(Lt=mt(Et,En,fi,Li,Qn,$e),bt&&(Et.start=It+kt*Lt)):Qe(Et,En,fi,Ti),ji<Fe&&pi>=Fe&&(Lt=mt(Et,En,fi,Li,Qn,Fe),_i=!0),ji>$e&&pi<=$e&&(Lt=mt(Et,En,fi,Li,Qn,$e),_i=!0),!lt&&_i&&(bt&&(Et.end=It+kt*Lt),Pe.push(Et),Et=We(rt)),bt&&(It+=kt)}let Gt=rt.length-3;const rn=rt[Gt],un=rt[Gt+1],zn=0===at?rn:un;zn>=Fe&&zn<=$e&&Qe(Et,rn,un,rt[Gt+2]),Gt=Et.length-3,lt&&Gt>=3&&(Et[Gt]!==Et[0]||Et[Gt+1]!==Et[1])&&Qe(Et,Et[0],Et[1],Et[2]),Et.length&&Pe.push(Et)}function We(rt){const Pe=[];return Pe.size=rt.size,Pe.start=rt.start,Pe.end=rt.end,Pe}function Xe(rt,Pe,Fe,$e,at,lt){for(const bt of rt)Ne(bt,Pe,Fe,$e,at,lt,!1)}function Qe(rt,Pe,Fe,$e){rt.push(Pe,Fe,$e)}function Ye(rt,Pe,Fe,$e,at,lt){const bt=(lt-Pe)/($e-Pe);return Qe(rt,lt,Fe+(at-Fe)*bt,1),bt}function Je(rt,Pe,Fe,$e,at,lt){const bt=(lt-Fe)/(at-Fe);return Qe(rt,Pe+($e-Pe)*bt,lt,1),bt}function He(rt,Pe){const Fe=[];for(let $e=0;$e<rt.length;$e++){const at=rt[$e],lt=at.type;let bt;if("Point"===lt||"MultiPoint"===lt||"LineString"===lt)bt=it(at.geometry,Pe);else if("MultiLineString"===lt||"Polygon"===lt){bt=[];for(const Et of at.geometry)bt.push(it(Et,Pe))}else if("MultiPolygon"===lt){bt=[];for(const Et of at.geometry){const mt=[];for(const kt of Et)mt.push(it(kt,Pe));bt.push(mt)}}Fe.push(ce(at.id,lt,bt,at.tags))}return Fe}function it(rt,Pe){const Fe=[];Fe.size=rt.size,void 0!==rt.start&&(Fe.start=rt.start,Fe.end=rt.end);for(let $e=0;$e<rt.length;$e+=3)Fe.push(rt[$e]+Pe,rt[$e+1],rt[$e+2]);return Fe}function dt(rt,Pe){if(rt.transformed)return rt;const Fe=1<<rt.z,$e=rt.x,at=rt.y;for(const lt of rt.features){const bt=lt.geometry,Et=lt.type;if(lt.geometry=[],1===Et)for(let mt=0;mt<bt.length;mt+=2)lt.geometry.push(pt(bt[mt],bt[mt+1],Pe,Fe,$e,at));else for(let mt=0;mt<bt.length;mt++){const kt=[];for(let Lt=0;Lt<bt[mt].length;Lt+=2)kt.push(pt(bt[mt][Lt],bt[mt][Lt+1],Pe,Fe,$e,at));lt.geometry.push(kt)}}return rt.transformed=!0,rt}function pt(rt,Pe,Fe,$e,at,lt){return[Math.round(Fe*(rt*$e-at)),Math.round(Fe*(Pe*$e-lt))]}function Dt(rt,Pe,Fe,$e,at){const lt=Pe===at.maxZoom?0:at.tolerance/((1<<Pe)*at.extent),bt={features:[],numPoints:0,numSimplified:0,numFeatures:rt.length,source:null,x:Fe,y:$e,z:Pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Et of rt)et(bt,Et,lt,at);return bt}function et(rt,Pe,Fe,$e){const at=Pe.geometry,lt=Pe.type,bt=[];if(rt.minX=Math.min(rt.minX,Pe.minX),rt.minY=Math.min(rt.minY,Pe.minY),rt.maxX=Math.max(rt.maxX,Pe.maxX),rt.maxY=Math.max(rt.maxY,Pe.maxY),"Point"===lt||"MultiPoint"===lt)for(let Et=0;Et<at.length;Et+=3)bt.push(at[Et],at[Et+1]),rt.numPoints++,rt.numSimplified++;else if("LineString"===lt)st(bt,at,rt,Fe,!1,!1);else if("MultiLineString"===lt||"Polygon"===lt)for(let Et=0;Et<at.length;Et++)st(bt,at[Et],rt,Fe,"Polygon"===lt,0===Et);else if("MultiPolygon"===lt)for(let Et=0;Et<at.length;Et++){const mt=at[Et];for(let kt=0;kt<mt.length;kt++)st(bt,mt[kt],rt,Fe,!0,0===kt)}if(bt.length){let Et=Pe.tags||null;if("LineString"===lt&&$e.lineMetrics){Et={};for(const kt in Pe.tags)Et[kt]=Pe.tags[kt];Et.mapbox_clip_start=at.start/at.size,Et.mapbox_clip_end=at.end/at.size}const mt={geometry:bt,type:"Polygon"===lt||"MultiPolygon"===lt?3:"LineString"===lt||"MultiLineString"===lt?2:1,tags:Et};null!==Pe.id&&(mt.id=Pe.id),rt.features.push(mt)}}function st(rt,Pe,Fe,$e,at,lt){const bt=$e*$e;if($e>0&&Pe.size<(at?bt:$e))return void(Fe.numPoints+=Pe.length/3);const Et=[];for(let mt=0;mt<Pe.length;mt+=3)(0===$e||Pe[mt+2]>bt)&&(Fe.numSimplified++,Et.push(Pe[mt],Pe[mt+1])),Fe.numPoints++;at&&function(mt,kt){let Lt=0;for(let It=0,Gt=mt.length,rn=Gt-2;It<Gt;rn=It,It+=2)Lt+=(mt[It]-mt[rn])*(mt[It+1]+mt[rn+1]);if(Lt>0===kt)for(let It=0,Gt=mt.length;It<Gt/2;It+=2){const rn=mt[It],un=mt[It+1];mt[It]=mt[Gt-2-It],mt[It+1]=mt[Gt-1-It],mt[Gt-2-It]=rn,mt[Gt-1-It]=un}}(Et,lt),rt.push(Et)}const Ge={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ze{constructor(Pe,Fe){const $e=(Fe=this.options=function(lt,bt){for(const Et in bt)lt[Et]=bt[Et];return lt}(Object.create(Ge),Fe)).debug;if($e&&console.time("preprocess data"),Fe.maxZoom<0||Fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Fe.promoteId&&Fe.generateId)throw new Error("promoteId and generateId cannot be used together.");let at=function(lt,bt){const Et=[];if("FeatureCollection"===lt.type)for(let mt=0;mt<lt.features.length;mt++)ye(Et,lt.features[mt],bt,mt);else ye(Et,"Feature"===lt.type?lt:{geometry:lt},bt);return Et}(Pe,Fe);this.tiles={},this.tileCoords=[],$e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Fe.indexMaxZoom,Fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),at=function(lt,bt){const Et=bt.buffer/bt.extent;let mt=lt;const kt=Ce(lt,1,-1-Et,Et,0,-1,2,bt),Lt=Ce(lt,1,1-Et,2+Et,0,-1,2,bt);return(kt||Lt)&&(mt=Ce(lt,1,-Et,1+Et,0,-1,2,bt)||[],kt&&(mt=He(kt,1).concat(mt)),Lt&&(mt=mt.concat(He(Lt,-1)))),mt}(at,Fe),at.length&&this.splitTile(at,0,0,0),$e&&(at.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Pe,Fe,$e,at,lt,bt,Et){const mt=[Pe,Fe,$e,at],kt=this.options,Lt=kt.debug;for(;mt.length;){at=mt.pop(),$e=mt.pop(),Fe=mt.pop(),Pe=mt.pop();const It=1<<Fe,Gt=je(Fe,$e,at);let rn=this.tiles[Gt];if(!rn&&(Lt>1&&console.time("creation"),rn=this.tiles[Gt]=Dt(Pe,Fe,$e,at,kt),this.tileCoords.push({z:Fe,x:$e,y:at}),Lt)){Lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Fe,$e,at,rn.numFeatures,rn.numPoints,rn.numSimplified),console.timeEnd("creation"));const _i=`z${Fe}`;this.stats[_i]=(this.stats[_i]||0)+1,this.total++}if(rn.source=Pe,null==lt){if(Fe===kt.indexMaxZoom||rn.numPoints<=kt.indexMaxPoints)continue}else{if(Fe===kt.maxZoom||Fe===lt)continue;if(null!=lt){const _i=lt-Fe;if($e!==bt>>_i||at!==Et>>_i)continue}}if(rn.source=null,0===Pe.length)continue;Lt>1&&console.time("clipping");const un=.5*kt.buffer/kt.extent,zn=.5-un,Pn=.5+un,En=1+un;let fi=null,Ti=null,Li=null,Qn=null,pi=Ce(Pe,It,$e-un,$e+Pn,0,rn.minX,rn.maxX,kt),ji=Ce(Pe,It,$e+zn,$e+En,0,rn.minX,rn.maxX,kt);Pe=null,pi&&(fi=Ce(pi,It,at-un,at+Pn,1,rn.minY,rn.maxY,kt),Ti=Ce(pi,It,at+zn,at+En,1,rn.minY,rn.maxY,kt),pi=null),ji&&(Li=Ce(ji,It,at-un,at+Pn,1,rn.minY,rn.maxY,kt),Qn=Ce(ji,It,at+zn,at+En,1,rn.minY,rn.maxY,kt),ji=null),Lt>1&&console.timeEnd("clipping"),mt.push(fi||[],Fe+1,2*$e,2*at),mt.push(Ti||[],Fe+1,2*$e,2*at+1),mt.push(Li||[],Fe+1,2*$e+1,2*at),mt.push(Qn||[],Fe+1,2*$e+1,2*at+1)}}getTile(Pe,Fe,$e){Pe=+Pe,Fe=+Fe,$e=+$e;const at=this.options,{extent:lt,debug:bt}=at;if(Pe<0||Pe>24)return null;const Et=1<<Pe,mt=je(Pe,Fe=Fe+Et&Et-1,$e);if(this.tiles[mt])return dt(this.tiles[mt],lt);bt>1&&console.log("drilling down to z%d-%d-%d",Pe,Fe,$e);let kt,Lt=Pe,It=Fe,Gt=$e;for(;!kt&&Lt>0;)Lt--,It>>=1,Gt>>=1,kt=this.tiles[je(Lt,It,Gt)];return kt&&kt.source?(bt>1&&(console.log("found parent tile z%d-%d-%d",Lt,It,Gt),console.time("drilling down")),this.splitTile(kt.source,Lt,It,Gt,Pe,Fe,$e),bt>1&&console.timeEnd("drilling down"),this.tiles[mt]?dt(this.tiles[mt],lt):null):null}}function je(rt,Pe,Fe){return 32*((1<<rt)*Fe+Pe)+rt}function Ue(rt,Pe){return Pe?rt.properties[Pe]:rt.id}function ct(rt,Pe){if(null==rt)return!0;if("Feature"===rt.type)return null!=Ue(rt,Pe);if("FeatureCollection"===rt.type){const Fe=new Set;for(const $e of rt.features){const at=Ue($e,Pe);if(null==at||Fe.has(at))return!1;Fe.add(at)}return!0}return!1}function _t(rt,Pe){const Fe=new Map;if(null!=rt)if("Feature"===rt.type)Fe.set(Ue(rt,Pe),rt);else for(const $e of rt.features)Fe.set(Ue($e,Pe),$e);return Fe}class Ut extends e{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Pe,Fe){return se._(this,void 0,void 0,function*(){const $e=Pe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const at=this._geoJSONIndex.getTile($e.z,$e.x,$e.y);if(!at)return null;const lt=new class{constructor(Et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=se.X,this.length=Et.length,this._features=Et}feature(Et){return new class{constructor(mt){this._feature=mt,this.extent=se.X,this.type=mt.type,this.properties=mt.tags,"id"in mt&&!isNaN(mt.id)&&(this.id=parseInt(mt.id,10))}loadGeometry(){if(1===this._feature.type){const mt=[];for(const kt of this._feature.geometry)mt.push([new se.P(kt[0],kt[1])]);return mt}{const mt=[];for(const kt of this._feature.geometry){const Lt=[];for(const It of kt)Lt.push(new se.P(It[0],It[1]));mt.push(Lt)}return mt}}toGeoJSON(mt,kt,Lt){return f.call(this,mt,kt,Lt)}}(this._features[Et])}}(at.features);let bt=E(lt);return 0===bt.byteOffset&&bt.byteLength===bt.buffer.byteLength||(bt=new Uint8Array(bt)),{vectorTile:lt,rawData:bt.buffer}})}loadData(Pe){return se._(this,void 0,void 0,function*(){var Fe;null===(Fe=this._pendingRequest)||void 0===Fe||Fe.abort();const $e=!!(Pe&&Pe.request&&Pe.request.collectResourceTiming)&&new se.bu(Pe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Pe,this._pendingRequest),this._geoJSONIndex=Pe.cluster?new K(function({superclusterOptions:bt,clusterProperties:Et}){if(!Et||!bt)return bt;const mt={},kt={},Lt={accumulated:null,zoom:0},It={properties:null},Gt=Object.keys(Et);for(const rn of Gt){const[un,zn]=Et[rn],Pn=se.bB(zn),En=se.bB("string"==typeof un?[un,["accumulated"],["get",rn]]:un);mt[rn]=Pn.value,kt[rn]=En.value}return bt.map=rn=>{It.properties=rn;const un={};for(const zn of Gt)un[zn]=mt[zn].evaluate(Lt,It);return un},bt.reduce=(rn,un)=>{It.properties=un;for(const zn of Gt)Lt.accumulated=rn[zn],rn[zn]=kt[zn].evaluate(Lt,It)},bt}(Pe)).load((yield this._pendingData).features):(at=yield this._pendingData,new Ze(at,Pe.geojsonVtOptions)),this.loaded={};const lt={};if($e){const bt=$e.finish();bt&&(lt.resourceTiming={},lt.resourceTiming[Pe.source]=JSON.parse(JSON.stringify(bt)))}return lt}catch(lt){if(delete this._pendingRequest,se.bA(lt))return{abandoned:!0};throw lt}var at})}getData(){return se._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Pe){const Fe=this.loaded;return Fe&&Fe[Pe.uid]?super.reloadTile(Pe):this.loadTile(Pe)}loadAndProcessGeoJSON(Pe,Fe){return se._(this,void 0,void 0,function*(){let $e=yield this.loadGeoJSON(Pe,Fe);if(delete this._pendingRequest,"object"!=typeof $e)throw new Error(`Input data given to '${Pe.source}' is not a valid GeoJSON object.`);if(re($e,!0),Pe.filter){const at=se.bB(Pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===at.result)throw new Error(at.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));$e={type:"FeatureCollection",features:$e.features.filter(bt=>at.value.evaluate({zoom:0},bt))}}return $e})}loadGeoJSON(Pe,Fe){return se._(this,void 0,void 0,function*(){const{promoteId:$e}=Pe;if(Pe.request){const at=yield se.h(Pe.request,Fe);return this._dataUpdateable=ct(at.data,$e)?_t(at.data,$e):void 0,at.data}if("string"==typeof Pe.data)try{const at=JSON.parse(Pe.data);return this._dataUpdateable=ct(at,$e)?_t(at,$e):void 0,at}catch{throw new Error(`Input data given to '${Pe.source}' is not a valid GeoJSON object.`)}if(!Pe.dataDiff)throw new Error(`Input data given to '${Pe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Pe.source}`);return function(at,lt,bt){var Et,mt,kt,Lt;if(lt.removeAll&&at.clear(),lt.remove)for(const It of lt.remove)at.delete(It);if(lt.add)for(const It of lt.add){const Gt=Ue(It,bt);null!=Gt&&at.set(Gt,It)}if(lt.update)for(const It of lt.update){let Gt=at.get(It.id);if(null==Gt)continue;const rn=!It.removeAllProperties&&((null===(Et=It.removeProperties)||void 0===Et?void 0:Et.length)>0||(null===(mt=It.addOrUpdateProperties)||void 0===mt?void 0:mt.length)>0);if((It.newGeometry||It.removeAllProperties||rn)&&(Gt=Object.assign({},Gt),at.set(It.id,Gt),rn&&(Gt.properties=Object.assign({},Gt.properties))),It.newGeometry&&(Gt.geometry=It.newGeometry),It.removeAllProperties)Gt.properties={};else if((null===(kt=It.removeProperties)||void 0===kt?void 0:kt.length)>0)for(const un of It.removeProperties)Object.prototype.hasOwnProperty.call(Gt.properties,un)&&delete Gt.properties[un];if((null===(Lt=It.addOrUpdateProperties)||void 0===Lt?void 0:Lt.length)>0)for(const{key:un,value:zn}of It.addOrUpdateProperties)Gt.properties[un]=zn}}(this._dataUpdateable,Pe.dataDiff,$e),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Pe){return se._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Pe){return this._geoJSONIndex.getClusterExpansionZoom(Pe.clusterId)}getClusterChildren(Pe){return this._geoJSONIndex.getChildren(Pe.clusterId)}getClusterLeaves(Pe){return this._geoJSONIndex.getLeaves(Pe.clusterId,Pe.limit,Pe.offset)}}class jt{constructor(Pe){this.self=Pe,this.actor=new se.F(Pe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Fe,$e)=>{if(this.externalWorkerSourceTypes[Fe])throw new Error(`Worker source with name "${Fe}" already registered.`);this.externalWorkerSourceTypes[Fe]=$e},this.self.addProtocol=se.bh,this.self.removeProtocol=se.bi,this.self.registerRTLTextPlugin=Fe=>{if(se.bC.isParsed())throw new Error("RTL text plugin already registered.");se.bC.setMethods(Fe)},this.actor.registerMessageHandler("LDT",(Fe,$e)=>this._getDEMWorkerSource(Fe,$e.source).loadTile($e)),this.actor.registerMessageHandler("RDT",(Fe,$e)=>se._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Fe,$e.source).removeTile($e)})),this.actor.registerMessageHandler("GCEZ",(Fe,$e)=>se._(this,void 0,void 0,function*(){return this._getWorkerSource(Fe,$e.type,$e.source).getClusterExpansionZoom($e)})),this.actor.registerMessageHandler("GCC",(Fe,$e)=>se._(this,void 0,void 0,function*(){return this._getWorkerSource(Fe,$e.type,$e.source).getClusterChildren($e)})),this.actor.registerMessageHandler("GCL",(Fe,$e)=>se._(this,void 0,void 0,function*(){return this._getWorkerSource(Fe,$e.type,$e.source).getClusterLeaves($e)})),this.actor.registerMessageHandler("LD",(Fe,$e)=>this._getWorkerSource(Fe,$e.type,$e.source).loadData($e)),this.actor.registerMessageHandler("GD",(Fe,$e)=>this._getWorkerSource(Fe,$e.type,$e.source).getData()),this.actor.registerMessageHandler("LT",(Fe,$e)=>this._getWorkerSource(Fe,$e.type,$e.source).loadTile($e)),this.actor.registerMessageHandler("RT",(Fe,$e)=>this._getWorkerSource(Fe,$e.type,$e.source).reloadTile($e)),this.actor.registerMessageHandler("AT",(Fe,$e)=>this._getWorkerSource(Fe,$e.type,$e.source).abortTile($e)),this.actor.registerMessageHandler("RMT",(Fe,$e)=>this._getWorkerSource(Fe,$e.type,$e.source).removeTile($e)),this.actor.registerMessageHandler("RS",(Fe,$e)=>se._(this,void 0,void 0,function*(){if(!this.workerSources[Fe]||!this.workerSources[Fe][$e.type]||!this.workerSources[Fe][$e.type][$e.source])return;const at=this.workerSources[Fe][$e.type][$e.source];delete this.workerSources[Fe][$e.type][$e.source],void 0!==at.removeSource&&at.removeSource($e)})),this.actor.registerMessageHandler("RM",Fe=>se._(this,void 0,void 0,function*(){delete this.layerIndexes[Fe],delete this.availableImages[Fe],delete this.workerSources[Fe],delete this.demWorkerSources[Fe]})),this.actor.registerMessageHandler("SR",(Fe,$e)=>se._(this,void 0,void 0,function*(){this.referrer=$e})),this.actor.registerMessageHandler("SRPS",(Fe,$e)=>this._syncRTLPluginState(Fe,$e)),this.actor.registerMessageHandler("IS",(Fe,$e)=>se._(this,void 0,void 0,function*(){this.self.importScripts($e)})),this.actor.registerMessageHandler("SI",(Fe,$e)=>this._setImages(Fe,$e)),this.actor.registerMessageHandler("UL",(Fe,$e)=>se._(this,void 0,void 0,function*(){this._getLayerIndex(Fe).update($e.layers,$e.removedIds)})),this.actor.registerMessageHandler("SL",(Fe,$e)=>se._(this,void 0,void 0,function*(){this._getLayerIndex(Fe).replace($e)}))}_setImages(Pe,Fe){return se._(this,void 0,void 0,function*(){this.availableImages[Pe]=Fe;for(const $e in this.workerSources[Pe]){const at=this.workerSources[Pe][$e];for(const lt in at)at[lt].availableImages=Fe}})}_syncRTLPluginState(Pe,Fe){return se._(this,void 0,void 0,function*(){if(se.bC.isParsed())return se.bC.getState();if("loading"!==Fe.pluginStatus)return se.bC.setState(Fe),Fe;const $e=Fe.pluginURL;if(this.self.importScripts($e),se.bC.isParsed()){const at={pluginStatus:"loaded",pluginURL:$e};return se.bC.setState(at),at}throw se.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${$e}`)})}_getAvailableImages(Pe){let Fe=this.availableImages[Pe];return Fe||(Fe=[]),Fe}_getLayerIndex(Pe){let Fe=this.layerIndexes[Pe];return Fe||(Fe=this.layerIndexes[Pe]=new y),Fe}_getWorkerSource(Pe,Fe,$e){if(this.workerSources[Pe]||(this.workerSources[Pe]={}),this.workerSources[Pe][Fe]||(this.workerSources[Pe][Fe]={}),!this.workerSources[Pe][Fe][$e]){const at={sendAsync:(lt,bt)=>(lt.targetMapId=Pe,this.actor.sendAsync(lt,bt))};switch(Fe){case"vector":this.workerSources[Pe][Fe][$e]=new e(at,this._getLayerIndex(Pe),this._getAvailableImages(Pe));break;case"geojson":this.workerSources[Pe][Fe][$e]=new Ut(at,this._getLayerIndex(Pe),this._getAvailableImages(Pe));break;default:this.workerSources[Pe][Fe][$e]=new this.externalWorkerSourceTypes[Fe](at,this._getLayerIndex(Pe),this._getAvailableImages(Pe))}}return this.workerSources[Pe][Fe][$e]}_getDEMWorkerSource(Pe,Fe){return this.demWorkerSources[Pe]||(this.demWorkerSources[Pe]={}),this.demWorkerSources[Pe][Fe]||(this.demWorkerSources[Pe][Fe]=new V),this.demWorkerSources[Pe][Fe]}}return se.i(self)&&(self.worker=new jt(self)),jt}),le("index",0,function(se,y){var k="4.5.0";let fe,ee;const e={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:Z=>new Promise((a,d)=>{const w=requestAnimationFrame(a);Z.signal.addEventListener("abort",()=>{cancelAnimationFrame(w),d(y.c())})}),getImageData(Z,a=0){return this.getImageCanvasContext(Z).getImageData(-a,-a,Z.width+2*a,Z.height+2*a)},getImageCanvasContext(Z){const a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=Z.width,a.height=Z.height,d.drawImage(Z,0,0,Z.width,Z.height),d},resolveURL:Z=>(fe||(fe=document.createElement("a")),fe.href=Z,fe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==ee&&(ee=matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}};class V{static testProp(a){if(!V.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in V.docStyle)return a[d];return a[0]}static create(a,d,w){const T=window.document.createElement(a);return void 0!==d&&(T.className=d),w&&w.appendChild(T),T}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){V.docStyle&&V.selectProp&&(V.userSelect=V.docStyle[V.selectProp],V.docStyle[V.selectProp]="none")}static enableDrag(){V.docStyle&&V.selectProp&&(V.docStyle[V.selectProp]=V.userSelect)}static setTransform(a,d){a.style[V.transformProp]=d}static addEventListener(a,d,w,T={}){a.addEventListener(d,w,"passive"in T?T:T.capture)}static removeEventListener(a,d,w,T={}){a.removeEventListener(d,w,"passive"in T?T:T.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",V.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",V.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",V.suppressClickInternal,!0)},0)}static getScale(a){const d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,w){const T=d.boundingClientRect;return new y.P((w.clientX-T.left)/d.x-a.clientLeft,(w.clientY-T.top)/d.y-a.clientTop)}static mousePos(a,d){const w=V.getScale(a);return V.getPoint(a,w,d)}static touchPos(a,d){const w=[],T=V.getScale(a);for(let Y=0;Y<d.length;Y++)w.push(V.getPoint(a,T,d[Y]));return w}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}V.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,V.selectProp=V.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),V.transformProp=V.testProp(["transform","WebkitTransform"]);const H={supported:!1,testSupport:function(Z){!f&&re&&(c?$(Z):te=Z)}};let te,re,f=!1,c=!1;function $(Z){const a=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,a);try{if(Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,Z.RGBA,Z.UNSIGNED_BYTE,re),Z.isContextLost())return;H.supported=!0}catch{}Z.deleteTexture(a),f=!0}var ae;typeof document<"u"&&(re=document.createElement("img"),re.onload=()=>{te&&$(te),te=null,c=!0},re.onerror=()=>{f=!0,te=null},re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(Z){let a,d,w,T;Z.resetRequestQueue=()=>{a=[],d=0,w=0,T={}},Z.addThrottleControl=Se=>{const ke=w++;return T[ke]=Se,ke},Z.removeThrottleControl=Se=>{delete T[Se],ge()},Z.getImage=(Se,ke,ze=!0)=>new Promise((Be,tt)=>{H.supported&&(Se.headers||(Se.headers={}),Se.headers.accept="image/webp,*/*"),y.e(Se,{type:"image"}),a.push({abortController:ke,requestParameters:Se,supportImageRefresh:ze,state:"queued",onError:ot=>{tt(ot)},onSuccess:ot=>{Be(ot)}}),ge()});const Y=Se=>y._(this,void 0,void 0,function*(){Se.state="running";const{requestParameters:ke,supportImageRefresh:ze,onError:Be,onSuccess:tt,abortController:ot}=Se,ht=!1===ze&&!y.i(self)&&!y.g(ke.url)&&(!ke.headers||Object.keys(ke.headers).reduce((Ct,Mt)=>Ct&&"accept"===Mt,!0));d++;const wt=ht?ve(ke,ot):y.m(ke,ot);try{const Ct=yield wt;delete Se.abortController,Se.state="completed",Ct.data instanceof HTMLImageElement||y.b(Ct.data)?tt(Ct):Ct.data&&tt({data:yield(gt=Ct.data,"function"==typeof createImageBitmap?y.d(gt):y.f(gt)),cacheControl:Ct.cacheControl,expires:Ct.expires})}catch(Ct){delete Se.abortController,Be(Ct)}finally{d--,ge()}var gt}),ge=()=>{const Se=(()=>{for(const ke of Object.keys(T))if(T[ke]())return!0;return!1})()?y.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:y.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ke=d;ke<Se&&a.length>0;ke++){const ze=a.shift();ze.abortController.signal.aborted?ke--:Y(ze)}},ve=(Se,ke)=>new Promise((ze,Be)=>{const tt=new Image,ot=Se.url,ht=Se.credentials;ht&&"include"===ht?tt.crossOrigin="use-credentials":(ht&&"same-origin"===ht||!y.s(ot))&&(tt.crossOrigin="anonymous"),ke.signal.addEventListener("abort",()=>{tt.src="",Be(y.c())}),tt.fetchPriority="high",tt.onload=()=>{tt.onerror=tt.onload=null,ze({data:tt})},tt.onerror=()=>{tt.onerror=tt.onload=null,ke.signal.aborted||Be(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},tt.src=ot})}(ae||(ae={})),ae.resetRequestQueue();class oe{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function W(Z){var a=new y.A(3);return a[0]=Z[0],a[1]=Z[1],a[2]=Z[2],a}var N,O=function(Z,a,d){return Z[0]=a[0]-d[0],Z[1]=a[1]-d[1],Z[2]=a[2]-d[2],Z};N=new y.A(3),y.A!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0);var Z,M=function(Z){var a=Z[0],d=Z[1];return a*a+d*d};function A(Z){const a=[];if("string"==typeof Z)a.push({id:"default",url:Z});else if(Z&&Z.length>0){const d=[];for(const{id:w,url:T}of Z){const Y=`${w}${T}`;-1===d.indexOf(Y)&&(d.push(Y),a.push({id:w,url:T}))}}return a}function b(Z,a,d){const w=Z.split("?");return w[0]+=`${a}${d}`,w.join("?")}Z=new y.A(2),y.A!=Float32Array&&(Z[0]=0,Z[1]=0);class q{constructor(a,d,w,T){this.context=a,this.format=w,this.texture=a.gl.createTexture(),this.update(d,T)}update(a,d,w){const{width:T,height:Y}=a,ge=!(this.size&&this.size[0]===T&&this.size[1]===Y||w),{context:ve}=this,{gl:Se}=ve;if(this.useMipmap=!(!d||!d.useMipmap),Se.bindTexture(Se.TEXTURE_2D,this.texture),ve.pixelStoreUnpackFlipY.set(!1),ve.pixelStoreUnpack.set(1),ve.pixelStoreUnpackPremultiplyAlpha.set(this.format===Se.RGBA&&(!d||!1!==d.premultiply)),ge)this.size=[T,Y],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||y.b(a)?Se.texImage2D(Se.TEXTURE_2D,0,this.format,this.format,Se.UNSIGNED_BYTE,a):Se.texImage2D(Se.TEXTURE_2D,0,this.format,T,Y,0,this.format,Se.UNSIGNED_BYTE,a.data);else{const{x:ke,y:ze}=w||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||y.b(a)?Se.texSubImage2D(Se.TEXTURE_2D,0,ke,ze,Se.RGBA,Se.UNSIGNED_BYTE,a):Se.texSubImage2D(Se.TEXTURE_2D,0,ke,ze,T,Y,Se.RGBA,Se.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Se.generateMipmap(Se.TEXTURE_2D)}bind(a,d,w){const{context:T}=this,{gl:Y}=T;Y.bindTexture(Y.TEXTURE_2D,this.texture),w!==Y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=Y.LINEAR),a!==this.filter&&(Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,a),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,w||a),this.filter=a),d!==this.wrap&&(Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,d),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function C(Z){const{userImage:a}=Z;return!!(a&&a.render&&a.render())&&(Z.data.replace(new Uint8Array(a.data.buffer)),!0)}class P extends y.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new y.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,promiseResolve:w}of this.requestors)w(this._getImagesForIds(d));this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const w=d.spriteData;d.data=new y.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let w=!0;const T=d.data||d.spriteData;return this._validateStretch(d.stretchX,T&&T.width)||(this.fire(new y.j(new Error(`Image "${a}" has invalid "stretchX" value`))),w=!1),this._validateStretch(d.stretchY,T&&T.height)||(this.fire(new y.j(new Error(`Image "${a}" has invalid "stretchY" value`))),w=!1),this._validateContent(d.content,d)||(this.fire(new y.j(new Error(`Image "${a}" has invalid "content" value`))),w=!1),w}_validateStretch(a,d){if(!a)return!0;let w=0;for(const T of a){if(T[0]<w||T[1]<T[0]||d<T[1])return!1;w=T[1]}return!0}_validateContent(a,d){if(!a)return!0;if(4!==a.length)return!1;const w=d.spriteData,T=w&&w.width||d.data.width,Y=w&&w.height||d.data.height;return!(a[0]<0||T<a[0]||a[1]<0||Y<a[1]||a[2]<0||T<a[2]||a[3]<0||Y<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,w=!0){const T=this.getImage(a);if(w&&(T.data.width!==d.data.width||T.data.height!==d.data.height))throw new Error(`size mismatch between old image (${T.data.width}x${T.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=T.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((d,w)=>{let T=!0;if(!this.isLoaded())for(const Y of a)this.images[Y]||(T=!1);this.isLoaded()||T?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})})}_getImagesForIds(a){const d={};for(const w of a){let T=this.getImage(w);T||(this.fire(new y.k("styleimagemissing",{id:w})),T=this.getImage(w)),T?d[w]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,textFitWidth:T.textFitWidth,textFitHeight:T.textFitHeight,hasRenderCallback:!(!T.userImage||!T.userImage.render)}:y.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],w=this.getImage(a);if(!w)return null;if(d&&d.position.version===w.version)return d.position;if(d)d.position.version=w.version;else{const T={w:w.data.width+2,h:w.data.height+2,x:0,y:0},Y=new y.I(T,w);this.patterns[a]={bin:T,position:Y}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const Y in this.patterns)a.push(this.patterns[Y].bin);const{w:d,h:w}=y.p(a),T=this.atlasImage;T.resize({width:d||1,height:w||1});for(const Y in this.patterns){const{bin:ge}=this.patterns[Y],ve=ge.x+1,Se=ge.y+1,ke=this.getImage(Y).data,ze=ke.width,Be=ke.height;y.R.copy(ke,T,{x:0,y:0},{x:ve,y:Se},{width:ze,height:Be}),y.R.copy(ke,T,{x:0,y:Be-1},{x:ve,y:Se-1},{width:ze,height:1}),y.R.copy(ke,T,{x:0,y:0},{x:ve,y:Se+Be},{width:ze,height:1}),y.R.copy(ke,T,{x:ze-1,y:0},{x:ve-1,y:Se},{width:1,height:Be}),y.R.copy(ke,T,{x:0,y:0},{x:ve+ze,y:Se},{width:1,height:Be})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const w=this.getImage(d);w||y.w(`Image with ID: "${d}" was not found`),C(w)&&this.updateImage(d,w)}}}const F=1e20;function I(Z,a,d,w,T,Y,ge,ve,Se){for(let ke=a;ke<a+w;ke++)j(Z,d*Y+ke,Y,T,ge,ve,Se);for(let ke=d;ke<d+T;ke++)j(Z,ke*Y+a,1,w,ge,ve,Se)}function j(Z,a,d,w,T,Y,ge){Y[0]=0,ge[0]=-F,ge[1]=F,T[0]=Z[a];for(let ve=1,Se=0,ke=0;ve<w;ve++){T[ve]=Z[a+ve*d];const ze=ve*ve;do{const Be=Y[Se];ke=(T[ve]-T[Be]+ze-Be*Be)/(ve-Be)/2}while(ke<=ge[Se]&&--Se>-1);Se++,Y[Se]=ve,ge[Se]=ke,ge[Se+1]=F}for(let ve=0,Se=0;ve<w;ve++){for(;ge[Se+1]<ve;)Se++;const ke=Y[Se],ze=ve-ke;Z[a+ve*d]=T[ke]+ze*ze}}class E{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return y._(this,void 0,void 0,function*(){const d=[];for(const Y in a)for(const ge of a[Y])d.push(this._getAndCacheGlyphsPromise(Y,ge));const w=yield Promise.all(d),T={};for(const{stack:Y,id:ge,glyph:ve}of w)T[Y]||(T[Y]={}),T[Y][ge]=ve&&{id:ve.id,bitmap:ve.bitmap.clone(),metrics:ve.metrics};return T})}_getAndCacheGlyphsPromise(a,d){return y._(this,void 0,void 0,function*(){let w=this.entries[a];w||(w=this.entries[a]={glyphs:{},requests:{},ranges:{}});let T=w.glyphs[d];if(void 0!==T)return{stack:a,id:d,glyph:T};if(T=this._tinySDF(w,a,d),T)return w.glyphs[d]=T,{stack:a,id:d,glyph:T};const Y=Math.floor(d/256);if(256*Y>65535)throw new Error("glyphs > 65535 not supported");if(w.ranges[Y])return{stack:a,id:d,glyph:T};if(!this.url)throw new Error("glyphsUrl is not set");if(!w.requests[Y]){const ve=E.loadGlyphRange(a,Y,this.url,this.requestManager);w.requests[Y]=ve}const ge=yield w.requests[Y];for(const ve in ge)this._doesCharSupportLocalGlyph(+ve)||(w.glyphs[+ve]=ge[+ve]);return w.ranges[Y]=!0,{stack:a,id:d,glyph:ge[d]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(y.u["CJK Unified Ideographs"](a)||y.u["Hangul Syllables"](a)||y.u.Hiragana(a)||y.u.Katakana(a))}_tinySDF(a,d,w){const T=this.localIdeographFontFamily;if(!T||!this._doesCharSupportLocalGlyph(w))return;let Y=a.tinySDF;if(!Y){let ve="400";/bold/i.test(d)?ve="900":/medium/i.test(d)?ve="500":/light/i.test(d)&&(ve="200"),Y=a.tinySDF=new E.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:T,fontWeight:ve})}const ge=Y.draw(String.fromCharCode(w));return{id:w,bitmap:new y.o({width:ge.width||60,height:ge.height||60},ge.data),metrics:{width:ge.glyphWidth/2||24,height:ge.glyphHeight/2||24,left:ge.glyphLeft/2+.5||0,top:ge.glyphTop/2-27.5||-8,advance:ge.glyphAdvance/2||24,isDoubleResolution:!0}}}}E.loadGlyphRange=function(Z,a,d,w){return y._(this,void 0,void 0,function*(){const T=256*a,Y=T+255,ge=w.transformRequest(d.replace("{fontstack}",Z).replace("{range}",`${T}-${Y}`),"Glyphs"),ve=yield y.l(ge,new AbortController);if(!ve||!ve.data)throw new Error(`Could not load glyph range. range: ${a}, ${T}-${Y}`);const Se={};for(const ke of y.n(ve.data))Se[ke.id]=ke;return Se})},E.TinySDF=class{constructor({fontSize:Z=24,buffer:a=3,radius:d=8,cutoff:w=.25,fontFamily:T="sans-serif",fontWeight:Y="normal",fontStyle:ge="normal"}={}){this.buffer=a,this.cutoff=w,this.radius=d;const ve=this.size=Z+4*a,Se=this._createCanvas(ve),ke=this.ctx=Se.getContext("2d",{willReadFrequently:!0});ke.font=`${ge} ${Y} ${Z}px ${T}`,ke.textBaseline="alphabetic",ke.textAlign="left",ke.fillStyle="black",this.gridOuter=new Float64Array(ve*ve),this.gridInner=new Float64Array(ve*ve),this.f=new Float64Array(ve),this.z=new Float64Array(ve+1),this.v=new Uint16Array(ve)}_createCanvas(Z){const a=document.createElement("canvas");return a.width=a.height=Z,a}draw(Z){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:w,actualBoundingBoxLeft:T,actualBoundingBoxRight:Y}=this.ctx.measureText(Z),ge=Math.ceil(d),ve=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(Y-T))),Se=Math.min(this.size-this.buffer,ge+Math.ceil(w)),ke=ve+2*this.buffer,ze=Se+2*this.buffer,Be=Math.max(ke*ze,0),tt=new Uint8ClampedArray(Be),ot={data:tt,width:ke,height:ze,glyphWidth:ve,glyphHeight:Se,glyphTop:ge,glyphLeft:0,glyphAdvance:a};if(0===ve||0===Se)return ot;const{ctx:ht,buffer:wt,gridInner:gt,gridOuter:Ct}=this;ht.clearRect(wt,wt,ve,Se),ht.fillText(Z,wt,wt+ge);const Mt=ht.getImageData(wt,wt,ve,Se);Ct.fill(F,0,Be),gt.fill(0,0,Be);for(let vt=0;vt<Se;vt++)for(let Pt=0;Pt<ve;Pt++){const Nt=Mt.data[4*(vt*ve+Pt)+3]/255;if(0===Nt)continue;const Vt=(vt+wt)*ke+Pt+wt;if(1===Nt)Ct[Vt]=0,gt[Vt]=F;else{const Kt=.5-Nt;Ct[Vt]=Kt>0?Kt*Kt:0,gt[Vt]=Kt<0?Kt*Kt:0}}I(Ct,0,0,ke,ze,ke,this.f,this.v,this.z),I(gt,wt,wt,ve,Se,ke,this.f,this.v,this.z);for(let vt=0;vt<Be;vt++){const Pt=Math.sqrt(Ct[vt])-Math.sqrt(gt[vt]);tt[vt]=Math.round(255-255*(Pt/this.radius+this.cutoff))}return ot}};class x{constructor(){this.specification=y.v.light.position}possiblyEvaluate(a,d){return y.y(a.expression.evaluate(d))}interpolate(a,d,w){return{x:y.z.number(a.x,d.x,w),y:y.z.number(a.y,d.y,w),z:y.z.number(a.z,d.z,w)}}}let p;class m extends y.E{constructor(a){super(),p=p||new y.q({anchor:new y.D(y.v.light.anchor),position:new x,color:new y.D(y.v.light.color),intensity:new y.D(y.v.light.intensity)}),this._transitionable=new y.T(p),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(y.r,a,d))for(const w in a){const T=a[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),T):this._transitionable.setValue(w,T)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,w){return(!w||!1!==w.validate)&&y.t(this,a.call(y.x,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:y.v}))}}const _=new y.q({"sky-color":new y.D(y.v.sky["sky-color"]),"horizon-color":new y.D(y.v.sky["horizon-color"]),"fog-color":new y.D(y.v.sky["fog-color"]),"fog-ground-blend":new y.D(y.v.sky["fog-ground-blend"]),"horizon-fog-blend":new y.D(y.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new y.D(y.v.sky["sky-horizon-blend"]),"atmosphere-blend":new y.D(y.v.sky["atmosphere-blend"])});class R extends y.E{constructor(a){super(),this._transitionable=new y.T(_),this.setSky(a),this._transitioning=this._transitionable.untransitioned()}setSky(a,d={}){if(!this._validate(y.B,a,d))for(const w in a){const T=a[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),T):this._transitionable.setValue(w,T)}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,w={}){return!1!==w?.validate&&y.t(this,a.call(y.x,y.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:y.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class G{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const w=a.join(",")+String(d);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(a,d)),this.dashEntry[w]}getDashRanges(a,d,w){const T=[];let Y=a.length%2==1?-a[a.length-1]*w:0,ge=a[0]*w,ve=!0;T.push({left:Y,right:ge,isDash:ve,zeroLength:0===a[0]});let Se=a[0];for(let ke=1;ke<a.length;ke++){ve=!ve;const ze=a[ke];Y=Se*w,Se+=ze,ge=Se*w,T.push({left:Y,right:ge,isDash:ve,zeroLength:0===ze})}return T}addRoundDash(a,d,w){const T=d/2;for(let Y=-w;Y<=w;Y++){const ge=this.width*(this.nextRow+w+Y);let ve=0,Se=a[ve];for(let ke=0;ke<this.width;ke++){ke/Se.right>1&&(Se=a[++ve]);const ze=Math.abs(ke-Se.left),Be=Math.abs(ke-Se.right),tt=Math.min(ze,Be);let ot;const ht=Y/w*(T+1);if(Se.isDash){const wt=T-Math.abs(ht);ot=Math.sqrt(tt*tt+wt*wt)}else ot=T-Math.sqrt(tt*tt+ht*ht);this.data[ge+ke]=Math.max(0,Math.min(255,ot+128))}}}addRegularDash(a){for(let ve=a.length-1;ve>=0;--ve){const Se=a[ve],ke=a[ve+1];Se.zeroLength?a.splice(ve,1):ke&&ke.isDash===Se.isDash&&(ke.left=Se.left,a.splice(ve,1))}const d=a[0],w=a[a.length-1];d.isDash===w.isDash&&(d.left=w.left-this.width,w.right=d.right+this.width);const T=this.width*this.nextRow;let Y=0,ge=a[Y];for(let ve=0;ve<this.width;ve++){ve/ge.right>1&&(ge=a[++Y]);const Se=Math.abs(ve-ge.left),ke=Math.abs(ve-ge.right),ze=Math.min(Se,ke);this.data[T+ve]=Math.max(0,Math.min(255,(ge.isDash?ze:-ze)+128))}}addDash(a,d){const w=d?7:0,T=2*w+1;if(this.nextRow+T>this.height)return y.w("LineAtlas out of space"),null;let Y=0;for(let ve=0;ve<a.length;ve++)Y+=a[ve];if(0!==Y){const ve=this.width/Y,Se=this.getDashRanges(a,this.width,ve);d?this.addRoundDash(Se,ve,w):this.addRegularDash(Se)}const ge={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:Y};return this.nextRow+=T,this.dirty=!0,ge}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const K="maplibre_preloaded_worker_pool";class U{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<U.workerCount;)this.workers.push(new Worker(y.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[K]}numActive(){return Object.keys(this.active).length}}const z=Math.floor(e.hardwareConcurrency/2);let L,S;function B(){return L||(L=new U),L}U.workerCount=y.C(globalThis)?Math.max(Math.min(z,3),1):1;class J{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;const w=this.workerPool.acquire(d);for(let T=0;T<w.length;T++){const Y=new y.F(w[T],d);Y.name=`Worker ${T}`,this.actors.push(Y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){const w=[];for(const T of this.actors)w.push(T.sendAsync({type:a,data:d}));return Promise.all(w)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(const w of this.actors)w.registerMessageHandler(a,d)}}function ie(){return S||(S=new J(B(),y.G),S.registerMessageHandler("GR",(Z,a,d)=>y.m(a,d))),S}function ce(Z,a){const d=y.H();return y.J(d,d,[1,1,0]),y.K(d,d,[.5*Z.width,.5*Z.height,1]),y.L(d,d,Z.calculatePosMatrix(a.toUnwrapped()))}function pe(Z,a,d,w,T,Y){const ge=function(Be,tt,ot){if(Be)for(const ht of Be){const wt=tt[ht];if(wt&&wt.source===ot&&"fill-extrusion"===wt.type)return!0}else for(const ht in tt){const wt=tt[ht];if(wt.source===ot&&"fill-extrusion"===wt.type)return!0}return!1}(T&&T.layers,a,Z.id),ve=Y.maxPitchScaleFactor(),Se=Z.tilesIn(w,ve,ge);Se.sort(ye);const ke=[];for(const Be of Se)ke.push({wrappedTileID:Be.tileID.wrapped().key,queryResults:Be.tile.queryRenderedFeatures(a,d,Z._state,Be.queryGeometry,Be.cameraQueryGeometry,Be.scale,T,Y,ve,ce(Z.transform,Be.tileID))});const ze=function(Be){const tt={},ot={};for(const ht of Be){const wt=ht.queryResults,gt=ht.wrappedTileID,Ct=ot[gt]=ot[gt]||{};for(const Mt in wt){const vt=wt[Mt],Pt=Ct[Mt]=Ct[Mt]||{},Nt=tt[Mt]=tt[Mt]||[];for(const Vt of vt)Pt[Vt.featureIndex]||(Pt[Vt.featureIndex]=!0,Nt.push(Vt))}}return tt}(ke);for(const Be in ze)ze[Be].forEach(tt=>{const ot=tt.feature,ht=Z.getFeatureState(ot.layer["source-layer"],ot.id);ot.source=ot.layer.source,ot.layer["source-layer"]&&(ot.sourceLayer=ot.layer["source-layer"]),ot.state=ht});return ze}function ye(Z,a){const d=Z.tileID,w=a.tileID;return d.overscaledZ-w.overscaledZ||d.canonical.y-w.canonical.y||d.wrap-w.wrap||d.canonical.x-w.canonical.x}function Te(Z,a,d){return y._(this,void 0,void 0,function*(){let w=Z;if(Z.url?w=(yield y.h(a.transformRequest(Z.url,"Source"),d)).data:yield e.frameAsync(d),!w)return null;const T=y.M(y.e(w,Z),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in w&&w.vector_layers&&(T.vectorLayerIds=w.vector_layers.map(Y=>Y.id)),T})}class _e{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof y.N?new y.N(a.lng,a.lat):y.N.convert(a),this}setSouthWest(a){return this._sw=a instanceof y.N?new y.N(a.lng,a.lat):y.N.convert(a),this}extend(a){const d=this._sw,w=this._ne;let T,Y;if(a instanceof y.N)T=a,Y=a;else{if(!(a instanceof _e))return Array.isArray(a)?4===a.length||a.every(Array.isArray)?this.extend(_e.convert(a)):this.extend(y.N.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(y.N.convert(a)):this;if(T=a._sw,Y=a._ne,!T||!Y)return this}return d||w?(d.lng=Math.min(T.lng,d.lng),d.lat=Math.min(T.lat,d.lat),w.lng=Math.max(Y.lng,w.lng),w.lat=Math.max(Y.lat,w.lat)):(this._sw=new y.N(T.lng,T.lat),this._ne=new y.N(Y.lng,Y.lat)),this}getCenter(){return new y.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new y.N(this.getWest(),this.getNorth())}getSouthEast(){return new y.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:w}=y.N.convert(a);let T=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(T=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&T}static convert(a){return a instanceof _e?a:a&&new _e(a)}static fromLngLat(a,d=0){const w=360*d/40075017,T=w/Math.cos(Math.PI/180*a.lat);return new _e(new y.N(a.lng-T,a.lat-w),new y.N(a.lng+T,a.lat+w))}}class we{constructor(a,d,w){this.bounds=_e.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=w||24}validateBounds(a){return Array.isArray(a)&&4===a.length?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),w=Math.floor(y.O(this.bounds.getWest())*d),T=Math.floor(y.Q(this.bounds.getNorth())*d),Y=Math.ceil(y.O(this.bounds.getEast())*d),ge=Math.ceil(y.Q(this.bounds.getSouth())*d);return a.x>=w&&a.x<Y&&a.y>=T&&a.y<ge}}class De extends y.E{constructor(a,d,w,T){if(super(),this.id=a,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,y.e(this,y.M(d,["url","scheme","tileSize","promoteId"])),this._options=y.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T)}load(){return y._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new y.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Te(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(y.e(this,a),a.bounds&&(this.tileBounds=new we(a.bounds,this.minzoom,this.maxzoom)),this.fire(new y.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new y.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new y.j(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return y.e({},this._options)}loadTile(a){return y._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(d,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};w.request.collectResourceTiming=this._collectResourceTiming;let T="RT";if(a.actor&&"expired"!==a.state){if("loading"===a.state)return new Promise((Y,ge)=>{a.reloadPromise={resolve:Y,reject:ge}})}else a.actor=this.dispatcher.getActor(),T="LT";a.abortController=new AbortController;try{const Y=yield a.actor.sendAsync({type:T,data:w},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,Y)}catch(Y){if(delete a.abortController,a.aborted)return;if(Y&&404!==Y.status)throw Y;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){const w=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(w.resolve).catch(w.reject)}}abortTile(a){return y._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return y._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class xe extends y.E{constructor(a,d,w,T){super(),this.id=a,this.dispatcher=w,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=y.e({type:"raster"},d),y.e(this,y.M(d,["url","scheme","tileSize"]))}load(){return y._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new y.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Te(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(y.e(this,a),a.bounds&&(this.tileBounds=new we(a.bounds,this.minzoom,this.maxzoom)),this.fire(new y.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new y.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new y.j(a))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return y.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return y._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const w=yield ae.getImage(this.map._requestManager.transformRequest(d,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(w&&w.data){this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&a.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const T=this.map.painter.context,Y=T.gl,ge=w.data;a.texture=this.map.painter.getTileTexture(ge.width),a.texture?a.texture.update(ge,{useMipmap:!0}):(a.texture=new q(T,ge,Y.RGBA,{useMipmap:!0}),a.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&Y.texParameterf(Y.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),a.state="loaded"}}catch(w){if(delete a.abortController,a.aborted)a.state="unloaded";else if(w)throw a.state="errored",w}})}abortTile(a){return y._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return y._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class Ce extends xe{constructor(a,d,w,T){super(a,d,w,T),this.type="raster-dem",this.maxzoom=22,this._options=y.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return y._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w=this.map._requestManager.transformRequest(d,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const T=yield ae.getImage(w,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(T&&T.data){const Y=T.data;this.map._refreshExpiredTiles&&T.cacheControl&&T.expires&&a.setExpiryData({cacheControl:T.cacheControl,expires:T.expires});const ge=y.b(Y)&&y.U()?Y:yield this.readImageNow(Y),ve={type:this.type,uid:a.uid,source:this.id,rawImageData:ge,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||"expired"===a.state){a.actor=this.dispatcher.getActor();const Se=yield a.actor.sendAsync({type:"LDT",data:ve});a.dem=Se,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(T){if(delete a.abortController,a.aborted)a.state="unloaded";else if(T)throw a.state="errored",T}})}readImageNow(a){return y._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&y.V()){const d=a.width+2,w=a.height+2;try{return new y.R({width:d,height:w},yield y.W(a,-1,-1,d,w))}catch{}}return e.getImageData(a,1)})}_getNeighboringTiles(a){const d=a.canonical,w=Math.pow(2,d.z),T=(d.x-1+w)%w,Y=0===d.x?a.wrap-1:a.wrap,ge=(d.x+1+w)%w,ve=d.x+1===w?a.wrap+1:a.wrap,Se={};return Se[new y.S(a.overscaledZ,Y,d.z,T,d.y).key]={backfilled:!1},Se[new y.S(a.overscaledZ,ve,d.z,ge,d.y).key]={backfilled:!1},d.y>0&&(Se[new y.S(a.overscaledZ,Y,d.z,T,d.y-1).key]={backfilled:!1},Se[new y.S(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},Se[new y.S(a.overscaledZ,ve,d.z,ge,d.y-1).key]={backfilled:!1}),d.y+1<w&&(Se[new y.S(a.overscaledZ,Y,d.z,T,d.y+1).key]={backfilled:!1},Se[new y.S(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},Se[new y.S(a.overscaledZ,ve,d.z,ge,d.y+1).key]={backfilled:!1}),Se}unloadTile(a){return y._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Me extends y.E{constructor(a,d,w,T){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(T),this._data=d.data,this._options=y.e({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const Y=y.X/this.tileSize;this.workerOptions=y.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*Y,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*Y,extent:y.X,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:y.X,radius:(d.clusterRadius||50)*Y,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return y._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return y._(this,void 0,void 0,function*(){const a=y.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(void 0!==a.clusterRadius&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),void 0!==a.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,w){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:w}})}_updateWorkerData(a){return y._(this,void 0,void 0,function*(){const d=y.e({type:this.type},this.workerOptions);a?d.dataDiff=a:"string"==typeof this._data?(d.request=this.map._requestManager.transformRequest(e.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new y.k("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||w.abandoned)return void this.fire(new y.k("dataabort",{dataType:"source"}));let T=null;w.resourceTiming&&w.resourceTiming[this.id]&&(T=w.resourceTiming[this.id].slice(0));const Y={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&y.e(Y,{resourceTiming:T}),this.fire(new y.k("data",Object.assign(Object.assign({},Y),{sourceDataType:"metadata"}))),this.fire(new y.k("data",Object.assign(Object.assign({},Y),{sourceDataType:"content"})))}catch(w){if(this._pendingLoads--,this._removed)return void this.fire(new y.k("dataabort",{dataType:"source"}));this.fire(new y.j(w))}})}loaded(){return 0===this._pendingLoads}loadTile(a){return y._(this,void 0,void 0,function*(){const d=a.actor?"RT":"LT";a.actor=this.actor;const w={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;const T=yield this.actor.sendAsync({type:d,data:w},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(T,this.map.painter,"RT"===d)})}abortTile(a){return y._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return y._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return y.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ne=y.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class We extends y.E{constructor(a,d,w,T){super(),this.id=a,this.dispatcher=w,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(T),this.options=d}load(a){return y._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new y.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield ae.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new y.j(d))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new y.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(y.Z.fromLngLat);this.tileID=function(T){let Y=1/0,ge=1/0,ve=-1/0,Se=-1/0;for(const tt of T)Y=Math.min(Y,tt.x),ge=Math.min(ge,tt.y),ve=Math.max(ve,tt.x),Se=Math.max(Se,tt.y);const ke=Math.max(ve-Y,Se-ge),ze=Math.max(0,Math.floor(-Math.log(ke)/Math.LN2)),Be=Math.pow(2,ze);return new y.a1(ze,Math.floor((Y+ve)/2*Be),Math.floor((ge+Se)/2*Be))}(d),this.minzoom=this.maxzoom=this.tileID.z;const w=d.map(T=>this.tileID.getTilePoint(T)._round());return this._boundsArray=new y.$,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,y.X,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,y.X),this._boundsArray.emplaceBack(w[2].x,w[2].y,y.X,y.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new y.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=y.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let w=!1;for(const T in this.tiles){const Y=this.tiles[T];"loaded"!==Y.state&&(Y.state="loaded",Y.texture=this.texture,w=!0)}w&&this.fire(new y.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return y._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends We{constructor(a,d,w,T){super(a,d,w,T),this.roundZoom=!0,this.type="video",this.options=d}load(){return y._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield y.a3(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new y.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new y.j(new y.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=y.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new q(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let w=!1;for(const T in this.tiles){const Y=this.tiles[T];"loaded"!==Y.state&&(Y.state="loaded",Y.texture=this.texture,w=!0)}w&&this.fire(new y.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Qe extends We{constructor(a,d,w,T){super(a,d,w,T),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(Y=>!Array.isArray(Y)||2!==Y.length||Y.some(ge=>"number"!=typeof ge))||this.fire(new y.j(new y.a2(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new y.j(new y.a2(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new y.j(new y.a2(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof HTMLCanvasElement||this.fire(new y.j(new y.a2(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new y.j(new y.a2(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}load(){return y._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new y.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=y.a0.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(d,this.canvas,w.RGBA,{premultiply:!0});let T=!1;for(const Y in this.tiles){const ge=this.tiles[Y];"loaded"!==ge.state&&(ge.state="loaded",ge.texture=this.texture,T=!0)}T&&this.fire(new y.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Ye={},Je=Z=>{switch(Z){case"geojson":return Me;case"image":return We;case"raster":return xe;case"raster-dem":return Ce;case"vector":return De;case"video":return Xe;case"canvas":return Qe}return Ye[Z]},He="RTLPluginLoaded";class it extends y.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ie()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return y._(this,arguments,void 0,function*(d,w=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=e.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if("unavailable"===this.status){if(!w)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()})}_requestImport(){return y._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new y.k(He))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let dt=null;function pt(){return dt||(dt=new it),dt}class Dt{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=y.a4(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(T,Y){const ge={};if(!Y)return ge;for(const ve of T){const Se=ve.layerIds.map(ke=>Y.getLayer(ke)).filter(Boolean);if(0!==Se.length){ve.layers=Se,ve.stateDependentLayerIds&&(ve.stateDependentLayers=ve.stateDependentLayerIds.map(ke=>Se.filter(ze=>ze.id===ke)[0]));for(const ke of Se)ge[ke.id]=ve}}return ge}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const T in this.buckets){const Y=this.buckets[T];if(Y instanceof y.a6){if(this.hasSymbolBuckets=!0,!w)break;Y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const T in this.buckets){const Y=this.buckets[T];if(Y instanceof y.a6&&Y.hasRTLText){this.hasRTLText=!0,pt().lazyLoad();break}}this.queryPadding=0;for(const T in this.buckets){const Y=this.buckets[T];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(T).queryRadius(Y))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new y.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const w in this.buckets){const T=this.buckets[w];T.uploadPending()&&T.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,w,T,Y,ge,ve,Se,ke,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:T,cameraQueryGeometry:Y,scale:ge,tileSize:this.tileSize,pixelPosMatrix:ze,transform:Se,params:ve,queryPadding:this.queryPadding*ke},a,d,w):{}}querySourceFeatures(a,d){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const T=w.loadVTLayers(),Y=d&&d.sourceLayer?d.sourceLayer:"",ge=T._geojsonTileLayer||T[Y];if(!ge)return;const ve=y.a7(d&&d.filter),{z:Se,x:ke,y:ze}=this.tileID.canonical,Be={z:Se,x:ke,y:ze};for(let tt=0;tt<ge.length;tt++){const ot=ge.feature(tt);if(ve.needGeometry){const gt=y.a8(ot,!0);if(!ve.filter(new y.a9(this.tileID.overscaledZ),gt,this.tileID.canonical))continue}else if(!ve.filter(new y.a9(this.tileID.overscaledZ),ot))continue;const ht=w.getId(ot,Y),wt=new y.aa(ot,Se,ke,ze,ht);wt.tile=Be,a.push(wt)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const w=y.ab(a.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const w=Date.now();let T=!1;if(this.expirationTime>w)T=!1;else if(d)if(this.expirationTime<d)T=!0;else{const Y=this.expirationTime-d;Y?this.expirationTime=w+Math.max(Y,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(a).length)return;const w=this.latestFeatureIndex.loadVTLayers();for(const T in this.buckets){if(!d.style.hasLayer(T))continue;const Y=this.buckets[T],ge=Y.layers[0].sourceLayer||"_geojsonTileLayer",ve=w[ge],Se=a[ge];if(!ve||!Se||0===Object.keys(Se).length)continue;Y.update(Se,ve,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ke=d&&d.style&&d.style.getLayer(T);ke&&(this.queryPadding=Math.max(this.queryPadding,ke.queryRadius(Y)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<e.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=e.now()+a}setDependencies(a,d){const w={};for(const T of d)w[T]=!0;this.dependencies[a]=w}hasDependency(a,d){for(const w of a){const T=this.dependencies[w];if(T)for(const Y of d)if(T[Y])return!0}return!1}}class et{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,w){const T=a.wrapped().key;void 0===this.data[T]&&(this.data[T]=[]);const Y={value:d,timeout:void 0};if(void 0!==w&&(Y.timeout=setTimeout(()=>{this.remove(a,Y)},w)),this.data[T].push(Y),this.order.push(T),this.order.length>this.max){const ge=this._getAndRemoveByKey(this.order[0]);ge&&this.onRemove(ge)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const w=a.wrapped().key,T=void 0===d?0:this.data[w].indexOf(d),Y=this.data[w][T];return this.data[w].splice(T,1),Y.timeout&&clearTimeout(Y.timeout),0===this.data[w].length&&delete this.data[w],this.onRemove(Y.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const w in this.data)for(const T of this.data[w])a(T.value)||d.push(T);for(const w of d)this.remove(w.value.tileID,w)}}class st{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,w){const T=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][T]=this.stateChanges[a][T]||{},y.e(this.stateChanges[a][T],w),null===this.deletedStates[a]){this.deletedStates[a]={};for(const Y in this.state[a])Y!==T&&(this.deletedStates[a][Y]=null)}else if(this.deletedStates[a]&&null===this.deletedStates[a][T]){this.deletedStates[a][T]={};for(const Y in this.state[a][T])w[Y]||(this.deletedStates[a][T][Y]=null)}else for(const Y in w)this.deletedStates[a]&&this.deletedStates[a][T]&&null===this.deletedStates[a][T][Y]&&delete this.deletedStates[a][T][Y]}removeFeatureState(a,d,w){if(null===this.deletedStates[a])return;const T=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},w&&void 0!==d)null!==this.deletedStates[a][T]&&(this.deletedStates[a][T]=this.deletedStates[a][T]||{},this.deletedStates[a][T][w]=null);else if(void 0!==d)if(this.stateChanges[a]&&this.stateChanges[a][T])for(w in this.deletedStates[a][T]={},this.stateChanges[a][T])this.deletedStates[a][T][w]=null;else this.deletedStates[a][T]=null;else this.deletedStates[a]=null}getState(a,d){const w=String(d),T=y.e({},(this.state[a]||{})[w],(this.stateChanges[a]||{})[w]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){const Y=this.deletedStates[a][d];if(null===Y)return{};for(const ge in Y)delete T[ge]}return T}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const w={};for(const T in this.stateChanges){this.state[T]=this.state[T]||{};const Y={};for(const ge in this.stateChanges[T])this.state[T][ge]||(this.state[T][ge]={}),y.e(this.state[T][ge],this.stateChanges[T][ge]),Y[ge]=this.state[T][ge];w[T]=Y}for(const T in this.deletedStates){this.state[T]=this.state[T]||{};const Y={};if(null===this.deletedStates[T])for(const ge in this.state[T])Y[ge]={},this.state[T][ge]={};else for(const ge in this.deletedStates[T]){if(null===this.deletedStates[T][ge])this.state[T][ge]={};else for(const ve of Object.keys(this.deletedStates[T][ge]))delete this.state[T][ge][ve];Y[ge]=this.state[T][ge]}w[T]=w[T]||{},y.e(w[T],Y)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(w).length)for(const T in a)a[T].setFeatureState(w,d)}}class Ge extends y.E{constructor(a,d,w){super(),this.id=a,this.dispatcher=w,this.on("data",T=>this._dataHandler(T)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((T,Y,ge,ve)=>{const Se=new(Je(Y.type))(T,Y,ge,ve);if(Se.id!==T)throw new Error(`Expected Source id to be ${T} instead of ${Se.id}`);return Se})(a,d,w,this),this._tiles={},this._cache=new et(0,T=>this._unloadTile(T)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new st,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if("loaded"!==d.state&&"errored"!==d.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,w){return y._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,w)}catch(T){a.state="errored",404!==T.status?this._source.fire(new y.j(T,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new y.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const w=this._tiles[d];w.upload(a),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Ze).map(a=>a.key)}getRenderableIds(a){const d=[];for(const w in this._tiles)this._isIdRenderable(w,a)&&d.push(this._tiles[w]);return a?d.sort((w,T)=>{const Y=w.tileID,ge=T.tileID,ve=new y.P(Y.canonical.x,Y.canonical.y)._rotate(this.transform.angle),Se=new y.P(ge.canonical.x,ge.canonical.y)._rotate(this.transform.angle);return Y.overscaledZ-ge.overscaledZ||Se.y-ve.y||Se.x-ve.x}).map(w=>w.tileID.key):d.map(w=>w.tileID).sort(Ze).map(w=>w.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){return y._(this,void 0,void 0,function*(){const w=this._tiles[a];w&&("loading"!==w.state&&(w.state=d),yield this._loadTile(w,a,d))})}_tileLoaded(a,d,w){a.timeAdded=e.now(),"expired"===w&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),"raster-dem"===this.getSource().type&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new y.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let T=0;T<d.length;T++){const Y=d[T];if(a.neighboringTiles&&a.neighboringTiles[Y]){const ge=this.getTileByID(Y);w(a,ge),w(ge,a)}}function w(T,Y){T.needsHillshadePrepare=!0,T.needsTerrainPrepare=!0;let ge=Y.tileID.canonical.x-T.tileID.canonical.x;const ve=Y.tileID.canonical.y-T.tileID.canonical.y,Se=Math.pow(2,T.tileID.canonical.z),ke=Y.tileID.key;0===ge&&0===ve||Math.abs(ve)>1||(Math.abs(ge)>1&&(1===Math.abs(ge+Se)?ge+=Se:1===Math.abs(ge-Se)&&(ge-=Se)),Y.dem&&T.dem&&(T.dem.backfillBorder(Y.dem,ge,ve),T.neighboringTiles&&T.neighboringTiles[ke]&&(T.neighboringTiles[ke].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,w,T){for(const Y in this._tiles){let ge=this._tiles[Y];if(T[Y]||!ge.hasData()||ge.tileID.overscaledZ<=d||ge.tileID.overscaledZ>w)continue;let ve=ge.tileID;for(;ge&&ge.tileID.overscaledZ>d+1;){const ke=ge.tileID.scaledTo(ge.tileID.overscaledZ-1);ge=this._tiles[ke.key],ge&&ge.hasData()&&(ve=ke)}let Se=ve;for(;Se.overscaledZ>d;)if(Se=Se.scaledTo(Se.overscaledZ-1),a[Se.key]){T[ve.key]=ve;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const w=this._loadedParentTiles[a.key];return w&&w.tileID.overscaledZ>=d?w:null}for(let w=a.overscaledZ-1;w>=d;w--){const T=a.scaledTo(w),Y=this._getLoadedTile(T);if(Y)return Y}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,w=Math.ceil(a.height/this._source.tileSize)+1,T=Math.floor(d*w*(null===this._maxTileCacheZoomLevels?y.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),Y="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,T):T;this._cache.setMaxSize(Y)}handleWrapJump(a){const d=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,d){const w={};for(const T in this._tiles){const Y=this._tiles[T];Y.tileID=Y.tileID.unwrapTo(Y.tileID.wrap+d),w[Y.tileID.key]=Y}this._tiles=w;for(const T in this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(const T in this._tiles)this._setTileReloadTimer(T,this._tiles[T])}}_updateCoveredAndRetainedTiles(a,d,w,T,Y,ge){const ve={},Se={},ke=Object.keys(a),ze=e.now();for(const Be of ke){const tt=a[Be],ot=this._tiles[Be];if(!ot||0!==ot.fadeEndTime&&ot.fadeEndTime<=ze)continue;const ht=this.findLoadedParent(tt,d),wt=this.findLoadedSibling(tt),gt=ht||wt||null;gt&&(this._addTile(gt.tileID),ve[gt.tileID.key]=gt.tileID),Se[Be]=tt}this._retainLoadedChildren(Se,T,w,a);for(const Be in ve)a[Be]||(this._coveredTiles[Be]=!0,a[Be]=ve[Be]);if(ge){const Be={},tt={};for(const ot of Y)this._tiles[ot.key].hasData()?Be[ot.key]=ot:tt[ot.key]=ot;for(const ot in tt){const ht=tt[ot].children(this._source.maxzoom);this._tiles[ht[0].key]&&this._tiles[ht[1].key]&&this._tiles[ht[2].key]&&this._tiles[ht[3].key]&&(Be[ht[0].key]=a[ht[0].key]=ht[0],Be[ht[1].key]=a[ht[1].key]=ht[1],Be[ht[2].key]=a[ht[2].key]=ht[2],Be[ht[3].key]=a[ht[3].key]=ht[3],delete tt[ot])}for(const ot in tt){const ht=tt[ot],wt=this.findLoadedParent(ht,this._source.minzoom),gt=this.findLoadedSibling(ht),Ct=wt||gt||null;if(Ct){Be[Ct.tileID.key]=a[Ct.tileID.key]=Ct.tileID;for(const Mt in Be)Be[Mt].isChildOf(Ct.tileID)&&delete Be[Mt]}}for(const ot in this._tiles)Be[ot]||(this._coveredTiles[ot]=!0)}}update(a,d){if(!this._sourceLoaded||this._paused)return;let w;this.transform=a,this.terrain=d,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(ze=>new y.S(ze.canonical.z,ze.wrap,ze.canonical.z,ze.canonical.x,ze.canonical.y)):(w=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(w=w.filter(ze=>this._source.hasTile(ze)))):w=[];const T=a.coveringZoomLevel(this._source),Y=Math.max(T-Ge.maxOverzooming,this._source.minzoom),ge=Math.max(T+Ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ze={};for(const Be of w)if(Be.canonical.z>this._source.minzoom){const tt=Be.scaledTo(Be.canonical.z-1);ze[tt.key]=tt;const ot=Be.scaledTo(Math.max(this._source.minzoom,Math.min(Be.canonical.z,5)));ze[ot.key]=ot}w=w.concat(Object.values(ze))}const ve=0===w.length&&!this._updated&&this._didEmitContent;this._updated=!0,ve&&this.fire(new y.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Se=this._updateRetainedTiles(w,T);je(this._source.type)&&this._updateCoveredAndRetainedTiles(Se,Y,ge,T,w,d);for(const ze in Se)this._tiles[ze].clearFadeHold();const ke=y.ac(this._tiles,Se);for(const ze of ke){const Be=this._tiles[ze];Be.hasSymbolBuckets&&!Be.holdingForFade()?Be.setHoldDuration(this.map._fadeDuration):Be.hasSymbolBuckets&&!Be.symbolFadeFinished()||this._removeTile(ze)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){var w;const T={},Y={},ge=Math.max(d-Ge.maxOverzooming,this._source.minzoom),ve=Math.max(d+Ge.maxUnderzooming,this._source.minzoom),Se={};for(const ke of a){const ze=this._addTile(ke);T[ke.key]=ke,ze.hasData()||d<this._source.maxzoom&&(Se[ke.key]=ke)}this._retainLoadedChildren(Se,d,ve,T);for(const ke of a){let ze=this._tiles[ke.key];if(ze.hasData())continue;if(d+1>this._source.maxzoom){const tt=ke.children(this._source.maxzoom)[0],ot=this.getTile(tt);if(ot&&ot.hasData()){T[tt.key]=tt;continue}}else{const tt=ke.children(this._source.maxzoom);if(T[tt[0].key]&&T[tt[1].key]&&T[tt[2].key]&&T[tt[3].key])continue}let Be=ze.wasRequested();for(let tt=ke.overscaledZ-1;tt>=ge;--tt){const ot=ke.scaledTo(tt);if(Y[ot.key])break;if(Y[ot.key]=!0,ze=this.getTile(ot),!ze&&Be&&(ze=this._addTile(ot)),ze){const ht=ze.hasData();if((ht||!(null!==(w=this.map)&&void 0!==w&&w.cancelPendingTileRequestsWhileZooming)||Be)&&(T[ot.key]=ot),Be=ze.wasRequested(),ht)break}}}return T}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let w,T=this._tiles[a].tileID;for(;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){w=this._loadedParentTiles[T.key];break}d.push(T.key);const Y=T.scaledTo(T.overscaledZ-1);if(w=this._getLoadedTile(Y),w)break;T=Y}for(const Y of d)this._loadedParentTiles[Y]=w}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const d=this._tiles[a].tileID,w=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=w}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const w=d;return d||(d=new Dt(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,w||this._source.fire(new y.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const w=d.getExpiryTimeout();w&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},w))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&"reloading"!==d.state?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(a){const d=a.sourceDataType;"source"===a.dataType&&"metadata"===d&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===a.dataType&&"content"===d&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,w){const T=[],Y=this.transform;if(!Y)return T;const ge=w?Y.getCameraQueryGeometry(a):a,ve=a.map(ht=>Y.pointCoordinate(ht,this.terrain)),Se=ge.map(ht=>Y.pointCoordinate(ht,this.terrain)),ke=this.getIds();let ze=1/0,Be=1/0,tt=-1/0,ot=-1/0;for(const ht of Se)ze=Math.min(ze,ht.x),Be=Math.min(Be,ht.y),tt=Math.max(tt,ht.x),ot=Math.max(ot,ht.y);for(let ht=0;ht<ke.length;ht++){const wt=this._tiles[ke[ht]];if(wt.holdingForFade())continue;const gt=wt.tileID,Ct=Math.pow(2,Y.zoom-wt.tileID.overscaledZ),Mt=d*wt.queryPadding*y.X/wt.tileSize/Ct,vt=[gt.getTilePoint(new y.Z(ze,Be)),gt.getTilePoint(new y.Z(tt,ot))];if(vt[0].x-Mt<y.X&&vt[0].y-Mt<y.X&&vt[1].x+Mt>=0&&vt[1].y+Mt>=0){const Pt=ve.map(Vt=>gt.getTilePoint(Vt)),Nt=Se.map(Vt=>gt.getTilePoint(Vt));T.push({tile:wt,tileID:gt,queryGeometry:Pt,cameraQueryGeometry:Nt,scale:Ct})}}return T}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(w=>this._tiles[w].tileID);for(const w of d)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(je(this._source.type)){const a=e.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,w){this._state.updateState(a=a||"_geojsonTileLayer",d,w)}removeFeatureState(a,d,w){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,w)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,w){const T=this._tiles[a];T&&T.setDependencies(d,w)}reloadTilesForDependencies(a,d){for(const w in this._tiles)this._tiles[w].hasDependency(a,d)&&this._reloadTile(w,"reloading");this._cache.filter(w=>!w.hasDependency(a,d))}}function Ze(Z,a){const d=Math.abs(2*Z.wrap)-+(Z.wrap<0),w=Math.abs(2*a.wrap)-+(a.wrap<0);return Z.overscaledZ-a.overscaledZ||w-d||a.canonical.y-Z.canonical.y||a.canonical.x-Z.canonical.x}function je(Z){return"raster"===Z||"image"===Z||"video"===Z}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;class Ue{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(1===this.points.length)return this.points[0];a=y.ad(a,0,1);let d=1,w=this._distances[d];const T=a*this.paddedLength+this.padding;for(;w<T&&d<this._distances.length;)w=this._distances[++d];const Y=d-1,ge=this._distances[Y],ve=w-ge,Se=ve>0?(T-ge)/ve:0;return this.points[Y].mult(1-Se).add(this.points[d].mult(Se))}}function ct(Z,a){let d=!0;return"always"===Z||"never"!==Z&&"never"!==a||(d=!1),d}class _t{constructor(a,d,w){const T=this.boxCells=[],Y=this.circleCells=[];this.xCellCount=Math.ceil(a/w),this.yCellCount=Math.ceil(d/w);for(let ge=0;ge<this.xCellCount*this.yCellCount;ge++)T.push([]),Y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,w,T,Y){this._forEachCell(d,w,T,Y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(w),this.bboxes.push(T),this.bboxes.push(Y)}insertCircle(a,d,w,T){this._forEachCell(d-T,w-T,d+T,w+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(w),this.circles.push(T)}_insertBoxCell(a,d,w,T,Y,ge){this.boxCells[Y].push(ge)}_insertCircleCell(a,d,w,T,Y,ge){this.circleCells[Y].push(ge)}_query(a,d,w,T,Y,ge,ve){if(w<0||a>this.width||T<0||d>this.height)return[];const Se=[];if(a<=0&&d<=0&&this.width<=w&&this.height<=T){if(Y)return[{key:null,x1:a,y1:d,x2:w,y2:T}];for(let ke=0;ke<this.boxKeys.length;ke++)Se.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(let ke=0;ke<this.circleKeys.length;ke++){const ze=this.circles[3*ke],Be=this.circles[3*ke+1],tt=this.circles[3*ke+2];Se.push({key:this.circleKeys[ke],x1:ze-tt,y1:Be-tt,x2:ze+tt,y2:Be+tt})}}else this._forEachCell(a,d,w,T,this._queryCell,Se,{hitTest:Y,overlapMode:ge,seenUids:{box:{},circle:{}}},ve);return Se}query(a,d,w,T){return this._query(a,d,w,T,!1,null)}hitTest(a,d,w,T,Y,ge){return this._query(a,d,w,T,!0,Y,ge).length>0}hitTestCircle(a,d,w,T,Y){const ge=a-w,ve=a+w,Se=d-w,ke=d+w;if(ve<0||ge>this.width||ke<0||Se>this.height)return!1;const ze=[];return this._forEachCell(ge,Se,ve,ke,this._queryCellCircle,ze,{hitTest:!0,overlapMode:T,circle:{x:a,y:d,radius:w},seenUids:{box:{},circle:{}}},Y),ze.length>0}_queryCell(a,d,w,T,Y,ge,ve,Se){const{seenUids:ke,hitTest:ze,overlapMode:Be}=ve,tt=this.boxCells[Y];if(null!==tt){const ht=this.bboxes;for(const wt of tt)if(!ke.box[wt]){ke.box[wt]=!0;const gt=4*wt,Ct=this.boxKeys[wt];if(a<=ht[gt+2]&&d<=ht[gt+3]&&w>=ht[gt+0]&&T>=ht[gt+1]&&(!Se||Se(Ct))&&(!ze||!ct(Be,Ct.overlapMode))&&(ge.push({key:Ct,x1:ht[gt],y1:ht[gt+1],x2:ht[gt+2],y2:ht[gt+3]}),ze))return!0}}const ot=this.circleCells[Y];if(null!==ot){const ht=this.circles;for(const wt of ot)if(!ke.circle[wt]){ke.circle[wt]=!0;const gt=3*wt,Ct=this.circleKeys[wt];if(this._circleAndRectCollide(ht[gt],ht[gt+1],ht[gt+2],a,d,w,T)&&(!Se||Se(Ct))&&(!ze||!ct(Be,Ct.overlapMode))){const Mt=ht[gt],vt=ht[gt+1],Pt=ht[gt+2];if(ge.push({key:Ct,x1:Mt-Pt,y1:vt-Pt,x2:Mt+Pt,y2:vt+Pt}),ze)return!0}}}return!1}_queryCellCircle(a,d,w,T,Y,ge,ve,Se){const{circle:ke,seenUids:ze,overlapMode:Be}=ve,tt=this.boxCells[Y];if(null!==tt){const ht=this.bboxes;for(const wt of tt)if(!ze.box[wt]){ze.box[wt]=!0;const gt=4*wt,Ct=this.boxKeys[wt];if(this._circleAndRectCollide(ke.x,ke.y,ke.radius,ht[gt+0],ht[gt+1],ht[gt+2],ht[gt+3])&&(!Se||Se(Ct))&&!ct(Be,Ct.overlapMode))return ge.push(!0),!0}}const ot=this.circleCells[Y];if(null!==ot){const ht=this.circles;for(const wt of ot)if(!ze.circle[wt]){ze.circle[wt]=!0;const gt=3*wt,Ct=this.circleKeys[wt];if(this._circlesCollide(ht[gt],ht[gt+1],ht[gt+2],ke.x,ke.y,ke.radius)&&(!Se||Se(Ct))&&!ct(Be,Ct.overlapMode))return ge.push(!0),!0}}}_forEachCell(a,d,w,T,Y,ge,ve,Se){const ke=this._convertToXCellCoord(a),ze=this._convertToYCellCoord(d),Be=this._convertToXCellCoord(w),tt=this._convertToYCellCoord(T);for(let ot=ke;ot<=Be;ot++)for(let ht=ze;ht<=tt;ht++)if(Y.call(this,a,d,w,T,this.xCellCount*ht+ot,ge,ve,Se))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,w,T,Y,ge){const ve=T-a,Se=Y-d,ke=w+ge;return ke*ke>ve*ve+Se*Se}_circleAndRectCollide(a,d,w,T,Y,ge,ve){const Se=(ge-T)/2,ke=Math.abs(a-(T+Se));if(ke>Se+w)return!1;const ze=(ve-Y)/2,Be=Math.abs(d-(Y+ze));if(Be>ze+w)return!1;if(ke<=Se||Be<=ze)return!0;const tt=ke-Se,ot=Be-ze;return tt*tt+ot*ot<=w*w}}function Ut(Z,a,d,w,T){const Y=y.H();return a?(y.K(Y,Y,[1/T,1/T,1]),d||y.ae(Y,Y,w.angle)):y.L(Y,w.labelPlaneMatrix,Z),Y}function jt(Z,a,d,w,T){if(a){const Y=y.af(Z);return y.K(Y,Y,[T,T,1]),d||y.ae(Y,Y,-w.angle),Y}return w.glCoordMatrix}function rt(Z,a,d){let w;d?(w=[Z.x,Z.y,d(Z.x,Z.y),1],y.ag(w,w,a)):(w=[Z.x,Z.y,0,1],function(Y,ge,ve){const Se=ge[0],ke=ge[1];Y[0]=ve[0]*Se+ve[4]*ke+ve[12],Y[1]=ve[1]*Se+ve[5]*ke+ve[13],Y[3]=ve[3]*Se+ve[7]*ke+ve[15]}(w,w,a));const T=w[3];return{point:new y.P(w[0]/T,w[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Pe(Z,a){return.5+Z/a*.5}function Fe(Z,a){return Z.x>=-a[0]&&Z.x<=a[0]&&Z.y>=-a[1]&&Z.y<=a[1]}function $e(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot,ht){const wt=w?Z.textSizeData:Z.iconSizeData,gt=y.ah(wt,d.transform.zoom),Ct=[256/d.width*2+1,256/d.height*2+1],Mt=w?Z.text.dynamicLayoutVertexArray:Z.icon.dynamicLayoutVertexArray;Mt.clear();const vt=Z.lineVertexArray,Pt=w?Z.text.placedSymbolArray:Z.icon.placedSymbolArray,Nt=d.transform.width/d.transform.height;let Vt=!1;for(let Kt=0;Kt<Pt.length;Kt++){const nn=Pt.get(Kt);if(nn.hidden||nn.writingMode===y.ai.vertical&&!Vt){un(nn.numGlyphs,Mt);continue}Vt=!1;const Sn=rt(new y.P(nn.anchorX,nn.anchorY),a,ht);if(!Fe(Sn.point,Ct)){un(nn.numGlyphs,Mt);continue}const An=Pe(d.transform.cameraToCenterDistance,Sn.signedDistanceFromCamera),ln=y.aj(wt,gt,nn),hn=ge?ln/An:ln*An,Ln={getElevation:ht,labelPlaneMatrix:T,lineVertexArray:vt,pitchWithMap:ge,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:ke,tileAnchorPoint:new y.P(nn.anchorX,nn.anchorY),unwrappedTileID:ze,width:Be,height:tt,translation:ot},ii=bt(Ln,nn,hn,!1,ve,a,Y,Z.glyphOffsetArray,Mt,Nt,Se);Vt=ii.useVertical,(ii.notEnoughRoom||Vt||ii.needsFlipping&&bt(Ln,nn,hn,!0,ve,a,Y,Z.glyphOffsetArray,Mt,Nt,Se).notEnoughRoom)&&un(nn.numGlyphs,Mt)}w?Z.text.dynamicLayoutVertexBuffer.updateData(Mt):Z.icon.dynamicLayoutVertexBuffer.updateData(Mt)}function at(Z,a,d,w,T,Y,ge,ve){const Se=Y.glyphStartIndex+Y.numGlyphs,ke=Y.lineStartIndex,ze=Y.lineStartIndex+Y.lineLength,Be=a.getoffsetX(Y.glyphStartIndex),tt=a.getoffsetX(Se-1),ot=Gt(Z*Be,d,w,T,Y.segment,ke,ze,ve,ge);if(!ot)return null;const ht=Gt(Z*tt,d,w,T,Y.segment,ke,ze,ve,ge);return ht?ve.projectionCache.anyProjectionOccluded?null:{first:ot,last:ht}:null}function lt(Z,a,d,w){return Z===y.ai.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*w?{useVertical:!0}:(Z===y.ai.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function bt(Z,a,d,w,T,Y,ge,ve,Se,ke,ze){const Be=d/24,tt=a.lineOffsetX*Be,ot=a.lineOffsetY*Be;let ht;if(a.numGlyphs>1){const wt=a.glyphStartIndex+a.numGlyphs,gt=a.lineStartIndex,Ct=a.lineStartIndex+a.lineLength,Mt=at(Be,ve,tt,ot,w,a,ze,Z);if(!Mt)return{notEnoughRoom:!0};const vt=rt(Mt.first.point,ge,Z.getElevation).point,Pt=rt(Mt.last.point,ge,Z.getElevation).point;if(T&&!w){const Nt=lt(a.writingMode,vt,Pt,ke);if(Nt)return Nt}ht=[Mt.first];for(let Nt=a.glyphStartIndex+1;Nt<wt-1;Nt++)ht.push(Gt(Be*ve.getoffsetX(Nt),tt,ot,w,a.segment,gt,Ct,Z,ze));ht.push(Mt.last)}else{if(T&&!w){const gt=rt(Z.tileAnchorPoint,Y,Z.getElevation).point,Ct=a.lineStartIndex+a.segment+1,Mt=new y.P(Z.lineVertexArray.getx(Ct),Z.lineVertexArray.gety(Ct)),vt=rt(Mt,Y,Z.getElevation),Pt=vt.signedDistanceFromCamera>0?vt.point:Et(Z.tileAnchorPoint,Mt,gt,1,Y,Z),Nt=lt(a.writingMode,gt,Pt,ke);if(Nt)return Nt}const wt=Gt(Be*ve.getoffsetX(a.glyphStartIndex),tt,ot,w,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,Z,ze);if(!wt||Z.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ht=[wt]}for(const wt of ht)y.ak(Se,wt.point,wt.angle);return{}}function Et(Z,a,d,w,T,Y){const ge=Z.add(Z.sub(a)._unit()),ve=void 0!==T?rt(ge,T,Y.getElevation).point:kt(ge.x,ge.y,Y).point,Se=d.sub(ve);return d.add(Se._mult(w/Se.mag()))}function mt(Z,a,d){const w=a.projectionCache;if(w.projections[Z])return w.projections[Z];const T=new y.P(a.lineVertexArray.getx(Z),a.lineVertexArray.gety(Z)),Y=kt(T.x,T.y,a);if(Y.signedDistanceFromCamera>0)return w.projections[Z]=Y.point,w.anyProjectionOccluded=w.anyProjectionOccluded||Y.isOccluded,Y.point;const ge=Z-d.direction;return Et(0===d.distanceFromAnchor?a.tileAnchorPoint:new y.P(a.lineVertexArray.getx(ge),a.lineVertexArray.gety(ge)),T,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,void 0,a)}function kt(Z,a,d){const w=Z+d.translation[0],T=a+d.translation[1];let Y;return!d.pitchWithMap&&d.projection.useSpecialProjectionForSymbols?(Y=d.projection.projectTileCoordinates(w,T,d.unwrappedTileID,d.getElevation),Y.point.x=(.5*Y.point.x+.5)*d.width,Y.point.y=(.5*-Y.point.y+.5)*d.height):(Y=rt(new y.P(w,T),d.labelPlaneMatrix,d.getElevation),Y.isOccluded=!1),Y}function Lt(Z,a,d){return Z._unit()._perp()._mult(a*d)}function It(Z,a,d,w,T,Y,ge,ve,Se){if(ve.projectionCache.offsets[Z])return ve.projectionCache.offsets[Z];const ke=d.add(a);if(Z+Se.direction<w||Z+Se.direction>=T)return ve.projectionCache.offsets[Z]=ke,ke;const ze=mt(Z+Se.direction,ve,Se),Be=Lt(ze.sub(d),ge,Se.direction),tt=d.add(Be),ot=ze.add(Be);return ve.projectionCache.offsets[Z]=y.al(Y,ke,tt,ot)||ke,ve.projectionCache.offsets[Z]}function Gt(Z,a,d,w,T,Y,ge,ve,Se){const ke=w?Z-a:Z+a;let ze=ke>0?1:-1,Be=0;w&&(ze*=-1,Be=Math.PI),ze<0&&(Be+=Math.PI);let tt,ot=ze>0?Y+T:Y+T+1;ve.projectionCache.cachedAnchorPoint?tt=ve.projectionCache.cachedAnchorPoint:(tt=kt(ve.tileAnchorPoint.x,ve.tileAnchorPoint.y,ve).point,ve.projectionCache.cachedAnchorPoint=tt);let ht,wt,gt=tt,Ct=tt,Mt=0,vt=0;const Pt=Math.abs(ke),Nt=[];let Vt;for(;Mt+vt<=Pt;){if(ot+=ze,ot<Y||ot>=ge)return null;Mt+=vt,Ct=gt,wt=ht;const Sn={absOffsetX:Pt,direction:ze,distanceFromAnchor:Mt,previousVertex:Ct};if(gt=mt(ot,ve,Sn),0===d)Nt.push(Ct),Vt=gt.sub(Ct);else{let An;const ln=gt.sub(Ct);An=0===ln.mag()?Lt(mt(ot+ze,ve,Sn).sub(gt),d,ze):Lt(ln,d,ze),wt||(wt=Ct.add(An)),ht=It(ot,An,gt,Y,ge,wt,d,ve,Sn),Nt.push(wt),Vt=ht.sub(wt)}vt=Vt.mag()}const Kt=Vt._mult((Pt-Mt)/vt)._add(wt||Ct),nn=Be+Math.atan2(gt.y-Ct.y,gt.x-Ct.x);return Nt.push(Kt),{point:Kt,angle:Se?nn:0,path:Nt}}const rn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function un(Z,a){for(let d=0;d<Z;d++){const w=a.length;a.resize(w+4),a.float32.set(rn,3*w)}}const zn=100;class Pn{constructor(a,d,w=new _t(a.width+200,a.height+200,25),T=new _t(a.width+200,a.height+200,25)){this.transform=a,this.mapProjection=d,this.grid=w,this.ignoredGrid=T,this.pitchFactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+zn,this.screenBottomBoundary=a.height+zn,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,w,T,Y,ge,ve,Se,ke,ze,Be){const tt=a.anchorPointX+Se[0],ot=a.anchorPointY+Se[1],ht=this.projectAndGetPerspectiveRatio(T,tt,ot,Y,ze),wt=this._projectCollisionBox(a,w,T,Y,ge,ve,Se,ht,ze,Be),[gt,Ct,Mt,vt]=wt.box;return this.mapProjection.useSpecialProjectionForSymbols&&(ge?wt.allPointsOccluded:this.mapProjection.isOccluded(tt,ot,Y))||ht.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(gt,Ct,Mt,vt)||"always"!==d&&this.grid.hitTest(gt,Ct,Mt,vt,d,ke)?{box:[gt,Ct,Mt,vt],placeable:!1,offscreen:!1}:{box:[gt,Ct,Mt,vt],placeable:!0,offscreen:this.isOffscreen(gt,Ct,Mt,vt)}}placeCollisionCircles(a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot,ht,wt,gt){const Ct=[],Mt=new y.P(d.anchorX,d.anchorY),vt=this.getPerspectiveRatio(ge,Mt.x,Mt.y,ve,gt),Pt=(Be?Y/vt:Y*vt)/y.aq,Nt={getElevation:gt,labelPlaneMatrix:Se,lineVertexArray:w,pitchWithMap:Be,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Mt,unwrappedTileID:ve,width:this.transform.width,height:this.transform.height,translation:wt},Vt=at(Pt,T,d.lineOffsetX*Pt,d.lineOffsetY*Pt,!1,d,!1,Nt);let Kt=!1,nn=!1,Sn=!0;if(Vt){const An=.5*ot*vt+ht,ln=new y.P(-100,-100),hn=new y.P(this.screenRightBoundary,this.screenBottomBoundary),Ln=new Ue,ii=Vt.first,gn=Vt.last;let xn=[];for(let di=ii.path.length-1;di>=1;di--)xn.push(ii.path[di]);for(let di=1;di<gn.path.length;di++)xn.push(gn.path[di]);const Yn=2.5*An;if(ke){const di=this.projectPathToScreenSpace(xn,Nt,ke);xn=di.some(Si=>Si.signedDistanceFromCamera<=0)?[]:di.map(Si=>Si.point)}let er=[];if(xn.length>0){const di=xn[0].clone(),Si=xn[0].clone();for(let hr=1;hr<xn.length;hr++)di.x=Math.min(di.x,xn[hr].x),di.y=Math.min(di.y,xn[hr].y),Si.x=Math.max(Si.x,xn[hr].x),Si.y=Math.max(Si.y,xn[hr].y);er=di.x>=ln.x&&Si.x<=hn.x&&di.y>=ln.y&&Si.y<=hn.y?[xn]:Si.x<ln.x||di.x>hn.x||Si.y<ln.y||di.y>hn.y?[]:y.am([xn],ln.x,ln.y,hn.x,hn.y)}for(const di of er){Ln.reset(di,.25*An);let Si=0;Si=Ln.length<=.5*An?1:Math.ceil(Ln.paddedLength/Yn)+1;for(let hr=0;hr<Si;hr++){const ds=hr/Math.max(Si-1,1),Ea=Ln.lerp(ds),or=Ea.x+zn,Ds=Ea.y+zn;Ct.push(or,Ds,An,0);const ss=or-An,fs=Ds-An,qr=or+An,Bs=Ds+An;if(Sn=Sn&&this.isOffscreen(ss,fs,qr,Bs),nn=nn||this.isInsideGrid(ss,fs,qr,Bs),"always"!==a&&this.grid.hitTestCircle(or,Ds,An,a,tt)&&(Kt=!0,!ze))return{circles:[],offscreen:!1,collisionDetected:Kt}}}}return{circles:!ze&&Kt||!nn||vt<this.perspectiveRatioCutoff?[]:Ct,offscreen:Sn,collisionDetected:Kt}}projectPathToScreenSpace(a,d,w){return a.map(T=>rt(T,w,d.getElevation))}queryRenderedSymbols(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let w=1/0,T=1/0,Y=-1/0,ge=-1/0;for(const ze of a){const Be=new y.P(ze.x+zn,ze.y+zn);w=Math.min(w,Be.x),T=Math.min(T,Be.y),Y=Math.max(Y,Be.x),ge=Math.max(ge,Be.y),d.push(Be)}const ve=this.grid.query(w,T,Y,ge).concat(this.ignoredGrid.query(w,T,Y,ge)),Se={},ke={};for(const ze of ve){const Be=ze.key;if(void 0===Se[Be.bucketInstanceId]&&(Se[Be.bucketInstanceId]={}),Se[Be.bucketInstanceId][Be.featureIndex])continue;const tt=[new y.P(ze.x1,ze.y1),new y.P(ze.x2,ze.y1),new y.P(ze.x2,ze.y2),new y.P(ze.x1,ze.y2)];y.an(d,tt)&&(Se[Be.bucketInstanceId][Be.featureIndex]=!0,void 0===ke[Be.bucketInstanceId]&&(ke[Be.bucketInstanceId]=[]),ke[Be.bucketInstanceId].push(Be.featureIndex))}return ke}insertCollisionBox(a,d,w,T,Y,ge){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:Y,collisionGroupID:ge,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,w,T,Y,ge){const ve=w?this.ignoredGrid:this.grid,Se={bucketInstanceId:T,featureIndex:Y,collisionGroupID:ge,overlapMode:d};for(let ke=0;ke<a.length;ke+=4)ve.insertCircle(Se,a[ke],a[ke+1],a[ke+2])}projectAndGetPerspectiveRatio(a,d,w,T,Y){const ge=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,w,T,Y):rt(new y.P(d,w),a,Y);return{point:new y.P((ge.point.x+1)/2*this.transform.width+zn,(1-ge.point.y)/2*this.transform.height+zn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ge.signedDistanceFromCamera*.5,isOccluded:ge.isOccluded,signedDistanceFromCamera:ge.signedDistanceFromCamera}}getPerspectiveRatio(a,d,w,T,Y){const ge=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,w,T,Y):rt(new y.P(d,w),a,Y);return.5+this.transform.cameraToCenterDistance/ge.signedDistanceFromCamera*.5}isOffscreen(a,d,w,T){return w<zn||a>=this.screenRightBoundary||T<zn||d>this.screenBottomBoundary}isInsideGrid(a,d,w,T){return w>=0&&a<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=y.ao([]);return y.J(a,a,[-100,-100,0]),a}_projectCollisionBox(a,d,w,T,Y,ge,ve,Se,ke,ze){const Be=d*Se.perspectiveRatio;let tt=new y.P(1,0),ot=new y.P(0,1);const ht=new y.P(a.anchorPointX+ve[0],a.anchorPointY+ve[1]);if(ge&&!Y){const An=this.projectAndGetPerspectiveRatio(w,ht.x+1,ht.y,T,ke).point.sub(Se.point).unit(),ln=Math.atan(An.y/An.x)+(An.x<0?Math.PI:0),hn=Math.sin(ln),Ln=Math.cos(ln);tt=new y.P(Ln,hn),ot=new y.P(-hn,Ln)}else if(!ge&&Y){const An=-this.transform.angle,ln=Math.sin(An),hn=Math.cos(An);tt=new y.P(hn,ln),ot=new y.P(-ln,hn)}let wt=Se.point,gt=Be;if(Y){wt=ht;const An=this.transform.zoom-Math.floor(this.transform.zoom);gt=Math.pow(2,-An),gt*=this.mapProjection.getPitchedTextCorrection(this.transform,ht,T),ze||(gt*=y.ad(.5+Se.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}ze&&(wt=wt.add(tt.mult(ze.x*gt)).add(ot.mult(ze.y*gt)));const Ct=a.x1*gt,Mt=a.x2*gt,vt=(Ct+Mt)/2,Pt=a.y1*gt,Nt=a.y2*gt,Vt=(Pt+Nt)/2,Kt=[{offsetX:Ct,offsetY:Pt},{offsetX:vt,offsetY:Pt},{offsetX:Mt,offsetY:Pt},{offsetX:Mt,offsetY:Vt},{offsetX:Mt,offsetY:Nt},{offsetX:vt,offsetY:Nt},{offsetX:Ct,offsetY:Nt},{offsetX:Ct,offsetY:Vt}];let nn=[];for(const{offsetX:An,offsetY:ln}of Kt)nn.push(new y.P(wt.x+tt.x*An+ot.x*ln,wt.y+tt.y*An+ot.y*ln));let Sn=!1;if(Y){const An=nn.map(ln=>this.projectAndGetPerspectiveRatio(w,ln.x,ln.y,T,ke));Sn=An.some(ln=>!ln.isOccluded),nn=An.map(ln=>ln.point)}else Sn=!0;return{box:y.ap(nn),allPointsOccluded:!Sn}}}function En(Z,a,d){return a*(y.X/(Z.tileSize*Math.pow(2,d-Z.tileID.overscaledZ)))}class fi{constructor(a,d,w,T){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):T&&w?1:0,this.placed=w}isHidden(){return 0===this.opacity&&!this.placed}}class Ti{constructor(a,d,w,T,Y){this.text=new fi(a?a.text:null,d,w,Y),this.icon=new fi(a?a.icon:null,d,T,Y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Li{constructor(a,d,w){this.text=a,this.icon=d,this.skipFade=w}}class Qn{constructor(){this.invProjMatrix=y.H(),this.viewportMatrix=y.H(),this.circles=[]}}class pi{constructor(a,d,w,T,Y){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=w,this.bucketIndex=T,this.tileID=Y}}class ji{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:w=>w.collisionGroupID===d}}return this.collisionGroups[a]}}function _i(Z,a,d,w,T){const{horizontalAlign:Y,verticalAlign:ge}=y.av(Z);return new y.P(-(Y-.5)*a+w[0]*T,-(ge-.5)*d+w[1]*T)}class lr{constructor(a,d,w,T,Y,ge){this.transform=a.clone(),this.terrain=w,this.collisionIndex=new Pn(this.transform,d),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=T,this.retainedQueryData={},this.collisionGroups=new ji(Y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const d=this.terrain;return d?(w,T)=>d.getElevation(a,w,T):null}getBucketParts(a,d,w,T){const Y=w.getBucket(d),ge=w.latestFeatureIndex;if(!Y||!ge||d.id!==Y.layerIds[0])return;const ve=w.collisionBoxArray,Se=Y.layers[0].layout,ke=Y.layers[0].paint,ze=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),Be=w.tileSize/y.X,tt=w.tileID.toUnwrapped(),ot=this.transform.calculatePosMatrix(tt),ht="map"===Se.get("text-pitch-alignment"),wt="map"===Se.get("text-rotation-alignment"),gt=En(w,1,this.transform.zoom),Ct=this.collisionIndex.mapProjection.translatePosition(this.transform,w,ke.get("text-translate"),ke.get("text-translate-anchor")),Mt=this.collisionIndex.mapProjection.translatePosition(this.transform,w,ke.get("icon-translate"),ke.get("icon-translate-anchor")),vt=Ut(ot,ht,wt,this.transform,gt);let Pt=null;if(ht){const Vt=jt(ot,ht,wt,this.transform,gt);Pt=y.L([],this.transform.labelPlaneMatrix,Vt)}this.retainedQueryData[Y.bucketInstanceId]=new pi(Y.bucketInstanceId,ge,Y.sourceLayerIndex,Y.index,w.tileID);const Nt={bucket:Y,layout:Se,translationText:Ct,translationIcon:Mt,posMatrix:ot,unwrappedTileID:tt,textLabelPlaneMatrix:vt,labelToScreenMatrix:Pt,scale:ze,textPixelRatio:Be,holdingForFade:w.holdingForFade(),collisionBoxArray:ve,partiallyEvaluatedTextSize:y.ah(Y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Y.sourceID)};if(T)for(const Vt of Y.sortKeyRanges){const{sortKey:Kt,symbolInstanceStart:nn,symbolInstanceEnd:Sn}=Vt;a.push({sortKey:Kt,symbolInstanceStart:nn,symbolInstanceEnd:Sn,parameters:Nt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:Y.symbolInstances.length,parameters:Nt})}attemptAnchorPlacement(a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot,ht,wt,gt,Ct,Mt,vt){const Pt=y.ar[a.textAnchor],Nt=[a.textOffset0,a.textOffset1],Vt=_i(Pt,w,T,Nt,Y),Kt=this.collisionIndex.placeCollisionBox(d,tt,Se,ke,ze,ve,ge,gt,Be.predicate,vt,Vt);if((!Mt||this.collisionIndex.placeCollisionBox(Mt,tt,Se,ke,ze,ve,ge,Ct,Be.predicate,vt,Vt).placeable)&&Kt.placeable){let nn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID].text&&(nn=this.prevPlacement.variableOffsets[ot.crossTileID].anchor),0===ot.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ot.crossTileID]={textOffset:Nt,width:w,height:T,anchor:Pt,textBoxScale:Y,prevAnchor:nn},this.markUsedJustification(ht,Pt,ot,wt),ht.allowVerticalPlacement&&(this.markUsedOrientation(ht,wt,ot),this.placedOrientations[ot.crossTileID]=wt),{shift:Vt,placedGlyphBoxes:Kt}}}placeLayerBucketPart(a,d,w){const{bucket:T,layout:Y,translationText:ge,translationIcon:ve,posMatrix:Se,unwrappedTileID:ke,textLabelPlaneMatrix:ze,labelToScreenMatrix:Be,textPixelRatio:tt,holdingForFade:ot,collisionBoxArray:ht,partiallyEvaluatedTextSize:wt,collisionGroup:gt}=a.parameters,Ct=Y.get("text-optional"),Mt=Y.get("icon-optional"),vt=y.as(Y,"text-overlap","text-allow-overlap"),Pt="always"===vt,Nt=y.as(Y,"icon-overlap","icon-allow-overlap"),Vt="always"===Nt,Kt="map"===Y.get("text-rotation-alignment"),nn="map"===Y.get("text-pitch-alignment"),Sn="none"!==Y.get("icon-text-fit"),An="viewport-y"===Y.get("symbol-z-order"),ln=Pt&&(Vt||!T.hasIconData()||Mt),hn=Vt&&(Pt||!T.hasTextData()||Ct);!T.collisionArrays&&ht&&T.deserializeCollisionBoxes(ht);const Ln=this._getTerrainElevationFunc(this.retainedQueryData[T.bucketInstanceId].tileID),ii=(gn,xn,Yn)=>{var er,di;if(d[gn.crossTileID])return;if(ot)return void(this.placements[gn.crossTileID]=new Li(!1,!1,!1));let Si=!1,hr=!1,ds=!0,Ea=null,or={box:null,placeable:!1,offscreen:null},Ds={box:null,placeable:!1,offscreen:null},ss=null,fs=null,qr=null,Bs=0,Dl=0,iu=0;xn.textFeatureIndex?Bs=xn.textFeatureIndex:gn.useRuntimeCollisionCircles&&(Bs=gn.featureIndex),xn.verticalTextFeatureIndex&&(Dl=xn.verticalTextFeatureIndex);const No=xn.textBox;if(No){const as=ps=>{let Ts=y.ai.horizontal;if(T.allowVerticalPlacement&&!ps&&this.prevPlacement){const Wr=this.prevPlacement.placedOrientations[gn.crossTileID];Wr&&(this.placedOrientations[gn.crossTileID]=Wr,Ts=Wr,this.markUsedOrientation(T,Ts,gn))}return Ts},ca=(ps,Ts)=>{if(T.allowVerticalPlacement&&gn.numVerticalGlyphVertices>0&&xn.verticalTextBox){for(const Wr of T.writingModes)if(Wr===y.ai.vertical?(or=Ts(),Ds=or):or=ps(),or&&or.placeable)break}else or=ps()},bo=gn.textAnchorOffsetStartIndex,Bo=gn.textAnchorOffsetEndIndex;if(Bo===bo){const ps=(Ts,Wr)=>{const ei=this.collisionIndex.placeCollisionBox(Ts,vt,tt,Se,ke,nn,Kt,ge,gt.predicate,Ln);return ei&&ei.placeable&&(this.markUsedOrientation(T,Wr,gn),this.placedOrientations[gn.crossTileID]=Wr),ei};ca(()=>ps(No,y.ai.horizontal),()=>{const Ts=xn.verticalTextBox;return T.allowVerticalPlacement&&gn.numVerticalGlyphVertices>0&&Ts?ps(Ts,y.ai.vertical):{box:null,offscreen:null}}),as(or&&or.placeable)}else{let ps=y.ar[null===(di=null===(er=this.prevPlacement)||void 0===er?void 0:er.variableOffsets[gn.crossTileID])||void 0===di?void 0:di.anchor];const Ts=(ei,zo,uh)=>{const Nr=ei.x2-ei.x1,hh=ei.y2-ei.y1,ac=gn.textBoxScale,su=Sn&&"never"===Nt?zo:null;let za=null,Ed="never"===vt?1:2,ua="never";ps&&Ed++;for(let au=0;au<Ed;au++){for(let ou=bo;ou<Bo;ou++){const $i=T.textAnchorOffsets.get(ou);if(ps&&$i.textAnchor!==ps)continue;const wo=this.attemptAnchorPlacement($i,ei,Nr,hh,ac,Kt,nn,tt,Se,ke,gt,ua,gn,T,uh,ge,ve,su,Ln);if(wo&&(za=wo.placedGlyphBoxes,za&&za.placeable))return Si=!0,Ea=wo.shift,za}ps?ps=null:ua=vt}return w&&!za&&(za={box:this.collisionIndex.placeCollisionBox(No,"always",tt,Se,ke,nn,Kt,ge,gt.predicate,Ln,new y.P(0,0)).box,offscreen:!1,placeable:!1}),za};ca(()=>Ts(No,xn.iconBox,y.ai.horizontal),()=>{const ei=xn.verticalTextBox;return T.allowVerticalPlacement&&(!or||!or.placeable)&&gn.numVerticalGlyphVertices>0&&ei?Ts(ei,xn.verticalIconBox,y.ai.vertical):{box:null,occluded:!0,offscreen:null}}),or&&(Si=or.placeable,ds=or.offscreen);const Wr=as(or&&or.placeable);if(!Si&&this.prevPlacement){const ei=this.prevPlacement.variableOffsets[gn.crossTileID];ei&&(this.variableOffsets[gn.crossTileID]=ei,this.markUsedJustification(T,ei.anchor,gn,Wr))}}}if(ss=or,Si=ss&&ss.placeable,ds=ss&&ss.offscreen,gn.useRuntimeCollisionCircles){const as=T.text.placedSymbolArray.get(gn.centerJustifiedTextSymbolIndex),ca=y.aj(T.textSizeData,wt,as),bo=Y.get("text-padding");fs=this.collisionIndex.placeCollisionCircles(vt,as,T.lineVertexArray,T.glyphOffsetArray,ca,Se,ke,ze,Be,w,nn,gt.predicate,gn.collisionCircleDiameter,bo,ge,Ln),fs.circles.length&&fs.collisionDetected&&!w&&y.w("Collisions detected, but collision boxes are not shown"),Si=Pt||fs.circles.length>0&&!fs.collisionDetected,ds=ds&&fs.offscreen}if(xn.iconFeatureIndex&&(iu=xn.iconFeatureIndex),xn.iconBox){const as=ca=>this.collisionIndex.placeCollisionBox(ca,Nt,tt,Se,ke,nn,Kt,ve,gt.predicate,Ln,Sn&&Ea?Ea:void 0);Ds&&Ds.placeable&&xn.verticalIconBox?(qr=as(xn.verticalIconBox),hr=qr.placeable):(qr=as(xn.iconBox),hr=qr.placeable),ds=ds&&qr.offscreen}const _o=Ct||0===gn.numHorizontalGlyphVertices&&0===gn.numVerticalGlyphVertices,ru=Mt||0===gn.numIconVertices;_o||ru?ru?_o||(hr=hr&&Si):Si=hr&&Si:hr=Si=hr&&Si;const ch=hr&&qr.placeable;if(Si&&ss.placeable&&this.collisionIndex.insertCollisionBox(ss.box,vt,Y.get("text-ignore-placement"),T.bucketInstanceId,Ds&&Ds.placeable&&Dl?Dl:Bs,gt.ID),ch&&this.collisionIndex.insertCollisionBox(qr.box,Nt,Y.get("icon-ignore-placement"),T.bucketInstanceId,iu,gt.ID),fs&&Si&&this.collisionIndex.insertCollisionCircles(fs.circles,vt,Y.get("text-ignore-placement"),T.bucketInstanceId,Bs,gt.ID),w&&this.storeCollisionData(T.bucketInstanceId,Yn,xn,ss,qr,fs),0===gn.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===T.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gn.crossTileID]=new Li(Si||ln,hr||hn,ds||T.justReloaded),d[gn.crossTileID]=!0};if(An){if(0!==a.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const gn=T.getSortedSymbolIndexes(this.transform.angle);for(let xn=gn.length-1;xn>=0;--xn){const Yn=gn[xn];ii(T.symbolInstances.get(Yn),T.collisionArrays[Yn],Yn)}}else for(let gn=a.symbolInstanceStart;gn<a.symbolInstanceEnd;gn++)ii(T.symbolInstances.get(gn),T.collisionArrays[gn],gn);if(w&&T.bucketInstanceId in this.collisionCircleArrays){const gn=this.collisionCircleArrays[T.bucketInstanceId];y.at(gn.invProjMatrix,Se),gn.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1}storeCollisionData(a,d,w,T,Y,ge){if(w.textBox||w.iconBox){let ve,Se;this.collisionBoxArrays.has(a)?ve=this.collisionBoxArrays.get(a):(ve=new Map,this.collisionBoxArrays.set(a,ve)),ve.has(d)?Se=ve.get(d):(Se={text:null,icon:null},ve.set(d,Se)),w.textBox&&(Se.text=T.box),w.iconBox&&(Se.icon=Y.box)}if(ge){let ve=this.collisionCircleArrays[a];void 0===ve&&(ve=this.collisionCircleArrays[a]=new Qn);for(let Se=0;Se<ge.circles.length;Se+=4)ve.circles.push(ge.circles[Se+0]),ve.circles.push(ge.circles[Se+1]),ve.circles.push(ge.circles[Se+2]),ve.circles.push(ge.collisionDetected?1:0)}}markUsedJustification(a,d,w,T){let Y;Y=T===y.ai.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[y.au(d)];const ge=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const ve of ge)ve>=0&&(a.text.placedSymbolArray.get(ve).crossTileID=Y>=0&&ve!==Y?0:w.crossTileID)}markUsedOrientation(a,d,w){const T=d===y.ai.horizontal||d===y.ai.horizontalOnly?d:0,Y=d===y.ai.vertical?d:0,ge=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const ve of ge)a.text.placedSymbolArray.get(ve).placedOrientation=T;w.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=Y)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let w=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(a):1,Y=d?d.opacities:{},ge=d?d.variableOffsets:{},ve=d?d.placedOrientations:{};for(const Se in this.placements){const ke=this.placements[Se],ze=Y[Se];ze?(this.opacities[Se]=new Ti(ze,T,ke.text,ke.icon),w=w||ke.text!==ze.text.placed||ke.icon!==ze.icon.placed):(this.opacities[Se]=new Ti(null,T,ke.text,ke.icon,ke.skipFade),w=w||ke.text||ke.icon)}for(const Se in Y){const ke=Y[Se];if(!this.opacities[Se]){const ze=new Ti(ke,T,!1,!1);ze.isHidden()||(this.opacities[Se]=ze,w=w||ke.text.placed||ke.icon.placed)}}for(const Se in ge)this.variableOffsets[Se]||!this.opacities[Se]||this.opacities[Se].isHidden()||(this.variableOffsets[Se]=ge[Se]);for(const Se in ve)this.placedOrientations[Se]||!this.opacities[Se]||this.opacities[Se].isHidden()||(this.placedOrientations[Se]=ve[Se]);if(d&&void 0===d.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=a:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const w={};for(const T of d){const Y=T.getBucket(a);Y&&T.latestFeatureIndex&&a.id===Y.layerIds[0]&&this.updateBucketOpacities(Y,T.tileID,w,T.collisionBoxArray)}}updateBucketOpacities(a,d,w,T){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const Y=a.layers[0],ge=Y.layout,ve=new Ti(null,0,!1,!1,!0),Se=ge.get("text-allow-overlap"),ke=ge.get("icon-allow-overlap"),ze=Y._unevaluatedLayout.hasValue("text-variable-anchor")||Y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Be="map"===ge.get("text-rotation-alignment"),tt="map"===ge.get("text-pitch-alignment"),ot="none"!==ge.get("icon-text-fit"),ht=new Ti(null,0,Se&&(ke||!a.hasIconData()||ge.get("icon-optional")),ke&&(Se||!a.hasTextData()||ge.get("text-optional")),!0);!a.collisionArrays&&T&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(T);const wt=(Ct,Mt,vt)=>{for(let Pt=0;Pt<Mt/4;Pt++)Ct.opacityVertexArray.emplaceBack(vt);Ct.hasVisibleVertices=Ct.hasVisibleVertices||vt!==Ir},gt=this.collisionBoxArrays.get(a.bucketInstanceId);for(let Ct=0;Ct<a.symbolInstances.length;Ct++){const Mt=a.symbolInstances.get(Ct),{numHorizontalGlyphVertices:vt,numVerticalGlyphVertices:Pt,crossTileID:Nt}=Mt;let Vt=this.opacities[Nt];w[Nt]?Vt=ve:Vt||(Vt=ht,this.opacities[Nt]=Vt),w[Nt]=!0;const Kt=Mt.numIconVertices>0,nn=this.placedOrientations[Mt.crossTileID],Sn=nn===y.ai.vertical,An=nn===y.ai.horizontal||nn===y.ai.horizontalOnly;if(vt>0||Pt>0){const hn=ts(Vt.text);wt(a.text,vt,Sn?Ir:hn),wt(a.text,Pt,An?Ir:hn);const Ln=Vt.text.isHidden();[Mt.rightJustifiedTextSymbolIndex,Mt.centerJustifiedTextSymbolIndex,Mt.leftJustifiedTextSymbolIndex].forEach(xn=>{xn>=0&&(a.text.placedSymbolArray.get(xn).hidden=Ln||Sn?1:0)}),Mt.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(Mt.verticalPlacedTextSymbolIndex).hidden=Ln||An?1:0);const ii=this.variableOffsets[Mt.crossTileID];ii&&this.markUsedJustification(a,ii.anchor,Mt,nn);const gn=this.placedOrientations[Mt.crossTileID];gn&&(this.markUsedJustification(a,"left",Mt,gn),this.markUsedOrientation(a,gn,Mt))}if(Kt){const hn=ts(Vt.icon),Ln=!(ot&&Mt.verticalPlacedIconSymbolIndex&&Sn);Mt.placedIconSymbolIndex>=0&&(wt(a.icon,Mt.numIconVertices,Ln?hn:Ir),a.icon.placedSymbolArray.get(Mt.placedIconSymbolIndex).hidden=Vt.icon.isHidden()),Mt.verticalPlacedIconSymbolIndex>=0&&(wt(a.icon,Mt.numVerticalIconVertices,Ln?Ir:hn),a.icon.placedSymbolArray.get(Mt.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden())}const ln=gt&&gt.has(Ct)?gt.get(Ct):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const hn=a.collisionArrays[Ct];if(hn){let Ln=new y.P(0,0);if(hn.textBox||hn.verticalTextBox){let ii=!0;if(ze){const gn=this.variableOffsets[Nt];gn?(Ln=_i(gn.anchor,gn.width,gn.height,gn.textOffset,gn.textBoxScale),Be&&Ln._rotate(tt?this.transform.angle:-this.transform.angle)):ii=!1}if(hn.textBox||hn.verticalTextBox){let gn;hn.textBox&&(gn=Sn),hn.verticalTextBox&&(gn=An),Bi(a.textCollisionBox.collisionVertexArray,Vt.text.placed,!ii||gn,ln.text,Ln.x,Ln.y)}}if(hn.iconBox||hn.verticalIconBox){const ii=!(An||!hn.verticalIconBox);let gn;hn.iconBox&&(gn=ii),hn.verticalIconBox&&(gn=!ii),Bi(a.iconCollisionBox.collisionVertexArray,Vt.icon.placed,gn,ln.icon,ot?Ln.x:0,ot?Ln.y:0)}}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Ct.invProjMatrix,a.placementViewportMatrix=Ct.viewportMatrix,a.collisionCircleArray=Ct.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return 0===this.fadeDuration?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const w=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*w>a}setStale(){this.stale=!0}}function Bi(Z,a,d,w,T,Y){w&&0!==w.length||(w=[0,0,0,0]);const ge=w[0]-zn,ve=w[1]-zn,Se=w[2]-zn,ke=w[3]-zn;Z.emplaceBack(a?1:0,d?1:0,T||0,Y||0,ge,ve),Z.emplaceBack(a?1:0,d?1:0,T||0,Y||0,Se,ve),Z.emplaceBack(a?1:0,d?1:0,T||0,Y||0,Se,ke),Z.emplaceBack(a?1:0,d?1:0,T||0,Y||0,ge,ke)}const Za=Math.pow(2,25),bi=Math.pow(2,24),ko=Math.pow(2,17),uo=Math.pow(2,16),br=Math.pow(2,9),kr=Math.pow(2,8),Zl=Math.pow(2,1);function ts(Z){if(0===Z.opacity&&!Z.placed)return 0;if(1===Z.opacity&&Z.placed)return 4294967295;const a=Z.placed?1:0,d=Math.floor(127*Z.opacity);return d*Za+a*bi+d*ko+a*uo+d*br+a*kr+d*Zl+a}const Ir=0;function cl(){return{isOccluded:(Z,a,d)=>!1,getPitchedTextCorrection:(Z,a,d)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(Z,a,d,w){throw new Error("Not implemented.")},translatePosition:(Z,a,d,w)=>function(T,Y,ge,ve,Se=!1){if(!ge[0]&&!ge[1])return[0,0];const ke=Se?"map"===ve?T.angle:0:"viewport"===ve?-T.angle:0;if(ke){const ze=Math.sin(ke),Be=Math.cos(ke);ge=[ge[0]*Be-ge[1]*ze,ge[0]*ze+ge[1]*Be]}return[Se?ge[0]:En(Y,ge[0],T.zoom),Se?ge[1]:En(Y,ge[1],T.zoom)]}(Z,a,d,w),getCircleRadiusCorrection:Z=>1}}class Io{constructor(a){this._sortAcrossTiles="viewport-y"!==a.layout.get("symbol-z-order")&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,w,T,Y){const ge=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(ge,T,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ge.sort((ve,Se)=>ve.sortKey-Se.sortKey));this._currentPartIndex<ge.length;)if(d.placeLayerBucketPart(ge[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,Y())return!0;return!1}}class wr{constructor(a,d,w,T,Y,ge,ve,Se){this.placement=new lr(a,cl(),d,ge,ve,Se),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=Y,this._done=!1}isDone(){return this._done}continuePlacement(a,d,w){const T=e.now(),Y=()=>!this._forceFullPlacement&&e.now()-T>2;for(;this._currentPlacementIndex>=0;){const ge=d[a[this._currentPlacementIndex]],ve=this.placement.collisionIndex.transform.zoom;if("symbol"===ge.type&&(!ge.minzoom||ge.minzoom<=ve)&&(!ge.maxzoom||ge.maxzoom>ve)){if(this._inProgressLayer||(this._inProgressLayer=new Io(ge)),this._inProgressLayer.continuePlacement(w[ge.source],this.placement,this._showCollisionBoxes,ge,Y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const sa=512/y.X/2;class ba{constructor(a,d,w){this.tileID=a,this.bucketInstanceId=w,this._symbolsByKey={};const T=new Map;for(let Y=0;Y<d.length;Y++){const ge=d.get(Y),ve=ge.key,Se=T.get(ve);Se?Se.push(ge):T.set(ve,[ge])}for(const[Y,ge]of T){const ve={positions:ge.map(Se=>({x:Math.floor(Se.anchorX*sa),y:Math.floor(Se.anchorY*sa)})),crossTileIDs:ge.map(Se=>Se.crossTileID)};if(ve.positions.length>128){const Se=new y.aw(ve.positions.length,16,Uint16Array);for(const{x:ke,y:ze}of ve.positions)Se.add(ke,ze);Se.finish(),delete ve.positions,ve.index=Se}this._symbolsByKey[Y]=ve}}getScaledCoordinates(a,d){const{x:w,y:T,z:Y}=this.tileID.canonical,{x:ge,y:ve,z:Se}=d.canonical,ke=sa/Math.pow(2,Se-Y),ze=(ve*y.X+a.anchorY)*ke,Be=T*y.X*sa;return{x:Math.floor((ge*y.X+a.anchorX)*ke-w*y.X*sa),y:Math.floor(ze-Be)}}findMatches(a,d,w){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let Y=0;Y<a.length;Y++){const ge=a.get(Y);if(ge.crossTileID)continue;const ve=this._symbolsByKey[ge.key];if(!ve)continue;const Se=this.getScaledCoordinates(ge,d);if(ve.index){const ke=ve.index.range(Se.x-T,Se.y-T,Se.x+T,Se.y+T).sort();for(const ze of ke){const Be=ve.crossTileIDs[ze];if(!w[Be]){w[Be]=!0,ge.crossTileID=Be;break}}}else if(ve.positions)for(let ke=0;ke<ve.positions.length;ke++){const ze=ve.positions[ke],Be=ve.crossTileIDs[ke];if(Math.abs(ze.x-Se.x)<=T&&Math.abs(ze.y-Se.y)<=T&&!w[Be]){w[Be]=!0,ge.crossTileID=Be;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Zt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Jt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(0!==d)for(const w in this.indexes){const T=this.indexes[w],Y={};for(const ge in T){const ve=T[ge];ve.tileID=ve.tileID.unwrapTo(ve.tileID.wrap+d),Y[ve.tileID.key]=ve}this.indexes[w]=Y}this.lng=a}addBucket(a,d,w){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let Y=0;Y<d.symbolInstances.length;Y++)d.symbolInstances.get(Y).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const T=this.usedCrossTileIDs[a.overscaledZ];for(const Y in this.indexes){const ge=this.indexes[Y];if(Number(Y)>a.overscaledZ)for(const ve in ge){const Se=ge[ve];Se.tileID.isChildOf(a)&&Se.findMatches(d.symbolInstances,a,T)}else{const ve=ge[a.scaledTo(Number(Y)).key];ve&&ve.findMatches(d.symbolInstances,a,T)}}for(let Y=0;Y<d.symbolInstances.length;Y++){const ge=d.symbolInstances.get(Y);ge.crossTileID||(ge.crossTileID=w.generate(),T[ge.crossTileID]=!0)}return void 0===this.indexes[a.overscaledZ]&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new ba(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const w of d.getCrossTileIDsLists())for(const T of w)delete this.usedCrossTileIDs[a][T]}removeStaleBuckets(a){let d=!1;for(const w in this.indexes){const T=this.indexes[w];for(const Y in T)a[T[Y].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,T[Y]),delete T[Y],d=!0)}return d}}class $t{constructor(){this.layerIndexes={},this.crossTileIDs=new Zt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,w){let T=this.layerIndexes[a.id];void 0===T&&(T=this.layerIndexes[a.id]=new Jt);let Y=!1;const ge={};T.handleWrapJump(w);for(const ve of d){const Se=ve.getBucket(a);Se&&a.id===Se.layerIds[0]&&(Se.bucketInstanceId||(Se.bucketInstanceId=++this.maxBucketInstanceId),T.addBucket(ve.tileID,Se,this.crossTileIDs)&&(Y=!0),ge[Se.bucketInstanceId]=!0)}return T.removeStaleBuckets(ge)&&(Y=!0),Y}pruneUnusedLayers(a){const d={};a.forEach(w=>{d[w]=!0});for(const w in this.layerIndexes)d[w]||delete this.layerIndexes[w]}}const pn=(Z,a)=>y.t(Z,a&&a.filter(d=>"source.canvas"!==d.identifier)),sn=y.ax();class tn extends y.E{constructor(a,d={}){super(),this._rtlPluginLoaded=()=>{for(const w in this.sourceCaches){const T=this.sourceCaches[w].getSource().type;"vector"!==T&&"geojson"!==T||this.sourceCaches[w].reload()}},this.map=a,this.dispatcher=new J(B(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(w,T)=>this.getGlyphs(w,T)),this.dispatcher.registerMessageHandler("GI",(w,T)=>this.getImages(w,T)),this.imageManager=new P,this.imageManager.setEventedParent(this),this.glyphManager=new E(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new G(256,512),this.crossTileSymbolIndex=new $t,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new y.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",y.az()),pt().on(He,this._rtlPluginLoaded),this.on("data",w=>{if("source"!==w.dataType||"metadata"!==w.sourceDataType)return;const T=this.sourceCaches[w.sourceId];if(!T)return;const Y=T.getSource();if(Y&&Y.vectorLayerIds)for(const ge in this._layers){const ve=this._layers[ge];ve.source===Y.id&&this._validateLayer(ve)}})}loadURL(a,d={},w){this.fire(new y.k("dataloading",{dataType:"style"})),d.validate="boolean"!=typeof d.validate||d.validate;const T=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController,y.h(T,this._loadStyleRequest).then(Y=>{this._loadStyleRequest=null,this._load(Y.data,d,w)}).catch(Y=>{this._loadStyleRequest=null,Y&&this.fire(new y.j(Y))})}loadJSON(a,d={},w){this.fire(new y.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,e.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=!1!==d.validate,this._load(a,d,w)}).catch(()=>{})}loadEmpty(){this.fire(new y.k("dataloading",{dataType:"style"})),this._load(sn,{validate:!1})}_load(a,d,w){var T;const Y=d.transformStyle?d.transformStyle(w,a):a;if(!d.validate||!pn(this,y.x(Y))){this._loaded=!0,this.stylesheet=Y;for(const ge in Y.sources)this.addSource(ge,Y.sources[ge],{validate:!1});Y.sprite?this._loadSprite(Y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Y.glyphs),this._createLayers(),this.light=new m(this.stylesheet.light),this.sky=new R(this.stylesheet.sky),this.map.setTerrain(null!==(T=this.stylesheet.terrain)&&void 0!==T?T:null),this.fire(new y.k("data",{dataType:"style"})),this.fire(new y.k("style.load"))}}_createLayers(){const a=y.aA(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of a){const w=y.aB(d);w.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=w}}_loadSprite(a,d=!1,w=void 0){let T;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(Y,ge,ve,Se){return y._(this,void 0,void 0,function*(){const ke=A(Y),ze=ve>1?"@2x":"",Be={},tt={};for(const{id:ot,url:ht}of ke){const wt=ge.transformRequest(b(ht,ze,".json"),"SpriteJSON");Be[ot]=y.h(wt,Se);const gt=ge.transformRequest(b(ht,ze,".png"),"SpriteImage");tt[ot]=ae.getImage(gt,Se)}return yield Promise.all([...Object.values(Be),...Object.values(tt)]),function(ot,ht){return y._(this,void 0,void 0,function*(){const wt={};for(const gt in ot){wt[gt]={};const Ct=e.getImageCanvasContext((yield ht[gt]).data),Mt=(yield ot[gt]).data;for(const vt in Mt){const{width:Pt,height:Nt,x:Vt,y:Kt,sdf:nn,pixelRatio:Sn,stretchX:An,stretchY:ln,content:hn,textFitWidth:Ln,textFitHeight:ii}=Mt[vt];wt[gt][vt]={data:null,pixelRatio:Sn,sdf:nn,stretchX:An,stretchY:ln,content:hn,textFitWidth:Ln,textFitHeight:ii,spriteData:{width:Pt,height:Nt,x:Vt,y:Kt,context:Ct}}}}return wt})}(Be,tt)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(Y=>{if(this._spriteRequest=null,Y)for(const ge in Y){this._spritesImagesIds[ge]=[];const ve=this._spritesImagesIds[ge]?this._spritesImagesIds[ge].filter(Se=>!(Se in Y)):[];for(const Se of ve)this.imageManager.removeImage(Se),this._changedImages[Se]=!0;for(const Se in Y[ge]){const ke="default"===ge?Se:`${ge}:${Se}`;this._spritesImagesIds[ge].push(ke),ke in this.imageManager.images?this.imageManager.updateImage(ke,Y[ge][Se],!1):this.imageManager.addImage(ke,Y[ge][Se]),d&&(this._changedImages[ke]=!0)}}}).catch(Y=>{this._spriteRequest=null,T=Y,this.fire(new y.j(T))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.k("data",{dataType:"style"})),w&&w(T)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const w=a.sourceLayer;if(!w)return;const T=d.getSource();("geojson"===T.type||T.vectorLayerIds&&-1===T.vectorLayerIds.indexOf(w))&&this.fire(new y.j(new Error(`Source layer "${w}" does not exist on source "${T.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){const d=this._serializedAllLayers();if(!a||0===a.length)return Object.values(d);const w=[];for(const T of a)d[T]&&w.push(d[T]);return w}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const w of d){const T=this._layers[w];"custom"!==T.type&&(a[w]=T.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(d){const T=Object.keys(this._updatedLayers),Y=Object.keys(this._removedLayers);(T.length||Y.length)&&this._updateWorkerLayers(T,Y);for(const ge in this._updatedSources){const ve=this._updatedSources[ge];if("reload"===ve)this._reloadSource(ge);else{if("clear"!==ve)throw new Error(`Invalid action ${ve}`);this._clearSource(ge)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const ge in this._updatedPaintProps)this._layers[ge].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const w={};for(const T in this.sourceCaches){const Y=this.sourceCaches[T];w[T]=Y.used,Y.used=!1}for(const T of this._order){const Y=this._layers[T];Y.recalculate(a,this._availableImages),!Y.isHidden(a.zoom)&&Y.source&&(this.sourceCaches[Y.source].used=!0)}for(const T in w){const Y=this.sourceCaches[T];!!w[T]!=!!Y.used&&Y.fire(new y.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:T}))}this.light.recalculate(a),this.sky.recalculate(a),this.z=a.zoom,d&&this.fire(new y.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var w;this._checkLoaded();const T=this.serialize();if(a=d.transformStyle?d.transformStyle(T,a):a,(null===(w=d.validate)||void 0===w||w)&&pn(this,y.x(a)))return!1;(a=y.aC(a)).layers=y.aA(a.layers);const Y=y.aD(T,a),ge=this._getOperationsToPerform(Y);if(ge.unimplemented.length>0)throw new Error(`Unimplemented: ${ge.unimplemented.join(", ")}.`);if(0===ge.operations.length)return!1;for(const ve of ge.operations)ve();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const d=[],w=[];for(const T of a)switch(T.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,T.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,T.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,T.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,T.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,T.args));break;case"addSource":d.push(()=>this.addSource.apply(this,T.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,T.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,T.args));break;case"setLight":d.push(()=>this.setLight.apply(this,T.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,T.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,T.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,T.args));break;case"setSky":d.push(()=>this.setSky.apply(this,T.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,T.args));break;case"setTransition":d.push(()=>{});break;default:w.push(T.command)}return{operations:d,unimplemented:w}}addImage(a,d){if(this.getImage(a))return this.fire(new y.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new y.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,w={}){if(this._checkLoaded(),void 0!==this.sourceCaches[a])throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(y.x.source,`sources.${a}`,d,null,w))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=this.sourceCaches[a]=new Ge(a,d,this.dispatcher);T.style=this,T.setEventedParent(this,()=>({isSourceLoaded:T.loaded(),source:T.serialize(),sourceId:a})),T.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===a)return this.fire(new y.j(new Error(`Source "${a}" cannot be removed while layer "${w}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new y.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error(`There is no source with this ID=${a}`);const w=this.sourceCaches[a].getSource();if("geojson"!==w.type)throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,w={}){this._checkLoaded();const T=a.id;if(this.getLayer(T))return void this.fire(new y.j(new Error(`Layer "${T}" already exists on this map.`)));let Y;if("custom"===a.type){if(pn(this,y.aE(a)))return;Y=y.aB(a)}else{if("source"in a&&"object"==typeof a.source&&(this.addSource(T,a.source),a=y.aC(a),a=y.e(a,{source:T})),this._validate(y.x.layer,`layers.${T}`,a,{arrayIndex:-1},w))return;Y=y.aB(a),this._validateLayer(Y),Y.setEventedParent(this,{layer:{id:T}})}const ge=d?this._order.indexOf(d):this._order.length;if(d&&-1===ge)this.fire(new y.j(new Error(`Cannot add layer "${T}" before non-existing layer "${d}".`)));else{if(this._order.splice(ge,0,T),this._layerOrderChanged=!0,this._layers[T]=Y,this._removedLayers[T]&&Y.source&&"custom"!==Y.type){const ve=this._removedLayers[T];delete this._removedLayers[T],ve.type!==Y.type?this._updatedSources[Y.source]="clear":(this._updatedSources[Y.source]="reload",this.sourceCaches[Y.source].pause())}this._updateLayer(Y),Y.onAdd&&Y.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new y.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const w=this._order.indexOf(a);this._order.splice(w,1);const T=d?this._order.indexOf(d):this._order.length;d&&-1===T?this.fire(new y.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(T,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new y.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const w=this._order.indexOf(a);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,w){this._checkLoaded();const T=this.getLayer(a);T?T.minzoom===d&&T.maxzoom===w||(null!=d&&(T.minzoom=d),null!=w&&(T.maxzoom=w),this._updateLayer(T)):this.fire(new y.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,w={}){this._checkLoaded();const T=this.getLayer(a);if(T){if(!y.aF(T.filter,d))return null==d?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(y.x.filter,`layers.${T.id}.filter`,d,null,w)||(T.filter=y.aC(d),this._updateLayer(T)))}else this.fire(new y.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return y.aC(this.getLayer(a).filter)}setLayoutProperty(a,d,w,T={}){this._checkLoaded();const Y=this.getLayer(a);Y?y.aF(Y.getLayoutProperty(d),w)||(Y.setLayoutProperty(d,w,T),this._updateLayer(Y)):this.fire(new y.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const w=this.getLayer(a);if(w)return w.getLayoutProperty(d);this.fire(new y.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,w,T={}){this._checkLoaded();const Y=this.getLayer(a);Y?y.aF(Y.getPaintProperty(d),w)||(Y.setPaintProperty(d,w,T)&&this._updateLayer(Y),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new y.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const w=a.source,T=a.sourceLayer,Y=this.sourceCaches[w];if(void 0===Y)return void this.fire(new y.j(new Error(`The source '${w}' does not exist in the map's style.`)));const ge=Y.getSource().type;"geojson"===ge&&T?this.fire(new y.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ge||T?(void 0===a.id&&this.fire(new y.j(new Error("The feature id parameter must be provided."))),Y.setFeatureState(T,a.id,d)):this.fire(new y.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const w=a.source,T=this.sourceCaches[w];if(void 0===T)return void this.fire(new y.j(new Error(`The source '${w}' does not exist in the map's style.`)));const Y=T.getSource().type,ge="vector"===Y?a.sourceLayer:void 0;"vector"!==Y||ge?d&&"string"!=typeof a.id&&"number"!=typeof a.id?this.fire(new y.j(new Error("A feature id is required to remove its specific state property."))):T.removeFeatureState(ge,a.id,d):this.fire(new y.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,w=a.sourceLayer,T=this.sourceCaches[d];if(void 0!==T)return"vector"!==T.getSource().type||w?(void 0===a.id&&this.fire(new y.j(new Error("The feature id parameter must be provided."))),T.getFeatureState(w,a.id)):void this.fire(new y.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new y.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return y.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=y.aG(this.sourceCaches,Y=>Y.serialize()),d=this._serializeByIds(this._order),w=this.map.getTerrain()||void 0,T=this.stylesheet;return y.aH({version:T.version,name:T.name,metadata:T.metadata,light:T.light,sky:T.sky,center:T.center,zoom:T.zoom,bearing:T.bearing,pitch:T.pitch,sprite:T.sprite,glyphs:T.glyphs,transition:T.transition,sources:a,layers:d,terrain:w},Y=>void 0!==Y)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&"raster"!==this.sourceCaches[a.source].getSource().type&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=ge=>"fill-extrusion"===this._layers[ge].type,w={},T=[];for(let ge=this._order.length-1;ge>=0;ge--){const ve=this._order[ge];if(d(ve)){w[ve]=ge;for(const Se of a){const ke=Se[ve];if(ke)for(const ze of ke)T.push(ze)}}}T.sort((ge,ve)=>ve.intersectionZ-ge.intersectionZ);const Y=[];for(let ge=this._order.length-1;ge>=0;ge--){const ve=this._order[ge];if(d(ve))for(let Se=T.length-1;Se>=0;Se--){const ke=T[Se].feature;if(w[ke.layer.id]<ge)break;Y.push(ke),T.pop()}else for(const Se of a){const ke=Se[ve];if(ke)for(const ze of ke)Y.push(ze.feature)}}return Y}queryRenderedFeatures(a,d,w){d&&d.filter&&this._validate(y.x.filter,"queryRenderedFeatures.filter",d.filter,null,d);const T={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new y.j(new Error("parameters.layers must be an Array."))),[];for(const ve of d.layers){const Se=this._layers[ve];if(!Se)return this.fire(new y.j(new Error(`The layer '${ve}' does not exist in the map's style and cannot be queried for features.`))),[];T[Se.source]=!0}}const Y=[];d.availableImages=this._availableImages;const ge=this._serializedAllLayers();for(const ve in this.sourceCaches)d.layers&&!T[ve]||Y.push(pe(this.sourceCaches[ve],this._layers,ge,a,d,w));return this.placement&&Y.push(function(ve,Se,ke,ze,Be,tt,ot){const ht={},wt=tt.queryRenderedSymbols(ze),gt=[];for(const Ct of Object.keys(wt).map(Number))gt.push(ot[Ct]);gt.sort(ye);for(const Ct of gt){const Mt=Ct.featureIndex.lookupSymbolFeatures(wt[Ct.bucketInstanceId],Se,Ct.bucketIndex,Ct.sourceLayerIndex,Be.filter,Be.layers,Be.availableImages,ve);for(const vt in Mt){const Pt=ht[vt]=ht[vt]||[],Nt=Mt[vt];Nt.sort((Vt,Kt)=>{const nn=Ct.featureSortOrder;if(nn){const Sn=nn.indexOf(Vt.featureIndex);return nn.indexOf(Kt.featureIndex)-Sn}return Kt.featureIndex-Vt.featureIndex});for(const Vt of Nt)Pt.push(Vt)}}for(const Ct in ht)ht[Ct].forEach(Mt=>{const vt=Mt.feature,Pt=ke[ve[Ct].source].getFeatureState(vt.layer["source-layer"],vt.id);vt.source=vt.layer.source,vt.layer["source-layer"]&&(vt.sourceLayer=vt.layer["source-layer"]),vt.state=Pt});return ht}(this._layers,ge,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Y)}querySourceFeatures(a,d){d&&d.filter&&this._validate(y.x.filter,"querySourceFeatures.filter",d.filter,null,d);const w=this.sourceCaches[a];return w?function(T,Y){const ge=T.getRenderableIds().map(ke=>T.getTileByID(ke)),ve=[],Se={};for(let ke=0;ke<ge.length;ke++){const ze=ge[ke],Be=ze.tileID.canonical.key;Se[Be]||(Se[Be]=!0,ze.querySourceFeatures(ve,Y))}return ve}(w,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const w=this.light.getLight();let T=!1;for(const ge in a)if(!y.aF(a[ge],w[ge])){T=!0;break}if(!T)return;const Y={now:e.now(),transition:y.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(Y)}getSky(){var a;return null===(a=this.stylesheet)||void 0===a?void 0:a.sky}setSky(a,d={}){const w=this.sky.getSky();let T=!1;a||w&&(T=!0);for(const ge in a)if(!y.aF(a[ge],w[ge])){T=!0;break}if(!T)return;const Y={now:e.now(),transition:y.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,d),this.sky.updateTransitions(Y)}_validate(a,d,w,T,Y={}){return(!Y||!1!==Y.validate)&&pn(this,a.call(y.x,y.e({key:d,style:this.serialize(),value:w,styleSpec:y.v},T)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pt().off(He,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const w=this.sourceCaches[d];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,w,T,Y=!1){let ge=!1,ve=!1;const Se={};for(const ke of this._order){const ze=this._layers[ke];if("symbol"!==ze.type)continue;if(!Se[ze.source]){const tt=this.sourceCaches[ze.source];Se[ze.source]=tt.getRenderableIds(!0).map(ot=>tt.getTileByID(ot)).sort((ot,ht)=>ht.tileID.overscaledZ-ot.tileID.overscaledZ||(ot.tileID.isLessThan(ht.tileID)?-1:1))}const Be=this.crossTileSymbolIndex.addLayer(ze,Se[ze.source],a.center.lng);ge=ge||Be}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Y=Y||this._layerOrderChanged||0===w)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.now(),a.zoom))&&(this.pauseablePlacement=new wr(a,this.map.terrain,this._order,Y,d,w,T,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Se),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.now()),ve=!0),ge&&this.pauseablePlacement.placement.setStale()),ve||ge)for(const ke of this._order){const ze=this._layers[ke];"symbol"===ze.type&&this.placement.updateLayerOpacities(ze,Se[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return y._(this,void 0,void 0,function*(){const w=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const T=this.sourceCaches[d.source];return T&&T.setDependencies(d.tileID.key,d.type,d.icons),w})}getGlyphs(a,d){return y._(this,void 0,void 0,function*(){const w=yield this.glyphManager.getGlyphs(d.stacks),T=this.sourceCaches[d.source];return T&&T.setDependencies(d.tileID.key,d.type,[""]),w})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(y.x.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,w={},T){this._checkLoaded();const Y=[{id:a,url:d}],ge=[...A(this.stylesheet.sprite),...Y];this._validate(y.x.sprite,"sprite",ge,null,w)||(this.stylesheet.sprite=ge,this._loadSprite(Y,!0,T))}removeSprite(a){this._checkLoaded();const d=A(this.stylesheet.sprite);if(d.find(w=>w.id===a)){if(this._spritesImagesIds[a])for(const w of this._spritesImagesIds[a])this.imageManager.removeImage(w),this._changedImages[w]=!0;d.splice(d.findIndex(w=>w.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.k("data",{dataType:"style"}))}else this.fire(new y.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return A(this.stylesheet.sprite)}setSprite(a,d={},w){this._checkLoaded(),a&&this._validate(y.x.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,w):(this._unloadSprite(),w&&w(null)))}}var Wn=y.Y([{name:"a_pos",type:"Int16",components:2}]);const vn={prelude:fn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:fn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:fn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:fn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:fn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:fn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:fn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:fn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:fn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:fn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:fn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:fn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:fn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:fn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:fn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:fn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:fn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:fn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:fn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:fn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:fn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function fn(Z,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=a.match(/attribute ([\w]+) ([\w]+)/g),T=Z.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Y=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ge=Y?Y.concat(T):T,ve={};return{fragmentSource:Z=Z.replace(d,(Se,ke,ze,Be,tt)=>(ve[tt]=!0,"define"===ke?`\n#ifndef HAS_UNIFORM_u_${tt}\nvarying ${ze} ${Be} ${tt};\n#else\nuniform ${ze} ${Be} u_${tt};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${tt}\n    ${ze} ${Be} ${tt} = u_${tt};\n#endif\n`)),vertexSource:a=a.replace(d,(Se,ke,ze,Be,tt)=>{const ot="float"===Be?"vec2":"vec4",ht=tt.match(/color/)?"color":ot;return ve[tt]?"define"===ke?`\n#ifndef HAS_UNIFORM_u_${tt}\nuniform lowp float u_${tt}_t;\nattribute ${ze} ${ot} a_${tt};\nvarying ${ze} ${Be} ${tt};\n#else\nuniform ${ze} ${Be} u_${tt};\n#endif\n`:"vec4"===ht?`\n#ifndef HAS_UNIFORM_u_${tt}\n    ${tt} = a_${tt};\n#else\n    ${ze} ${Be} ${tt} = u_${tt};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${tt}\n    ${tt} = unpack_mix_${ht}(a_${tt}, u_${tt}_t);\n#else\n    ${ze} ${Be} ${tt} = u_${tt};\n#endif\n`:"define"===ke?`\n#ifndef HAS_UNIFORM_u_${tt}\nuniform lowp float u_${tt}_t;\nattribute ${ze} ${ot} a_${tt};\n#else\nuniform ${ze} ${Be} u_${tt};\n#endif\n`:"vec4"===ht?`\n#ifndef HAS_UNIFORM_u_${tt}\n    ${ze} ${Be} ${tt} = a_${tt};\n#else\n    ${ze} ${Be} ${tt} = u_${tt};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${tt}\n    ${ze} ${Be} ${tt} = unpack_mix_${ht}(a_${tt}, u_${tt}_t);\n#else\n    ${ze} ${Be} ${tt} = u_${tt};\n#endif\n`}),staticAttributes:w,staticUniforms:ge}}class ai{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,w,T,Y,ge,ve,Se,ke){this.context=a;let ze=this.boundPaintVertexBuffers.length!==T.length;for(let Be=0;!ze&&Be<T.length;Be++)this.boundPaintVertexBuffers[Be]!==T[Be]&&(ze=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==w||ze||this.boundIndexBuffer!==Y||this.boundVertexOffset!==ge||this.boundDynamicVertexBuffer!==ve||this.boundDynamicVertexBuffer2!==Se||this.boundDynamicVertexBuffer3!==ke?this.freshBind(d,w,T,Y,ge,ve,Se,ke):(a.bindVertexArray.set(this.vao),ve&&ve.bind(),Y&&Y.dynamicDraw&&Y.bind(),Se&&Se.bind(),ke&&ke.bind())}freshBind(a,d,w,T,Y,ge,ve,Se){const ke=a.numAttributes,ze=this.context,Be=ze.gl;this.vao&&this.destroy(),this.vao=ze.createVertexArray(),ze.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=T,this.boundVertexOffset=Y,this.boundDynamicVertexBuffer=ge,this.boundDynamicVertexBuffer2=ve,this.boundDynamicVertexBuffer3=Se,d.enableAttributes(Be,a);for(const tt of w)tt.enableAttributes(Be,a);ge&&ge.enableAttributes(Be,a),ve&&ve.enableAttributes(Be,a),Se&&Se.enableAttributes(Be,a),d.bind(),d.setVertexAttribPointers(Be,a,Y);for(const tt of w)tt.bind(),tt.setVertexAttribPointers(Be,a,Y);ge&&(ge.bind(),ge.setVertexAttribPointers(Be,a,Y)),T&&T.bind(),ve&&(ve.bind(),ve.setVertexAttribPointers(Be,a,Y)),Se&&(Se.bind(),Se.setVertexAttribPointers(Be,a,Y)),ze.currentNumAttributes=ke}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const mi=(Z,a,d,w,T)=>({u_matrix:Z,u_texture:0,u_ele_delta:a,u_fog_matrix:d,u_fog_color:w?w.properties.get("fog-color"):y.aN.white,u_fog_ground_blend:w?w.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?w.calculateFogBlendOpacity(T):0,u_horizon_color:w?w.properties.get("horizon-color"):y.aN.white,u_horizon_fog_blend:w?w.properties.get("horizon-fog-blend"):1});function Dn(Z){const a=[];for(let d=0;d<Z.length;d++){if(null===Z[d])continue;const w=Z[d].split(" ");a.push(w.pop())}return a}class zi{constructor(a,d,w,T,Y,ge){const ve=a.gl;this.program=ve.createProgram();const Se=Dn(d.staticAttributes),ke=w?w.getBinderAttributes():[],ze=Se.concat(ke),Be=vn.prelude.staticUniforms?Dn(vn.prelude.staticUniforms):[],tt=d.staticUniforms?Dn(d.staticUniforms):[],ot=w?w.getBinderUniforms():[],ht=Be.concat(tt).concat(ot),wt=[];for(const Vt of ht)wt.indexOf(Vt)<0&&wt.push(Vt);const gt=w?w.defines():[];Y&&gt.push("#define OVERDRAW_INSPECTOR;"),ge&&gt.push("#define TERRAIN3D;");const Ct=gt.concat(vn.prelude.fragmentSource,d.fragmentSource).join("\n"),Mt=gt.concat(vn.prelude.vertexSource,d.vertexSource).join("\n"),vt=ve.createShader(ve.FRAGMENT_SHADER);if(ve.isContextLost())return void(this.failedToCreate=!0);if(ve.shaderSource(vt,Ct),ve.compileShader(vt),!ve.getShaderParameter(vt,ve.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ve.getShaderInfoLog(vt)}`);ve.attachShader(this.program,vt);const Pt=ve.createShader(ve.VERTEX_SHADER);if(ve.isContextLost())return void(this.failedToCreate=!0);if(ve.shaderSource(Pt,Mt),ve.compileShader(Pt),!ve.getShaderParameter(Pt,ve.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ve.getShaderInfoLog(Pt)}`);ve.attachShader(this.program,Pt),this.attributes={};const Nt={};this.numAttributes=ze.length;for(let Vt=0;Vt<this.numAttributes;Vt++)ze[Vt]&&(ve.bindAttribLocation(this.program,Vt,ze[Vt]),this.attributes[ze[Vt]]=Vt);if(ve.linkProgram(this.program),!ve.getProgramParameter(this.program,ve.LINK_STATUS))throw new Error(`Program failed to link: ${ve.getProgramInfoLog(this.program)}`);ve.deleteShader(Pt),ve.deleteShader(vt);for(let Vt=0;Vt<wt.length;Vt++){const Kt=wt[Vt];if(Kt&&!Nt[Kt]){const nn=ve.getUniformLocation(this.program,Kt);nn&&(Nt[Kt]=nn)}}var Vt,Kt;this.fixedUniforms=T(a,Nt),this.terrainUniforms={u_depth:new y.aI(Vt=a,(Kt=Nt).u_depth),u_terrain:new y.aI(Vt,Kt.u_terrain),u_terrain_dim:new y.aJ(Vt,Kt.u_terrain_dim),u_terrain_matrix:new y.aK(Vt,Kt.u_terrain_matrix),u_terrain_unpack:new y.aL(Vt,Kt.u_terrain_unpack),u_terrain_exaggeration:new y.aJ(Vt,Kt.u_terrain_exaggeration)},this.binderUniforms=w?w.getUniforms(a,Nt):[]}draw(a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot,ht,wt,gt,Ct,Mt){const vt=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(w),a.setStencilMode(T),a.setColorMode(Y),a.setCullFace(ge),Se){a.activeTexture.set(vt.TEXTURE2),vt.bindTexture(vt.TEXTURE_2D,Se.depthTexture),a.activeTexture.set(vt.TEXTURE3),vt.bindTexture(vt.TEXTURE_2D,Se.texture);for(const Nt in this.terrainUniforms)this.terrainUniforms[Nt].set(Se[Nt])}for(const Nt in this.fixedUniforms)this.fixedUniforms[Nt].set(ve[Nt]);wt&&wt.setUniforms(a,this.binderUniforms,ot,{zoom:ht});let Pt=0;switch(d){case vt.LINES:Pt=2;break;case vt.TRIANGLES:Pt=3;break;case vt.LINE_STRIP:Pt=1}for(const Nt of tt.get()){const Vt=Nt.vaos||(Nt.vaos={});(Vt[ke]||(Vt[ke]=new ai)).bind(a,this,ze,wt?wt.getPaintVertexBuffers():[],Be,Nt.vertexOffset,gt,Ct,Mt),vt.drawElements(d,Nt.primitiveLength*Pt,vt.UNSIGNED_SHORT,Nt.primitiveOffset*Pt*2)}}}function oi(Z,a,d){const w=1/En(d,1,a.transform.tileZoom),T=Math.pow(2,d.tileID.overscaledZ),Y=d.tileSize*Math.pow(2,a.transform.tileZoom)/T,ge=Y*(d.tileID.canonical.x+d.tileID.wrap*T),ve=Y*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[w,Z.fromScale,Z.toScale],u_fade:Z.t,u_pixel_coord_upper:[ge>>16,ve>>16],u_pixel_coord_lower:[65535&ge,65535&ve]}}const wi=(Z,a,d,w)=>{const T=a.style.light,Y=T.properties.get("position"),ge=[Y.x,Y.y,Y.z],ve=(ke=new y.A(9),y.A!=Float32Array&&(ke[1]=0,ke[2]=0,ke[3]=0,ke[5]=0,ke[6]=0,ke[7]=0),ke[0]=1,ke[4]=1,ke[8]=1,ke);var ke;"viewport"===T.properties.get("anchor")&&function(ke,ze){var Be=Math.sin(ze),tt=Math.cos(ze);ke[0]=tt,ke[1]=Be,ke[2]=0,ke[3]=-Be,ke[4]=tt,ke[5]=0,ke[6]=0,ke[7]=0,ke[8]=1}(ve,-a.transform.angle),function(ke,ze,Be){var tt=ze[0],ot=ze[1],ht=ze[2];ke[0]=tt*Be[0]+ot*Be[3]+ht*Be[6],ke[1]=tt*Be[1]+ot*Be[4]+ht*Be[7],ke[2]=tt*Be[2]+ot*Be[5]+ht*Be[8]}(ge,ge,ve);const Se=T.properties.get("color");return{u_matrix:Z,u_lightpos:ge,u_lightintensity:T.properties.get("intensity"),u_lightcolor:[Se.r,Se.g,Se.b],u_vertical_gradient:+d,u_opacity:w}},Mi=(Z,a,d,w,T,Y,ge)=>y.e(wi(Z,a,d,w),oi(Y,a,ge),{u_height_factor:-Math.pow(2,T.overscaledZ)/ge.tileSize/8}),Mn=Z=>({u_matrix:Z}),an=(Z,a,d,w)=>y.e(Mn(Z),oi(d,a,w)),sr=(Z,a)=>({u_matrix:Z,u_world:a}),li=(Z,a,d,w,T)=>y.e(an(Z,a,d,w),{u_world:T}),qi=(Z,a,d,w)=>{const T=Z.transform;let Y,ge;if("map"===w.paint.get("circle-pitch-alignment")){const ve=En(d,1,T.zoom);Y=!0,ge=[ve,ve]}else Y=!1,ge=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+("map"===w.paint.get("circle-pitch-scale")),u_matrix:Z.translatePosMatrix(a.posMatrix,d,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+Y,u_device_pixel_ratio:Z.pixelRatio,u_extrude_scale:ge}},ki=(Z,a,d)=>({u_matrix:Z,u_inv_matrix:a,u_camera_to_center_distance:d.cameraToCenterDistance,u_viewport_size:[d.width,d.height]}),qt=(Z,a,d=1)=>({u_matrix:Z,u_color:a,u_overlay:0,u_overlay_scale:d}),ws=Z=>({u_matrix:Z}),jn=(Z,a,d,w)=>({u_matrix:Z,u_extrude_scale:En(a,1,d),u_intensity:w});function Xn(Z,a){const d=Math.pow(2,a.canonical.z),w=a.canonical.y;return[new y.Z(0,w/d).toLngLat().lat,new y.Z(0,(w+1)/d).toLngLat().lat]}const Wi=(Z,a,d,w)=>{const T=Z.transform;return{u_matrix:ju(Z,a,d,w),u_ratio:1/En(a,1,T.zoom),u_device_pixel_ratio:Z.pixelRatio,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Pr=(Z,a,d,w,T)=>y.e(Wi(Z,a,d,T),{u_image:0,u_image_height:w}),aa=(Z,a,d,w,T)=>{const Y=Z.transform,ge=Fr(a,Y);return{u_matrix:ju(Z,a,d,T),u_texsize:a.imageAtlasTexture.size,u_ratio:1/En(a,1,Y.zoom),u_device_pixel_ratio:Z.pixelRatio,u_image:0,u_scale:[ge,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/Y.pixelsToGLUnits[0],1/Y.pixelsToGLUnits[1]]}},ul=(Z,a,d,w,T,Y)=>{const ge=Z.lineAtlas,ve=Fr(a,Z.transform),Se="round"===d.layout.get("line-cap"),ke=ge.getDash(w.from,Se),ze=ge.getDash(w.to,Se),Be=ke.width*T.fromScale,tt=ze.width*T.toScale;return y.e(Wi(Z,a,d,Y),{u_patternscale_a:[ve/Be,-ke.height/2],u_patternscale_b:[ve/tt,-ze.height/2],u_sdfgamma:ge.width/(256*Math.min(Be,tt)*Z.pixelRatio)/2,u_image:0,u_tex_y_a:ke.y,u_tex_y_b:ze.y,u_mix:T.t})};function Fr(Z,a){return 1/En(Z,1,a.tileZoom)}function ju(Z,a,d,w){return Z.translatePosMatrix(w?w.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Hu=(Z,a,d,w,T)=>{return{u_matrix:Z,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(ge=T.paint.get("raster-saturation"),ge>0?1-1/(1.001-ge):-ge),u_contrast_factor:(Y=T.paint.get("raster-contrast"),Y>0?1/(1-Y):1+Y),u_spin_weights:hd(T.paint.get("raster-hue-rotate"))};var Y,ge};function hd(Z){Z*=Math.PI/180;const a=Math.sin(Z),d=Math.cos(Z);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const ho=(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot)=>{const ht=ge.transform;return{u_is_size_zoom_constant:+("constant"===Z||"source"===Z),u_is_size_feature_constant:+("constant"===Z||"camera"===Z),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:ht.cameraToCenterDistance,u_pitch:ht.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:ht.width/ht.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:ve,u_label_plane_matrix:Se,u_coord_matrix:ke,u_is_text:+Be,u_pitch_with_map:+w,u_is_along_line:T,u_is_variable_anchor:Y,u_texsize:tt,u_texture:0,u_translation:ze,u_pitched_scale:ot}},np=(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot,ht)=>{const wt=ge.transform;return y.e(ho(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ht),{u_gamma_scale:w?Math.cos(wt._pitch)*wt.cameraToCenterDistance:1,u_device_pixel_ratio:ge.pixelRatio,u_is_halo:+ot})},Y0=(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot)=>y.e(np(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,!0,Be,!0,ot),{u_texsize_icon:tt,u_texture_icon:1}),Gu=(Z,a,d)=>({u_matrix:Z,u_opacity:a,u_color:d}),dd=(Z,a,d,w,T,Y)=>y.e(function(ge,ve,Se,ke){const ze=Se.imageManager.getPattern(ge.from.toString()),Be=Se.imageManager.getPattern(ge.to.toString()),{width:tt,height:ot}=Se.imageManager.getPixelSize(),ht=Math.pow(2,ke.tileID.overscaledZ),wt=ke.tileSize*Math.pow(2,Se.transform.tileZoom)/ht,gt=wt*(ke.tileID.canonical.x+ke.tileID.wrap*ht),Ct=wt*ke.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:Be.tl,u_pattern_br_b:Be.br,u_texsize:[tt,ot],u_mix:ve.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:Be.displaySize,u_scale_a:ve.fromScale,u_scale_b:ve.toScale,u_tile_units_to_pixels:1/En(ke,1,Se.transform.tileZoom),u_pixel_coord_upper:[gt>>16,Ct>>16],u_pixel_coord_lower:[65535&gt,65535&Ct]}}(w,Y,d,T),{u_matrix:Z,u_opacity:a}),Oc={fillExtrusion:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_lightpos:new y.aO(Z,a.u_lightpos),u_lightintensity:new y.aJ(Z,a.u_lightintensity),u_lightcolor:new y.aO(Z,a.u_lightcolor),u_vertical_gradient:new y.aJ(Z,a.u_vertical_gradient),u_opacity:new y.aJ(Z,a.u_opacity)}),fillExtrusionPattern:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_lightpos:new y.aO(Z,a.u_lightpos),u_lightintensity:new y.aJ(Z,a.u_lightintensity),u_lightcolor:new y.aO(Z,a.u_lightcolor),u_vertical_gradient:new y.aJ(Z,a.u_vertical_gradient),u_height_factor:new y.aJ(Z,a.u_height_factor),u_image:new y.aI(Z,a.u_image),u_texsize:new y.aP(Z,a.u_texsize),u_pixel_coord_upper:new y.aP(Z,a.u_pixel_coord_upper),u_pixel_coord_lower:new y.aP(Z,a.u_pixel_coord_lower),u_scale:new y.aO(Z,a.u_scale),u_fade:new y.aJ(Z,a.u_fade),u_opacity:new y.aJ(Z,a.u_opacity)}),fill:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix)}),fillPattern:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_image:new y.aI(Z,a.u_image),u_texsize:new y.aP(Z,a.u_texsize),u_pixel_coord_upper:new y.aP(Z,a.u_pixel_coord_upper),u_pixel_coord_lower:new y.aP(Z,a.u_pixel_coord_lower),u_scale:new y.aO(Z,a.u_scale),u_fade:new y.aJ(Z,a.u_fade)}),fillOutline:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_world:new y.aP(Z,a.u_world)}),fillOutlinePattern:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_world:new y.aP(Z,a.u_world),u_image:new y.aI(Z,a.u_image),u_texsize:new y.aP(Z,a.u_texsize),u_pixel_coord_upper:new y.aP(Z,a.u_pixel_coord_upper),u_pixel_coord_lower:new y.aP(Z,a.u_pixel_coord_lower),u_scale:new y.aO(Z,a.u_scale),u_fade:new y.aJ(Z,a.u_fade)}),circle:(Z,a)=>({u_camera_to_center_distance:new y.aJ(Z,a.u_camera_to_center_distance),u_scale_with_map:new y.aI(Z,a.u_scale_with_map),u_pitch_with_map:new y.aI(Z,a.u_pitch_with_map),u_extrude_scale:new y.aP(Z,a.u_extrude_scale),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_matrix:new y.aK(Z,a.u_matrix)}),collisionBox:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_pixel_extrude_scale:new y.aP(Z,a.u_pixel_extrude_scale)}),collisionCircle:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_inv_matrix:new y.aK(Z,a.u_inv_matrix),u_camera_to_center_distance:new y.aJ(Z,a.u_camera_to_center_distance),u_viewport_size:new y.aP(Z,a.u_viewport_size)}),debug:(Z,a)=>({u_color:new y.aM(Z,a.u_color),u_matrix:new y.aK(Z,a.u_matrix),u_overlay:new y.aI(Z,a.u_overlay),u_overlay_scale:new y.aJ(Z,a.u_overlay_scale)}),clippingMask:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix)}),heatmap:(Z,a)=>({u_extrude_scale:new y.aJ(Z,a.u_extrude_scale),u_intensity:new y.aJ(Z,a.u_intensity),u_matrix:new y.aK(Z,a.u_matrix)}),heatmapTexture:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_world:new y.aP(Z,a.u_world),u_image:new y.aI(Z,a.u_image),u_color_ramp:new y.aI(Z,a.u_color_ramp),u_opacity:new y.aJ(Z,a.u_opacity)}),hillshade:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_image:new y.aI(Z,a.u_image),u_latrange:new y.aP(Z,a.u_latrange),u_light:new y.aP(Z,a.u_light),u_shadow:new y.aM(Z,a.u_shadow),u_highlight:new y.aM(Z,a.u_highlight),u_accent:new y.aM(Z,a.u_accent)}),hillshadePrepare:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_image:new y.aI(Z,a.u_image),u_dimension:new y.aP(Z,a.u_dimension),u_zoom:new y.aJ(Z,a.u_zoom),u_unpack:new y.aL(Z,a.u_unpack)}),line:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_ratio:new y.aJ(Z,a.u_ratio),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_units_to_pixels:new y.aP(Z,a.u_units_to_pixels)}),lineGradient:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_ratio:new y.aJ(Z,a.u_ratio),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_units_to_pixels:new y.aP(Z,a.u_units_to_pixels),u_image:new y.aI(Z,a.u_image),u_image_height:new y.aJ(Z,a.u_image_height)}),linePattern:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_texsize:new y.aP(Z,a.u_texsize),u_ratio:new y.aJ(Z,a.u_ratio),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_image:new y.aI(Z,a.u_image),u_units_to_pixels:new y.aP(Z,a.u_units_to_pixels),u_scale:new y.aO(Z,a.u_scale),u_fade:new y.aJ(Z,a.u_fade)}),lineSDF:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_ratio:new y.aJ(Z,a.u_ratio),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_units_to_pixels:new y.aP(Z,a.u_units_to_pixels),u_patternscale_a:new y.aP(Z,a.u_patternscale_a),u_patternscale_b:new y.aP(Z,a.u_patternscale_b),u_sdfgamma:new y.aJ(Z,a.u_sdfgamma),u_image:new y.aI(Z,a.u_image),u_tex_y_a:new y.aJ(Z,a.u_tex_y_a),u_tex_y_b:new y.aJ(Z,a.u_tex_y_b),u_mix:new y.aJ(Z,a.u_mix)}),raster:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_tl_parent:new y.aP(Z,a.u_tl_parent),u_scale_parent:new y.aJ(Z,a.u_scale_parent),u_buffer_scale:new y.aJ(Z,a.u_buffer_scale),u_fade_t:new y.aJ(Z,a.u_fade_t),u_opacity:new y.aJ(Z,a.u_opacity),u_image0:new y.aI(Z,a.u_image0),u_image1:new y.aI(Z,a.u_image1),u_brightness_low:new y.aJ(Z,a.u_brightness_low),u_brightness_high:new y.aJ(Z,a.u_brightness_high),u_saturation_factor:new y.aJ(Z,a.u_saturation_factor),u_contrast_factor:new y.aJ(Z,a.u_contrast_factor),u_spin_weights:new y.aO(Z,a.u_spin_weights)}),symbolIcon:(Z,a)=>({u_is_size_zoom_constant:new y.aI(Z,a.u_is_size_zoom_constant),u_is_size_feature_constant:new y.aI(Z,a.u_is_size_feature_constant),u_size_t:new y.aJ(Z,a.u_size_t),u_size:new y.aJ(Z,a.u_size),u_camera_to_center_distance:new y.aJ(Z,a.u_camera_to_center_distance),u_pitch:new y.aJ(Z,a.u_pitch),u_rotate_symbol:new y.aI(Z,a.u_rotate_symbol),u_aspect_ratio:new y.aJ(Z,a.u_aspect_ratio),u_fade_change:new y.aJ(Z,a.u_fade_change),u_matrix:new y.aK(Z,a.u_matrix),u_label_plane_matrix:new y.aK(Z,a.u_label_plane_matrix),u_coord_matrix:new y.aK(Z,a.u_coord_matrix),u_is_text:new y.aI(Z,a.u_is_text),u_pitch_with_map:new y.aI(Z,a.u_pitch_with_map),u_is_along_line:new y.aI(Z,a.u_is_along_line),u_is_variable_anchor:new y.aI(Z,a.u_is_variable_anchor),u_texsize:new y.aP(Z,a.u_texsize),u_texture:new y.aI(Z,a.u_texture),u_translation:new y.aP(Z,a.u_translation),u_pitched_scale:new y.aJ(Z,a.u_pitched_scale)}),symbolSDF:(Z,a)=>({u_is_size_zoom_constant:new y.aI(Z,a.u_is_size_zoom_constant),u_is_size_feature_constant:new y.aI(Z,a.u_is_size_feature_constant),u_size_t:new y.aJ(Z,a.u_size_t),u_size:new y.aJ(Z,a.u_size),u_camera_to_center_distance:new y.aJ(Z,a.u_camera_to_center_distance),u_pitch:new y.aJ(Z,a.u_pitch),u_rotate_symbol:new y.aI(Z,a.u_rotate_symbol),u_aspect_ratio:new y.aJ(Z,a.u_aspect_ratio),u_fade_change:new y.aJ(Z,a.u_fade_change),u_matrix:new y.aK(Z,a.u_matrix),u_label_plane_matrix:new y.aK(Z,a.u_label_plane_matrix),u_coord_matrix:new y.aK(Z,a.u_coord_matrix),u_is_text:new y.aI(Z,a.u_is_text),u_pitch_with_map:new y.aI(Z,a.u_pitch_with_map),u_is_along_line:new y.aI(Z,a.u_is_along_line),u_is_variable_anchor:new y.aI(Z,a.u_is_variable_anchor),u_texsize:new y.aP(Z,a.u_texsize),u_texture:new y.aI(Z,a.u_texture),u_gamma_scale:new y.aJ(Z,a.u_gamma_scale),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_is_halo:new y.aI(Z,a.u_is_halo),u_translation:new y.aP(Z,a.u_translation),u_pitched_scale:new y.aJ(Z,a.u_pitched_scale)}),symbolTextAndIcon:(Z,a)=>({u_is_size_zoom_constant:new y.aI(Z,a.u_is_size_zoom_constant),u_is_size_feature_constant:new y.aI(Z,a.u_is_size_feature_constant),u_size_t:new y.aJ(Z,a.u_size_t),u_size:new y.aJ(Z,a.u_size),u_camera_to_center_distance:new y.aJ(Z,a.u_camera_to_center_distance),u_pitch:new y.aJ(Z,a.u_pitch),u_rotate_symbol:new y.aI(Z,a.u_rotate_symbol),u_aspect_ratio:new y.aJ(Z,a.u_aspect_ratio),u_fade_change:new y.aJ(Z,a.u_fade_change),u_matrix:new y.aK(Z,a.u_matrix),u_label_plane_matrix:new y.aK(Z,a.u_label_plane_matrix),u_coord_matrix:new y.aK(Z,a.u_coord_matrix),u_is_text:new y.aI(Z,a.u_is_text),u_pitch_with_map:new y.aI(Z,a.u_pitch_with_map),u_is_along_line:new y.aI(Z,a.u_is_along_line),u_is_variable_anchor:new y.aI(Z,a.u_is_variable_anchor),u_texsize:new y.aP(Z,a.u_texsize),u_texsize_icon:new y.aP(Z,a.u_texsize_icon),u_texture:new y.aI(Z,a.u_texture),u_texture_icon:new y.aI(Z,a.u_texture_icon),u_gamma_scale:new y.aJ(Z,a.u_gamma_scale),u_device_pixel_ratio:new y.aJ(Z,a.u_device_pixel_ratio),u_is_halo:new y.aI(Z,a.u_is_halo),u_translation:new y.aP(Z,a.u_translation),u_pitched_scale:new y.aJ(Z,a.u_pitched_scale)}),background:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_opacity:new y.aJ(Z,a.u_opacity),u_color:new y.aM(Z,a.u_color)}),backgroundPattern:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_opacity:new y.aJ(Z,a.u_opacity),u_image:new y.aI(Z,a.u_image),u_pattern_tl_a:new y.aP(Z,a.u_pattern_tl_a),u_pattern_br_a:new y.aP(Z,a.u_pattern_br_a),u_pattern_tl_b:new y.aP(Z,a.u_pattern_tl_b),u_pattern_br_b:new y.aP(Z,a.u_pattern_br_b),u_texsize:new y.aP(Z,a.u_texsize),u_mix:new y.aJ(Z,a.u_mix),u_pattern_size_a:new y.aP(Z,a.u_pattern_size_a),u_pattern_size_b:new y.aP(Z,a.u_pattern_size_b),u_scale_a:new y.aJ(Z,a.u_scale_a),u_scale_b:new y.aJ(Z,a.u_scale_b),u_pixel_coord_upper:new y.aP(Z,a.u_pixel_coord_upper),u_pixel_coord_lower:new y.aP(Z,a.u_pixel_coord_lower),u_tile_units_to_pixels:new y.aJ(Z,a.u_tile_units_to_pixels)}),terrain:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_texture:new y.aI(Z,a.u_texture),u_ele_delta:new y.aJ(Z,a.u_ele_delta),u_fog_matrix:new y.aK(Z,a.u_fog_matrix),u_fog_color:new y.aM(Z,a.u_fog_color),u_fog_ground_blend:new y.aJ(Z,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new y.aJ(Z,a.u_fog_ground_blend_opacity),u_horizon_color:new y.aM(Z,a.u_horizon_color),u_horizon_fog_blend:new y.aJ(Z,a.u_horizon_fog_blend)}),terrainDepth:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_ele_delta:new y.aJ(Z,a.u_ele_delta)}),terrainCoords:(Z,a)=>({u_matrix:new y.aK(Z,a.u_matrix),u_texture:new y.aI(Z,a.u_texture),u_terrain_coords_id:new y.aJ(Z,a.u_terrain_coords_id),u_ele_delta:new y.aJ(Z,a.u_ele_delta)}),sky:(Z,a)=>({u_sky_color:new y.aM(Z,a.u_sky_color),u_horizon_color:new y.aM(Z,a.u_horizon_color),u_horizon:new y.aJ(Z,a.u_horizon),u_sky_horizon_blend:new y.aJ(Z,a.u_sky_horizon_blend)})};class fd{constructor(a,d,w){this.context=a;const T=a.gl;this.buffer=T.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),T.bufferData(T.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $u={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ya{constructor(a,d,w,T){this.length=d.length,this.attributes=w,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.context=a;const Y=a.gl;this.buffer=Y.createBuffer(),a.bindVertexBuffer.set(this.buffer),Y.bufferData(Y.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let w=0;w<this.attributes.length;w++){const T=d.attributes[this.attributes[w].name];void 0!==T&&a.enableVertexAttribArray(T)}}setVertexAttribPointers(a,d,w){for(let T=0;T<this.attributes.length;T++){const Y=this.attributes[T],ge=d.attributes[Y.name];void 0!==ge&&a.vertexAttribPointer(ge,Y.components,a[$u[Y.type]],!1,this.itemSize,Y.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fs=new WeakMap;function ni(Z){var a;if(Fs.has(Z))return Fs.get(Z);{const d=null===(a=Z.getParameter(Z.VERSION))||void 0===a?void 0:a.startsWith("WebGL 2.0");return Fs.set(Z,d),d}}class Ii{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lc extends Ii{getDefault(){return y.aN.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class K0 extends Ii{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Bn extends Ii{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class J0 extends Ii{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Cr extends Ii{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Nc extends Ii{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class pd extends Ii{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class gd extends Ii{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class md extends Ii{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class hl extends Ii{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Yl extends Ii{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class Bc extends Ii{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class qu extends Ii{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class yd extends Ii{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class hi extends Ii{getDefault(){return y.aN.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class zc extends Ii{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class vd extends Ii{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Rs extends Ii{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Wu extends Ii{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Uc extends Ii{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class ar extends Ii{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Xu extends Ii{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Q0 extends Ii{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Rn extends Ii{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Vc extends Ii{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class jc extends Ii{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Zu extends Ii{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Kl extends Ii{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const w=this.gl;ni(w)?w.bindVertexArray(a):null===(d=w.getExtension("OES_vertex_array_object"))||void 0===d||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class xd extends Ii{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class dl extends Ii{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class fo extends Ii{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Hc extends Ii{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class _d extends Hc{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class bd extends Hc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class ip extends Hc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Po{constructor(a,d,w,T,Y){this.context=a,this.width=d,this.height=w;const ge=a.gl,ve=this.framebuffer=ge.createFramebuffer();if(this.colorAttachment=new _d(a,ve),T)this.depthAttachment=Y?new ip(a,ve):new bd(a,ve);else if(Y)throw new Error("Stencil cannot be set without depth");if(ge.checkFramebufferStatus(ge.FRAMEBUFFER)!==ge.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const w=this.depthAttachment.get();w&&a.deleteRenderbuffer(w)}a.deleteFramebuffer(this.framebuffer)}}class Hi{constructor(a,d,w){this.blendFunction=a,this.blendColor=d,this.mask=w}}Hi.Replace=[1,0],Hi.disabled=new Hi(Hi.Replace,y.aN.transparent,[!1,!1,!1,!1]),Hi.unblended=new Hi(Hi.Replace,y.aN.transparent,[!0,!0,!0,!0]),Hi.alphaBlended=new Hi([1,771],y.aN.transparent,[!0,!0,!0,!0]);class fl{constructor(a){var d,w;if(this.gl=a,this.clearColor=new Lc(this),this.clearDepth=new K0(this),this.clearStencil=new Bn(this),this.colorMask=new J0(this),this.depthMask=new Cr(this),this.stencilMask=new Nc(this),this.stencilFunc=new pd(this),this.stencilOp=new gd(this),this.stencilTest=new md(this),this.depthRange=new hl(this),this.depthTest=new Yl(this),this.depthFunc=new Bc(this),this.blend=new qu(this),this.blendFunc=new yd(this),this.blendColor=new hi(this),this.blendEquation=new zc(this),this.cullFace=new vd(this),this.cullFaceSide=new Rs(this),this.frontFace=new Wu(this),this.program=new Uc(this),this.activeTexture=new ar(this),this.viewport=new Xu(this),this.bindFramebuffer=new Q0(this),this.bindRenderbuffer=new Rn(this),this.bindTexture=new Vc(this),this.bindVertexBuffer=new jc(this),this.bindElementBuffer=new Zu(this),this.bindVertexArray=new Kl(this),this.pixelStoreUnpack=new xd(this),this.pixelStoreUnpackPremultiplyAlpha=new dl(this),this.pixelStoreUnpackFlipY=new fo(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),ni(a)){this.HALF_FLOAT=a.HALF_FLOAT;const T=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(d=a.RGBA16F)&&void 0!==d?d:T?.RGBA16F_EXT,this.RGB16F=null!==(w=a.RGB16F)&&void 0!==w?w:T?.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const T=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=T?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new fd(this,a,d)}createVertexBuffer(a,d,w){return new Ya(this,a,d,w)}createRenderbuffer(a,d,w){const T=this.gl,Y=T.createRenderbuffer();return this.bindRenderbuffer.set(Y),T.renderbufferStorage(T.RENDERBUFFER,a,d,w),this.bindRenderbuffer.set(null),Y}createFramebuffer(a,d,w,T){return new Po(this,a,d,w,T)}clear({color:a,depth:d,stencil:w}){const T=this.gl;let Y=0;a&&(Y|=T.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(Y|=T.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==w&&(Y|=T.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),T.clear(Y)}setCullFace(a){!1===a.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){y.aF(a.blendFunction,Hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return ni(this.gl)?this.gl.createVertexArray():null===(a=this.gl.getExtension("OES_vertex_array_object"))||void 0===a?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return ni(this.gl)?this.gl.deleteVertexArray(a):null===(d=this.gl.getExtension("OES_vertex_array_object"))||void 0===d?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class vi{constructor(a,d,w){this.func=a,this.mask=d,this.range=w}}vi.ReadOnly=!1,vi.ReadWrite=!0,vi.disabled=new vi(519,vi.ReadOnly,[0,1]);class cr{constructor(a,d,w,T,Y,ge){this.test=a,this.ref=d,this.mask=w,this.fail=T,this.depthFail=Y,this.pass=ge}}cr.disabled=new cr({func:519,mask:0},0,0,7680,7680,7680);class Ki{constructor(a,d,w){this.enable=a,this.mode=d,this.frontFace=w}}let La;function wd(Z,a,d,w,T){const Y=Z.context,ge=Y.gl,ve=Z.useProgram("collisionBox"),Se=[];let ke=0,ze=0;for(let Ct=0;Ct<w.length;Ct++){const Mt=w[Ct],vt=a.getTile(Mt).getBucket(d);if(!vt)continue;const Pt=T?vt.textCollisionBox:vt.iconCollisionBox,Nt=vt.collisionCircleArray;if(Nt.length>0){const Vt=y.H();y.aR(Vt,vt.placementInvProjMatrix,Z.transform.glCoordMatrix),y.aR(Vt,Vt,vt.placementViewportMatrix),Se.push({circleArray:Nt,circleOffset:ze,transform:Mt.posMatrix,invTransform:Vt,coord:Mt}),ke+=Nt.length/4,ze=ke}Pt&&ve.draw(Y,ge.LINES,vi.disabled,cr.disabled,Z.colorModeForRenderPass(),Ki.disabled,{u_matrix:Mt.posMatrix,u_pixel_extrude_scale:[1/(Be=Z.transform).width,1/Be.height]},Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(Mt),d.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,null,Z.transform.zoom,null,null,Pt.collisionVertexBuffer)}var Be;if(!T||!Se.length)return;const tt=Z.useProgram("collisionCircle"),ot=new y.aS;ot.resize(4*ke),ot._trim();let ht=0;for(const Ct of Se)for(let Mt=0;Mt<Ct.circleArray.length/4;Mt++){const vt=4*Mt,Pt=Ct.circleArray[vt+0],Nt=Ct.circleArray[vt+1],Vt=Ct.circleArray[vt+2],Kt=Ct.circleArray[vt+3];ot.emplace(ht++,Pt,Nt,Vt,Kt,0),ot.emplace(ht++,Pt,Nt,Vt,Kt,1),ot.emplace(ht++,Pt,Nt,Vt,Kt,2),ot.emplace(ht++,Pt,Nt,Vt,Kt,3)}(!La||La.length<2*ke)&&(La=function(Ct){const Mt=2*Ct,vt=new y.aU;vt.resize(Mt),vt._trim();for(let Pt=0;Pt<Mt;Pt++){const Nt=6*Pt;vt.uint16[Nt+0]=4*Pt+0,vt.uint16[Nt+1]=4*Pt+1,vt.uint16[Nt+2]=4*Pt+2,vt.uint16[Nt+3]=4*Pt+2,vt.uint16[Nt+4]=4*Pt+3,vt.uint16[Nt+5]=4*Pt+0}return vt}(ke));const wt=Y.createIndexBuffer(La,!0),gt=Y.createVertexBuffer(ot,y.aT.members,!0);for(const Ct of Se){const Mt=ki(Ct.transform,Ct.invTransform,Z.transform);tt.draw(Y,ge.TRIANGLES,vi.disabled,cr.disabled,Z.colorModeForRenderPass(),Ki.disabled,Mt,Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(Ct.coord),d.id,gt,wt,y.a0.simpleSegment(0,2*Ct.circleOffset,Ct.circleArray.length,Ct.circleArray.length/2),null,Z.transform.zoom,null,null,null)}gt.destroy(),wt.destroy()}Ki.disabled=new Ki(!1,1029,2305),Ki.backCCW=new Ki(!0,1029,2305);const Na=y.ao(new Float32Array(16));function Gc(Z,a,d,w,T,Y){const{horizontalAlign:ge,verticalAlign:ve}=y.av(Z);return new y.P((-(ge-.5)*a/T+w[0])*Y,(-(ve-.5)*d/T+w[1])*Y)}function On(Z,a,d,w,T,Y){const ge=a.tileAnchorPoint.add(new y.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let ve=w.mult(Y);return d||(ve=ve.rotate(-T)),rt(ge.add(ve),a.labelPlaneMatrix,a.getElevation).point}if(d){const ve=kt(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(Z),Se=Math.atan(ve.y/ve.x)+(ve.x<0?Math.PI:0);return Z.add(w.rotate(Se))}return Z.add(w)}function Jl(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be,tt,ot){const ht=Z.text.placedSymbolArray,wt=Z.text.dynamicLayoutVertexArray,gt=Z.icon.dynamicLayoutVertexArray,Ct={};wt.clear();for(let Mt=0;Mt<ht.length;Mt++){const vt=ht.get(Mt),Pt=vt.hidden||!vt.crossTileID||Z.allowVerticalPlacement&&!vt.placedOrientation?null:w[vt.crossTileID];if(Pt){const Nt=new y.P(vt.anchorX,vt.anchorY),Vt={getElevation:ot,width:T.width,height:T.height,labelPlaneMatrix:Y,lineVertexArray:null,pitchWithMap:d,projection:ze,projectionCache:null,tileAnchorPoint:Nt,translation:Be,unwrappedTileID:tt},Kt=d?rt(Nt,ge,ot):kt(Nt.x,Nt.y,Vt),nn=Pe(T.cameraToCenterDistance,Kt.signedDistanceFromCamera);let Sn=y.aj(Z.textSizeData,Se,vt)*nn/y.aq;d&&(Sn*=Z.tilePixelRatio/ve);const{width:An,height:ln,anchor:hn,textOffset:Ln,textBoxScale:ii}=Pt,gn=Gc(hn,An,ln,Ln,ii,Sn),xn=ze.getPitchedTextCorrection(T,Nt.add(new y.P(Be[0],Be[1])),tt),Yn=On(Kt.point,Vt,a,gn,T.angle,xn),er=Z.allowVerticalPlacement&&vt.placedOrientation===y.ai.vertical?Math.PI/2:0;for(let di=0;di<vt.numGlyphs;di++)y.ak(wt,Yn,er);ke&&vt.associatedIconIndex>=0&&(Ct[vt.associatedIconIndex]={shiftedAnchor:Yn,angle:er})}else un(vt.numGlyphs,wt)}if(ke){gt.clear();const Mt=Z.icon.placedSymbolArray;for(let vt=0;vt<Mt.length;vt++){const Pt=Mt.get(vt);if(Pt.hidden)un(Pt.numGlyphs,gt);else{const Nt=Ct[vt];if(Nt)for(let Vt=0;Vt<Pt.numGlyphs;Vt++)y.ak(gt,Nt.shiftedAnchor,Nt.angle);else un(Pt.numGlyphs,gt)}}Z.icon.dynamicLayoutVertexBuffer.updateData(gt)}Z.text.dynamicLayoutVertexBuffer.updateData(wt)}function dn(Z,a,d){return d.iconsInText&&a?"symbolTextAndIcon":Z?"symbolSDF":"symbolIcon"}function wa(Z,a,d,w,T,Y,ge,ve,Se,ke,ze,Be){const tt=Z.context,ot=tt.gl,ht=Z.transform,wt=cl(),gt="map"===ve,Ct="map"===Se,Mt="viewport"!==ve&&"point"!==d.layout.get("symbol-placement"),vt=gt&&!Ct&&!Mt,Pt=!Ct&&Mt,Nt=!d.layout.get("symbol-sort-key").isConstant();let Vt=!1;const Kt=Z.depthModeForSublayer(0,vi.ReadOnly),nn=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Sn=[],An=wt.getCircleRadiusCorrection(ht);for(const ln of w){const hn=a.getTile(ln),Ln=hn.getBucket(d);if(!Ln)continue;const ii=T?Ln.text:Ln.icon;if(!ii||!ii.segments.get().length||!ii.hasVisibleVertices)continue;const gn=ii.programConfigurations.get(d.id),xn=T||Ln.sdfIcons,Yn=T?Ln.textSizeData:Ln.iconSizeData,er=Ct||0!==ht.pitch,di=Z.useProgram(dn(xn,T,Ln),gn),Si=y.ah(Yn,ht.zoom),hr=Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(ln);let ds,Ea,or,Ds,ss=[0,0],fs=null;if(T)Ea=hn.glyphAtlasTexture,or=ot.LINEAR,ds=hn.glyphAtlasTexture.size,Ln.iconsInText&&(ss=hn.imageAtlasTexture.size,fs=hn.imageAtlasTexture,Ds=er||Z.options.rotating||Z.options.zooming||"composite"===Yn.kind||"camera"===Yn.kind?ot.LINEAR:ot.NEAREST);else{const ei=1!==d.layout.get("icon-size").constantOr(0)||Ln.iconsNeedLinear;Ea=hn.imageAtlasTexture,or=xn||Z.options.rotating||Z.options.zooming||ei||er?ot.LINEAR:ot.NEAREST,ds=hn.imageAtlasTexture.size}const qr=En(hn,1,Z.transform.zoom),Bs=Pt?ln.posMatrix:Na,Dl=Ut(Bs,Ct,gt,Z.transform,qr),iu=jt(Bs,Ct,gt,Z.transform,qr),No=jt(ln.posMatrix,Ct,gt,Z.transform,qr),_o=wt.translatePosition(Z.transform,hn,Y,ge),ru=nn&&Ln.hasTextData(),ch="none"!==d.layout.get("icon-text-fit")&&ru&&Ln.hasIconData();if(Mt){const ei=Z.style.map.terrain?(uh,Nr)=>Z.style.map.terrain.getElevation(ln,uh,Nr):null,zo="map"===d.layout.get("text-rotation-alignment");$e(Ln,ln.posMatrix,Z,T,Dl,No,Ct,ke,zo,wt,ln.toUnwrapped(),ht.width,ht.height,_o,ei)}const as=ln.posMatrix,ca=T&&nn||ch,bo=Mt||ca?Na:Dl,Bo=iu,ps=xn&&0!==d.paint.get(T?"text-halo-width":"icon-halo-width").constantOr(1);let Ts;Ts=xn?Ln.iconsInText?Y0(Yn.kind,Si,vt,Ct,Mt,ca,Z,as,bo,Bo,_o,ds,ss,An):np(Yn.kind,Si,vt,Ct,Mt,ca,Z,as,bo,Bo,_o,T,ds,!0,An):ho(Yn.kind,Si,vt,Ct,Mt,ca,Z,as,bo,Bo,_o,T,ds,An);const Wr={program:di,buffers:ii,uniformValues:Ts,atlasTexture:Ea,atlasTextureIcon:fs,atlasInterpolation:or,atlasInterpolationIcon:Ds,isSDF:xn,hasHalo:ps};if(Nt&&Ln.canOverlap){Vt=!0;const ei=ii.segments.get();for(const zo of ei)Sn.push({segments:new y.a0([zo]),sortKey:zo.sortKey,state:Wr,terrainData:hr})}else Sn.push({segments:ii.segments,sortKey:0,state:Wr,terrainData:hr})}Vt&&Sn.sort((ln,hn)=>ln.sortKey-hn.sortKey);for(const ln of Sn){const hn=ln.state;if(tt.activeTexture.set(ot.TEXTURE0),hn.atlasTexture.bind(hn.atlasInterpolation,ot.CLAMP_TO_EDGE),hn.atlasTextureIcon&&(tt.activeTexture.set(ot.TEXTURE1),hn.atlasTextureIcon&&hn.atlasTextureIcon.bind(hn.atlasInterpolationIcon,ot.CLAMP_TO_EDGE)),hn.isSDF){const Ln=hn.uniformValues;hn.hasHalo&&(Ln.u_is_halo=1,Ka(hn.buffers,ln.segments,d,Z,hn.program,Kt,ze,Be,Ln,ln.terrainData)),Ln.u_is_halo=0}Ka(hn.buffers,ln.segments,d,Z,hn.program,Kt,ze,Be,hn.uniformValues,ln.terrainData)}}function Ka(Z,a,d,w,T,Y,ge,ve,Se,ke){const ze=w.context;T.draw(ze,ze.gl.TRIANGLES,Y,ge,ve,Ki.disabled,Se,ke,d.id,Z.layoutVertexBuffer,Z.indexBuffer,a,d.paint,w.transform.zoom,Z.programConfigurations.get(d.id),Z.dynamicLayoutVertexBuffer,Z.opacityVertexBuffer)}function ns(Z,a,d,w,T){if(!d||!w||!w.imageAtlas)return;const Y=w.imageAtlas.patternPositions;let ge=Y[d.to.toString()],ve=Y[d.from.toString()];if(!ge&&ve&&(ge=ve),!ve&&ge&&(ve=ge),!ge||!ve){const Se=T.getPaintProperty(a);ge=Y[Se],ve=Y[Se]}ge&&ve&&Z.setConstantPatternPositions(ge,ve)}function Ku(Z,a,d,w,T,Y,ge){const ve=Z.context.gl,Se="fill-pattern",ke=d.paint.get(Se),ze=ke&&ke.constantOr(1),Be=d.getCrossfadeParameters();let tt,ot,ht,wt,gt;ge?(ot=ze&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",tt=ve.LINES):(ot=ze?"fillPattern":"fill",tt=ve.TRIANGLES);const Ct=ke.constantOr(null);for(const Mt of w){const vt=a.getTile(Mt);if(ze&&!vt.patternsLoaded())continue;const Pt=vt.getBucket(d);if(!Pt)continue;const Nt=Pt.programConfigurations.get(d.id),Vt=Z.useProgram(ot,Nt),Kt=Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(Mt);ze&&(Z.context.activeTexture.set(ve.TEXTURE0),vt.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Nt.updatePaintBuffers(Be)),ns(Nt,Se,Ct,vt,d);const nn=Kt?Mt:null,Sn=Z.translatePosMatrix(nn?nn.posMatrix:Mt.posMatrix,vt,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(ge){wt=Pt.indexBuffer2,gt=Pt.segments2;const An=[ve.drawingBufferWidth,ve.drawingBufferHeight];ht="fillOutlinePattern"===ot&&ze?li(Sn,Z,Be,vt,An):sr(Sn,An)}else wt=Pt.indexBuffer,gt=Pt.segments,ht=ze?an(Sn,Z,Be,vt):Mn(Sn);Vt.draw(Z.context,tt,T,Z.stencilModeForClipping(Mt),Y,Ki.disabled,ht,Kt,d.id,Pt.layoutVertexBuffer,wt,gt,d.paint,Z.transform.zoom,Nt)}}function $c(Z,a,d,w,T,Y,ge){const ve=Z.context,Se=ve.gl,ke="fill-extrusion-pattern",ze=d.paint.get(ke),Be=ze.constantOr(1),tt=d.getCrossfadeParameters(),ot=d.paint.get("fill-extrusion-opacity"),ht=ze.constantOr(null);for(const wt of w){const gt=a.getTile(wt),Ct=gt.getBucket(d);if(!Ct)continue;const Mt=Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(wt),vt=Ct.programConfigurations.get(d.id),Pt=Z.useProgram(Be?"fillExtrusionPattern":"fillExtrusion",vt);Be&&(Z.context.activeTexture.set(Se.TEXTURE0),gt.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),vt.updatePaintBuffers(tt)),ns(vt,ke,ht,gt,d);const Nt=Z.translatePosMatrix(wt.posMatrix,gt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Vt=d.paint.get("fill-extrusion-vertical-gradient"),Kt=Be?Mi(Nt,Z,Vt,ot,wt,tt,gt):wi(Nt,Z,Vt,ot);Pt.draw(ve,ve.gl.TRIANGLES,T,Y,ge,Ki.backCCW,Kt,Mt,d.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,d.paint,Z.transform.zoom,vt,Z.style.map.terrain&&Ct.centroidVertexBuffer)}}function Ju(Z,a,d,w,T,Y,ge){const ve=Z.context,Se=ve.gl,ke=d.fbo;if(!ke)return;const ze=Z.useProgram("hillshade"),Be=Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(a);ve.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,ke.colorAttachment.get()),ze.draw(ve,Se.TRIANGLES,T,Y,ge,Ki.disabled,((tt,ot,ht,wt)=>{const gt=ht.paint.get("hillshade-shadow-color"),Ct=ht.paint.get("hillshade-highlight-color"),Mt=ht.paint.get("hillshade-accent-color");let vt=ht.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ht.paint.get("hillshade-illumination-anchor")&&(vt-=tt.transform.angle);const Pt=!tt.options.moving;return{u_matrix:wt?wt.posMatrix:tt.transform.calculatePosMatrix(ot.tileID.toUnwrapped(),Pt),u_image:0,u_latrange:Xn(0,ot.tileID),u_light:[ht.paint.get("hillshade-exaggeration"),vt],u_shadow:gt,u_highlight:Ct,u_accent:Mt}})(Z,d,w,Be?a:null),Be,w.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments)}function Cs(Z,a,d,w,T,Y){const ge=Z.context,ve=ge.gl,Se=a.dem;if(Se&&Se.data){const ke=Se.dim,ze=Se.stride,Be=Se.getPixels();if(ge.activeTexture.set(ve.TEXTURE1),ge.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||Z.getTileTexture(ze),a.demTexture){const ot=a.demTexture;ot.update(Be,{premultiply:!1}),ot.bind(ve.NEAREST,ve.CLAMP_TO_EDGE)}else a.demTexture=new q(ge,Be,ve.RGBA,{premultiply:!1}),a.demTexture.bind(ve.NEAREST,ve.CLAMP_TO_EDGE);ge.activeTexture.set(ve.TEXTURE0);let tt=a.fbo;if(!tt){const ot=new q(ge,{width:ke,height:ke,data:null},ve.RGBA);ot.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),tt=a.fbo=ge.createFramebuffer(ke,ke,!0,!1),tt.colorAttachment.set(ot.texture)}ge.bindFramebuffer.set(tt.framebuffer),ge.viewport.set([0,0,ke,ke]),Z.useProgram("hillshadePrepare").draw(ge,ve.TRIANGLES,w,T,Y,Ki.disabled,((ot,ht)=>{const wt=ht.stride,gt=y.H();return y.aQ(gt,0,y.X,-y.X,0,0,1),y.J(gt,gt,[0,-y.X,0]),{u_matrix:gt,u_image:1,u_dimension:[wt,wt],u_zoom:ot.overscaledZ,u_unpack:ht.getUnpackVector()}})(a.tileID,Se),null,d.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function Fo(Z,a,d,w,T,Y){const ge=w.paint.get("raster-fade-duration");if(!Y&&ge>0){const ve=e.now(),Se=(ve-Z.timeAdded)/ge,ke=a?(ve-a.timeAdded)/ge:-1,ze=d.getSource(),Be=T.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),tt=!a||Math.abs(a.tileID.overscaledZ-Be)>Math.abs(Z.tileID.overscaledZ-Be),ot=tt&&Z.refreshedUponExpiration?1:y.ad(tt?Se:1-ke,0,1);return Z.refreshedUponExpiration&&Se>=1&&(Z.refreshedUponExpiration=!1),a?{opacity:1,mix:1-ot}:{opacity:ot,mix:0}}return{opacity:1,mix:0}}const Os=new y.aN(1,0,0,1),Ls=new y.aN(0,1,0,1),Pi=new y.aN(0,0,1,1),Ql=new y.aN(1,0,1,1),po=new y.aN(0,1,1,1);function Ja(Z,a,d,w){Ns(Z,0,a+d/2,Z.transform.width,d,w)}function qc(Z,a,d,w){Ns(Z,a-d/2,0,d,Z.transform.height,w)}function Ns(Z,a,d,w,T,Y){const ge=Z.context,ve=ge.gl;ve.enable(ve.SCISSOR_TEST),ve.scissor(a*Z.pixelRatio,d*Z.pixelRatio,w*Z.pixelRatio,T*Z.pixelRatio),ge.clear({color:Y}),ve.disable(ve.SCISSOR_TEST)}function Ci(Z,a,d){const w=Z.context,T=w.gl,Y=d.posMatrix,ge=Z.useProgram("debug"),ve=vi.disabled,Se=cr.disabled,ke=Z.colorModeForRenderPass(),Be=Z.style.map.terrain&&Z.style.map.terrain.getTerrainData(d);w.activeTexture.set(T.TEXTURE0);const tt=a.getTileByID(d.key).latestRawTileData,ot=Math.floor((tt&&tt.byteLength||0)/1024),ht=a.getTile(d).tileSize,wt=512/Math.min(ht,512)*(d.overscaledZ/Z.transform.zoom)*.5;let gt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(gt+=` => ${d.overscaledZ}`),function(Ct,Mt){Ct.initDebugOverlayCanvas();const vt=Ct.debugOverlayCanvas,Pt=Ct.context.gl,Nt=Ct.debugOverlayCanvas.getContext("2d");Nt.clearRect(0,0,vt.width,vt.height),Nt.shadowColor="white",Nt.shadowBlur=2,Nt.lineWidth=1.5,Nt.strokeStyle="white",Nt.textBaseline="top",Nt.font="bold 36px Open Sans, sans-serif",Nt.fillText(Mt,5,5),Nt.strokeText(Mt,5,5),Ct.debugOverlayTexture.update(vt),Ct.debugOverlayTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE)}(Z,`${gt} ${ot}kB`),ge.draw(w,T.TRIANGLES,ve,Se,Hi.alphaBlended,Ki.disabled,qt(Y,y.aN.transparent,wt),null,"$debug",Z.debugBuffer,Z.quadTriangleIndexBuffer,Z.debugSegments),ge.draw(w,T.LINE_STRIP,ve,Se,ke,Ki.disabled,qt(Y,y.aN.red),Be,"$debug",Z.debugBuffer,Z.tileBorderIndexBuffer,Z.debugSegments)}function pl(Z,a,d){const w=Z.context,T=w.gl,Y=Z.colorModeForRenderPass(),ge=new vi(T.LEQUAL,vi.ReadWrite,Z.depthRangeFor3D),ve=Z.useProgram("terrain"),Se=a.getTerrainMesh();w.bindFramebuffer.set(null),w.viewport.set([0,0,Z.width,Z.height]);for(const ke of d){const ze=Z.renderToTexture.getTexture(ke),Be=a.getTerrainData(ke.tileID);w.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,ze.texture);const tt=Z.transform.calculatePosMatrix(ke.tileID.toUnwrapped()),ot=a.getMeshFrameDelta(Z.transform.zoom),ht=Z.transform.calculateFogMatrix(ke.tileID.toUnwrapped()),wt=mi(tt,ot,ht,Z.style.sky,Z.transform.pitch);ve.draw(w,T.TRIANGLES,ge,cr.disabled,Y,Ki.backCCW,wt,Be,"terrain",Se.vertexBuffer,Se.indexBuffer,Se.segments)}}class Qu{constructor(a,d,w){this.vertexBuffer=a,this.indexBuffer=d,this.segments=w}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Wc{constructor(a,d){this.context=new fl(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:y.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $t}resize(a,d,w){if(this.width=Math.floor(a*w),this.height=Math.floor(d*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style._order)this.style._layers[T].resize()}setup(){const a=this.context,d=new y.aX;d.emplaceBack(0,0),d.emplaceBack(y.X,0),d.emplaceBack(0,y.X),d.emplaceBack(y.X,y.X),this.tileExtentBuffer=a.createVertexBuffer(d,Wn.members),this.tileExtentSegments=y.a0.simpleSegment(0,0,4,2);const w=new y.aX;w.emplaceBack(0,0),w.emplaceBack(y.X,0),w.emplaceBack(0,y.X),w.emplaceBack(y.X,y.X),this.debugBuffer=a.createVertexBuffer(w,Wn.members),this.debugSegments=y.a0.simpleSegment(0,0,4,5);const T=new y.$;T.emplaceBack(0,0,0,0),T.emplaceBack(y.X,0,y.X,0),T.emplaceBack(0,y.X,0,y.X),T.emplaceBack(y.X,y.X,y.X,y.X),this.rasterBoundsBuffer=a.createVertexBuffer(T,Ne.members),this.rasterBoundsSegments=y.a0.simpleSegment(0,0,4,2);const Y=new y.aX;Y.emplaceBack(0,0),Y.emplaceBack(1,0),Y.emplaceBack(0,1),Y.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(Y,Wn.members),this.viewportSegments=y.a0.simpleSegment(0,0,4,2);const ge=new y.aZ;ge.emplaceBack(0),ge.emplaceBack(1),ge.emplaceBack(3),ge.emplaceBack(2),ge.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(ge);const ve=new y.aY;ve.emplaceBack(0,1,2),ve.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(ve);const Se=this.context.gl;this.stencilClearMode=new cr({func:Se.ALWAYS,mask:0},0,255,Se.ZERO,Se.ZERO,Se.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=y.H();y.aQ(w,0,this.width,this.height,0,0,1),y.K(w,w,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,vi.disabled,this.stencilClearMode,Hi.disabled,Ki.disabled,ws(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const w=this.context,T=w.gl;this.nextStencilID+d.length>256&&this.clearStencil(),w.setColorMode(Hi.disabled),w.setDepthMode(vi.disabled);const Y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ge of d){const ve=this._tileClippingMaskIDs[ge.key]=this.nextStencilID++,Se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ge);Y.draw(w,T.TRIANGLES,vi.disabled,new cr({func:T.ALWAYS,mask:0},ve,255,T.KEEP,T.KEEP,T.REPLACE),Hi.disabled,Ki.disabled,ws(ge.posMatrix),Se,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new cr({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new cr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,w=a.sort((ge,ve)=>ve.overscaledZ-ge.overscaledZ),T=w[w.length-1].overscaledZ,Y=w[0].overscaledZ-T+1;if(Y>1){this.currentStencilSource=void 0,this.nextStencilID+Y>256&&this.clearStencil();const ge={};for(let ve=0;ve<Y;ve++)ge[ve+T]=new cr({func:d.GEQUAL,mask:255},ve+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=Y,[ge,w]}return[{[T]:cr.disabled},w]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Hi([a.CONSTANT_COLOR,a.ONE],new y.aN(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Hi.unblended:Hi.alphaBlended}depthModeForSublayer(a,d,w){if(!this.opaquePassEnabledForLayer())return vi.disabled;const T=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new vi(w||this.context.gl.LEQUAL,d,[T,T])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(e.now()),this.imageManager.beginFrame();const w=this.style._order,T=this.style.sourceCaches,Y={},ge={},ve={};for(const Se in T){const ke=T[Se];ke.used&&ke.prepare(this.context),Y[Se]=ke.getVisibleCoordinates(),ge[Se]=Y[Se].slice().reverse(),ve[Se]=ke.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Se=0;Se<w.length;Se++)if(this.style._layers[w[Se]].is3D()){this.opaquePassCutoff=Se;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Se of w){const ke=this.style._layers[Se];if(!ke.hasOffscreenPass()||ke.isHidden(this.transform.zoom))continue;const ze=ge[ke.source];("custom"===ke.type||ze.length)&&this.renderLayer(this,T[ke.source],ke,ze)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?y.aN.black:y.aN.transparent,depth:1}),this.clearStencil(),this.style.stylesheet.sky&&function(Se,ke){const ze=Se.context,Be=ze.gl,tt=(Mt=Se.style.map.transform,vt=Se.pixelRatio,{u_sky_color:(Ct=ke).properties.get("sky-color"),u_horizon_color:Ct.properties.get("horizon-color"),u_horizon:(Mt.height/2+Mt.getHorizon())*vt,u_sky_horizon_blend:Ct.properties.get("sky-horizon-blend")*Mt.height/2*vt}),ot=new vi(Be.LEQUAL,vi.ReadWrite,[0,1]),ht=cr.disabled,wt=Se.colorModeForRenderPass(),gt=Se.useProgram("sky");var Ct,Mt,vt;if(!ke.mesh){const Ct=new y.aX;Ct.emplaceBack(-1,-1),Ct.emplaceBack(1,-1),Ct.emplaceBack(1,1),Ct.emplaceBack(-1,1);const Mt=new y.aY;Mt.emplaceBack(0,1,2),Mt.emplaceBack(0,2,3),ke.mesh=new Qu(ze.createVertexBuffer(Ct,Wn.members),ze.createIndexBuffer(Mt),y.a0.simpleSegment(0,0,Ct.length,Mt.length))}gt.draw(ze,Be.TRIANGLES,ot,ht,wt,Ki.disabled,tt,void 0,"sky",ke.mesh.vertexBuffer,ke.mesh.indexBuffer,ke.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const Se=this.style._layers[w[this.currentLayer]],ke=T[Se.source],ze=Y[Se.source];this._renderTileClippingMasks(Se,ze),this.renderLayer(this,ke,Se,ze)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const Se=this.style._layers[w[this.currentLayer]],ke=T[Se.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Se))continue;const ze=("symbol"===Se.type?ve:ge)[Se.source];this._renderTileClippingMasks(Se,Y[Se.source]),this.renderLayer(this,ke,Se,ze)}if(this.options.showTileBoundaries){const Se=function(ke,ze){let Be=null;const tt=Object.values(ke._layers).flatMap(gt=>gt.source&&!gt.isHidden(ze)?[ke.sourceCaches[gt.source]]:[]),ot=tt.filter(gt=>"vector"===gt.getSource().type),ht=tt.filter(gt=>"vector"!==gt.getSource().type),wt=gt=>{(!Be||Be.getSource().maxzoom<gt.getSource().maxzoom)&&(Be=gt)};return ot.forEach(gt=>wt(gt)),Be||ht.forEach(gt=>wt(gt)),Be}(this.style,this.transform.zoom);Se&&function(ke,ze,Be){for(let tt=0;tt<Be.length;tt++)Ci(ke,ze,Be[tt])}(this,Se,Se.getVisibleCoordinates())}this.options.showPadding&&function(Se){const ke=Se.transform.padding;Ja(Se,Se.transform.height-(ke.top||0),3,Os),Ja(Se,ke.bottom||0,3,Ls),qc(Se,ke.left||0,3,Pi),qc(Se,Se.transform.width-(ke.right||0),3,Ql);const ze=Se.transform.centerPoint;var Be,tt,ot,ht;Ns(Be=Se,(tt=ze.x)-1,(ot=Se.transform.height-ze.y)-10,2,20,ht=po),Ns(Be,tt-10,ot-1,20,2,ht)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,w=this.transform.modelViewProjectionMatrix;let T=this.terrainFacilitator.dirty;T||(T=a?!y.a_(d,w):!y.a$(d,w)),T||(T=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),T&&(y.b0(d,w),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Y,ge){const ve=Y.context,Se=ve.gl,ke=Hi.unblended,ze=new vi(Se.LEQUAL,vi.ReadWrite,[0,1]),Be=ge.getTerrainMesh(),tt=ge.sourceCache.getRenderableTiles(),ot=Y.useProgram("terrainDepth");ve.bindFramebuffer.set(ge.getFramebuffer("depth").framebuffer),ve.viewport.set([0,0,Y.width/devicePixelRatio,Y.height/devicePixelRatio]),ve.clear({color:y.aN.transparent,depth:1});for(const ht of tt){const wt=ge.getTerrainData(ht.tileID),gt={u_matrix:Y.transform.calculatePosMatrix(ht.tileID.toUnwrapped()),u_ele_delta:ge.getMeshFrameDelta(Y.transform.zoom)};ot.draw(ve,Se.TRIANGLES,ze,cr.disabled,ke,Ki.backCCW,gt,wt,"terrain",Be.vertexBuffer,Be.indexBuffer,Be.segments)}ve.bindFramebuffer.set(null),ve.viewport.set([0,0,Y.width,Y.height])}(this,this.style.map.terrain),function(Y,ge){const ve=Y.context,Se=ve.gl,ke=Hi.unblended,ze=new vi(Se.LEQUAL,vi.ReadWrite,[0,1]),Be=ge.getTerrainMesh(),tt=ge.getCoordsTexture(),ot=ge.sourceCache.getRenderableTiles(),ht=Y.useProgram("terrainCoords");ve.bindFramebuffer.set(ge.getFramebuffer("coords").framebuffer),ve.viewport.set([0,0,Y.width/devicePixelRatio,Y.height/devicePixelRatio]),ve.clear({color:y.aN.transparent,depth:1}),ge.coordsIndex=[];for(const wt of ot){const gt=ge.getTerrainData(wt.tileID);ve.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,tt.texture);const Ct={u_matrix:Y.transform.calculatePosMatrix(wt.tileID.toUnwrapped()),u_terrain_coords_id:(255-ge.coordsIndex.length)/255,u_texture:0,u_ele_delta:ge.getMeshFrameDelta(Y.transform.zoom)};ht.draw(ve,Se.TRIANGLES,ze,cr.disabled,ke,Ki.backCCW,Ct,gt,"terrain",Be.vertexBuffer,Be.indexBuffer,Be.segments),ge.coordsIndex.push(wt.tileID.key)}ve.bindFramebuffer.set(null),ve.viewport.set([0,0,Y.width,Y.height])}(this,this.style.map.terrain))}renderLayer(a,d,w,T){if(!w.isHidden(this.transform.zoom)&&("background"===w.type||"custom"===w.type||(T||[]).length))switch(this.id=w.id,w.type){case"symbol":!function(Y,ge,ve,Se,ke){if("translucent"!==Y.renderPass)return;const ze=cr.disabled,Be=Y.colorModeForRenderPass();(ve._unevaluatedLayout.hasValue("text-variable-anchor")||ve._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(tt,ot,ht,wt,gt,Ct,Mt,vt,Pt){const Nt=ot.transform,Vt=cl(),Kt="map"===gt,nn="map"===Ct;for(const Sn of tt){const An=wt.getTile(Sn),ln=An.getBucket(ht);if(!ln||!ln.text||!ln.text.segments.get().length)continue;const hn=y.ah(ln.textSizeData,Nt.zoom),Ln=En(An,1,ot.transform.zoom),ii=Ut(Sn.posMatrix,nn,Kt,ot.transform,Ln),gn="none"!==ht.layout.get("icon-text-fit")&&ln.hasIconData();if(hn){const xn=Math.pow(2,Nt.zoom-An.tileID.overscaledZ),Yn=ot.style.map.terrain?(di,Si)=>ot.style.map.terrain.getElevation(Sn,di,Si):null,er=Vt.translatePosition(Nt,An,Mt,vt);Jl(ln,Kt,nn,Pt,Nt,ii,Sn.posMatrix,xn,hn,gn,Vt,er,Sn.toUnwrapped(),Yn)}}}(Se,Y,ve,ge,ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),ke),0!==ve.paint.get("icon-opacity").constantOr(1)&&wa(Y,ge,ve,Se,!1,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),ve.layout.get("icon-rotation-alignment"),ve.layout.get("icon-pitch-alignment"),ve.layout.get("icon-keep-upright"),ze,Be),0!==ve.paint.get("text-opacity").constantOr(1)&&wa(Y,ge,ve,Se,!0,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),ve.layout.get("text-keep-upright"),ze,Be),ge.map.showCollisionBoxes&&(wd(Y,ge,ve,Se,!0),wd(Y,ge,ve,Se,!1))}(a,d,w,T,this.style.placement.variableOffsets);break;case"circle":!function(Y,ge,ve,Se){if("translucent"!==Y.renderPass)return;const ke=ve.paint.get("circle-opacity"),ze=ve.paint.get("circle-stroke-width"),Be=ve.paint.get("circle-stroke-opacity"),tt=!ve.layout.get("circle-sort-key").isConstant();if(0===ke.constantOr(1)&&(0===ze.constantOr(1)||0===Be.constantOr(1)))return;const ot=Y.context,ht=ot.gl,wt=Y.depthModeForSublayer(0,vi.ReadOnly),gt=cr.disabled,Ct=Y.colorModeForRenderPass(),Mt=[];for(let vt=0;vt<Se.length;vt++){const Pt=Se[vt],Nt=ge.getTile(Pt),Vt=Nt.getBucket(ve);if(!Vt)continue;const Kt=Vt.programConfigurations.get(ve.id),nn=Y.useProgram("circle",Kt),Sn=Vt.layoutVertexBuffer,An=Vt.indexBuffer,ln=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(Pt),hn={programConfiguration:Kt,program:nn,layoutVertexBuffer:Sn,indexBuffer:An,uniformValues:qi(Y,Pt,Nt,ve),terrainData:ln};if(tt){const Ln=Vt.segments.get();for(const ii of Ln)Mt.push({segments:new y.a0([ii]),sortKey:ii.sortKey,state:hn})}else Mt.push({segments:Vt.segments,sortKey:0,state:hn})}tt&&Mt.sort((vt,Pt)=>vt.sortKey-Pt.sortKey);for(const vt of Mt){const{programConfiguration:Pt,program:Nt,layoutVertexBuffer:Vt,indexBuffer:Kt,uniformValues:nn,terrainData:Sn}=vt.state;Nt.draw(ot,ht.TRIANGLES,wt,gt,Ct,Ki.disabled,nn,Sn,ve.id,Vt,Kt,vt.segments,ve.paint,Y.transform.zoom,Pt)}}(a,d,w,T);break;case"heatmap":!function(Y,ge,ve,Se){if(0!==ve.paint.get("heatmap-opacity"))if("offscreen"===Y.renderPass){const ke=Y.context,ze=ke.gl,Be=cr.disabled,tt=new Hi([ze.ONE,ze.ONE],y.aN.transparent,[!0,!0,!0,!0]);(function(ot,ht,wt){const gt=ot.gl;ot.activeTexture.set(gt.TEXTURE1),ot.viewport.set([0,0,ht.width/4,ht.height/4]);let Ct=wt.heatmapFbo;if(Ct)gt.bindTexture(gt.TEXTURE_2D,Ct.colorAttachment.get()),ot.bindFramebuffer.set(Ct.framebuffer);else{const Mt=gt.createTexture();gt.bindTexture(gt.TEXTURE_2D,Mt),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_S,gt.CLAMP_TO_EDGE),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_T,gt.CLAMP_TO_EDGE),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_MIN_FILTER,gt.LINEAR),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_MAG_FILTER,gt.LINEAR),Ct=wt.heatmapFbo=ot.createFramebuffer(ht.width/4,ht.height/4,!1,!1),function(vt,Pt,Nt,Vt){var Kt,nn;const Sn=vt.gl,An=null!==(Kt=vt.HALF_FLOAT)&&void 0!==Kt?Kt:Sn.UNSIGNED_BYTE,ln=null!==(nn=vt.RGBA16F)&&void 0!==nn?nn:Sn.RGBA;Sn.texImage2D(Sn.TEXTURE_2D,0,ln,Pt.width/4,Pt.height/4,0,Sn.RGBA,An,null),Vt.colorAttachment.set(Nt)}(ot,ht,Mt,Ct)}})(ke,Y,ve),ke.clear({color:y.aN.transparent});for(let ot=0;ot<Se.length;ot++){const ht=Se[ot];if(ge.hasRenderableParent(ht))continue;const wt=ge.getTile(ht),gt=wt.getBucket(ve);if(!gt)continue;const Ct=gt.programConfigurations.get(ve.id),Mt=Y.useProgram("heatmap",Ct),{zoom:vt}=Y.transform;Mt.draw(ke,ze.TRIANGLES,vi.disabled,Be,tt,Ki.disabled,jn(ht.posMatrix,wt,vt,ve.paint.get("heatmap-intensity")),null,ve.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,ve.paint,Y.transform.zoom,Ct)}ke.viewport.set([0,0,Y.width,Y.height])}else"translucent"===Y.renderPass&&(Y.context.setColorMode(Y.colorModeForRenderPass()),function(ke,ze){const Be=ke.context,tt=Be.gl,ot=ze.heatmapFbo;if(!ot)return;Be.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,ot.colorAttachment.get()),Be.activeTexture.set(tt.TEXTURE1);let ht=ze.colorRampTexture;ht||(ht=ze.colorRampTexture=new q(Be,ze.colorRamp,tt.RGBA)),ht.bind(tt.LINEAR,tt.CLAMP_TO_EDGE),ke.useProgram("heatmapTexture").draw(Be,tt.TRIANGLES,vi.disabled,cr.disabled,ke.colorModeForRenderPass(),Ki.disabled,((wt,gt,Ct,Mt)=>{const vt=y.H();y.aQ(vt,0,wt.width,wt.height,0,0,1);const Pt=wt.context.gl;return{u_matrix:vt,u_world:[Pt.drawingBufferWidth,Pt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:gt.paint.get("heatmap-opacity")}})(ke,ze),null,ze.id,ke.viewportBuffer,ke.quadTriangleIndexBuffer,ke.viewportSegments,ze.paint,ke.transform.zoom)}(Y,ve))}(a,d,w,T);break;case"line":!function(Y,ge,ve,Se){if("translucent"!==Y.renderPass)return;const ke=ve.paint.get("line-opacity"),ze=ve.paint.get("line-width");if(0===ke.constantOr(1)||0===ze.constantOr(1))return;const Be=Y.depthModeForSublayer(0,vi.ReadOnly),tt=Y.colorModeForRenderPass(),ot=ve.paint.get("line-dasharray"),ht=ve.paint.get("line-pattern"),wt=ht.constantOr(1),gt=ve.paint.get("line-gradient"),Ct=ve.getCrossfadeParameters(),Mt=wt?"linePattern":ot?"lineSDF":gt?"lineGradient":"line",vt=Y.context,Pt=vt.gl;let Nt=!0;for(const Vt of Se){const Kt=ge.getTile(Vt);if(wt&&!Kt.patternsLoaded())continue;const nn=Kt.getBucket(ve);if(!nn)continue;const Sn=nn.programConfigurations.get(ve.id),An=Y.context.program.get(),ln=Y.useProgram(Mt,Sn),hn=Nt||ln.program!==An,Ln=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(Vt),ii=ht.constantOr(null);if(ii&&Kt.imageAtlas){const Yn=Kt.imageAtlas,er=Yn.patternPositions[ii.to.toString()],di=Yn.patternPositions[ii.from.toString()];er&&di&&Sn.setConstantPatternPositions(er,di)}const gn=Ln?Vt:null,xn=wt?aa(Y,Kt,ve,Ct,gn):ot?ul(Y,Kt,ve,ot,Ct,gn):gt?Pr(Y,Kt,ve,nn.lineClipsArray.length,gn):Wi(Y,Kt,ve,gn);if(wt)vt.activeTexture.set(Pt.TEXTURE0),Kt.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),Sn.updatePaintBuffers(Ct);else if(ot&&(hn||Y.lineAtlas.dirty))vt.activeTexture.set(Pt.TEXTURE0),Y.lineAtlas.bind(vt);else if(gt){const Yn=nn.gradients[ve.id];let er=Yn.texture;if(ve.gradientVersion!==Yn.version){let di=256;if(ve.stepInterpolant){const Si=ge.getSource().maxzoom,hr=Vt.canonical.z===Si?Math.ceil(1<<Y.transform.maxZoom-Vt.canonical.z):1;di=y.ad(y.aV(nn.maxLineLength/y.X*1024*hr),256,vt.maxTextureSize)}Yn.gradient=y.aW({expression:ve.gradientExpression(),evaluationKey:"lineProgress",resolution:di,image:Yn.gradient||void 0,clips:nn.lineClipsArray}),Yn.texture?Yn.texture.update(Yn.gradient):Yn.texture=new q(vt,Yn.gradient,Pt.RGBA),Yn.version=ve.gradientVersion,er=Yn.texture}vt.activeTexture.set(Pt.TEXTURE0),er.bind(ve.stepInterpolant?Pt.NEAREST:Pt.LINEAR,Pt.CLAMP_TO_EDGE)}ln.draw(vt,Pt.TRIANGLES,Be,Y.stencilModeForClipping(Vt),tt,Ki.disabled,xn,Ln,ve.id,nn.layoutVertexBuffer,nn.indexBuffer,nn.segments,ve.paint,Y.transform.zoom,Sn,nn.layoutVertexBuffer2),Nt=!1}}(a,d,w,T);break;case"fill":!function(Y,ge,ve,Se){const ke=ve.paint.get("fill-color"),ze=ve.paint.get("fill-opacity");if(0===ze.constantOr(1))return;const Be=Y.colorModeForRenderPass(),tt=ve.paint.get("fill-pattern"),ot=Y.opaquePassEnabledForLayer()&&!tt.constantOr(1)&&1===ke.constantOr(y.aN.transparent).a&&1===ze.constantOr(0)?"opaque":"translucent";if(Y.renderPass===ot){const ht=Y.depthModeForSublayer(1,"opaque"===Y.renderPass?vi.ReadWrite:vi.ReadOnly);Ku(Y,ge,ve,Se,ht,Be,!1)}if("translucent"===Y.renderPass&&ve.paint.get("fill-antialias")){const ht=Y.depthModeForSublayer(ve.getPaintProperty("fill-outline-color")?2:0,vi.ReadOnly);Ku(Y,ge,ve,Se,ht,Be,!0)}}(a,d,w,T);break;case"fill-extrusion":!function(Y,ge,ve,Se){const ke=ve.paint.get("fill-extrusion-opacity");if(0!==ke&&"translucent"===Y.renderPass){const ze=new vi(Y.context.gl.LEQUAL,vi.ReadWrite,Y.depthRangeFor3D);if(1!==ke||ve.paint.get("fill-extrusion-pattern").constantOr(1))$c(Y,ge,ve,Se,ze,cr.disabled,Hi.disabled),$c(Y,ge,ve,Se,ze,Y.stencilModeFor3D(),Y.colorModeForRenderPass());else{const Be=Y.colorModeForRenderPass();$c(Y,ge,ve,Se,ze,cr.disabled,Be)}}}(a,d,w,T);break;case"hillshade":!function(Y,ge,ve,Se){if("offscreen"!==Y.renderPass&&"translucent"!==Y.renderPass)return;const ke=Y.context,ze=Y.depthModeForSublayer(0,vi.ReadOnly),Be=Y.colorModeForRenderPass(),[tt,ot]="translucent"===Y.renderPass?Y.stencilConfigForOverlap(Se):[{},Se];for(const ht of ot){const wt=ge.getTile(ht);void 0!==wt.needsHillshadePrepare&&wt.needsHillshadePrepare&&"offscreen"===Y.renderPass?Cs(Y,wt,ve,ze,cr.disabled,Be):"translucent"===Y.renderPass&&Ju(Y,ht,wt,ve,ze,tt[ht.overscaledZ],Be)}ke.viewport.set([0,0,Y.width,Y.height])}(a,d,w,T);break;case"raster":!function(Y,ge,ve,Se){if("translucent"!==Y.renderPass||0===ve.paint.get("raster-opacity")||!Se.length)return;const ke=Y.context,ze=ke.gl,Be=ge.getSource(),tt=Y.useProgram("raster"),ot=Y.colorModeForRenderPass(),[ht,wt]=Be instanceof We?[{},Se]:Y.stencilConfigForOverlap(Se),gt=wt[wt.length-1].overscaledZ,Ct=!Y.options.moving;for(const Mt of wt){const vt=Y.depthModeForSublayer(Mt.overscaledZ-gt,1===ve.paint.get("raster-opacity")?vi.ReadWrite:vi.ReadOnly,ze.LESS),Pt=ge.getTile(Mt);Pt.registerFadeDuration(ve.paint.get("raster-fade-duration"));const Nt=ge.findLoadedParent(Mt,0),Vt=ge.findLoadedSibling(Mt),Kt=Fo(Pt,Nt||Vt||null,ge,ve,Y.transform,Y.style.map.terrain);let nn,Sn;const An="nearest"===ve.paint.get("raster-resampling")?ze.NEAREST:ze.LINEAR;ke.activeTexture.set(ze.TEXTURE0),Pt.texture.bind(An,ze.CLAMP_TO_EDGE,ze.LINEAR_MIPMAP_NEAREST),ke.activeTexture.set(ze.TEXTURE1),Nt?(Nt.texture.bind(An,ze.CLAMP_TO_EDGE,ze.LINEAR_MIPMAP_NEAREST),nn=Math.pow(2,Nt.tileID.overscaledZ-Pt.tileID.overscaledZ),Sn=[Pt.tileID.canonical.x*nn%1,Pt.tileID.canonical.y*nn%1]):Pt.texture.bind(An,ze.CLAMP_TO_EDGE,ze.LINEAR_MIPMAP_NEAREST);const ln=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(Mt),hn=ln?Mt:null,Ln=hn?hn.posMatrix:Y.transform.calculatePosMatrix(Mt.toUnwrapped(),Ct),ii=Hu(Ln,Sn||[0,0],nn||1,Kt,ve);Be instanceof We?tt.draw(ke,ze.TRIANGLES,vt,cr.disabled,ot,Ki.disabled,ii,ln,ve.id,Be.boundsBuffer,Y.quadTriangleIndexBuffer,Be.boundsSegments):tt.draw(ke,ze.TRIANGLES,vt,ht[Mt.overscaledZ],ot,Ki.disabled,ii,ln,ve.id,Y.rasterBoundsBuffer,Y.quadTriangleIndexBuffer,Y.rasterBoundsSegments)}}(a,d,w,T);break;case"background":!function(Y,ge,ve,Se){const ke=ve.paint.get("background-color"),ze=ve.paint.get("background-opacity");if(0===ze)return;const Be=Y.context,tt=Be.gl,ot=Y.transform,ht=ot.tileSize,wt=ve.paint.get("background-pattern");if(Y.isPatternMissing(wt))return;const gt=!wt&&1===ke.a&&1===ze&&Y.opaquePassEnabledForLayer()?"opaque":"translucent";if(Y.renderPass!==gt)return;const Ct=cr.disabled,Mt=Y.depthModeForSublayer(0,"opaque"===gt?vi.ReadWrite:vi.ReadOnly),vt=Y.colorModeForRenderPass(),Pt=Y.useProgram(wt?"backgroundPattern":"background"),Nt=Se||ot.coveringTiles({tileSize:ht,terrain:Y.style.map.terrain});wt&&(Be.activeTexture.set(tt.TEXTURE0),Y.imageManager.bind(Y.context));const Vt=ve.getCrossfadeParameters();for(const Kt of Nt){const nn=Se?Kt.posMatrix:Y.transform.calculatePosMatrix(Kt.toUnwrapped()),Sn=wt?dd(nn,ze,Y,wt,{tileID:Kt,tileSize:ht},Vt):Gu(nn,ze,ke),An=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(Kt);Pt.draw(Be,tt.TRIANGLES,Mt,Ct,vt,Ki.disabled,Sn,An,ve.id,Y.tileExtentBuffer,Y.quadTriangleIndexBuffer,Y.tileExtentSegments)}}(a,0,w,T);break;case"custom":!function(Y,ge,ve){const Se=Y.context,ke=ve.implementation;if("offscreen"===Y.renderPass){const ze=ke.prerender;ze&&(Y.setCustomLayerDefaults(),Se.setColorMode(Y.colorModeForRenderPass()),ze.call(ke,Se.gl,Y.transform.customLayerMatrix()),Se.setDirty(),Y.setBaseState())}else if("translucent"===Y.renderPass){Y.setCustomLayerDefaults(),Se.setColorMode(Y.colorModeForRenderPass()),Se.setStencilMode(cr.disabled);const ze="3d"===ke.renderingMode?new vi(Y.context.gl.LEQUAL,vi.ReadWrite,Y.depthRangeFor3D):Y.depthModeForSublayer(0,vi.ReadOnly);Se.setDepthMode(ze),ke.render(Se.gl,Y.transform.customLayerMatrix()),Se.setDirty(),Y.setBaseState(),Se.bindFramebuffer.set(null)}}(a,0,w)}}translatePosMatrix(a,d,w,T,Y){if(!w[0]&&!w[1])return a;const ge=Y?"map"===T?this.transform.angle:0:"viewport"===T?-this.transform.angle:0;if(ge){const ke=Math.sin(ge),ze=Math.cos(ge);w=[w[0]*ze-w[1]*ke,w[0]*ke+w[1]*ze]}const ve=[Y?w[0]:En(d,w[0],this.transform.zoom),Y?w[1]:En(d,w[1],this.transform.zoom),0],Se=new Float32Array(16);return y.J(Se,a,ve),Se}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),w=this.imageManager.getPattern(a.to.toString());return!d||!w}useProgram(a,d){this.cache=this.cache||{};const w=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new zi(this.context,vn[a],d,Oc[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class go{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,w){const T=Math.pow(2,w),Y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ve=>{const Se=1/(ve=y.ag([],ve,a))[3]/d*T;return y.b1(ve,ve,[Se,Se,1/ve[3],Se])}),ge=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ve=>{const Se=function(tt,ot){var ht=ot[0],wt=ot[1],gt=ot[2],Ct=ht*ht+wt*wt+gt*gt;return Ct>0&&(Ct=1/Math.sqrt(Ct)),tt[0]=ot[0]*Ct,tt[1]=ot[1]*Ct,tt[2]=ot[2]*Ct,tt}([],(tt=[],ot=O([],Y[ve[0]],Y[ve[1]]),ht=O([],Y[ve[2]],Y[ve[1]]),wt=ot[0],Mt=ht[0],tt[0]=(gt=ot[1])*(Pt=ht[2])-(Ct=ot[2])*(vt=ht[1]),tt[1]=Ct*Mt-wt*Pt,tt[2]=wt*vt-gt*Mt,tt)),ke=-((ze=Se)[0]*(Be=Y[ve[1]])[0]+ze[1]*Be[1]+ze[2]*Be[2]);var tt,ot,ht,wt,gt,Ct,Mt,vt,Pt,ze,Be;return Se.concat(ke)});return new go(Y,ge)}}class ec{constructor(a,d){var w,T,Y;this.min=a,this.max=d,this.center=function(w,T,Y){return w[0]=.5*T[0],w[1]=.5*T[1],w[2]=.5*T[2],w}([],((w=[])[0]=(T=this.min)[0]+(Y=this.max)[0],w[1]=T[1]+Y[1],w[2]=T[2]+Y[2],w))}quadrant(a){const d=[a%2==0,a<2],w=W(this.min),T=W(this.max);for(let Y=0;Y<d.length;Y++)w[Y]=d[Y]?this.min[Y]:this.center[Y],T[Y]=d[Y]?this.center[Y]:this.max[Y];return T[2]=this.max[2],new ec(w,T)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let T=0;T<a.planes.length;T++){const Y=a.planes[T];let ge=0;for(let ve=0;ve<d.length;ve++)y.b2(Y,d[ve])>=0&&ge++;if(0===ge)return 0;ge!==d.length&&(w=!1)}if(w)return 2;for(let T=0;T<3;T++){let Y=Number.MAX_VALUE,ge=-Number.MAX_VALUE;for(let ve=0;ve<a.points.length;ve++){const Se=a.points[ve][T]-this.min[T];Y=Math.min(Y,Se),ge=Math.max(ge,Se)}if(ge<0||Y>this.max[T]-this.min[T])return 0}return 1}}class mo{constructor(a=0,d=0,w=0,T=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(w)||w<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=w,this.right=T}interpolate(a,d,w){return null!=d.top&&null!=a.top&&(this.top=y.z.number(a.top,d.top,w)),null!=d.bottom&&null!=a.bottom&&(this.bottom=y.z.number(a.bottom,d.bottom,w)),null!=d.left&&null!=a.left&&(this.left=y.z.number(a.left,d.left,w)),null!=d.right&&null!=a.right&&(this.right=y.z.number(a.right,d.right,w)),this}getCenter(a,d){const w=y.ad((this.left+a-this.right)/2,0,a),T=y.ad((this.top+d-this.bottom)/2,0,d);return new y.P(w,T)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new mo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Xc=85.051129;class Zc{constructor(a,d,w,T,Y){this.tileSize=512,this._renderWorldCopies=void 0===Y||!!Y,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=w??0,this._maxPitch=T??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new y.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const a=new Zc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){void 0===a?a=!0:null===a&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new y.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-y.b3(a,-180,180)*Math.PI/180;var w;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(w=new y.A(4),y.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w),function(w,T,Y){var ge=T[0],ve=T[1],Se=T[2],ke=T[3],ze=Math.sin(Y),Be=Math.cos(Y);w[0]=ge*Be+Se*ze,w[1]=ve*Be+ke*ze,w[2]=ge*-ze+Se*Be,w[3]=ve*-ze+ke*Be}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=y.ad(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,w){this._unmodified=!1,this._edgeInsets.interpolate(a,d,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new y.b4(0,a)];if(this._renderWorldCopies){const w=this.pointCoordinate(new y.P(0,0)),T=this.pointCoordinate(new y.P(this.width,0)),Y=this.pointCoordinate(new y.P(this.width,this.height)),ge=this.pointCoordinate(new y.P(0,this.height)),ve=Math.floor(Math.min(w.x,T.x,Y.x,ge.x)),Se=Math.floor(Math.max(w.x,T.x,Y.x,ge.x)),ke=1;for(let ze=ve-ke;ze<=Se+ke;ze++)0!==ze&&d.push(new y.b4(ze,a))}return d}coveringTiles(a){var d,w;let T=this.coveringZoomLevel(a);const Y=T;if(void 0!==a.minzoom&&T<a.minzoom)return[];void 0!==a.maxzoom&&T>a.maxzoom&&(T=a.maxzoom);const ge=this.pointCoordinate(this.getCameraPoint()),ve=y.Z.fromLngLat(this.center),Se=Math.pow(2,T),ke=[Se*ge.x,Se*ge.y,0],ze=[Se*ve.x,Se*ve.y,0],Be=go.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,T);let tt=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(tt=T);const ot=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ht=vt=>({aabb:new ec([vt*Se,0,0],[(vt+1)*Se,Se,0]),zoom:0,x:0,y:0,wrap:vt,fullyVisible:!1}),wt=[],gt=[],Ct=T,Mt=a.reparseOverscaled?Y:T;if(this._renderWorldCopies)for(let vt=1;vt<=3;vt++)wt.push(ht(-vt)),wt.push(ht(vt));for(wt.push(ht(0));wt.length>0;){const vt=wt.pop(),Pt=vt.x,Nt=vt.y;let Vt=vt.fullyVisible;if(!Vt){const ln=vt.aabb.intersects(Be);if(0===ln)continue;Vt=2===ln}const Kt=a.terrain?ke:ze,nn=vt.aabb.distanceX(Kt),Sn=vt.aabb.distanceY(Kt),An=Math.max(Math.abs(nn),Math.abs(Sn));if(vt.zoom===Ct||An>ot+(1<<Ct-vt.zoom)-2&&vt.zoom>=tt){const ln=Ct-vt.zoom,hn=ke[0]-.5-(Pt<<ln),Ln=ke[1]-.5-(Nt<<ln);gt.push({tileID:new y.S(vt.zoom===Ct?Mt:vt.zoom,vt.wrap,vt.zoom,Pt,Nt),distanceSq:M([ze[0]-.5-Pt,ze[1]-.5-Nt]),tileDistanceToCamera:Math.sqrt(hn*hn+Ln*Ln)})}else for(let ln=0;ln<4;ln++){const hn=(Pt<<1)+ln%2,Ln=(Nt<<1)+(ln>>1),ii=vt.zoom+1;let gn=vt.aabb.quadrant(ln);if(a.terrain){const xn=new y.S(ii,vt.wrap,ii,hn,Ln),Yn=a.terrain.getMinMaxElevation(xn),er=null!==(d=Yn.minElevation)&&void 0!==d?d:this.elevation,di=null!==(w=Yn.maxElevation)&&void 0!==w?w:this.elevation;gn=new ec([gn.min[0],gn.min[1],er],[gn.max[0],gn.max[1],di])}wt.push({aabb:gn,zoom:ii,x:hn,y:Ln,wrap:vt.wrap,fullyVisible:Vt})}}return gt.sort((vt,Pt)=>vt.distanceSq-Pt.distanceSq).map(vt=>vt.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=y.ad(a.lat,-85.051129,Xc);return new y.P(y.O(a.lng)*this.worldSize,y.Q(d)*this.worldSize)}unproject(a){return new y.Z(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.elevation,w=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,T=this.pointLocation(this.centerPoint,a),Y=a.getElevationForLngLatZoom(T,this.tileZoom);if(!(this.elevation-Y))return;const ge=w+d-Y,ve=Math.cos(this._pitch)*this.cameraToCenterDistance/ge/y.b5(1,T.lat),Se=this.scaleZoom(ve/this.tileSize);this._elevation=Y,this._center=T,this.zoom=Se}setLocationAtPoint(a,d){const w=this.pointCoordinate(d),T=this.pointCoordinate(this.centerPoint),Y=this.locationCoordinate(a),ge=new y.Z(Y.x-(w.x-T.x),Y.y-(w.y-T.y));this.center=this.coordinateLocation(ge),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return y.Z.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const tt=d.pointCoordinate(a);if(null!=tt)return tt}const w=[a.x,a.y,0,1],T=[a.x,a.y,1,1];y.ag(w,w,this.pixelMatrixInverse),y.ag(T,T,this.pixelMatrixInverse);const Y=w[3],ge=T[3],ve=w[1]/Y,Se=T[1]/ge,ke=w[2]/Y,ze=T[2]/ge,Be=ke===ze?0:(0-ke)/(ze-ke);return new y.Z(y.z.number(w[0]/Y,T[0]/ge,Be)/this.worldSize,y.z.number(ve,Se,Be)/this.worldSize)}coordinatePoint(a,d=0,w=this.pixelMatrix){const T=[a.x*this.worldSize,a.y*this.worldSize,d,1];return y.ag(T,T,w),new y.P(T[0]/T[3],T[1]/T[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return(new _e).extend(this.pointLocation(new y.P(0,a))).extend(this.pointLocation(new y.P(this.width,a))).extend(this.pointLocation(new y.P(this.width,this.height))).extend(this.pointLocation(new y.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new _e([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Xc])}calculateTileMatrix(a){const d=a.canonical,w=this.worldSize/this.zoomScale(d.z),T=d.x+Math.pow(2,d.z)*a.wrap,Y=y.ao(new Float64Array(16));return y.J(Y,Y,[T*w,d.y*w,0]),y.K(Y,Y,[w/y.X,w/y.X,1]),Y}calculatePosMatrix(a,d=!1){const w=a.key,T=d?this._alignedPosMatrixCache:this._posMatrixCache;if(T[w])return T[w];const Y=this.calculateTileMatrix(a);return y.L(Y,d?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,Y),T[w]=new Float32Array(Y),T[w]}calculateFogMatrix(a){const d=a.key,w=this._fogMatrixCache;if(w[d])return w[d];const T=this.calculateTileMatrix(a);return y.L(T,this.fogMatrix,T),w[d]=new Float32Array(T),w[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,d){d=y.ad(+d,this.minZoom,this.maxZoom);const w={center:new y.N(a.lng,a.lat),zoom:d};let T=this.lngRange;if(!this._renderWorldCopies&&null===T){const vt=179.9999999999;T=[-vt,vt]}const Y=this.tileSize*this.zoomScale(w.zoom);let ge=0,ve=Y,Se=0,ke=Y,ze=0,Be=0;const{x:tt,y:ot}=this.size;if(this.latRange){const vt=this.latRange;ge=y.Q(vt[1])*Y,ve=y.Q(vt[0])*Y,ve-ge<ot&&(ze=ot/(ve-ge))}T&&(Se=y.b3(y.O(T[0])*Y,0,Y),ke=y.b3(y.O(T[1])*Y,0,Y),ke<Se&&(ke+=Y),ke-Se<tt&&(Be=tt/(ke-Se)));const{x:ht,y:wt}=this.project.call({worldSize:Y},a);let gt,Ct;const Mt=Math.max(Be||0,ze||0);if(Mt){const vt=new y.P(Be?(ke+Se)/2:ht,ze?(ve+ge)/2:wt);return w.center=this.unproject.call({worldSize:Y},vt).wrap(),w.zoom+=this.scaleZoom(Mt),w}if(this.latRange){const vt=ot/2;wt-vt<ge&&(Ct=ge+vt),wt+vt>ve&&(Ct=ve-vt)}if(T){const vt=(Se+ke)/2;let Pt=ht;this._renderWorldCopies&&(Pt=y.b3(ht,vt-Y/2,vt+Y/2));const Nt=tt/2;Pt-Nt<Se&&(gt=Se+Nt),Pt+Nt>ke&&(gt=ke-Nt)}if(void 0!==gt||void 0!==Ct){const vt=new y.P(gt??ht,Ct??wt);w.center=this.unproject.call({worldSize:Y},vt).wrap()}return w}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:d,zoom:w}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=w,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=y.b5(1,this.center.lat)*this.worldSize;let T=y.ao(new Float64Array(16));y.K(T,T,[this.width/2,-this.height/2,1]),y.J(T,T,[1,-1,0]),this.labelPlaneMatrix=T,T=y.ao(new Float64Array(16)),y.K(T,T,[1,-1,1]),y.J(T,T,[-1,-1,0]),y.K(T,T,[2/this.width,2/this.height,1]),this.glCoordMatrix=T;const Y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),ge=Math.min(this.elevation,this.minElevationForCurrentTile),ve=Y-ge*this._pixelPerMeter/Math.cos(this._pitch),Se=ge<0?ve:Y,ke=Math.PI/2+this._pitch,ze=this._fov*(.5+a.y/this.height),Be=Math.sin(ze)*Se/Math.sin(y.ad(Math.PI-ke-ze,.01,Math.PI-.01)),tt=this.getHorizon(),ot=2*Math.atan(tt/this.cameraToCenterDistance)*(.5+a.y/(2*tt)),ht=Math.sin(ot)*Se/Math.sin(y.ad(Math.PI-ke-ot,.01,Math.PI-.01)),wt=Math.min(Be,ht),gt=1.01*(Math.cos(Math.PI/2-this._pitch)*wt+Se),Ct=this.height/50;T=new Float64Array(16),y.b6(T,this._fov,this.width/this.height,Ct,gt),T[8]=2*-a.x/this.width,T[9]=2*a.y/this.height,y.K(T,T,[1,-1,1]),y.J(T,T,[0,0,-this.cameraToCenterDistance]),y.b7(T,T,this._pitch),y.ae(T,T,this.angle),y.J(T,T,[-d,-w,0]),this.mercatorMatrix=y.K([],T,[this.worldSize,this.worldSize,this.worldSize]),y.K(T,T,[1,1,this._pixelPerMeter]),this.pixelMatrix=y.L(new Float64Array(16),this.labelPlaneMatrix,T),y.J(T,T,[0,0,-this.elevation]),this.modelViewProjectionMatrix=T,this.invModelViewProjectionMatrix=y.at([],T),this.fogMatrix=new Float64Array(16),y.b6(this.fogMatrix,this._fov,this.width/this.height,Y,gt),this.fogMatrix[8]=2*-a.x/this.width,this.fogMatrix[9]=2*a.y/this.height,y.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),y.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),y.b7(this.fogMatrix,this.fogMatrix,this._pitch),y.ae(this.fogMatrix,this.fogMatrix,this.angle),y.J(this.fogMatrix,this.fogMatrix,[-d,-w,0]),y.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),y.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=y.L(new Float64Array(16),this.labelPlaneMatrix,T);const Mt=this.width%2/2,vt=this.height%2/2,Pt=Math.cos(this.angle),Nt=Math.sin(this.angle),Vt=d-Math.round(d)+Pt*Mt+Nt*vt,Kt=w-Math.round(w)+Pt*vt+Nt*Mt,nn=new Float64Array(T);if(y.J(nn,nn,[Vt>.5?Vt-1:Vt,Kt>.5?Kt-1:Kt,0]),this.alignedModelViewProjectionMatrix=nn,T=y.at(new Float64Array(16),this.pixelMatrix),!T)throw new Error("failed to invert matrix");this.pixelMatrixInverse=T,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new y.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return y.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new y.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(1===a.length)return[a[0],d];{let w=d.x,T=d.y,Y=d.x,ge=d.y;for(const ve of a)w=Math.min(w,ve.x),T=Math.min(T,ve.y),Y=Math.max(Y,ve.x),ge=Math.max(ge,ve.y);return[new y.P(w,T),new y.P(Y,T),new y.P(Y,ge),new y.P(w,ge),new y.P(w,T)]}}lngLatToCameraDepth(a,d){const w=this.locationCoordinate(a),T=[w.x*this.worldSize,w.y*this.worldSize,d,1];return y.ag(T,T,this.modelViewProjectionMatrix),T[2]/T[3]}}function Yc(Z,a){let d,w=!1,T=null,Y=null;const ge=()=>{T=null,w&&(Z.apply(Y,d),T=setTimeout(ge,a),w=!1)};return(...ve)=>(w=!0,Y=this,d=ve,T||ge(),T)}class gl{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let w;return d.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(w=T)}),(w&&w[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:w,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Yc(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const d=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,T=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),Y=Math.pow(10,T),ge=Math.round(d.lng*Y)/Y,ve=Math.round(d.lat*Y)/Y,Se=this._map.getBearing(),ke=this._map.getPitch();let ze="";if(ze+=a?`/${ge}/${ve}/${w}`:`${w}/${ve}/${ge}`,(Se||ke)&&(ze+="/"+Math.round(10*Se)/10),ke&&(ze+=`/${Math.round(ke)}`),this._hashName){const Be=this._hashName;let tt=!1;const ot=window.location.hash.slice(1).split("&").map(ht=>{const wt=ht.split("=")[0];return wt===Be?(tt=!0,`${wt}=${ze}`):ht}).filter(ht=>ht);return tt||ot.push(`${Be}=${ze}`),`#${ot.join("&")}`}return`#${ze}`}}const Ro={linearity:.3,easing:y.b8(0,0,.3,1)},eh=y.e({deceleration:2500,maxSpeed:1400},Ro),Ws=y.e({deceleration:20,maxSpeed:1400},Ro),Cd=y.e({deceleration:1e3,maxSpeed:360},Ro),tc=y.e({deceleration:1e3,maxSpeed:90},Ro);class Kc{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=e.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new y.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:Y}of this._inertiaBuffer)d.zoom+=Y.zoomDelta||0,d.bearing+=Y.bearingDelta||0,d.pitch+=Y.pitchDelta||0,Y.panDelta&&d.pan._add(Y.panDelta),Y.around&&(d.around=Y.around),Y.pinchAround&&(d.pinchAround=Y.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const Y=Jc(d.pan.mag(),w,y.e({},eh,a||{}));T.offset=d.pan.mult(Y.amount/d.pan.mag()),T.center=this._map.transform.center,ml(T,Y)}if(d.zoom){const Y=Jc(d.zoom,w,Ws);T.zoom=this._map.transform.zoom+Y.amount,ml(T,Y)}if(d.bearing){const Y=Jc(d.bearing,w,Cd);T.bearing=this._map.transform.bearing+y.ad(Y.amount,-179,179),ml(T,Y)}if(d.pitch){const Y=Jc(d.pitch,w,tc);T.pitch=this._map.transform.pitch+Y.amount,ml(T,Y)}if(T.zoom||T.bearing){const Y=void 0===d.pinchAround?d.around:d.pinchAround;T.around=Y?this._map.unproject(Y):this._map.getCenter()}return this.clear(),y.e(T,{noMoveStart:!0})}}function ml(Z,a){(!Z.duration||Z.duration<a.duration)&&(Z.duration=a.duration,Z.easing=a.easing)}function Jc(Z,a,d){const{maxSpeed:w,linearity:T,deceleration:Y}=d,ge=y.ad(Z*T/(a/1e3),-w,w),ve=Math.abs(ge)/(Y*T);return{easing:d.easing,duration:1e3*ve,amount:ge*(ve/2)}}class Ss extends y.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,w,T={}){const Y=V.mousePos(d.getCanvas(),w),ge=d.unproject(Y);super(a,y.e({point:Y,lngLat:ge,originalEvent:w},T)),this._defaultPrevented=!1,this.target=d}}class yl extends y.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,w){const T="touchend"===a?w.changedTouches:w.touches,Y=V.touchPos(d.getCanvasContainer(),T),ge=Y.map(Se=>d.unproject(Se)),ve=Y.reduce((Se,ke,ze,Be)=>Se.add(ke.div(Be.length)),new y.P(0,0));super(a,{points:Y,point:ve,lngLats:ge,lngLat:d.unproject(ve),originalEvent:w}),this._defaultPrevented=!1}}class th extends y.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,w){super(a,{originalEvent:w}),this._defaultPrevented=!1}}class Qc{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new th(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new Ss(a.type,this._map,a))}mouseup(a){this._map.fire(new Ss(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Ss(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ss(a.type,this._map,a))}mouseover(a){this._map.fire(new Ss(a.type,this._map,a))}mouseout(a){this._map.fire(new Ss(a.type,this._map,a))}touchstart(a){return this._firePreventable(new yl(a.type,this._map,a))}touchmove(a){this._map.fire(new yl(a.type,this._map,a))}touchend(a){this._map.fire(new yl(a.type,this._map,a))}touchcancel(a){this._map.fire(new yl(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nh{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ss(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ss("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ss(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ni{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(y.P.convert(a),this._map.terrain)}}class ih{constructor(a,d){this._map=a,this._tr=new Ni(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&0===a.button&&(V.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const w=d;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const T=this._startPos;this._lastPos=w,this._box||(this._box=V.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const Y=Math.min(T.x,w.x),ge=Math.max(T.x,w.x),ve=Math.min(T.y,w.y),Se=Math.max(T.y,w.y);V.setTransform(this._box,`translate(${Y}px,${ve}px)`),this._box.style.width=ge-Y+"px",this._box.style.height=Se-ve+"px"}mouseupWindow(a,d){if(!this._active||0!==a.button)return;const w=this._startPos,T=d;if(this.reset(),V.suppressClick(),w.x!==T.x||w.y!==T.y)return this._map.fire(new y.k("boxzoomend",{originalEvent:a})),{cameraAnimation:Y=>Y.fitScreenCoordinates(w,T,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&27===a.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(V.remove(this._box),this._box=null),V.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new y.k(a,{originalEvent:d}))}}function vl(Z,a){if(Z.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${Z.length}, points ${a.length}`);const d={};for(let w=0;w<Z.length;w++)d[Z[w].identifier]=a[w];return d}class rh{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=a.timeStamp),w.length===this.numTouches&&(this.centroid=function(T){const Y=new y.P(0,0);for(const ge of T)Y._add(ge);return Y.div(T.length)}(d),this.touches=vl(w,d)))}touchmove(a,d,w){if(this.aborted||!this.centroid)return;const T=vl(w,d);for(const Y in this.touches){const ge=T[Y];(!ge||ge.dist(this.touches[Y])>30)&&(this.aborted=!0)}}touchend(a,d,w){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),0===w.length){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class jr{constructor(a){this.singleTap=new rh(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,w){this.singleTap.touchstart(a,d,w)}touchmove(a,d,w){this.singleTap.touchmove(a,d,w)}touchend(a,d,w){const T=this.singleTap.touchend(a,d,w);if(T){const Y=a.timeStamp-this.lastTime<500,ge=!this.lastTap||this.lastTap.dist(T)<30;if(Y&&ge||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class Sd{constructor(a){this._tr=new Ni(a),this._zoomIn=new jr({numTouches:1,numTaps:2}),this._zoomOut=new jr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,w){this._zoomIn.touchstart(a,d,w),this._zoomOut.touchstart(a,d,w)}touchmove(a,d,w){this._zoomIn.touchmove(a,d,w),this._zoomOut.touchmove(a,d,w)}touchend(a,d,w){const T=this._zoomIn.touchend(a,d,w),Y=this._zoomOut.touchend(a,d,w),ge=this._tr;return T?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ve=>ve.easeTo({duration:300,zoom:ge.zoom+1,around:ge.unproject(T)},{originalEvent:a})}):Y?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ve=>ve.easeTo({duration:300,zoom:ge.zoom-1,around:ge.unproject(Y)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ji{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const T=d.length?d[0]:d;return!this._moved&&T.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=T,this._move(w,T))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&V.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const kn={0:1,2:2};class Qi{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=V.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,w){const T=kn[w];return void 0===d.buttons||(d.buttons&T)!==T}(a,this._eventButton)}isValidEndEvent(a){return V.mouseButton(a)===this._eventButton}}class Ei{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return 1===a.targetTouches.length}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const Rr=Z=>{Z.mousedown=Z.dragStart,Z.mousemoveWindow=Z.dragMove,Z.mouseup=Z.dragEnd,Z.contextmenu=a=>{a.preventDefault()}},is=({enable:Z,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const w=new Qi({checkCorrectEvent:T=>0===V.mouseButton(T)&&T.ctrlKey||2===V.mouseButton(T)});return new Ji({clickTolerance:a,move:(T,Y)=>({bearingDelta:(Y.x-T.x)*d}),moveStateManager:w,enable:Z,assignEvents:Rr})},oa=({enable:Z,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const w=new Qi({checkCorrectEvent:T=>0===V.mouseButton(T)&&T.ctrlKey||2===V.mouseButton(T)});return new Ji({clickTolerance:a,move:(T,Y)=>({pitchDelta:(Y.y-T.y)*d}),moveStateManager:w,enable:Z,assignEvents:Rr})};class rs{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new y.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(a,d,w){return this._calculateTransform(a,d,w)}touchmove(a,d,w){if(this._active&&!(w.length<this.minTouchs()))return a.preventDefault(),this._calculateTransform(a,d,w)}touchend(a,d,w){this._calculateTransform(a,d,w),this._active&&w.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,w){w.length>0&&(this._active=!0);const T=vl(w,d),Y=new y.P(0,0),ge=new y.P(0,0);let ve=0;for(const ke in T){const ze=T[ke],Be=this._touches[ke];Be&&(Y._add(ze),ge._add(ze.sub(Be)),ve++,T[ke]=ze)}if(this._touches=T,ve<this.minTouchs()||!ge.mag())return;const Se=ge.div(ve);return this._sum._add(Se),this._sum.mag()<this._clickTolerance?void 0:{around:Y.div(ve),panDelta:Se}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,w){if(!this._firstTwoTouches)return;a.preventDefault();const[T,Y]=this._firstTwoTouches,ge=_l(w,d,T),ve=_l(w,d,Y);if(!ge||!ve)return;const Se=this._aroundCenter?null:ge.add(ve).div(2);return this._move([ge,ve],Se,a)}touchend(a,d,w){if(!this._firstTwoTouches)return;const[T,Y]=this._firstTwoTouches,ge=_l(w,d,T),ve=_l(w,d,Y);ge&&ve||(this._active&&V.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function _l(Z,a,d){for(let w=0;w<Z.length;w++)if(Z[w].identifier===d)return a[w]}function bl(Z,a){return Math.log(Z/a)/Math.LN2}class sh extends xl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const w=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(bl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bl(this._distance,w),pinchAround:d}}}function ah(Z,a){return 180*Z.angleWith(a)/Math.PI}class gr extends xl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,w){const T=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ah(this._vector,T),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,w=ah(a,this._startVector);return Math.abs(w)<d}}function Cn(Z){return Math.abs(Z.y)>Math.abs(Z.x)}class ui extends xl{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,w){super.touchstart(a,d,w),this._currentTouchCount=w.length}_start(a){this._lastPoints=a,Cn(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,w){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const T=a[0].sub(this._lastPoints[0]),Y=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(T,Y,w.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(T.y+Y.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,w){if(void 0!==this._valid)return this._valid;const T=a.mag()>=2,Y=d.mag()>=2;if(!T&&!Y)return;if(!T||!Y)return void 0===this._firstMove&&(this._firstMove=w),w-this._firstMove<100&&void 0;const ge=a.y>0==d.y>0;return Cn(a)&&Cn(d)&&ge}}const ur={panStep:100,bearingStep:15,pitchStep:10};class Xs{constructor(a){this._tr=new Ni(a);const d=ur;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,w=0,T=0,Y=0,ge=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?w=-1:(a.preventDefault(),Y=-1);break;case 39:a.shiftKey?w=1:(a.preventDefault(),Y=1);break;case 38:a.shiftKey?T=1:(a.preventDefault(),ge=-1);break;case 40:a.shiftKey?T=-1:(a.preventDefault(),ge=1);break;default:return}return this._rotationDisabled&&(w=0,T=0),{cameraAnimation:ve=>{const Se=this._tr;ve.easeTo({duration:300,easeId:"keyboardHandler",easing:wl,zoom:d?Math.round(Se.zoom)+d*(a.shiftKey?2:1):Se.zoom,bearing:Se.bearing+w*this._bearingStep,pitch:Se.pitch+T*this._pitchStep,offset:[-Y*this._panStep,-ge*this._panStep],center:Se.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wl(Z){return Z*(2-Z)}const Hr=4.000244140625;class yo{constructor(a,d){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=a,this._tr=new Ni(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!a[this._map.cooperativeGestures._bypassKey])return;let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const w=e.now(),T=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,0!==d&&d%Hr==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=V.mousePos(this._map.getCanvas(),a),w=this._tr;this._around=d.y>w.transform.height/2-w.transform.getHorizon()?y.N.convert(this._aroundCenter?w.center:w.unproject(d)):y.N.convert(w.center),this._aroundPoint=w.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(0!==this._delta){const ve="wheel"===this._type&&Math.abs(this._delta)>Hr?this._wheelZoomRate:this._defaultZoomRate;let Se=2/(1+Math.exp(-Math.abs(this._delta*ve)));this._delta<0&&0!==Se&&(Se=1/Se);const ke="number"==typeof this._targetZoom?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(ke*Se))),"wheel"===this._type&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d="number"==typeof this._targetZoom?this._targetZoom:a.zoom,w=this._startZoom,T=this._easing;let Y,ge=!1;if("wheel"===this._type&&w&&T){const ve=Math.min((e.now()-this._lastWheelEventTime)/200,1),Se=T(ve);Y=y.z.number(w,d,Se),ve<1?this._frameId||(this._frameId=!0):ge=!0}else Y=d,ge=!0;return this._active=!0,ge&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ge,zoomDelta:Y-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=y.b9;if(this._prevEase){const w=this._prevEase,T=(e.now()-w.start)/w.duration,Y=w.easing(T+.01)-w.easing(T),ge=.27/Math.sqrt(Y*Y+1e-4)*.01,ve=Math.sqrt(.0729-ge*ge);d=y.b8(ge,ve,.25,1)}return this._prevEase={start:e.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yr{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class la{constructor(a){this._tr=new Ni(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oo{constructor(){this._tap=new jr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,w){if(!this._swipePoint)if(this._tapTime){const T=d[0],Y=a.timeStamp-this._tapTime<500,ge=this._tapPoint.dist(T)<30;Y&&ge?w.length>0&&(this._swipePoint=T,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(a,d,w)}touchmove(a,d,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const T=d[0],Y=T.y-this._swipePoint.y;return this._swipePoint=T,a.preventDefault(),this._active=!0,{zoomDelta:Y/128}}}else this._tap.touchmove(a,d,w)}touchend(a,d,w){if(this._tapTime)this._swipePoint&&0===w.length&&this.reset();else{const T=this._tap.touchend(a,d,w);T&&(this._tapTime=a.timeStamp,this._tapPoint=T)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kn{constructor(a,d,w){this._el=a,this._mousePan=d,this._touchPan=w}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class As{constructor(a,d,w){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class eu{constructor(a,d,w,T){this._el=a,this._touchZoom=d,this._touchRotate=w,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hs{constructor(a,d){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=V.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const w=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),T=document.createElement("div");T.className="maplibregl-desktop-message",T.textContent=d,this._container.appendChild(T);const Y=document.createElement("div");Y.className="maplibregl-mobile-message",Y.textContent=w,this._container.appendChild(Y),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(V.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(a){this._onCooperativeGesture(1===a.touches.length)}wheel(a){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!a[this._bypassKey])}_onCooperativeGesture(a){this._enabled&&a&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Gi=Z=>Z.zoom||Z.drag||Z.pitch||Z.rotate;class nc extends y.k{}function vo(Z){return Z.panDelta&&Z.panDelta.mag()||Z.zoomDelta||Z.bearingDelta||Z.pitchDelta}class Ba{constructor(a,d){this.handleWindowEvent=T=>{this.handleEvent(T,`${T.type}Window`)},this.handleEvent=(T,Y)=>{if("blur"===T.type)return void this.stop(!0);this._updatingCamera=!0;const ge="renderFrame"===T.type?void 0:T,ve={needsRenderFrame:!1},Se={},ke={},ze=T.touches,Be=ze?this._getMapTouches(ze):void 0,tt=Be?V.touchPos(this._map.getCanvas(),Be):V.mousePos(this._map.getCanvas(),T);for(const{handlerName:wt,handler:gt,allowed:Ct}of this._handlers){if(!gt.isEnabled())continue;let Mt;this._blockedByActive(ke,Ct,wt)?gt.reset():gt[Y||T.type]&&(Mt=gt[Y||T.type](T,tt,Be),this.mergeHandlerResult(ve,Se,Mt,wt,ge),Mt&&Mt.needsRenderFrame&&this._triggerRenderFrame()),(Mt||gt.isActive())&&(ke[wt]=gt)}const ot={};for(const wt in this._previousActiveHandlers)ke[wt]||(ot[wt]=ge);this._previousActiveHandlers=ke,(Object.keys(ot).length||vo(ve))&&(this._changes.push([ve,Se,ot]),this._triggerRenderFrame()),(Object.keys(ke).length||vo(ve))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ht}=ve;ht&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ht(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kc(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[T,Y,ge]of this._listeners)V.addEventListener(T,Y,T===document?this.handleWindowEvent:this.handleEvent,ge)}destroy(){for(const[a,d,w]of this._listeners)V.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(a){const d=this._map,w=d.getCanvasContainer();this._add("mapEvent",new Qc(d,a));const T=d.boxZoom=new ih(d,a);this._add("boxZoom",T),a.interactive&&a.boxZoom&&T.enable();const Y=d.cooperativeGestures=new hs(d,a.cooperativeGestures);this._add("cooperativeGestures",Y),a.cooperativeGestures&&Y.enable();const ge=new Sd(d),ve=new la(d);d.doubleClickZoom=new yr(ve,ge),this._add("tapZoom",ge),this._add("clickZoom",ve),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const Se=new Oo;this._add("tapDragZoom",Se);const ke=d.touchPitch=new ui(d);this._add("touchPitch",ke),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const ze=is(a),Be=oa(a);d.dragRotate=new As(a,ze,Be),this._add("mouseRotate",ze,["mousePitch"]),this._add("mousePitch",Be,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const tt=(({enable:Mt,clickTolerance:vt})=>{const Pt=new Qi({checkCorrectEvent:Nt=>0===V.mouseButton(Nt)&&!Nt.ctrlKey});return new Ji({clickTolerance:vt,move:(Nt,Vt)=>({around:Vt,panDelta:Vt.sub(Nt)}),activateOnStart:!0,moveStateManager:Pt,enable:Mt,assignEvents:Rr})})(a),ot=new rs(a,d);d.dragPan=new Kn(w,tt,ot),this._add("mousePan",tt),this._add("touchPan",ot,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const ht=new gr,wt=new sh;d.touchZoomRotate=new eu(w,wt,ht,Se),this._add("touchRotate",ht,["touchPan","touchZoom"]),this._add("touchZoom",wt,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const gt=d.scrollZoom=new yo(d,()=>this._triggerRenderFrame());this._add("scrollZoom",gt,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const Ct=d.keyboard=new Xs(d);this._add("keyboard",Ct),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new nh(d))}_add(a,d,w){this._handlers.push({handlerName:a,handler:d,allowed:w}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gi(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,w){for(const T in a)if(T!==w&&(!d||d.indexOf(T)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const w of a)this._el.contains(w.target)&&d.push(w);return d}mergeHandlerResult(a,d,w,T,Y){if(!w)return;y.e(a,w);const ge={handlerName:T,originalEvent:w.originalEvent||Y};void 0!==w.zoomDelta&&(d.zoom=ge),void 0!==w.panDelta&&(d.drag=ge),void 0!==w.pitchDelta&&(d.pitch=ge),void 0!==w.bearingDelta&&(d.rotate=ge)}_applyChanges(){const a={},d={},w={};for(const[T,Y,ge]of this._changes)T.panDelta&&(a.panDelta=(a.panDelta||new y.P(0,0))._add(T.panDelta)),T.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+T.pitchDelta),void 0!==T.around&&(a.around=T.around),void 0!==T.pinchAround&&(a.pinchAround=T.pinchAround),T.noInertia&&(a.noInertia=T.noInertia),y.e(d,Y),y.e(w,ge);this._updateMapTransform(a,d,w),this._changes=[]}_updateMapTransform(a,d,w){const T=this._map,Y=T._getTransformForUpdate(),ge=T.terrain;if(!(vo(a)||ge&&this._terrainMovement))return this._fireEvents(d,w,!0);let{panDelta:ve,zoomDelta:Se,bearingDelta:ke,pitchDelta:ze,around:Be,pinchAround:tt}=a;void 0!==tt&&(Be=tt),T._stop(!0),Be=Be||T.transform.centerPoint;const ot=Y.pointLocation(ve?Be.sub(ve):Be);ke&&(Y.bearing+=ke),ze&&(Y.pitch+=ze),Se&&(Y.zoom+=Se),ge?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?Y.center=Y.pointLocation(Y.centerPoint.sub(ve)):Y.setLocationAtPoint(ot,Be):(this._terrainMovement=!0,this._map._elevationFreeze=!0,Y.setLocationAtPoint(ot,Be)):Y.setLocationAtPoint(ot,Be),T._applyUpdatedTransform(Y),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,w,!0)}_fireEvents(a,d,w){const T=Gi(this._eventsInProgress),Y=Gi(a),ge={};for(const Be in a){const{originalEvent:tt}=a[Be];this._eventsInProgress[Be]||(ge[`${Be}start`]=tt),this._eventsInProgress[Be]=a[Be]}!T&&Y&&this._fireEvent("movestart",Y.originalEvent);for(const Be in ge)this._fireEvent(Be,ge[Be]);Y&&this._fireEvent("move",Y.originalEvent);for(const Be in a){const{originalEvent:tt}=a[Be];this._fireEvent(Be,tt)}const ve={};let Se;for(const Be in this._eventsInProgress){const{handlerName:tt,originalEvent:ot}=this._eventsInProgress[Be];this._handlersById[tt].isActive()||(delete this._eventsInProgress[Be],Se=d[tt]||ot,ve[`${Be}end`]=Se)}for(const Be in ve)this._fireEvent(Be,ve[Be]);const ke=Gi(this._eventsInProgress),ze=(T||Y)&&!ke;if(ze&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),w&&ze){this._updatingCamera=!0;const Be=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),tt=ot=>0!==ot&&-this._bearingSnap<ot&&ot<this._bearingSnap;!Be||!Be.essential&&e.prefersReducedMotion?(this._map.fire(new y.k("moveend",{originalEvent:Se})),tt(this._map.getBearing())&&this._map.resetNorth()):(tt(Be.bearing||this._map.getBearing())&&(Be.bearing=0),Be.freezeElevation=!0,this._map.easeTo(Be,{originalEvent:Se})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new y.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new nc("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class ic extends y.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const w=Math.min((e.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new y.N(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,w){return a=y.P.convert(a).mult(-1),this.panTo(this.transform.center,y.e({offset:a},d),w)}panTo(a,d,w){return this.easeTo(y.e({center:a},d),w)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,w){return this.easeTo(y.e({zoom:a},d),w)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,w){return this.easeTo(y.e({bearing:a},d),w)}resetNorth(a,d){return this.rotateTo(0,y.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(y.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=_e.convert(a);const w=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),w,d)}_cameraForBoxAndBearing(a,d,w,T){const Y={top:0,bottom:0,right:0,left:0};if("number"==typeof(T=y.e({padding:Y,offset:[0,0],maxZoom:this.transform.maxZoom},T)).padding){const ln=T.padding;T.padding={top:ln,bottom:ln,right:ln,left:ln}}T.padding=y.e(Y,T.padding);const ge=this.transform,ve=ge.padding,Se=new _e(a,d),ke=ge.project(Se.getNorthWest()),ze=ge.project(Se.getNorthEast()),Be=ge.project(Se.getSouthEast()),tt=ge.project(Se.getSouthWest()),ot=y.ba(-w),ht=ke.rotate(ot),wt=ze.rotate(ot),gt=Be.rotate(ot),Ct=tt.rotate(ot),Mt=new y.P(Math.max(ht.x,wt.x,Ct.x,gt.x),Math.max(ht.y,wt.y,Ct.y,gt.y)),vt=new y.P(Math.min(ht.x,wt.x,Ct.x,gt.x),Math.min(ht.y,wt.y,Ct.y,gt.y)),Pt=Mt.sub(vt),Nt=(ge.width-(ve.left+ve.right+T.padding.left+T.padding.right))/Pt.x,Vt=(ge.height-(ve.top+ve.bottom+T.padding.top+T.padding.bottom))/Pt.y;if(Vt<0||Nt<0)return void y.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Kt=Math.min(ge.scaleZoom(ge.scale*Math.min(Nt,Vt)),T.maxZoom),nn=y.P.convert(T.offset),Sn=new y.P((T.padding.left-T.padding.right)/2,(T.padding.top-T.padding.bottom)/2).rotate(y.ba(w)),An=nn.add(Sn).mult(ge.scale/ge.zoomScale(Kt));return{center:ge.unproject(ke.add(Be).div(2).sub(An)),zoom:Kt,bearing:w}}fitBounds(a,d,w){return this._fitInternal(this.cameraForBounds(a,d),d,w)}fitScreenCoordinates(a,d,w,T,Y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(y.P.convert(a)),this.transform.pointLocation(y.P.convert(d)),w,T),T,Y)}_fitInternal(a,d,w){return a?(delete(d=y.e(a,d)).padding,d.linear?this.easeTo(d,w):this.flyTo(d,w)):this}jumpTo(a,d){this.stop();const w=this._getTransformForUpdate();let T=!1,Y=!1,ge=!1;return"zoom"in a&&w.zoom!==+a.zoom&&(T=!0,w.zoom=+a.zoom),void 0!==a.center&&(w.center=y.N.convert(a.center)),"bearing"in a&&w.bearing!==+a.bearing&&(Y=!0,w.bearing=+a.bearing),"pitch"in a&&w.pitch!==+a.pitch&&(ge=!0,w.pitch=+a.pitch),null==a.padding||w.isPaddingEqual(a.padding)||(w.padding=a.padding),this._applyUpdatedTransform(w),this.fire(new y.k("movestart",d)).fire(new y.k("move",d)),T&&this.fire(new y.k("zoomstart",d)).fire(new y.k("zoom",d)).fire(new y.k("zoomend",d)),Y&&this.fire(new y.k("rotatestart",d)).fire(new y.k("rotate",d)).fire(new y.k("rotateend",d)),ge&&this.fire(new y.k("pitchstart",d)).fire(new y.k("pitch",d)).fire(new y.k("pitchend",d)),this.fire(new y.k("moveend",d))}calculateCameraOptionsFromTo(a,d,w,T=0){const Y=y.Z.fromLngLat(a,d),ge=y.Z.fromLngLat(w,T),ve=ge.x-Y.x,Se=ge.y-Y.y,ke=ge.z-Y.z,ze=Math.hypot(ve,Se,ke);if(0===ze)throw new Error("Can't calculate camera options with same From and To");const Be=Math.hypot(ve,Se),tt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ze/this.transform.tileSize),ot=180*Math.atan2(ve,-Se)/Math.PI;let ht=180*Math.acos(Be/ze)/Math.PI;return ht=ke<0?90-ht:90+ht,{center:ge.toLngLat(),zoom:tt,pitch:ht,bearing:ot}}easeTo(a,d){var w;this._stop(!1,a.easeId),(!1===(a=y.e({offset:[0,0],duration:500,easing:y.b9},a)).animate||!a.essential&&e.prefersReducedMotion)&&(a.duration=0);const T=this._getTransformForUpdate(),Y=this.getZoom(),ge=this.getBearing(),ve=this.getPitch(),Se=this.getPadding(),ke="bearing"in a?this._normalizeBearing(a.bearing,ge):ge,ze="pitch"in a?+a.pitch:ve,Be="padding"in a?a.padding:T.padding,tt=y.P.convert(a.offset);let ot=T.centerPoint.add(tt);const ht=T.pointLocation(ot),{center:wt,zoom:gt}=T.getConstrained(y.N.convert(a.center||ht),null!==(w=a.zoom)&&void 0!==w?w:Y);this._normalizeCenter(wt);const Ct=T.project(ht),Mt=T.project(wt).sub(Ct),vt=T.zoomScale(gt-Y);let Pt,Nt;a.around&&(Pt=y.N.convert(a.around),Nt=T.locationPoint(Pt));const Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||gt!==Y,this._rotating=this._rotating||ge!==ke,this._pitching=this._pitching||ze!==ve,this._padding=!T.isPaddingEqual(Be),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,Vt),this.terrain&&this._prepareElevation(wt),this._ease(Kt=>{if(this._zooming&&(T.zoom=y.z.number(Y,gt,Kt)),this._rotating&&(T.bearing=y.z.number(ge,ke,Kt)),this._pitching&&(T.pitch=y.z.number(ve,ze,Kt)),this._padding&&(T.interpolatePadding(Se,Be,Kt),ot=T.centerPoint.add(tt)),this.terrain&&!a.freezeElevation&&this._updateElevation(Kt),Pt)T.setLocationAtPoint(Pt,Nt);else{const nn=T.zoomScale(T.zoom-Y),Sn=gt>Y?Math.min(2,vt):Math.max(.5,vt),An=Math.pow(Sn,1-Kt),ln=T.unproject(Ct.add(Mt.mult(Kt*An)).mult(nn));T.setLocationAtPoint(T.renderWorldCopies?ln.wrap():ln,ot)}this._applyUpdatedTransform(T),this._fireMoveEvents(d)},Kt=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d,Kt)},a),this}_prepareEase(a,d,w={}){this._moving=!0,d||w.moving||this.fire(new y.k("movestart",a)),this._zooming&&!w.zooming&&this.fire(new y.k("zoomstart",a)),this._rotating&&!w.rotating&&this.fire(new y.k("rotatestart",a)),this._pitching&&!w.pitching&&this.fire(new y.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(w-(d-(w*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=y.z.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;const d=a.clone(),{center:w,zoom:T,pitch:Y,bearing:ge,elevation:ve}=this.transformCameraUpdate(d);w&&(d.center=w),void 0!==T&&(d.zoom=T),void 0!==Y&&(d.pitch=Y),void 0!==ge&&(d.bearing=ge),void 0!==ve&&(d.elevation=ve),this.transform.apply(d)}_fireMoveEvents(a){this.fire(new y.k("move",a)),this._zooming&&this.fire(new y.k("zoom",a)),this._rotating&&this.fire(new y.k("rotate",a)),this._pitching&&this.fire(new y.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const w=this._zooming,T=this._rotating,Y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new y.k("zoomend",a)),T&&this.fire(new y.k("rotateend",a)),Y&&this.fire(new y.k("pitchend",a)),this.fire(new y.k("moveend",a))}flyTo(a,d){var w;if(!a.essential&&e.prefersReducedMotion){const xn=y.M(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xn,d)}this.stop(),a=y.e({offset:[0,0],speed:1.2,curve:1.42,easing:y.b9},a);const T=this._getTransformForUpdate(),Y=this.getZoom(),ge=this.getBearing(),ve=this.getPitch(),Se=this.getPadding(),ke="bearing"in a?this._normalizeBearing(a.bearing,ge):ge,ze="pitch"in a?+a.pitch:ve,Be="padding"in a?a.padding:T.padding,tt=y.P.convert(a.offset);let ot=T.centerPoint.add(tt);const ht=T.pointLocation(ot),{center:wt,zoom:gt}=T.getConstrained(y.N.convert(a.center||ht),null!==(w=a.zoom)&&void 0!==w?w:Y);this._normalizeCenter(wt);const Ct=T.zoomScale(gt-Y),Mt=T.project(ht),vt=T.project(wt).sub(Mt);let Pt=a.curve;const Nt=Math.max(T.width,T.height),Vt=Nt/Ct,Kt=vt.mag();if("minZoom"in a){const xn=y.ad(Math.min(a.minZoom,Y,gt),T.minZoom,T.maxZoom),Yn=Nt/T.zoomScale(xn-Y);Pt=Math.sqrt(Yn/Kt*2)}const nn=Pt*Pt;function Sn(xn){const Yn=(Vt*Vt-Nt*Nt+(xn?-1:1)*nn*nn*Kt*Kt)/(2*(xn?Vt:Nt)*nn*Kt);return Math.log(Math.sqrt(Yn*Yn+1)-Yn)}function An(xn){return(Math.exp(xn)-Math.exp(-xn))/2}function ln(xn){return(Math.exp(xn)+Math.exp(-xn))/2}const hn=Sn(!1);let Ln=function(xn){return ln(hn)/ln(hn+Pt*xn)},ii=function(xn){return Nt*((ln(hn)*(An(Yn=hn+Pt*xn)/ln(Yn))-An(hn))/nn)/Kt;var Yn},gn=(Sn(!0)-hn)/Pt;if(Math.abs(Kt)<1e-6||!isFinite(gn)){if(Math.abs(Nt-Vt)<1e-6)return this.easeTo(a,d);const xn=Vt<Nt?-1:1;gn=Math.abs(Math.log(Vt/Nt))/Pt,ii=()=>0,Ln=Yn=>Math.exp(xn*Pt*Yn)}return a.duration="duration"in a?+a.duration:1e3*gn/("screenSpeed"in a?+a.screenSpeed/Pt:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=ge!==ke,this._pitching=ze!==ve,this._padding=!T.isPaddingEqual(Be),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(wt),this._ease(xn=>{const Yn=xn*gn,er=1/Ln(Yn);T.zoom=1===xn?gt:Y+T.scaleZoom(er),this._rotating&&(T.bearing=y.z.number(ge,ke,xn)),this._pitching&&(T.pitch=y.z.number(ve,ze,xn)),this._padding&&(T.interpolatePadding(Se,Be,xn),ot=T.centerPoint.add(tt)),this.terrain&&!a.freezeElevation&&this._updateElevation(xn);const di=1===xn?wt:T.unproject(Mt.add(vt.mult(ii(Yn))).mult(er));T.setLocationAtPoint(T.renderWorldCopies?di.wrap():di,ot),this._applyUpdatedTransform(T),this._fireMoveEvents(d)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){var w;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const T=this._onEaseEnd;delete this._onEaseEnd,T.call(this,d)}return a||null===(w=this.handlers)||void 0===w||w.stop(!1),this}_ease(a,d,w){!1===w.animate||0===w.duration?(a(1),d()):(this._easeStart=e.now(),this._easeOptions=w,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=y.b3(a,-180,180);const w=Math.abs(a-d);return Math.abs(a-360-d)<w&&(a-=360),Math.abs(a+360-d)<w&&(a+=360),a}_normalizeCenter(a){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const w=a.lng-d.center.lng;a.lng+=w>180?-360:w<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(y.N.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}const tu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Zs{constructor(a=tu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType&&"terrain"!==d.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=V.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=V.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=V.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){V.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const w=this._map._getUIString(`AttributionControl.${d}`);a.title=w,a.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(T=>"string"!=typeof T?"":T)):"string"==typeof this.options.customAttribution&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style.sourceCaches;for(const T in d){const Y=d[T];if(Y.used||Y.usedForTerrain){const ge=Y.getSource();ge.attribution&&a.indexOf(ge.attribution)<0&&a.push(ge.attribution)}}a=a.filter(T=>String(T).trim()),a.sort((T,Y)=>T.length-Y.length),a=a.filter((T,Y)=>{for(let ge=Y+1;ge<a.length;ge++)if(a[ge].indexOf(T)>=0)return!1;return!0});const w=a.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,a.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gr{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const w=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=V.create("div","maplibregl-ctrl");const d=V.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){V.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Tn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,w=d?this._queue.concat(d):this._queue;for(const T of w)if(T.id===a)return void(T.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const w of d)if(!w.cancelled&&(w.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Cl=y.Y([{name:"a_pos3d",type:"Int16",components:3}]);class xi extends y.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const w={};for(const T of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))w[T.key]=!0,this._renderableTilesKeys.push(T.key),this._tiles[T.key]||(T.posMatrix=new Float64Array(16),y.aQ(T.posMatrix,0,y.X,0,y.X,0,1),this._tiles[T.key]=new Dt(T,this.tileSize));for(const T in this._tiles)w[T]||delete this._tiles[T]}freeRtt(a){for(const d in this._tiles){const w=this._tiles[d];(!a||w.tileID.equals(a)||w.tileID.isChildOf(a)||a.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const w of this._renderableTilesKeys){const T=this._tiles[w].tileID;if(T.canonical.equals(a.canonical)){const Y=a.clone();Y.posMatrix=new Float64Array(16),y.aQ(Y.posMatrix,0,y.X,0,y.X,0,1),d[w]=Y}else if(T.canonical.isChildOf(a.canonical)){const Y=a.clone();Y.posMatrix=new Float64Array(16);const ge=T.canonical.z-a.canonical.z,ve=T.canonical.x-(T.canonical.x>>ge<<ge),Se=T.canonical.y-(T.canonical.y>>ge<<ge),ke=y.X>>ge;y.aQ(Y.posMatrix,0,ke,0,ke,0,1),y.J(Y.posMatrix,Y.posMatrix,[-ve*ke,-Se*ke,0]),d[w]=Y}else if(a.canonical.isChildOf(T.canonical)){const Y=a.clone();Y.posMatrix=new Float64Array(16);const ge=a.canonical.z-T.canonical.z,ve=a.canonical.x-(a.canonical.x>>ge<<ge),Se=a.canonical.y-(a.canonical.y>>ge<<ge),ke=y.X>>ge;y.aQ(Y.posMatrix,0,y.X,0,y.X,0,1),y.J(Y.posMatrix,Y.posMatrix,[ve*ke,Se*ke,0]),y.K(Y.posMatrix,Y.posMatrix,[1/2**ge,1/2**ge,0]),d[w]=Y}}return d}getSourceTile(a,d){const w=this.sourceCache._source;let T=a.overscaledZ-this.deltaZoom;if(T>w.maxzoom&&(T=w.maxzoom),T<w.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(T).key);let Y=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!Y||!Y.dem)&&d)for(;T>=w.minzoom&&(!Y||!Y.dem);)Y=this.sourceCache.getTileByID(a.scaledTo(T--).key);return Y}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class rp{constructor(a,d,w){this.painter=a,this.sourceCache=new xi(d),this.options=w,this.exaggeration="number"==typeof w.exaggeration?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,w,T=y.X){var Y;if(!(d>=0&&d<T&&w>=0&&w<T))return 0;const ge=this.getTerrainData(a),ve=null===(Y=ge.tile)||void 0===Y?void 0:Y.dem;if(!ve)return 0;const Se=((ht=[])[0]=(gt=ge.u_terrain_matrix)[0]*(Ct=(wt=[d/T*y.X,w/T*y.X])[0])+gt[4]*(Mt=wt[1])+gt[12],ht[1]=gt[1]*Ct+gt[5]*Mt+gt[13],ht),ke=[Se[0]*ve.dim,Se[1]*ve.dim],ze=Math.floor(ke[0]),Be=Math.floor(ke[1]),tt=ke[0]-ze,ot=ke[1]-Be;var ht,wt,gt,Ct,Mt;return ve.get(ze,Be)*(1-tt)*(1-ot)+ve.get(ze+1,Be)*tt*(1-ot)+ve.get(ze,Be+1)*(1-tt)*ot+ve.get(ze+1,Be+1)*tt*ot}getElevationForLngLatZoom(a,d){const{tileID:w,mercatorX:T,mercatorY:Y}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(w,T%y.X,Y%y.X,y.X)}getElevation(a,d,w,T=y.X){return this.getDEMElevation(a,d,w,T)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const T=this.painter.context,Y=new y.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(T,Y,T.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(T,new y.R({width:1,height:1}),T.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(T.gl.NEAREST,T.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=y.ao([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const T=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new q(T,d.dem.getPixels(),T.gl.RGBA,{premultiply:!1}),d.demTexture.bind(T.gl.NEAREST,T.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const w=d&&d+d.tileID.key+a.key;if(w&&!this._demMatrixCache[w]){const T=this.sourceCache.sourceCache._source.maxzoom;let Y=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=T?Y=a.canonical.z-T:y.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ge=a.canonical.x-(a.canonical.x>>Y<<Y),ve=a.canonical.y-(a.canonical.y>>Y<<Y),Se=y.bb(new Float64Array(16),[1/(y.X<<Y),1/(y.X<<Y),0]);y.J(Se,Se,[ge*y.X,ve*y.X,0]),this._demMatrixCache[a.key]={matrix:Se,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,w=d.width/devicePixelRatio,T=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===T||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(d.context,{width:w,height:T,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(d.context,{width:w,height:T,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(w,T,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,w,T))),this._fbo.colorAttachment.set("coords"===a?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let Y=0,ge=0;Y<this._coordsTextureSize;Y++)for(let ve=0;ve<this._coordsTextureSize;ve++,ge+=4)d[ge+0]=255&ve,d[ge+1]=255&Y,d[ge+2]=ve>>8<<4|Y>>8,d[ge+3]=0;const w=new y.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),T=new q(a,w,a.gl.RGBA,{premultiply:!1});return T.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=T,T}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),w=this.painter.context,T=w.gl,Y=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),ge=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),ve=Math.round(this.painter.height/devicePixelRatio);w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),T.readPixels(Y,ve-ge-1,1,1,T.RGBA,T.UNSIGNED_BYTE,d),w.bindFramebuffer.set(null);const Se=d[0]+(d[2]>>4<<8),ke=d[1]+((15&d[2])<<8),ze=this.coordsIndex[255-d[3]],Be=ze&&this.sourceCache.getTileByID(ze);if(!Be)return null;const tt=this._coordsTextureSize,ot=(1<<Be.tileID.canonical.z)*tt;return new y.Z((Be.tileID.canonical.x*tt+Se)/ot+Be.tileID.wrap,(Be.tileID.canonical.y*tt+ke)/ot,this.getElevation(Be.tileID,Se,ke,tt))}depthAtPoint(a){const d=new Uint8Array(4),w=this.painter.context,T=w.gl;return w.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),T.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,T.RGBA,T.UNSIGNED_BYTE,d),w.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new y.bc,w=new y.aY,T=this.meshSize,Y=y.X/T,ge=T*T;for(let Be=0;Be<=T;Be++)for(let tt=0;tt<=T;tt++)d.emplaceBack(tt*Y,Be*Y,0);for(let Be=0;Be<ge;Be+=T+1)for(let tt=0;tt<T;tt++)w.emplaceBack(tt+Be,T+tt+Be+1,T+tt+Be+2),w.emplaceBack(tt+Be,T+tt+Be+2,tt+Be+1);const ve=d.length,Se=ve+2*(T+1);for(const Be of[0,1])for(let tt=0;tt<=T;tt++)for(const ot of[0,1])d.emplaceBack(tt*Y,Be*y.X,ot);for(let Be=0;Be<2*T;Be+=2)w.emplaceBack(Se+Be,Se+Be+1,Se+Be+3),w.emplaceBack(Se+Be,Se+Be+3,Se+Be+2),w.emplaceBack(ve+Be,ve+Be+3,ve+Be+1),w.emplaceBack(ve+Be,ve+Be+2,ve+Be+3);const ke=d.length,ze=ke+2*(T+1);for(const Be of[0,1])for(let tt=0;tt<=T;tt++)for(const ot of[0,1])d.emplaceBack(Be*y.X,tt*Y,ot);for(let Be=0;Be<2*T;Be+=2)w.emplaceBack(ke+Be,ke+Be+1,ke+Be+3),w.emplaceBack(ke+Be,ke+Be+3,ke+Be+2),w.emplaceBack(ze+Be,ze+Be+3,ze+Be+1),w.emplaceBack(ze+Be,ze+Be+2,ze+Be+3);return this._mesh=new Qu(a.createVertexBuffer(d,Cl.members),a.createIndexBuffer(w),y.a0.simpleSegment(0,0,d.length,w.length)),this._mesh}getMeshFrameDelta(a){return 2*Math.PI*y.bd/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var w;const{tileID:T}=this._getOverscaledTileIDFromLngLatZoom(a,d);return null!==(w=this.getMinMaxElevation(T).minElevation)&&void 0!==w?w:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,w={minElevation:null,maxElevation:null};return d&&d.dem&&(w.minElevation=d.dem.min*this.exaggeration,w.maxElevation=d.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(a,d){const w=y.Z.fromLngLat(a.wrap()),T=(1<<d)*y.X,Y=w.x*T,ge=w.y*T,ve=Math.floor(Y/y.X),Se=Math.floor(ge/y.X);return{tileID:new y.S(d,0,d,ve,Se),mercatorX:Y,mercatorY:ge}}}class Lo{constructor(a,d,w){this._context=a,this._size=d,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(w.texture),{id:a,fbo:d,texture:w,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(a=>!a.inUse)}}const Ca={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Sa{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new Lo(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(w=>!a._layers[w].isHidden(d)),this._coordsDescendingInv={};for(const w in a.sourceCaches){this._coordsDescendingInv[w]={};const T=a.sourceCaches[w].getVisibleCoordinates();for(const Y of T){const ge=this.terrain.sourceCache.getTerrainCoords(Y);for(const ve in ge)this._coordsDescendingInv[w][ve]||(this._coordsDescendingInv[w][ve]=[]),this._coordsDescendingInv[w][ve].push(ge[ve])}}this._coordsDescendingInvStr={};for(const w of a._order){const T=a._layers[w],Y=T.source;if(Ca[T.type]&&!this._coordsDescendingInvStr[Y]){this._coordsDescendingInvStr[Y]={};for(const ge in this._coordsDescendingInv[Y])this._coordsDescendingInvStr[Y][ge]=this._coordsDescendingInv[Y][ge].map(ve=>ve.key).sort().join()}}for(const w of this._renderableTiles)for(const T in this._coordsDescendingInvStr){const Y=this._coordsDescendingInvStr[T][w.tileID.key];Y&&Y!==w.rttCoords[T]&&(w.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,w=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Ca[d]&&(this._prevType&&Ca[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!T))return!0;if(Ca[this._prevType]||Ca[d]&&T){this._prevType=d;const Y=this._stacks.length-1,ge=this._stacks[Y]||[];for(const ve of this._renderableTiles){if(this.pool.isFull()&&(pl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ve),ve.rtt[Y]){const ke=this.pool.getObjectForId(ve.rtt[Y].id);if(ke.stamp===ve.rtt[Y].stamp){this.pool.useObject(ke);continue}}const Se=this.pool.getOrCreateFreeObject();this.pool.useObject(Se),this.pool.stampObject(Se),ve.rtt[Y]={id:Se.id,stamp:Se.stamp},w.context.bindFramebuffer.set(Se.fbo.framebuffer),w.context.clear({color:y.aN.transparent,stencil:0}),w.currentStencilSource=void 0;for(let ke=0;ke<ge.length;ke++){const ze=w.style._layers[ge[ke]],Be=ze.source?this._coordsDescendingInv[ze.source][ve.tileID.key]:[ve.tileID];w.context.viewport.set([0,0,Se.fbo.width,Se.fbo.height]),w._renderTileClippingMasks(ze,Be),w.renderLayer(w,w.style.sourceCaches[ze.source],ze,Be),ze.source&&(ve.rttCoords[ze.source]=this._coordsDescendingInvStr[ze.source][ve.tileID.key])}}return pl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ca[d]}return!1}}const _n={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},xo=k,rc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:tu,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:y.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},$r=Z=>{Z.touchstart=Z.dragStart,Z.touchmoveWindow=Z.dragMove,Z.touchend=Z.dragEnd},Ad={showCompass:!0,showZoom:!0,visualizePitch:!1};class Es{constructor(a,d,w=!1){this.mousedown=ge=>{this.startMouse(y.e({},ge,{ctrlKey:!0,preventDefault:()=>ge.preventDefault()}),V.mousePos(this.element,ge)),V.addEventListener(window,"mousemove",this.mousemove),V.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=ge=>{this.moveMouse(ge,V.mousePos(this.element,ge))},this.mouseup=ge=>{this.mouseRotate.dragEnd(ge),this.mousePitch&&this.mousePitch.dragEnd(ge),this.offTemp()},this.touchstart=ge=>{1!==ge.targetTouches.length?this.reset():(this._startPos=this._lastPos=V.touchPos(this.element,ge.targetTouches)[0],this.startTouch(ge,this._startPos),V.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.addEventListener(window,"touchend",this.touchend))},this.touchmove=ge=>{1!==ge.targetTouches.length?this.reset():(this._lastPos=V.touchPos(this.element,ge.targetTouches)[0],this.moveTouch(ge,this._lastPos))},this.touchend=ge=>{0===ge.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const T=a.dragRotate._mouseRotate.getClickTolerance(),Y=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=is({clickTolerance:T,enable:!0}),this.touchRotate=(({enable:ge,clickTolerance:ve,bearingDegreesPerPixelMoved:Se=.8})=>{const ke=new Ei;return new Ji({clickTolerance:ve,move:(ze,Be)=>({bearingDelta:(Be.x-ze.x)*Se}),moveStateManager:ke,enable:ge,assignEvents:$r})})({clickTolerance:T,enable:!0}),this.map=a,w&&(this.mousePitch=oa({clickTolerance:Y,enable:!0}),this.touchPitch=(({enable:ge,clickTolerance:ve,pitchDegreesPerPixelMoved:Se=-.5})=>{const ke=new Ei;return new Ji({clickTolerance:ve,move:(ze,Be)=>({pitchDelta:(Be.y-ze.y)*Se}),moveStateManager:ke,enable:ge,assignEvents:$r})})({clickTolerance:Y,enable:!0})),V.addEventListener(d,"mousedown",this.mousedown),V.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),V.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),V.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),V.disableDrag()}moveMouse(a,d){const w=this.map,{bearingDelta:T}=this.mouseRotate.dragMove(a,d)||{};if(T&&w.setBearing(w.getBearing()+T),this.mousePitch){const{pitchDelta:Y}=this.mousePitch.dragMove(a,d)||{};Y&&w.setPitch(w.getPitch()+Y)}}moveTouch(a,d){const w=this.map,{bearingDelta:T}=this.touchRotate.dragMove(a,d)||{};if(T&&w.setBearing(w.getBearing()+T),this.touchPitch){const{pitchDelta:Y}=this.touchPitch.dragMove(a,d)||{};Y&&w.setPitch(w.getPitch()+Y)}}off(){const a=this.element;V.removeEventListener(a,"mousedown",this.mousedown),V.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),V.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.removeEventListener(window,"touchend",this.touchend),V.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){V.enableDrag(),V.removeEventListener(window,"mousemove",this.mousemove),V.removeEventListener(window,"mouseup",this.mouseup),V.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.removeEventListener(window,"touchend",this.touchend)}}let Sr;function nu(Z,a,d){const w=new y.N(Z.lng,Z.lat);if(Z=new y.N(Z.lng,Z.lat),a){const T=new y.N(Z.lng-360,Z.lat),Y=new y.N(Z.lng+360,Z.lat),ge=d.locationPoint(Z).distSqr(a);d.locationPoint(T).distSqr(a)<ge?Z=T:d.locationPoint(Y).distSqr(a)<ge&&(Z=Y)}for(;Math.abs(Z.lng-d.center.lng)>180;){const T=d.locationPoint(Z);if(T.x>=0&&T.y>=0&&T.x<=d.width&&T.y<=d.height)break;Z.lng>d.center.lng?Z.lng-=360:Z.lng+=360}return Z.lng!==w.lng&&d.locationPoint(Z).y>d.height/2-d.getHorizon()?Z:w}const Qa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Aa(Z,a,d){const w=Z.classList;for(const T in Qa)w.remove(`maplibregl-${d}-anchor-${T}`);w.add(`maplibregl-${d}-anchor-${a}`)}class Di extends y.E{constructor(a){if(super(),this._onKeyPress=d=>{const w=d.code,T=d.charCode||d.keyCode;"Space"!==w&&"Enter"!==w&&32!==T&&13!==T||this.togglePopup()},this._onMapClick=d=>{const w=d.originalEvent.target,T=this._element;this._popup&&(w===T||T.contains(w))&&this.togglePopup()},this._update=d=>{var w;if(!this._map)return;const T=this._map.loaded()&&!this._map.isMoving();("terrain"===d?.type||"render"===d?.type&&!T)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?nu(this._lngLat,this._flatPos,this._map.transform):null===(w=this._lngLat)||void 0===w?void 0:w.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let Y="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?Y=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(Y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let ge="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ge="rotateX(0deg)":"map"===this._pitchAlignment&&(ge=`rotateX(${this._map.getPitch()}deg)`),d&&"moveend"!==d.type||(this._pos=this._pos.round()),V.setTransform(this._element,`${Qa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${ge} ${Y}`),e.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&"moveend"===d.type)}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new y.k("dragstart"))),this.fire(new y.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new y.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&"auto"!==a.pitchAlignment?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=y.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=V.create("div");const d=V.createNS("http://www.w3.org/2000/svg","svg"),w=41,T=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${w}px`),d.setAttributeNS(null,"width",`${T}px`),d.setAttributeNS(null,"viewBox",`0 0 ${T} ${w}`);const Y=V.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"stroke","none"),Y.setAttributeNS(null,"stroke-width","1"),Y.setAttributeNS(null,"fill","none"),Y.setAttributeNS(null,"fill-rule","evenodd");const ge=V.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"fill-rule","nonzero");const ve=V.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ve.setAttributeNS(null,"fill","#000000");const Se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ct of Se){const Mt=V.createNS("http://www.w3.org/2000/svg","ellipse");Mt.setAttributeNS(null,"opacity","0.04"),Mt.setAttributeNS(null,"cx","10.5"),Mt.setAttributeNS(null,"cy","5.80029008"),Mt.setAttributeNS(null,"rx",Ct.rx),Mt.setAttributeNS(null,"ry",Ct.ry),ve.appendChild(Mt)}const ke=V.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"fill",this._color);const ze=V.createNS("http://www.w3.org/2000/svg","path");ze.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ke.appendChild(ze);const Be=V.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"opacity","0.25"),Be.setAttributeNS(null,"fill","#000000");const tt=V.createNS("http://www.w3.org/2000/svg","path");tt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Be.appendChild(tt);const ot=V.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ot.setAttributeNS(null,"fill","#FFFFFF");const ht=V.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(8.0, 8.0)");const wt=V.createNS("http://www.w3.org/2000/svg","circle");wt.setAttributeNS(null,"fill","#000000"),wt.setAttributeNS(null,"opacity","0.25"),wt.setAttributeNS(null,"cx","5.5"),wt.setAttributeNS(null,"cy","5.5"),wt.setAttributeNS(null,"r","5.4999962");const gt=V.createNS("http://www.w3.org/2000/svg","circle");gt.setAttributeNS(null,"fill","#FFFFFF"),gt.setAttributeNS(null,"cx","5.5"),gt.setAttributeNS(null,"cy","5.5"),gt.setAttributeNS(null,"r","5.4999962"),ht.appendChild(wt),ht.appendChild(gt),ge.appendChild(ve),ge.appendChild(ke),ge.appendChild(Be),ge.appendChild(ot),ge.appendChild(ht),d.appendChild(ge),d.setAttributeNS(null,"height",w*this._scale+"px"),d.setAttributeNS(null,"width",T*this._scale+"px"),this._element.appendChild(d),this._offset=y.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Aa(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),V.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=y.N.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const T=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(24.6+T)],"bottom-right":[-T,-1*(24.6+T)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,w;if(null===(d=this._map)||void 0===d||!d.terrain)return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const T=this._map,Y=T.terrain.depthAtPoint(this._pos),ge=T.terrain.getElevationForLngLatZoom(this._lngLat,T.transform.tileZoom);if(T.transform.lngLatToCameraDepth(this._lngLat,ge)-Y<.006)return void(this._element.style.opacity=this._opacity);const ve=-this._offset.y/T.transform._pixelPerMeter,Se=Math.sin(T.getPitch()*Math.PI/180)*ve,ke=T.terrain.depthAtPoint(new y.P(this._pos.x,this._pos.y-this._offset.y)),ze=T.transform.lngLatToCameraDepth(this._lngLat,ge+Se)-ke>.006;!(null===(w=this._popup)||void 0===w)&&w.isOpen()&&ze&&this._popup.remove(),this._element.style.opacity=ze?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=y.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&"auto"!==a?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return void 0===a&&void 0===d&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==a&&(this._opacity=a),void 0!==d&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Sl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Al=0,El=!1;const sp={maxWidth:100,unit:"metric"};function oh(Z,a,d){const w=d&&d.maxWidth||100,T=Z._container.clientHeight/2,Y=Z.unproject([0,T]),ge=Z.unproject([w,T]),ve=Y.distanceTo(ge);if(d&&"imperial"===d.unit){const Se=3.2808*ve;Se>5280?sc(a,w,Se/5280,Z._getUIString("ScaleControl.Miles")):sc(a,w,Se,Z._getUIString("ScaleControl.Feet"))}else d&&"nautical"===d.unit?sc(a,w,ve/1852,Z._getUIString("ScaleControl.NauticalMiles")):ve>=1e3?sc(a,w,ve/1e3,Z._getUIString("ScaleControl.Kilometers")):sc(a,w,ve,Z._getUIString("ScaleControl.Meters"))}function sc(Z,a,d,w){const T=function(Y){const ge=Math.pow(10,`${Math.floor(Y)}`.length-1);let ve=Y/ge;return ve=ve>=10?10:ve>=5?5:ve>=3?3:ve>=2?2:ve>=1?1:function(Se){const ke=Math.pow(10,Math.ceil(-Math.log(Se)/Math.LN10));return Math.round(Se*ke)/ke}(ve),ge*ve}(d);Z.style.width=a*(T/d)+"px",Z.innerHTML=`${T}&nbsp;${w}`}const eo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},lh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hn(Z){if(Z){if("number"==typeof Z){const a=Math.round(Math.abs(Z)/Math.SQRT2);return{center:new y.P(0,0),top:new y.P(0,Z),"top-left":new y.P(a,a),"top-right":new y.P(-a,a),bottom:new y.P(0,-Z),"bottom-left":new y.P(a,-a),"bottom-right":new y.P(-a,-a),left:new y.P(Z,0),right:new y.P(-Z,0)}}if(Z instanceof y.P||Array.isArray(Z)){const a=y.P.convert(Z);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:y.P.convert(Z.center||[0,0]),top:y.P.convert(Z.top||[0,0]),"top-left":y.P.convert(Z["top-left"]||[0,0]),"top-right":y.P.convert(Z["top-right"]||[0,0]),bottom:y.P.convert(Z.bottom||[0,0]),"bottom-left":y.P.convert(Z["bottom-left"]||[0,0]),"bottom-right":y.P.convert(Z["bottom-right"]||[0,0]),left:y.P.convert(Z.left||[0,0]),right:y.P.convert(Z.right||[0,0])}}return Hn(new y.P(0,0))}const Jn=k;se.AJAXError=y.bg,se.Evented=y.E,se.LngLat=y.N,se.MercatorCoordinate=y.Z,se.Point=y.P,se.addProtocol=y.bh,se.config=y.a,se.removeProtocol=y.bi,se.AttributionControl=Zs,se.BoxZoomHandler=ih,se.CanvasSource=Qe,se.CooperativeGesturesHandler=hs,se.DoubleClickZoomHandler=yr,se.DragPanHandler=Kn,se.DragRotateHandler=As,se.EdgeInsets=mo,se.FullscreenControl=class extends y.E{constructor(Z={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null!==(a=d?.shadowRoot)&&void 0!==a&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,Z&&Z.container&&(Z.container instanceof HTMLElement?this._container=Z.container:y.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(Z){return this._map=Z,this._container||(this._container=this._map.getContainer()),this._controlContainer=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){V.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const Z=this._fullscreenButton=V.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);V.create("span","maplibregl-ctrl-icon",Z).setAttribute("aria-hidden","true"),Z.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const Z=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Z),this._fullscreenButton.title=Z}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new y.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new y.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},se.GeoJSONSource=Me,se.GeolocateControl=class extends y.E{constructor(Z){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new y.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(a),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new y.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new y.N(a.coords.longitude,a.coords.latitude),w=a.coords.accuracy,T=this._map.getBearing(),Y=y.e({bearing:T},this.options.fitBoundsOptions),ge=_e.fromLngLat(d,w);this._map.fitBounds(ge,Y,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new y.N(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(1===a.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===a.code&&El)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new y.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=V.create("button","maplibregl-ctrl-geolocate",this._container),V.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===a){y.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=V.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Di({element:this._dotElement}),this._circleElement=V.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Di({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new y.k("trackuserlocationend")),this.fire(new y.k("userlocationlostfocus")))})}},this.options=y.e({},Sl,Z)}onAdd(Z){return this._map=Z,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return y._(this,arguments,void 0,function*(a=!1){if(void 0!==Sr&&!a)return Sr;if(void 0===window.navigator.permissions)return Sr=!!window.navigator.geolocation,Sr;try{Sr="denied"!==(yield window.navigator.permissions.query({name:"geolocation"})).state}catch{Sr=!!window.navigator.geolocation}return Sr})}().then(a=>this._setupUI(a)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),V.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Al=0,El=!1}_isOutOfMapMaxBounds(Z){const a=this._map.getMaxBounds(),d=Z.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const Z=this._map.getBounds(),a=Z.getSouthEast(),d=Z.getNorthEast(),w=a.distanceTo(d),T=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${T}px`,this._circleElement.style.height=`${T}px`}trigger(){if(!this._setup)return y.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new y.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Al--,El=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new y.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new y.k("trackuserlocationstart")),this.fire(new y.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let Z;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Al++,Al>1?(Z={maximumAge:6e5,timeout:0},El=!0):(Z=this.options.positionOptions,El=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Z)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},se.Hash=gl,se.ImageSource=We,se.KeyboardHandler=Xs,se.LngLatBounds=_e,se.LogoControl=Gr,se.Map=class extends ic{constructor(Z){y.be.mark(y.bf.create);const a=Object.assign(Object.assign({},rc),Z);if(null!=a.minZoom&&null!=a.maxZoom&&a.minZoom>a.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=a.minPitch&&null!=a.maxPitch&&a.minPitch>a.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=a.minPitch&&a.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=a.maxPitch&&a.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Zc(a.minZoom,a.maxZoom,a.minPitch,a.maxPitch,a.renderWorldCopies),{bearingSnap:a.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Tn,this._controls=[],this._mapId=y.a4(),this._contextLost=d=>{d.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new y.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new y.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=a.interactive,this._maxTileCacheSize=a.maxTileCacheSize,this._maxTileCacheZoomLevels=a.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===a.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===a.preserveDrawingBuffer,this._antialias=!0===a.antialias,this._trackResize=!0===a.trackResize,this._bearingSnap=a.bearingSnap,this._refreshExpiredTiles=!0===a.refreshExpiredTiles,this._fadeDuration=a.fadeDuration,this._crossSourceCollisions=!0===a.crossSourceCollisions,this._collectResourceTiming=!0===a.collectResourceTiming,this._locale=Object.assign(Object.assign({},_n),a.locale),this._clickTolerance=a.clickTolerance,this._overridePixelRatio=a.pixelRatio,this._maxCanvasSize=a.maxCanvasSize,this.transformCameraUpdate=a.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===a.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=ae.addThrottleControl(()=>this.isMoving()),this._requestManager=new oe(a.transformRequest),"string"==typeof a.container){if(this._container=document.getElementById(a.container),!this._container)throw new Error(`Container '${a.container}' not found.`)}else{if(!(a.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=a.container}if(a.maxBounds&&this.setMaxBounds(a.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let d=!1;const w=Yc(T=>{this._trackResize&&!this._removed&&this.resize(T)._update()},50);this._resizeObserver=new ResizeObserver(T=>{d?w(T):d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ba(this,a),this._hash=a.hash&&new gl("string"==typeof a.hash&&a.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),a.bounds&&(this.resize(),this.fitBounds(a.bounds,y.e({},a.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=a.localIdeographFontFamily,this._validateStyle=a.validateStyle,a.style&&this.setStyle(a.style,{localIdeographFontFamily:a.localIdeographFontFamily}),a.attributionControl&&this.addControl(new Zs("boolean"==typeof a.attributionControl?void 0:a.attributionControl)),a.maplibreLogo&&this.addControl(new Gr,a.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new y.k(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new y.k(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new y.k("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(Z,a){if(void 0===a&&(a=Z.getDefaultPosition?Z.getDefaultPosition():"top-right"),!Z||!Z.onAdd)return this.fire(new y.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=Z.onAdd(this);this._controls.push(Z);const w=this._controlPositions[a];return-1!==a.indexOf("bottom")?w.insertBefore(d,w.firstChild):w.appendChild(d),this}removeControl(Z){if(!Z||!Z.onRemove)return this.fire(new y.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(Z);return a>-1&&this._controls.splice(a,1),Z.onRemove(this),this}hasControl(Z){return this._controls.indexOf(Z)>-1}calculateCameraOptionsFromTo(Z,a,d,w){return null==w&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(Z,a,d,w)}resize(Z){var a;const d=this._containerDimensions(),w=d[0],T=d[1],Y=this._getClampedPixelRatio(w,T);if(this._resizeCanvas(w,T,Y),this.painter.resize(w,T,Y),this.painter.overLimit()){const ve=this.painter.context.gl;this._maxCanvasSize=[ve.drawingBufferWidth,ve.drawingBufferHeight];const Se=this._getClampedPixelRatio(w,T);this._resizeCanvas(w,T,Se),this.painter.resize(w,T,Se)}this.transform.resize(w,T),null===(a=this._requestedCameraState)||void 0===a||a.resize(w,T);const ge=!this._moving;return ge&&(this.stop(),this.fire(new y.k("movestart",Z)).fire(new y.k("move",Z))),this.fire(new y.k("resize",Z)),ge&&this.fire(new y.k("moveend",Z)),this}_getClampedPixelRatio(Z,a){const{0:d,1:w}=this._maxCanvasSize,T=this.getPixelRatio(),Y=Z*T,ge=a*T;return Math.min(Y>d?d/Y:1,ge>w?w/ge:1)*T}getPixelRatio(){var Z;return null!==(Z=this._overridePixelRatio)&&void 0!==Z?Z:devicePixelRatio}setPixelRatio(Z){this._overridePixelRatio=Z,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(Z){return this.transform.setMaxBounds(_e.convert(Z)),this._update()}setMinZoom(Z){if((Z=Z??-2)>=-2&&Z<=this.transform.maxZoom)return this.transform.minZoom=Z,this._update(),this.getZoom()<Z&&this.setZoom(Z),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(Z){if((Z=Z??22)>=this.transform.minZoom)return this.transform.maxZoom=Z,this._update(),this.getZoom()>Z&&this.setZoom(Z),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(Z){if((Z=Z??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(Z>=0&&Z<=this.transform.maxPitch)return this.transform.minPitch=Z,this._update(),this.getPitch()<Z&&this.setPitch(Z),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(Z){if((Z=Z??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(Z>=this.transform.minPitch)return this.transform.maxPitch=Z,this._update(),this.getPitch()>Z&&this.setPitch(Z),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(Z){return this.transform.renderWorldCopies=Z,this._update()}project(Z){return this.transform.locationPoint(y.N.convert(Z),this.style&&this.terrain)}unproject(Z){return this.transform.pointLocation(y.P.convert(Z),this.terrain)}isMoving(){var Z;return this._moving||(null===(Z=this.handlers)||void 0===Z?void 0:Z.isMoving())}isZooming(){var Z;return this._zooming||(null===(Z=this.handlers)||void 0===Z?void 0:Z.isZooming())}isRotating(){var Z;return this._rotating||(null===(Z=this.handlers)||void 0===Z?void 0:Z.isRotating())}_createDelegatedListener(Z,a,d){if("mouseenter"===Z||"mouseover"===Z){let w=!1;return{layer:a,listener:d,delegates:{mousemove:Y=>{const ge=this.getLayer(a)?this.queryRenderedFeatures(Y.point,{layers:[a]}):[];ge.length?w||(w=!0,d.call(this,new Ss(Z,this,Y.originalEvent,{features:ge}))):w=!1},mouseout:()=>{w=!1}}}}if("mouseleave"===Z||"mouseout"===Z){let w=!1;return{layer:a,listener:d,delegates:{mousemove:ge=>{(this.getLayer(a)?this.queryRenderedFeatures(ge.point,{layers:[a]}):[]).length?w=!0:w&&(w=!1,d.call(this,new Ss(Z,this,ge.originalEvent)))},mouseout:ge=>{w&&(w=!1,d.call(this,new Ss(Z,this,ge.originalEvent)))}}}}{const w=T=>{const Y=this.getLayer(a)?this.queryRenderedFeatures(T.point,{layers:[a]}):[];Y.length&&(T.features=Y,d.call(this,T),delete T.features)};return{layer:a,listener:d,delegates:{[Z]:w}}}}on(Z,a,d){if(void 0===d)return super.on(Z,a);const w=this._createDelegatedListener(Z,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Z]=this._delegatedListeners[Z]||[],this._delegatedListeners[Z].push(w);for(const T in w.delegates)this.on(T,w.delegates[T]);return this}once(Z,a,d){if(void 0===d)return super.once(Z,a);const w=this._createDelegatedListener(Z,a,d);for(const T in w.delegates)this.once(T,w.delegates[T]);return this}off(Z,a,d){return void 0===d?super.off(Z,a):(this._delegatedListeners&&this._delegatedListeners[Z]&&(w=>{const T=this._delegatedListeners[Z];for(let Y=0;Y<T.length;Y++){const ge=T[Y];if(ge.layer===a&&ge.listener===d){for(const ve in ge.delegates)this.off(ve,ge.delegates[ve]);return T.splice(Y,1),this}}})(),this)}queryRenderedFeatures(Z,a){if(!this.style)return[];let d;const w=Z instanceof y.P||Array.isArray(Z),T=w?Z:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(w?{}:Z)||{},T instanceof y.P||"number"==typeof T[0])d=[y.P.convert(T)];else{const Y=y.P.convert(T[0]),ge=y.P.convert(T[1]);d=[Y,new y.P(ge.x,Y.y),ge,new y.P(Y.x,ge.y),Y]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(Z,a){return this.style.querySourceFeatures(Z,a)}setStyle(Z,a){return!1!==(a=y.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Z?(this._diffStyle(Z,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(Z,a))}setTransformRequest(Z){return this._requestManager.setTransformRequest(Z),this}_getUIString(Z){const a=this._locale[Z];if(null==a)throw new Error(`Missing UI string '${Z}'`);return a}_updateStyle(Z,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(Z,a));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!Z)),Z?(this.style=new tn(this,a||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof Z?this.style.loadURL(Z,a,d):this.style.loadJSON(Z,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(Z,a){if("string"==typeof Z){const d=this._requestManager.transformRequest(Z,"Style");y.h(d,new AbortController).then(w=>{this._updateDiff(w.data,a)}).catch(w=>{w&&this.fire(new y.j(w))})}else"object"==typeof Z&&this._updateDiff(Z,a)}_updateDiff(Z,a){try{this.style.setState(Z,a)&&this._update(!0)}catch(d){y.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(Z,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():y.w("There is no style added to the map.")}addSource(Z,a){return this._lazyInitEmptyStyle(),this.style.addSource(Z,a),this._update(!0)}isSourceLoaded(Z){const a=this.style&&this.style.sourceCaches[Z];if(void 0!==a)return a.loaded();this.fire(new y.j(new Error(`There is no source with ID '${Z}'`)))}setTerrain(Z){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),Z){const a=this.style.sourceCaches[Z.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${Z.source}`);null===this.terrain&&a.reload();for(const d in this.style._layers){const w=this.style._layers[d];"hillshade"===w.type&&w.source===Z.source&&y.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new rp(this.painter,a,Z),this.painter.renderToTexture=new Sa(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{"style"===d.dataType?this.terrain.sourceCache.freeRtt():"source"===d.dataType&&d.tile&&(d.sourceId!==Z.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new y.k("terrain",{terrain:Z})),this}getTerrain(){var Z,a;return null!==(a=null===(Z=this.terrain)||void 0===Z?void 0:Z.options)&&void 0!==a?a:null}areTilesLoaded(){const Z=this.style&&this.style.sourceCaches;for(const a in Z){const d=Z[a]._tiles;for(const w in d){const T=d[w];if("loaded"!==T.state&&"errored"!==T.state)return!1}}return!0}removeSource(Z){return this.style.removeSource(Z),this._update(!0)}getSource(Z){return this.style.getSource(Z)}addImage(Z,a,d={}){const{pixelRatio:w=1,sdf:T=!1,stretchX:Y,stretchY:ge,content:ve,textFitWidth:Se,textFitHeight:ke}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||y.b(a))){if(void 0===a.width||void 0===a.height)return this.fire(new y.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ze,height:Be,data:tt}=a,ot=a;return this.style.addImage(Z,{data:new y.R({width:ze,height:Be},new Uint8Array(tt)),pixelRatio:w,stretchX:Y,stretchY:ge,content:ve,textFitWidth:Se,textFitHeight:ke,sdf:T,version:0,userImage:ot}),ot.onAdd&&ot.onAdd(this,Z),this}}{const{width:ze,height:Be,data:tt}=e.getImageData(a);this.style.addImage(Z,{data:new y.R({width:ze,height:Be},tt),pixelRatio:w,stretchX:Y,stretchY:ge,content:ve,textFitWidth:Se,textFitHeight:ke,sdf:T,version:0})}}updateImage(Z,a){const d=this.style.getImage(Z);if(!d)return this.fire(new y.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=a instanceof HTMLImageElement||y.b(a)?e.getImageData(a):a,{width:T,height:Y,data:ge}=w;if(void 0===T||void 0===Y)return this.fire(new y.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(T!==d.data.width||Y!==d.data.height)return this.fire(new y.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ve=!(a instanceof HTMLImageElement||y.b(a));return d.data.replace(ge,ve),this.style.updateImage(Z,d),this}getImage(Z){return this.style.getImage(Z)}hasImage(Z){return Z?!!this.style.getImage(Z):(this.fire(new y.j(new Error("Missing required image id"))),!1)}removeImage(Z){this.style.removeImage(Z)}loadImage(Z){return ae.getImage(this._requestManager.transformRequest(Z,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(Z,a){return this._lazyInitEmptyStyle(),this.style.addLayer(Z,a),this._update(!0)}moveLayer(Z,a){return this.style.moveLayer(Z,a),this._update(!0)}removeLayer(Z){return this.style.removeLayer(Z),this._update(!0)}getLayer(Z){return this.style.getLayer(Z)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(Z,a,d){return this.style.setLayerZoomRange(Z,a,d),this._update(!0)}setFilter(Z,a,d={}){return this.style.setFilter(Z,a,d),this._update(!0)}getFilter(Z){return this.style.getFilter(Z)}setPaintProperty(Z,a,d,w={}){return this.style.setPaintProperty(Z,a,d,w),this._update(!0)}getPaintProperty(Z,a){return this.style.getPaintProperty(Z,a)}setLayoutProperty(Z,a,d,w={}){return this.style.setLayoutProperty(Z,a,d,w),this._update(!0)}getLayoutProperty(Z,a){return this.style.getLayoutProperty(Z,a)}setGlyphs(Z,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(Z,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(Z,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(Z,a,d,w=>{w||this._update(!0)}),this}removeSprite(Z){return this._lazyInitEmptyStyle(),this.style.removeSprite(Z),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(Z,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(Z,a,d=>{d||this._update(!0)}),this}setLight(Z,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(Z,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(Z){return this._lazyInitEmptyStyle(),this.style.setSky(Z),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(Z,a){return this.style.setFeatureState(Z,a),this._update()}removeFeatureState(Z,a){return this.style.removeFeatureState(Z,a),this._update()}getFeatureState(Z){return this.style.getFeatureState(Z)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let Z=0,a=0;return this._container&&(Z=this._container.clientWidth||400,a=this._container.clientHeight||300),[Z,a]}_setupContainer(){const Z=this._container;Z.classList.add("maplibregl-map");const a=this._canvasContainer=V.create("div","maplibregl-canvas-container",Z);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=V.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),w=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],w);const T=this._controlContainer=V.create("div","maplibregl-control-container",Z),Y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(ge=>{Y[ge]=V.create("div",`maplibregl-ctrl-${ge} `,T)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(Z,a,d){this._canvas.width=Math.floor(d*Z),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${Z}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const Z={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",w=>{a={requestedAttributes:Z},w&&(a.statusMessage=w.statusMessage,a.type=w.type)},{once:!0});const d=this._canvas.getContext("webgl2",Z)||this._canvas.getContext("webgl",Z);if(!d){const w="Failed to initialize WebGL";throw a?(a.message=w,new Error(JSON.stringify(a))):new Error(w)}this.painter=new Wc(d,this.transform),H.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(Z){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||Z,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(Z){return this._update(),this._renderTaskQueue.add(Z)}_cancelRenderFrame(Z){this._renderTaskQueue.remove(Z)}_render(Z){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Z),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const T=this.transform.zoom,Y=e.now();this.style.zoomHistory.update(T,Y);const ge=new y.a9(T,{now:Y,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ve=ge.crossFadingFactor();1===ve&&ve===this._crossFadingFactor||(d=!0,this._crossFadingFactor=ve),this.style.update(ge)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new y.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,y.be.mark(y.bf.load),this.fire(new y.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const w=this._sourcesDirty||this._styleDirty||this._placementDirty;return w||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new y.k("idle")),!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,y.be.mark(y.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var Z;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ae.removeThrottleControl(this._imageQueueHandle),null===(Z=this._resizeObserver)||void 0===Z||Z.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a?.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),V.remove(this._canvasContainer),V.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),y.be.clearMetrics(),this._removed=!0,this.fire(new y.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,e.frameAsync(this._frameRequest).then(Z=>{y.be.frame(Z),this._frameRequest=null,this._render(Z)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(Z){this._showTileBoundaries!==Z&&(this._showTileBoundaries=Z,this._update())}get showPadding(){return!!this._showPadding}set showPadding(Z){this._showPadding!==Z&&(this._showPadding=Z,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(Z){this._showCollisionBoxes!==Z&&(this._showCollisionBoxes=Z,Z?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(Z){this._showOverdrawInspector!==Z&&(this._showOverdrawInspector=Z,this._update())}get repaint(){return!!this._repaint}set repaint(Z){this._repaint!==Z&&(this._repaint=Z,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(Z){this._vertices=Z,this._update()}get version(){return xo}getCameraTargetElevation(){return this.transform.elevation}},se.MapMouseEvent=Ss,se.MapTouchEvent=yl,se.MapWheelEvent=th,se.Marker=Di,se.NavigationControl=class{constructor(Z){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),w=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const w=this._map._getUIString(`NavigationControl.${d}`);a.title=w,a.setAttribute("aria-label",w)},this.options=y.e({},Ad,Z),this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),V.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),V.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=V.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(Z){return this._map=Z,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Es(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){V.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(Z,a){const d=V.create("button",Z,this._container);return d.type="button",d.addEventListener("click",a),d}},se.Popup=class extends y.E{constructor(Z){super(),this.remove=()=>(this._content&&V.remove(this._content),this._container&&(V.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new y.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=V.create("div","maplibregl-popup",this._map.getContainer()),this._tip=V.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const ve of this.options.className.split(" "))this._container.classList.add(ve);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?nu(this._lngLat,this._flatPos,this._map.transform):null===(d=this._lngLat)||void 0===d?void 0:d.wrap(),this._trackPointer&&!a)return;const w=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let T=this.options.anchor;const Y=Hn(this.options.offset);if(!T){const ve=this._container.offsetWidth,Se=this._container.offsetHeight;let ke;ke=w.y+Y.bottom.y<Se?["top"]:w.y>this._map.transform.height-Se?["bottom"]:[],w.x<ve/2?ke.push("left"):w.x>this._map.transform.width-ve/2&&ke.push("right"),T=0===ke.length?"bottom":ke.join("-")}let ge=w.add(Y[T]);this.options.subpixelPositioning||(ge=ge.round()),V.setTransform(this._container,`${Qa[T]} translate(${ge.x}px,${ge.y}px)`),Aa(this._container,T,"popup")},this._onClose=()=>{this.remove()},this.options=y.e(Object.create(eo),Z)}addTo(Z){return this._map&&this.remove(),this._map=Z,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new y.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(Z){return this._lngLat=y.N.convert(Z),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(Z){return this.setDOMContent(document.createTextNode(Z))}setHTML(Z){const a=document.createDocumentFragment(),d=document.createElement("body");let w;for(d.innerHTML=Z;w=d.firstChild,w;)a.appendChild(w);return this.setDOMContent(a)}getMaxWidth(){var Z;return null===(Z=this._container)||void 0===Z?void 0:Z.style.maxWidth}setMaxWidth(Z){return this.options.maxWidth=Z,this._update(),this}setDOMContent(Z){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=V.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(Z),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(Z){return this._container&&this._container.classList.add(Z),this}removeClassName(Z){return this._container&&this._container.classList.remove(Z),this}setOffset(Z){return this.options.offset=Z,this._update(),this}toggleClassName(Z){if(this._container)return this._container.classList.toggle(Z)}setSubpixelPositioning(Z){this.options.subpixelPositioning=Z}_createCloseButton(){this.options.closeButton&&(this._closeButton=V.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const Z=this._container.querySelector(lh);Z&&Z.focus()}},se.RasterDEMTileSource=Ce,se.RasterTileSource=xe,se.ScaleControl=class{constructor(Z){this._onMove=()=>{oh(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,oh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},sp),Z)}getDefaultPosition(){return"bottom-left"}onAdd(Z){return this._map=Z,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-scale",Z.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){V.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},se.ScrollZoomHandler=yo,se.Style=tn,se.TerrainControl=class{constructor(Z){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=Z}onAdd(Z){return this._map=Z,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=V.create("button","maplibregl-ctrl-terrain",this._container),V.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){V.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},se.TwoFingersTouchPitchHandler=ui,se.TwoFingersTouchRotateHandler=gr,se.TwoFingersTouchZoomHandler=sh,se.TwoFingersTouchZoomRotateHandler=eu,se.VectorTileSource=De,se.VideoSource=Xe,se.addSourceType=(Z,a)=>y._(void 0,void 0,void 0,function*(){if(Je(Z))throw new Error(`A source type called "${Z}" already exists.`);Ye[Z]=a}),se.clearPrewarmedResources=function(){const Z=L;Z&&(Z.isPreloaded()&&1===Z.numActive()?(Z.release(K),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},se.getMaxParallelImageRequests=function(){return y.a.MAX_PARALLEL_IMAGE_REQUESTS},se.getRTLTextPluginStatus=function(){return pt().getRTLTextPluginStatus()},se.getVersion=function(){return Jn},se.getWorkerCount=function(){return U.workerCount},se.getWorkerUrl=function(){return y.a.WORKER_URL},se.importScriptInWorkers=function(Z){return ie().broadcast("IS",Z)},se.prewarm=function(){B().acquire(K)},se.setMaxParallelImageRequests=function(Z){y.a.MAX_PARALLEL_IMAGE_REQUESTS=Z},se.setRTLTextPlugin=function(Z,a){return pt().setRTLTextPlugin(Z,a)},se.setWorkerCount=function(Z){U.workerCount=Z},se.setWorkerUrl=function(Z){y.a.WORKER_URL=Z}}),he}()},156:yt=>{function he(le,Ee,se,y,k,fe,ee){try{var e=le[fe](ee),V=e.value}catch(H){return void se(H)}e.done?Ee(V):Promise.resolve(V).then(y,k)}yt.exports=function Oe(le){return function(){var Ee=this,se=arguments;return new Promise(function(y,k){var fe=le.apply(Ee,se);function ee(V){he(fe,y,k,ee,e,"next",V)}function e(V){he(fe,y,k,ee,e,"throw",V)}ee(void 0)})}},yt.exports.__esModule=!0,yt.exports.default=yt.exports}},yt=>{yt(yt.s=939)}]);